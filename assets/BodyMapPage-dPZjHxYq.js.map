{"version":3,"file":"BodyMapPage-dPZjHxYq.js","sources":["../../src/components/body-mapping/BodyMapPage.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { InteractiveBodyMap } from './InteractiveBodyMap';\nimport { usePainTrackerStore } from '../../stores/pain-tracker-store';\n\nexport function BodyMapPage() {\n  const { entries, addEntry } = usePainTrackerStore();\n  const [selectedRegions, setSelectedRegions] = useState<string[]>([]);\n  const [painLevel, setPainLevel] = useState<number>(5);\n  const [notes, setNotes] = useState<string>('');\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Get recent locations from entries\n  const recentLocations = entries\n    .slice(0, 5)\n    .flatMap(e => e.baselineData?.locations || [])\n    .filter((v, i, a) => a.indexOf(v) === i)\n    .slice(0, 3);\n\n  const handleSaveEntry = async () => {\n    if (selectedRegions.length === 0) {\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      await addEntry({\n        baselineData: {\n          pain: painLevel,\n          locations: selectedRegions,\n          symptoms: [],\n        },\n        functionalImpact: {\n          limitedActivities: [],\n          assistanceNeeded: [],\n          mobilityAids: [],\n        },\n        medications: {\n          current: [],\n          changes: '',\n          effectiveness: '',\n        },\n        treatments: {\n          recent: [],\n          effectiveness: '',\n          planned: [],\n        },\n        qualityOfLife: {\n          sleepQuality: 0,\n          moodImpact: 0,\n          socialImpact: [],\n        },\n        workImpact: {\n          missedWork: 0,\n          modifiedDuties: [],\n          workLimitations: [],\n        },\n        comparison: {\n          worseningSince: '',\n          newLimitations: [],\n        },\n        notes: notes || '',\n      });\n\n      // Reset form\n      setSelectedRegions([]);\n      setPainLevel(5);\n      setNotes('');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4 space-y-6\">\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Body Map</h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Click on the body diagram to select pain locations\n        </p>\n      </div>\n\n      {/* Quick Access to Recent Locations */}\n      {recentLocations.length > 0 && (\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n          <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2\">\n            Recent Locations\n          </h3>\n          <p className=\"text-xs text-blue-900/80 dark:text-blue-100/80 mb-3\">\n            Tap a recent location to add it to your selection.\n          </p>\n          <div className=\"flex flex-wrap gap-2\">\n            {recentLocations.map((location, idx) => (\n              <button\n                key={idx}\n                onClick={() => {\n                  if (!selectedRegions.includes(location)) {\n                    setSelectedRegions([...selectedRegions, location]);\n                  }\n                }}\n                className=\"px-3 py-2 bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 rounded-md text-sm text-blue-900 dark:text-blue-100 hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n              >\n                {location}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Interactive Body Map */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-6\">\n        <div className=\"mb-3 text-sm text-gray-700 dark:text-gray-300\">\n          Click or tap body regions to select them. Selected areas are highlighted.\n        </div>\n        <InteractiveBodyMap\n          selectedRegions={selectedRegions}\n          onRegionSelect={setSelectedRegions}\n          mode=\"selection\"\n          height={720}\n        />\n      </div>\n\n      {/* Selected Regions Display */}\n      {selectedRegions.length > 0 && (\n        <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700 p-4\">\n          <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-3\">\n            Selected Areas ({selectedRegions.length})\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {selectedRegions.map(region => (\n              <span\n                key={region}\n                className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/40 text-blue-900 dark:text-blue-100 rounded-md text-sm\"\n              >\n                {region}\n                <button\n                  onClick={() => setSelectedRegions(selectedRegions.filter(r => r !== region))}\n                  className=\"hover:text-blue-700 dark:hover:text-blue-300\"\n                  aria-label={`Remove ${region}`}\n                >\n                  Ã—\n                </button>\n              </span>\n            ))}\n          </div>\n\n          {/* Pain Level Slider */}\n          <div className=\"mt-4 space-y-2\">\n            <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Pain Level: {painLevel}/10\n            </label>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              value={painLevel}\n              onChange={e => setPainLevel(Number(e.target.value))}\n              className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400\">\n              <span>No Pain</span>\n              <span>Worst Pain</span>\n            </div>\n          </div>\n\n          {/* Notes */}\n          <div className=\"mt-4 space-y-2\">\n            <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Notes (Optional)\n            </label>\n            <textarea\n              value={notes}\n              onChange={e => setNotes(e.target.value)}\n              placeholder=\"Describe your pain, triggers, or any relevant details...\"\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              rows={3}\n            />\n          </div>\n\n          {/* Save Button */}\n          <div className=\"mt-4\">\n            <button\n              onClick={handleSaveEntry}\n              disabled={isSaving || selectedRegions.length === 0}\n              className=\"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 dark:bg-gray-500 text-white font-semibold rounded-lg transition-colors disabled:cursor-not-allowed\"\n            >\n              {isSaving ? 'Saving...' : 'Save Entry'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Empty State */}\n      {selectedRegions.length === 0 && (\n        <div className=\"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700\">\n          <div className=\"inline-flex p-4 bg-gray-100 dark:bg-gray-700 rounded-full mb-4\">\n            <svg\n              className=\"w-8 h-8 text-gray-400 dark:text-gray-500\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n              />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n            Select Pain Locations\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400 max-w-md mx-auto\">\n            Click on the body diagram above to mark where you're experiencing pain\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["BodyMapPage","entries","addEntry","usePainTrackerStore","selectedRegions","setSelectedRegions","useState","painLevel","setPainLevel","notes","setNotes","isSaving","setIsSaving","recentLocations","slice","flatMap","e","baselineData","locations","filter","v","i","a","indexOf","jsxDEV","className","children","fileName","lineNumber","columnNumber","this","length","map","location","idx","onClick","includes","InteractiveBodyMap","onRegionSelect","mode","height","region","r","type","min","max","value","onChange","Number","target","placeholder","rows","async","pain","symptoms","functionalImpact","limitedActivities","assistanceNeeded","mobilityAids","medications","current","changes","effectiveness","treatments","recent","planned","qualityOfLife","sleepQuality","moodImpact","socialImpact","workImpact","missedWork","modifiedDuties","workLimitations","comparison","worseningSince","newLimitations","disabled","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d"],"mappings":"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"}