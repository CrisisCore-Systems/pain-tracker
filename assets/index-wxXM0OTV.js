const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CRTLou-M.js","assets/react-vendor-Ckhrjn13.js","assets/chart-vendor-C6yoAA-A.js","assets/date-vendor-Bjuqiw2y.js","assets/PredictivePanel-C6C35CRP.js"])))=>i.map(i=>d[i]);
import{r as _v,a as K5,g as jv,b as Av}from"./react-vendor-Ckhrjn13.js";import{r as X,R as it,p as J5,c as Cv,a as Q5,L as X5,X as eS,Y as tS,T as nS,b as sS}from"./chart-vendor-C6yoAA-A.js";import{f as Lv,p as iS}from"./date-vendor-Bjuqiw2y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var lf={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function rS(){if(Fg)return $l;Fg=1;var n=_v(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(o,c,d){var u,f={},m=null,h=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(h=c.ref);for(u in c)s.call(c,u)&&!r.hasOwnProperty(u)&&(f[u]=c[u]);if(o&&o.defaultProps)for(u in c=o.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:e,type:o,key:m,ref:h,props:f,_owner:i.current}}return $l.Fragment=t,$l.jsx=a,$l.jsxs=a,$l}var zg;function aS(){return zg||(zg=1,lf.exports=rS()),lf.exports}var l=aS(),vd={},Bg;function oS(){if(Bg)return vd;Bg=1;var n=K5();return vd.createRoot=n.createRoot,vd.hydrateRoot=n.hydrateRoot,vd}var lS=oS();const cS=jv(lS),dS="modulepreload",uS=function(n){return"/pain-tracker/"+n},$g={},Dr=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=c(t.map(d=>{if(d=uS(d),d in $g)return;$g[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":dS,u||(m.as="script"),m.crossOrigin="",m.href=d,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};class hS extends X.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary:",e,t)}render(){return this.state.hasError?this.props.fallback||l.jsxs("div",{className:"error-boundary",children:[l.jsx("h2",{children:"Something went wrong"}),l.jsx("p",{children:"Please try refreshing the page"}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}const Pv="pt",fS=50*1024,Wg=/^[a-z0-9:_-]+$/i;function cf(n,e){return`${e||Pv}:${n}`}function pS(n){try{const e=typeof n=="string"?n:JSON.stringify(n),t=new Blob([e]).size;return{data:e,truncated:!1,bytes:t}}catch{return{data:'"__SERIALIZATION_ERROR__"',truncated:!1,bytes:28}}}const un={get(n,e){try{if(!Wg.test(n))return null;const t=cf(n,e?.namespace),s=localStorage.getItem(t);if(s==null||s==='"__SERIALIZATION_ERROR__"')return null;try{let i=s;if(e?.encrypt&&(e.decryptFn||globalThis.__secureStorageDecrypt))try{i=(e.decryptFn||globalThis.__secureStorageDecrypt)(s)}catch{return null}return JSON.parse(i)}catch{return s}}catch{return null}},set(n,e,t){if(!Wg.test(n))return{success:!1,error:"INVALID_KEY"};const s=cf(n,t?.namespace);try{const{data:i,bytes:r}=pS(e),a=t?.maxValueSizeBytes??fS;if(r>a)return{success:!1,error:"VALUE_TOO_LARGE",bytes:r};let o=i;if(t?.encrypt&&(t.encryptFn||globalThis.__secureStorageEncrypt))try{o=(t.encryptFn||globalThis.__secureStorageEncrypt)(i)}catch{return{success:!1,error:"ENCRYPT_FAILED"}}return localStorage.setItem(s,o),{success:!0,bytes:r}}catch(i){return{success:!1,error:i.message}}},remove(n,e){try{const t=cf(n,e?.namespace);return localStorage.removeItem(t),!0}catch{return!1}},safeJSON(n,e,t){const s=this.get(n,t);return s??e},keys(n){const e=`${n||Pv}:`,t=[];for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);i&&i.startsWith(e)&&t.push(i.slice(e.length))}return t}},qg=n=>{let e;const t=new Set,s=(d,u)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(h=>h(e,m))}},i=()=>e,o={setState:s,getState:i,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d))},c=e=n(s,i,o);return o},mS=(n=>n?qg(n):qg),gS=n=>n;function yS(n,e=gS){const t=it.useSyncExternalStore(n.subscribe,it.useCallback(()=>e(n.getState()),[n,e]),it.useCallback(()=>e(n.getInitialState()),[n,e]));return it.useDebugValue(t),t}const xS=n=>{const e=mS(n),t=s=>yS(e,s);return Object.assign(t,e),t},vS=(n=>xS);function Gt(n,e=1){return Number.isNaN(n)||n===1/0||n===-1/0?0 .toFixed(e):n.toFixed(e)}function bS(n,e=1){return Number.isNaN(n)||n===1/0||n===-1/0?0 .toFixed(e)+"%":`${n.toFixed(e)}%`}const Ug={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},kc=new Map,bd=n=>{const e=kc.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,s])=>[t,s.getState()])):{}},wS=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const s=kc.get(t.name);if(s)return{type:"tracked",store:n,...s};const i={connection:e.connect(t),stores:{}};return kc.set(t.name,i),{type:"tracked",store:n,...i}},SS=(n,e)=>{if(e===void 0)return;const t=kc.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&kc.delete(n))},kS=n=>{var e,t;if(!n)return;const s=n.split(`
`),i=s.findIndex(a=>a.includes("api.setState"));if(i<0)return;const r=((e=s[i+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(r))==null?void 0:t[1]},NS=(n,e={})=>(t,s,i)=>{const{enabled:r,anonymousActionType:a,store:o,...c}=e;let d;try{d=(r??(Ug?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return n(t,s,i);const{connection:u,...f}=wS(o,d,c);let m=!0;i.setState=((x,w,S)=>{const j=t(x,w);if(!m)return j;const C=S===void 0?{type:a||kS(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(u?.send(C,s()),j):(u?.send({...C,type:`${o}/${C.type}`},{...bd(c.name),[o]:i.getState()}),j)}),i.devtools={cleanup:()=>{u&&typeof u.unsubscribe=="function"&&u.unsubscribe(),SS(c.name,o)}};const h=(...x)=>{const w=m;m=!1,t(...x),m=w},y=n(i.setState,s,i);if(f.type==="untracked"?u?.init(y):(f.stores[f.store]=i,u?.init(Object.fromEntries(Object.entries(f.stores).map(([x,w])=>[x,x===f.store?y:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(Ug?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return u.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return df(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){h(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const j=S.state[o];if(j==null)return;JSON.stringify(i.getState())!==JSON.stringify(j)&&h(j);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return h(y),o===void 0?u?.init(i.getState()):u?.init(bd(c.name));case"COMMIT":if(o===void 0){u?.init(i.getState());return}return u?.init(bd(c.name));case"ROLLBACK":return df(x.state,S=>{if(o===void 0){h(S),u?.init(i.getState());return}h(S[o]),u?.init(bd(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return df(x.state,S=>{if(o===void 0){h(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&h(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,j=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!j)return;h(o===void 0?j:j[o]),u?.send(null,S);return}case"PAUSE_RECORDING":return m=!m}return}}),y},_S=NS,df=(n,e)=>{let t;try{t=JSON.parse(n)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}t!==void 0&&e(t)},jS=n=>(e,t,s)=>{const i=s.subscribe;return s.subscribe=((a,o,c)=>{let d=a;if(o){const u=c?.equalityFn||Object.is;let f=a(s.getState());d=m=>{const h=a(m);if(!u(f,h)){const y=f;o(f=h,y)}},c?.fireImmediately&&o(f,f)}return i(d)}),n(e,t,s)},AS=jS;function CS(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var r;const a=c=>c===null?null:JSON.parse(c,void 0),o=(r=t.getItem(i))!=null?r:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,r)=>t.setItem(i,JSON.stringify(r,void 0)),removeItem:i=>t.removeItem(i)}}const pp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return pp(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return pp(s)(t)}}}},LS=(n,e)=>(t,s,i)=>{let r={storage:CS(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},a=!1;const o=new Set,c=new Set;let d=r.storage;if(!d)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...x)},s,i);const u=()=>{const x=r.partialize({...s()});return d.setItem(r.name,{state:x,version:r.version})},f=i.setState;i.setState=(x,w)=>(f(x,w),u());const m=n((...x)=>(t(...x),u()),s,i);i.getInitialState=()=>m;let h;const y=()=>{var x,w;if(!d)return;a=!1,o.forEach(j=>{var C;return j((C=s())!=null?C:m)});const S=((w=r.onRehydrateStorage)==null?void 0:w.call(r,(x=s())!=null?x:m))||void 0;return pp(d.getItem.bind(d))(r.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==r.version){if(r.migrate){const C=r.migrate(j.state,j.version);return C instanceof Promise?C.then(L=>[!0,L]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var C;const[L,P]=j;if(h=r.merge(P,(C=s())!=null?C:m),t(h,!0),L)return u()}).then(()=>{S?.(h,void 0),h=s(),a=!0,c.forEach(j=>j(h))}).catch(j=>{S?.(void 0,j)})};return i.persist={setOptions:x=>{r={...r,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},r.skipHydration||y(),h||m},PS=LS,MS=n=>(e,t,s)=>(s.setState=(i,r,...a)=>{const o=typeof i=="function"?J5(i):i;return e(o,r,...a)},n(s.setState,t,s)),DS=MS,Yu=vS()(_S(PS(AS(DS(n=>({entries:[],emergencyData:null,activityLogs:[],ui:{showWCBReport:!1,showOnboarding:!1,showWalkthrough:!1,showEmpathyDashboard:!1,currentFormSection:0,reportPeriod:{start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}},isLoading:!1,error:null,addEntry:e=>{n(t=>{const s={id:Date.now(),timestamp:new Date().toISOString(),baselineData:{pain:e.baselineData?.pain||0,locations:e.baselineData?.locations||[],symptoms:e.baselineData?.symptoms||[]},functionalImpact:{limitedActivities:e.functionalImpact?.limitedActivities||[],assistanceNeeded:e.functionalImpact?.assistanceNeeded||[],mobilityAids:e.functionalImpact?.mobilityAids||[]},medications:{current:e.medications?.current||[],changes:e.medications?.changes||"",effectiveness:e.medications?.effectiveness||""},treatments:{recent:e.treatments?.recent||[],effectiveness:e.treatments?.effectiveness||"",planned:e.treatments?.planned||[]},qualityOfLife:{sleepQuality:e.qualityOfLife?.sleepQuality||0,moodImpact:e.qualityOfLife?.moodImpact||0,socialImpact:e.qualityOfLife?.socialImpact||[]},workImpact:{missedWork:e.workImpact?.missedWork||0,modifiedDuties:e.workImpact?.modifiedDuties||[],workLimitations:e.workImpact?.workLimitations||[]},comparison:{worseningSince:e.comparison?.worseningSince||"",newLimitations:e.comparison?.newLimitations||[]},notes:e.notes||""};t.entries.push(s),t.error=null})},updateEntry:(e,t)=>{n(s=>{const i=s.entries.findIndex(r=>r.id===e);i>=0&&(s.entries[i]={...s.entries[i],...t})})},deleteEntry:e=>{n(t=>{t.entries=t.entries.filter(s=>s.id!==e)})},setShowWCBReport:e=>{n(t=>{t.ui.showWCBReport=e})},setShowOnboarding:e=>{n(t=>{t.ui.showOnboarding=e})},setShowWalkthrough:e=>{n(t=>{t.ui.showWalkthrough=e})},setShowEmpathyDashboard:e=>{n(t=>{t.ui.showEmpathyDashboard=e})},setCurrentFormSection:e=>{n(t=>{t.ui.currentFormSection=e})},setReportPeriod:e=>{n(t=>{t.ui.reportPeriod={...t.ui.reportPeriod,...e}})},updateEmergencyData:e=>{n(t=>{t.emergencyData=e})},addActivityLog:e=>{n(t=>{const s={id:Date.now(),...e};t.activityLogs.push(s)})},updateActivityLog:(e,t)=>{n(s=>{const i=s.activityLogs.findIndex(r=>r.id===e);i>=0&&(s.activityLogs[i]={...s.activityLogs[i],...t})})},setError:e=>{n(t=>{t.error=e})},setLoading:e=>{n(t=>{t.isLoading=e})},clearAllData:()=>{n(e=>{e.entries=[],e.activityLogs=[],e.emergencyData=null,e.error=null})},loadSampleData:()=>{Dr(async()=>{const{samplePainEntries:e}=await Promise.resolve().then(()=>PO);return{samplePainEntries:e}},void 0).then(({samplePainEntries:e})=>{n(t=>{t.entries=e})})}}))),{name:"pain-tracker-storage",partialize:n=>({entries:n.entries,emergencyData:n.emergencyData,activityLogs:n.activityLogs})}),{name:"PainTracker Store"})),TS=n=>n.entries;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ES=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Vg=n=>{const e=ES(n);return e.charAt(0).toUpperCase()+e.slice(1)},Mv=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),OS=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=X.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...o},c)=>X.createElement("svg",{ref:c,...RS,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:Mv("lucide",i),...!r&&!OS(o)&&{"aria-hidden":"true"},...o},[...a.map(([d,u])=>X.createElement(d,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(n,e)=>{const t=X.forwardRef(({className:s,...i},r)=>X.createElement(FS,{ref:r,iconNode:e,className:Mv(`lucide-${IS(Vg(n))}`,`lucide-${n}`,s),...i}));return t.displayName=Vg(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qa=$e("activity",zS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],am=$e("arrow-left",BS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mp=$e("arrow-right",$S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],il=$e("award",WS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Dv=$e("battery",qS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],VS=$e("bookmark",US);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ei=$e("brain",HS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ir=$e("calendar",GS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fs=$e("chart-column",YS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],KS=$e("chart-line",ZS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],QS=$e("chart-no-axes-column-increasing",JS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ek=$e("chart-pie",XS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nk=$e("check",tk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ik=$e("chevron-down",sk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ak=$e("chevron-left",rk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Tv=$e("chevron-right",ok);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zu=$e("circle-alert",lk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pa=$e("circle-check-big",ck);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ku=$e("circle-question-mark",dk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hk=$e("circle-x",uk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xi=$e("clock",fk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],mk=$e("cloud-off",pk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],yk=$e("cloud-rain",gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],vk=$e("database",xk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pu=$e("download",bk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],om=$e("eye-off",wk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ju=$e("eye",Sk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Nk=$e("file-json",kk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],jk=$e("file-spreadsheet",_k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],mu=$e("file-text",Ak);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Iv=$e("funnel",Ck);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ra=$e("grid-3x3",Lk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Mk=$e("grip-vertical",Pk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ev=$e("hand",Dk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ci=$e("heart",Tk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gu=$e("info",Ik);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],lm=$e("lightbulb",Ek);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ov=$e("loader-circle",Ok);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fk=$e("map-pin",Rk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Hg=$e("map",zk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],$k=$e("maximize-2",Bk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],qk=$e("minimize-2",Wk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Vk=$e("moon",Uk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Rv=$e("palette",Hk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Yk=$e("panels-top-left",Gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gg=$e("pause",Zk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Yg=$e("play",Kk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ji=$e("plus",Jk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gp=$e("refresh-cw",Qk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],cm=$e("rotate-ccw",Xk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yu=$e("save",eN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fv=$e("search",tN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ll=$e("settings",nN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qu=$e("shield",sN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],rN=$e("smartphone",iN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Xu=$e("sparkles",aN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lN=$e("square-pen",oN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],eh=$e("star",cN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],zv=$e("sun",dN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xs=$e("target",uN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fN=$e("trash-2",hN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],xu=$e("trending-down",pN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Dn=$e("trending-up",mN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Er=$e("triangle-alert",gN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],xN=$e("type",yN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bN=$e("user",vN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],SN=$e("volume-2",wN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ls=$e("x",kN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],th=$e("zap",NN),Ao=n=>typeof window<"u"?`/pain-tracker/${n}`.replace(/\/+/g,"/"):n.startsWith("/")?n:`/${n}`,rt={colors:{primary:{500:"#0ea5e9",600:"#0284c7",700:"#0369a1"},secondary:{500:"#22c55e",700:"#15803d"},accent:{400:"#c084fc",500:"#a855f7",700:"#7c3aed"},pain:{none:"#10b981",mild:"#84cc16",moderate:"#eab308",severe:"#f59e0b",extreme:"#ef4444"},status:{success:"#22c55e",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"},neutral:{0:"#ffffff",500:"#64748b",600:"#475569"}},typography:{fonts:{sans:["Inter","-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","sans-serif"],mono:["Fira Code","Monaco","Consolas","Liberation Mono","Courier New","monospace"],display:["Cal Sans","Inter","system-ui","sans-serif"]}},logos:{primary:Ao("logos/pain-tracker-logo.svg"),wordmark:Ao("logos/pain-tracker-wordmark.svg"),icon:Ao("logos/pain-tracker-icon.svg"),iconWhite:Ao("logos/pain-tracker-icon-white.svg"),appIcon:Ao("icons/app-icon-512.png"),favicon:Ao("icons/favicon.ico")},visual:{borderRadius:{md:"0.5rem"},shadows:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}},motion:{duration:{fast:"150ms",normal:"300ms",slow:"500ms"},easing:{ease:"cubic-bezier(0.4, 0, 0.2, 1)"}}},sa={":root":{"--color-primary":rt.colors.primary[500],"--color-primary-foreground":rt.colors.neutral[0],"--color-secondary":rt.colors.secondary[500],"--color-secondary-foreground":rt.colors.neutral[0],"--color-accent":rt.colors.accent[500],"--color-accent-foreground":rt.colors.neutral[0],"--color-pain-none":rt.colors.pain.none,"--color-pain-mild":rt.colors.pain.mild,"--color-pain-moderate":rt.colors.pain.moderate,"--color-pain-severe":rt.colors.pain.severe,"--color-pain-extreme":rt.colors.pain.extreme,"--font-sans":rt.typography.fonts.sans.join(", "),"--font-mono":rt.typography.fonts.mono.join(", "),"--font-display":rt.typography.fonts.display.join(", "),"--radius":rt.visual.borderRadius.md,"--shadow-sm":rt.visual.shadows.sm,"--shadow-md":rt.visual.shadows.md,"--shadow-lg":rt.visual.shadows.lg,"--duration-fast":rt.motion.duration.fast,"--duration-normal":rt.motion.duration.normal,"--duration-slow":rt.motion.duration.slow,"--easing":rt.motion.easing.ease}};function Bv({size:n=24,className:e="",color:t=rt.colors.primary[500]}){return l.jsxs("svg",{width:n,height:n,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[l.jsx("circle",{cx:"24",cy:"24",r:"22",fill:t}),l.jsx("rect",{x:"19",y:"10",width:"10",height:"28",rx:"3",fill:"white"}),l.jsx("rect",{x:"10",y:"19",width:"28",height:"10",rx:"3",fill:"white"}),l.jsx("path",{d:"M8 32 Q12 26 16 32 T24 28 Q28 24 32 28 T40 30",stroke:rt.colors.secondary[500],strokeWidth:"4",fill:"none",strokeLinecap:"round"}),l.jsx("circle",{cx:"36",cy:"12",r:"3",fill:rt.colors.accent[500]})]})}function _N({entries:n}){return n.length===0?l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"History"}),l.jsx("p",{className:"text-gray-500",children:"No entries yet"})]}):l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"History"}),l.jsx("div",{className:"space-y-4",children:[...n].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).map(e=>l.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"font-semibold",children:["Pain Level: ",e.baselineData.pain]}),l.jsx("span",{className:"text-gray-500",children:Lv(new Date(e.timestamp),"MMM d, yyyy HH:mm")})]}),(e.baselineData.locations?.length??0)>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Locations: "}),e.baselineData.locations?.join(", ")]}),(e.baselineData.symptoms?.length??0)>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms: "}),e.baselineData.symptoms?.join(", ")]}),e.notes&&l.jsxs("div",{className:"text-gray-700",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Notes: "}),e.notes]})]},e.id))})]})}const Fe={primary:{400:"#60a5fa",600:"#2563eb"},accent:{400:"#e879f9",600:"#c026d3"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},success:{50:"#f0fdf4",500:"#22c55e",700:"#15803d"},warning:{50:"#fffbeb",500:"#f59e0b",700:"#b45309"},error:{500:"#ef4444",700:"#b91c1c"},info:{50:"#ecfeff",500:"#06b6d4",700:"#0e7490"}},Zg=n=>n==="high-contrast"?{background:"#000000",foreground:"#ffffff",card:"#000000",cardForeground:"#ffffff",popover:"#000000",popoverForeground:"#ffffff",primary:"#ffff00",primaryForeground:"#000000",secondary:"#ffffff",secondaryForeground:"#000000",muted:"#333333",mutedForeground:"#ffffff",accent:"#00ffff",accentForeground:"#000000",destructive:"#ff0000",destructiveForeground:"#ffffff",success:Fe.success[500],successForeground:Fe.success[50],warning:Fe.warning[500],warningForeground:Fe.warning[50],info:Fe.info[500],infoForeground:Fe.info[50],border:"#ffffff",input:"#ffffff",ring:"#ffff00"}:n==="colorblind"?{background:Fe.neutral[50],foreground:Fe.neutral[900],card:Fe.neutral[50],cardForeground:Fe.neutral[900],popover:Fe.neutral[50],popoverForeground:Fe.neutral[900],primary:Fe.neutral[800],primaryForeground:Fe.neutral[50],secondary:Fe.neutral[600],secondaryForeground:Fe.neutral[50],muted:Fe.neutral[100],mutedForeground:Fe.neutral[700],accent:Fe.neutral[500],accentForeground:Fe.neutral[50],destructive:Fe.neutral[900],destructiveForeground:Fe.neutral[50],success:Fe.success[500],successForeground:Fe.success[50],warning:Fe.warning[500],warningForeground:Fe.warning[50],info:Fe.info[500],infoForeground:Fe.info[50],border:Fe.neutral[300],input:Fe.neutral[200],ring:Fe.neutral[800]}:n==="dark"?{background:Fe.neutral[900],foreground:Fe.neutral[50],card:Fe.neutral[800],cardForeground:Fe.neutral[100],popover:Fe.neutral[800],popoverForeground:Fe.neutral[100],primary:Fe.primary[400],primaryForeground:Fe.neutral[900],secondary:Fe.neutral[700],secondaryForeground:Fe.neutral[100],muted:Fe.neutral[700],mutedForeground:Fe.neutral[400],accent:Fe.accent[400],accentForeground:Fe.neutral[900],destructive:Fe.error[500],destructiveForeground:"#ffffff",success:Fe.success[500],successForeground:Fe.success[50],warning:Fe.warning[500],warningForeground:Fe.warning[50],info:Fe.info[500],infoForeground:Fe.info[50],border:Fe.neutral[700],input:Fe.neutral[700],ring:Fe.primary[400]}:{background:Fe.neutral[50],foreground:Fe.neutral[900],card:Fe.neutral[50],cardForeground:Fe.neutral[900],popover:Fe.neutral[50],popoverForeground:Fe.neutral[900],primary:Fe.primary[600],primaryForeground:Fe.neutral[50],secondary:Fe.neutral[100],secondaryForeground:Fe.neutral[900],muted:Fe.neutral[100],mutedForeground:Fe.neutral[700],accent:Fe.accent[600],accentForeground:Fe.neutral[50],destructive:Fe.error[700],destructiveForeground:"#ffffff",success:Fe.success[700],successForeground:Fe.success[50],warning:Fe.warning[700],warningForeground:Fe.warning[50],info:Fe.info[700],infoForeground:Fe.info[50],border:Fe.neutral[200],input:Fe.neutral[200],ring:Fe.primary[600]},$v=X.createContext(void 0),jN=()=>{const n=X.useContext($v);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},AN=({children:n,defaultMode:e="light"})=>{const[t,s]=X.useState(()=>{if(typeof window<"u")try{const f=un.get("pain-tracker-theme");if(f==="light"||f==="dark"||f==="high-contrast")return f;if(window.matchMedia&&window.matchMedia("(prefers-contrast: high)").matches)return"high-contrast";if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch(f){console.warn("Failed to access localStorage for theme preference:",f)}return e}),[i,r]=X.useState(()=>typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1),a=Zg(t),o=X.useCallback(f=>{const m=Zg(f),h=document.documentElement;Object.entries(m).forEach(([y,x])=>{h.style.setProperty(`--color-${y}`,x)}),h.setAttribute("data-theme",f)},[]),c=X.useCallback(f=>{s(f);try{un.set("pain-tracker-theme",f)}catch(m){console.warn("Failed to save theme preference to localStorage:",m)}o(f)},[o]),d=X.useCallback(()=>{c(t==="light"?"dark":t==="dark"?"high-contrast":"light")},[t,c]);X.useEffect(()=>{const f=[{query:"(prefers-color-scheme: dark)",handler:h=>{try{!un.get("pain-tracker-theme")&&t!=="high-contrast"&&c(h.matches?"dark":"light")}catch(y){console.warn("Failed to access localStorage for system theme detection:",y)}}},{query:"(prefers-contrast: high)",handler:h=>{try{!un.get("pain-tracker-theme")&&h.matches&&c("high-contrast")}catch(y){console.warn("Failed to handle high contrast preference:",y)}}},{query:"(prefers-reduced-motion: reduce)",handler:h=>{r(h.matches)}}],m=[];return f.forEach(({query:h,handler:y})=>{const x=window.matchMedia(h);x.addEventListener?(x.addEventListener("change",y),m.push(()=>x.removeEventListener("change",y))):(x.addListener(y),m.push(()=>x.removeListener(y)))}),()=>{m.forEach(h=>h())}},[t,c]),X.useEffect(()=>{o(t)},[t,o]);const u={mode:t,toggleMode:d,colors:a,setMode:c,isHighContrast:t==="high-contrast",hasReducedMotion:i};return l.jsx($v.Provider,{value:u,children:n})},Kg=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Jg=Cv,nh=(n,e)=>t=>{var s;if(e?.variants==null)return Jg(n,t?.class,t?.className);const{variants:i,defaultVariants:r}=e,a=Object.keys(i).map(d=>{const u=t?.[d],f=r?.[d];if(u===null)return null;const m=Kg(u)||Kg(f);return i[d][m]}),o=t&&Object.entries(t).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:f,className:m,...h}=u;return Object.entries(h).every(y=>{let[x,w]=y;return Array.isArray(w)?w.includes({...r,...o}[x]):{...r,...o}[x]===w})?[...d,f,m]:d},[]);return Jg(n,a,c,t?.class,t?.className)},dm="-",CN=n=>{const e=PN(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const o=a.split(dm);return o[0]===""&&o.length!==1&&o.shift(),Wv(o,e)||LN(a)},getConflictingClassGroupIds:(a,o)=>{const c=t[a]||[];return o&&s[a]?[...c,...s[a]]:c}}},Wv=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?Wv(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const r=n.join(dm);return e.validators.find(({validator:a})=>a(r))?.classGroupId},Qg=/^\[(.+)\]$/,LN=n=>{if(Qg.test(n)){const e=Qg.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},PN=n=>{const{theme:e,classGroups:t}=n,s={nextPart:new Map,validators:[]};for(const i in t)yp(t[i],s,i,e);return s},yp=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?e:Xg(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(MN(i)){yp(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([r,a])=>{yp(a,Xg(e,r),t,s)})})},Xg=(n,e)=>{let t=n;return e.split(dm).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},MN=n=>n.isThemeGetter,DN=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(r,a)=>{t.set(r,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return i(r,a),a},set(r,a){t.has(r)?t.set(r,a):i(r,a)}}},xp="!",vp=":",TN=vp.length,IN=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=i=>{const r=[];let a=0,o=0,c=0,d;for(let y=0;y<i.length;y++){let x=i[y];if(a===0&&o===0){if(x===vp){r.push(i.slice(c,y)),c=y+TN;continue}if(x==="/"){d=y;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const u=r.length===0?i:i.substring(c),f=EN(u),m=f!==u,h=d&&d>c?d-c:void 0;return{modifiers:r,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(e){const i=e+vp,r=s;s=a=>a.startsWith(i)?r(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const i=s;s=r=>t({className:r,parseClassName:i})}return s},EN=n=>n.endsWith(xp)?n.substring(0,n.length-1):n.startsWith(xp)?n.substring(1):n,ON=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let r=[];return s.forEach(a=>{a[0]==="["||e[a]?(i.push(...r.sort(),a),r=[]):r.push(a)}),i.push(...r.sort()),i}},RN=n=>({cache:DN(n.cacheSize),parseClassName:IN(n),sortModifiers:ON(n),...CN(n)}),FN=/\s+/,zN=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:r}=e,a=[],o=n.trim().split(FN);let c="";for(let d=o.length-1;d>=0;d-=1){const u=o[d],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:y,maybePostfixModifierPosition:x}=t(u);if(f){c=u+(c.length>0?" "+c:c);continue}let w=!!x,S=s(w?y.substring(0,x):y);if(!S){if(!w){c=u+(c.length>0?" "+c:c);continue}if(S=s(y),!S){c=u+(c.length>0?" "+c:c);continue}w=!1}const j=r(m).join(":"),C=h?j+xp:j,L=C+S;if(a.includes(L))continue;a.push(L);const P=i(S,w);for(let O=0;O<P.length;++O){const k=P[O];a.push(C+k)}c=u+(c.length>0?" "+c:c)}return c};function BN(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=qv(e))&&(s&&(s+=" "),s+=t);return s}const qv=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=qv(n[s]))&&(t&&(t+=" "),t+=e);return t};function $N(n,...e){let t,s,i,r=a;function a(c){const d=e.reduce((u,f)=>f(u),n());return t=RN(d),s=t.cache.get,i=t.cache.set,r=o,o(c)}function o(c){const d=s(c);if(d)return d;const u=zN(c,t);return i(c,u),u}return function(){return r(BN.apply(null,arguments))}}const Gn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Uv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Vv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,WN=/^\d+\/\d+$/,qN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,HN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Co=n=>WN.test(n),Lt=n=>!!n&&!Number.isNaN(Number(n)),Qr=n=>!!n&&Number.isInteger(Number(n)),uf=n=>n.endsWith("%")&&Lt(n.slice(0,-1)),mr=n=>qN.test(n),YN=()=>!0,ZN=n=>UN.test(n)&&!VN.test(n),Hv=()=>!1,KN=n=>HN.test(n),JN=n=>GN.test(n),QN=n=>!He(n)&&!Ge(n),XN=n=>cl(n,Zv,Hv),He=n=>Uv.test(n),Fa=n=>cl(n,Kv,ZN),hf=n=>cl(n,i4,Lt),e0=n=>cl(n,Gv,Hv),e4=n=>cl(n,Yv,JN),wd=n=>cl(n,Jv,KN),Ge=n=>Vv.test(n),Wl=n=>dl(n,Kv),t4=n=>dl(n,r4),t0=n=>dl(n,Gv),n4=n=>dl(n,Zv),s4=n=>dl(n,Yv),Sd=n=>dl(n,Jv,!0),cl=(n,e,t)=>{const s=Uv.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},dl=(n,e,t=!1)=>{const s=Vv.exec(n);return s?s[1]?e(s[1]):t:!1},Gv=n=>n==="position"||n==="percentage",Yv=n=>n==="image"||n==="url",Zv=n=>n==="length"||n==="size"||n==="bg-size",Kv=n=>n==="length",i4=n=>n==="number",r4=n=>n==="family-name",Jv=n=>n==="shadow",a4=()=>{const n=Gn("color"),e=Gn("font"),t=Gn("text"),s=Gn("font-weight"),i=Gn("tracking"),r=Gn("leading"),a=Gn("breakpoint"),o=Gn("container"),c=Gn("spacing"),d=Gn("radius"),u=Gn("shadow"),f=Gn("inset-shadow"),m=Gn("text-shadow"),h=Gn("drop-shadow"),y=Gn("blur"),x=Gn("perspective"),w=Gn("aspect"),S=Gn("ease"),j=Gn("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...L(),Ge,He],O=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],A=()=>[Ge,He,c],M=()=>[Co,"full","auto",...A()],V=()=>[Qr,"none","subgrid",Ge,He],_=()=>["auto",{span:["full",Qr,Ge,He]},Qr,Ge,He],T=()=>[Qr,"auto",Ge,He],W=()=>["auto","min","max","fr",Ge,He],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...A()],ae=()=>[Co,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],F=()=>[n,Ge,He],ce=()=>[...L(),t0,e0,{position:[Ge,He]}],Se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ge=()=>["auto","cover","contain",n4,XN,{size:[Ge,He]}],R=()=>[uf,Wl,Fa],U=()=>["","none","full",d,Ge,He],H=()=>["",Lt,Wl,Fa],te=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[Lt,uf,t0,e0],xe=()=>["","none",y,Ge,He],me=()=>["none",Lt,Ge,He],we=()=>["none",Lt,Ge,He],Me=()=>[Lt,Ge,He],Ee=()=>[Co,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[mr],breakpoint:[mr],color:[YN],container:[mr],"drop-shadow":[mr],ease:["in","out","in-out"],font:[QN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[mr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[mr],shadow:[mr],spacing:["px",Lt],text:[mr],"text-shadow":[mr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Co,He,Ge,w]}],container:["container"],columns:[{columns:[Lt,He,Ge,o]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Qr,"auto",Ge,He]}],basis:[{basis:[Co,"full","auto",o,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lt,Co,"auto","initial","none",He]}],grow:[{grow:["",Lt,Ge,He]}],shrink:[{shrink:["",Lt,Ge,He]}],order:[{order:[Qr,"first","last","none",Ge,He]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:_()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:_()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[o,"screen",...ae()]}],"min-w":[{"min-w":[o,"screen","none",...ae()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",t,Wl,Fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Ge,hf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",uf,He]}],"font-family":[{font:[t4,He,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ge,He]}],"line-clamp":[{"line-clamp":[Lt,"none",Ge,hf]}],leading:[{leading:[r,...A()]}],"list-image":[{"list-image":["none",Ge,He]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,He]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lt,"from-font","auto",Ge,Fa]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Lt,"auto",Ge,He]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:Se()}],"bg-size":[{bg:ge()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qr,Ge,He],radial:["",Ge,He],conic:[Qr,Ge,He]},s4,e4]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:H()}],"border-w-x":[{"border-x":H()}],"border-w-y":[{"border-y":H()}],"border-w-s":[{"border-s":H()}],"border-w-e":[{"border-e":H()}],"border-w-t":[{"border-t":H()}],"border-w-r":[{"border-r":H()}],"border-w-b":[{"border-b":H()}],"border-w-l":[{"border-l":H()}],"divide-x":[{"divide-x":H()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":H()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lt,Ge,He]}],"outline-w":[{outline:["",Lt,Wl,Fa]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,Sd,wd]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",f,Sd,wd]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Lt,Fa]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":H()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",m,Sd,wd]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Lt,Ge,He]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Ge,He]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[Lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:Se()}],"mask-size":[{mask:ge()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,He]}],filter:[{filter:["","none",Ge,He]}],blur:[{blur:xe()}],brightness:[{brightness:[Lt,Ge,He]}],contrast:[{contrast:[Lt,Ge,He]}],"drop-shadow":[{"drop-shadow":["","none",h,Sd,wd]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Lt,Ge,He]}],"hue-rotate":[{"hue-rotate":[Lt,Ge,He]}],invert:[{invert:["",Lt,Ge,He]}],saturate:[{saturate:[Lt,Ge,He]}],sepia:[{sepia:["",Lt,Ge,He]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,He]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[Lt,Ge,He]}],"backdrop-contrast":[{"backdrop-contrast":[Lt,Ge,He]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lt,Ge,He]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lt,Ge,He]}],"backdrop-invert":[{"backdrop-invert":["",Lt,Ge,He]}],"backdrop-opacity":[{"backdrop-opacity":[Lt,Ge,He]}],"backdrop-saturate":[{"backdrop-saturate":[Lt,Ge,He]}],"backdrop-sepia":[{"backdrop-sepia":["",Lt,Ge,He]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,He]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lt,"initial",Ge,He]}],ease:[{ease:["linear","initial",S,Ge,He]}],delay:[{delay:[Lt,Ge,He]}],animate:[{animate:["none",j,Ge,He]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Ge,He]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:Me()}],"skew-x":[{"skew-x":Me()}],"skew-y":[{"skew-y":Me()}],transform:[{transform:[Ge,He,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,He]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,He]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Lt,Wl,Fa,hf]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},o4=$N(a4);function yt(...n){return o4(Cv(n))}const l4=nh("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background active:scale-[0.98] select-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md",outline:"border border-input hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary shadow-none hover:shadow-none",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow-md",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow-md",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-md",default:"h-11 py-2 px-4",lg:"h-12 px-6 text-base rounded-lg",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"},shape:{default:"",square:"rounded-none",pill:"rounded-full",circle:"rounded-full"}},defaultVariants:{variant:"default",size:"default",shape:"default"}}),dt=it.forwardRef(({className:n,variant:e,size:t,shape:s,type:i="button",loading:r=!1,leftIcon:a,rightIcon:o,fullWidth:c=!1,disabled:d,children:u,...f},m)=>{const h=d||r;return l.jsxs("button",{className:yt(l4({variant:e,size:t,shape:s,className:n}),c&&"w-full",r&&"cursor-wait"),ref:m,type:i,disabled:h,"aria-disabled":h,...f,children:[r&&l.jsx(Ov,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),!r&&a&&l.jsx("span",{className:"mr-2 flex-shrink-0","aria-hidden":"true",children:a}),l.jsx("span",{className:yt("flex items-center justify-center",r&&"opacity-70"),children:u}),!r&&o&&l.jsx("span",{className:"ml-2 flex-shrink-0","aria-hidden":"true",children:o})]})});dt.displayName="Button";const c4=nh("rounded-lg border bg-card text-card-foreground shadow-md transition-all duration-200",{variants:{variant:{default:"border-border",elevated:"shadow-2xl hover:shadow-2xl/80",outlined:"border-2 shadow-none",filled:"bg-muted/50 border-muted",ghost:"border-transparent shadow-none bg-transparent",gradient:"bg-gradient-to-br from-card to-muted/50 border-muted/50",accented:"border-2 border-primary/40 shadow-2xl hover:shadow-2xl/80"},padding:{none:"p-0",sm:"p-3",default:"p-6",lg:"p-8",xl:"p-10"},hover:{none:"",lift:"hover:-translate-y-1.5 hover:shadow-2xl/70",glow:"hover:shadow-2xl hover:shadow-primary/15",scale:"hover:scale-[1.02] hover:shadow-lg"}},defaultVariants:{variant:"default",padding:"default",hover:"none"}}),ze=it.forwardRef(({className:n,variant:e,padding:t,hover:s,...i},r)=>l.jsxs("div",{ref:r,className:yt(c4({variant:e,padding:t,hover:s,className:n})),...i,children:["severity"in i&&i.severity?l.jsx("div",{"aria-hidden":!0,className:yt("absolute -top-2 -left-2 h-2 w-12 rounded-b-md",i.severity==="low"&&"bg-emerald-400",i.severity==="medium"&&"bg-amber-400",i.severity==="high"&&"bg-orange-500",i.severity==="critical"&&"bg-red-600")}):null,i.children]}));ze.displayName="Card";const mt=it.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:yt("flex items-center justify-between space-x-3 pb-4",n),...e}));mt.displayName="CardHeader";const gt=it.forwardRef(({className:n,...e},t)=>l.jsx("h2",{ref:t,className:yt("text-2xl font-semibold leading-none tracking-tight",n),...e}));gt.displayName="CardTitle";const Zi=it.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:yt("text-sm text-muted-foreground",n),...e}));Zi.displayName="CardDescription";const qe=it.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:yt("pt-0",n),...e}));qe.displayName="CardContent";const d4=it.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:yt("flex items-center pt-4",n),...e}));d4.displayName="CardFooter";const u4=it.forwardRef(({className:n,...e},t)=>l.jsx(ze,{ref:t,className:yt("cursor-pointer hover:shadow-md transition-shadow",n),...e}));u4.displayName="CardAction";const h4=it.forwardRef(({className:n,children:e,...t},s)=>l.jsx(ze,{ref:s,variant:"elevated",className:yt("text-center",n),...t,children:e}));h4.displayName="CardStats";const ci=it.forwardRef(({className:n,type:e,label:t,error:s,helperText:i,startIcon:r,endIcon:a,fullWidth:o=!1,variant:c="default",id:d,required:u,disabled:f,...m},h)=>{const[y,x]=it.useState(!1),[w]=it.useState(d||`input-${Math.random().toString(36).substr(2,9)}`),[S,j]=it.useState(e);it.useEffect(()=>{j(e==="password"&&y?"text":e)},[e,y]);const C=()=>{x(!y)},L=yt("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",c==="filled"&&"bg-muted/50 border-muted",c==="outlined"&&"border-2",s&&"border-destructive focus-visible:ring-destructive",r&&"pl-10",(a||e==="password")&&"pr-10",o&&"w-full");return l.jsxs("div",{className:yt("space-y-1",o&&"w-full"),children:[t&&l.jsxs("label",{htmlFor:w,className:yt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s&&"text-destructive"),children:[t,u&&l.jsx("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),l.jsxs("div",{className:"relative",children:[r&&l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:r}),l.jsx("input",{id:w,type:S,className:yt(L,n),ref:h,disabled:f,"aria-invalid":s?"true":"false","aria-describedby":s?`${w}-error`:i?`${w}-helper`:void 0,...m}),e==="password"&&l.jsx("button",{type:"button",onClick:C,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":y?"Hide password":"Show password",tabIndex:-1,children:y?l.jsx(om,{className:"h-4 w-4"}):l.jsx(Ju,{className:"h-4 w-4"})}),a&&e!=="password"&&l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:a})]}),s&&l.jsx("p",{id:`${w}-error`,className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:s}),i&&!s&&l.jsx("p",{id:`${w}-helper`,className:"text-sm text-muted-foreground",children:i})]})});ci.displayName="Input";const f4=({className:n})=>{const{mode:e,toggleMode:t}=jN();return l.jsx(dt,{variant:"ghost",size:"icon",onClick:t,className:n,"aria-label":`Switch to ${e==="light"?"dark":"light"} mode`,title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?l.jsx(Vk,{className:"h-5 w-5"}):l.jsx(zv,{className:"h-5 w-5"})})},p4=nh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",info:"border-transparent bg-info text-info-foreground hover:bg-info/80"},size:{sm:"px-2 py-0.5 text-xs",default:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"default"}}),zs=it.forwardRef(({className:n,variant:e,size:t,removable:s=!1,onRemove:i,children:r,...a},o)=>l.jsx("div",{ref:o,className:yt(p4({variant:e,size:t}),n),...a,children:l.jsxs("span",{className:"flex items-center",children:[r,s&&i&&l.jsx("button",{onClick:i,className:"ml-1 rounded-full hover:bg-black/10 p-0.5 -mr-1","aria-label":"Remove",children:l.jsx(Ls,{className:"h-3 w-3"})})]})}));zs.displayName="Badge";const m4=nh("animate-spin",{variants:{size:{xs:"h-3 w-3",sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},variant:{default:"text-muted-foreground",primary:"text-primary",secondary:"text-secondary",destructive:"text-destructive",success:"text-success",warning:"text-warning"}},defaultVariants:{size:"default",variant:"default"}}),um=it.forwardRef(({className:n,size:e,variant:t,text:s,fullScreen:i=!1,overlay:r=!1,...a},o)=>{const c=l.jsxs("div",{ref:o,className:yt("flex flex-col items-center justify-center gap-2",i&&"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r&&"absolute inset-0 z-10 bg-background/50 backdrop-blur-sm rounded-lg",n),...a,children:[l.jsx(Ov,{className:yt(m4({size:e,variant:t}))}),s&&l.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:s})]});return i||r?c:l.jsx("div",{className:"flex items-center justify-center p-4",children:c})});um.displayName="Loading";const g4=it.forwardRef(({className:n,...e},t)=>l.jsxs("div",{ref:t,className:yt("flex space-x-1",n),...e,children:[l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.3s]"}),l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.15s]"}),l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"})]}));g4.displayName="LoadingDots";const y4=it.forwardRef(({className:n,lines:e=1,height:t="h-4",...s},i)=>l.jsx("div",{ref:i,className:yt("space-y-2",n),...s,children:Array.from({length:e}).map((r,a)=>l.jsx("div",{className:yt("bg-muted animate-pulse rounded",t,a===e-1&&e>1?"w-3/4":"w-full")},a))}));y4.displayName="LoadingSkeleton";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fc(n){return n+.5|0}const ia=(n,e,t)=>Math.max(Math.min(n,t),e);function nc(n){return ia(Fc(n*2.55),0,255)}function da(n){return ia(Fc(n*255),0,255)}function Nr(n){return ia(Fc(n/2.55)/100,0,1)}function n0(n){return ia(Fc(n*100),0,100)}const li={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bp=[..."0123456789ABCDEF"],x4=n=>bp[n&15],v4=n=>bp[(n&240)>>4]+bp[n&15],kd=n=>(n&240)>>4===(n&15),b4=n=>kd(n.r)&&kd(n.g)&&kd(n.b)&&kd(n.a);function w4(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&li[n[1]]*17,g:255&li[n[2]]*17,b:255&li[n[3]]*17,a:e===5?li[n[4]]*17:255}:(e===7||e===9)&&(t={r:li[n[1]]<<4|li[n[2]],g:li[n[3]]<<4|li[n[4]],b:li[n[5]]<<4|li[n[6]],a:e===9?li[n[7]]<<4|li[n[8]]:255})),t}const S4=(n,e)=>n<255?e(n):"";function k4(n){var e=b4(n)?x4:v4;return n?"#"+e(n.r)+e(n.g)+e(n.b)+S4(n.a,e):void 0}const N4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qv(n,e,t){const s=e*Math.min(t,1-t),i=(r,a=(r+n/30)%12)=>t-s*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function _4(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function j4(n,e,t){const s=Qv(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function A4(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function hm(n){const t=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(t,s,i),a=Math.min(t,s,i),o=(r+a)/2;let c,d,u;return r!==a&&(u=r-a,d=o>.5?u/(2-r-a):u/(r+a),c=A4(t,s,i,u,r),c=c*60+.5),[c|0,d||0,o]}function fm(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(da)}function pm(n,e,t){return fm(Qv,n,e,t)}function C4(n,e,t){return fm(j4,n,e,t)}function L4(n,e,t){return fm(_4,n,e,t)}function Xv(n){return(n%360+360)%360}function P4(n){const e=N4.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?nc(+e[5]):da(+e[5]));const i=Xv(+e[2]),r=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?s=C4(i,r,a):e[1]==="hsv"?s=L4(i,r,a):s=pm(i,r,a),{r:s[0],g:s[1],b:s[2],a:t}}function M4(n,e){var t=hm(n);t[0]=Xv(t[0]+e),t=pm(t),n.r=t[0],n.g=t[1],n.b=t[2]}function D4(n){if(!n)return;const e=hm(n),t=e[0],s=n0(e[1]),i=n0(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${Nr(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const s0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},i0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function T4(){const n={},e=Object.keys(i0),t=Object.keys(s0);let s,i,r,a,o;for(s=0;s<e.length;s++){for(a=o=e[s],i=0;i<t.length;i++)r=t[i],o=o.replace(r,s0[r]);r=parseInt(i0[a],16),n[o]=[r>>16&255,r>>8&255,r&255]}return n}let Nd;function I4(n){Nd||(Nd=T4(),Nd.transparent=[0,0,0,0]);const e=Nd[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const E4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function O4(n){const e=E4.exec(n);let t=255,s,i,r;if(e){if(e[7]!==s){const a=+e[7];t=e[8]?nc(a):ia(a*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?nc(s):ia(s,0,255)),i=255&(e[4]?nc(i):ia(i,0,255)),r=255&(e[6]?nc(r):ia(r,0,255)),{r:s,g:i,b:r,a:t}}}function R4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Nr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const ff=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Lo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function F4(n,e,t){const s=Lo(Nr(n.r)),i=Lo(Nr(n.g)),r=Lo(Nr(n.b));return{r:da(ff(s+t*(Lo(Nr(e.r))-s))),g:da(ff(i+t*(Lo(Nr(e.g))-i))),b:da(ff(r+t*(Lo(Nr(e.b))-r))),a:n.a+t*(e.a-n.a)}}function _d(n,e,t){if(n){let s=hm(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=pm(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function eb(n,e){return n&&Object.assign(e||{},n)}function r0(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=da(n[3]))):(e=eb(n,{r:0,g:0,b:0,a:1}),e.a=da(e.a)),e}function z4(n){return n.charAt(0)==="r"?O4(n):P4(n)}class Nc{constructor(e){if(e instanceof Nc)return e;const t=typeof e;let s;t==="object"?s=r0(e):t==="string"&&(s=w4(e)||I4(e)||z4(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=eb(this._rgb);return e&&(e.a=Nr(e.a)),e}set rgb(e){this._rgb=r0(e)}rgbString(){return this._valid?R4(this._rgb):void 0}hexString(){return this._valid?k4(this._rgb):void 0}hslString(){return this._valid?D4(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let r;const a=t===r?.5:t,o=2*a-1,c=s.a-i.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;r=1-d,s.r=255&d*s.r+r*i.r+.5,s.g=255&d*s.g+r*i.g+.5,s.b=255&d*s.b+r*i.b+.5,s.a=a*s.a+(1-a)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=F4(this._rgb,e._rgb,t)),this}clone(){return new Nc(this.rgb)}alpha(e){return this._rgb.a=da(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Fc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _d(this._rgb,2,e),this}darken(e){return _d(this._rgb,2,-e),this}saturate(e){return _d(this._rgb,1,e),this}desaturate(e){return _d(this._rgb,1,-e),this}rotate(e){return M4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gr(){}const B4=(()=>{let n=0;return()=>n++})();function Dt(n){return n==null}function hn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Tt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function wn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Js(n,e){return wn(n)?n:e}function kt(n,e){return typeof n>"u"?e:n}const $4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,tb=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function sn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Vt(n,e,t,s){let i,r,a;if(hn(n))for(r=n.length,i=0;i<r;i++)e.call(t,n[i],i);else if(Tt(n))for(a=Object.keys(n),r=a.length,i=0;i<r;i++)e.call(t,n[a[i]],a[i])}function vu(n,e){let t,s,i,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function bu(n){if(hn(n))return n.map(bu);if(Tt(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=bu(n[t[i]]);return e}return n}function nb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function W4(n,e,t,s){if(!nb(n))return;const i=e[n],r=t[n];Tt(i)&&Tt(r)?_c(i,r,s):e[n]=bu(r)}function _c(n,e,t){const s=hn(e)?e:[e],i=s.length;if(!Tt(n))return n;t=t||{};const r=t.merger||W4;let a;for(let o=0;o<i;++o){if(a=s[o],!Tt(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)r(c[d],n,a,t)}return n}function oc(n,e){return _c(n,e,{merger:q4})}function q4(n,e,t){if(!nb(n))return;const s=e[n],i=t[n];Tt(s)&&Tt(i)?oc(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=bu(i))}const a0={"":n=>n,x:n=>n.x,y:n=>n.y};function U4(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function V4(n){const e=U4(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function ua(n,e){return(a0[e]||(a0[e]=V4(e)))(n)}function mm(n){return n.charAt(0).toUpperCase()+n.slice(1)}const jc=n=>typeof n<"u",ha=n=>typeof n=="function",o0=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function H4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const zt=Math.PI,ln=2*zt,G4=ln+zt,wu=Number.POSITIVE_INFINITY,Y4=zt/180,Tn=zt/2,za=zt/4,l0=zt*2/3,ra=Math.log10,Qi=Math.sign;function lc(n,e,t){return Math.abs(n-e)<t}function c0(n){const e=Math.round(n);n=lc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ra(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function Z4(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function K4(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function rl(n){return!K4(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function J4(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function sb(n,e,t){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function _i(n){return n*(zt/180)}function gm(n){return n*(180/zt)}function d0(n){if(!wn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function ib(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let r=Math.atan2(s,t);return r<-.5*zt&&(r+=ln),{angle:r,distance:i}}function wp(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Q4(n,e){return(n-e+G4)%ln-zt}function ys(n){return(n%ln+ln)%ln}function Ac(n,e,t,s){const i=ys(n),r=ys(e),a=ys(t),o=ys(r-i),c=ys(a-i),d=ys(i-r),u=ys(i-a);return i===r||i===a||s&&r===a||o>c&&d<u}function ns(n,e,t){return Math.max(e,Math.min(t,n))}function X4(n){return ns(n,-32768,32767)}function Ar(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function ym(n,e,t){t=t||(a=>n[a]<e);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,t(r)?i=r:s=r;return{lo:i,hi:s}}const Cr=(n,e,t,s)=>ym(n,t,s?i=>{const r=n[i][e];return r<t||r===t&&n[i+1][e]===t}:i=>n[i][e]<t),e_=(n,e,t)=>ym(n,t,s=>n[s][e]>=t);function t_(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const rb=["push","pop","shift","splice","unshift"];function n_(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rb.forEach(t=>{const s="_onData"+mm(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const a=i.apply(this,r);return n._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...r)}),a}})})}function u0(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(rb.forEach(r=>{delete n[r]}),delete n._chartjs)}function ab(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ob=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function lb(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,ob.call(window,()=>{s=!1,n.apply(e,t)}))}}function s_(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const xm=n=>n==="start"?"left":n==="end"?"right":"center",ms=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,i_=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function cb(n,e,t){const s=e.length;let i=0,r=s;if(n._sorted){const{iScale:a,vScale:o,_parsed:c}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=a.axis,{min:f,max:m,minDefined:h,maxDefined:y}=a.getUserBounds();if(h){if(i=Math.min(Cr(c,u,f).lo,t?s:Cr(e,u,a.getPixelForValue(f)).lo),d){const x=c.slice(0,i+1).reverse().findIndex(w=>!Dt(w[o.axis]));i-=Math.max(0,x)}i=ns(i,0,s-1)}if(y){let x=Math.max(Cr(c,a.axis,m,!0).hi+1,t?0:Cr(e,u,a.getPixelForValue(m),!0).hi+1);if(d){const w=c.slice(x-1).findIndex(S=>!Dt(S[o.axis]));x+=Math.max(0,w)}r=ns(x,i,s)-i}else r=s-i}return{start:i,count:r}}function db(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),r}const jd=n=>n===0||n===1,h0=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ln/t)),f0=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ln/t)+1,cc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Tn)+1,easeOutSine:n=>Math.sin(n*Tn),easeInOutSine:n=>-.5*(Math.cos(zt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>jd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>jd(n)?n:h0(n,.075,.3),easeOutElastic:n=>jd(n)?n:f0(n,.075,.3),easeInOutElastic(n){return jd(n)?n:n<.5?.5*h0(n*2,.1125,.45):.5+.5*f0(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-cc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?cc.easeInBounce(n*2)*.5:cc.easeOutBounce(n*2-1)*.5+.5};function vm(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function p0(n){return vm(n)?n:new Nc(n)}function pf(n){return vm(n)?n:new Nc(n).saturate(.5).darken(.1).hexString()}const r_=["x","y","borderWidth","radius","tension"],a_=["color","borderColor","backgroundColor"];function o_(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:a_},numbers:{type:"number",properties:r_}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function l_(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const m0=new Map;function c_(n,e){e=e||{};const t=n+JSON.stringify(e);let s=m0.get(t);return s||(s=new Intl.NumberFormat(n,e),m0.set(t,s)),s}function zc(n,e,t){return c_(e,t).format(n)}const ub={values(n){return hn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),r=d_(n,t)}const a=ra(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),zc(n,s,c)},logarithmic(n,e,t){if(n===0)return"0";const s=t[e].significand||n/Math.pow(10,Math.floor(ra(n)));return[1,2,3,5,10,15].includes(s)||e>.8*t.length?ub.numeric.call(this,n,e,t):""}};function d_(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var sh={formatters:ub};function u_(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xa=Object.create(null),Sp=Object.create(null);function dc(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const r=t[s];n=n[r]||(n[r]=Object.create(null))}return n}function mf(n,e,t){return typeof e=="string"?_c(dc(n,e),t):_c(dc(n,""),e)}class h_{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>pf(i.backgroundColor),this.hoverBorderColor=(s,i)=>pf(i.borderColor),this.hoverColor=(s,i)=>pf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return mf(this,e,t)}get(e){return dc(this,e)}describe(e,t){return mf(Sp,e,t)}override(e,t){return mf(Xa,e,t)}route(e,t,s,i){const r=dc(this,e),a=dc(this,s),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[o],d=a[i];return Tt(c)?Object.assign({},d,c):kt(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(t=>t(this))}}var fn=new h_({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[o_,l_,u_]);function f_(n){return!n||Dt(n.size)||Dt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Su(n,e,t,s,i){let r=e[i];return r||(r=e[i]=n.measureText(i).width,t.push(i)),r>s&&(s=r),s}function p_(n,e,t,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},r=s.garbageCollect=[],s.font=e),n.save(),n.font=e;let a=0;const o=t.length;let c,d,u,f,m;for(c=0;c<o;c++)if(f=t[c],f!=null&&!hn(f))a=Su(n,i,r,a,f);else if(hn(f))for(d=0,u=f.length;d<u;d++)m=f[d],m!=null&&!hn(m)&&(a=Su(n,i,r,a,m));n.restore();const h=r.length/2;if(h>t.length){for(c=0;c<h;c++)delete i[r[c]];r.splice(0,h)}return a}function Ba(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function g0(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function kp(n,e,t,s){hb(n,e,t,s,null)}function hb(n,e,t,s,i){let r,a,o,c,d,u,f,m;const h=e.pointStyle,y=e.rotation,x=e.radius;let w=(y||0)*Y4;if(h&&typeof h=="object"&&(r=h.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(w),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),h){default:i?n.ellipse(t,s,i/2,x,0,0,ln):n.arc(t,s,x,0,ln),n.closePath();break;case"triangle":u=i?i/2:x,n.moveTo(t+Math.sin(w)*u,s-Math.cos(w)*x),w+=l0,n.lineTo(t+Math.sin(w)*u,s-Math.cos(w)*x),w+=l0,n.lineTo(t+Math.sin(w)*u,s-Math.cos(w)*x),n.closePath();break;case"rectRounded":d=x*.516,c=x-d,a=Math.cos(w+za)*c,f=Math.cos(w+za)*(i?i/2-d:c),o=Math.sin(w+za)*c,m=Math.sin(w+za)*(i?i/2-d:c),n.arc(t-f,s-o,d,w-zt,w-Tn),n.arc(t+m,s-a,d,w-Tn,w),n.arc(t+f,s+o,d,w,w+Tn),n.arc(t-m,s+a,d,w+Tn,w+zt),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*x,u=i?i/2:c,n.rect(t-u,s-c,2*u,2*c);break}w+=za;case"rectRot":f=Math.cos(w)*(i?i/2:x),a=Math.cos(w)*x,o=Math.sin(w)*x,m=Math.sin(w)*(i?i/2:x),n.moveTo(t-f,s-o),n.lineTo(t+m,s-a),n.lineTo(t+f,s+o),n.lineTo(t-m,s+a),n.closePath();break;case"crossRot":w+=za;case"cross":f=Math.cos(w)*(i?i/2:x),a=Math.cos(w)*x,o=Math.sin(w)*x,m=Math.sin(w)*(i?i/2:x),n.moveTo(t-f,s-o),n.lineTo(t+f,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a);break;case"star":f=Math.cos(w)*(i?i/2:x),a=Math.cos(w)*x,o=Math.sin(w)*x,m=Math.sin(w)*(i?i/2:x),n.moveTo(t-f,s-o),n.lineTo(t+f,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a),w+=za,f=Math.cos(w)*(i?i/2:x),a=Math.cos(w)*x,o=Math.sin(w)*x,m=Math.sin(w)*(i?i/2:x),n.moveTo(t-f,s-o),n.lineTo(t+f,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a);break;case"line":a=i?i/2:Math.cos(w)*x,o=Math.sin(w)*x,n.moveTo(t-a,s-o),n.lineTo(t+a,s+o);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(w)*(i?i/2:x),s+Math.sin(w)*x);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Lr(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function ih(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function rh(n){n.restore()}function m_(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function g_(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function y_(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Dt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function x_(n,e,t,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),a=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,c=t-r.actualBoundingBoxAscent,d=t+r.actualBoundingBoxDescent,u=i.strikethrough?(c+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,u),n.lineTo(o,u),n.stroke()}}function v_(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function eo(n,e,t,s,i,r={}){const a=hn(e)?e:[e],o=r.strokeWidth>0&&r.strokeColor!=="";let c,d;for(n.save(),n.font=i.string,y_(n,r),c=0;c<a.length;++c)d=a[c],r.backdrop&&v_(n,r.backdrop),o&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Dt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,t,s,r.maxWidth)),n.fillText(d,t,s,r.maxWidth),x_(n,t,s,d,r),s+=Number(i.lineHeight);n.restore()}function Cc(n,e){const{x:t,y:s,w:i,h:r,radius:a}=e;n.arc(t+a.topLeft,s+a.topLeft,a.topLeft,1.5*zt,zt,!0),n.lineTo(t,s+r-a.bottomLeft),n.arc(t+a.bottomLeft,s+r-a.bottomLeft,a.bottomLeft,zt,Tn,!0),n.lineTo(t+i-a.bottomRight,s+r),n.arc(t+i-a.bottomRight,s+r-a.bottomRight,a.bottomRight,Tn,0,!0),n.lineTo(t+i,s+a.topRight),n.arc(t+i-a.topRight,s+a.topRight,a.topRight,0,-Tn,!0),n.lineTo(t+a.topLeft,s)}const b_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,w_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function S_(n,e){const t=(""+n).match(b_);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const k_=n=>+n||0;function bm(n,e){const t={},s=Tt(e),i=s?Object.keys(e):e,r=Tt(n)?s?a=>kt(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of i)t[a]=k_(r(a));return t}function fb(n){return bm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Za(n){return bm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function bs(n){const e=fb(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Kn(n,e){n=n||{},e=e||fn.font;let t=kt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=kt(n.style,e.style);s&&!(""+s).match(w_)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:kt(n.family,e.family),lineHeight:S_(kt(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:kt(n.weight,e.weight),string:""};return i.string=f_(i),i}function sc(n,e,t,s){let i,r,a;for(i=0,r=n.length;i<r;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function N_(n,e,t){const{min:s,max:i}=n,r=tb(e,(i-s)/2),a=(o,c)=>t&&o===0?0:o+c;return{min:a(s,-Math.abs(r)),max:a(i,r)}}function ma(n,e){return Object.assign(Object.create(n),e)}function wm(n,e=[""],t,s,i=()=>n[0]){const r=t||n;typeof s>"u"&&(s=yb("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:o=>wm([o,...n],e,r,s)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete n[0][c],!0},get(o,c){return mb(o,c,()=>D_(c,e,n,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,c){return x0(o).includes(c)},ownKeys(o){return x0(o)},set(o,c,d){const u=o._storage||(o._storage=i());return o[c]=u[c]=d,delete o._keys,!0}})}function al(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:pb(n,s),setContext:r=>al(n,r,t,s),override:r=>al(n.override(r),e,t,s)};return new Proxy(i,{deleteProperty(r,a){return delete r[a],delete n[a],!0},get(r,a,o){return mb(r,a,()=>j_(r,a,o))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(r,a,o){return n[a]=o,delete r[a],!0}})}function pb(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:ha(t)?t:()=>t,isIndexable:ha(s)?s:()=>s}}const __=(n,e)=>n?n+mm(e):e,Sm=(n,e)=>Tt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function mb(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function j_(n,e,t){const{_proxy:s,_context:i,_subProxy:r,_descriptors:a}=n;let o=s[e];return ha(o)&&a.isScriptable(e)&&(o=A_(e,o,n,t)),hn(o)&&o.length&&(o=C_(e,o,n,a.isIndexable)),Sm(e,o)&&(o=al(o,i,r&&r[e],a)),o}function A_(n,e,t,s){const{_proxy:i,_context:r,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let c=e(r,a||s);return o.delete(n),Sm(n,c)&&(c=km(i._scopes,i,n,c)),c}function C_(n,e,t,s){const{_proxy:i,_context:r,_subProxy:a,_descriptors:o}=t;if(typeof r.index<"u"&&s(n))return e[r.index%e.length];if(Tt(e[0])){const c=e,d=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const f=km(d,i,n,u);e.push(al(f,r,a&&a[n],o))}}return e}function gb(n,e,t){return ha(n)?n(e,t):n}const L_=(n,e)=>n===!0?e:typeof n=="string"?ua(e,n):void 0;function P_(n,e,t,s,i){for(const r of e){const a=L_(t,r);if(a){n.add(a);const o=gb(a._fallback,t,i);if(typeof o<"u"&&o!==t&&o!==s)return o}else if(a===!1&&typeof s<"u"&&t!==s)return null}return!1}function km(n,e,t,s){const i=e._rootScopes,r=gb(e._fallback,t,s),a=[...n,...i],o=new Set;o.add(s);let c=y0(o,a,t,r||t,s);return c===null||typeof r<"u"&&r!==t&&(c=y0(o,a,r,c,s),c===null)?!1:wm(Array.from(o),[""],i,r,()=>M_(e,t,s))}function y0(n,e,t,s,i){for(;t;)t=P_(n,e,t,s,i);return t}function M_(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return hn(i)&&Tt(t)?t:i||{}}function D_(n,e,t,s){let i;for(const r of e)if(i=yb(__(r,n),t),typeof i<"u")return Sm(n,i)?km(t,s,n,i):i}function yb(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function x0(n){let e=n._keys;return e||(e=n._keys=T_(n._scopes)),e}function T_(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function xb(n,e,t,s){const{iScale:i}=n,{key:r="r"}=this._parsing,a=new Array(s);let o,c,d,u;for(o=0,c=s;o<c;++o)d=o+t,u=e[d],a[o]={r:i.parse(ua(u,r),d)};return a}const I_=Number.EPSILON||1e-14,ol=(n,e)=>e<n.length&&!n[e].skip&&n[e],vb=n=>n==="x"?"y":"x";function E_(n,e,t,s){const i=n.skip?e:n,r=e,a=t.skip?e:t,o=wp(r,i),c=wp(a,r);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,m=s*u;return{previous:{x:r.x-f*(a.x-i.x),y:r.y-f*(a.y-i.y)},next:{x:r.x+m*(a.x-i.x),y:r.y+m*(a.y-i.y)}}}function O_(n,e,t){const s=n.length;let i,r,a,o,c,d=ol(n,0);for(let u=0;u<s-1;++u)if(c=d,d=ol(n,u+1),!(!c||!d)){if(lc(e[u],0,I_)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],r=t[u+1]/e[u],o=Math.pow(i,2)+Math.pow(r,2),!(o<=9)&&(a=3/Math.sqrt(o),t[u]=i*a*e[u],t[u+1]=r*a*e[u])}}function R_(n,e,t="x"){const s=vb(t),i=n.length;let r,a,o,c=ol(n,0);for(let d=0;d<i;++d){if(a=o,o=c,c=ol(n,d+1),!o)continue;const u=o[t],f=o[s];a&&(r=(u-a[t])/3,o[`cp1${t}`]=u-r,o[`cp1${s}`]=f-r*e[d]),c&&(r=(c[t]-u)/3,o[`cp2${t}`]=u+r,o[`cp2${s}`]=f+r*e[d])}}function F_(n,e="x"){const t=vb(e),s=n.length,i=Array(s).fill(0),r=Array(s);let a,o,c,d=ol(n,0);for(a=0;a<s;++a)if(o=c,c=d,d=ol(n,a+1),!!c){if(d){const u=d[e]-c[e];i[a]=u!==0?(d[t]-c[t])/u:0}r[a]=o?d?Qi(i[a-1])!==Qi(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}O_(n,i,r),R_(n,r,e)}function Ad(n,e,t){return Math.max(Math.min(n,t),e)}function z_(n,e){let t,s,i,r,a,o=Lr(n[0],e);for(t=0,s=n.length;t<s;++t)a=r,r=o,o=t<s-1&&Lr(n[t+1],e),r&&(i=n[t],a&&(i.cp1x=Ad(i.cp1x,e.left,e.right),i.cp1y=Ad(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=Ad(i.cp2x,e.left,e.right),i.cp2y=Ad(i.cp2y,e.top,e.bottom)))}function B_(n,e,t,s,i){let r,a,o,c;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")F_(n,i);else{let d=s?n[n.length-1]:n[0];for(r=0,a=n.length;r<a;++r)o=n[r],c=E_(d,o,n[Math.min(r+1,a-(s?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&z_(n,t)}function Nm(){return typeof window<"u"&&typeof document<"u"}function _m(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ku(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const ah=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function $_(n,e){return ah(n).getPropertyValue(e)}const W_=["top","right","bottom","left"];function Ka(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=W_[i];s[r]=parseFloat(n[e+"-"+r+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const q_=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function U_(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:r}=s;let a=!1,o,c;if(q_(i,r,n.target))o=i,c=r;else{const d=e.getBoundingClientRect();o=s.clientX-d.left,c=s.clientY-d.top,a=!0}return{x:o,y:c,box:a}}function Ua(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=ah(t),r=i.boxSizing==="border-box",a=Ka(i,"padding"),o=Ka(i,"border","width"),{x:c,y:d,box:u}=U_(n,t),f=a.left+(u&&o.left),m=a.top+(u&&o.top);let{width:h,height:y}=e;return r&&(h-=a.width+o.width,y-=a.height+o.height),{x:Math.round((c-f)/h*t.width/s),y:Math.round((d-m)/y*t.height/s)}}function V_(n,e,t){let s,i;if(e===void 0||t===void 0){const r=n&&_m(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const a=r.getBoundingClientRect(),o=ah(r),c=Ka(o,"border","width"),d=Ka(o,"padding");e=a.width-d.width-c.width,t=a.height-d.height-c.height,s=ku(o.maxWidth,r,"clientWidth"),i=ku(o.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:s||wu,maxHeight:i||wu}}const Cd=n=>Math.round(n*10)/10;function H_(n,e,t,s){const i=ah(n),r=Ka(i,"margin"),a=ku(i.maxWidth,n,"clientWidth")||wu,o=ku(i.maxHeight,n,"clientHeight")||wu,c=V_(n,e,t);let{width:d,height:u}=c;if(i.boxSizing==="content-box"){const m=Ka(i,"border","width"),h=Ka(i,"padding");d-=h.width+m.width,u-=h.height+m.height}return d=Math.max(0,d-r.width),u=Math.max(0,s?d/s:u-r.height),d=Cd(Math.min(d,a,c.maxWidth)),u=Cd(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Cd(d/2)),(e!==void 0||t!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Cd(Math.floor(u*s))),{width:d,height:u}}function v0(n,e,t){const s=e||1,i=Math.floor(n.height*s),r=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||a.height!==i||a.width!==r?(n.currentDevicePixelRatio=s,a.height=i,a.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const G_=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Nm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function b0(n,e){const t=$_(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Va(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Y_(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Z_(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},a=Va(n,i,t),o=Va(i,r,t),c=Va(r,e,t),d=Va(a,o,t),u=Va(o,c,t);return Va(d,u,t)}const K_=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},J_=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Ko(n,e,t){return n?K_(e,t):J_()}function bb(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function wb(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Sb(n){return n==="angle"?{between:Ac,compare:Q4,normalize:ys}:{between:Ar,compare:(e,t)=>e-t,normalize:e=>e}}function w0({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function Q_(n,e,t){const{property:s,start:i,end:r}=t,{between:a,normalize:o}=Sb(s),c=e.length;let{start:d,end:u,loop:f}=n,m,h;if(f){for(d+=c,u+=c,m=0,h=c;m<h&&a(o(e[d%c][s]),i,r);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:n.style}}function kb(n,e,t){if(!t)return[n];const{property:s,start:i,end:r}=t,a=e.length,{compare:o,between:c,normalize:d}=Sb(s),{start:u,end:f,loop:m,style:h}=Q_(n,e,t),y=[];let x=!1,w=null,S,j,C;const L=()=>c(i,C,S)&&o(i,C)!==0,P=()=>o(r,S)===0||c(r,C,S),O=()=>x||L(),k=()=>!x||P();for(let A=u,M=u;A<=f;++A)j=e[A%a],!j.skip&&(S=d(j[s]),S!==C&&(x=c(S,i,r),w===null&&O()&&(w=o(S,i)===0?A:M),w!==null&&k()&&(y.push(w0({start:w,end:A,loop:m,count:a,style:h})),w=null),M=A,C=S));return w!==null&&y.push(w0({start:w,end:f,loop:m,count:a,style:h})),y}function Nb(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const r=kb(s[i],n.points,e);r.length&&t.push(...r)}return t}function X_(n,e,t,s){let i=0,r=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&n[r%e].skip;)r--;return r%=e,{start:i,end:r}}function ej(n,e,t,s){const i=n.length,r=[];let a=e,o=n[e],c;for(c=e+1;c<=t;++c){const d=n[c%i];d.skip||d.stop?o.skip||(s=!1,r.push({start:e%i,end:(c-1)%i,loop:s}),e=a=d.stop?c:null):(a=c,o.skip&&(e=c)),o=d}return a!==null&&r.push({start:e%i,end:a%i,loop:s}),r}function tj(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const r=!!n._loop,{start:a,end:o}=X_(t,i,r,s);if(s===!0)return S0(n,[{start:a,end:o,loop:r}],t,e);const c=o<a?o+i:o,d=!!n._fullLoop&&a===0&&o===i-1;return S0(n,ej(t,a,c,d),t,e)}function S0(n,e,t,s){return!s||!s.setContext||!t?e:nj(n,e,t,s)}function nj(n,e,t,s){const i=n._chart.getContext(),r=k0(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,c=t.length,d=[];let u=r,f=e[0].start,m=f;function h(y,x,w,S){const j=o?-1:1;if(y!==x){for(y+=c;t[y%c].skip;)y-=j;for(;t[x%c].skip;)x+=j;y%c!==x%c&&(d.push({start:y%c,end:x%c,loop:w,style:S}),u=S,f=x%c)}}for(const y of e){f=o?f:y.start;let x=t[f%c],w;for(m=f+1;m<=y.end;m++){const S=t[m%c];w=k0(s.setContext(ma(i,{type:"segment",p0:x,p1:S,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:a}))),sj(w,u)&&h(f,m-1,y.loop,u),x=S,u=w}f<m-1&&h(f,m-1,y.loop,u)}return d}function k0(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function sj(n,e){if(!e)return!1;const t=[],s=function(i,r){return vm(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function Ld(n,e,t){return n.options.clip?n[t]:e[t]}function ij(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:Ld(t,e,"left"),right:Ld(t,e,"right"),top:Ld(s,e,"top"),bottom:Ld(s,e,"bottom")}:e}function _b(n,e){const t=e._clip;if(t.disabled)return!1;const s=ij(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const r=t.listeners[i],a=t.duration;r.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(s-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=ob.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let a=r.length-1,o=!1,c;for(;a>=0;--a)c=r[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wr=new rj;const N0="transparent",aj={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=p0(n||N0),i=s.valid&&p0(e||N0);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class oj{constructor(e,t,s,i){const r=t[s];i=sc([e.to,i,r,e.from]);const a=sc([e.from,r,i]);this._active=!0,this._fn=e.fn||aj[e.type||typeof a],this._easing=cc[e.easing]||cc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,a=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=sc([e.to,t,i,e.from]),this._from=sc([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,r=this._from,a=this._loop,o=this._to;let c;if(this._active=r!==o&&(a||t<s),!this._active){this._target[i]=o,this._notify(!0);return}if(t<0){this._target[i]=r;return}c=t/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class jb{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Tt(e))return;const t=Object.keys(fn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Tt(r))return;const a={};for(const o of t)a[o]=r[o];(hn(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!s.has(o))&&s.set(o,a)})})}_animateOptions(e,t){const s=t.options,i=cj(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&lj(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,t){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[d];let f=r[d];const m=s.get(d);if(f)if(m&&f.active()){f.update(m,u,o);continue}else f.cancel();if(!m||!m.duration){e[d]=u;continue}r[d]=f=new oj(m,e,d,u),i.push(f)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return wr.add(this._chart,s),!0}}function lj(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function cj(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function _0(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function dj(n,e,t){if(t===!1)return!1;const s=_0(n,t),i=_0(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function uj(n){let e,t,s,i;return Tt(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function Ab(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)t.push(s[i].index);return t}function j0(n,e,t,s={}){const i=n.keys,r=s.mode==="single";let a,o,c,d;if(e===null)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(c=+i[a],c===t){if(u=!0,s.all)continue;break}d=n.values[c],wn(d)&&(r||e===0||Qi(e)===Qi(d))&&(e+=d)}return!u&&!s.all?0:e}function hj(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],o[c]={[i]:u,[r]:n[u]};return o}function gf(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function fj(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function pj(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function mj(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function A0(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function C0(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:r,vScale:a,index:o}=s,c=r.axis,d=a.axis,u=fj(r,a,s),f=e.length;let m;for(let h=0;h<f;++h){const y=e[h],{[c]:x,[d]:w}=y,S=y._stacks||(y._stacks={});m=S[d]=mj(i,u,x),m[o]=w,m._top=A0(m,a,!0,s.type),m._bottom=A0(m,a,!1,s.type);const j=m._visualValues||(m._visualValues={});j[o]=w}}function yf(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function gj(n,e){return ma(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yj(n,e,t){return ma(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ql(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][t]===void 0)return;delete r[s][t],r[s]._visualValues!==void 0&&r[s]._visualValues[t]!==void 0&&delete r[s]._visualValues[t]}}}const xf=n=>n==="reset"||n==="none",L0=(n,e)=>e?n:Object.assign({},n),xj=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Ab(t,!0),values:null};class ga{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ql(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(f,m,h,y)=>f==="x"?m:f==="r"?y:h,r=t.xAxisID=kt(s.xAxisID,yf(e,"x")),a=t.yAxisID=kt(s.yAxisID,yf(e,"y")),o=t.rAxisID=kt(s.rAxisID,yf(e,"r")),c=t.indexAxis,d=t.iAxisID=i(c,r,a,o),u=t.vAxisID=i(c,a,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&u0(this._data,this),e._stacked&&ql(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Tt(t)){const i=this._cachedMeta;this._data=hj(t,i)}else if(s!==t){if(s){u0(s,this);const i=this._cachedMeta;ql(i),i._parsed=[]}t&&Object.isExtensible(t)&&n_(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=gf(t.vScale,t),t.stack!==s.stack&&(i=!0,ql(t),t.stack=s.stack),this._resyncElements(e),(i||r!==t._stacked)&&(C0(this,t._parsed),t._stacked=gf(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:a}=s,o=r.axis;let c=e===0&&t===i.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,f,m;if(this._parsing===!1)s._parsed=i,s._sorted=!0,m=i;else{hn(i[e])?m=this.parseArrayData(s,i,e,t):Tt(i[e])?m=this.parseObjectData(s,i,e,t):m=this.parsePrimitiveData(s,i,e,t);const h=()=>f[o]===null||d&&f[o]<d[o];for(u=0;u<t;++u)s._parsed[u+e]=f=m[u],c&&(h()&&(c=!1),d=f);s._sorted=c}a&&C0(this,m)}parsePrimitiveData(e,t,s,i){const{iScale:r,vScale:a}=e,o=r.axis,c=a.axis,d=r.getLabels(),u=r===a,f=new Array(i);let m,h,y;for(m=0,h=i;m<h;++m)y=m+s,f[m]={[o]:u||r.parse(d[y],y),[c]:a.parse(t[y],y)};return f}parseArrayData(e,t,s,i){const{xScale:r,yScale:a}=e,o=new Array(i);let c,d,u,f;for(c=0,d=i;c<d;++c)u=c+s,f=t[u],o[c]={x:r.parse(f[0],u),y:a.parse(f[1],u)};return o}parseObjectData(e,t,s,i){const{xScale:r,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let u,f,m,h;for(u=0,f=i;u<f;++u)m=u+s,h=t[m],d[u]={x:r.parse(ua(h,o),m),y:a.parse(ua(h,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,r=this._cachedMeta,a=t[e.axis],o={keys:Ab(i,!0),values:t._stacks[e.axis]._visualValues};return j0(o,a,r.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const r=s[t.axis];let a=r===null?NaN:r;const o=i&&s._stacks[t.axis];i&&o&&(i.values=o,a=j0(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,a=i.length,o=this._getOtherScale(e),c=xj(t,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=pj(o);let m,h;function y(){h=i[m];const x=h[o.axis];return!wn(h[e.axis])||u>x||f<x}for(m=0;m<a&&!(!y()&&(this.updateRangeFromParsed(d,e,h,c),r));++m);if(r){for(m=a-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(d,e,h,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,r,a;for(i=0,r=t.length;i<r;++i)a=t[i][e.axis],wn(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=uj(kt(this.options.clip,dj(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],r=t.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,o,c),u=o;u<o+c;++u){const f=i[u];f.hidden||(f.active&&d?a.push(f):f.draw(e,r))}for(u=0;u<a.length;++u)a[u].draw(e,r)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=yj(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=gj(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",r=this._cachedDataOpts,a=e+"-"+t,o=r[a],c=this.enableOptionSharing&&jc(s);if(o)return L0(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),h=Object.keys(fn.elements[e]),y=()=>this.getContext(s,i,t),x=d.resolveNamedOptions(m,h,y,f);return x.$shared&&(x.$shared=c,r[a]=Object.freeze(L0(x,c))),x}_resolveAnimations(e,t,s){const i=this.chart,r=this._cachedDataOpts,a=`animation-${t}`,o=r[a];if(o)return o;let c;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,t),m=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(m,this.getContext(e,s,t))}const d=new jb(i,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||xf(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(s),a=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,s),{sharedOptions:r,includeOptions:a}}updateElement(e,t,s,i){xf(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!xf(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const i=s.length,r=t.length,a=Math.min(r,i);a&&this.parse(0,a),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,s=!0){const i=this._cachedMeta,r=i.data,a=e+t;let o;const c=d=>{for(d.length+=t,o=d.length-1;o>=a;o--)d[o]=d[o-t]};for(c(r),o=e;o<a;++o)r[o]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&ql(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function vj(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let s=[];for(let i=0,r=t.length;i<r;i++)s=s.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=ab(s.sort((i,r)=>i-r))}return n._cache.$bar}function bj(n){const e=n.iScale,t=vj(e,n.type);let s=e._length,i,r,a,o;const c=()=>{a===32767||a===-32768||(jc(o)&&(s=Math.min(s,Math.abs(a-o)||s)),o=a)};for(i=0,r=t.length;i<r;++i)a=e.getPixelForValue(t[i]),c();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)a=e.getPixelForTick(i),c();return s}function wj(n,e,t,s){const i=t.barThickness;let r,a;return Dt(i)?(r=e.min*t.categoryPercentage,a=t.barPercentage):(r=i*s,a=1),{chunk:r/s,ratio:a,start:e.pixels[n]-r/2}}function Sj(n,e,t,s){const i=e.pixels,r=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const c=t.categoryPercentage;a===null&&(a=r-(o===null?e.end-e.start:o-r)),o===null&&(o=r+r-a);const d=r-(r-Math.min(a,o))/2*c;return{chunk:Math.abs(o-a)/2*c/s,ratio:t.barPercentage,start:d}}function kj(n,e,t,s){const i=t.parse(n[0],s),r=t.parse(n[1],s),a=Math.min(i,r),o=Math.max(i,r);let c=a,d=o;Math.abs(a)>Math.abs(o)&&(c=o,d=a),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:i,end:r,min:a,max:o}}function Cb(n,e,t,s){return hn(n)?kj(n,e,t,s):e[t.axis]=t.parse(n,s),e}function P0(n,e,t,s){const i=n.iScale,r=n.vScale,a=i.getLabels(),o=i===r,c=[];let d,u,f,m;for(d=t,u=t+s;d<u;++d)m=e[d],f={},f[i.axis]=o||i.parse(a[d],d),c.push(Cb(m,f,r,d));return c}function vf(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Nj(n,e,t){return n!==0?Qi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function _j(n){let e,t,s,i,r;return n.horizontal?(e=n.base>n.x,t="left",s="right"):(e=n.base<n.y,t="bottom",s="top"),e?(i="end",r="start"):(i="start",r="end"),{start:t,end:s,reverse:e,top:i,bottom:r}}function jj(n,e,t,s){let i=e.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:c,top:d,bottom:u}=_j(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===s?i=d:(t._bottom||0)===s?i=u:(r[M0(u,a,o,c)]=!0,i=d)),r[M0(i,a,o,c)]=!0,n.borderSkipped=r}function M0(n,e,t,s){return s?(n=Aj(n,e,t),n=D0(n,t,e)):n=D0(n,e,t),n}function Aj(n,e,t){return n===e?t:n===t?e:n}function D0(n,e,t){return n==="start"?e:n==="end"?t:n}function Cj(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Lb extends ga{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,i){return P0(e,t,s,i)}parseArrayData(e,t,s,i){return P0(e,t,s,i)}parseObjectData(e,t,s,i){const{iScale:r,vScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?o:c,u=a.axis==="x"?o:c,f=[];let m,h,y,x;for(m=s,h=s+i;m<h;++m)x=t[m],y={},y[r.axis]=r.parse(ua(x,d),m),f.push(Cb(ua(x,u),y,a,m));return f}updateRangeFromParsed(e,t,s,i){super.updateRangeFromParsed(e,t,s,i);const r=s._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:i}=t,r=this.getParsed(e),a=r._custom,o=vf(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,i){const r=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,i);for(let h=t;h<t+s;h++){const y=this.getParsed(h),x=r||Dt(y[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(h),w=this._calculateBarIndexPixels(h,u),S=(y._stacks||{})[o.axis],j={horizontal:d,base:x.base,enableBorderRadius:!S||vf(y._custom)||a===S._top||a===S._bottom,x:d?x.head:w.center,y:d?w.center:x.head,height:d?w.size:Math.abs(x.size),width:d?Math.abs(x.size):w.size};m&&(j.options=f||this.resolveDataElementOptions(h,e[h].active?"active":i));const C=j.options||e[h].options;jj(j,C,S,a),Cj(j,C,u.ratio),this.updateElement(e[h],h,j,i)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),c=o&&o[s.axis],d=u=>{const f=u._parsed.find(h=>h[s.axis]===c),m=f&&f[u.vScale.axis];if(Dt(m)||isNaN(m))return!0};for(const u of i)if(!(t!==void 0&&d(u))&&((r===!1||a.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[kt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const i=this._getStacks(e,s),r=t!==void 0?i.indexOf(t):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,i=[];let r,a;for(r=0,a=t.data.length;r<a;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const o=e.barThickness;return{min:o||bj(t),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:i},options:{base:r,minBarLength:a}}=this,o=r||0,c=this.getParsed(e),d=c._custom,u=vf(d);let f=c[t.axis],m=0,h=s?this.applyStack(t,c,s):f,y,x;h!==f&&(m=h-f,h=f),u&&(f=d.barStart,h=d.barEnd-d.barStart,f!==0&&Qi(f)!==Qi(d.barEnd)&&(m=0),m+=f);const w=!Dt(r)&&!u?r:m;let S=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(m+h):y=S,x=y-S,Math.abs(x)<a){x=Nj(x,t,o)*a,f===o&&(S-=x/2);const j=t.getPixelForDecimal(0),C=t.getPixelForDecimal(1),L=Math.min(j,C),P=Math.max(j,C);S=Math.max(Math.min(S,P),L),y=S+x,s&&!u&&(c._stacks[t.axis]._visualValues[i]=t.getValueForPixel(y)-t.getValueForPixel(S))}if(S===t.getPixelForValue(o)){const j=Qi(x)*t.getLineWidthForValue(o)/2;S+=j,x-=j}return{size:x,base:S,head:y,center:y+x/2}}_calculateBarIndexPixels(e,t){const s=t.scale,i=this.options,r=i.skipNull,a=kt(i.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(t.grouped){const u=r?this._getStackCount(e):t.stackCount,f=i.barThickness==="flex"?Sj(e,t,i,u*d):wj(e,t,i,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(kt(m,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+h;o=f.start+f.chunk*y+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else o=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,t.min*t.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[t.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class Lj extends ga{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,i){const r=super.parsePrimitiveData(e,t,s,i);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+s).radius;return r}parseArrayData(e,t,s,i){const r=super.parseArrayData(e,t,s,i);for(let a=0;a<r.length;a++){const o=t[s+a];r[a]._custom=kt(o[2],this.resolveDataElementOptions(a+s).radius)}return r}parseObjectData(e,t,s,i){const r=super.parseObjectData(e,t,s,i);for(let a=0;a<r.length;a++){const o=t[s+a];r[a]._custom=kt(o&&o.r&&+o.r,this.resolveDataElementOptions(a+s).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y),d=a._custom;return{label:s[e]||"",value:"("+o+", "+c+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,i),u=a.axis,f=o.axis;for(let m=t;m<t+s;m++){const h=e[m],y=!r&&this.getParsed(m),x={},w=x[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(y[u]),S=x[f]=r?o.getBasePixel():o.getPixelForValue(y[f]);x.skip=isNaN(w)||isNaN(S),d&&(x.options=c||this.resolveDataElementOptions(m,h.active?"active":i),r&&(x.options.radius=0)),this.updateElement(h,m,x,i)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return t!=="active"&&(i.radius=0),i.radius+=kt(s&&s._custom,r),i}}function Pj(n,e,t){let s=1,i=1,r=0,a=0;if(e<ln){const o=n,c=o+e,d=Math.cos(o),u=Math.sin(o),f=Math.cos(c),m=Math.sin(c),h=(C,L,P)=>Ac(C,o,c,!0)?1:Math.max(L,L*t,P,P*t),y=(C,L,P)=>Ac(C,o,c,!0)?-1:Math.min(L,L*t,P,P*t),x=h(0,d,f),w=h(Tn,u,m),S=y(zt,d,f),j=y(zt+Tn,u,m);s=(x-S)/2,i=(w-j)/2,r=-(x+S)/2,a=-(w+j)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:a}}class oh extends ga{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=c=>+s[c];if(Tt(s[e])){const{key:c="value"}=this._parsing;r=d=>+ua(s[d],c)}let a,o;for(a=e,o=e+t;a<o;++a)i._parsed[a]=r(a)}}_getRotation(){return _i(this.options.rotation-90)}_getCircumference(){return _i(this.options.circumference)}_getRotationExtents(){let e=ln,t=-ln;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),a=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,r=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min($4(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:m,ratioY:h,offsetX:y,offsetY:x}=Pj(f,u,c),w=(s.width-a)/m,S=(s.height-a)/h,j=Math.max(Math.min(w,S)/2,0),C=tb(this.options.radius,j),L=Math.max(C*c,0),P=(C-L)/this._getVisibleDatasetWeightTotal();this.offsetX=y*C,this.offsetY=x*C,i.total=this.calculateTotal(),this.outerRadius=C-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/ln)}updateElements(e,t,s,i){const r=i==="reset",a=this.chart,o=a.chartArea,d=a.options.animation,u=(o.left+o.right)/2,f=(o.top+o.bottom)/2,m=r&&d.animateScale,h=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(t,i);let S=this._getRotation(),j;for(j=0;j<t;++j)S+=this._circumference(j,r);for(j=t;j<t+s;++j){const C=this._circumference(j,r),L=e[j],P={x:u+this.offsetX,y:f+this.offsetY,startAngle:S,endAngle:S+C,circumference:C,outerRadius:y,innerRadius:h};w&&(P.options=x||this.resolveDataElementOptions(j,L.active?"active":i)),S+=C,this.updateElement(L,j,P,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ln*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=zc(t._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,r,a,o,c;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){a=s.getDatasetMeta(i),e=a.data,o=a.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)c=o.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(kt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Pb extends ga{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=t,a=this.chart._animationsDisabled;let{start:o,count:c}=cb(t,i,a);this._drawStart=o,this._drawCount=c,db(t)&&(o=0,c=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},e),this.updateElements(i,o,c,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(t,i),m=a.axis,h=o.axis,{spanGaps:y,segment:x}=this.options,w=rl(y)?y:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||r||i==="none",j=t+s,C=e.length;let L=t>0&&this.getParsed(t-1);for(let P=0;P<C;++P){const O=e[P],k=S?O:{};if(P<t||P>=j){k.skip=!0;continue}const A=this.getParsed(P),M=Dt(A[h]),V=k[m]=a.getPixelForValue(A[m],P),_=k[h]=r||M?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,A,c):A[h],P);k.skip=isNaN(V)||isNaN(_)||M,k.stop=P>0&&Math.abs(A[m]-L[m])>w,x&&(k.parsed=A,k.raw=d.data[P]),f&&(k.options=u||this.resolveDataElementOptions(P,O.active?"active":i)),S||this.updateElement(O,P,k,i),L=A}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class Mb extends ga{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=zc(t._parsed[e].r,s.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,s,i){return xb.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),a=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),o=(r-a)/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,s,i){const r=i==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,f=d.yCenter,m=d.getIndexAngle(0)-.5*zt;let h=m,y;const x=360/this.countVisibleElements();for(y=0;y<t;++y)h+=this._computeAngle(y,i,x);for(y=t;y<t+s;y++){const w=e[y];let S=h,j=h+this._computeAngle(y,i,x),C=a.getDataVisibility(y)?d.getDistanceFromCenterForValue(this.getParsed(y).r):0;h=j,r&&(c.animateScale&&(C=0),c.animateRotate&&(S=j=m));const L={x:u,y:f,innerRadius:0,outerRadius:C,startAngle:S,endAngle:j,options:this.resolveDataElementOptions(y,w.active?"active":i)};this.updateElement(w,y,L,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?_i(this.resolveDataElementOptions(e,t).angle||s):0}}class Mj extends oh{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Db extends ga{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,i){return xb.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta,s=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(s.points=i,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:a};this.updateElement(s,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,s,i){const r=this._cachedMeta.rScale,a=i==="reset";for(let o=t;o<t+s;o++){const c=e[o],d=this.resolveDataElementOptions(o,c.active?"active":i),u=r.getPointPositionForValue(o,this.getParsed(o).r),f=a?r.xCenter:u.x,m=a?r.yCenter:u.y,h={x:f,y:m,angle:u.angle,skip:isNaN(f)||isNaN(m),options:d};this.updateElement(c,o,h,i)}}}class Dj extends ga{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y);return{label:s[e]||"",value:"("+o+", "+c+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:a}=cb(t,s,i);if(this._drawStart=r,this._drawCount=a,db(t)&&(r=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=s;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(t,i),f=this.getSharedOptions(u),m=this.includeOptions(i,f),h=a.axis,y=o.axis,{spanGaps:x,segment:w}=this.options,S=rl(x)?x:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||r||i==="none";let C=t>0&&this.getParsed(t-1);for(let L=t;L<t+s;++L){const P=e[L],O=this.getParsed(L),k=j?P:{},A=Dt(O[y]),M=k[h]=a.getPixelForValue(O[h],L),V=k[y]=r||A?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,O,c):O[y],L);k.skip=isNaN(M)||isNaN(V)||A,k.stop=L>0&&Math.abs(O[h]-C[h])>S,w&&(k.parsed=O,k.raw=d.data[L]),m&&(k.options=f||this.resolveDataElementOptions(L,P.active?"active":i)),j||this.updateElement(P,L,k,i),C=O}this.updateSharedOptions(f,i,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let c=t.length-1;c>=0;--c)o=Math.max(o,t[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,a)/2}}var Tj=Object.freeze({__proto__:null,BarController:Lb,BubbleController:Lj,DoughnutController:oh,LineController:Pb,PieController:Mj,PolarAreaController:Mb,RadarController:Db,ScatterController:Dj});function $a(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jm{static override(e){Object.assign(jm.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return $a()}parse(){return $a()}format(){return $a()}add(){return $a()}diff(){return $a()}startOf(){return $a()}endOf(){return $a()}}var Ij={_date:jm};function Ej(n,e,t,s){const{controller:i,data:r,_sorted:a}=n,o=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&r.length){const d=o._reversePixels?e_:Cr;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const m=d(r,e,t-f),h=d(r,e,t+f);return{lo:m.lo,hi:h.hi}}}}else{const u=d(r,e,t);if(c){const{vScale:f}=i._cachedMeta,{_parsed:m}=n,h=m.slice(0,u.lo+1).reverse().findIndex(x=>!Dt(x[f.axis]));u.lo-=Math.max(0,h);const y=m.slice(u.hi).findIndex(x=>!Dt(x[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:r.length-1}}function lh(n,e,t,s,i){const r=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,c=r.length;o<c;++o){const{index:d,data:u}=r[o],{lo:f,hi:m}=Ej(r[o],e,a,i);for(let h=f;h<=m;++h){const y=u[h];y.skip||s(y,d,h)}}}function Oj(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,a=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function bf(n,e,t,s,i){const r=[];return!i&&!n.isPointInArea(e)||lh(n,t,e,function(o,c,d){!i&&!Lr(o,n.chartArea,0)||o.inRange(e.x,e.y,s)&&r.push({element:o,datasetIndex:c,index:d})},!0),r}function Rj(n,e,t,s){let i=[];function r(a,o,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],s),{angle:f}=ib(a,{x:e.x,y:e.y});Ac(f,d,u)&&i.push({element:a,datasetIndex:o,index:c})}return lh(n,t,e,r),i}function Fj(n,e,t,s,i,r){let a=[];const o=Oj(t);let c=Number.POSITIVE_INFINITY;function d(u,f,m){const h=u.inRange(e.x,e.y,i);if(s&&!h)return;const y=u.getCenterPoint(i);if(!(!!r||n.isPointInArea(y))&&!h)return;const w=o(e,y);w<c?(a=[{element:u,datasetIndex:f,index:m}],c=w):w===c&&a.push({element:u,datasetIndex:f,index:m})}return lh(n,t,e,d),a}function wf(n,e,t,s,i,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!s?Rj(n,e,t,i):Fj(n,e,t,s,i,r)}function T0(n,e,t,s,i){const r=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return lh(n,t,e,(c,d,u)=>{c[a]&&c[a](e[t],i)&&(r.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,i))}),s&&!o?[]:r}var zj={modes:{index(n,e,t,s){const i=Ua(e,n),r=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?bf(n,i,r,s,a):wf(n,i,r,!1,s,a),c=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(n,e,t,s){const i=Ua(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?bf(n,i,r,s,a):wf(n,i,r,!1,s,a);if(o.length>0){const c=o[0].datasetIndex,d=n.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(n,e,t,s){const i=Ua(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return bf(n,i,r,s,a)},nearest(n,e,t,s){const i=Ua(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return wf(n,i,r,t.intersect,s,a)},x(n,e,t,s){const i=Ua(e,n);return T0(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=Ua(e,n);return T0(n,i,"y",t.intersect,s)}}};const Tb=["left","top","right","bottom"];function Ul(n,e){return n.filter(t=>t.pos===e)}function I0(n,e){return n.filter(t=>Tb.indexOf(t.pos)===-1&&t.box.axis===e)}function Vl(n,e){return n.sort((t,s)=>{const i=e?s:t,r=e?t:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Bj(n){const e=[];let t,s,i,r,a,o;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:r,options:{stack:a,stackWeight:o=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&r+a,stackWeight:o});return e}function $j(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:r}=t;if(!s||!Tb.includes(i))continue;const a=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}function Wj(n,e){const t=$j(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,a,o;for(r=0,a=n.length;r<a;++r){o=n[r];const{fullSize:c}=o.box,d=t[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*s:c&&e.availableWidth,o.height=i):(o.width=s,o.height=u?u*i:c&&e.availableHeight)}return t}function qj(n){const e=Bj(n),t=Vl(e.filter(d=>d.box.fullSize),!0),s=Vl(Ul(e,"left"),!0),i=Vl(Ul(e,"right")),r=Vl(Ul(e,"top"),!0),a=Vl(Ul(e,"bottom")),o=I0(e,"x"),c=I0(e,"y");return{fullSize:t,leftAndTop:s.concat(r),rightAndBottom:i.concat(c).concat(a).concat(o),chartArea:Ul(e,"chartArea"),vertical:s.concat(i).concat(c),horizontal:r.concat(a).concat(o)}}function E0(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function Ib(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Uj(n,e,t,s){const{pos:i,box:r}=t,a=n.maxPadding;if(!Tt(i)){t.size&&(n[i]-=t.size);const f=s[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?r.height:r.width),t.size=f.size/f.count,n[i]+=t.size}r.getPadding&&Ib(a,r.getPadding());const o=Math.max(0,e.outerWidth-E0(a,n,"left","right")),c=Math.max(0,e.outerHeight-E0(a,n,"top","bottom")),d=o!==n.w,u=c!==n.h;return n.w=o,n.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function Vj(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Hj(n,e){const t=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{r[a]=Math.max(e[a],t[a])}),r}return s(n?["left","right"]:["top","bottom"])}function ic(n,e,t,s){const i=[];let r,a,o,c,d,u;for(r=0,a=n.length,d=0;r<a;++r){o=n[r],c=o.box,c.update(o.width||e.w,o.height||e.h,Hj(o.horizontal,e));const{same:f,other:m}=Uj(e,t,o,s);d|=f&&i.length,u=u||m,c.fullSize||i.push(o)}return d&&ic(i,e,t,s)||u}function Pd(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function O0(n,e,t,s){const i=t.padding;let{x:r,y:a}=e;for(const o of n){const c=o.box,d=s[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const f=e.w*u,m=d.size||c.height;jc(d.start)&&(a=d.start),c.fullSize?Pd(c,i.left,a,t.outerWidth-i.right-i.left,m):Pd(c,e.left+d.placed,a,f,m),d.start=a,d.placed+=f,a=c.bottom}else{const f=e.h*u,m=d.size||c.width;jc(d.start)&&(r=d.start),c.fullSize?Pd(c,r,i.top,m,t.outerHeight-i.bottom-i.top):Pd(c,r,e.top+d.placed,m,f),d.start=r,d.placed+=f,r=c.right}}e.x=r,e.y=a}var vs={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=bs(n.options.layout.padding),r=Math.max(e-i.width,0),a=Math.max(t-i.height,0),o=qj(n.boxes),c=o.vertical,d=o.horizontal;Vt(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/u,hBoxMaxHeight:a/2}),m=Object.assign({},i);Ib(m,bs(s));const h=Object.assign({maxPadding:m,w:r,h:a,x:i.left,y:i.top},i),y=Wj(c.concat(d),f);ic(o.fullSize,h,f,y),ic(c,h,f,y),ic(d,h,f,y)&&ic(c,h,f,y),Vj(h),O0(o.leftAndTop,h,f,y),h.x+=h.w,h.y+=h.h,O0(o.rightAndBottom,h,f,y),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Vt(o.chartArea,x=>{const w=x.box;Object.assign(w,n.chartArea),w.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Eb{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class Gj extends Eb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const nu="$chartjs",Yj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},R0=n=>n===null||n==="";function Zj(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[nu]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",R0(i)){const r=b0(n,"width");r!==void 0&&(n.width=r)}if(R0(s))if(n.style.height==="")n.height=n.width/(e||2);else{const r=b0(n,"height");r!==void 0&&(n.height=r)}return n}const Ob=G_?{passive:!0}:!1;function Kj(n,e,t){n&&n.addEventListener(e,t,Ob)}function Jj(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Ob)}function Qj(n,e){const t=Yj[n.type]||n.type,{x:s,y:i}=Ua(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Nu(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Xj(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||Nu(o.addedNodes,s),a=a&&!Nu(o.removedNodes,s);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function e3(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||Nu(o.removedNodes,s),a=a&&!Nu(o.addedNodes,s);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lc=new Map;let F0=0;function Rb(){const n=window.devicePixelRatio;n!==F0&&(F0=n,Lc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function t3(n,e){Lc.size||window.addEventListener("resize",Rb),Lc.set(n,e)}function n3(n){Lc.delete(n),Lc.size||window.removeEventListener("resize",Rb)}function s3(n,e,t){const s=n.canvas,i=s&&_m(s);if(!i)return;const r=lb((o,c)=>{const d=i.clientWidth;t(o,c),d<i.clientWidth&&t()},window),a=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||r(d,u)});return a.observe(i),t3(n,r),a}function Sf(n,e,t){t&&t.disconnect(),e==="resize"&&n3(n)}function i3(n,e,t){const s=n.canvas,i=lb(r=>{n.ctx!==null&&t(Qj(r,n))},n);return Kj(s,e,i),i}class r3 extends Eb{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Zj(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[nu])return!1;const s=t[nu].initial;["height","width"].forEach(r=>{const a=s[r];Dt(a)?t.removeAttribute(r):t.setAttribute(r,a)});const i=s.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[nu],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),a={attach:Xj,detach:e3,resize:s3}[t]||i3;i[t]=a(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:Sf,detach:Sf,resize:Sf}[t]||Jj)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return H_(e,t,s,i)}isAttached(e){const t=e&&_m(e);return!!(t&&t.isConnected)}}function a3(n){return!Nm()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Gj:r3}let Rr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return rl(this.x)&&rl(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function o3(n,e){const t=n.options.ticks,s=l3(n),i=Math.min(t.maxTicksLimit||s,s),r=t.major.enabled?d3(e):[],a=r.length,o=r[0],c=r[a-1],d=[];if(a>i)return u3(e,d,r,a/i),d;const u=c3(r,e,i);if(a>0){let f,m;const h=a>1?Math.round((c-o)/(a-1)):null;for(Md(e,d,u,Dt(h)?0:o-h,o),f=0,m=a-1;f<m;f++)Md(e,d,u,r[f],r[f+1]);return Md(e,d,u,c,Dt(h)?e.length:c+h),d}return Md(e,d,u),d}function l3(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function c3(n,e,t){const s=h3(n),i=e.length/t;if(!s)return Math.max(i,1);const r=Z4(s);for(let a=0,o=r.length-1;a<o;a++){const c=r[a];if(c>i)return c}return Math.max(i,1)}function d3(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function u3(n,e,t,s){let i=0,r=t[0],a;for(s=Math.ceil(s),a=0;a<n.length;a++)a===r&&(e.push(n[a]),i++,r=t[i*s])}function Md(n,e,t,s,i){const r=kt(s,0),a=Math.min(kt(i,n.length),n.length);let o=0,c,d,u;for(t=Math.ceil(t),i&&(c=i-s,t=c/Math.floor(c/t)),u=r;u<0;)o++,u=Math.round(r+o*t);for(d=Math.max(r,0);d<a;d++)d===u&&(e.push(n[d]),o++,u=Math.round(r+o*t))}function h3(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const f3=n=>n==="left"?"right":n==="right"?"left":n,z0=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,B0=(n,e)=>Math.min(e||n,n);function $0(n,e){const t=[],s=n.length/e,i=n.length;let r=0;for(;r<i;r+=s)t.push(n[Math.floor(r)]);return t}function p3(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),r=n._startPixel,a=n._endPixel,o=1e-6;let c=n.getPixelForTick(i),d;if(!(t&&(s===1?d=Math.max(c-r,a-c):e===0?d=(n.getPixelForTick(1)-c)/2:d=(c-n.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<r-o||c>a+o)))return c}function m3(n,e){Vt(n,t=>{const s=t.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[s[r]];s.splice(0,i)}})}function Hl(n){return n.drawTicks?n.tickLength:0}function W0(n,e){if(!n.display)return 0;const t=Kn(n.font,e),s=bs(n.padding);return(hn(n.text)?n.text.length:1)*t.lineHeight+s.height}function g3(n,e){return ma(n,{scale:e,type:"scale"})}function y3(n,e,t){return ma(n,{tick:t,index:e,type:"tick"})}function x3(n,e,t){let s=xm(n);return(t&&e!=="right"||!t&&e==="right")&&(s=f3(s)),s}function v3(n,e,t,s){const{top:i,left:r,bottom:a,right:o,chart:c}=n,{chartArea:d,scales:u}=c;let f=0,m,h,y;const x=a-i,w=o-r;if(n.isHorizontal()){if(h=ms(s,r,o),Tt(t)){const S=Object.keys(t)[0],j=t[S];y=u[S].getPixelForValue(j)+x-e}else t==="center"?y=(d.bottom+d.top)/2+x-e:y=z0(n,t,e);m=o-r}else{if(Tt(t)){const S=Object.keys(t)[0],j=t[S];h=u[S].getPixelForValue(j)-w+e}else t==="center"?h=(d.left+d.right)/2-w+e:h=z0(n,t,e);y=ms(s,a,i),f=t==="left"?-Tn:Tn}return{titleX:h,titleY:y,maxWidth:m,rotation:f}}class ao extends Rr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=Js(e,Number.POSITIVE_INFINITY),t=Js(t,Number.NEGATIVE_INFINITY),s=Js(s,Number.POSITIVE_INFINITY),i=Js(i,Number.NEGATIVE_INFINITY),{min:Js(e,s),max:Js(t,i),minDefined:wn(e),maxDefined:wn(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),a;if(i&&r)return{min:t,max:s};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)a=o[c].controller.getMinMax(this,e),i||(t=Math.min(t,a.min)),r||(s=Math.max(s,a.max));return t=r&&t>s?s:t,s=i&&t>s?t:s,{min:Js(t,Js(s,t)),max:Js(s,Js(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sn(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=N_(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?$0(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=o3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sn(this.options.afterUpdate,[this])}beforeSetDimensions(){sn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),sn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=sn(t.callback,[r.value,s,e],this)}afterTickToLabelConversion(){sn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=B0(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let a=i,o,c,d;if(!this._isVisible()||!t.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,m=u.highest.height,h=ns(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/s:h/(s-1),f+6>o&&(o=h/(s-(e.offset?.5:1)),c=this.maxHeight-Hl(e.grid)-t.padding-W0(e.title,this.chart.options.font),d=Math.sqrt(f*f+m*m),a=gm(Math.min(Math.asin(ns((u.highest.height+6)/o,-1,1)),Math.asin(ns(c/d,-1,1))-Math.asin(ns(m/d,-1,1)))),a=Math.max(i,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){sn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=W0(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=Hl(r)+c):(e.height=this.maxHeight,e.width=Hl(r)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:m}=this._getLabelSizes(),h=s.padding*2,y=_i(this.labelRotation),x=Math.cos(y),w=Math.sin(y);if(o){const S=s.mirror?0:w*f.width+x*m.height;e.height=Math.min(this.maxHeight,e.height+S+h)}else{const S=s.mirror?0:x*f.width+w*m.height;e.width=Math.min(this.maxWidth,e.width+S+h)}this._calculatePadding(d,u,w,x)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:r,padding:a},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,h=0;c?d?(m=i*e.width,h=s*t.height):(m=s*e.height,h=i*t.width):r==="start"?h=t.width:r==="end"?m=e.width:r!=="inner"&&(m=e.width/2,h=t.width/2),this.paddingLeft=Math.max((m-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-f+a)*this.width/(this.width-f),0)}else{let u=t.height/2,f=e.height/2;r==="start"?(u=0,f=e.height):r==="end"&&(u=t.height,f=0),this.paddingTop=u+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Dt(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=$0(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:r}=this,a=[],o=[],c=Math.floor(t/B0(t,s));let d=0,u=0,f,m,h,y,x,w,S,j,C,L,P;for(f=0;f<t;f+=c){if(y=e[f].label,x=this._resolveTickFontOptions(f),i.font=w=x.string,S=r[w]=r[w]||{data:{},gc:[]},j=x.lineHeight,C=L=0,!Dt(y)&&!hn(y))C=Su(i,S.data,S.gc,C,y),L=j;else if(hn(y))for(m=0,h=y.length;m<h;++m)P=y[m],!Dt(P)&&!hn(P)&&(C=Su(i,S.data,S.gc,C,P),L+=j);a.push(C),o.push(L),d=Math.max(C,d),u=Math.max(L,u)}m3(r,t);const O=a.indexOf(d),k=o.indexOf(u),A=M=>({width:a[M]||0,height:o[M]||0});return{first:A(0),last:A(t-1),widest:A(O),highest:A(k),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return X4(this._alignToPixels?Ba(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=y3(this.getContext(),e,s))}return this.$context||(this.$context=g3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=_i(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,o=r?r.widest.width+a:0,c=r?r.highest.height+a:0;return this.isHorizontal()?c*s>o*i?o/s:c/i:c*i<o*s?c/s:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:r,position:a,border:o}=i,c=r.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),m=Hl(r),h=[],y=o.setContext(this.getContext()),x=y.display?y.width:0,w=x/2,S=function(ne){return Ba(s,ne,x)};let j,C,L,P,O,k,A,M,V,_,T,W;if(a==="top")j=S(this.bottom),k=this.bottom-m,M=j-w,_=S(e.top)+w,W=e.bottom;else if(a==="bottom")j=S(this.top),_=e.top,W=S(e.bottom)-w,k=j+w,M=this.top+m;else if(a==="left")j=S(this.right),O=this.right-m,A=j-w,V=S(e.left)+w,T=e.right;else if(a==="right")j=S(this.left),V=e.left,T=S(e.right)-w,O=j+w,A=this.left+m;else if(t==="x"){if(a==="center")j=S((e.top+e.bottom)/2+.5);else if(Tt(a)){const ne=Object.keys(a)[0],ae=a[ne];j=S(this.chart.scales[ne].getPixelForValue(ae))}_=e.top,W=e.bottom,k=j+w,M=k+m}else if(t==="y"){if(a==="center")j=S((e.left+e.right)/2);else if(Tt(a)){const ne=Object.keys(a)[0],ae=a[ne];j=S(this.chart.scales[ne].getPixelForValue(ae))}O=j-w,A=O-m,V=e.left,T=e.right}const D=kt(i.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/D));for(C=0;C<f;C+=Q){const ne=this.getContext(C),ae=r.setContext(ne),F=o.setContext(ne),ce=ae.lineWidth,Se=ae.color,ge=F.dash||[],R=F.dashOffset,U=ae.tickWidth,H=ae.tickColor,te=ae.tickBorderDash||[],re=ae.tickBorderDashOffset;L=p3(this,C,c),L!==void 0&&(P=Ba(s,L,ce),d?O=A=V=T=P:k=M=_=W=P,h.push({tx1:O,ty1:k,tx2:A,ty2:M,x1:V,y1:_,x2:T,y2:W,width:ce,color:Se,borderDash:ge,borderDashOffset:R,tickWidth:U,tickColor:H,tickBorderDash:te,tickBorderDashOffset:re}))}return this._ticksLength=f,this._borderValue=j,h}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:r}=s,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=r,m=Hl(s.grid),h=m+u,y=f?-u:h,x=-_i(this.labelRotation),w=[];let S,j,C,L,P,O,k,A,M,V,_,T,W="middle";if(i==="top")O=this.bottom-y,k=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+y,k=this._getXAxisLabelAlignment();else if(i==="left"){const Q=this._getYAxisLabelAlignment(m);k=Q.textAlign,P=Q.x}else if(i==="right"){const Q=this._getYAxisLabelAlignment(m);k=Q.textAlign,P=Q.x}else if(t==="x"){if(i==="center")O=(e.top+e.bottom)/2+h;else if(Tt(i)){const Q=Object.keys(i)[0],ne=i[Q];O=this.chart.scales[Q].getPixelForValue(ne)+h}k=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-h;else if(Tt(i)){const Q=Object.keys(i)[0],ne=i[Q];P=this.chart.scales[Q].getPixelForValue(ne)}k=this._getYAxisLabelAlignment(m).textAlign}t==="y"&&(c==="start"?W="top":c==="end"&&(W="bottom"));const D=this._getLabelSizes();for(S=0,j=o.length;S<j;++S){C=o[S],L=C.label;const Q=r.setContext(this.getContext(S));A=this.getPixelForTick(S)+r.labelOffset,M=this._resolveTickFontOptions(S),V=M.lineHeight,_=hn(L)?L.length:1;const ne=_/2,ae=Q.color,F=Q.textStrokeColor,ce=Q.textStrokeWidth;let Se=k;a?(P=A,k==="inner"&&(S===j-1?Se=this.options.reverse?"left":"right":S===0?Se=this.options.reverse?"right":"left":Se="center"),i==="top"?d==="near"||x!==0?T=-_*V+V/2:d==="center"?T=-D.highest.height/2-ne*V+V:T=-D.highest.height+V/2:d==="near"||x!==0?T=V/2:d==="center"?T=D.highest.height/2-ne*V:T=D.highest.height-_*V,f&&(T*=-1),x!==0&&!Q.showLabelBackdrop&&(P+=V/2*Math.sin(x))):(O=A,T=(1-_)*V/2);let ge;if(Q.showLabelBackdrop){const R=bs(Q.backdropPadding),U=D.heights[S],H=D.widths[S];let te=T-R.top,re=0-R.left;switch(W){case"middle":te-=U/2;break;case"bottom":te-=U;break}switch(k){case"center":re-=H/2;break;case"right":re-=H;break;case"inner":S===j-1?re-=H:S>0&&(re-=H/2);break}ge={left:re,top:te,width:H+R.width,height:U+R.height,color:Q.backdropColor}}w.push({label:L,font:M,textOffset:T,options:{rotation:x,color:ae,strokeColor:F,strokeWidth:ce,textAlign:Se,textBaseline:W,translation:[P,O],backdrop:ge}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_i(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,a=this._getLabelSizes(),o=e+r,c=a.widest.width;let d,u;return t==="left"?i?(u=this.right+r,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):t==="right"?i?(u=this.left+r,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:r,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,r,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const o=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(t.display)for(r=0,a=i.length;r<a;++r){const c=i[r];t.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),a=s.display?r.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,m;this.isHorizontal()?(d=Ba(e,this.left,a)-a/2,u=Ba(e,this.right,o)+o/2,f=m=c):(f=Ba(e,this.top,a)-a/2,m=Ba(e,this.bottom,o)+o/2,d=u=c),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(d,f),t.lineTo(u,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&ih(s,i);const r=this.getLabelItems(e);for(const a of r){const o=a.options,c=a.font,d=a.label,u=a.textOffset;eo(s,d,0,u,c,o)}i&&rh(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const r=Kn(s.font),a=bs(s.padding),o=s.align;let c=r.lineHeight/2;t==="bottom"||t==="center"||Tt(t)?(c+=a.bottom,hn(s.text)&&(c+=r.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:f,rotation:m}=v3(this,c,t,o);eo(e,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:m,textAlign:x3(o,t,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=kt(e.grid&&e.grid.z,-1),i=kt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ao.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,a;for(r=0,a=t.length;r<a;++r){const o=t[r];o[s]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Kn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Dd{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;S3(t)&&(s=this.register(t));const i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,b3(e,a,s),this.override&&fn.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in fn[i]&&(delete fn[i][s],this.override&&delete Xa[s])}}function b3(n,e,t){const s=_c(Object.create(null),[t?fn.get(t):{},fn.get(e),n.defaults]);fn.set(e,s),n.defaultRoutes&&w3(e,n.defaultRoutes),n.descriptors&&fn.describe(e,n.descriptors)}function w3(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),r=[n].concat(s).join("."),a=e[t].split("."),o=a.pop(),c=a.join(".");fn.route(r,i,c,o)})}function S3(n){return"id"in n&&"defaults"in n}class k3{constructor(){this.controllers=new Dd(ga,"datasets",!0),this.elements=new Dd(Rr,"elements"),this.plugins=new Dd(Object,"plugins"),this.scales=new Dd(ao,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):Vt(i,a=>{const o=s||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,s){const i=mm(e);sn(s["before"+i],[],s),t[e](s),sn(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Gi=new k3;class N3{constructor(){this._init=[]}notify(e,t,s,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,t,s);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,s,i){i=i||{};for(const r of e){const a=r.plugin,o=a[s],c=[t,i,r.options];if(sn(o,c,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=kt(s.options&&s.options.plugins,{}),r=_3(s);return i===!1&&!t?[]:A3(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(r,a)=>r.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function _3(n){const e={},t=[],s=Object.keys(Gi.plugins.items);for(let r=0;r<s.length;r++)t.push(Gi.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const a=i[r];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function j3(n,e){return!e&&n===!1?null:n===!0?{}:n}function A3(n,{plugins:e,localIds:t},s,i){const r=[],a=n.getContext();for(const o of e){const c=o.id,d=j3(s[c],i);d!==null&&r.push({plugin:o,options:C3(n.config,{plugin:o,local:t[c]},d,a)})}return r}function C3(n,{plugin:e,local:t},s,i){const r=n.pluginScopeKeys(e),a=n.getOptionScopes(s,r);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Np(n,e){const t=fn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function L3(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function P3(n,e){return n===e?"_index_":"_value_"}function q0(n){if(n==="x"||n==="y"||n==="r")return n}function M3(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function _p(n,...e){if(q0(n))return n;for(const t of e){const s=t.axis||M3(t.position)||n.length>1&&q0(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function U0(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function D3(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return U0(n,"x",t[0])||U0(n,"y",t[0])}return{}}function T3(n,e){const t=Xa[n.type]||{scales:{}},s=e.scales||{},i=Np(n.type,e),r=Object.create(null);return Object.keys(s).forEach(a=>{const o=s[a];if(!Tt(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=_p(a,o,D3(a,n),fn.scales[o.type]),d=P3(c,i),u=t.scales||{};r[a]=oc(Object.create(null),[{axis:c},o,u[c],u[d]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,c=a.indexAxis||Np(o,e),u=(Xa[o]||{}).scales||{};Object.keys(u).forEach(f=>{const m=L3(f,c),h=a[m+"AxisID"]||m;r[h]=r[h]||Object.create(null),oc(r[h],[{axis:m},s[h],u[f]])})}),Object.keys(r).forEach(a=>{const o=r[a];oc(o,[fn.scales[o.type],fn.scale])}),r}function Fb(n){const e=n.options||(n.options={});e.plugins=kt(e.plugins,{}),e.scales=T3(n,e)}function zb(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function I3(n){return n=n||{},n.data=zb(n.data),Fb(n),n}const V0=new Map,Bb=new Set;function Td(n,e){let t=V0.get(n);return t||(t=e(),V0.set(n,t),Bb.add(t)),t}const Gl=(n,e,t)=>{const s=ua(e,t);s!==void 0&&n.add(s)};class E3{constructor(e){this._config=I3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Fb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Td(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Td(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Td(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Td(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:r}=this,a=this._cachedScopes(e,s),o=a.get(t);if(o)return o;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(f=>Gl(c,e,f))),u.forEach(f=>Gl(c,i,f)),u.forEach(f=>Gl(c,Xa[r]||{},f)),u.forEach(f=>Gl(c,fn,f)),u.forEach(f=>Gl(c,Sp,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Bb.has(t)&&a.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Xa[t]||{},fn.datasets[t]||{},{type:t},fn,Sp]}resolveNamedOptions(e,t,s,i=[""]){const r={$shared:!0},{resolver:a,subPrefixes:o}=H0(this._resolverCache,e,i);let c=a;if(R3(a,t)){r.$shared=!1,s=ha(s)?s():s;const d=this.createResolver(e,s,o);c=al(a,s,d)}for(const d of t)r[d]=c[d];return r}createResolver(e,t,s=[""],i){const{resolver:r}=H0(this._resolverCache,e,s);return Tt(t)?al(r,t,void 0,i):r}}function H0(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let r=s.get(i);return r||(r={resolver:wm(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},s.set(i,r)),r}const O3=n=>Tt(n)&&Object.getOwnPropertyNames(n).some(e=>ha(n[e]));function R3(n,e){const{isScriptable:t,isIndexable:s}=pb(n);for(const i of e){const r=t(i),a=s(i),o=(a||r)&&n[i];if(r&&(ha(o)||O3(o))||a&&hn(o))return!0}return!1}var F3="4.5.0";const z3=["top","bottom","left","right","chartArea"];function G0(n,e){return n==="top"||n==="bottom"||z3.indexOf(n)===-1&&e==="x"}function Y0(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function Z0(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),sn(t&&t.onComplete,[n],e)}function B3(n){const e=n.chart,t=e.options.animation;sn(t&&t.onProgress,[n],e)}function $b(n){return Nm()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const su={},K0=n=>{const e=$b(n);return Object.values(su).filter(t=>t.canvas===e).pop()};function $3(n,e,t){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=e){const a=n[i];delete n[i],(t>0||r>e)&&(n[r+t]=a)}}}function W3(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}let Jo=class{static defaults=fn;static instances=su;static overrides=Xa;static registry=Gi;static version=F3;static getChart=K0;static register(...e){Gi.add(...e),J0()}static unregister(...e){Gi.remove(...e),J0()}constructor(e,t){const s=this.config=new E3(t),i=$b(e),r=K0(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||a3(i)),this.platform.updateConfig(s);const o=this.platform.acquireContext(i,a.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=B4(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new N3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=s_(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],su[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}wr.listen(this,"complete",Z0),wr.listen(this,"progress",B3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:r}=this;return Dt(e)?t&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Gi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():v0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return g0(this.canvas,this.ctx),this}stop(){return wr.stop(this),this}resize(e,t){wr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,r),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,v0(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),sn(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Vt(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((a,o)=>(a[o]=!1,a),{});let r=[];t&&(r=r.concat(Object.keys(t).map(a=>{const o=t[a],c=_p(a,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Vt(r,a=>{const o=a.options,c=o.id,d=_p(c,o),u=kt(o.type,a.dtype);(o.position===void 0||G0(o.position,d)!==G0(a.dposition))&&(o.position=a.dposition),i[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const m=Gi.getScale(u);f=new m({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(o,e)}),Vt(i,(a,o)=>{a||delete s[o]}),Vt(s,a=>{vs.configure(this,a,a.options),vs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(Y0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const r=t[s];let a=this.getDatasetMeta(s);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=o,a.indexAxis=r.indexAxis||Np(o,this.options),a.order=r.order||0,a.index=s,a.label=""+r.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=Gi.getController(o),{datasetElementType:d,dataElementType:u}=fn.datasets[o];Object.assign(c,{dataElementType:Gi.getElement(u),datasetElementType:d&&Gi.getElement(d)}),a.controller=new c(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Vt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),m=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(m),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),i||Vt(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Y0("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Vt(this.scales,e=>{vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!o0(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of t){const a=s==="_removeElements"?-r:r;$3(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=r=>new Set(e.filter(a=>a[0]===r).map((a,o)=>o+","+a.splice(1).join(","))),i=s(0);for(let r=1;r<t;r++)if(!o0(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vs.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Vt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,ha(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wr.has(this)?this.attached&&!wr.running(this)&&wr.start(this):(this.draw(),Z0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,r;for(i=0,r=t.length;i<r;++i){const a=t[i];(!e||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=_b(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&ih(t,i),e.controller.draw(),i&&rh(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Lr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const r=zj.modes[t];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=ma(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);jc(t)?(r.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),a.update(r,{visible:s}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),wr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),g0(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete su[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(r,a)=>{t.addEventListener(this,r,a),e[r]=a},i=(r,a,o)=>{r.offsetX=a,r.offsetY=o,this._eventHandler(r)};Vt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},r=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),s("resize",r),s("detach",a)};a=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){Vt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Vt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let r,a,o,c;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:a})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[a],index:a}});!vu(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,r=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),a=r(t,e),o=s?e:r(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:r}=this,a=t,o=this._getActiveElements(e,i,s,a),c=H4(e),d=W3(e,this._lastEvent,s,c);s&&(this._lastEvent=null,sn(r.onHover,[e,o,this],this),c&&sn(r.onClick,[e,o,this],this));const u=!vu(o,i);return(u||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=d,u}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}};function J0(){return Vt(Jo.instances,n=>n._plugins.invalidate())}function q3(n,e,t){const{startAngle:s,x:i,y:r,outerRadius:a,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/a,ys(s-t));if(n.beginPath(),n.arc(i,r,a-d/2,s+f/2,t-f/2),o>0){const m=Math.min(d/o,ys(s-t));n.arc(i,r,o+d/2,t-m/2,s+m/2,!0)}else{const m=Math.min(d/2,a*ys(s-t));if(u==="round")n.arc(i,r,m,t-zt/2,s+zt/2,!0);else if(u==="bevel"){const h=2*m*m,y=-h*Math.cos(t+zt/2)+i,x=-h*Math.sin(t+zt/2)+r,w=h*Math.cos(s+zt/2)+i,S=h*Math.sin(s+zt/2)+r;n.lineTo(y,x),n.lineTo(w,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function U3(n,e,t){const{startAngle:s,pixelMargin:i,x:r,y:a,outerRadius:o,innerRadius:c}=e;let d=i/o;n.beginPath(),n.arc(r,a,o,s-d,t+d),c>i?(d=i/c,n.arc(r,a,c,t+d,s-d,!0)):n.arc(r,a,i,t+Tn,s-Tn),n.closePath(),n.clip()}function V3(n){return bm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function H3(n,e,t,s){const i=V3(n.options.borderRadius),r=(t-e)/2,a=Math.min(r,s*e/2),o=c=>{const d=(t-Math.min(r,c))*s/2;return ns(c,0,Math.min(r,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:ns(i.innerStart,0,a),innerEnd:ns(i.innerEnd,0,a)}}function Po(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function _u(n,e,t,s,i,r){const{x:a,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,f=Math.max(e.outerRadius+s+t-d,0),m=u>0?u+s+t+d:0;let h=0;const y=i-c;if(s){const Q=u>0?u-s:0,ne=f>0?f-s:0,ae=(Q+ne)/2,F=ae!==0?y*ae/(ae+s):y;h=(y-F)/2}const x=Math.max(.001,y*f-t/zt)/f,w=(y-x)/2,S=c+w+h,j=i-w-h,{outerStart:C,outerEnd:L,innerStart:P,innerEnd:O}=H3(e,m,f,j-S),k=f-C,A=f-L,M=S+C/k,V=j-L/A,_=m+P,T=m+O,W=S+P/_,D=j-O/T;if(n.beginPath(),r){const Q=(M+V)/2;if(n.arc(a,o,f,M,Q),n.arc(a,o,f,Q,V),L>0){const ce=Po(A,V,a,o);n.arc(ce.x,ce.y,L,V,j+Tn)}const ne=Po(T,j,a,o);if(n.lineTo(ne.x,ne.y),O>0){const ce=Po(T,D,a,o);n.arc(ce.x,ce.y,O,j+Tn,D+Math.PI)}const ae=(j-O/m+(S+P/m))/2;if(n.arc(a,o,m,j-O/m,ae,!0),n.arc(a,o,m,ae,S+P/m,!0),P>0){const ce=Po(_,W,a,o);n.arc(ce.x,ce.y,P,W+Math.PI,S-Tn)}const F=Po(k,S,a,o);if(n.lineTo(F.x,F.y),C>0){const ce=Po(k,M,a,o);n.arc(ce.x,ce.y,C,S-Tn,M)}}else{n.moveTo(a,o);const Q=Math.cos(M)*f+a,ne=Math.sin(M)*f+o;n.lineTo(Q,ne);const ae=Math.cos(V)*f+a,F=Math.sin(V)*f+o;n.lineTo(ae,F)}n.closePath()}function G3(n,e,t,s,i){const{fullCircles:r,startAngle:a,circumference:o}=e;let c=e.endAngle;if(r){_u(n,e,t,s,c,i);for(let d=0;d<r;++d)n.fill();isNaN(o)||(c=a+(o%ln||ln))}return _u(n,e,t,s,c,i),n.fill(),c}function Y3(n,e,t,s,i){const{fullCircles:r,startAngle:a,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:m,borderRadius:h}=c,y=c.borderAlign==="inner";if(!d)return;n.setLineDash(f||[]),n.lineDashOffset=m,y?(n.lineWidth=d*2,n.lineJoin=u||"round"):(n.lineWidth=d,n.lineJoin=u||"bevel");let x=e.endAngle;if(r){_u(n,e,t,s,x,i);for(let w=0;w<r;++w)n.stroke();isNaN(o)||(x=a+(o%ln||ln))}y&&U3(n,e,x),c.selfJoin&&x-a>=zt&&h===0&&u!=="miter"&&q3(n,e,x),r||(_u(n,e,t,s,x,i),n.stroke())}class Z3 extends Rr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.getProps(["x","y"],s),{angle:r,distance:a}=ib(i,{x:e,y:t}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,h=kt(f,c-o),y=Ac(r,o,c)&&o!==c,x=h>=ln||y,w=Ar(a,d+m,u+m);return x&&w}getCenterPoint(e){const{x:t,y:s,startAngle:i,endAngle:r,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(i+r)/2,f=(a+o+d+c)/2;return{x:t+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>ln?Math.floor(s/ln):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const c=1-Math.sin(Math.min(zt,s||0)),d=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,G3(e,this,d,r,a),Y3(e,this,d,r,a),e.restore()}}function Wb(n,e,t=e){n.lineCap=kt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(kt(t.borderDash,e.borderDash)),n.lineDashOffset=kt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=kt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=kt(t.borderWidth,e.borderWidth),n.strokeStyle=kt(t.borderColor,e.borderColor)}function K3(n,e,t){n.lineTo(t.x,t.y)}function J3(n){return n.stepped?m_:n.tension||n.cubicInterpolationMode==="monotone"?g_:K3}function qb(n,e,t={}){const s=n.length,{start:i=0,end:r=s-1}=t,{start:a,end:o}=e,c=Math.max(i,a),d=Math.min(r,o),u=i<a&&r<a||i>o&&r>o;return{count:s,start:c,loop:e.loop,ilen:d<c&&!u?s+d-c:d-c}}function Q3(n,e,t,s){const{points:i,options:r}=e,{count:a,start:o,loop:c,ilen:d}=qb(i,t,s),u=J3(r);let{move:f=!0,reverse:m}=s||{},h,y,x;for(h=0;h<=d;++h)y=i[(o+(m?d-h:h))%a],!y.skip&&(f?(n.moveTo(y.x,y.y),f=!1):u(n,x,y,m,r.stepped),x=y);return c&&(y=i[(o+(m?d:0))%a],u(n,x,y,m,r.stepped)),!!c}function X3(n,e,t,s){const i=e.points,{count:r,start:a,ilen:o}=qb(i,t,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,m,h,y,x,w,S;const j=L=>(a+(d?o-L:L))%r,C=()=>{x!==w&&(n.lineTo(u,w),n.lineTo(u,x),n.lineTo(u,S))};for(c&&(h=i[j(0)],n.moveTo(h.x,h.y)),m=0;m<=o;++m){if(h=i[j(m)],h.skip)continue;const L=h.x,P=h.y,O=L|0;O===y?(P<x?x=P:P>w&&(w=P),u=(f*u+L)/++f):(C(),n.lineTo(L,P),y=O,f=0,x=w=P),S=P}C()}function jp(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?X3:Q3}function e6(n){return n.stepped?Y_:n.tension||n.cubicInterpolationMode==="monotone"?Z_:Va}function t6(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),Wb(n,e.options),n.stroke(i)}function n6(n,e,t,s){const{segments:i,options:r}=e,a=jp(e);for(const o of i)Wb(n,r,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const s6=typeof Path2D=="function";function i6(n,e,t,s){s6&&!e.options.segment?t6(n,e,t,s):n6(n,e,t,s)}class ch extends Rr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;B_(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tj(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],r=this.points,a=Nb(this,{property:t,start:i,end:i});if(!a.length)return;const o=[],c=e6(s);let d,u;for(d=0,u=a.length;d<u;++d){const{start:f,end:m}=a[d],h=r[f],y=r[m];if(h===y){o.push(h);continue}const x=Math.abs((i-h[t])/(y[t]-h[t])),w=c(h,y,x,s.stepped);w[t]=e[t],o.push(w)}return o.length===1?o[0]:o}pathSegment(e,t,s){return jp(this)(e,this,t,s)}path(e,t,s){const i=this.segments,r=jp(this);let a=this._loop;t=t||0,s=s||this.points.length-t;for(const o of i)a&=r(e,this,o,{start:t,end:t+s-1});return!!a}draw(e,t,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),i6(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Q0(n,e,t,s){const i=n.options,{[t]:r}=n.getProps([t],s);return Math.abs(e-r)<i.radius+i.hitRadius}class r6 extends Rr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(t-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return Q0(this,e,"x",t)}inYRange(e,t){return Q0(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!Lr(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,kp(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ub(n,e){const{x:t,y:s,base:i,width:r,height:a}=n.getProps(["x","y","base","width","height"],e);let o,c,d,u,f;return n.horizontal?(f=a/2,o=Math.min(t,i),c=Math.max(t,i),d=s-f,u=s+f):(f=r/2,o=t-f,c=t+f,d=Math.min(s,i),u=Math.max(s,i)),{left:o,top:d,right:c,bottom:u}}function aa(n,e,t,s){return n?0:ns(e,t,s)}function a6(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,r=fb(s);return{t:aa(i.top,r.top,0,t),r:aa(i.right,r.right,0,e),b:aa(i.bottom,r.bottom,0,t),l:aa(i.left,r.left,0,e)}}function o6(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=Za(i),a=Math.min(e,t),o=n.borderSkipped,c=s||Tt(i);return{topLeft:aa(!c||o.top||o.left,r.topLeft,0,a),topRight:aa(!c||o.top||o.right,r.topRight,0,a),bottomLeft:aa(!c||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:aa(!c||o.bottom||o.right,r.bottomRight,0,a)}}function l6(n){const e=Ub(n),t=e.right-e.left,s=e.bottom-e.top,i=a6(n,t/2,s/2),r=o6(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function kf(n,e,t,s){const i=e===null,r=t===null,o=n&&!(i&&r)&&Ub(n,s);return o&&(i||Ar(e,o.left,o.right))&&(r||Ar(t,o.top,o.bottom))}function c6(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function d6(n,e){n.rect(e.x,e.y,e.w,e.h)}function Nf(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-s,a=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+a,radius:n.radius}}class u6 extends Rr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:a}=l6(this),o=c6(a.radius)?Cc:d6;e.save(),(a.w!==r.w||a.h!==r.h)&&(e.beginPath(),o(e,Nf(a,t,r)),e.clip(),o(e,Nf(r,-t,a)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),o(e,Nf(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return kf(this,e,t,s)}inXRange(e,t){return kf(this,e,null,t)}inYRange(e,t){return kf(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var h6=Object.freeze({__proto__:null,ArcElement:Z3,BarElement:u6,LineElement:ch,PointElement:r6});const Ap=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],X0=Ap.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Vb(n){return Ap[n%Ap.length]}function Hb(n){return X0[n%X0.length]}function f6(n,e){return n.borderColor=Vb(e),n.backgroundColor=Hb(e),++e}function p6(n,e){return n.backgroundColor=n.data.map(()=>Vb(e++)),e}function m6(n,e){return n.backgroundColor=n.data.map(()=>Hb(e++)),e}function g6(n){let e=0;return(t,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof oh?e=p6(t,e):i instanceof Mb?e=m6(t,e):i&&(e=f6(t,e))}}function ey(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function y6(n){return n&&(n.borderColor||n.backgroundColor)}function x6(){return fn.borderColor!=="rgba(0,0,0,0.1)"||fn.backgroundColor!=="rgba(0,0,0,0.1)"}var v6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,a=ey(s)||y6(i)||r&&ey(r)||x6();if(!t.forceOverride&&a)return;const o=g6(n);s.forEach(o)}};function b6(n,e,t,s,i){const r=i.samples||s;if(r>=t)return n.slice(e,e+t);const a=[],o=(t-2)/(r-2);let c=0;const d=e+t-1;let u=e,f,m,h,y,x;for(a[c++]=n[u],f=0;f<r-2;f++){let w=0,S=0,j;const C=Math.floor((f+1)*o)+1+e,L=Math.min(Math.floor((f+2)*o)+1,t)+e,P=L-C;for(j=C;j<L;j++)w+=n[j].x,S+=n[j].y;w/=P,S/=P;const O=Math.floor(f*o)+1+e,k=Math.min(Math.floor((f+1)*o)+1,t)+e,{x:A,y:M}=n[u];for(h=y=-1,j=O;j<k;j++)y=.5*Math.abs((A-w)*(n[j].y-M)-(A-n[j].x)*(S-M)),y>h&&(h=y,m=n[j],x=j);a[c++]=m,u=x}return a[c++]=n[d],a}function w6(n,e,t,s){let i=0,r=0,a,o,c,d,u,f,m,h,y,x;const w=[],S=e+t-1,j=n[e].x,L=n[S].x-j;for(a=e;a<e+t;++a){o=n[a],c=(o.x-j)/L*s,d=o.y;const P=c|0;if(P===u)d<y?(y=d,f=a):d>x&&(x=d,m=a),i=(r*i+o.x)/++r;else{const O=a-1;if(!Dt(f)&&!Dt(m)){const k=Math.min(f,m),A=Math.max(f,m);k!==h&&k!==O&&w.push({...n[k],x:i}),A!==h&&A!==O&&w.push({...n[A],x:i})}a>0&&O!==h&&w.push(n[O]),w.push(o),u=P,r=0,y=x=d,f=m=h=a}}return w}function Gb(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ty(n){n.data.datasets.forEach(e=>{Gb(e)})}function S6(n,e){const t=e.length;let s=0,i;const{iScale:r}=n,{min:a,max:o,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(s=ns(Cr(e,r.axis,a).lo,0,t-1)),d?i=ns(Cr(e,r.axis,o).hi+1,s,t)-s:i=t-s,{start:s,count:i}}var k6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){ty(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:a,indexAxis:o}=i,c=n.getDatasetMeta(r),d=a||i.data;if(sc([o,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:f,count:m}=S6(c,d);const h=t.threshold||4*s;if(m<=h){Gb(i);return}Dt(a)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(t.algorithm){case"lttb":y=b6(d,f,m,s,t);break;case"min-max":y=w6(d,f,m,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=y})},destroy(n){ty(n)}};function N6(n,e,t){const s=n.segments,i=n.points,r=e.points,a=[];for(const o of s){let{start:c,end:d}=o;d=dh(c,d,i);const u=Cp(t,i[c],i[d],o.loop);if(!e.segments){a.push({source:o,target:u,start:i[c],end:i[d]});continue}const f=Nb(e,u);for(const m of f){const h=Cp(t,r[m.start],r[m.end],m.loop),y=kb(o,i,h);for(const x of y)a.push({source:x,target:m,start:{[t]:ny(u,h,"start",Math.max)},end:{[t]:ny(u,h,"end",Math.min)}})}}return a}function Cp(n,e,t,s){if(s)return;let i=e[n],r=t[n];return n==="angle"&&(i=ys(i),r=ys(r)),{property:n,start:i,end:r}}function _6(n,e){const{x:t=null,y:s=null}=n||{},i=e.points,r=[];return e.segments.forEach(({start:a,end:o})=>{o=dh(a,o,i);const c=i[a],d=i[o];s!==null?(r.push({x:c.x,y:s}),r.push({x:d.x,y:s})):t!==null&&(r.push({x:t,y:c.y}),r.push({x:t,y:d.y}))}),r}function dh(n,e,t){for(;e>n;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function ny(n,e,t,s){return n&&e?s(n[t],e[t]):n?n[t]:e?e[t]:0}function Yb(n,e){let t=[],s=!1;return hn(n)?(s=!0,t=n):t=_6(n,e),t.length?new ch({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function sy(n){return n&&n.fill!==!1}function j6(n,e,t){let i=n[e].fill;const r=[e];let a;if(!t)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!wn(i))return i;if(a=n[i],!a)return!1;if(a.visible)return i;r.push(i),i=a.fill}return!1}function A6(n,e,t){const s=M6(n);if(Tt(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return wn(i)&&Math.floor(i)===i?C6(s[0],e,i,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function C6(n,e,t,s){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=s?!1:t}function L6(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Tt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function P6(n,e,t){let s;return n==="start"?s=t:n==="end"?s=e.options.reverse?e.min:e.max:Tt(n)?s=n.value:s=e.getBaseValue(),s}function M6(n){const e=n.options,t=e.fill;let s=kt(t&&t.target,t);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function D6(n){const{scale:e,index:t,line:s}=n,i=[],r=s.segments,a=s.points,o=T6(e,t);o.push(Yb({x:null,y:e.bottom},s));for(let c=0;c<r.length;c++){const d=r[c];for(let u=d.start;u<=d.end;u++)I6(i,a[u],o)}return new ch({points:i,options:{}})}function T6(n,e){const t=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function I6(n,e,t){const s=[];for(let i=0;i<t.length;i++){const r=t[i],{first:a,last:o,point:c}=E6(r,e,"x");if(!(!c||a&&o)){if(a)s.unshift(c);else if(n.push(c),!o)break}}n.push(...s)}function E6(n,e,t){const s=n.interpolate(e,t);if(!s)return{};const i=s[t],r=n.segments,a=n.points;let o=!1,c=!1;for(let d=0;d<r.length;d++){const u=r[d],f=a[u.start][t],m=a[u.end][t];if(Ar(i,f,m)){o=i===f,c=i===m;break}}return{first:o,last:c,point:s}}class Zb{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:i,y:r,radius:a}=this;return t=t||{start:0,end:ln},e.arc(i,r,a,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function O6(n){const{chart:e,fill:t,line:s}=n;if(wn(t))return R6(e,t);if(t==="stack")return D6(n);if(t==="shape")return!0;const i=F6(n);return i instanceof Zb?i:Yb(i,s)}function R6(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function F6(n){return(n.scale||{}).getPointPositionForValue?B6(n):z6(n)}function z6(n){const{scale:e={},fill:t}=n,s=L6(t,e);if(wn(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function B6(n){const{scale:e,fill:t}=n,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,a=P6(t,e,r),o=[];if(s.grid.circular){const c=e.getPointPositionForValue(0,r);return new Zb({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<i;++c)o.push(e.getPointPositionForValue(c,a));return o}function _f(n,e,t){const s=O6(e),{chart:i,index:r,line:a,scale:o,axis:c}=e,d=a.options,u=d.fill,f=d.backgroundColor,{above:m=f,below:h=f}=u||{},y=i.getDatasetMeta(r),x=_b(i,y);s&&a.points.length&&(ih(n,t),$6(n,{line:a,target:s,above:m,below:h,area:t,scale:o,axis:c,clip:x}),rh(n))}function $6(n,e){const{line:t,target:s,above:i,below:r,area:a,scale:o,clip:c}=e,d=t._loop?"angle":e.axis;n.save();let u=r;r!==i&&(d==="x"?(iy(n,s,a.top),jf(n,{line:t,target:s,color:i,scale:o,property:d,clip:c}),n.restore(),n.save(),iy(n,s,a.bottom)):d==="y"&&(ry(n,s,a.left),jf(n,{line:t,target:s,color:r,scale:o,property:d,clip:c}),n.restore(),n.save(),ry(n,s,a.right),u=i)),jf(n,{line:t,target:s,color:u,scale:o,property:d,clip:c}),n.restore()}function iy(n,e,t){const{segments:s,points:i}=e;let r=!0,a=!1;n.beginPath();for(const o of s){const{start:c,end:d}=o,u=i[c],f=i[dh(c,d,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function ry(n,e,t){const{segments:s,points:i}=e;let r=!0,a=!1;n.beginPath();for(const o of s){const{start:c,end:d}=o,u=i[c],f=i[dh(c,d,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function jf(n,e){const{line:t,target:s,property:i,color:r,scale:a,clip:o}=e,c=N6(t,s,i);for(const{source:d,target:u,start:f,end:m}of c){const{style:{backgroundColor:h=r}={}}=d,y=s!==!0;n.save(),n.fillStyle=h,W6(n,a,o,y&&Cp(i,f,m)),n.beginPath();const x=!!t.pathSegment(n,d);let w;if(y){x?n.closePath():ay(n,s,m,i);const S=!!s.pathSegment(n,u,{move:x,reverse:!0});w=x&&S,w||ay(n,s,f,i)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function W6(n,e,t,s){const i=e.chart.chartArea,{property:r,start:a,end:o}=s||{};if(r==="x"||r==="y"){let c,d,u,f;r==="x"?(c=a,d=i.top,u=o,f=i.bottom):(c=i.left,d=a,u=i.right,f=o),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),d=Math.max(d,t.top),f=Math.min(f,t.bottom)),n.rect(c,d,u-c,f-d),n.clip()}}function ay(n,e,t,s){const i=e.interpolate(t,s);i&&n.lineTo(i.x,i.y)}var q6={id:"filler",afterDatasetsUpdate(n,e,t){const s=(n.data.datasets||[]).length,i=[];let r,a,o,c;for(a=0;a<s;++a)r=n.getDatasetMeta(a),o=r.dataset,c=null,o&&o.options&&o instanceof ch&&(c={visible:n.isDatasetVisible(a),index:a,fill:A6(o,a,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=c,i.push(c);for(a=0;a<s;++a)c=i[a],!(!c||c.fill===!1)&&(c.fill=j6(i,a,t.propagate))},beforeDraw(n,e,t){const s=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(r,o.axis),s&&o.fill&&_f(n.ctx,o,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;sy(r)&&_f(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const s=e.meta.$filler;!sy(s)||t.drawTime!=="beforeDatasetDraw"||_f(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oy=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},U6=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class ly extends Rr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=sn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=Kn(s.font),r=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=oy(s,r);let d,u;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,r,o,c)+10):(u=this.maxHeight,d=this._fitCols(a,i,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:r,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+o;let f=e;r.textAlign="left",r.textBaseline="middle";let m=-1,h=-u;return this.legendItems.forEach((y,x)=>{const w=s+t/2+r.measureText(y.text).width;(x===0||d[d.length-1]+w+2*o>a)&&(f+=u,d[d.length-(x>0?0:1)]=0,h+=u,m++),c[x]={left:0,top:h,row:m,width:w,height:i},d[d.length-1]+=w+o}),f}_fitCols(e,t,s,i){const{ctx:r,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let f=o,m=0,h=0,y=0,x=0;return this.legendItems.forEach((w,S)=>{const{itemWidth:j,itemHeight:C}=V6(s,t,r,w,i);S>0&&h+C+2*o>u&&(f+=m+o,d.push({width:m,height:h}),y+=m+o,x++,m=h=0),c[S]={left:y,top:h,col:x,width:j,height:C},m=Math.max(m,j),h+=C+o}),f+=m,d.push({width:m,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:r}}=this,a=Ko(r,this.left,this.width);if(this.isHorizontal()){let o=0,c=ms(s,this.left+i,this.right-this.lineWidths[o]);for(const d of t)o!==d.row&&(o=d.row,c=ms(s,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+e+i,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+i}else{let o=0,c=ms(s,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const d of t)d.col!==o&&(o=d.col,c=ms(s,this.top+e+i,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+i,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ih(e,this),this._draw(),rh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:r,labels:a}=e,o=fn.color,c=Ko(e.rtl,this.left,this.width),d=Kn(a.font),{padding:u}=a,f=d.size,m=f/2;let h;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:y,boxHeight:x,itemHeight:w}=oy(a,f),S=function(O,k,A){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;i.save();const M=kt(A.lineWidth,1);if(i.fillStyle=kt(A.fillStyle,o),i.lineCap=kt(A.lineCap,"butt"),i.lineDashOffset=kt(A.lineDashOffset,0),i.lineJoin=kt(A.lineJoin,"miter"),i.lineWidth=M,i.strokeStyle=kt(A.strokeStyle,o),i.setLineDash(kt(A.lineDash,[])),a.usePointStyle){const V={radius:x*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:M},_=c.xPlus(O,y/2),T=k+m;hb(i,V,_,T,a.pointStyleWidth&&y)}else{const V=k+Math.max((f-x)/2,0),_=c.leftForLtr(O,y),T=Za(A.borderRadius);i.beginPath(),Object.values(T).some(W=>W!==0)?Cc(i,{x:_,y:V,w:y,h:x,radius:T}):i.rect(_,V,y,x),i.fill(),M!==0&&i.stroke()}i.restore()},j=function(O,k,A){eo(i,A.text,O,k+w/2,d,{strikethrough:A.hidden,textAlign:c.textAlign(A.textAlign)})},C=this.isHorizontal(),L=this._computeTitleHeight();C?h={x:ms(r,this.left+u,this.right-s[0]),y:this.top+u+L,line:0}:h={x:this.left+u,y:ms(r,this.top+L+u,this.bottom-t[0].height),line:0},bb(this.ctx,e.textDirection);const P=w+u;this.legendItems.forEach((O,k)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const A=i.measureText(O.text).width,M=c.textAlign(O.textAlign||(O.textAlign=a.textAlign)),V=y+m+A;let _=h.x,T=h.y;c.setWidth(this.width),C?k>0&&_+V+u>this.right&&(T=h.y+=P,h.line++,_=h.x=ms(r,this.left+u,this.right-s[h.line])):k>0&&T+P>this.bottom&&(_=h.x=_+t[h.line].width+u,h.line++,T=h.y=ms(r,this.top+L+u,this.bottom-t[h.line].height));const W=c.x(_);if(S(W,T,O),_=i_(M,_+y+m,C?_+V:this.right,e.rtl),j(c.x(_),T,O),C)h.x+=V+u;else if(typeof O.text!="string"){const D=d.lineHeight;h.y+=Kb(O,D)+u}else h.y+=P}),wb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Kn(t.font),i=bs(t.padding);if(!t.display)return;const r=Ko(e.rtl,this.left,this.width),a=this.ctx,o=t.position,c=s.size/2,d=i.top+c;let u,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,f=ms(e.align,f,this.right-m);else{const y=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);u=d+ms(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const h=ms(o,f,f+m);a.textAlign=r.textAlign(xm(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=s.string,eo(a,t.text,h,u,s)}_computeTitleHeight(){const e=this.options.title,t=Kn(e.font),s=bs(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,r;if(Ar(e,this.left,this.right)&&Ar(t,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ar(e,i.left,i.left+i.width)&&Ar(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!Y6(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=U6(i,s);i&&!r&&sn(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&sn(t.onHover,[e,s,this],this)}else s&&sn(t.onClick,[e,s,this],this)}}function V6(n,e,t,s,i){const r=H6(s,n,e,t),a=G6(i,s,e.lineHeight);return{itemWidth:r,itemHeight:a}}function H6(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,a)=>r.length>a.length?r:a)),e+t.size/2+s.measureText(i).width}function G6(n,e,t){let s=n;return typeof e.text!="string"&&(s=Kb(e,t)),s}function Kb(n,e){const t=n.text?n.text.length:0;return e*t}function Y6(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Z6={id:"legend",_element:ly,start(n,e,t){const s=n.legend=new ly({ctx:n.ctx,options:t,chart:n});vs.configure(n,s,t),vs.addBox(n,s)},stop(n){vs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;vs.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:r,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=bs(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Am extends Rr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=hn(s.text)?s.text.length:1;this._padding=bs(s.padding);const r=i*Kn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:r,options:a}=this,o=a.align;let c=0,d,u,f;return this.isHorizontal()?(u=ms(o,s,r),f=t+e,d=r-s):(a.position==="left"?(u=s+e,f=ms(o,i,t),c=zt*-.5):(u=r-e,f=ms(o,t,i),c=zt*.5),d=i-t),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=Kn(t.font),r=s.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(r);eo(e,t.text,0,0,s,{color:t.color,maxWidth:c,rotation:d,textAlign:xm(t.align),textBaseline:"middle",translation:[a,o]})}}function K6(n,e){const t=new Am({ctx:n.ctx,options:e,chart:n});vs.configure(n,t,e),vs.addBox(n,t),n.titleBlock=t}var J6={id:"title",_element:Am,start(n,e,t){K6(n,t)},stop(n){const e=n.titleBlock;vs.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;vs.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Id=new WeakMap;var Q6={id:"subtitle",start(n,e,t){const s=new Am({ctx:n.ctx,options:t,chart:n});vs.configure(n,s,t),vs.addBox(n,s),Id.set(n,s)},stop(n){vs.removeBox(n,Id.get(n)),Id.delete(n)},beforeUpdate(n,e,t){const s=Id.get(n);vs.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rc={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,r=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();s.add(c.x),i+=c.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((o,c)=>o+c)/s.size,y:i/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,a,o;for(r=0,a=n.length;r<a;++r){const c=n[r].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=wp(e,d);u<i&&(i=u,o=c)}}if(o){const c=o.tooltipPosition();t=c.x,s=c.y}return{x:t,y:s}}};function Vi(n,e){return e&&(hn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Sr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function X6(n,e){const{element:t,datasetIndex:s,index:i}=e,r=n.getDatasetMeta(s).controller,{label:a,value:o}=r.getLabelAndValue(i);return{chart:n,label:a,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:o,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function cy(n,e){const t=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:a,boxHeight:o}=e,c=Kn(e.bodyFont),d=Kn(e.titleFont),u=Kn(e.footerFont),f=r.length,m=i.length,h=s.length,y=bs(e.padding);let x=y.height,w=0,S=s.reduce((L,P)=>L+P.before.length+P.lines.length+P.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,f&&(x+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),S){const L=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;x+=h*L+(S-h)*c.lineHeight+(S-1)*e.bodySpacing}m&&(x+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let j=0;const C=function(L){w=Math.max(w,t.measureText(L).width+j)};return t.save(),t.font=d.string,Vt(n.title,C),t.font=c.string,Vt(n.beforeBody.concat(n.afterBody),C),j=e.displayColors?a+2+e.boxPadding:0,Vt(s,L=>{Vt(L.before,C),Vt(L.lines,C),Vt(L.after,C)}),j=0,t.font=u.string,Vt(n.footer,C),t.restore(),w+=y.width,{width:w,height:x}}function eA(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function tA(n,e,t,s){const{x:i,width:r}=s,a=t.caretSize+t.caretPadding;if(n==="left"&&i+r+a>e.width||n==="right"&&i-r-a<0)return!0}function nA(n,e,t,s){const{x:i,width:r}=t,{width:a,chartArea:{left:o,right:c}}=n;let d="center";return s==="center"?d=i<=(o+c)/2?"left":"right":i<=r/2?d="left":i>=a-r/2&&(d="right"),tA(d,n,e,t)&&(d="center"),d}function dy(n,e,t){const s=t.yAlign||e.yAlign||eA(n,t);return{xAlign:t.xAlign||e.xAlign||nA(n,e,t,s),yAlign:s}}function sA(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function iA(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function uy(n,e,t,s){const{caretSize:i,caretPadding:r,cornerRadius:a}=n,{xAlign:o,yAlign:c}=t,d=i+r,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:h}=Za(a);let y=sA(e,o);const x=iA(e,c,d);return c==="center"?o==="left"?y+=d:o==="right"&&(y-=d):o==="left"?y-=Math.max(u,m)+i:o==="right"&&(y+=Math.max(f,h)+i),{x:ns(y,0,s.width-e.width),y:ns(x,0,s.height-e.height)}}function Ed(n,e,t){const s=bs(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function hy(n){return Vi([],Sr(n))}function rA(n,e,t){return ma(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function fy(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const Jb={beforeTitle:gr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:gr,beforeBody:gr,beforeLabel:gr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Dt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:gr,afterBody:gr,beforeFooter:gr,footer:gr,afterFooter:gr};function Es(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?Jb[e].call(t,s):i}let py=class extends Rr{static positioners=rc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,r=new jb(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=rA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=Es(s,"beforeTitle",this,e),r=Es(s,"title",this,e),a=Es(s,"afterTitle",this,e);let o=[];return o=Vi(o,Sr(i)),o=Vi(o,Sr(r)),o=Vi(o,Sr(a)),o}getBeforeBody(e,t){return hy(Es(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return Vt(e,r=>{const a={before:[],lines:[],after:[]},o=fy(s,r);Vi(a.before,Sr(Es(o,"beforeLabel",this,r))),Vi(a.lines,Es(o,"label",this,r)),Vi(a.after,Sr(Es(o,"afterLabel",this,r))),i.push(a)}),i}getAfterBody(e,t){return hy(Es(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=Es(s,"beforeFooter",this,e),r=Es(s,"footer",this,e),a=Es(s,"afterFooter",this,e);let o=[];return o=Vi(o,Sr(i)),o=Vi(o,Sr(r)),o=Vi(o,Sr(a)),o}_createItems(e){const t=this._active,s=this.chart.data,i=[],r=[],a=[];let o=[],c,d;for(c=0,d=t.length;c<d;++c)o.push(X6(this.chart,t[c]));return e.filter&&(o=o.filter((u,f,m)=>e.filter(u,f,m,s))),e.itemSort&&(o=o.sort((u,f)=>e.itemSort(u,f,s))),Vt(o,u=>{const f=fy(e.callbacks,u);i.push(Es(f,"labelColor",this,u)),r.push(Es(f,"labelPointStyle",this,u)),a.push(Es(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let r,a=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const o=rc[s.position].call(this,i,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=cy(this,s),d=Object.assign({},o,c),u=dy(this.chart,s,d),f=uy(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const r=this.getCaretPosition(e,s,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:r}=this,{caretSize:a,cornerRadius:o}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Za(o),{x:m,y:h}=e,{width:y,height:x}=t;let w,S,j,C,L,P;return r==="center"?(L=h+x/2,i==="left"?(w=m,S=w-a,C=L+a,P=L-a):(w=m+y,S=w+a,C=L-a,P=L+a),j=w):(i==="left"?S=m+Math.max(c,u)+a:i==="right"?S=m+y-Math.max(d,f)-a:S=this.caretX,r==="top"?(C=h,L=C-a,w=S-a,j=S+a):(C=h+x,L=C+a,w=S+a,j=S-a),P=C),{x1:w,x2:S,x3:j,y1:C,y2:L,y3:P}}drawTitle(e,t,s){const i=this.title,r=i.length;let a,o,c;if(r){const d=Ko(s.rtl,this.x,this.width);for(e.x=Ed(this,s.titleAlign,s),t.textAlign=d.textAlign(s.titleAlign),t.textBaseline="middle",a=Kn(s.titleFont),o=s.titleSpacing,t.fillStyle=s.titleColor,t.font=a.string,c=0;c<r;++c)t.fillText(i[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===r&&(e.y+=s.titleMarginBottom-o)}}_drawColorBox(e,t,s,i,r){const a=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=r,u=Kn(r.bodyFont),f=Ed(this,"left",r),m=i.x(f),h=c<u.lineHeight?(u.lineHeight-c)/2:0,y=t.y+h;if(r.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},w=i.leftForLtr(m,d)+d/2,S=y+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,kp(e,x,w,S),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,kp(e,x,w,S)}else{e.lineWidth=Tt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const x=i.leftForLtr(m,d),w=i.leftForLtr(i.xPlus(m,1),d-2),S=Za(a.borderRadius);Object.values(S).some(j=>j!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Cc(e,{x,y,w:d,h:c,radius:S}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Cc(e,{x:w,y:y+1,w:d-2,h:c-2,radius:S}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,y,d,c),e.strokeRect(x,y,d,c),e.fillStyle=a.backgroundColor,e.fillRect(w,y+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:r,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Kn(s.bodyFont);let m=f.lineHeight,h=0;const y=Ko(s.rtl,this.x,this.width),x=function(A){t.fillText(A,y.x(e.x+h),e.y+m/2),e.y+=m+r},w=y.textAlign(a);let S,j,C,L,P,O,k;for(t.textAlign=a,t.textBaseline="middle",t.font=f.string,e.x=Ed(this,w,s),t.fillStyle=s.bodyColor,Vt(this.beforeBody,x),h=o&&w!=="right"?a==="center"?d/2+u:d+2+u:0,L=0,O=i.length;L<O;++L){for(S=i[L],j=this.labelTextColors[L],t.fillStyle=j,Vt(S.before,x),C=S.lines,o&&C.length&&(this._drawColorBox(t,e,L,y,s),m=Math.max(f.lineHeight,c)),P=0,k=C.length;P<k;++P)x(C[P]),m=f.lineHeight;Vt(S.after,x)}h=0,m=f.lineHeight,Vt(this.afterBody,x),e.y-=r}drawFooter(e,t,s){const i=this.footer,r=i.length;let a,o;if(r){const c=Ko(s.rtl,this.x,this.width);for(e.x=Ed(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=c.textAlign(s.footerAlign),t.textBaseline="middle",a=Kn(s.footerFont),t.fillStyle=s.footerColor,t.font=a.string,o=0;o<r;++o)t.fillText(i[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:r,yAlign:a}=this,{x:o,y:c}=e,{width:d,height:u}=s,{topLeft:f,topRight:m,bottomLeft:h,bottomRight:y}=Za(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+f,c),a==="top"&&this.drawCaret(e,t,s,i),t.lineTo(o+d-m,c),t.quadraticCurveTo(o+d,c,o+d,c+m),a==="center"&&r==="right"&&this.drawCaret(e,t,s,i),t.lineTo(o+d,c+u-y),t.quadraticCurveTo(o+d,c+u,o+d-y,c+u),a==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(o+h,c+u),t.quadraticCurveTo(o,c+u,o,c+u-h),a==="center"&&r==="left"&&this.drawCaret(e,t,s,i),t.lineTo(o,c+f),t.quadraticCurveTo(o,c,o+f,c),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const a=rc[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=cy(this,e),c=Object.assign({},a,this._size),d=dy(t,e,c),u=uy(e,c,d,t);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=bs(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,t),bb(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),wb(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),r=!vu(s,i),a=this._positionChanged(i,t);(r||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,s),o=this._positionChanged(a,e),c=t||!vu(a,r)||o;return c&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:s,caretY:i,options:r}=this,a=rc[r.position].call(this,e,t);return a!==!1&&(s!==a.x||i!==a.y)}};var aA={id:"tooltip",_element:py,positioners:rc,afterInit(n,e,t){t&&(n.tooltip=new py({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Jb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},oA=Object.freeze({__proto__:null,Colors:v6,Decimation:k6,Filler:q6,Legend:Z6,SubTitle:Q6,Title:J6,Tooltip:aA});const lA=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function cA(n,e,t,s){const i=n.indexOf(e);if(i===-1)return lA(n,e,t,s);const r=n.lastIndexOf(e);return i!==r?t:i}const dA=(n,e)=>n===null?null:ns(Math.round(n),0,e);function my(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class uA extends ao{static id="category";static defaults={ticks:{callback:my}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:r}of t)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Dt(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:cA(s,e,kt(t,e),this._addedLabels),dA(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return my.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function hA(n,e){const t=[],{bounds:i,step:r,min:a,max:o,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:m}=n,h=r||1,y=u-1,{min:x,max:w}=e,S=!Dt(a),j=!Dt(o),C=!Dt(d),L=(w-x)/(f+1);let P=c0((w-x)/y/h)*h,O,k,A,M;if(P<1e-14&&!S&&!j)return[{value:x},{value:w}];M=Math.ceil(w/P)-Math.floor(x/P),M>y&&(P=c0(M*P/y/h)*h),Dt(c)||(O=Math.pow(10,c),P=Math.ceil(P*O)/O),i==="ticks"?(k=Math.floor(x/P)*P,A=Math.ceil(w/P)*P):(k=x,A=w),S&&j&&r&&J4((o-a)/r,P/1e3)?(M=Math.round(Math.min((o-a)/P,u)),P=(o-a)/M,k=a,A=o):C?(k=S?a:k,A=j?o:A,M=d-1,P=(A-k)/M):(M=(A-k)/P,lc(M,Math.round(M),P/1e3)?M=Math.round(M):M=Math.ceil(M));const V=Math.max(d0(P),d0(k));O=Math.pow(10,Dt(c)?V:c),k=Math.round(k*O)/O,A=Math.round(A*O)/O;let _=0;for(S&&(m&&k!==a?(t.push({value:a}),k<a&&_++,lc(Math.round((k+_*P)*O)/O,a,gy(a,L,n))&&_++):k<a&&_++);_<M;++_){const T=Math.round((k+_*P)*O)/O;if(j&&T>o)break;t.push({value:T})}return j&&m&&A!==o?t.length&&lc(t[t.length-1].value,o,gy(o,L,n))?t[t.length-1].value=o:t.push({value:o}):(!j||A===o)&&t.push({value:A}),t}function gy(n,e,{horizontal:t,minRotation:s}){const i=_i(s),r=(t?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+n).length;return Math.min(e/r,a)}class ju extends ao{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const a=c=>i=t?i:c,o=c=>r=s?r:c;if(e){const c=Qi(i),d=Qi(r);c<0&&d<0?o(0):c>0&&d>0&&a(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);o(r+c),e||a(i-c)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,a=hA(i,r);return e.bounds==="ticks"&&sb(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return zc(e,this.chart.options.locale,this.options.ticks.format)}}class fA extends ju{static id="linear";static defaults={ticks:{callback:sh.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wn(e)?e:0,this.max=wn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=_i(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Pc=n=>Math.floor(ra(n)),Wa=(n,e)=>Math.pow(10,Pc(n)+e);function yy(n){return n/Math.pow(10,Pc(n))===1}function xy(n,e,t){const s=Math.pow(10,t),i=Math.floor(n/s);return Math.ceil(e/s)-i}function pA(n,e){const t=e-n;let s=Pc(t);for(;xy(n,e,s)>10;)s++;for(;xy(n,e,s)<10;)s--;return Math.min(s,Pc(n))}function mA(n,{min:e,max:t}){e=Js(n.min,e);const s=[],i=Pc(e);let r=pA(e,t),a=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),c=i>r?Math.pow(10,i):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/o/10)*o*10;let f=Math.floor((d-u)/Math.pow(10,r)),m=Js(n.min,Math.round((c+u+f*Math.pow(10,r))*a)/a);for(;m<t;)s.push({value:m,major:yy(m),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,a=r>=0?1:a),m=Math.round((c+u+f*Math.pow(10,r))*a)/a;const h=Js(n.max,m);return s.push({value:h,major:yy(h),significand:f}),s}class gA extends ao{static id="logarithmic";static defaults={ticks:{callback:sh.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=ju.prototype.parse.apply(this,[e,t]);if(s===0){this._zero=!0;return}return wn(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wn(e)?Math.max(0,e):null,this.max=wn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wn(this._userMin)&&(this.min=e===Wa(this.min,0)?Wa(this.min,-1):Wa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,i=this.max;const r=o=>s=e?s:o,a=o=>i=t?i:o;s===i&&(s<=0?(r(1),a(10)):(r(Wa(s,-1)),a(Wa(i,1)))),s<=0&&r(Wa(i,-1)),i<=0&&a(Wa(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},s=mA(t,this);return e.bounds==="ticks"&&sb(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":zc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ra(e),this._valueRange=ra(this.max)-ra(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ra(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Lp(n){const e=n.ticks;if(e.display&&n.display){const t=bs(e.backdropPadding);return kt(e.font&&e.font.size,fn.font.size)+t.height}return 0}function yA(n,e,t){return t=hn(t)?t:[t],{w:p_(n,e.string,t),h:t.length*e.lineHeight}}function vy(n,e,t,s,i){return n===s||n===i?{start:e-t/2,end:e+t/2}:n<s||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function xA(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),s=[],i=[],r=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?zt/r:0;for(let c=0;c<r;c++){const d=a.setContext(n.getPointLabelContext(c));i[c]=d.padding;const u=n.getPointPosition(c,n.drawingArea+i[c],o),f=Kn(d.font),m=yA(n.ctx,f,n._pointLabels[c]);s[c]=m;const h=ys(n.getIndexAngle(c)+o),y=Math.round(gm(h)),x=vy(y,u.x,m.w,0,180),w=vy(y,u.y,m.h,90,270);vA(t,e,h,x,w)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=SA(n,s,i)}function vA(n,e,t,s,i){const r=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,c=0;s.start<e.l?(o=(e.l-s.start)/r,n.l=Math.min(n.l,e.l-o)):s.end>e.r&&(o=(s.end-e.r)/r,n.r=Math.max(n.r,e.r+o)),i.start<e.t?(c=(e.t-i.start)/a,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/a,n.b=Math.max(n.b,e.b+c))}function bA(n,e,t){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:a,size:o}=t,c=n.getPointPosition(e,s+i+a,r),d=Math.round(gm(ys(c.angle+Tn))),u=_A(c.y,o.h,d),f=kA(d),m=NA(c.x,o.w,f);return{visible:!0,x:c.x,y:u,textAlign:f,left:m,top:u,right:m+o.w,bottom:u+o.h}}function wA(n,e){if(!e)return!0;const{left:t,top:s,right:i,bottom:r}=n;return!(Lr({x:t,y:s},e)||Lr({x:t,y:r},e)||Lr({x:i,y:s},e)||Lr({x:i,y:r},e))}function SA(n,e,t){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:a,display:o}=r.pointLabels,c={extra:Lp(r)/2,additionalAngle:a?zt/i:0};let d;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];const f=bA(n,u,c);s.push(f),o==="auto"&&(f.visible=wA(f,d),f.visible&&(d=f))}return s}function kA(n){return n===0||n===180?"center":n<180?"left":"right"}function NA(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function _A(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function jA(n,e,t){const{left:s,top:i,right:r,bottom:a}=t,{backdropColor:o}=e;if(!Dt(o)){const c=Za(e.borderRadius),d=bs(e.backdropPadding);n.fillStyle=o;const u=s-d.left,f=i-d.top,m=r-s+d.width,h=a-i+d.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),Cc(n,{x:u,y:f,w:m,h,radius:c}),n.fill()):n.fillRect(u,f,m,h)}}function AA(n,e){const{ctx:t,options:{pointLabels:s}}=n;for(let i=e-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const a=s.setContext(n.getPointLabelContext(i));jA(t,a,r);const o=Kn(a.font),{x:c,y:d,textAlign:u}=r;eo(t,n._pointLabels[i],c,d+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function Qb(n,e,t,s){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,ln);else{let r=n.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let a=1;a<s;a++)r=n.getPointPosition(a,e),i.lineTo(r.x,r.y)}}function CA(n,e,t,s,i){const r=n.ctx,a=e.circular,{color:o,lineWidth:c}=e;!a&&!s||!o||!c||t<0||(r.save(),r.strokeStyle=o,r.lineWidth=c,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),Qb(n,t,a,s),r.closePath(),r.stroke(),r.restore())}function LA(n,e,t){return ma(n,{label:t,index:e,type:"pointLabel"})}class PA extends ju{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=bs(Lp(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=wn(e)&&!isNaN(e)?e:0,this.max=wn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lp(this.options))}generateTickLabels(e){ju.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,s)=>{const i=sn(this.options.pointLabels.callback,[t,s],this);return i||i===0?i:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?xA(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,i))}getIndexAngle(e){const t=ln/(this._pointLabels.length||1),s=this.options.startAngle||0;return ys(e*t+_i(s))}getDistanceFromCenterForValue(e){if(Dt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Dt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return LA(this.getContext(),e,s)}}getPointPosition(e,t,s=0){const i=this.getIndexAngle(e)-Tn+s;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Qb(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:i,border:r}=t,a=this._pointLabels.length;let o,c,d;if(t.pointLabels.display&&AA(this,a),i.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(f),h=i.setContext(m),y=r.setContext(m);CA(this,h,c,a,y)}}),s.display){for(e.save(),o=a-1;o>=0;o--){const u=s.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:m}=u;!m||!f||(e.lineWidth=m,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const d=s.setContext(this.getContext(c)),u=Kn(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const f=bs(d.backdropPadding);e.fillRect(-a/2-f.left,-r-u.size/2-f.top,a+f.width,u.size+f.height)}eo(e,o.label,0,-r,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const uh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rs=Object.keys(uh);function by(n,e){return n-e}function wy(n,e){if(Dt(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let a=e;return typeof s=="function"&&(a=s(a)),wn(a)||(a=typeof s=="string"?t.parse(a,s):t.parse(a)),a===null?null:(i&&(a=i==="week"&&(rl(r)||r===!0)?t.startOf(a,"isoWeek",r):t.startOf(a,i)),+a)}function Sy(n,e,t,s){const i=Rs.length;for(let r=Rs.indexOf(n);r<i-1;++r){const a=uh[Rs[r]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=s)return Rs[r]}return Rs[i-1]}function MA(n,e,t,s,i){for(let r=Rs.length-1;r>=Rs.indexOf(t);r--){const a=Rs[r];if(uh[a].common&&n._adapter.diff(i,s,a)>=e-1)return a}return Rs[t?Rs.indexOf(t):0]}function DA(n){for(let e=Rs.indexOf(n)+1,t=Rs.length;e<t;++e)if(uh[Rs[e]].common)return Rs[e]}function ky(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=ym(t,e),r=t[s]>=e?t[s]:t[i];n[r]=!0}}function TA(n,e,t,s){const i=n._adapter,r=+i.startOf(e[0].value,s),a=e[e.length-1].value;let o,c;for(o=r;o<=a;o=+i.add(o,1,s))c=t[o],c>=0&&(e[c].major=!0);return e}function Ny(n,e,t){const s=[],i={},r=e.length;let a,o;for(a=0;a<r;++a)o=e[a],i[o]=a,s.push({value:o,major:!1});return r===0||!t?s:TA(n,s,i,t)}class Pp extends ao{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new Ij._date(e.adapters.date);i.init(t),oc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:wy(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=wn(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),r=wn(r)&&!isNaN(r)?r:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,a=this.max,o=t_(i,r,a);return this._unit=t.unit||(s.autoSkip?Sy(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):MA(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:DA(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),Ny(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=ns(t,0,a),s=ns(s,0,a),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,r=i.time,a=r.unit||Sy(r.minUnit,t,s,this._getLabelCapacity(t)),o=kt(i.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,d=rl(c)||c===!0,u={};let f=t,m,h;if(d&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,d?"day":a),e.diff(s,t,a)>1e5*o)throw new Error(t+" and "+s+" are too far apart with stepSize of "+o+" "+a);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=f,h=0;m<s;m=+e.add(m,o,a),h++)ky(u,m,y);return(m===s||i.bounds==="ticks"||h===1)&&ky(u,m,y),Object.keys(u).sort(by).map(x=>+x)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,a=t||i[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,s,i){const r=this.options,a=r.ticks.callback;if(a)return sn(a,[e,t,s],this);const o=r.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],f=d&&o[d],m=s[t],h=d&&f&&m&&m.major;return this._adapter.format(e,i||(h?f:u))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=_i(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:s*r+o*a,h:s*a+o*r}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,r=this._tickFormatFunction(e,0,Ny(this,[e],this._majorUnit),i),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(wy(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ab(e.sort(by))}}function Od(n,e,t){let s=0,i=n.length-1,r,a,o,c;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=Cr(n,"pos",e)),{pos:r,time:o}=n[s],{pos:a,time:c}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=Cr(n,"time",e)),{time:r,pos:o}=n[s],{time:a,pos:c}=n[i]);const d=a-r;return d?o+(c-o)*(e-r)/d:o}class IA extends Pp{static id="timeseries";static defaults=Pp.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Od(t,this.min),this._tableRange=Od(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],r=[];let a,o,c,d,u;for(a=0,o=e.length;a<o;++a)d=e[a],d>=t&&d<=s&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(a=0,o=i.length;a<o;++a)u=i[a+1],c=i[a-1],d=i[a],Math.round((u+c)/2)!==d&&r.push({time:d,pos:a/(o-1)});return r}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Od(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Od(this._table,s*this._tableRange+this._minPos,!0)}}var EA=Object.freeze({__proto__:null,CategoryScale:uA,LinearScale:fA,LogarithmicScale:gA,RadialLinearScale:PA,TimeScale:Pp,TimeSeriesScale:IA});const OA=[Tj,h6,oA,EA],Xb="label";function _y(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function RA(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function e2(n,e){n.labels=e}function t2(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xb;const s=[];n.datasets=e.map(i=>{const r=n.datasets.find(a=>a[t]===i[t]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function FA(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xb;const t={labels:[],datasets:[]};return e2(t,n.labels),t2(t,n.datasets,e),t}function zA(n,e){const{height:t=150,width:s=300,redraw:i=!1,datasetIdKey:r,type:a,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...m}=n,h=X.useRef(null),y=X.useRef(null),x=()=>{h.current&&(y.current=new Jo(h.current,{type:a,data:FA(o,r),options:c&&{...c},plugins:d}),_y(e,y.current))},w=()=>{_y(e,null),y.current&&(y.current.destroy(),y.current=null)};return X.useEffect(()=>{!i&&y.current&&c&&RA(y.current,c)},[i,c]),X.useEffect(()=>{!i&&y.current&&e2(y.current.config.data,o.labels)},[i,o.labels]),X.useEffect(()=>{!i&&y.current&&o.datasets&&t2(y.current.config.data,o.datasets,r)},[i,o.datasets]),X.useEffect(()=>{y.current&&(i?(w(),setTimeout(x)):y.current.update(f))},[i,c,o.labels,o.datasets,f]),X.useEffect(()=>{y.current&&(w(),setTimeout(x))},[a]),X.useEffect(()=>(x(),()=>w()),[]),it.createElement("canvas",{ref:h,role:"img",height:t,width:s,...m},u)}const BA=X.forwardRef(zA);function hh(n,e){return Jo.register(e),X.forwardRef((t,s)=>it.createElement(BA,{...t,ref:s,type:n}))}const $A=hh("line",Pb),WA=hh("bar",Lb),qA=hh("radar",Db),UA=hh("doughnut",oh),dn=n=>{if(typeof window<"u"&&typeof document<"u")try{const e=getComputedStyle(document.documentElement).getPropertyValue(`--${n}`).trim();if(e)return e}catch(e){console.warn("colorVar computedStyle failed",e)}try{if(sa&&sa[":root"]&&Object.prototype.hasOwnProperty.call(sa[":root"],`--${n}`))return sa[":root"][`--${n}`]}catch{}return rt.colors.neutral?.[500]};function Af(n,e){if(!n)return"";const t=n.trim().replace("#","");if(t.length===3){const s=parseInt(t[0]+t[0],16),i=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16);return`rgba(${s}, ${i}, ${r}, ${e})`}if(t.length===6){const s=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return`rgba(${s}, ${i}, ${r}, ${e})`}return""}const Au=(n,e)=>{const t=typeof e=="string"?parseFloat(e):e;if(typeof window<"u"&&typeof document<"u")try{const i=getComputedStyle(document.documentElement).getPropertyValue(`--${n}`).trim();if(i){if(i.startsWith("#")){const a=Af(i,Number.isFinite(t)?t:1);if(a)return a}const r=i.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(r){const a=r[1],o=r[2],c=r[3];return`rgba(${a}, ${o}, ${c}, ${Number.isFinite(t)?t:1})`}}}catch(i){console.warn("colorVarAlpha computedStyle failed",i)}try{if(sa&&sa[":root"]&&Object.prototype.hasOwnProperty.call(sa[":root"],`--${n}`)){const i=sa[":root"][`--${n}`];if(i&&i.startsWith("#")){const a=Af(i,Number.isFinite(t)?t:1);if(a)return a}const r=(i||"").match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(r){const a=r[1],o=r[2],c=r[3];return`rgba(${a}, ${o}, ${c}, ${Number.isFinite(t)?t:1})`}}}catch{}const s=rt.colors.neutral?.[500];if(s.startsWith("#")){const i=Af(s,Number.isFinite(t)?t:1);if(i)return i}return s},Cf={pain:{none:rt.colors.pain.none,mild:rt.colors.pain.mild,moderate:rt.colors.pain.moderate,severe:rt.colors.pain.severe,extreme:rt.colors.pain.extreme},treatment:{primary:rt.colors.secondary[500],medication:rt.colors.accent[500],therapy:rt.colors.primary[600],lifestyle:rt.colors.neutral[600]},analytics:{trend:rt.colors.primary[500],average:rt.colors.secondary[500],prediction:rt.colors.accent[400],baseline:rt.colors.neutral[500]},status:{normal:rt.colors.status.info,warning:rt.colors.status.warning,critical:rt.colors.status.error,success:rt.colors.status.success},series:[rt.colors.primary[500],rt.colors.secondary[500],rt.colors.accent[500],rt.colors.pain.severe,rt.colors.pain.mild,rt.colors.neutral[600],rt.colors.primary[700],rt.colors.secondary[700],rt.colors.accent[700],rt.colors.pain.extreme]},n2=(n,e="series")=>{const t=Cf[e];return Array.isArray(t)?t[n%t.length]:Cf.series[n%Cf.series.length]},s2=(n,e=.2,t="series")=>{const i=n2(n,t).replace("#",""),r=parseInt(i.substr(0,2),16),a=parseInt(i.substr(2,2),16),o=parseInt(i.substr(4,2),16);return`rgba(${r}, ${a}, ${o}, ${e})`};s2(0,.1,"analytics");typeof window<"u"&&Jo._registered!==!0&&(Jo.register(...OA),Jo._registered=!0);function VA(n,e,t=0){const s=Array.isArray(n.borderColor),i=Array.isArray(n.backgroundColor),r=n2(t),a=s2(t,.1),o=n.borderColor??r,c=n.backgroundColor??a,d={...n,borderColor:o,backgroundColor:c,borderWidth:n.borderWidth??2,tension:n.tension??.4,fill:typeof n.fill=="boolean"?n.fill:e==="line"};return e==="line"&&(i?d.pointBackgroundColor=n.backgroundColor:d.backgroundColor&&(d.pointBackgroundColor=d.backgroundColor),s?d.pointBorderColor=n.borderColor:d.borderColor&&(d.pointBorderColor=d.borderColor)),d}function jr({data:n,type:e="line",title:t,summary:s,height:i=300,className:r,showLegend:a=!0,showTitle:o=!0,responsive:c=!0,maintainAspectRatio:d=!1,scales:u}){const f=it.useMemo(()=>({labels:n.labels,datasets:n.datasets.map((y,x)=>VA(y,e,x))}),[n,e]),m=it.useMemo(()=>({responsive:c,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:a,labels:{color:dn("color-foreground")}},title:{display:o&&!!t,text:t,color:dn("color-foreground")},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:dn("color-card"),titleColor:dn("color-foreground"),bodyColor:dn("color-foreground"),borderColor:dn("color-border"),borderWidth:1,padding:8,callbacks:{label:function(y){try{const x=y.dataset,w=y.dataIndex,S=y.dataset.label||"",j=y.parsed?.y??y.parsed??y.raw??"";let C=`${S}: ${j}`;if(x._meta&&x._meta[w]){const L=x._meta[w];typeof L.count=="number"&&(C+=`  ${L.count} entr${L.count===1?"y":"ies"}`);const P=[];L.notes&&P.push(`${L.notes} notes`),L.meds&&P.push(`${L.meds} meds`),P.length&&(C+=` (${P.join(", ")})`)}return C}catch{return y.dataset.label?`${y.dataset.label}: ${y.formattedValue}`:`${y.formattedValue}`}}}}},elements:{point:{radius:3,hoverRadius:6,borderWidth:2},line:{tension:.35}},animation:{duration:400,easing:"easeOutQuart"},scales:e!=="doughnut"&&e!=="radar"?{x:{ticks:{color:dn("color-foreground")},grid:{color:dn("color-border")}},y:{min:0,max:10,ticks:{color:dn("color-foreground")},grid:{color:dn("color-border")},title:{display:!0,text:"Pain Level"}},y1:{position:"right",ticks:{color:dn("color-foreground")},grid:{display:!1},title:{display:!0,text:"Entries"}},...u}:void 0}),[c,d,a,o,t,e,u]),h=s??(t?`${t} chart with ${n.datasets.length} dataset(s)`:"Chart data");return l.jsx(ze,{className:yt("w-full",r),children:l.jsx(qe,{className:"p-6",children:l.jsxs("figure",{"aria-labelledby":t?"chart-title":void 0,children:[t&&l.jsx("figcaption",{id:"chart-title",className:"sr-only",children:t}),l.jsx("p",{className:"sr-only",id:"chart-summary",children:h}),l.jsxs("div",{"aria-describedby":"chart-summary",children:[e==="bar"&&l.jsx(WA,{data:f,options:m,height:i}),e==="doughnut"&&l.jsx(UA,{data:f,options:m,height:i}),e==="radar"&&l.jsx(qA,{data:f,options:m,height:i}),e==="line"&&l.jsx($A,{data:f,options:m,height:i})]})]})})})}const HA={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};function Cm({isOpen:n,onClose:e,title:t,children:s,size:i="md",className:r,showCloseButton:a=!0,closeOnBackdropClick:o=!0,closeOnEscape:c=!0,footer:d,headerClassName:u,contentClassName:f,footerClassName:m}){const h=X.useRef(null);if(X.useEffect(()=>{const x=w=>{w.key==="Escape"&&c&&e()};return n&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[n,e,c]),X.useEffect(()=>{n&&h.current&&h.current.focus()},[n]),!n)return null;const y=x=>{x.target===x.currentTarget&&o&&e()};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":t?"modal-title":void 0,"aria-describedby":s?"modal-description":void 0,children:l.jsx("div",{ref:h,className:yt("w-full bg-background rounded-lg shadow-xl animate-in zoom-in-95 duration-200",HA[i],r),tabIndex:-1,role:"document",children:l.jsxs(ze,{className:"border-0 shadow-none",children:[(t||a)&&l.jsxs(mt,{className:yt("flex flex-row items-center justify-between space-y-0 pb-4",u),children:[t&&l.jsx(gt,{id:"modal-title",className:"text-lg font-semibold",children:t}),a&&l.jsx(dt,{variant:"ghost",size:"sm",onClick:e,className:"h-8 w-8 p-0 hover:bg-muted","aria-label":"Close modal",children:l.jsx(Ls,{className:"h-4 w-4"})})]}),l.jsx(qe,{className:yt("pt-0",f),id:"modal-description",children:s}),d&&l.jsx("div",{className:yt("flex justify-end space-x-2 pt-4 border-t px-6 pb-6",m),children:d})]})})})}function i2({entries:n}){return l.jsxs(ze,{"data-walkthrough":"pain-history",children:[l.jsxs(mt,{children:[l.jsx(gt,{children:"Pain History"}),l.jsx(Zi,{children:"Detailed view of all your pain entries and patterns"})]}),l.jsx(qe,{children:l.jsx(_N,{entries:n})})]})}const GA={advancedAnalytics:!0,workSafeBCExport:!0,emergencyProtocols:!1,experimentalUI:!1};function r2(n){return GA[n]}const Lf={title:"Beta Software Notice",message:"You're running a beta version of Pain Tracker. Please backup your data regularly. This build is intended for testing and feedback. Report issues at the repository issues page.",supportUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues"},Pf="pain-tracker:beta-dismissed";function a2(n,e){if(e<=0)return[];const t=[];for(let s=0;s<n.length;s++){const i=Math.max(0,s-e+1),r=n.slice(i,s+1).filter(o=>typeof o=="number"&&!isNaN(o)),a=r.length?r.reduce((o,c)=>o+c,0)/r.length:0;t.push(a)}return t}function o2(n,e){if(e<=0)return[];const t=[];for(let s=0;s<n.length;s++){const i=Math.max(0,s-e+1),r=n.slice(i,s+1).filter(c=>typeof c=="number"&&!isNaN(c));if(r.length===0){t.push(0);continue}const a=r.reduce((c,d)=>c+d,0)/r.length,o=r.reduce((c,d)=>c+Math.pow(d-a,2),0)/r.length;t.push(Math.sqrt(o))}return t}function YA(n,e=7,t=2.5){const s=[],i=a2(n,e),r=o2(n,e);for(let a=0;a<n.length;a++){const o=n[a],c=i[a]??0,d=r[a]??0;if(d===0)continue;Math.abs((o-c)/d)>=t&&s.push(a)}return s}function ZA(n,e){const t={};return n.forEach(s=>{const i=new Date(s.timestamp).toISOString().split("T")[0];t[i]||(t[i]=[]),e==="pain"&&t[i].push(s.baselineData.pain)}),Object.entries(t).map(([s,i])=>({date:s,value:i.length>0?i.reduce((r,a)=>r+a,0)/i.length:null}))}function KA(n,e){const t=[],s=new Date;for(let i=e-1;i>=0;i--){const a=new Date(s.getTime()-i*24*60*60*1e3).toISOString().split("T")[0],o=n.filter(c=>new Date(c.timestamp).toISOString().split("T")[0]===a).length;t.push({date:a,value:o})}return t}function JA(n){const e=[{min:0,max:2,label:"Mild (0-2)",count:0},{min:3,max:5,label:"Moderate (3-5)",count:0},{min:6,max:8,label:"Severe (6-8)",count:0},{min:9,max:10,label:"Extreme (9-10)",count:0}];n.forEach(i=>{const r=i.baselineData.pain,a=e.find(o=>r>=o.min&&r<=o.max);a&&a.count++});const t=n.length,s=t>0?e.reduce((i,r)=>{const a=r.count/t;return i+a*a},0):0;return{variance:Math.sqrt(s),data:e.map(i=>({label:i.label,value:i.count,percentage:t>0?i.count/t*100:0}))}}function QA(n){const e={};n.forEach(s=>{const i=s.baselineData.pain;(s.baselineData.symptoms||[]).forEach(a=>{e[a]||(e[a]=[]),e[a].push(i)})});const t=Object.entries(e).map(([s,i])=>({symptom:s,avgPain:i.reduce((r,a)=>r+a,0)/i.length,count:i.length})).sort((s,i)=>i.avgPain-s.avgPain);return{strength:t.length>0?t[0].avgPain:0,data:t.slice(0,5)}}function XA(n){const e=n.filter(o=>o.qualityOfLife);if(e.length===0)return{average:0,change:0,trendData:[]};const t=e.reduce((o,c)=>o+(c.qualityOfLife?.sleepQuality||0),0)/e.length,s=e.reduce((o,c)=>o+(c.qualityOfLife?.moodImpact||0),0)/e.length,i=(t+s)/2,r=0,a=e.map(o=>({date:new Date(o.timestamp).toISOString().split("T")[0],sleep:o.qualityOfLife?.sleepQuality||0,mood:o.qualityOfLife?.moodImpact||0,average:((o.qualityOfLife?.sleepQuality||0)+(o.qualityOfLife?.moodImpact||0))/2}));return{average:i,change:r,trendData:a}}function l2(n){if(n.length<2)return 0;const e=n.length,t=e*(e-1)/2,s=n.reduce((o,c)=>o+c,0),i=n.reduce((o,c,d)=>o+d*c,0),r=e*(e-1)*(2*e-1)/6;return(e*i-t*s)/(e*r-t*t)}function eC(n){const e={};n.forEach(s=>{const i=new Date(s.timestamp).getHours(),r=i<6?"night":i<12?"morning":i<18?"afternoon":"evening";e[r]||(e[r]={pains:[],count:0}),e[r].pains.push(s.baselineData.pain),e[r].count++});const t=Object.entries(e).map(([s,i])=>({time:s,avgPain:i.pains.reduce((r,a)=>r+a,0)/i.pains.length,count:i.count})).sort((s,i)=>i.avgPain-s.avgPain);return t.length>0&&t[0].count>=3?{timeOfDay:{time:t[0].time,avgPain:t[0].avgPain,confidence:Math.min(t[0].count/n.length*100,90)}}:{}}function tC(n){if(n.length<7)return{predictedAvg:0,confidence:0};const e=n.slice(-7),t=e.reduce((a,o)=>a+o.baselineData.pain,0)/e.length,s=l2(e.map(a=>a.baselineData.pain)),i=Math.max(0,Math.min(10,t+s*7)),r=Math.min(e.length*10,85);return{predictedAvg:i,confidence:r}}function nC(n){const e={};n.forEach(r=>{const a=new Date(r.timestamp).toISOString().split("T")[0];e[a]||(e[a]={values:[],count:0,notes:0,meds:0}),e[a].values.push(r.baselineData.pain),e[a].count+=1,r.notes&&(e[a].notes+=1),r.medications&&r.medications.length>0&&(e[a].meds+=1)});const t=Object.entries(e).sort(([r],[a])=>r.localeCompare(a)),s=t.map(([r,a])=>({date:r,value:a.values.reduce((o,c)=>o+c,0)/a.values.length})),i=t.map(([r,a])=>({date:r,count:a.count,notes:a.notes,meds:a.meds}));return{dailyAverages:s,dailyMeta:i}}const yr={generateTrendData:ZA,generateFrequencyData:KA,calculateIntensityDistribution:JA,calculateSymptomCorrelation:QA,calculateQOLImpact:XA,calculateTrend:l2,detectPatterns:eC,generateForecast:tC,buildDailyAggregates:nC};function sC({entries:n,className:e}){if(!r2("advancedAnalytics"))return null;const[t,s]=X.useState("month"),[i,r]=X.useState(!0),[a,o]=X.useState("line"),[c,d]=X.useState(!1),[u,f]=X.useState(!1),[m,h]=X.useState(!1),y=X.useMemo(()=>{if(n.length===0)return[];const F=new Date,Se={week:7,month:30,quarter:90,year:365}[t],ge=new Date(F.getTime()-Se*24*60*60*1e3),R=n.filter(Oe=>new Date(Oe.timestamp)>=ge),U=[],H=R.length>0?R.reduce((Oe,ye)=>Oe+ye.baselineData.pain,0)/R.length:0,te=n.filter(Oe=>{const ye=new Date(Oe.timestamp),J=new Date(ge.getTime()-Se*24*60*60*1e3);return ye>=J&&ye<ge}).reduce((Oe,ye)=>Oe+ye.baselineData.pain,0)/Math.max(n.filter(Oe=>{const ye=new Date(Oe.timestamp),J=new Date(ge.getTime()-Se*24*60*60*1e3);return ye>=J&&ye<ge}).length,1),re=te>0?(H-te)/te*100:0;U.push({id:"pain-level",name:"Average Pain Level",value:H,change:re,trend:re>5?"up":re<-5?"down":"stable",category:"Pain Management",description:"Average pain intensity across all entries",chartData:w(R,"pain")});const le=R.length>0?R.length/Se:0,xe=n.filter(Oe=>{const ye=new Date(Oe.timestamp),J=new Date(ge.getTime()-Se*24*60*60*1e3);return ye>=J&&ye<ge}).length/Se,me=xe>0?(le-xe)/xe*100:0;U.push({id:"frequency",name:"Entry Frequency",value:le,change:me,trend:me>10?"up":me<-10?"down":"stable",category:"Tracking Habits",description:"Average entries per day",chartData:S(R,Se)});const we=j(R);U.push({id:"intensity",name:"Pain Distribution",value:we.variance,change:0,trend:"stable",category:"Pain Patterns",description:"Variability in pain intensity levels",chartData:we.data});const Me=C(R);U.push({id:"symptoms",name:"Symptom Patterns",value:Me.strength,change:0,trend:"stable",category:"Symptom Analysis",description:"Correlation between symptoms and pain levels",chartData:Me.data});const Ee=L(R);return U.push({id:"quality-of-life",name:"Quality of Life",value:Ee.average,change:Ee.change,trend:Ee.change>5?"up":Ee.change<-5?"down":"stable",category:"Wellbeing",description:"Impact on daily quality of life",chartData:Ee.trendData}),U},[n,t]),x=X.useMemo(()=>{const F=[];if(n.length<7)return F;const Se=n.slice(-14).map(H=>H.baselineData.pain),ge=P(Se);Math.abs(ge)>.5&&F.push({type:"trend",title:ge>0?"Increasing Pain Trend":"Decreasing Pain Trend",description:`Your pain levels have been ${ge>0?"increasing":"decreasing"} over the past 2 weeks with a slope of ${Gt(ge,2)} points per day.`,confidence:Math.min(Math.abs(ge)*20,95),impact:Math.abs(ge)>1?"high":"medium",timeframe:"Next 7 days",recommendation:ge>0?"Consider reviewing your pain management strategies":"Great progress! Keep up your current approach"});const R=O(n);R.timeOfDay&&F.push({type:"pattern",title:"Time-based Pain Pattern",description:`Higher pain levels detected ${R.timeOfDay.time} (${Gt(R.timeOfDay.avgPain,1)}/10 avg)`,confidence:R.timeOfDay.confidence,impact:"medium",timeframe:"Daily pattern",recommendation:`Consider adjusting activities around ${R.timeOfDay.time}`});const U=k(n);return U.confidence>70&&F.push({type:"forecast",title:"Pain Level Forecast",description:`Projected average pain level for next week: ${Gt(U.predictedAvg,1)}/10`,confidence:U.confidence,impact:U.predictedAvg>7?"high":"medium",timeframe:"Next 7 days",recommendation:U.predictedAvg>7?"Consider proactive pain management":"Continue current strategies"}),F},[n]);function w(F,ce){return yr.generateTrendData(F,ce)}function S(F,ce){return yr.generateFrequencyData(F,ce)}function j(F){return yr.calculateIntensityDistribution(F)}function C(F){return yr.calculateSymptomCorrelation(F)}function L(F){return yr.calculateQOLImpact(F)}function P(F){return yr.calculateTrend(F)}function O(F){return yr.detectPatterns(F)}function k(F){return yr.generateForecast(F)}const{dailyAverages:A,dailyMeta:M}=it.useMemo(()=>yr.buildDailyAggregates(n),[n]),V=A.map(F=>F.value),_=a2(V,7),T=o2(V,7),W=YA(V,7,2.5);function D(F,ce=1){const Se=Math.max(0,Math.min(10,Number(F||0)))/10,ge="#4b5563",R="#ef4444",U=ge.replace("#",""),H=R.replace("#",""),te=parseInt(U.slice(0,2),16),re=parseInt(U.slice(2,4),16),le=parseInt(U.slice(4,6),16),xe=parseInt(H.slice(0,2),16),me=parseInt(H.slice(2,4),16),we=parseInt(H.slice(4,6),16),Me=Math.round(te+(xe-te)*Se),Ee=Math.round(re+(me-re)*Se),Oe=Math.round(le+(we-le)*Se);return`rgba(${Me}, ${Ee}, ${Oe}, ${ce})`}function Q(){try{const ce=[["date","avg_pain","rolling7_avg","stddev7","is_anomaly"].join(",")];for(let H=0;H<A.length;H++){const te=A[H],re=[te.date,(te.value??"").toString(),(_[H]??"").toString(),(T[H]??"").toString(),W.includes(H)?"1":"0"];ce.push(re.join(","))}const Se=ce.join(`
`),ge=new Blob([Se],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(ge),U=document.createElement("a");U.href=R,U.download=`pain-analytics-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(U),U.click(),U.remove(),URL.revokeObjectURL(R)}catch(F){console.error("CSV export failed",F)}}const ne=F=>{switch(F){case"up":return l.jsx(Dn,{className:"h-4 w-4 text-red-500"});case"down":return l.jsx(xu,{className:"h-4 w-4 text-green-500"});default:return l.jsx(Qa,{className:"h-4 w-4 text-blue-500"})}},ae=F=>{switch(F){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}};return n.length===0?l.jsx(ze,{className:yt("w-full",e),children:l.jsx(qe,{className:"flex items-center justify-center p-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Fs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),l.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Data Available"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Start tracking your pain to unlock advanced analytics and insights."})]})})}):l.jsxs("div",{className:yt("w-full space-y-6",e),children:[l.jsx(ze,{children:l.jsx(mt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(ei,{className:"h-6 w-6 text-purple-600"}),l.jsx("span",{children:"Advanced Analytics Dashboard"})]}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Predictive insights and advanced visualizations for your pain journey"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative",children:[l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>f(!u),className:"w-32 justify-between",children:[t==="week"?"Past Week":t==="month"?"Past Month":t==="quarter"?"Past Quarter":"Past Year",l.jsx(Ir,{className:"h-4 w-4 ml-2"})]}),u&&l.jsx("div",{className:"absolute top-full mt-1 w-32 bg-card border rounded-md shadow-lg z-10",children:[{value:"week",label:"Past Week"},{value:"month",label:"Past Month"},{value:"quarter",label:"Past Quarter"},{value:"year",label:"Past Year"}].map(({value:F,label:ce})=>l.jsx("button",{onClick:()=>{s(F),f(!1)},className:"w-full px-3 py-2 text-left hover:bg-accent text-sm",children:ce},F))})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>h(!m),className:"w-32 justify-between",children:[a==="line"?"Line Chart":"Bar Chart",l.jsx(Fs,{className:"h-4 w-4 ml-2"})]}),m&&l.jsx("div",{className:"absolute top-full mt-1 w-32 bg-card border rounded-md shadow-lg z-10",children:[{value:"line",label:"Line Chart"},{value:"bar",label:"Bar Chart"}].map(({value:F,label:ce})=>l.jsx("button",{onClick:()=>{o(F),h(!1)},className:"w-full px-3 py-2 text-left hover:bg-accent text-sm",children:ce},F))})]}),l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>r(!i),children:[i?l.jsx(om,{className:"h-4 w-4"}):l.jsx(Ju,{className:"h-4 w-4"}),i?"Hide":"Show"," Predictions"]}),l.jsx(dt,{variant:"outline",size:"sm",onClick:()=>d(!c),children:c?l.jsx(qk,{className:"h-4 w-4"}):l.jsx($k,{className:"h-4 w-4"})}),l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>Q(),children:[l.jsx(pu,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:y.map(F=>l.jsx(ze,{className:"hover:shadow-md transition-shadow",children:l.jsxs(qe,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:F.name}),ne(F.trend)]}),l.jsxs("div",{className:"text-2xl font-bold mb-1",children:[Gt(F.value,(F.id==="frequency",1)),F.id==="frequency"?"/day":F.id==="pain-level"?"/10":""]}),F.change!==0&&l.jsxs("div",{className:yt("text-xs flex items-center",F.change>0?"text-red-600":"text-green-600"),children:[F.change>0?l.jsx(Dn,{className:"h-3 w-3 mr-1"}):l.jsx(xu,{className:"h-3 w-3 mr-1"}),Gt(Math.abs(F.change),1),"% vs previous period"]}),l.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:F.description})]})},F.id))}),i&&x.length>0&&l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(lm,{className:"h-5 w-5 text-yellow-500"}),l.jsx("span",{children:"Predictive Insights"})]})}),l.jsx(qe,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map((F,ce)=>l.jsxs("div",{className:yt("p-4 rounded-lg border",ae(F.impact)),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx(zs,{variant:"outline",className:"text-xs capitalize",children:F.type}),l.jsxs("span",{className:"text-xs font-medium",children:[F.confidence,"% confidence"]})]}),l.jsx("h4",{className:"font-medium mb-2",children:F.title}),l.jsx("p",{className:"text-sm mb-3",children:F.description}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsxs("div",{children:["Timeframe: ",F.timeframe]}),F.recommendation&&l.jsxs("div",{className:"mt-2 p-2 bg-white/50 rounded text-xs",children:[" ",F.recommendation]})]})]},ce))})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(ze,{className:yt(c&&"lg:col-span-2"),children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(KS,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Level Trends"})]})}),l.jsx(qe,{children:A.length>0&&l.jsx(jr,{data:{labels:(function(){return A.length<=7?A.map((Se,ge)=>`Day ${ge+1}`):A.map(Se=>Se.date)})(),datasets:[{label:"Average Pain Level",data:A.map(F=>F.value),_meta:M,borderColor:V.map(F=>D(F,1)),backgroundColor:V.map(F=>D(F,.08)),fill:!1,tension:.35,pointBackgroundColor:A.map((F,ce)=>W.includes(ce)?"rgba(239,68,68,1)":D(F.value,1)),pointRadius:A.map((F,ce)=>W.includes(ce)?6:4),yAxisID:"y"},{label:"Entries",data:M.map(F=>F.count),borderColor:"rgba(75,85,99,0.95)",backgroundColor:"rgba(75,85,99,0.12)",borderWidth:1,tension:.2,type:"bar",yAxisID:"y1"},{label:"7-day rolling avg",data:_,borderColor:dn("color-accent"),backgroundColor:"transparent",borderDash:[6,4],tension:.25,pointRadius:0,fill:!1,yAxisID:"y"}]},type:"line",height:c?420:320})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(ek,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Intensity Distribution"})]})}),l.jsx(qe,{children:y.find(F=>F.id==="intensity")?.chartData&&l.jsx(jr,{data:{labels:y.find(F=>F.id==="intensity").chartData.map(F=>F.label),datasets:[{label:"Entries",data:y.find(F=>F.id==="intensity").chartData.map(F=>F.value),backgroundColor:[dn("color-secondary"),dn("color-accent"),dn("color-warning"),dn("color-destructive")]}]},type:"doughnut",height:300})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Fs,{className:"h-5 w-5"}),l.jsx("span",{children:"Symptom-Pain Correlation"})]})}),l.jsx(qe,{children:y.find(F=>F.id==="symptoms")?.chartData&&l.jsx(jr,{data:{labels:y.find(F=>F.id==="symptoms").chartData.map(F=>F.symptom),datasets:[{label:"Average Pain Level",data:y.find(F=>F.id==="symptoms").chartData.map(F=>F.avgPain),backgroundColor:dn("color-primary")}]},type:"bar",height:300})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Ci,{className:"h-5 w-5 text-pink-500"}),l.jsx("span",{children:"Quality of Life Impact"})]})}),l.jsx(qe,{children:y.find(F=>F.id==="quality-of-life")?.chartData&&l.jsx(jr,{data:{labels:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.date),datasets:[{label:"Sleep Quality",data:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.sleep),borderColor:dn("color-secondary"),backgroundColor:Au("color-secondary",.1),tension:.4},{label:"Mood Impact",data:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.mood),borderColor:dn("color-accent"),backgroundColor:Au("color-accent",.1),tension:.4}]},type:"line",height:300})})]})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Ir,{className:"h-5 w-5"}),l.jsx("span",{children:"Entry Frequency Pattern"})]})}),l.jsx(qe,{children:y.find(F=>F.id==="frequency")?.chartData&&l.jsx(jr,{data:{labels:y.find(F=>F.id==="frequency").chartData.map(F=>new Date(F.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),datasets:[{label:"Entries per Day",data:y.find(F=>F.id==="frequency").chartData.map(F=>F.value),backgroundColor:dn("color-primary"),borderColor:dn("color-primary"),borderWidth:2}]},type:"bar",height:250})})]})]})}function Ht(n){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(n)}var Li=Uint8Array,Xs=Uint16Array,Lm=Int32Array,Pm=new Li([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mm=new Li([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jy=new Li([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c2=function(n,e){for(var t=new Xs(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var i=new Lm(t[30]),s=1;s<30;++s)for(var r=t[s];r<t[s+1];++r)i[r]=r-t[s]<<5|s;return{b:t,r:i}},d2=c2(Pm,2),iC=d2.b,Mp=d2.r;iC[28]=258,Mp[258]=28;var rC=c2(Mm,0),Ay=rC.r,Dp=new Xs(32768);for(var on=0;on<32768;++on){var Xr=(on&43690)>>1|(on&21845)<<1;Xr=(Xr&52428)>>2|(Xr&13107)<<2,Xr=(Xr&61680)>>4|(Xr&3855)<<4,Dp[on]=((Xr&65280)>>8|(Xr&255)<<8)>>1}var uc=(function(n,e,t){for(var s=n.length,i=0,r=new Xs(e);i<s;++i)n[i]&&++r[n[i]-1];var a=new Xs(e);for(i=1;i<e;++i)a[i]=a[i-1]+r[i-1]<<1;var o;if(t){o=new Xs(1<<e);var c=15-e;for(i=0;i<s;++i)if(n[i])for(var d=i<<4|n[i],u=e-n[i],f=a[n[i]-1]++<<u,m=f|(1<<u)-1;f<=m;++f)o[Dp[f]>>c]=d}else for(o=new Xs(s),i=0;i<s;++i)n[i]&&(o[i]=Dp[a[n[i]-1]++]>>15-n[i]);return o}),to=new Li(288);for(var on=0;on<144;++on)to[on]=8;for(var on=144;on<256;++on)to[on]=9;for(var on=256;on<280;++on)to[on]=7;for(var on=280;on<288;++on)to[on]=8;var Cu=new Li(32);for(var on=0;on<32;++on)Cu[on]=5;var aC=uc(to,9,0),oC=uc(Cu,5,0),u2=function(n){return(n+7)/8|0},lC=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Li(n.subarray(e,t))},xr=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Yl=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Mf=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var i=t.length,r=t.slice();if(!i)return{t:f2,l:0};if(i==1){var a=new Li(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(P,O){return P.f-O.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],d=0,u=1,f=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=i-1;)o=t[t[d].f<t[f].f?d++:f++],c=t[d!=u&&t[d].f<t[f].f?d++:f++],t[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var m=r[0].s,s=1;s<i;++s)r[s].s>m&&(m=r[s].s);var h=new Xs(m+1),y=Tp(t[u-1],h,0);if(y>e){var s=0,x=0,w=y-e,S=1<<w;for(r.sort(function(O,k){return h[k.s]-h[O.s]||O.f-k.f});s<i;++s){var j=r[s].s;if(h[j]>e)x+=S-(1<<y-h[j]),h[j]=e;else break}for(x>>=w;x>0;){var C=r[s].s;h[C]<e?x-=1<<e-h[C]++-1:++s}for(;s>=0&&x;--s){var L=r[s].s;h[L]==e&&(--h[L],++x)}y=e}return{t:new Li(h),l:y}},Tp=function(n,e,t){return n.s==-1?Math.max(Tp(n.l,e,t+1),Tp(n.r,e,t+1)):e[n.s]=t},Cy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Xs(++e),s=0,i=n[0],r=1,a=function(c){t[s++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++r;else{if(!i&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(i),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(i);r=1,i=n[o]}return{c:t.subarray(0,s),n:e}},Zl=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},h2=function(n,e,t){var s=t.length,i=u2(e+2);n[i]=s&255,n[i+1]=s>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var r=0;r<s;++r)n[i+r+4]=t[r];return(i+4+s)*8},Ly=function(n,e,t,s,i,r,a,o,c,d,u){xr(e,u++,t),++i[256];for(var f=Mf(i,15),m=f.t,h=f.l,y=Mf(r,15),x=y.t,w=y.l,S=Cy(m),j=S.c,C=S.n,L=Cy(x),P=L.c,O=L.n,k=new Xs(19),A=0;A<j.length;++A)++k[j[A]&31];for(var A=0;A<P.length;++A)++k[P[A]&31];for(var M=Mf(k,7),V=M.t,_=M.l,T=19;T>4&&!V[jy[T-1]];--T);var W=d+5<<3,D=Zl(i,to)+Zl(r,Cu)+a,Q=Zl(i,m)+Zl(r,x)+a+14+3*T+Zl(k,V)+2*k[16]+3*k[17]+7*k[18];if(c>=0&&W<=D&&W<=Q)return h2(e,u,n.subarray(c,c+d));var ne,ae,F,ce;if(xr(e,u,1+(Q<D)),u+=2,Q<D){ne=uc(m,h,0),ae=m,F=uc(x,w,0),ce=x;var Se=uc(V,_,0);xr(e,u,C-257),xr(e,u+5,O-1),xr(e,u+10,T-4),u+=14;for(var A=0;A<T;++A)xr(e,u+3*A,V[jy[A]]);u+=3*T;for(var ge=[j,P],R=0;R<2;++R)for(var U=ge[R],A=0;A<U.length;++A){var H=U[A]&31;xr(e,u,Se[H]),u+=V[H],H>15&&(xr(e,u,U[A]>>5&127),u+=U[A]>>12)}}else ne=aC,ae=to,F=oC,ce=Cu;for(var A=0;A<o;++A){var te=s[A];if(te>255){var H=te>>18&31;Yl(e,u,ne[H+257]),u+=ae[H+257],H>7&&(xr(e,u,te>>23&31),u+=Pm[H]);var re=te&31;Yl(e,u,F[re]),u+=ce[re],re>3&&(Yl(e,u,te>>5&8191),u+=Mm[re])}else Yl(e,u,ne[te]),u+=ae[te]}return Yl(e,u,ne[256]),u+ae[256]},cC=new Lm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),f2=new Li(0),dC=function(n,e,t,s,i,r){var a=r.z||n.length,o=new Li(s+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(s,o.length-i),d=r.l,u=(r.r||0)&7;if(e){u&&(c[0]=r.r>>3);for(var f=cC[e-1],m=f>>13,h=f&8191,y=(1<<t)-1,x=r.p||new Xs(32768),w=r.h||new Xs(y+1),S=Math.ceil(t/3),j=2*S,C=function(ye){return(n[ye]^n[ye+1]<<S^n[ye+2]<<j)&y},L=new Lm(25e3),P=new Xs(288),O=new Xs(32),k=0,A=0,M=r.i||0,V=0,_=r.w||0,T=0;M+2<a;++M){var W=C(M),D=M&32767,Q=w[W];if(x[D]=Q,w[W]=D,_<=M){var ne=a-M;if((k>7e3||V>24576)&&(ne>423||!d)){u=Ly(n,c,0,L,P,O,A,V,T,M-T,u),V=k=A=0,T=M;for(var ae=0;ae<286;++ae)P[ae]=0;for(var ae=0;ae<30;++ae)O[ae]=0}var F=2,ce=0,Se=h,ge=D-Q&32767;if(ne>2&&W==C(M-ge))for(var R=Math.min(m,ne)-1,U=Math.min(32767,M),H=Math.min(258,ne);ge<=U&&--Se&&D!=Q;){if(n[M+F]==n[M+F-ge]){for(var te=0;te<H&&n[M+te]==n[M+te-ge];++te);if(te>F){if(F=te,ce=ge,te>R)break;for(var re=Math.min(ge,te-2),le=0,ae=0;ae<re;++ae){var xe=M-ge+ae&32767,me=x[xe],we=xe-me&32767;we>le&&(le=we,Q=xe)}}}D=Q,Q=x[D],ge+=D-Q&32767}if(ce){L[V++]=268435456|Mp[F]<<18|Ay[ce];var Me=Mp[F]&31,Ee=Ay[ce]&31;A+=Pm[Me]+Mm[Ee],++P[257+Me],++O[Ee],_=M+F,++k}else L[V++]=n[M],++P[n[M]]}}for(M=Math.max(M,_);M<a;++M)L[V++]=n[M],++P[n[M]];u=Ly(n,c,d,L,P,O,A,V,T,M-T,u),d||(r.r=u&7|c[u/8|0]<<3,u-=7,r.h=w,r.p=x,r.i=M,r.w=_)}else{for(var M=r.w||0;M<a+d;M+=65535){var Oe=M+65535;Oe>=a&&(c[u/8|0]=d,Oe=a),u=h2(c,u+1,n.subarray(M,Oe))}r.i=a}return lC(o,0,s+u2(u)+i)},p2=function(){var n=1,e=0;return{p:function(t){for(var s=n,i=e,r=t.length|0,a=0;a!=r;){for(var o=Math.min(a+2655,r);a<o;++a)i+=s+=t[a];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}n=s,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},uC=function(n,e,t,s,i){if(!i&&(i={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new Li(r.length+n.length);a.set(r),a.set(n,r.length),n=a,i.w=r.length}return dC(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,i)},m2=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},hC=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=p2();i.p(e.dictionary),m2(n,2,i.d())}};function Ip(n,e){e||(e={});var t=p2();t.p(n);var s=uC(n,e,e.dictionary?6:2,4);return hC(s,e),m2(s,s.length-4,t.d()),s}var fC=typeof TextDecoder<"u"&&new TextDecoder,pC=0;try{fC.decode(f2,{stream:!0}),pC=1}catch{}function mC(n){if(Array.isArray(n))return n}function gC(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,i,r,a,o=[],c=!0,d=!1;try{if(r=(t=t.call(n)).next,e!==0)for(;!(c=(s=r.call(t)).done)&&(o.push(s.value),o.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw i}}return o}}function Py(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function yC(n,e){if(n){if(typeof n=="string")return Py(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Py(n,e):void 0}}function xC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function My(n,e){return mC(n)||gC(n,e)||yC(n,e)||xC()}function Dy(n,e="utf8"){return new TextDecoder(e).decode(n)}const vC=new TextEncoder;function bC(n){return vC.encode(n)}const wC=1024*8,SC=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Df={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Dm{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=wC,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,r=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof Dm)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),s?this.lastWrittenByte=r:this.lastWrittenByte=0,this.buffer=e,this.length=r,this.byteLength=r,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,r),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,i=new Uint8Array(s);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Df[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,r=this.buffer.slice(i,i+s);if(this.littleEndian===SC&&t!=="uint8"&&t!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+s));o.reverse();const c=new Df[t](o.buffer);return this.offset+=s,c.reverse(),c}const a=new Df[t](r);return this.offset+=s,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Dy(this.readBytes(e))}decodeText(e=1,t="utf8"){return Dy(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(bC(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ul(n){let e=n.length;for(;--e>=0;)n[e]=0}const kC=3,NC=258,g2=29,_C=256,jC=_C+1+g2,y2=30,AC=512,CC=new Array((jC+2)*2);ul(CC);const LC=new Array(y2*2);ul(LC);const PC=new Array(AC);ul(PC);const MC=new Array(NC-kC+1);ul(MC);const DC=new Array(g2);ul(DC);const TC=new Array(y2);ul(TC);const IC=(n,e,t,s)=>{let i=n&65535|0,r=n>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[s++]|0,r=r+i|0;while(--a);i%=65521,r%=65521}return i|r<<16|0};var Ep=IC;const EC=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},OC=new Uint32Array(EC()),RC=(n,e,t,s)=>{const i=OC,r=s+t;n^=-1;for(let a=s;a<r;a++)n=n>>>8^i[(n^e[a])&255];return n^-1};var Wi=RC,Op={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},x2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const FC=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var zC=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)FC(t,s)&&(n[s]=t[s])}}return n},BC=n=>{let e=0;for(let s=0,i=n.length;s<i;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,i=0,r=n.length;s<r;s++){let a=n[s];t.set(a,i),i+=a.length}return t},v2={assign:zC,flattenChunks:BC};let b2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b2=!1}const Mc=new Uint8Array(256);for(let n=0;n<256;n++)Mc[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Mc[254]=Mc[254]=1;var $C=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,i,r,a=n.length,o=0;for(i=0;i<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),r=0,i=0;r<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),i++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const WC=(n,e)=>{if(e<65534&&n.subarray&&b2)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var qC=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,i;const r=new Array(t*2);for(i=0,s=0;s<t;){let a=n[s++];if(a<128){r[i++]=a;continue}let o=Mc[a];if(o>4){r[i++]=65533,s+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&s<t;)a=a<<6|n[s++]&63,o--;if(o>1){r[i++]=65533;continue}a<65536?r[i++]=a:(a-=65536,r[i++]=55296|a>>10&1023,r[i++]=56320|a&1023)}return WC(r,i)},UC=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Mc[n[t]]>e?t:e},Rp={string2buf:$C,buf2string:qC,utf8border:UC};function VC(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var HC=VC;const Rd=16209,GC=16191;var YC=function(e,t){let s,i,r,a,o,c,d,u,f,m,h,y,x,w,S,j,C,L,P,O,k,A,M,V;const _=e.state;s=e.next_in,M=e.input,i=s+(e.avail_in-5),r=e.next_out,V=e.output,a=r-(t-e.avail_out),o=r+(e.avail_out-257),c=_.dmax,d=_.wsize,u=_.whave,f=_.wnext,m=_.window,h=_.hold,y=_.bits,x=_.lencode,w=_.distcode,S=(1<<_.lenbits)-1,j=(1<<_.distbits)-1;e:do{y<15&&(h+=M[s++]<<y,y+=8,h+=M[s++]<<y,y+=8),C=x[h&S];t:for(;;){if(L=C>>>24,h>>>=L,y-=L,L=C>>>16&255,L===0)V[r++]=C&65535;else if(L&16){P=C&65535,L&=15,L&&(y<L&&(h+=M[s++]<<y,y+=8),P+=h&(1<<L)-1,h>>>=L,y-=L),y<15&&(h+=M[s++]<<y,y+=8,h+=M[s++]<<y,y+=8),C=w[h&j];n:for(;;){if(L=C>>>24,h>>>=L,y-=L,L=C>>>16&255,L&16){if(O=C&65535,L&=15,y<L&&(h+=M[s++]<<y,y+=8,y<L&&(h+=M[s++]<<y,y+=8)),O+=h&(1<<L)-1,O>c){e.msg="invalid distance too far back",_.mode=Rd;break e}if(h>>>=L,y-=L,L=r-a,O>L){if(L=O-L,L>u&&_.sane){e.msg="invalid distance too far back",_.mode=Rd;break e}if(k=0,A=m,f===0){if(k+=d-L,L<P){P-=L;do V[r++]=m[k++];while(--L);k=r-O,A=V}}else if(f<L){if(k+=d+f-L,L-=f,L<P){P-=L;do V[r++]=m[k++];while(--L);if(k=0,f<P){L=f,P-=L;do V[r++]=m[k++];while(--L);k=r-O,A=V}}}else if(k+=f-L,L<P){P-=L;do V[r++]=m[k++];while(--L);k=r-O,A=V}for(;P>2;)V[r++]=A[k++],V[r++]=A[k++],V[r++]=A[k++],P-=3;P&&(V[r++]=A[k++],P>1&&(V[r++]=A[k++]))}else{k=r-O;do V[r++]=V[k++],V[r++]=V[k++],V[r++]=V[k++],P-=3;while(P>2);P&&(V[r++]=V[k++],P>1&&(V[r++]=V[k++]))}}else if((L&64)===0){C=w[(C&65535)+(h&(1<<L)-1)];continue n}else{e.msg="invalid distance code",_.mode=Rd;break e}break}}else if((L&64)===0){C=x[(C&65535)+(h&(1<<L)-1)];continue t}else if(L&32){_.mode=GC;break e}else{e.msg="invalid literal/length code",_.mode=Rd;break e}break}}while(s<i&&r<o);P=y>>3,s-=P,y-=P<<3,h&=(1<<y)-1,e.next_in=s,e.next_out=r,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=r<o?257+(o-r):257-(r-o),_.hold=h,_.bits=y};const Mo=15,Ty=852,Iy=592,Ey=0,Tf=1,Oy=2,ZC=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),KC=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),JC=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),QC=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),XC=(n,e,t,s,i,r,a,o)=>{const c=o.bits;let d=0,u=0,f=0,m=0,h=0,y=0,x=0,w=0,S=0,j=0,C,L,P,O,k,A=null,M;const V=new Uint16Array(Mo+1),_=new Uint16Array(Mo+1);let T=null,W,D,Q;for(d=0;d<=Mo;d++)V[d]=0;for(u=0;u<s;u++)V[e[t+u]]++;for(h=c,m=Mo;m>=1&&V[m]===0;m--);if(h>m&&(h=m),m===0)return i[r++]=1<<24|64<<16|0,i[r++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<m&&V[f]===0;f++);for(h<f&&(h=f),w=1,d=1;d<=Mo;d++)if(w<<=1,w-=V[d],w<0)return-1;if(w>0&&(n===Ey||m!==1))return-1;for(_[1]=0,d=1;d<Mo;d++)_[d+1]=_[d]+V[d];for(u=0;u<s;u++)e[t+u]!==0&&(a[_[e[t+u]]++]=u);if(n===Ey?(A=T=a,M=20):n===Tf?(A=ZC,T=KC,M=257):(A=JC,T=QC,M=0),j=0,u=0,d=f,k=r,y=h,x=0,P=-1,S=1<<h,O=S-1,n===Tf&&S>Ty||n===Oy&&S>Iy)return 1;for(;;){W=d-x,a[u]+1<M?(D=0,Q=a[u]):a[u]>=M?(D=T[a[u]-M],Q=A[a[u]-M]):(D=96,Q=0),C=1<<d-x,L=1<<y,f=L;do L-=C,i[k+(j>>x)+L]=W<<24|D<<16|Q|0;while(L!==0);for(C=1<<d-1;j&C;)C>>=1;if(C!==0?(j&=C-1,j+=C):j=0,u++,--V[d]===0){if(d===m)break;d=e[t+a[u]]}if(d>h&&(j&O)!==P){for(x===0&&(x=h),k+=f,y=d-x,w=1<<y;y+x<m&&(w-=V[y+x],!(w<=0));)y++,w<<=1;if(S+=1<<y,n===Tf&&S>Ty||n===Oy&&S>Iy)return 1;P=j&O,i[P]=h<<24|y<<16|k-r|0}}return j!==0&&(i[k+j]=d-x<<24|64<<16|0),o.bits=h,0};var hc=XC;const eL=0,w2=1,S2=2,{Z_FINISH:Ry,Z_BLOCK:tL,Z_TREES:Fd,Z_OK:no,Z_STREAM_END:nL,Z_NEED_DICT:sL,Z_STREAM_ERROR:ui,Z_DATA_ERROR:k2,Z_MEM_ERROR:N2,Z_BUF_ERROR:iL,Z_DEFLATED:Fy}=x2,fh=16180,zy=16181,By=16182,$y=16183,Wy=16184,qy=16185,Uy=16186,Vy=16187,Hy=16188,Gy=16189,Lu=16190,vr=16191,If=16192,Yy=16193,Ef=16194,Zy=16195,Ky=16196,Jy=16197,Qy=16198,zd=16199,Bd=16200,Xy=16201,e1=16202,t1=16203,n1=16204,s1=16205,Of=16206,i1=16207,r1=16208,cn=16209,_2=16210,j2=16211,rL=852,aL=592,oL=15,lL=oL,a1=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function cL(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const oo=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<fh||e.mode>j2?1:0},A2=n=>{if(oo(n))return ui;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=fh,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(rL),e.distcode=e.distdyn=new Int32Array(aL),e.sane=1,e.back=-1,no},C2=n=>{if(oo(n))return ui;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,A2(n)},L2=(n,e)=>{let t;if(oo(n))return ui;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ui:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,C2(n))},P2=(n,e)=>{if(!n)return ui;const t=new cL;n.state=t,t.strm=n,t.window=null,t.mode=fh;const s=L2(n,e);return s!==no&&(n.state=null),s},dL=n=>P2(n,lL);let o1=!0,Rf,Ff;const uL=n=>{if(o1){Rf=new Int32Array(512),Ff=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(hc(w2,n.lens,0,288,Rf,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;hc(S2,n.lens,0,32,Ff,0,n.work,{bits:5}),o1=!1}n.lencode=Rf,n.lenbits=9,n.distcode=Ff,n.distbits=5},M2=(n,e,t,s)=>{let i;const r=n.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),s>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(i=r.wsize-r.wnext,i>s&&(i=s),r.window.set(e.subarray(t-s,t-s+i),r.wnext),s-=i,s?(r.window.set(e.subarray(t-s,t),0),r.wnext=s,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0},hL=(n,e)=>{let t,s,i,r,a,o,c,d,u,f,m,h,y,x,w=0,S,j,C,L,P,O,k,A;const M=new Uint8Array(4);let V,_;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(oo(n)||!n.output||!n.input&&n.avail_in!==0)return ui;t=n.state,t.mode===vr&&(t.mode=If),a=n.next_out,i=n.output,c=n.avail_out,r=n.next_in,s=n.input,o=n.avail_in,d=t.hold,u=t.bits,f=o,m=c,A=no;e:for(;;)switch(t.mode){case fh:if(t.wrap===0){t.mode=If;break}for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,M[0]=d&255,M[1]=d>>>8&255,t.check=Wi(t.check,M,2,0),d=0,u=0,t.mode=zy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){n.msg="incorrect header check",t.mode=cn;break}if((d&15)!==Fy){n.msg="unknown compression method",t.mode=cn;break}if(d>>>=4,u-=4,k=(d&15)+8,t.wbits===0&&(t.wbits=k),k>15||k>t.wbits){n.msg="invalid window size",t.mode=cn;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=d&512?Gy:vr,d=0,u=0;break;case zy:for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.flags=d,(t.flags&255)!==Fy){n.msg="unknown compression method",t.mode=cn;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=cn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,t.check=Wi(t.check,M,2,0)),d=0,u=0,t.mode=By;case By:for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,M[2]=d>>>16&255,M[3]=d>>>24&255,t.check=Wi(t.check,M,4,0)),d=0,u=0,t.mode=$y;case $y:for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,t.check=Wi(t.check,M,2,0)),d=0,u=0,t.mode=Wy;case Wy:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,t.check=Wi(t.check,M,2,0)),d=0,u=0}else t.head&&(t.head.extra=null);t.mode=qy;case qy:if(t.flags&1024&&(h=t.length,h>o&&(h=o),h&&(t.head&&(k=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(r,r+h),k)),t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,s,h,r)),o-=h,r+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Uy;case Uy:if(t.flags&2048){if(o===0)break e;h=0;do k=s[r+h++],t.head&&k&&t.length<65536&&(t.head.name+=String.fromCharCode(k));while(k&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,s,h,r)),o-=h,r+=h,k)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Vy;case Vy:if(t.flags&4096){if(o===0)break e;h=0;do k=s[r+h++],t.head&&k&&t.length<65536&&(t.head.comment+=String.fromCharCode(k));while(k&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Wi(t.check,s,h,r)),o-=h,r+=h,k)break e}else t.head&&(t.head.comment=null);t.mode=Hy;case Hy:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&4&&d!==(t.check&65535)){n.msg="header crc mismatch",t.mode=cn;break}d=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=vr;break;case Gy:for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}n.adler=t.check=a1(d),d=0,u=0,t.mode=Lu;case Lu:if(t.havedict===0)return n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,sL;n.adler=t.check=1,t.mode=vr;case vr:if(e===tL||e===Fd)break e;case If:if(t.last){d>>>=u&7,u-=u&7,t.mode=Of;break}for(;u<3;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}switch(t.last=d&1,d>>>=1,u-=1,d&3){case 0:t.mode=Yy;break;case 1:if(uL(t),t.mode=zd,e===Fd){d>>>=2,u-=2;break e}break;case 2:t.mode=Ky;break;case 3:n.msg="invalid block type",t.mode=cn}d>>>=2,u-=2;break;case Yy:for(d>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){n.msg="invalid stored block lengths",t.mode=cn;break}if(t.length=d&65535,d=0,u=0,t.mode=Ef,e===Fd)break e;case Ef:t.mode=Zy;case Zy:if(h=t.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;i.set(s.subarray(r,r+h),a),o-=h,r+=h,c-=h,a+=h,t.length-=h;break}t.mode=vr;break;case Ky:for(;u<14;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.nlen=(d&31)+257,d>>>=5,u-=5,t.ndist=(d&31)+1,d>>>=5,u-=5,t.ncode=(d&15)+4,d>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=cn;break}t.have=0,t.mode=Jy;case Jy:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.lens[T[t.have++]]=d&7,d>>>=3,u-=3}for(;t.have<19;)t.lens[T[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},A=hc(eL,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,A){n.msg="invalid code lengths set",t.mode=cn;break}t.have=0,t.mode=Qy;case Qy:for(;t.have<t.nlen+t.ndist;){for(;w=t.lencode[d&(1<<t.lenbits)-1],S=w>>>24,j=w>>>16&255,C=w&65535,!(S<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(C<16)d>>>=S,u-=S,t.lens[t.have++]=C;else{if(C===16){for(_=S+2;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(d>>>=S,u-=S,t.have===0){n.msg="invalid bit length repeat",t.mode=cn;break}k=t.lens[t.have-1],h=3+(d&3),d>>>=2,u-=2}else if(C===17){for(_=S+3;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=S,u-=S,k=0,h=3+(d&7),d>>>=3,u-=3}else{for(_=S+7;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=S,u-=S,k=0,h=11+(d&127),d>>>=7,u-=7}if(t.have+h>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=cn;break}for(;h--;)t.lens[t.have++]=k}}if(t.mode===cn)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=cn;break}if(t.lenbits=9,V={bits:t.lenbits},A=hc(w2,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,A){n.msg="invalid literal/lengths set",t.mode=cn;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},A=hc(S2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,A){n.msg="invalid distances set",t.mode=cn;break}if(t.mode=zd,e===Fd)break e;case zd:t.mode=Bd;case Bd:if(o>=6&&c>=258){n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,YC(n,m),a=n.next_out,i=n.output,c=n.avail_out,r=n.next_in,s=n.input,o=n.avail_in,d=t.hold,u=t.bits,t.mode===vr&&(t.back=-1);break}for(t.back=0;w=t.lencode[d&(1<<t.lenbits)-1],S=w>>>24,j=w>>>16&255,C=w&65535,!(S<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(j&&(j&240)===0){for(L=S,P=j,O=C;w=t.lencode[O+((d&(1<<L+P)-1)>>L)],S=w>>>24,j=w>>>16&255,C=w&65535,!(L+S<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=L,u-=L,t.back+=L}if(d>>>=S,u-=S,t.back+=S,t.length=C,j===0){t.mode=s1;break}if(j&32){t.back=-1,t.mode=vr;break}if(j&64){n.msg="invalid literal/length code",t.mode=cn;break}t.extra=j&15,t.mode=Xy;case Xy:if(t.extra){for(_=t.extra;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=e1;case e1:for(;w=t.distcode[d&(1<<t.distbits)-1],S=w>>>24,j=w>>>16&255,C=w&65535,!(S<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if((j&240)===0){for(L=S,P=j,O=C;w=t.distcode[O+((d&(1<<L+P)-1)>>L)],S=w>>>24,j=w>>>16&255,C=w&65535,!(L+S<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=L,u-=L,t.back+=L}if(d>>>=S,u-=S,t.back+=S,j&64){n.msg="invalid distance code",t.mode=cn;break}t.offset=C,t.extra=j&15,t.mode=t1;case t1:if(t.extra){for(_=t.extra;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=cn;break}t.mode=n1;case n1:if(c===0)break e;if(h=m-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=cn;break}h>t.wnext?(h-=t.wnext,y=t.wsize-h):y=t.wnext-h,h>t.length&&(h=t.length),x=t.window}else x=i,y=a-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[a++]=x[y++];while(--h);t.length===0&&(t.mode=Bd);break;case s1:if(c===0)break e;i[a++]=t.length,c--,t.mode=Bd;break;case Of:if(t.wrap){for(;u<32;){if(o===0)break e;o--,d|=s[r++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Wi(t.check,i,m,a-m):Ep(t.check,i,m,a-m)),m=c,t.wrap&4&&(t.flags?d:a1(d))!==t.check){n.msg="incorrect data check",t.mode=cn;break}d=0,u=0}t.mode=i1;case i1:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&4&&d!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=cn;break}d=0,u=0}t.mode=r1;case r1:A=nL;break e;case cn:A=k2;break e;case _2:return N2;case j2:default:return ui}return n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<cn&&(t.mode<Of||e!==Ry))&&M2(n,n.output,n.next_out,m-n.avail_out),f-=n.avail_in,m-=n.avail_out,n.total_in+=f,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Wi(t.check,i,m,n.next_out-m):Ep(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===vr?128:0)+(t.mode===zd||t.mode===Ef?256:0),(f===0&&m===0||e===Ry)&&A===no&&(A=iL),A},fL=n=>{if(oo(n))return ui;let e=n.state;return e.window&&(e.window=null),n.state=null,no},pL=(n,e)=>{if(oo(n))return ui;const t=n.state;return(t.wrap&2)===0?ui:(t.head=e,e.done=!1,no)},mL=(n,e)=>{const t=e.length;let s,i,r;return oo(n)||(s=n.state,s.wrap!==0&&s.mode!==Lu)?ui:s.mode===Lu&&(i=1,i=Ep(i,e,t,0),i!==s.check)?k2:(r=M2(n,e,t,t),r?(s.mode=_2,N2):(s.havedict=1,no))};var gL=C2,yL=L2,xL=A2,vL=dL,bL=P2,wL=hL,SL=fL,kL=pL,NL=mL,_L="pako inflate (from Nodeca project)",_r={inflateReset:gL,inflateReset2:yL,inflateResetKeep:xL,inflateInit:vL,inflateInit2:bL,inflate:wL,inflateEnd:SL,inflateGetHeader:kL,inflateSetDictionary:NL,inflateInfo:_L};function jL(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var AL=jL;const D2=Object.prototype.toString,{Z_NO_FLUSH:CL,Z_FINISH:LL,Z_OK:Dc,Z_STREAM_END:zf,Z_NEED_DICT:Bf,Z_STREAM_ERROR:PL,Z_DATA_ERROR:l1,Z_MEM_ERROR:ML}=x2;function Bc(n){this.options=v2.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new HC,this.strm.avail_out=0;let t=_r.inflateInit2(this.strm,e.windowBits);if(t!==Dc)throw new Error(Op[t]);if(this.header=new AL,_r.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Rp.string2buf(e.dictionary):D2.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=_r.inflateSetDictionary(this.strm,e.dictionary),t!==Dc)))throw new Error(Op[t])}Bc.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,i=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?LL:CL,D2.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),r=_r.inflate(t,a),r===Bf&&i&&(r=_r.inflateSetDictionary(t,i),r===Dc?r=_r.inflate(t,a):r===l1&&(r=Bf));t.avail_in>0&&r===zf&&t.state.wrap>0&&n[t.next_in]!==0;)_r.inflateReset(t),r=_r.inflate(t,a);switch(r){case PL:case l1:case Bf:case ML:return this.onEnd(r),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||r===zf))if(this.options.to==="string"){let c=Rp.utf8border(t.output,t.next_out),d=t.next_out-c,u=Rp.buf2string(t.output,c);t.next_out=d,t.avail_out=s-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===Dc&&o===0)){if(r===zf)return r=_r.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Bc.prototype.onData=function(n){this.chunks.push(n)};Bc.prototype.onEnd=function(n){n===Dc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v2.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function DL(n,e){const t=new Bc(e);if(t.push(n),t.err)throw t.msg||Op[t.err];return t.result}var TL=Bc,IL=DL,EL={Inflate:TL,inflate:IL};const{Inflate:OL,inflate:RL}=EL;var c1=OL,FL=RL;const T2=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;T2[n]=e}const d1=4294967295;function zL(n,e,t){let s=n;for(let i=0;i<t;i++)s=T2[(s^e[i])&255]^s>>>8;return s}function BL(n,e){return(zL(d1,n,e)^d1)>>>0}function u1(n,e,t){const s=n.readUint32(),i=BL(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${i}`)}function I2(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function E2(n,e,t,s){let i=0;for(;i<s;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-s]&255}function O2(n,e,t,s){let i=0;if(t.length===0)for(;i<s;i++)e[i]=n[i];else for(;i<s;i++)e[i]=n[i]+t[i]&255}function R2(n,e,t,s,i){let r=0;if(t.length===0){for(;r<i;r++)e[r]=n[r];for(;r<s;r++)e[r]=n[r]+(e[r-i]>>1)&255}else{for(;r<i;r++)e[r]=n[r]+(t[r]>>1)&255;for(;r<s;r++)e[r]=n[r]+(e[r-i]+t[r]>>1)&255}}function F2(n,e,t,s,i){let r=0;if(t.length===0){for(;r<i;r++)e[r]=n[r];for(;r<s;r++)e[r]=n[r]+e[r-i]&255}else{for(;r<i;r++)e[r]=n[r]+t[r]&255;for(;r<s;r++)e[r]=n[r]+$L(e[r-i],t[r],t[r-i])&255}}function $L(n,e,t){const s=n+e-t,i=Math.abs(s-n),r=Math.abs(s-e),a=Math.abs(s-t);return i<=r&&i<=a?n:r<=a?e:t}function WL(n,e,t,s,i,r){switch(n){case 0:I2(e,t,i);break;case 1:E2(e,t,i,r);break;case 2:O2(e,t,s,i);break;case 3:R2(e,t,s,i,r);break;case 4:F2(e,t,s,i,r);break;default:throw new Error(`Unsupported filter: ${n}`)}}const qL=new Uint16Array([255]),UL=new Uint8Array(qL.buffer),VL=UL[0]===255;function HL(n){const{data:e,width:t,height:s,channels:i,depth:r}=n,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(r/8)*i,c=new Uint8Array(s*t*o);let d=0;for(let u=0;u<7;u++){const f=a[u],m=Math.ceil((t-f.x)/f.xStep),h=Math.ceil((s-f.y)/f.yStep);if(m<=0||h<=0)continue;const y=m*o,x=new Uint8Array(y);for(let w=0;w<h;w++){const S=e[d++],j=e.subarray(d,d+y);d+=y;const C=new Uint8Array(y);WL(S,j,C,x,y,o),x.set(C);for(let L=0;L<m;L++){const P=f.x+L*f.xStep,O=f.y+w*f.yStep;if(!(P>=t||O>=s))for(let k=0;k<o;k++)c[(O*t+P)*o+k]=C[L*o+k]}}}if(r===16){const u=new Uint16Array(c.buffer);if(VL)for(let f=0;f<u.length;f++)u[f]=GL(u[f]);return u}else return c}function GL(n){return(n&255)<<8|n>>8&255}const YL=new Uint16Array([255]),ZL=new Uint8Array(YL.buffer),KL=ZL[0]===255,JL=new Uint8Array(0);function h1(n){const{data:e,width:t,height:s,channels:i,depth:r}=n,a=Math.ceil(r/8)*i,o=Math.ceil(r/8*i*t),c=new Uint8Array(s*o);let d=JL,u=0,f,m;for(let h=0;h<s;h++){switch(f=e.subarray(u+1,u+1+o),m=c.subarray(h*o,(h+1)*o),e[u]){case 0:I2(f,m,o);break;case 1:E2(f,m,o,a);break;case 2:O2(f,m,d,o);break;case 3:R2(f,m,d,o,a);break;case 4:F2(f,m,d,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}d=m,u+=o+1}if(r===16){const h=new Uint16Array(c.buffer);if(KL)for(let y=0;y<h.length;y++)h[y]=QL(h[y]);return h}else return c}function QL(n){return(n&255)<<8|n>>8&255}const iu=Uint8Array.of(137,80,78,71,13,10,26,10);function f1(n){if(!XL(n.readBytes(iu.length)))throw new Error("wrong PNG signature")}function XL(n){if(n.length<iu.length)return!1;for(let e=0;e<iu.length;e++)if(n[e]!==iu[e])return!1;return!0}const eP="tEXt",tP=0,z2=new TextDecoder("latin1");function nP(n){if(iP(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const sP=/^[\u0000-\u00FF]*$/;function iP(n){if(!sP.test(n))throw new Error("invalid latin1 text")}function rP(n,e,t){const s=B2(e);n[s]=aP(e,t-s.length-1)}function B2(n){for(n.mark();n.readByte()!==tP;);const e=n.offset;n.reset();const t=z2.decode(n.readBytes(e-n.offset-1));return n.skip(1),nP(t),t}function aP(n,e){return z2.decode(n.readBytes(e))}const Ks={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},$f={UNKNOWN:-1,DEFLATE:0},p1={UNKNOWN:-1,ADAPTIVE:0},Wf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},$d={NONE:0,BACKGROUND:1,PREVIOUS:2},qf={SOURCE:0,OVER:1};class oP extends Dm{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new c1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=$f.UNKNOWN,this._filterMethod=p1.UNKNOWN,this._interlaceMethod=Wf.UNKNOWN,this._colorType=Ks.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(f1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(f1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case eP:rP(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?u1(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?u1(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=lP(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case Ks.GREYSCALE:s=1;break;case Ks.TRUECOLOUR:s=3;break;case Ks.INDEXED_COLOUR:s=1;break;case Ks.GREYSCALE_ALPHA:s=2;break;case Ks.TRUECOLOUR_ALPHA:s=4;break;case Ks.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==$f.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<t;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ks.GREYSCALE:case Ks.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ks.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ks.UNKNOWN:case Ks.GREYSCALE_ALPHA:case Ks.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=B2(this),s=this.readUint8();if(s!==$f.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:FL(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=h1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(s,i,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case $d.NONE:break;case $d.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let r=0;r<this._png.width;r++){const a=(i*e.width+r)*this._png.channels;for(let o=0;o<this._png.channels;o++)s.data[a+o]=0}break;case $d.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,i=(r,a)=>{const o=((r+t.yOffset)*this._png.width+t.xOffset+a)*this._png.channels,c=(r*t.width+a)*this._png.channels;return{index:o,frameIndex:c}};switch(t.blendOp){case qf.SOURCE:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:o,frameIndex:c}=i(r,a);for(let d=0;d<this._png.channels;d++)e.data[o+d]=t.data[c+d]}break;case qf.OVER:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:o,frameIndex:c}=i(r,a);for(let d=0;d<this._png.channels;d++){const u=t.data[c+this._png.channels-1]/s,f=d%(this._png.channels-1)===0?1:t.data[c+d],m=Math.floor(u*f+(1-u)*e.data[o+d]);e.data[o+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==p1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Wf.NO_INTERLACE)this._png.data=h1({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Wf.ADAM7)this._png.data=HL({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:$d.NONE,blendOp:qf.SOURCE,data:e}),this._inflator=new c1,this._writingDataChunks=!1}}function lP(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var m1;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(m1||(m1={}));function cP(n,e){return new oP(n,e).decode()}var ft=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Uf(){ft.console&&typeof ft.console.log=="function"&&ft.console.log.apply(ft.console,arguments)}var Xt={log:Uf,warn:function(n){ft.console&&(typeof ft.console.warn=="function"?ft.console.warn.apply(ft.console,arguments):Uf.call(null,arguments))},error:function(n){ft.console&&(typeof ft.console.error=="function"?ft.console.error.apply(ft.console,arguments):Uf(n))}};function Vf(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Ha(s.response,e,t)},s.onerror=function(){Xt.error("could not download file")},s.send()}function g1(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Wd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ha=ft.saveAs||((typeof window>"u"?"undefined":Ht(window))!=="object"||window!==ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=ft.URL||ft.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?g1(i.href)?Vf(n,e,t):Wd(i,i.target="_blank"):Wd(i)):(i.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){Wd(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(g1(n))Vf(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){Wd(s)})}else navigator.msSaveOrOpenBlob((function(i,r){return r===void 0?r={autoBom:!1}:Ht(r)!=="object"&&(Xt.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Vf(n,e,t);var i=n.type==="application/octet-stream",r=/constructor/i.test(ft.HTMLElement)||ft.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&r)&&(typeof FileReader>"u"?"undefined":Ht(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},o.readAsDataURL(n)}else{var c=ft.URL||ft.webkitURL,d=c.createObjectURL(n);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $2(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<t.length;s++){var i=t[s].re,r=t[s].process,a=i.exec(n);a&&(e=r(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var ru=ft.atob.bind(ft),y1=ft.btoa.bind(ft);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Hf(n,e){var t=n[0],s=n[1],i=n[2],r=n[3];t=us(t,s,i,r,e[0],7,-680876936),r=us(r,t,s,i,e[1],12,-389564586),i=us(i,r,t,s,e[2],17,606105819),s=us(s,i,r,t,e[3],22,-1044525330),t=us(t,s,i,r,e[4],7,-176418897),r=us(r,t,s,i,e[5],12,1200080426),i=us(i,r,t,s,e[6],17,-1473231341),s=us(s,i,r,t,e[7],22,-45705983),t=us(t,s,i,r,e[8],7,1770035416),r=us(r,t,s,i,e[9],12,-1958414417),i=us(i,r,t,s,e[10],17,-42063),s=us(s,i,r,t,e[11],22,-1990404162),t=us(t,s,i,r,e[12],7,1804603682),r=us(r,t,s,i,e[13],12,-40341101),i=us(i,r,t,s,e[14],17,-1502002290),t=hs(t,s=us(s,i,r,t,e[15],22,1236535329),i,r,e[1],5,-165796510),r=hs(r,t,s,i,e[6],9,-1069501632),i=hs(i,r,t,s,e[11],14,643717713),s=hs(s,i,r,t,e[0],20,-373897302),t=hs(t,s,i,r,e[5],5,-701558691),r=hs(r,t,s,i,e[10],9,38016083),i=hs(i,r,t,s,e[15],14,-660478335),s=hs(s,i,r,t,e[4],20,-405537848),t=hs(t,s,i,r,e[9],5,568446438),r=hs(r,t,s,i,e[14],9,-1019803690),i=hs(i,r,t,s,e[3],14,-187363961),s=hs(s,i,r,t,e[8],20,1163531501),t=hs(t,s,i,r,e[13],5,-1444681467),r=hs(r,t,s,i,e[2],9,-51403784),i=hs(i,r,t,s,e[7],14,1735328473),t=fs(t,s=hs(s,i,r,t,e[12],20,-1926607734),i,r,e[5],4,-378558),r=fs(r,t,s,i,e[8],11,-2022574463),i=fs(i,r,t,s,e[11],16,1839030562),s=fs(s,i,r,t,e[14],23,-35309556),t=fs(t,s,i,r,e[1],4,-1530992060),r=fs(r,t,s,i,e[4],11,1272893353),i=fs(i,r,t,s,e[7],16,-155497632),s=fs(s,i,r,t,e[10],23,-1094730640),t=fs(t,s,i,r,e[13],4,681279174),r=fs(r,t,s,i,e[0],11,-358537222),i=fs(i,r,t,s,e[3],16,-722521979),s=fs(s,i,r,t,e[6],23,76029189),t=fs(t,s,i,r,e[9],4,-640364487),r=fs(r,t,s,i,e[12],11,-421815835),i=fs(i,r,t,s,e[15],16,530742520),t=ps(t,s=fs(s,i,r,t,e[2],23,-995338651),i,r,e[0],6,-198630844),r=ps(r,t,s,i,e[7],10,1126891415),i=ps(i,r,t,s,e[14],15,-1416354905),s=ps(s,i,r,t,e[5],21,-57434055),t=ps(t,s,i,r,e[12],6,1700485571),r=ps(r,t,s,i,e[3],10,-1894986606),i=ps(i,r,t,s,e[10],15,-1051523),s=ps(s,i,r,t,e[1],21,-2054922799),t=ps(t,s,i,r,e[8],6,1873313359),r=ps(r,t,s,i,e[15],10,-30611744),i=ps(i,r,t,s,e[6],15,-1560198380),s=ps(s,i,r,t,e[13],21,1309151649),t=ps(t,s,i,r,e[4],6,-145523070),r=ps(r,t,s,i,e[11],10,-1120210379),i=ps(i,r,t,s,e[2],15,718787259),s=ps(s,i,r,t,e[9],21,-343485551),n[0]=oa(t,n[0]),n[1]=oa(s,n[1]),n[2]=oa(i,n[2]),n[3]=oa(r,n[3])}function ph(n,e,t,s,i,r){return e=oa(oa(e,n),oa(s,r)),oa(e<<i|e>>>32-i,t)}function us(n,e,t,s,i,r,a){return ph(e&t|~e&s,n,e,i,r,a)}function hs(n,e,t,s,i,r,a){return ph(e&s|t&~s,n,e,i,r,a)}function fs(n,e,t,s,i,r,a){return ph(e^t^s,n,e,i,r,a)}function ps(n,e,t,s,i,r,a){return ph(t^(e|~s),n,e,i,r,a)}function W2(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Hf(s,dP(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Hf(s,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Hf(s,i),s}function dP(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var x1="0123456789abcdef".split("");function uP(n){for(var e="",t=0;t<4;t++)e+=x1[n>>8*t+4&15]+x1[n>>8*t&15];return e}function hP(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Fp(n){return W2(n).map(hP).join("")}var fP=(function(n){for(var e=0;e<n.length;e++)n[e]=uP(n[e]);return n.join("")})(W2("hello"))!="5d41402abc4b2a76b9719d911017c592";function oa(n,e){if(fP){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function zp(n,e){var t,s,i,r;if(n!==t){for(var a=(i=n,r=1+(256/n.length|0),new Array(r+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+a.charCodeAt(c))%256,o[c]=o[d],o[d]=u}t=n,s=o}else o=s;var f=e.length,m=0,h=0,y="";for(c=0;c<f;c++)h=(h+(u=o[m=(m+1)%256]))%256,o[m]=o[h],o[h]=u,a=o[(o[m]+o[h])%256],y+=String.fromCharCode(e.charCodeAt(c)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var v1={print:4,modify:8,copy:16,"annot-forms":32};function zo(n,e,t,s){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(v1.perm!==void 0)throw new Error("Invalid permission: "+o);i+=v1[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var r=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,a),this.P=-(1+(255^i)),this.encryptionKey=Fp(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=zp(this.encryptionKey,this.padding)}function Bo(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var i=n.charCodeAt(s);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[s]}return e}function b1(n){if(Ht(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,i){if(i=i||!1,typeof t!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[s,!!i],r},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var r in e[t]){var a=e[t][r];try{a[0].apply(n,s)}catch(o){ft.console&&Xt.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Pu(n){if(!(this instanceof Pu))return new Pu(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function q2(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ga(n,e,t,s,i){if(!(this instanceof Ga))return new Ga(n,e,t,s,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,q2.call(this,s,i)}function Wo(n,e,t,s,i){if(!(this instanceof Wo))return new Wo(n,e,t,s,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,q2.call(this,s,i)}function et(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],r=arguments[3],a=[],o=1,c=16,d="S",u=null;Ht(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,i=n.format||i,r=n.compress||n.compressPdf||r,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),d=n.defaultPathOperation||"S"),a=n.filters||(r===!0?["FlateEncode"]:a),s=s||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,m={},h={internal:{},__private__:{}};h.__private__.PubSub=b1;var y="1.3",x=h.__private__.getPdfVersion=function(){return y};h.__private__.setPdfVersion=function(v){y=v};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return w};var S=h.__private__.getPageFormat=function(v){return w[v]};i=i||"a4";var j="compat",C="advanced",L=j;function P(){this.saveGraphicsState(),J(new ut(lt,0,0,-lt,0,Ws()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),d="n",L=C}function O(){this.restoreGraphicsState(),d="S",L=j}var k=h.__private__.combineFontStyleAndFontWeight=function(v,E){if(v=="bold"&&E=="normal"||v=="bold"&&E==400||v=="normal"&&E=="italic"||v=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(v=E==400||E==="normal"?v==="italic"?"italic":"normal":E!=700&&E!=="bold"||v!=="normal"?(E==700?"bold":E)+""+v:"bold"),v};h.advancedAPI=function(v){var E=L===j;return E&&P.call(this),typeof v!="function"||(v(this),E&&O.call(this)),this},h.compatAPI=function(v){var E=L===C;return E&&O.call(this),typeof v!="function"||(v(this),E&&P.call(this)),this},h.isAdvancedAPI=function(){return L===C};var A,M=function(v){if(L!==C)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=h.roundToPrecision=h.__private__.roundToPrecision=function(v,E){var Z=e||E;if(isNaN(v)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Z).replace(/0+$/,"")};A=h.hpf=h.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return V(v,16)};var _=h.f2=h.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return V(v,2)},T=h.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return V(v,3)},W=h.scale=h.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return L===j?v*lt:L===C?v:void 0},D=function(v){return W((function(E){return L===j?Ws()-E:L===C?E:void 0})(v))};h.__private__.setPrecision=h.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var Q,ne="00000000000000000000000000000000",ae=h.__private__.getFileId=function(){return ne},F=h.__private__.setFileId=function(v){return ne=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(kn=new zo(u.userPermissions,u.userPassword,u.ownerPassword,ne)),ne};h.setFileId=function(v){return F(v),this},h.getFileId=function(){return ae()};var ce=h.__private__.convertDateToPDFDate=function(v){var E=v.getTimezoneOffset(),Z=E<0?"+":"-",se=Math.floor(Math.abs(E/60)),de=Math.abs(E%60),_e=[Z,H(se),"'",H(de),"'"].join("");return["D:",v.getFullYear(),H(v.getMonth()+1),H(v.getDate()),H(v.getHours()),H(v.getMinutes()),H(v.getSeconds()),_e].join("")},Se=h.__private__.convertPDFDateToDate=function(v){var E=parseInt(v.substr(2,4),10),Z=parseInt(v.substr(6,2),10)-1,se=parseInt(v.substr(8,2),10),de=parseInt(v.substr(10,2),10),_e=parseInt(v.substr(12,2),10),Pe=parseInt(v.substr(14,2),10);return new Date(E,Z,se,de,_e,Pe,0)},ge=h.__private__.setCreationDate=function(v){var E;if(v===void 0&&(v=new Date),v instanceof Date)E=ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=v}return Q=E},R=h.__private__.getCreationDate=function(v){var E=Q;return v==="jsDate"&&(E=Se(Q)),E};h.setCreationDate=function(v){return ge(v),this},h.getCreationDate=function(v){return R(v)};var U,H=h.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=h.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},re=0,le=[],xe=[],me=0,we=[],Me=[],Ee=!1,Oe=xe;h.__private__.setCustomOutputDestination=function(v){Ee=!0,Oe=v};var ye=function(v){Ee||(Oe=v)};h.__private__.resetCustomOutputDestination=function(){Ee=!1,Oe=xe};var J=h.__private__.out=function(v){return v=v.toString(),me+=v.length+1,Oe.push(v),Oe},Pt=h.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},wt=h.__private__.getArrayBuffer=function(v){for(var E=v.length,Z=new ArrayBuffer(E),se=new Uint8Array(Z);E--;)se[E]=v.charCodeAt(E);return Z},at=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return at};var Ie=n.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(v){return Ie=L===C?v/lt:v,this};var K,ee=h.__private__.getFontSize=h.getFontSize=function(){return L===j?Ie:Ie*lt},he=n.R2L||!1;h.__private__.setR2L=h.setR2L=function(v){return he=v,this},h.__private__.getR2L=h.getR2L=function(){return he};var ke,Ce=h.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))K=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');K=v}else K=parseInt(v,10)};h.__private__.getZoomMode=function(){return K};var ve,De=h.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');ke=v};h.__private__.getPageMode=function(){return ke};var nt=h.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ve=v};h.__private__.getLayoutMode=function(){return ve},h.__private__.setDisplayMode=h.setDisplayMode=function(v,E,Z){return Ce(v),nt(E),De(Z),this};var Be={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(v){if(Object.keys(Be).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Be[v]},h.__private__.getDocumentProperties=function(){return Be},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(v){for(var E in Be)Be.hasOwnProperty(E)&&v[E]&&(Be[E]=v[E]);return this},h.__private__.setDocumentProperty=function(v,E){if(Object.keys(Be).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Be[v]=E};var We,lt,Ve,Yt,It,Je={},xt={},$t=[],ct={},Mt={},Nt={},Sn={},$n=null,Kt=0,vt=[],Wt=new b1(h),ba=n.hotfixes||[],cs={},tr={},Di=[],ut=function v(E,Z,se,de,_e,Pe){if(!(this instanceof v))return new v(E,Z,se,de,_e,Pe);isNaN(E)&&(E=1),isNaN(Z)&&(Z=0),isNaN(se)&&(se=0),isNaN(de)&&(de=1),isNaN(_e)&&(_e=0),isNaN(Pe)&&(Pe=0),this._matrix=[E,Z,se,de,_e,Pe]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(v)},ut.prototype.multiply=function(v){var E=v.sx*this.sx+v.shy*this.shx,Z=v.sx*this.shy+v.shy*this.sy,se=v.shx*this.sx+v.sy*this.shx,de=v.shx*this.shy+v.sy*this.sy,_e=v.tx*this.sx+v.ty*this.shx+this.tx,Pe=v.tx*this.shy+v.ty*this.sy+this.ty;return new ut(E,Z,se,de,_e,Pe)},ut.prototype.decompose=function(){var v=this.sx,E=this.shy,Z=this.shx,se=this.sy,de=this.tx,_e=this.ty,Pe=Math.sqrt(v*v+E*E),Ke=(v/=Pe)*Z+(E/=Pe)*se;Z-=v*Ke,se-=E*Ke;var tt=Math.sqrt(Z*Z+se*se);return Ke/=tt,v*(se/=tt)<E*(Z/=tt)&&(v=-v,E=-E,Ke=-Ke,Pe=-Pe),{scale:new ut(Pe,0,0,tt,0,0),translate:new ut(1,0,0,1,de,_e),rotate:new ut(v,E,-E,v,0,0),skew:new ut(1,0,Ke,1,0,0)}},ut.prototype.toString=function(v){return this.join(" ")},ut.prototype.inversed=function(){var v=this.sx,E=this.shy,Z=this.shx,se=this.sy,de=this.tx,_e=this.ty,Pe=1/(v*se-E*Z),Ke=se*Pe,tt=-E*Pe,ht=-Z*Pe,jt=v*Pe;return new ut(Ke,tt,ht,jt,-Ke*de-ht*_e,-tt*de-jt*_e)},ut.prototype.applyToPoint=function(v){var E=v.x*this.sx+v.y*this.shx+this.tx,Z=v.x*this.shy+v.y*this.sy+this.ty;return new Pa(E,Z)},ut.prototype.applyToRectangle=function(v){var E=this.applyToPoint(v),Z=this.applyToPoint(new Pa(v.x+v.w,v.y+v.h));return new kl(E.x,E.y,Z.x-E.x,Z.y-E.y)},ut.prototype.clone=function(){var v=this.sx,E=this.shy,Z=this.shx,se=this.sy,de=this.tx,_e=this.ty;return new ut(v,E,Z,se,de,_e)},h.Matrix=ut;var nr=h.matrixMult=function(v,E){return E.multiply(v)},sr=new ut(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=sr;var ti=function(v,E){if(!Mt[v]){var Z=(E instanceof Ga?"Sh":"P")+(Object.keys(ct).length+1).toString(10);E.id=Z,Mt[v]=Z,ct[Z]=E,Wt.publish("addPattern",E)}};h.ShadingPattern=Ga,h.TilingPattern=Wo,h.addShadingPattern=function(v,E){return M("addShadingPattern()"),ti(v,E),this},h.beginTilingPattern=function(v){M("beginTilingPattern()"),Nl(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},h.endTilingPattern=function(v,E){M("endTilingPattern()"),E.stream=Me[U].join(`
`),ti(v,E),Wt.publish("endTilingPattern",E),Di.pop().restore()};var ni,yn=h.__private__.newObject=function(){var v=Qn();return ss(v,!0),v},Qn=h.__private__.newObjectDeferred=function(){return re++,le[re]=function(){return me},re},ss=function(v,E){return E=typeof E=="boolean"&&E,le[v]=me,E&&J(v+" 0 obj"),v},wa=h.__private__.newAdditionalObject=function(){var v={objId:Qn(),content:""};return we.push(v),v},Fr=Qn(),fi=Qn(),Ti=h.__private__.decodeColorString=function(v){var E=v.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var Z=parseFloat(E[0]);E=[Z,Z,Z,"r"]}for(var se="#",de=0;de<3;de++)se+=("0"+Math.floor(255*parseFloat(E[de])).toString(16)).slice(-2);return se},pi=h.__private__.encodeColorString=function(v){var E;typeof v=="string"&&(v={ch1:v});var Z=v.ch1,se=v.ch2,de=v.ch3,_e=v.ch4,Pe=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var Ke=new $2(Z);if(Ke.ok)Z=Ke.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var tt=parseInt(Z.substr(1),16);Z=tt>>16&255,se=tt>>8&255,de=255&tt}if(se===void 0||_e===void 0&&Z===se&&se===de)E=typeof Z=="string"?Z+" "+Pe[0]:v.precision===2?_(Z/255)+" "+Pe[0]:T(Z/255)+" "+Pe[0];else if(_e===void 0||Ht(_e)==="object"){if(_e&&!isNaN(_e.a)&&_e.a===0)return["1.","1.","1.",Pe[1]].join(" ");E=typeof Z=="string"?[Z,se,de,Pe[1]].join(" "):v.precision===2?[_(Z/255),_(se/255),_(de/255),Pe[1]].join(" "):[T(Z/255),T(se/255),T(de/255),Pe[1]].join(" ")}else E=typeof Z=="string"?[Z,se,de,_e,Pe[2]].join(" "):v.precision===2?[_(Z),_(se),_(de),_(_e),Pe[2]].join(" "):[T(Z),T(se),T(de),T(_e),Pe[2]].join(" ");return E},mi=h.__private__.getFilters=function(){return a},si=h.__private__.putStream=function(v){var E=(v=v||{}).data||"",Z=v.filters||mi(),se=v.alreadyAppliedFilters||[],de=v.addLength1||!1,_e=E.length,Pe=v.objectId,Ke=function(Wn){return Wn};if(u!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Ke=kn.encryptor(Pe,0));var tt={};Z===!0&&(Z=["FlateEncode"]);var ht=v.additionalKeyValues||[],jt=(tt=et.API.processDataByFilters!==void 0?et.API.processDataByFilters(E,Z):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(tt.data.length!==0&&(ht.push({key:"Length",value:tt.data.length}),de===!0&&ht.push({key:"Length1",value:_e})),jt.length!=0)if(jt.split("/").length-1==1)ht.push({key:"Filter",value:jt});else{ht.push({key:"Filter",value:"["+jt+"]"});for(var Bt=0;Bt<ht.length;Bt+=1)if(ht[Bt].key==="DecodeParms"){for(var mn=[],En=0;En<tt.reverseChain.split("/").length-1;En+=1)mn.push("null");mn.push(ht[Bt].value),ht[Bt].value="["+mn.join(" ")+"]"}}J("<<");for(var Zt=0;Zt<ht.length;Zt++)J("/"+ht[Zt].key+" "+ht[Zt].value);J(">>"),tt.data.length!==0&&(J("stream"),J(Ke(tt.data)),J("endstream"))},Sa=h.__private__.putPage=function(v){var E=v.number,Z=v.data,se=v.objId,de=v.contentsObjId;ss(se,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(A(v.mediaBox.bottomLeftX))+" "+parseFloat(A(v.mediaBox.bottomLeftY))+" "+A(v.mediaBox.topRightX)+" "+A(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+A(v.cropBox.bottomLeftX)+" "+A(v.cropBox.bottomLeftY)+" "+A(v.cropBox.topRightX)+" "+A(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+A(v.bleedBox.bottomLeftX)+" "+A(v.bleedBox.bottomLeftY)+" "+A(v.bleedBox.topRightX)+" "+A(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+A(v.trimBox.bottomLeftX)+" "+A(v.trimBox.bottomLeftY)+" "+A(v.trimBox.topRightX)+" "+A(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+A(v.artBox.bottomLeftX)+" "+A(v.artBox.bottomLeftY)+" "+A(v.artBox.topRightX)+" "+A(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),Wt.publish("putPage",{objId:se,pageContext:vt[E],pageNumber:E,page:Z}),J("/Contents "+de+" 0 R"),J(">>"),J("endobj");var _e=Z.join(`
`);return L===C&&(_e+=`
Q`),ss(de,!0),si({data:_e,filters:mi(),objectId:de}),J("endobj"),se},Ii=h.__private__.putPages=function(){var v,E,Z=[];for(v=1;v<=Kt;v++)vt[v].objId=Qn(),vt[v].contentsObjId=Qn();for(v=1;v<=Kt;v++)Z.push(Sa({number:v,data:Me[v],objId:vt[v].objId,contentsObjId:vt[v].contentsObjId,mediaBox:vt[v].mediaBox,cropBox:vt[v].cropBox,bleedBox:vt[v].bleedBox,trimBox:vt[v].trimBox,artBox:vt[v].artBox,userUnit:vt[v].userUnit,rootDictionaryObjId:Fr,resourceDictionaryObjId:fi}));ss(Fr,!0),J("<</Type /Pages");var se="/Kids [";for(E=0;E<Kt;E++)se+=Z[E]+" 0 R ";J(se+"]"),J("/Count "+Kt),J(">>"),J("endobj"),Wt.publish("postPutPages")},ka=function(v){Wt.publish("putFont",{font:v,out:J,newObject:yn,putStream:si}),v.isAlreadyPutted!==!0&&(v.objectNumber=yn(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Bo(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},co=function(v){v.objectNumber=yn();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[A(v.x),A(v.y),A(v.x+v.width),A(v.y+v.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Z=v.pages[1].join(`
`);si({data:Z,additionalKeyValues:E,objectId:v.objectNumber}),J("endobj")},uo=function(v,E){E||(E=21);var Z=yn(),se=(function(Pe,Ke){var tt,ht=[],jt=1/(Ke-1);for(tt=0;tt<1;tt+=jt)ht.push(tt);if(ht.push(1),Pe[0].offset!=0){var Bt={offset:0,color:Pe[0].color};Pe.unshift(Bt)}if(Pe[Pe.length-1].offset!=1){var mn={offset:1,color:Pe[Pe.length-1].color};Pe.push(mn)}for(var En="",Zt=0,Wn=0;Wn<ht.length;Wn++){for(tt=ht[Wn];tt>Pe[Zt+1].offset;)Zt++;var On=Pe[Zt].offset,is=(tt-On)/(Pe[Zt+1].offset-On),or=Pe[Zt].color,$r=Pe[Zt+1].color;En+=te(Math.round((1-is)*or[0]+is*$r[0]).toString(16))+te(Math.round((1-is)*or[1]+is*$r[1]).toString(16))+te(Math.round((1-is)*or[2]+is*$r[2]).toString(16))}return En.trim()})(v.colors,E),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+E+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),si({data:se,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),J("endobj"),v.objectNumber=yn(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var _e="/Coords ["+A(parseFloat(v.coords[0]))+" "+A(parseFloat(v.coords[1]))+" ";v.type===2?_e+=A(parseFloat(v.coords[2]))+" "+A(parseFloat(v.coords[3])):_e+=A(parseFloat(v.coords[2]))+" "+A(parseFloat(v.coords[3]))+" "+A(parseFloat(v.coords[4]))+" "+A(parseFloat(v.coords[5])),J(_e+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+Z+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ho=function(v,E){var Z=Qn(),se=yn();E.push({resourcesOid:Z,objectOid:se}),v.objectNumber=se;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+v.boundingBox.map(A).join(" ")+"]"}),de.push({key:"XStep",value:A(v.xStep)}),de.push({key:"YStep",value:A(v.yStep)}),de.push({key:"Resources",value:Z+" 0 R"}),v.matrix&&de.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),si({data:v.stream,additionalKeyValues:de,objectId:v.objectNumber}),J("endobj")},Ah=function(v){for(var E in v.objectNumber=yn(),J("<<"),v)switch(E){case"opacity":J("/ca "+_(v[E]));break;case"stroke-opacity":J("/CA "+_(v[E]))}J(">>"),J("endobj")},fl=function(v){ss(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var E in J("/Font <<"),Je)Je.hasOwnProperty(E)&&(f===!1||f===!0&&m.hasOwnProperty(E))&&J("/"+E+" "+Je[E].objectNumber+" 0 R");J(">>")})(),(function(){if(Object.keys(ct).length>0){for(var E in J("/Shading <<"),ct)ct.hasOwnProperty(E)&&ct[E]instanceof Ga&&ct[E].objectNumber>=0&&J("/"+E+" "+ct[E].objectNumber+" 0 R");Wt.publish("putShadingPatternDict"),J(">>")}})(),(function(E){if(Object.keys(ct).length>0){for(var Z in J("/Pattern <<"),ct)ct.hasOwnProperty(Z)&&ct[Z]instanceof h.TilingPattern&&ct[Z].objectNumber>=0&&ct[Z].objectNumber<E&&J("/"+Z+" "+ct[Z].objectNumber+" 0 R");Wt.publish("putTilingPatternDict"),J(">>")}})(v.objectOid),(function(){if(Object.keys(Nt).length>0){var E;for(E in J("/ExtGState <<"),Nt)Nt.hasOwnProperty(E)&&Nt[E].objectNumber>=0&&J("/"+E+" "+Nt[E].objectNumber+" 0 R");Wt.publish("putGStateDict"),J(">>")}})(),(function(){for(var E in J("/XObject <<"),cs)cs.hasOwnProperty(E)&&cs[E].objectNumber>=0&&J("/"+E+" "+cs[E].objectNumber+" 0 R");Wt.publish("putXobjectDict"),J(">>")})(),J(">>"),J("endobj")},Uc=function(v){xt[v.fontName]=xt[v.fontName]||{},xt[v.fontName][v.fontStyle]=v.id},Vc=function(v,E,Z,se,de){var _e={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:v,fontName:E,fontStyle:Z,encoding:se,isStandardFont:de||!1,metadata:{}};return Wt.publish("addFont",{font:_e,instance:this}),Je[_e.id]=_e,Uc(_e),_e.id},ii=h.__private__.pdfEscape=h.pdfEscape=function(v,E){return(function(Z,se){var de,_e,Pe,Ke,tt,ht,jt,Bt,mn;if(Pe=(se=se||{}).sourceEncoding||"Unicode",tt=se.outputEncoding,(se.autoencode||tt)&&Je[We].metadata&&Je[We].metadata[Pe]&&Je[We].metadata[Pe].encoding&&(Ke=Je[We].metadata[Pe].encoding,!tt&&Je[We].encoding&&(tt=Je[We].encoding),!tt&&Ke.codePages&&(tt=Ke.codePages[0]),typeof tt=="string"&&(tt=Ke[tt]),tt)){for(jt=!1,ht=[],de=0,_e=Z.length;de<_e;de++)(Bt=tt[Z.charCodeAt(de)])?ht.push(String.fromCharCode(Bt)):ht.push(Z[de]),ht[de].charCodeAt(0)>>8&&(jt=!0);Z=ht.join("")}for(de=Z.length;jt===void 0&&de!==0;)Z.charCodeAt(de-1)>>8&&(jt=!0),de--;if(!jt)return Z;for(ht=se.noBOM?[]:[254,255],de=0,_e=Z.length;de<_e;de++){if((mn=(Bt=Z.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ht.push(mn),ht.push(Bt-(mn<<8))}return String.fromCharCode.apply(void 0,ht)})(v,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pl=h.__private__.beginPage=function(v){Me[++Kt]=[],vt[Kt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Gc(Kt),ye(Me[U])},Hc=function(v,E){var Z,se,de;switch(t=E||t,typeof v=="string"&&(Z=S(v.toLowerCase()),Array.isArray(Z)&&(se=Z[0],de=Z[1])),Array.isArray(v)&&(se=v[0]*lt,de=v[1]*lt),isNaN(se)&&(se=i[0],de=i[1]),(se>14400||de>14400)&&(Xt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),de=Math.min(14400,de)),i=[se,de],t.substr(0,1)){case"l":de>se&&(i=[de,se]);break;case"p":se>de&&(i=[de,se])}pl(i),Oh(vl),J(po),wl!==0&&J(wl+" J"),Sl!==0&&J(Sl+" j"),Wt.publish("addPage",{pageNumber:Kt})},ml=function(v){v>0&&v<=Kt&&(Me.splice(v,1),vt.splice(v,1),Kt--,U>Kt&&(U=Kt),this.setPage(U))},Gc=function(v){v>0&&v<=Kt&&(U=v)},Yc=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Me.length-1},Zc=function(v,E,Z){var se,de=void 0;return Z=Z||{},v=v!==void 0?v:Je[We].fontName,E=E!==void 0?E:Je[We].fontStyle,se=v.toLowerCase(),xt[se]!==void 0&&xt[se][E]!==void 0?de=xt[se][E]:xt[v]!==void 0&&xt[v][E]!==void 0?de=xt[v][E]:Z.disableWarning===!1&&Xt.warn("Unable to look up font label for font '"+v+"', '"+E+"'. Refer to getFontList() for available fonts."),de||Z.noFallback||(de=xt.times[E])==null&&(de=xt.times.normal),de},fo=h.__private__.putInfo=function(){var v=yn(),E=function(se){return se};for(var Z in u!==null&&(E=kn.encryptor(v,0)),J("<<"),J("/Producer ("+ii(E("jsPDF "+et.version))+")"),Be)Be.hasOwnProperty(Z)&&Be[Z]&&J("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+ii(E(Be[Z]))+")");J("/CreationDate ("+ii(E(Q))+")"),J(">>"),J("endobj")},Ch=h.__private__.putCatalog=function(v){var E=(v=v||{}).rootDictionaryObjId||Fr;switch(yn(),J("<<"),J("/Type /Catalog"),J("/Pages "+E+" 0 R"),K||(K="fullwidth"),K){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+K;Z.substr(Z.length-1)==="%"&&(K=parseInt(K)/100),typeof K=="number"&&J("/OpenAction [3 0 R /XYZ null null "+_(K)+"]")}switch(ve||(ve="continuous"),ve){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}ke&&J("/PageMode /"+ke),Wt.publish("putCatalog"),J(">>"),J("endobj")},In=h.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(re+1)),J("/Root "+re+" 0 R"),J("/Info "+(re-1)+" 0 R"),u!==null&&J("/Encrypt "+kn.oid+" 0 R"),J("/ID [ <"+ne+"> <"+ne+"> ]"),J(">>")},Kc=h.__private__.putHeader=function(){J("%PDF-"+y),J("%")},Jc=h.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(re+1)),J("0000000000 65535 f ");for(var E=1;E<=re;E++)typeof le[E]=="function"?J((v+le[E]()).slice(-10)+" 00000 n "):le[E]!==void 0?J((v+le[E]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},ir=h.__private__.buildDocument=function(){var v;re=0,me=0,xe=[],le=[],we=[],Fr=Qn(),fi=Qn(),ye(xe),Wt.publish("buildDocument"),Kc(),Ii(),(function(){Wt.publish("putAdditionalObjects");for(var Z=0;Z<we.length;Z++){var se=we[Z];ss(se.objId,!0),J(se.content),J("endobj")}Wt.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var Z in Je)Je.hasOwnProperty(Z)&&(f===!1||f===!0&&m.hasOwnProperty(Z))&&ka(Je[Z])})(),(function(){var Z;for(Z in Nt)Nt.hasOwnProperty(Z)&&Ah(Nt[Z])})(),(function(){for(var Z in cs)cs.hasOwnProperty(Z)&&co(cs[Z])})(),(function(Z){var se;for(se in ct)ct.hasOwnProperty(se)&&(ct[se]instanceof Ga?uo(ct[se]):ct[se]instanceof Wo&&ho(ct[se],Z))})(v),Wt.publish("putResources"),v.forEach(fl),fl({resourcesOid:fi,objectOid:Number.MAX_SAFE_INTEGER}),Wt.publish("postPutResources"),u!==null&&(kn.oid=yn(),J("<<"),J("/Filter /Standard"),J("/V "+kn.v),J("/R "+kn.r),J("/U <"+kn.toHexString(kn.U)+">"),J("/O <"+kn.toHexString(kn.O)+">"),J("/P "+kn.P),J(">>"),J("endobj")),fo(),Ch();var E=me;return Jc(),In(),J("startxref"),J(""+E),J("%%EOF"),ye(Me[U]),xe.join(`
`)},Na=h.__private__.getBlob=function(v){return new Blob([wt(v)],{type:"application/pdf"})},gi=h.output=h.__private__.output=(ni=function(v,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",v){case void 0:return ir();case"save":h.save(E.filename);break;case"arraybuffer":return wt(ir());case"blob":return Na(ir());case"bloburi":case"bloburl":if(ft.URL!==void 0&&typeof ft.URL.createObjectURL=="function")return ft.URL&&ft.URL.createObjectURL(Na(ir()))||void 0;Xt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",se=ir();try{Z=y1(se)}catch{Z=y1(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+E.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(de=E.pdfObjectUrl,_e="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+_e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",Ke=ft.open();return Ke!==null&&Ke.document.write(Pe),Ke}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',ht=ft.open();if(ht!==null){ht.document.write(tt);var jt=this;ht.document.documentElement.querySelector("#pdfViewer").onload=function(){ht.document.title=E.filename,ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',mn=ft.open();if(mn!==null&&(mn.document.write(Bt),mn.document.title=E.filename),mn||typeof safari>"u")return mn;break;case"datauri":case"dataurl":return ft.document.location.href=this.output("datauristring",E);default:return null}},ni.foo=function(){try{return ni.apply(this,arguments)}catch(Z){var v=Z.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var E="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Z.message;if(!ft.console)throw new Error(E);ft.console.error(E,Z),ft.alert&&alert(E)}},ni.foo.bar=ni,ni.foo),_a=function(v){return Array.isArray(ba)===!0&&ba.indexOf(v)>-1};switch(s){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=_a("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);lt=s}var kn=null;ge(),F();var gl=h.__private__.getPageInfo=h.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[v].objId,pageNumber:v,pageContext:vt[v]}},Lh=h.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in vt)if(vt[E].objId===v)break;return gl(E)},Ph=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:vt[U].objId,pageNumber:U,pageContext:vt[U]}};h.addPage=function(){return Hc.apply(this,arguments),this},h.setPage=function(){return Gc.apply(this,arguments),ye.call(this,Me[U]),this},h.insertPage=function(v){return this.addPage(),this.movePage(U,v),this},h.movePage=function(v,E){var Z,se;if(v>E){Z=Me[v],se=vt[v];for(var de=v;de>E;de--)Me[de]=Me[de-1],vt[de]=vt[de-1];Me[E]=Z,vt[E]=se,this.setPage(E)}else if(v<E){Z=Me[v],se=vt[v];for(var _e=v;_e<E;_e++)Me[_e]=Me[_e+1],vt[_e]=vt[_e+1];Me[E]=Z,vt[E]=se,this.setPage(E)}return this},h.deletePage=function(){return ml.apply(this,arguments),this},h.__private__.text=h.text=function(v,E,Z,se,de){var _e,Pe,Ke,tt,ht,jt,Bt,mn,En,Zt=(se=se||{}).scope||this;if(typeof v=="number"&&typeof E=="number"&&(typeof Z=="string"||Array.isArray(Z))){var Wn=Z;Z=E,E=v,v=Wn}if(arguments[3]instanceof ut==0?(Ke=arguments[4],tt=arguments[5],Ht(Bt=arguments[3])==="object"&&Bt!==null||(typeof Ke=="string"&&(tt=Ke,Ke=null),typeof Bt=="string"&&(tt=Bt,Bt=null),typeof Bt=="number"&&(Ke=Bt,Bt=null),se={flags:Bt,angle:Ke,align:tt})):(M("The transform parameter of text() with a Matrix value"),En=de),isNaN(E)||isNaN(Z)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Zt;var On,is="",or=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:Aa,$r=Zt.internal.scaleFactor;function qh(en){return en=en.split("	").join(Array(se.TabLen||9).join(" ")),ii(en,Bt)}function ed(en){for(var tn,_n=en.concat(),jn=[],ur=_n.length;ur--;)typeof(tn=_n.shift())=="string"?jn.push(tn):Array.isArray(en)&&(tn.length===1||tn[1]===void 0&&tn[2]===void 0)?jn.push(tn[0]):jn.push([tn[0],tn[1],tn[2]]);return jn}function Da(en,tn){var _n;if(typeof en=="string")_n=tn(en)[0];else if(Array.isArray(en)){for(var jn,ur,_o=en.concat(),$i=[],Il=_o.length;Il--;)typeof(jn=_o.shift())=="string"?$i.push(tn(jn)[0]):Array.isArray(jn)&&typeof jn[0]=="string"&&(ur=tn(jn[0],jn[1],jn[2]),$i.push([ur[0],ur[1],ur[2]]));_n=$i}return _n}var yi=!1,Al=!0;if(typeof v=="string")yi=!0;else if(Array.isArray(v)){var xo=v.concat();Pe=[];for(var Wr,Xn=xo.length;Xn--;)(typeof(Wr=xo.shift())!="string"||Array.isArray(Wr)&&typeof Wr[0]!="string")&&(Al=!1);yi=Al}if(yi===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var lr=Ie/Zt.internal.scaleFactor,cr=lr*(or-1);switch(se.baseline){case"bottom":Z-=cr;break;case"top":Z+=lr-cr;break;case"hanging":Z+=lr-2*cr;break;case"middle":Z+=lr/2-cr}if((jt=se.maxWidth||0)>0&&(typeof v=="string"?v=Zt.splitTextToSize(v,jt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(en,tn){return en.concat(Zt.splitTextToSize(tn,jt))},[]))),_e={text:v,x:E,y:Z,options:se,mutex:{pdfEscape:ii,activeFontKey:We,fonts:Je,activeFontSize:Ie}},Wt.publish("preProcessText",_e),v=_e.text,Ke=(se=_e.options).angle,En instanceof ut==0&&Ke&&typeof Ke=="number"){Ke*=Math.PI/180,se.rotationDirection===0&&(Ke=-Ke),L===C&&(Ke=-Ke);var vo=Math.cos(Ke),Cl=Math.sin(Ke);En=new ut(vo,Cl,-Cl,vo,0,0)}else Ke&&Ke instanceof ut&&(En=Ke);L!==C||En||(En=sr),(ht=se.charSpace||go)!==void 0&&(is+=A(W(ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mn=se.horizontalScale)!==void 0&&(is+=A(100*mn)+` Tz
`),se.lang;var Ss=-1,td=se.renderingMode!==void 0?se.renderingMode:se.stroke,bo=Zt.internal.getCurrentPageInfo().pageContext;switch(td){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var nd=bo.usedRenderingMode!==void 0?bo.usedRenderingMode:-1;Ss!==-1?is+=Ss+` Tr
`:nd!==-1&&(is+=`0 Tr
`),Ss!==-1&&(bo.usedRenderingMode=Ss),tt=se.align||"left";var qn,ri=Ie*or,Ll=Zt.internal.pageSize.getWidth(),Pl=Je[We];ht=se.charSpace||go,jt=se.maxWidth||0,Bt=Object.assign({autoencode:!0,noBOM:!0},se.flags);var qr=[],wo=function(en){return Zt.getStringUnitWidth(en,{font:Pl,charSpace:ht,fontSize:Ie,doKerning:!1})*Ie/$r};if(Object.prototype.toString.call(v)==="[object Array]"){var Ms;Pe=ed(v),tt!=="left"&&(qn=Pe.map(wo));var Ds,Ta=0;if(tt==="right"){E-=qn[0],v=[],Xn=Pe.length;for(var Ri=0;Ri<Xn;Ri++)Ri===0?(Ds=rr(E),Ms=ar(Z)):(Ds=W(Ta-qn[Ri]),Ms=-ri),v.push([Pe[Ri],Ds,Ms]),Ta=qn[Ri]}else if(tt==="center"){E-=qn[0]/2,v=[],Xn=Pe.length;for(var Ur=0;Ur<Xn;Ur++)Ur===0?(Ds=rr(E),Ms=ar(Z)):(Ds=W((Ta-qn[Ur])/2),Ms=-ri),v.push([Pe[Ur],Ds,Ms]),Ta=qn[Ur]}else if(tt==="left"){v=[],Xn=Pe.length;for(var Ml=0;Ml<Xn;Ml++)v.push(Pe[Ml])}else if(tt==="justify"&&Pl.encoding==="Identity-H"){v=[],Xn=Pe.length,jt=jt!==0?jt:Ll;for(var Vr=0,Nn=0;Nn<Xn;Nn++)if(Ms=Nn===0?ar(Z):-ri,Ds=Nn===0?rr(E):Vr,Nn<Xn-1){var Uh=W((jt-qn[Nn])/(Pe[Nn].split(" ").length-1)),Fi=Pe[Nn].split(" ");v.push([Fi[0]+" ",Ds,Ms]),Vr=0;for(var zi=1;zi<Fi.length;zi++){var So=(wo(Fi[zi-1]+" "+Fi[zi])-wo(Fi[zi]))*$r+Uh;zi==Fi.length-1?v.push([Fi[zi],So,0]):v.push([Fi[zi]+" ",So,0]),Vr-=So}}else v.push([Pe[Nn],Ds,Ms]);v.push(["",Vr,0])}else{if(tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Xn=Pe.length,jt=jt!==0?jt:Ll,Nn=0;Nn<Xn;Nn++)Ms=Nn===0?ar(Z):-ri,Ds=Nn===0?rr(E):0,Nn<Xn-1?qr.push(A(W((jt-qn[Nn])/(Pe[Nn].split(" ").length-1)))):qr.push(0),v.push([Pe[Nn],Ds,Ms])}}(typeof se.R2L=="boolean"?se.R2L:he)===!0&&(v=Da(v,function(en,tn,_n){return[en.split("").reverse().join(""),tn,_n]})),_e={text:v,x:E,y:Z,options:se,mutex:{pdfEscape:ii,activeFontKey:We,fonts:Je,activeFontSize:Ie}},Wt.publish("postProcessText",_e),v=_e.text,On=_e.mutex.isHex||!1;var Dl=Je[We].encoding;Dl!=="WinAnsiEncoding"&&Dl!=="StandardEncoding"||(v=Da(v,function(en,tn,_n){return[qh(en),tn,_n]})),Pe=ed(v),v=[];for(var ko,No,Ia,Ea=Array.isArray(Pe[0])?1:0,dr="",Tl=function(en,tn,_n){var jn="";return _n instanceof ut?(_n=typeof se.angle=="number"?nr(_n,new ut(1,0,0,1,en,tn)):nr(new ut(1,0,0,1,en,tn),_n),L===C&&(_n=nr(new ut(1,0,0,-1,0,0),_n)),jn=_n.join(" ")+` Tm
`):jn=A(en)+" "+A(tn)+` Td
`,jn},qs=0;qs<Pe.length;qs++){switch(dr="",Ea){case 1:Ia=(On?"<":"(")+Pe[qs][0]+(On?">":")"),ko=parseFloat(Pe[qs][1]),No=parseFloat(Pe[qs][2]);break;case 0:Ia=(On?"<":"(")+Pe[qs]+(On?">":")"),ko=rr(E),No=ar(Z)}qr!==void 0&&qr[qs]!==void 0&&(dr=qr[qs]+` Tw
`),qs===0?v.push(dr+Tl(ko,No,En)+Ia):Ea===0?v.push(dr+Ia):Ea===1&&v.push(dr+Tl(ko,No,En)+Ia)}v=Ea===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Bi=`BT
/`;return Bi+=We+" "+Ie+` Tf
`,Bi+=A(Ie*or)+` TL
`,Bi+=Ca+`
`,Bi+=is,Bi+=v,J(Bi+="ET"),m[We]=!0,Zt};var Mh=h.__private__.clip=h.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Mh("evenodd")},h.__private__.discardPath=h.discardPath=function(){return J("n"),this};var Ei=h.__private__.isValidStyle=function(v){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(E=!0),E};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(v){return Ei(v)&&(d=v),this};var Qc=h.__private__.getStyle=h.getStyle=function(v){var E=d;switch(v){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=v}return E},Xc=h.close=function(){return J("h"),this};h.stroke=function(){return J("S"),this},h.fill=function(v){return zr("f",v),this},h.fillEvenOdd=function(v){return zr("f*",v),this},h.fillStroke=function(v){return zr("B",v),this},h.fillStrokeEvenOdd=function(v){return zr("B*",v),this};var zr=function(v,E){Ht(E)==="object"?Th(E,v):J(v)},yl=function(v){v===null||L===C&&v===void 0||(v=Qc(v),J(v))};function Dh(v,E,Z,se,de){var _e=new Wo(E||this.boundingBox,Z||this.xStep,se||this.yStep,this.gState,de||this.matrix);_e.stream=this.stream;var Pe=v+"$$"+this.cloneIndex+++"$$";return ti(Pe,_e),_e}var Th=function(v,E){var Z=Mt[v.key],se=ct[Z];if(se instanceof Ga)J("q"),J(Ih(E)),se.gState&&h.setGState(se.gState),J(v.matrix.toString()+" cm"),J("/"+Z+" sh"),J("Q");else if(se instanceof Wo){var de=new ut(1,0,0,-1,0,Ws());v.matrix&&(de=de.multiply(v.matrix||sr),Z=Dh.call(se,v.key,v.boundingBox,v.xStep,v.yStep,de).id),J("q"),J("/Pattern cs"),J("/"+Z+" scn"),se.gState&&h.setGState(se.gState),J(E),J("Q")}},Ih=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},xl=h.moveTo=function(v,E){return J(A(W(v))+" "+A(D(E))+" m"),this},ja=h.lineTo=function(v,E){return J(A(W(v))+" "+A(D(E))+" l"),this},Br=h.curveTo=function(v,E,Z,se,de,_e){return J([A(W(v)),A(D(E)),A(W(Z)),A(D(se)),A(W(de)),A(D(_e)),"c"].join(" ")),this};h.__private__.line=h.line=function(v,E,Z,se,de){if(isNaN(v)||isNaN(E)||isNaN(Z)||isNaN(se)||!Ei(de))throw new Error("Invalid arguments passed to jsPDF.line");return L===j?this.lines([[Z-v,se-E]],v,E,[1,1],de||"S"):this.lines([[Z-v,se-E]],v,E,[1,1]).stroke()},h.__private__.lines=h.lines=function(v,E,Z,se,de,_e){var Pe,Ke,tt,ht,jt,Bt,mn,En,Zt,Wn,On,is;if(typeof v=="number"&&(is=Z,Z=E,E=v,v=is),se=se||[1,1],_e=_e||!1,isNaN(E)||isNaN(Z)||!Array.isArray(v)||!Array.isArray(se)||!Ei(de)||typeof _e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xl(E,Z),Pe=se[0],Ke=se[1],ht=v.length,Wn=E,On=Z,tt=0;tt<ht;tt++)(jt=v[tt]).length===2?(Wn=jt[0]*Pe+Wn,On=jt[1]*Ke+On,ja(Wn,On)):(Bt=jt[0]*Pe+Wn,mn=jt[1]*Ke+On,En=jt[2]*Pe+Wn,Zt=jt[3]*Ke+On,Wn=jt[4]*Pe+Wn,On=jt[5]*Ke+On,Br(Bt,mn,En,Zt,Wn,On));return _e&&Xc(),yl(de),this},h.path=function(v){for(var E=0;E<v.length;E++){var Z=v[E],se=Z.c;switch(Z.op){case"m":xl(se[0],se[1]);break;case"l":ja(se[0],se[1]);break;case"c":Br.apply(this,se);break;case"h":Xc()}}return this},h.__private__.rect=h.rect=function(v,E,Z,se,de){if(isNaN(v)||isNaN(E)||isNaN(Z)||isNaN(se)||!Ei(de))throw new Error("Invalid arguments passed to jsPDF.rect");return L===j&&(se=-se),J([A(W(v)),A(D(E)),A(W(Z)),A(W(se)),"re"].join(" ")),yl(de),this},h.__private__.triangle=h.triangle=function(v,E,Z,se,de,_e,Pe){if(isNaN(v)||isNaN(E)||isNaN(Z)||isNaN(se)||isNaN(de)||isNaN(_e)||!Ei(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-v,se-E],[de-Z,_e-se],[v-de,E-_e]],v,E,[1,1],Pe,!0),this},h.__private__.roundedRect=h.roundedRect=function(v,E,Z,se,de,_e,Pe){if(isNaN(v)||isNaN(E)||isNaN(Z)||isNaN(se)||isNaN(de)||isNaN(_e)||!Ei(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ke=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*Z),_e=Math.min(_e,.5*se),this.lines([[Z-2*de,0],[de*Ke,0,de,_e-_e*Ke,de,_e],[0,se-2*_e],[0,_e*Ke,-de*Ke,_e,-de,_e],[2*de-Z,0],[-de*Ke,0,-de,-_e*Ke,-de,-_e],[0,2*_e-se],[0,-_e*Ke,de*Ke,-_e,de,-_e]],v+de,E,[1,1],Pe,!0),this},h.__private__.ellipse=h.ellipse=function(v,E,Z,se,de){if(isNaN(v)||isNaN(E)||isNaN(Z)||isNaN(se)||!Ei(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _e=4/3*(Math.SQRT2-1)*Z,Pe=4/3*(Math.SQRT2-1)*se;return xl(v+Z,E),Br(v+Z,E-Pe,v+_e,E-se,v,E-se),Br(v-_e,E-se,v-Z,E-Pe,v-Z,E),Br(v-Z,E+Pe,v-_e,E+se,v,E+se),Br(v+_e,E+se,v+Z,E+Pe,v+Z,E),yl(de),this},h.__private__.circle=h.circle=function(v,E,Z,se){if(isNaN(v)||isNaN(E)||isNaN(Z)||!Ei(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,E,Z,Z,se)},h.setFont=function(v,E,Z){return Z&&(E=k(E,Z)),We=Zc(v,E,{disableWarning:!1}),this};var Eh=h.__private__.getFont=h.getFont=function(){return Je[Zc.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var v,E,Z={};for(v in xt)if(xt.hasOwnProperty(v))for(E in Z[v]=[],xt[v])xt[v].hasOwnProperty(E)&&Z[v].push(E);return Z},h.addFont=function(v,E,Z,se,de){var _e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_e.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&_e.indexOf(arguments[3])==-1&&(Z=k(Z,se)),Vc.call(this,v,E,Z,de=de||"Identity-H")};var Aa,vl=n.lineWidth||.200025,bt=h.__private__.getLineWidth=h.getLineWidth=function(){return vl},Oh=h.__private__.setLineWidth=h.setLineWidth=function(v){return vl=v,J(A(W(v))+" w"),this};h.__private__.setLineDash=et.API.setLineDash=et.API.setLineDashPattern=function(v,E){if(v=v||[],E=E||0,isNaN(E)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Z){return A(W(Z))}).join(" "),E=A(W(E)),J("["+v+"] "+E+" d"),this};var Rh=h.__private__.getLineHeight=h.getLineHeight=function(){return Ie*Aa};h.__private__.getLineHeight=h.getLineHeight=function(){return Ie*Aa};var Fh=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Aa=v),this},zh=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Aa};Fh(n.lineHeight);var rr=h.__private__.getHorizontalCoordinate=function(v){return W(v)},ar=h.__private__.getVerticalCoordinate=function(v){return L===C?v:vt[U].mediaBox.topRightY-vt[U].mediaBox.bottomLeftY-W(v)},Bh=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(v){return A(rr(v))},$h=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(v){return A(ar(v))},po=n.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Ti(po)},h.__private__.setStrokeColor=h.setDrawColor=function(v,E,Z,se){return po=pi({ch1:v,ch2:E,ch3:Z,ch4:se,pdfColorType:"draw",precision:2}),J(po),this};var bl=n.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Ti(bl)},h.__private__.setFillColor=h.setFillColor=function(v,E,Z,se){return bl=pi({ch1:v,ch2:E,ch3:Z,ch4:se,pdfColorType:"fill",precision:2}),J(bl),this};var Ca=n.textColor||"0 g",mo=h.__private__.getTextColor=h.getTextColor=function(){return Ti(Ca)};h.__private__.setTextColor=h.setTextColor=function(v,E,Z,se){return Ca=pi({ch1:v,ch2:E,ch3:Z,ch4:se,pdfColorType:"text",precision:3}),this};var go=n.charSpace,Wh=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(go||0)};h.__private__.setCharSpace=h.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return go=v,this};var wl=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(v){var E=h.CapJoinStyles[v];if(E===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wl=E,J(E+" J"),this};var Sl=0;h.__private__.setLineJoin=h.setLineJoin=function(v){var E=h.CapJoinStyles[v];if(E===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sl=E,J(E+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(A(W(v))+" M"),this},h.GState=Pu,h.setGState=function(v){(v=typeof v=="string"?Nt[Sn[v]]:La(null,v)).equals($n)||(J("/"+v.id+" gs"),$n=v)};var La=function(v,E){if(!v||!Sn[v]){var Z=!1;for(var se in Nt)if(Nt.hasOwnProperty(se)&&Nt[se].equals(E)){Z=!0;break}if(Z)E=Nt[se];else{var de="GS"+(Object.keys(Nt).length+1).toString(10);Nt[de]=E,E.id=de}return v&&(Sn[v]=E.id),Wt.publish("addGState",E),E}};h.addGState=function(v,E){return La(v,E),this},h.saveGraphicsState=function(){return J("q"),$t.push({key:We,size:Ie,color:Ca}),this},h.restoreGraphicsState=function(){J("Q");var v=$t.pop();return We=v.key,Ie=v.size,Ca=v.color,$n=null,this},h.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},h.comment=function(v){return J("#"+v),this};var Pa=function(v,E){var Z=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(_e){isNaN(_e)||(Z=parseFloat(_e))}});var se=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(_e){isNaN(_e)||(se=parseFloat(_e))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(_e){de=_e.toString()}}),this},kl=function(v,E,Z,se){Pa.call(this,v,E),this.type="rect";var de=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Pe){isNaN(Pe)||(de=parseFloat(Pe))}});var _e=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _e},set:function(Pe){isNaN(Pe)||(_e=parseFloat(Pe))}}),this},yo=function(){this.page=Kt,this.currentPage=U,this.pages=Me.slice(0),this.pagesContext=vt.slice(0),this.x=Ve,this.y=Yt,this.matrix=It,this.width=_l(U),this.height=Ws(U),this.outputDestination=Oe,this.id="",this.objectNumber=-1};yo.prototype.restore=function(){Kt=this.page,U=this.currentPage,vt=this.pagesContext,Me=this.pages,Ve=this.x,Yt=this.y,It=this.matrix,jl(U,this.width),Oi(U,this.height),Oe=this.outputDestination};var Nl=function(v,E,Z,se,de){Di.push(new yo),Kt=U=0,Me=[],Ve=v,Yt=E,It=de,pl([Z,se])};for(var Ma in h.beginFormObject=function(v,E,Z,se,de){return Nl(v,E,Z,se,de),this},h.endFormObject=function(v){return(function(E){if(tr[E])Di.pop().restore();else{var Z=new yo,se="Xo"+(Object.keys(cs).length+1).toString(10);Z.id=se,tr[E]=se,cs[se]=Z,Wt.publish("addFormObject",Z),Di.pop().restore()}})(v),this},h.doFormObject=function(v,E){var Z=cs[tr[v]];return J("q"),J(E.toString()+" cm"),J("/"+Z.id+" Do"),J("Q"),this},h.getFormObject=function(v){var E=cs[tr[v]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},h.save=function(v,E){return v=v||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(Ha(Na(ir()),v),typeof Ha.unload=="function"&&ft.setTimeout&&setTimeout(Ha.unload,911),this):new Promise(function(Z,se){try{var de=Ha(Na(ir()),v);typeof Ha.unload=="function"&&ft.setTimeout&&setTimeout(Ha.unload,911),Z(de)}catch(_e){se(_e.message)}})},et.API)et.API.hasOwnProperty(Ma)&&(Ma==="events"&&et.API.events.length?(function(v,E){var Z,se,de;for(de=E.length-1;de!==-1;de--)Z=E[de][0],se=E[de][1],v.subscribe.apply(v,[Z].concat(typeof se=="function"?[se]:se))})(Wt,et.API.events):h[Ma]=et.API[Ma]);var _l=h.getPageWidth=function(v){return(vt[v=v||U].mediaBox.topRightX-vt[v].mediaBox.bottomLeftX)/lt},jl=h.setPageWidth=function(v,E){vt[v].mediaBox.topRightX=E*lt+vt[v].mediaBox.bottomLeftX},Ws=h.getPageHeight=function(v){return(vt[v=v||U].mediaBox.topRightY-vt[v].mediaBox.bottomLeftY)/lt},Oi=h.setPageHeight=function(v,E){vt[v].mediaBox.topRightY=E*lt+vt[v].mediaBox.bottomLeftY};return h.internal={pdfEscape:ii,getStyle:Qc,getFont:Eh,getFontSize:ee,getCharSpace:Wh,getTextColor:mo,getLineHeight:Rh,getLineHeightFactor:zh,getLineWidth:bt,write:Pt,getHorizontalCoordinate:rr,getVerticalCoordinate:ar,getCoordinateString:Bh,getVerticalCoordinateString:$h,collections:{},newObject:yn,newAdditionalObject:wa,newObjectDeferred:Qn,newObjectDeferredBegin:ss,getFilters:mi,putStream:si,events:Wt,scaleFactor:lt,pageSize:{getWidth:function(){return _l(U)},setWidth:function(v){jl(U,v)},getHeight:function(){return Ws(U)},setHeight:function(v){Oi(U,v)}},encryptionOptions:u,encryption:kn,getEncryptor:function(v){return u!==null?kn.encryptor(v,0):function(E){return E}},output:gi,getNumberOfPages:Yc,pages:Me,out:J,f2:_,f3:T,getPageInfo:gl,getPageInfoByObjId:Lh,getCurrentPageInfo:Ph,getPDFVersion:x,Point:Pa,Rectangle:kl,Matrix:ut,hasHotfix:_a},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return _l(U)},set:function(v){jl(U,v)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Ws(U)},set:function(v){Oi(U,v)},enumerable:!0,configurable:!0}),(function(v){for(var E=0,Z=at.length;E<Z;E++){var se=Vc.call(this,v[E][0],v[E][1],v[E][2],at[E][3],!0);f===!1&&(m[se]=!0);var de=v[E][0].split("-");Uc({id:se,fontName:de[0],fontStyle:de[1]||""})}Wt.publish("addFonts",{fonts:Je,dictionary:xt})}).call(h,at),We="F1",Hc(i,t),Wt.publish("initialized"),h}zo.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},zo.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zo.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},zo.prototype.processOwnerPassword=function(n,e){return zp(Fp(e).substr(0,5),n)},zo.prototype.encryptor=function(n,e){var t=Fp(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return zp(t,s)}},Pu.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Ht(n)!==Ht(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},et.API={events:[]},et.version="3.0.2";var bn=et.API,Tm=1,lo=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Do=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},St=function(n){return n.toFixed(2)},ea=function(n){return n.toFixed(5)};bn.__acroform__={};var Bs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},w1=function(n){return n*Tm},Hi=function(n){var e=new V2,t=Ze.internal.getHeight(n)||0,s=Ze.internal.getWidth(n)||0;return e.BBox=[0,0,Number(St(s)),Number(St(t))],e},pP=bn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},mP=bn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},gP=bn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Ln=bn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gP(n,e-1)},Pn=bn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pP(n,e-1)},Mn=bn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mP(n,e-1)},yP=bn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,i=n[0],r=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=s(r+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=s(r)||0,[Number(St(c.lowerLeft_X)),Number(St(c.lowerLeft_Y)),Number(St(c.upperRight_X)),Number(St(c.upperRight_Y))]},xP=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Bp(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+St(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=Hi(n);return r.scope=n.scope,r.stream=e.join(`
`),r}},Bp=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(_){return _.split(`
`)}):i.map(function(_){return[_]});var r=t,a=Ze.internal.getHeight(n)||0;a=a<0?-a:a;var o=Ze.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(_,T,W){if(_+1<i.length){var D=T+" "+i[_+1][0];return qd(D,n,W).width<=o-4}return!1};r++;e:for(;r>0;){e="",r--;var d,u,f=qd("3",n,r).height,m=n.multiline?a-r:(a-f)/2,h=m+=2,y=0,x=0,w=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+qd(e,n,r=12).width+", FieldWidth:"+o+`
`;break}for(var S="",j=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var L=!1;if(i[C].length!==1&&w!==i[C].length-1){if((f+2)*(j+2)+2>a)continue e;S+=i[C][w],L=!0,x=C,C--}else{S=(S+=i[C][w]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var P=parseInt(C),O=c(P,S,r),k=C>=i.length-1;if(O&&!k){S+=" ",w=0;continue}if(O||k){if(k)x=P;else if(n.multiline&&(f+2)*(j+2)+2>a)continue e}else{if(!n.multiline||(f+2)*(j+2)+2>a)continue e;x=P}}for(var A="",M=y;M<=x;M++){var V=i[M];if(n.multiline){if(M===x){A+=V[w]+" ",w=(w+1)%V.length;continue}if(M===y){A+=V[V.length-1]+" ";continue}}A+=V[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=qd(A,n,r).width,n.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}e+=St(d)+" "+St(h)+` Td
`,e+="("+lo(A)+`) Tj
`,e+=-St(d)+` 0 Td
`,h=-(r+2),u=0,y=L?x:x+1,j++,S=""}break}return s.text=e,s.fontSize=r,s},qd=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},vP={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bP=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},wP=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Pi.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(vP)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tm=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new H2,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i];r.objId=void 0,r.hasAnnotation&&bP(r,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,i){var r=!s;for(var a in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(a)){var o=s[a],c=[],d=o.Rect;if(o.Rect&&(o.Rect=yP(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ze.createDefaultAppearanceStream(o),Ht(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=xP(o);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var h=o.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var a in h)if(h.hasOwnProperty(a)){var y=h[a];typeof y=="function"&&(y=y.call(i,o)),f+="/"+a+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=h)=="function"&&(y=y.call(i,o)),f+="/"+a+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}r&&(function(x,w){for(var S in x)if(x.hasOwnProperty(S)){var j=S,C=x[S];w.internal.newObjectDeferredBegin(C.objId,!0),Ht(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete x[j]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},U2=bn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(a){return a};if(Array.isArray(n)){for(var i="[",r=0;r<n.length;r++)switch(r!==0&&(i+=" "),Ht(n[r])){case"boolean":case"number":case"object":i+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),i+="("+lo(s(n[r].toString()))+")"):i+=n[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gf=function(n,e,t){var s=function(i){return i};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+lo(s(n))+")"},Ki=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ki.prototype.toString=function(){return this.objId+" 0 R"},Ki.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ki.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],i=this[s];i&&(Array.isArray(i)?n.push({key:s,value:U2(i,this.objId,this.scope)}):i instanceof Ki?(i.scope=this.scope,n.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:s,value:i}))}return n};var V2=function(){Ki.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Bs(V2,Ki);var H2=function(){Ki.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+lo(t(n))+")"}},set:function(t){n=t}})};Bs(H2,Ki);var Pi=function n(){Ki.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ln(e,3)},set:function(S){S?this.F=Pn(e,3):this.F=Mn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(S){s=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(S){s[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(S){s[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(S){s[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(S){s[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Mu)return;r="FieldObject"+n.FieldNum++}var S=function(j){return j};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+lo(S(r))+")"},set:function(S){r=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(S){r=S}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Tm:d},set:function(S){d=S}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Mu||this instanceof Ja))return Gf(f,this.objId,this.scope)},set:function(S){S=S.toString(),f=S}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ts==0?Gf(m,this.objId,this.scope):m},set:function(S){S=S.toString(),m=this instanceof ts==0?S.substr(0,1)==="("?Do(S.substr(1,S.length-2)):Do(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Do(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof ts==1?"/"+S:S}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ts==0?Gf(h,this.objId,this.scope):h},set:function(S){S=S.toString(),h=this instanceof ts==0?S.substr(0,1)==="("?Do(S.substr(1,S.length-2)):Do(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Do(h.substr(1,h.length-1)):h},set:function(S){S=S.toString(),h=this instanceof ts==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){S=!!S,x=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(S){y=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,1)},set:function(S){S?this.Ff=Pn(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,2)},set:function(S){S?this.Ff=Pn(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,3)},set:function(S){S?this.Ff=Pn(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');w=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(w){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Bs(Pi,Ki);var Qo=function(){Pi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return U2(e,this.objId,this.scope)},set:function(t){var s,i;i=[],typeof(s=t)=="string"&&(i=(function(r,a,o){o||(o=1);for(var c,d=[];c=a.exec(r);)d.push(c[o]);return d})(s,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,18)},set:function(t){t?this.Ff=Pn(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Pn(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,20)},set:function(t){t?(this.Ff=Pn(this.Ff,20),e.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,22)},set:function(t){t?this.Ff=Pn(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,23)},set:function(t){t?this.Ff=Pn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,27)},set:function(t){t?this.Ff=Pn(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};Bs(Qo,Pi);var Xo=function(){Qo.call(this),this.fontName="helvetica",this.combo=!1};Bs(Xo,Qo);var el=function(){Xo.call(this),this.combo=!0};Bs(el,Xo);var au=function(){el.call(this),this.edit=!0};Bs(au,el);var ts=function(){Pi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,15)},set:function(t){t?this.Ff=Pn(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,16)},set:function(t){t?this.Ff=Pn(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,17)},set:function(t){t?this.Ff=Pn(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,26)},set:function(t){t?this.Ff=Pn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,i=[];for(s in i.push("<<"),e)i.push("/"+s+" ("+lo(t(e[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Ht(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Bs(ts,Pi);var ou=function(){ts.call(this),this.pushButton=!0};Bs(ou,ts);var tl=function(){ts.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Bs(tl,ts);var Mu=function(){var n,e;Pi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var r,a=[];for(r in a.push("<<"),s)a.push("/"+r+" ("+lo(i(s[r]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ht(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bs(Mu,Pi),tl.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},tl.prototype.createOption=function(n){var e=new Mu;return e.Parent=this,e.optionName=n,this.Kids.push(e),SP.call(this.scope,e),e};var lu=function(){ts.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};Bs(lu,ts);var Ja=function(){Pi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,13)},set:function(e){e?this.Ff=Pn(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,21)},set:function(e){e?this.Ff=Pn(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,23)},set:function(e){e?this.Ff=Pn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,24)},set:function(e){e?this.Ff=Pn(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,25)},set:function(e){e?this.Ff=Pn(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,26)},set:function(e){e?this.Ff=Pn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bs(Ja,Pi);var cu=function(){Ja.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,14)},set:function(n){n?this.Ff=Pn(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};Bs(cu,Ja);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=Bp(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+St(Ze.internal.getWidth(n))+" "+St(Ze.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+St(r.fontSize)+" Tf "+i),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Hi(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=[],r=Ze.internal.getHeight(n),a=Ze.internal.getWidth(n),o=Bp(n,n.caption);return i.push("1 g"),i.push("0 0 "+St(a)+" "+St(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+St(a-1)+" "+St(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+St(o.fontSize)+" Tf "+s),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+St(Ze.internal.getWidth(n))+" "+St(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Circle.YesNormal,e.D[n]=Ze.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Hi(n);e.scope=n.scope;var t=[],s=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Ze.internal.Bezier_C,r=Number((s*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ea(Ze.internal.getWidth(n)/2)+" "+ea(Ze.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=[],s=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*Ze.internal.Bezier_C).toFixed(5)),a=Number((s*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ea(Ze.internal.getWidth(n)/2)+" "+ea(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ea(Ze.internal.getWidth(n)/2)+" "+ea(Ze.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),t.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),t.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),t.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=[],s=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ea(Ze.internal.getWidth(n)/2)+" "+ea(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Cross.YesNormal,e.D[n]=Ze.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Hi(n);e.scope=n.scope;var t=[],s=Ze.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+St(Ze.internal.getWidth(n)-2)+" "+St(Ze.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(St(s.x1.x)+" "+St(s.x1.y)+" m"),t.push(St(s.x2.x)+" "+St(s.x2.y)+" l"),t.push(St(s.x4.x)+" "+St(s.x4.y)+" m"),t.push(St(s.x3.x)+" "+St(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=Ze.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+St(Ze.internal.getWidth(n))+" "+St(Ze.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+St(Ze.internal.getWidth(n)-2)+" "+St(Ze.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(St(t.x1.x)+" "+St(t.x1.y)+" m"),s.push(St(t.x2.x)+" "+St(t.x2.y)+" l"),s.push(St(t.x4.x)+" "+St(t.x4.y)+" m"),s.push(St(t.x3.x)+" "+St(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Hi(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+St(Ze.internal.getWidth(n))+" "+St(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ze.internal.getWidth(n),t=Ze.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},Ze.internal.getWidth=function(n){var e=0;return Ht(n)==="object"&&(e=w1(n.Rect[2])),e},Ze.internal.getHeight=function(n){var e=0;return Ht(n)==="object"&&(e=w1(n.Rect[3])),e};var SP=bn.addField=function(n){if(wP(this,n),!(n instanceof Pi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};bn.AcroFormChoiceField=Qo,bn.AcroFormListBox=Xo,bn.AcroFormComboBox=el,bn.AcroFormEditBox=au,bn.AcroFormButton=ts,bn.AcroFormPushButton=ou,bn.AcroFormRadioButton=tl,bn.AcroFormCheckBox=lu,bn.AcroFormTextField=Ja,bn.AcroFormPasswordField=cu,bn.AcroFormAppearance=Ze,bn.AcroForm={ChoiceField:Qo,ListBox:Xo,ComboBox:el,EditBox:au,Button:ts,PushButton:ou,RadioButton:tl,CheckBox:lu,TextField:Ja,PasswordField:cu,Appearance:Ze},et.AcroForm={ChoiceField:Qo,ListBox:Xo,ComboBox:el,EditBox:au,Button:ts,PushButton:ou,RadioButton:tl,CheckBox:lu,TextField:Ja,PasswordField:cu,Appearance:Ze};et.AcroForm;function G2(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(_,T){var W,D,Q,ne,ae,F=t;if((T=T||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(O(_))for(ae in s)for(Q=s[ae],W=0;W<Q.length;W+=1){for(ne=!0,D=0;D<Q[W].length;D+=1)if(Q[W][D]!==void 0&&Q[W][D]!==_[D]){ne=!1;break}if(ne===!0){F=ae;break}}else for(ae in s)for(Q=s[ae],W=0;W<Q.length;W+=1){for(ne=!0,D=0;D<Q[W].length;D+=1)if(Q[W][D]!==void 0&&Q[W][D]!==_.charCodeAt(D)){ne=!1;break}if(ne===!0){F=ae;break}}return F===t&&T!==t&&(F=T),F},r=function _(T){for(var W=this.internal.write,D=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:T.width}),ne.push({key:"Height",value:T.height}),T.colorSpace===S.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===S.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var ae="",F=0,ce=T.transparency.length;F<ce;F++)ae+=T.transparency[F]+" "+T.transparency[F]+" ";ne.push({key:"Mask",value:"["+ae+"]"})}T.sMask!==void 0&&ne.push({key:"SMask",value:T.objectId+1+" 0 R"});var Se=T.filter!==void 0?["/"+T.filter]:void 0;if(D({data:T.data,additionalKeyValues:ne,alreadyAppliedFilters:Se,objectId:T.objectId}),W("endobj"),"sMask"in T&&T.sMask!==void 0){var ge=(T.predictor!=null?"/Predictor "+T.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+T.width,R={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:ge,data:T.sMask};"filter"in T&&(R.filter=T.filter),_.call(this,R)}if(T.colorSpace===S.INDEXED){var U=this.internal.newObject();D({data:A(new Uint8Array(T.palette)),objectId:U}),W("endobj")}},a=function(){var _=this.internal.collections[e+"images"];for(var T in _)r.call(this,_[T])},o=function(){var _,T=this.internal.collections[e+"images"],W=this.internal.write;for(var D in T)W("/I"+(_=T[D]).index,_.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var _=this.internal.collections[e+"images"];return c.call(this),_},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(_){return typeof n["process"+_.toUpperCase()]=="function"},m=function(_){return Ht(_)==="object"&&_.nodeType===1},h=function(_,T){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var W=""+_.getAttribute("src");if(W.indexOf("data:image/")===0)return ru(unescape(W).split("base64,").pop());var D=n.loadFile(W,!0);if(D!==void 0)return D}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var Q;switch(T){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return ru(_.toDataURL(Q,1).split("base64,").pop())}},y=function(_){var T=this.internal.collections[e+"images"];if(T){for(var W in T)if(_===T[W].alias)return T[W]}},x=function(_,T,W){return _||T||(_=-96,T=-96),_<0&&(_=-1*W.width*72/_/this.internal.scaleFactor),T<0&&(T=-1*W.height*72/T/this.internal.scaleFactor),_===0&&(_=T*W.width/W.height),T===0&&(T=_*W.height/W.width),[_,T]},w=function(_,T,W,D,Q,ne){var ae=x.call(this,W,D,Q),F=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,Se=d.call(this);if(W=ae[0],D=ae[1],Se[Q.index]=Q,ne){ne*=Math.PI/180;var ge=Math.cos(ne),R=Math.sin(ne),U=function(te){return te.toFixed(4)},H=[U(ge),U(R),U(-1*R),U(ge),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,F(_),ce(T+D),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([F(W),"0","0",F(D),"0","0","cm"].join(" "))):this.internal.write([F(W),"0","0",F(D),F(_),ce(T+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(_){var T,W,D=0;if(typeof _=="string")for(W=_.length,T=0;T<W;T++)D=(D<<5)-D+_.charCodeAt(T),D|=0;else if(O(_))for(W=_.byteLength/2,T=0;T<W;T++)D=(D<<5)-D+_[T],D|=0;return D},L=n.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var T=!0;return _.length===0&&(T=!1),_.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(T=!1),T},P=n.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var T=_.indexOf(",");return T<0?null:_.substring(0,T).trim().endsWith("base64")?_.substring(T+1):null};n.__addimage__.isArrayBuffer=function(_){return _ instanceof ArrayBuffer};var O=n.__addimage__.isArrayBufferView=function(_){return _ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array},k=n.__addimage__.binaryStringToUint8Array=function(_){for(var T=_.length,W=new Uint8Array(T),D=0;D<T;D++)W[D]=_.charCodeAt(D);return W},A=n.__addimage__.arrayBufferToBinaryString=function(_){for(var T="",W=O(_)?_:new Uint8Array(_),D=0;D<W.length;D+=8192)T+=String.fromCharCode.apply(null,W.subarray(D,D+8192));return T};n.addImage=function(){var _,T,W,D,Q,ne,ae,F,ce;if(typeof arguments[1]=="number"?(T=t,W=arguments[1],D=arguments[2],Q=arguments[3],ne=arguments[4],ae=arguments[5],F=arguments[6],ce=arguments[7]):(T=arguments[1],W=arguments[2],D=arguments[3],Q=arguments[4],ne=arguments[5],ae=arguments[6],F=arguments[7],ce=arguments[8]),Ht(_=arguments[0])==="object"&&!m(_)&&"imageData"in _){var Se=_;_=Se.imageData,T=Se.format||T||t,W=Se.x||W||0,D=Se.y||D||0,Q=Se.w||Se.width||Q,ne=Se.h||Se.height||ne,ae=Se.alias||ae,F=Se.compression||F,ce=Se.rotation||Se.angle||ce}var ge=this.internal.getFilters();if(F===void 0&&ge.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(W)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var R=M.call(this,_,T,ae,F);return w.call(this,W,D,Q,ne,R,ce),this};var M=function(_,T,W,D){var Q,ne,ae;if(typeof _=="string"&&i(_)===t){_=unescape(_);var F=V(_,!1);(F!==""||(F=n.loadFile(_,!0))!==void 0)&&(_=F)}if(m(_)&&(_=h(_,T)),T=i(_,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((ae=W)==null||ae.length===0)&&(W=(function(ce){return typeof ce=="string"||O(ce)?C(ce):O(ce.data)?C(ce.data):null})(_)),(Q=y.call(this,W))||(_ instanceof Uint8Array||T==="RGBA"||(ne=_,_=k(_)),Q=this["process"+T.toUpperCase()](_,u.call(this),W,(function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in n.image_compression?ce:j.NONE})(D),ne)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},V=n.__addimage__.convertBase64ToBinaryString=function(_,T){T=typeof T!="boolean"||T;var W,D="";if(typeof _=="string"){var Q;W=(Q=P(_))!==null&&Q!==void 0?Q:_;try{D=ru(W)}catch(ne){if(T)throw L(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};n.getImageProperties=function(_){var T,W,D="";if(m(_)&&(_=h(_)),typeof _=="string"&&i(_)===t&&((D=V(_,!1))===""&&(D=n.loadFile(_)||""),_=D),W=i(_),!f(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(_ instanceof Uint8Array||(_=k(_)),!(T=this["process"+W.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=W,T}})(et.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};et.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,i,r,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((s=d[f]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){s=d[m];var h=this.internal.pdfEscape,y=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(x.objId),j=s.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+a(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+h(S(s.contents))+")",r+=" /Popup "+w.objId+" 0 R",r+=" /P "+c.objId+" 0 R",r+=" /T ("+h(S(j))+") >>",x.content=r;var C=x.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+a(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+C,s.open&&(r+=" /Open true"),r+=" >>",w.content=r,this.internal.write(x.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+a(s.bounds.x)+" "+o(s.bounds.y)+" "+a(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var L=s.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(y(s.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(s.options.name){var P=this.annotations._nameMap[s.options.name];s.options.pageNumber=P.page,s.options.top=P.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",r="",s.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(y(s.options.url))+") >>";else if(s.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,r+=" /FitV "+s.options.left+"]";break;default:var O=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),r+=" /XYZ "+s.options.left+" "+O+" "+s.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,i,r,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:d(s),w:c(t+i),h:d(s+r)},options:a,type:"link"})},n.textWithLink=function(t,s,i,r){var a,o,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){o=r.maxWidth;var u=this.splitTextToSize(t,o).length;a=Math.ceil(d*u)}else o=c,a=d;return this.text(t,s,i,r),i+=.2*d,r.align==="center"&&(s-=c/2),r.align==="right"&&(s-=c),this.link(s,i-d,o,a,r),c},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(et.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=n.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(x){var w=0,S=t,j="",C=0;for(w=0;w<x.length;w+=1)S[x.charCodeAt(w)]!==void 0?(C++,typeof(S=S[x.charCodeAt(w)])=="number"&&(j+=String.fromCharCode(S),S=t,C=0),w===x.length-1&&(S=t,j+=x.charAt(w-(C-1)),w-=C-1,C=0)):(S=t,j+=x.charAt(w-C),w-=C,C=0);return j};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&s[x.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(x,w,S){return a(x)?r(x)===!1?-1:!d(x)||!a(w)&&!a(S)||!a(S)&&o(w)||o(x)&&!a(w)||o(x)&&c(w)||o(x)&&o(w)?0:u(x)&&a(w)&&!o(w)&&a(S)&&d(S)?3:o(x)||!a(S)?1:2:-1},h=function(x){var w=0,S=0,j=0,C="",L="",P="",O=(x=x||"").split("\\s+"),k=[];for(w=0;w<O.length;w+=1){for(k.push(""),S=0;S<O[w].length;S+=1)C=O[w][S],L=O[w][S-1],P=O[w][S+1],a(C)?(j=m(C,L,P),k[w]+=j!==-1?String.fromCharCode(e[C.charCodeAt(0)][j]):C):k[w]+=C;k[w]=f(k[w])}return k.join(" ")},y=n.__arabicParser__.processArabic=n.processArabic=function(){var x,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(w)){var j=0;for(S=[],j=0;j<w.length;j+=1)Array.isArray(w[j])?S.push([h(w[j][0]),w[j][1],w[j][2]]):S.push([h(w[j])]);x=S}else x=h(w);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",y])})(et.API),et.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(o){r=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var i;if((t=t||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(et.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,h=0,y=0,x=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var S=d.maxWidth;S>0?typeof c=="string"?c=this.splitTextToSize(c,S):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,L){return C.concat(w.splitTextToSize(L,S))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)h<(x=this.getStringUnitWidth(c[j],{font:f})*u)&&(h=x);return h!==0&&(y=c.length),{w:h/=m,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,d,u,f,m){if(s.call(this),!u)throw new Error("No data for PDF table.");var h,y,x,w,S=[],j=[],C=[],L={},P={},O=[],k=[],A=(m=m||{}).autoSize||!1,M=m.printHeaders!==!1,V=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,_=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,W=m.headerBackgroundColor||"#c8c8c8",D=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=D,this.setFontSize(V),f==null)j=S=Object.keys(u[0]),C=S.map(function(){return"left"});else if(Array.isArray(f)&&Ht(f[0])==="object")for(S=f.map(function(Se){return Se.name}),j=f.map(function(Se){return Se.prompt||Se.name||""}),C=f.map(function(Se){return Se.align||"left"}),h=0;h<f.length;h+=1)P[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(j=S=f,C=S.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<S.length;h+=1){for(L[w=S[h]]=u.map(function(Se){return Se[w]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(j[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=L[w],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)O.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[w]=Math.max.apply(null,O)+T+T,O=[]}if(M){var Q={};for(h=0;h<S.length;h+=1)Q[S[h]]={},Q[S[h]].text=j[h],Q[S[h]].align=C[h];var ne=o.call(this,Q,P);k=S.map(function(Se){return new r(c,d,P[Se],ne,Q[Se].text,void 0,Q[Se].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var ae=f.reduce(function(Se,ge){return Se[ge.name]=ge.align,Se},{});for(h=0;h<u.length;h+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:h,data:u[h]},this);var F=o.call(this,u[h],P);for(x=0;x<S.length;x+=1){var ce=u[h][S[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:h,col:x,data:ce},this),a.call(this,new r(c,d,P[S[x]],F,ce,h+2,ae[S[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(h){var y=c[h];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/m+u+u},this).reduce(function(h,y){return Math.max(h,y)},0)};n.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(et.API);var Y2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Z2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$p=G2(Z2),K2=[100,200,300,400,500,600,700,800,900],kP=G2(K2);function Yf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(r){return Y2[r=r||"normal"]?r:"normal"})(n.style),s=(function(r){return r?typeof r=="number"?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):r==="bold"?700:400:400})(n.weight),i=(function(r){return typeof $p[r=r||"normal"]=="number"?r:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,s].join(" ")}}}function S1(n,e,t,s){var i;for(i=t;i>=0&&i<e.length;i+=s)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=s)if(n[e[i]])return n[e[i]]}var NP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},k1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function N1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function _1(n){return n.trimLeft()}function _P(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function jP(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Ud,j1,A1,To,Vd,C1,L1,P1,Zf=["times"];function M1(n,e,t,s){var i=4,r=T1;switch(s){case et.API.image_compression.FAST:i=1,r=D1;break;case et.API.image_compression.MEDIUM:i=6,r=I1;break;case et.API.image_compression.SLOW:i=9,r=E1}n=(function(o,c,d,u){for(var f,m=o.length/c,h=new Uint8Array(o.length+m),y=[AP,D1,T1,I1,E1],x=0;x<m;x+=1){var w=x*c,S=o.subarray(w,w+c);if(u)h.set(u(S,d,f),w+x);else{for(var j=y.length,C=[],L=0;L<j;L+=1)C[L]=y[L](S,d,f);var P=LP(C.concat());h.set(C[P],w+x)}f=S}return h})(n,e,t,r);var a=Ip(n,{level:i});return et.API.__addimage__.arrayBufferToBinaryString(a)}function AP(n){var e=Array.apply([],n);return e.unshift(0),e}function D1(n,e){var t=n.length,s=[];s[0]=1;for(var i=0;i<t;i+=1){var r=n[i-e]||0;s[i+1]=n[i]-r+256&255}return s}function T1(n,e,t){var s=n.length,i=[];i[0]=2;for(var r=0;r<s;r+=1){var a=t&&t[r]||0;i[r+1]=n[r]-a+256&255}return i}function I1(n,e,t){var s=n.length,i=[];i[0]=3;for(var r=0;r<s;r+=1){var a=n[r-e]||0,o=t&&t[r]||0;i[r+1]=n[r]+256-(a+o>>>1)&255}return i}function E1(n,e,t){var s=n.length,i=[];i[0]=4;for(var r=0;r<s;r+=1){var a=CP(n[r-e]||0,t&&t[r]||0,t&&t[r-e]||0);i[r+1]=n[r]-a+256&255}return i}function CP(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),i=Math.abs(n-t),r=Math.abs(n+e-t-t);return s<=i&&s<=r?n:i<=r?e:t}function LP(n){var e=n.map(function(t){return t.reduce(function(s,i){return s+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Kf(n,e,t){var s=e*t,i=Math.floor(s/8),r=16-(s-8*i+t),a=(1<<t)-1;return J2(n,i)>>r&a}function O1(n,e,t,s){var i=t*s,r=Math.floor(i/8),a=16-(i-8*r+s),o=(1<<s)-1,c=(e&o)<<a;(function(d,u,f){if(u+1<d.byteLength)d.setUint16(u,f,!1);else{var m=f>>8&255;d.setUint8(u,m)}})(n,r,J2(n,r)&~(o<<a)&65535|c)}function J2(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function PP(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,i=n[e++],r=i>>7,a=1<<1+(7&i);n[e++],n[e++];var o=null,c=null;r&&(o=e,c=a,e+=3*a);var d=!0,u=[],f=0,m=null,h=0,y=null;for(this.width=t,this.height=s;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,y=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];f=n[e++]|n[e++]<<8,m=n[e++],1&x||(m=null),h=x>>2&7,e++;break;case 254:for(;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var w=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,L=n[e++],P=L>>6&1,O=1<<1+(7&L),k=o,A=c,M=!1;L>>7&&(M=!0,k=e,A=O,e+=3*O);var V=e;for(e++;;){var _;if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}u.push({x:w,y:S,width:j,height:C,has_local_palette:M,palette_offset:k,palette_size:A,data_offset:V,data_length:e-V,transparent_index:m,interlaced:!!P,delay:f,disposal:h});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,W){var D=this.frameInfo(T),Q=D.width*D.height,ne=new Uint8Array(Q);R1(n,D.data_offset,ne,Q);var ae=D.palette_offset,F=D.transparent_index;F===null&&(F=256);var ce=D.width,Se=t-ce,ge=ce,R=4*(D.y*t+D.x),U=4*((D.y+D.height)*t+D.x),H=R,te=4*Se;D.interlaced===!0&&(te+=4*t*7);for(var re=8,le=0,xe=ne.length;le<xe;++le){var me=ne[le];if(ge===0&&(ge=ce,(H+=te)>=U&&(te=4*Se+4*t*(re-1),H=R+(ce+Se)*(re<<1),re>>=1)),me===F)H+=4;else{var we=n[ae+3*me],Me=n[ae+3*me+1],Ee=n[ae+3*me+2];W[H++]=Ee,W[H++]=Me,W[H++]=we,W[H++]=255}--ge}},this.decodeAndBlitFrameRGBA=function(T,W){var D=this.frameInfo(T),Q=D.width*D.height,ne=new Uint8Array(Q);R1(n,D.data_offset,ne,Q);var ae=D.palette_offset,F=D.transparent_index;F===null&&(F=256);var ce=D.width,Se=t-ce,ge=ce,R=4*(D.y*t+D.x),U=4*((D.y+D.height)*t+D.x),H=R,te=4*Se;D.interlaced===!0&&(te+=4*t*7);for(var re=8,le=0,xe=ne.length;le<xe;++le){var me=ne[le];if(ge===0&&(ge=ce,(H+=te)>=U&&(te=4*Se+4*t*(re-1),H=R+(ce+Se)*(re<<1),re>>=1)),me===F)H+=4;else{var we=n[ae+3*me],Me=n[ae+3*me+1],Ee=n[ae+3*me+2];W[H++]=we,W[H++]=Me,W[H++]=Ee,W[H++]=255}--ge}}}function R1(n,e,t,s){for(var i=n[e++],r=1<<i,a=r+1,o=a+1,c=i+1,d=(1<<c)-1,u=0,f=0,m=0,h=n[e++],y=new Int32Array(4096),x=null;;){for(;u<16&&h!==0;)f|=n[e++]<<u,u+=8,h===1?h=n[e++]:--h;if(u<c)break;var w=f&d;if(f>>=c,u-=c,w!==r){if(w===a)break;for(var S=w<o?w:x,j=0,C=S;C>r;)C=y[C]>>8,++j;var L=C;if(m+j+(S!==w?1:0)>s)return void Xt.log("Warning, gif stream longer than expected.");t[m++]=L;var P=m+=j;for(S!==w&&(t[m++]=L),C=S;j--;)C=y[C],t[--P]=255&C,C>>=8;x!==null&&o<4096&&(y[o++]=x<<8|L,o>=d+1&&c<12&&(++c,d=d<<1|1)),x=w}else o=a+1,d=(1<<(c=i+1))-1,x=null}return m!==s&&Xt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jf(n){var e,t,s,i,r,a=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),m=new Array(65535),h=new Array(64),y=new Array(64),x=[],w=0,S=7,j=new Array(64),C=new Array(64),L=new Array(64),P=new Array(256),O=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(R,U){for(var H=0,te=0,re=new Array,le=1;le<=16;le++){for(var xe=1;xe<=R[le];xe++)re[U[te]]=[],re[U[te]][0]=H,re[U[te]][1]=le,te++,H++;H*=2}return re}function ae(R){for(var U=R[0],H=R[1]-1;H>=0;)U&1<<H&&(w|=1<<S),H--,--S<0&&(w==255?(F(255),F(0)):F(w),S=7,w=0)}function F(R){x.push(R)}function ce(R){F(R>>8&255),F(255&R)}function Se(R,U,H,te,re){for(var le,xe=re[0],me=re[240],we=(function(Ie,K){var ee,he,ke,Ce,ve,De,nt,Be,We,lt,Ve=0;for(We=0;We<8;++We){ee=Ie[Ve],he=Ie[Ve+1],ke=Ie[Ve+2],Ce=Ie[Ve+3],ve=Ie[Ve+4],De=Ie[Ve+5],nt=Ie[Ve+6];var Yt=ee+(Be=Ie[Ve+7]),It=ee-Be,Je=he+nt,xt=he-nt,$t=ke+De,ct=ke-De,Mt=Ce+ve,Nt=Ce-ve,Sn=Yt+Mt,$n=Yt-Mt,Kt=Je+$t,vt=Je-$t;Ie[Ve]=Sn+Kt,Ie[Ve+4]=Sn-Kt;var Wt=.707106781*(vt+$n);Ie[Ve+2]=$n+Wt,Ie[Ve+6]=$n-Wt;var ba=.382683433*((Sn=Nt+ct)-(vt=xt+It)),cs=.5411961*Sn+ba,tr=1.306562965*vt+ba,Di=.707106781*(Kt=ct+xt),ut=It+Di,nr=It-Di;Ie[Ve+5]=nr+cs,Ie[Ve+3]=nr-cs,Ie[Ve+1]=ut+tr,Ie[Ve+7]=ut-tr,Ve+=8}for(Ve=0,We=0;We<8;++We){ee=Ie[Ve],he=Ie[Ve+8],ke=Ie[Ve+16],Ce=Ie[Ve+24],ve=Ie[Ve+32],De=Ie[Ve+40],nt=Ie[Ve+48];var sr=ee+(Be=Ie[Ve+56]),ti=ee-Be,ni=he+nt,yn=he-nt,Qn=ke+De,ss=ke-De,wa=Ce+ve,Fr=Ce-ve,fi=sr+wa,Ti=sr-wa,pi=ni+Qn,mi=ni-Qn;Ie[Ve]=fi+pi,Ie[Ve+32]=fi-pi;var si=.707106781*(mi+Ti);Ie[Ve+16]=Ti+si,Ie[Ve+48]=Ti-si;var Sa=.382683433*((fi=Fr+ss)-(mi=yn+ti)),Ii=.5411961*fi+Sa,ka=1.306562965*mi+Sa,co=.707106781*(pi=ss+yn),uo=ti+co,ho=ti-co;Ie[Ve+40]=ho+Ii,Ie[Ve+24]=ho-Ii,Ie[Ve+8]=uo+ka,Ie[Ve+56]=uo-ka,Ve++}for(We=0;We<64;++We)lt=Ie[We]*K[We],h[We]=lt>0?lt+.5|0:lt-.5|0;return h})(R,U),Me=0;Me<64;++Me)y[k[Me]]=we[Me];var Ee=y[0]-H;H=y[0],Ee==0?ae(te[0]):(ae(te[m[le=32767+Ee]]),ae(f[le]));for(var Oe=63;Oe>0&&y[Oe]==0;)Oe--;if(Oe==0)return ae(xe),H;for(var ye,J=1;J<=Oe;){for(var Pt=J;y[J]==0&&J<=Oe;)++J;var wt=J-Pt;if(wt>=16){ye=wt>>4;for(var at=1;at<=ye;++at)ae(me);wt&=15}le=32767+y[J],ae(re[(wt<<4)+m[le]]),ae(f[le]),J++}return Oe!=63&&ae(xe),H}function ge(R){R=Math.min(Math.max(R,1),100),r!=R&&((function(U){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var re=a((H[te]*U+50)/100);re=Math.min(Math.max(re,1),255),o[k[te]]=re}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var me=a((le[xe]*U+50)/100);me=Math.min(Math.max(me,1),255),c[k[xe]]=me}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ee=0;Ee<8;Ee++)for(var Oe=0;Oe<8;Oe++)d[Me]=1/(o[k[Me]]*we[Ee]*we[Oe]*8),u[Me]=1/(c[k[Me]]*we[Ee]*we[Oe]*8),Me++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),r=R)}this.encode=function(R,U){U&&ge(U),x=new Array,w=0,S=7,ce(65496),ce(65504),ce(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),ce(1),ce(1),F(0),F(0),(function(){ce(65499),ce(132),F(0);for(var he=0;he<64;he++)F(o[he]);F(1);for(var ke=0;ke<64;ke++)F(c[ke])})(),(function(he,ke){ce(65472),ce(17),F(8),ce(ke),ce(he),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)})(R.width,R.height),(function(){ce(65476),ce(418),F(0);for(var he=0;he<16;he++)F(A[he+1]);for(var ke=0;ke<=11;ke++)F(M[ke]);F(16);for(var Ce=0;Ce<16;Ce++)F(V[Ce+1]);for(var ve=0;ve<=161;ve++)F(_[ve]);F(1);for(var De=0;De<16;De++)F(T[De+1]);for(var nt=0;nt<=11;nt++)F(W[nt]);F(17);for(var Be=0;Be<16;Be++)F(D[Be+1]);for(var We=0;We<=161;We++)F(Q[We])})(),ce(65498),ce(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var H=0,te=0,re=0;w=0,S=7,this.encode.displayName="_encode_";for(var le,xe,me,we,Me,Ee,Oe,ye,J,Pt=R.data,wt=R.width,at=R.height,Ie=4*wt,K=0;K<at;){for(le=0;le<Ie;){for(Me=Ie*K+le,Oe=-1,ye=0,J=0;J<64;J++)Ee=Me+(ye=J>>3)*Ie+(Oe=4*(7&J)),K+ye>=at&&(Ee-=Ie*(K+1+ye-at)),le+Oe>=Ie&&(Ee-=le+Oe-Ie+4),xe=Pt[Ee++],me=Pt[Ee++],we=Pt[Ee++],j[J]=(O[xe]+O[me+256|0]+O[we+512|0]>>16)-128,C[J]=(O[xe+768|0]+O[me+1024|0]+O[we+1280|0]>>16)-128,L[J]=(O[xe+1280|0]+O[me+1536|0]+O[we+1792|0]>>16)-128;H=Se(j,d,H,e,s),te=Se(C,u,te,t,i),re=Se(L,u,re,t,i),le+=32}K+=8}if(S>=0){var ee=[];ee[1]=S+1,ee[0]=(1<<S+1)-1,ae(ee)}return ce(65497),new Uint8Array(x)},n=n||50,(function(){for(var R=String.fromCharCode,U=0;U<256;U++)P[U]=R(U)})(),e=ne(A,M),t=ne(T,W),s=ne(V,_),i=ne(D,Q),(function(){for(var R=1,U=2,H=1;H<=15;H++){for(var te=R;te<U;te++)m[32767+te]=H,f[32767+te]=[],f[32767+te][1]=H,f[32767+te][0]=te;for(var re=-(U-1);re<=-R;re++)m[32767+re]=H,f[32767+re]=[],f[32767+re][1]=H,f[32767+re][0]=U-1+re;R<<=1,U<<=1}})(),(function(){for(var R=0;R<256;R++)O[R]=19595*R,O[R+256|0]=38470*R,O[R+512|0]=7471*R+32768,O[R+768|0]=-11059*R,O[R+1024|0]=-21709*R,O[R+1280|0]=32768*R+8421375,O[R+1536|0]=-27439*R,O[R+1792|0]=-5329*R})(),ge(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function F1(n){function e(M){if(!M)throw Error("assert :P")}function t(M,V,_){for(var T=0;4>T;T++)if(M[V+T]!=_.charCodeAt(T))return!0;return!1}function s(M,V,_,T,W){for(var D=0;D<W;D++)M[V+D]=_[T+D]}function i(M,V,_,T){for(var W=0;W<T;W++)M[V+W]=_}function r(M){return new Int32Array(M)}function a(M,V){for(var _=[],T=0;T<M;T++)_.push(new V);return _}function o(M,V){var _=[];return(function T(W,D,Q){for(var ne=Q[D],ae=0;ae<ne&&(W.push(Q.length>D+1?[]:new V),!(Q.length<D+1));ae++)T(W[ae],D+1,Q)})(_,0,M),_}var c=function(){var M=this;function V(p,g){for(var b=1<<g-1>>>0;p&b;)b>>>=1;return b?(p&b-1)+b:p}function _(p,g,b,N,I){e(!(N%b));do p[g+(N-=b)]=I;while(0<N)}function T(p,g,b,N,I){if(e(2328>=I),512>=I)var z=r(512);else if((z=r(I))==null)return 0;return(function(B,$,q,G,ie,pe){var Y,oe,ue=$,be=1<<q,fe=r(16),Ne=r(16);for(e(ie!=0),e(G!=null),e(B!=null),e(0<q),oe=0;oe<ie;++oe){if(15<G[oe])return 0;++fe[G[oe]]}if(fe[0]==ie)return 0;for(Ne[1]=0,Y=1;15>Y;++Y){if(fe[Y]>1<<Y)return 0;Ne[Y+1]=Ne[Y]+fe[Y]}for(oe=0;oe<ie;++oe)Y=G[oe],0<G[oe]&&(pe[Ne[Y]++]=oe);if(Ne[15]==1)return(G=new W).g=0,G.value=pe[0],_(B,ue,1,be,G),be;var je,Te=-1,Le=be-1,st=0,Ue=1,At=1,Qe=1<<q;for(oe=0,Y=1,ie=2;Y<=q;++Y,ie<<=1){if(Ue+=At<<=1,0>(At-=fe[Y]))return 0;for(;0<fe[Y];--fe[Y])(G=new W).g=Y,G.value=pe[oe++],_(B,ue+st,ie,Qe,G),st=V(st,Y)}for(Y=q+1,ie=2;15>=Y;++Y,ie<<=1){if(Ue+=At<<=1,0>(At-=fe[Y]))return 0;for(;0<fe[Y];--fe[Y]){if(G=new W,(st&Le)!=Te){for(ue+=Qe,je=1<<(Te=Y)-q;15>Te&&!(0>=(je-=fe[Te]));)++Te,je<<=1;be+=Qe=1<<(je=Te-q),B[$+(Te=st&Le)].g=je+q,B[$+Te].value=ue-$-Te}G.g=Y-q,G.value=pe[oe++],_(B,ue+(st>>q),ie,Qe,G),st=V(st,Y)}}return Ue!=2*Ne[15]-1?0:be})(p,g,b,N,I,z)}function W(){this.value=this.g=0}function D(){this.value=this.g=0}function Q(){this.G=a(5,W),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Ri,D)}function ne(p,g,b,N){e(p!=null),e(g!=null),e(2147483648>N),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=g,p.pa=b,p.Jd=g,p.Yc=b+N,p.Zc=4<=N?b+N-4+1:b,xe(p)}function ae(p,g){for(var b=0;0<g--;)b|=we(p,128)<<g;return b}function F(p,g){var b=ae(p,g);return me(p)?-b:b}function ce(p,g,b,N){var I,z=0;for(e(p!=null),e(g!=null),e(4294967288>N),p.Sb=N,p.Ra=0,p.u=0,p.h=0,4<N&&(N=4),I=0;I<N;++I)z+=g[b+I]<<8*I;p.Ra=z,p.bb=N,p.oa=g,p.pa=b}function Se(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Vr-8>>>0,++p.bb,p.u-=8;te(p)&&(p.h=1,p.u=0)}function ge(p,g){if(e(0<=g),!p.h&&g<=Ml){var b=H(p)&Ur[g];return p.u+=g,Se(p),b}return p.h=1,p.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(p){return p.Ra>>>(p.u&Vr-1)>>>0}function te(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Vr}function re(p,g){p.u=g,p.h=te(p)}function le(p){p.u>=Nn&&(e(p.u>=Nn),Se(p))}function xe(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function me(p){return ae(p,1)}function we(p,g){var b=p.Ca;0>p.b&&xe(p);var N=p.b,I=b*g>>>8,z=(p.I>>>N>I)+0;for(z?(b-=I,p.I-=I+1<<N>>>0):b=I+1,N=b,I=0;256<=N;)I+=8,N>>=8;return N=7^I+Uh[N],p.b-=N,p.Ca=(b<<N)-1,z}function Me(p,g,b){p[g+0]=b>>24&255,p[g+1]=b>>16&255,p[g+2]=b>>8&255,p[g+3]=255&b}function Ee(p,g){return p[g+0]|p[g+1]<<8}function Oe(p,g){return Ee(p,g)|p[g+2]<<16}function ye(p,g){return Ee(p,g)|Ee(p,g+2)<<16}function J(p,g){var b=1<<g;return e(p!=null),e(0<g),p.X=r(b),p.X==null?0:(p.Mb=32-g,p.Xa=g,1)}function Pt(p,g){e(p!=null),e(g!=null),e(p.Xa==g.Xa),s(g.X,0,p.X,0,1<<g.Xa)}function wt(){this.X=[],this.Xa=this.Mb=0}function at(p,g,b,N){e(b!=null),e(N!=null);var I=b[0],z=N[0];return I==0&&(I=(p*z+g/2)/g),z==0&&(z=(g*I+p/2)/p),0>=I||0>=z?0:(b[0]=I,N[0]=z,1)}function Ie(p,g){return p+(1<<g)-1>>>g}function K(p,g){return((4278255360&p)+(4278255360&g)>>>0&4278255360)+((16711935&p)+(16711935&g)>>>0&16711935)>>>0}function ee(p,g){M[g]=function(b,N,I,z,B,$,q){var G;for(G=0;G<B;++G){var ie=M[p]($[q+G-1],I,z+G);$[q+G]=K(b[N+G],ie)}}}function he(){this.ud=this.hd=this.jd=0}function ke(p,g){return((4278124286&(p^g))>>>1)+(p&g)>>>0}function Ce(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function ve(p,g){return Ce(p+(p-g+.5>>1))}function De(p,g,b){return Math.abs(g-b)-Math.abs(p-b)}function nt(p,g,b,N,I,z,B){for(N=z[B-1],b=0;b<I;++b)z[B+b]=N=K(p[g+b],N)}function Be(p,g,b,N,I){var z;for(z=0;z<b;++z){var B=p[g+z],$=B>>8&255,q=16711935&(q=(q=16711935&B)+(($<<16)+$));N[I+z]=(4278255360&B)+q>>>0}}function We(p,g){g.jd=255&p,g.hd=p>>8&255,g.ud=p>>16&255}function lt(p,g,b,N,I,z){var B;for(B=0;B<N;++B){var $=g[b+B],q=$>>>8,G=$,ie=255&(ie=(ie=$>>>16)+((p.jd<<24>>24)*(q<<24>>24)>>>5));G=255&(G=(G+=(p.hd<<24>>24)*(q<<24>>24)>>>5)+((p.ud<<24>>24)*(ie<<24>>24)>>>5)),I[z+B]=(4278255360&$)+(ie<<16)+G}}function Ve(p,g,b,N,I){M[g]=function(z,B,$,q,G,ie,pe,Y,oe){for(q=pe;q<Y;++q)for(pe=0;pe<oe;++pe)G[ie++]=I($[N(z[B++])])},M[p]=function(z,B,$,q,G,ie,pe){var Y=8>>z.b,oe=z.Ea,ue=z.K[0],be=z.w;if(8>Y)for(z=(1<<z.b)-1,be=(1<<Y)-1;B<$;++B){var fe,Ne=0;for(fe=0;fe<oe;++fe)fe&z||(Ne=N(q[G++])),ie[pe++]=I(ue[Ne&be]),Ne>>=Y}else M["VP8LMapColor"+b](q,G,ue,be,ie,pe,B,$,oe)}}function Yt(p,g,b,N,I){for(b=g+b;g<b;){var z=p[g++];N[I++]=z>>16&255,N[I++]=z>>8&255,N[I++]=255&z}}function It(p,g,b,N,I){for(b=g+b;g<b;){var z=p[g++];N[I++]=z>>16&255,N[I++]=z>>8&255,N[I++]=255&z,N[I++]=z>>24&255}}function Je(p,g,b,N,I){for(b=g+b;g<b;){var z=(B=p[g++])>>16&240|B>>12&15,B=240&B|B>>28&15;N[I++]=z,N[I++]=B}}function xt(p,g,b,N,I){for(b=g+b;g<b;){var z=(B=p[g++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;N[I++]=z,N[I++]=B}}function $t(p,g,b,N,I){for(b=g+b;g<b;){var z=p[g++];N[I++]=255&z,N[I++]=z>>8&255,N[I++]=z>>16&255}}function ct(p,g,b,N,I,z){if(z==0)for(b=g+b;g<b;)Me(N,((z=p[g++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),I+=32;else s(N,I,p,g,b)}function Mt(p,g){M[g][0]=M[p+"0"],M[g][1]=M[p+"1"],M[g][2]=M[p+"2"],M[g][3]=M[p+"3"],M[g][4]=M[p+"4"],M[g][5]=M[p+"5"],M[g][6]=M[p+"6"],M[g][7]=M[p+"7"],M[g][8]=M[p+"8"],M[g][9]=M[p+"9"],M[g][10]=M[p+"10"],M[g][11]=M[p+"11"],M[g][12]=M[p+"12"],M[g][13]=M[p+"13"],M[g][14]=M[p+"0"],M[g][15]=M[p+"0"]}function Nt(p){return p==Gh||p==Yh||p==ld||p==Zh}function Sn(){this.eb=[],this.size=this.A=this.fb=0}function $n(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sn,this.f.kb=new $n,this.sd=null}function vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ba(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function cs(p,g){var b=p.T,N=g.ba.f.RGBA,I=N.eb,z=N.fb+p.ka*N.A,B=oi[g.ba.S],$=p.y,q=p.O,G=p.f,ie=p.N,pe=p.ea,Y=p.W,oe=g.cc,ue=g.dc,be=g.Mc,fe=g.Nc,Ne=p.ka,je=p.ka+p.T,Te=p.U,Le=Te+1>>1;for(Ne==0?B($,q,null,null,G,ie,pe,Y,G,ie,pe,Y,I,z,null,null,Te):(B(g.ec,g.fc,$,q,oe,ue,be,fe,G,ie,pe,Y,I,z-N.A,I,z,Te),++b);Ne+2<je;Ne+=2)oe=G,ue=ie,be=pe,fe=Y,ie+=p.Rc,Y+=p.Rc,z+=2*N.A,B($,(q+=2*p.fa)-p.fa,$,q,oe,ue,be,fe,G,ie,pe,Y,I,z-N.A,I,z,Te);return q+=p.fa,p.j+je<p.o?(s(g.ec,g.fc,$,q,Te),s(g.cc,g.dc,G,ie,Le),s(g.Mc,g.Nc,pe,Y,Le),b--):1&je||B($,q,null,null,G,ie,pe,Y,G,ie,pe,Y,I,z+N.A,null,null,Te),b}function tr(p,g,b){var N=p.F,I=[p.J];if(N!=null){var z=p.U,B=g.ba.S,$=B==od||B==ld;g=g.ba.f.RGBA;var q=[0],G=p.ka;q[0]=p.T,p.Kb&&(G==0?--q[0]:(--G,I[0]-=p.width),p.j+p.ka+p.T==p.o&&(q[0]=p.o-p.j-G));var ie=g.eb;G=g.fb+G*g.A,p=lg(N,I[0],p.width,z,q,ie,G+($?0:3),g.A),e(b==q),p&&Nt(B)&&El(ie,G,$,z,q,g.A)}return 0}function Di(p){var g=p.ma,b=g.ba.S,N=11>b,I=b==rd||b==ad||b==od||b==Hh||b==12||Nt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Ms(g.Oa,p,I?11:12))return 0;if(I&&Nt(b)&&Al(),p.da)alert("todo:use_scaling");else{if(N){if(g.Ib=ba,p.Kb){if(b=p.U+1>>1,g.memory=r(p.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+p.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=cs,Al()}}else alert("todo:EmitYUV");I&&(g.Jb=tr,N&&Da())}if(N&&!Ng){for(p=0;256>p;++p)M5[p]=89858*(p-128)+dd>>cd,I5[p]=-22014*(p-128)+dd,T5[p]=-45773*(p-128),D5[p]=113618*(p-128)+dd>>cd;for(p=Rl;p<Qh;++p)g=76283*(p-16)+dd>>cd,E5[p-Rl]=qn(g,255),O5[p-Rl]=qn(g+8>>4,15);Ng=1}return 1}function ut(p){var g=p.ma,b=p.U,N=p.T;return e(!(1&p.ka)),0>=b||0>=N?0:(b=g.Ib(p,g),g.Jb!=null&&g.Jb(p,g,b),g.Dc+=b,1)}function nr(p){p.ma.memory=null}function sr(p,g,b,N){return ge(p,8)!=47?0:(g[0]=ge(p,14)+1,b[0]=ge(p,14)+1,N[0]=ge(p,1),ge(p,3)!=0?0:!p.h)}function ti(p,g){if(4>p)return p+1;var b=p-2>>1;return(2+(1&p)<<b)+ge(g,b)+1}function ni(p,g){return 120<g?g-120:1<=(b=((b=y5[g-1])>>4)*p+(8-(15&b)))?b:1;var b}function yn(p,g,b){var N=H(b),I=p[g+=255&N].g-8;return 0<I&&(re(b,b.u+8),N=H(b),g+=p[g].value,g+=N&(1<<I)-1),re(b,b.u+p[g].g),p[g].value}function Qn(p,g,b){return b.g+=p.g,b.value+=p.value<<g>>>0,e(8>=b.g),p.g}function ss(p,g,b){var N=p.xc;return e((g=N==0?0:p.vc[p.md*(b>>N)+(g>>N)])<p.Wb),p.Ya[g]}function wa(p,g,b,N){var I=p.ab,z=p.c*g,B=p.C;g=B+g;var $=b,q=N;for(N=p.Ta,b=p.Ua;0<I--;){var G=p.gc[I],ie=B,pe=g,Y=$,oe=q,ue=(q=N,$=b,G.Ea);switch(e(ie<pe),e(pe<=G.nc),G.hc){case 2:So(Y,oe,(pe-ie)*ue,q,$);break;case 0:var be=ie,fe=pe,Ne=q,je=$,Te=(Qe=G).Ea;be==0&&(Fi(Y,oe,null,null,1,Ne,je),nt(Y,oe+1,0,0,Te-1,Ne,je+1),oe+=Te,je+=Te,++be);for(var Le=1<<Qe.b,st=Le-1,Ue=Ie(Te,Qe.b),At=Qe.K,Qe=Qe.w+(be>>Qe.b)*Ue;be<fe;){var Et=At,Un=Qe,Ct=1;for(zi(Y,oe,Ne,je-Te,1,Ne,je);Ct<Te;){var Xe=(Ct&~st)+Le;Xe>Te&&(Xe=Te),(0,Ea[Et[Un++]>>8&15])(Y,oe+ +Ct,Ne,je+Ct-Te,Xe-Ct,Ne,je+Ct),Ct=Xe}oe+=Te,je+=Te,++be&st||(Qe+=Ue)}pe!=G.nc&&s(q,$-ue,q,$+(pe-ie-1)*ue,ue);break;case 1:for(ue=Y,fe=oe,Te=(Y=G.Ea)-(je=Y&~(Ne=(oe=1<<G.b)-1)),be=Ie(Y,G.b),Le=G.K,G=G.w+(ie>>G.b)*be;ie<pe;){for(st=Le,Ue=G,At=new he,Qe=fe+je,Et=fe+Y;fe<Qe;)We(st[Ue++],At),dr(At,ue,fe,oe,q,$),fe+=oe,$+=oe;fe<Et&&(We(st[Ue++],At),dr(At,ue,fe,Te,q,$),fe+=Te,$+=Te),++ie&Ne||(G+=be)}break;case 3:if(Y==q&&oe==$&&0<G.b){for(fe=q,Y=ue=$+(pe-ie)*ue-(je=(pe-ie)*Ie(G.Ea,G.b)),oe=q,Ne=$,be=[],je=(Te=je)-1;0<=je;--je)be[je]=oe[Ne+je];for(je=Te-1;0<=je;--je)fe[Y+je]=be[je];Dl(G,ie,pe,q,ue,q,$)}else Dl(G,ie,pe,Y,oe,q,$)}$=N,q=b}q!=b&&s(N,b,$,q,z)}function Fr(p,g){var b=p.V,N=p.Ba+p.c*p.C,I=g-p.C;if(e(g<=p.l.o),e(16>=I),0<I){var z=p.l,B=p.Ta,$=p.Ua,q=z.width;if(wa(p,I,b,N),I=$=[$],e((b=p.C)<(N=g)),e(z.v<z.va),N>z.o&&(N=z.o),b<z.j){var G=z.j-b;b=z.j,I[0]+=G*q}if(b>=N?b=0:(I[0]+=4*z.v,z.ka=b-z.j,z.U=z.va-z.v,z.T=N-b,b=1),b){if($=$[0],11>(b=p.ca).S){var ie=b.f.RGBA,pe=(N=b.S,I=z.U,z=z.T,G=ie.eb,ie.A),Y=z;for(ie=ie.fb+p.Ma*ie.A;0<Y--;){var oe=B,ue=$,be=I,fe=G,Ne=ie;switch(N){case id:Tl(oe,ue,be,fe,Ne);break;case rd:qs(oe,ue,be,fe,Ne);break;case Gh:qs(oe,ue,be,fe,Ne),El(fe,Ne,0,be,1,0);break;case mg:tn(oe,ue,be,fe,Ne);break;case ad:ct(oe,ue,be,fe,Ne,1);break;case Yh:ct(oe,ue,be,fe,Ne,1),El(fe,Ne,0,be,1,0);break;case od:ct(oe,ue,be,fe,Ne,0);break;case ld:ct(oe,ue,be,fe,Ne,0),El(fe,Ne,1,be,1,0);break;case Hh:Bi(oe,ue,be,fe,Ne);break;case Zh:Bi(oe,ue,be,fe,Ne),og(fe,Ne,be,1,0);break;case gg:en(oe,ue,be,fe,Ne);break;default:e(0)}$+=q,ie+=pe}p.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=b.height)}}p.C=g,e(p.C<=p.i)}function fi(p){var g;if(0<p.ua)return 0;for(g=0;g<p.Wb;++g){var b=p.Ya[g].G,N=p.Ya[g].H;if(0<b[1][N[1]+0].g||0<b[2][N[2]+0].g||0<b[3][N[3]+0].g)return 0}return 1}function Ti(p,g,b,N,I,z){if(p.Z!=0){var B=p.qd,$=p.rd;for(e(Gr[p.Z]!=null);g<b;++g)Gr[p.Z](B,$,N,I,N,I,z),B=N,$=I,I+=z;p.qd=B,p.rd=$}}function pi(p,g){var b=p.l.ma,N=b.Z==0||b.Z==1?p.l.j:p.C;if(N=p.C<N?N:p.C,e(g<=p.l.o),g>N){var I=p.l.width,z=b.ca,B=b.tb+I*N,$=p.V,q=p.Ba+p.c*N,G=p.gc;e(p.ab==1),e(G[0].hc==3),No(G[0],N,g,$,q,z,B),Ti(b,N,g,z,B,I)}p.C=p.Ma=g}function mi(p,g,b,N,I,z,B){var $=p.$/N,q=p.$%N,G=p.m,ie=p.s,pe=b+p.$,Y=pe;I=b+N*I;var oe=b+N*z,ue=280+ie.ua,be=p.Pb?$:16777216,fe=0<ie.ua?ie.Wa:null,Ne=ie.wc,je=pe<oe?ss(ie,q,$):null;e(p.C<z),e(oe<=I);var Te=!1;e:for(;;){for(;Te||pe<oe;){var Le=0;if($>=be){var st=pe-b;e((be=p).Pb),be.wd=be.m,be.xd=st,0<be.s.ua&&Pt(be.s.Wa,be.s.vb),be=$+v5}if(q&Ne||(je=ss(ie,q,$)),e(je!=null),je.Qb&&(g[pe]=je.qb,Te=!0),!Te)if(le(G),je.jc){Le=G,st=g;var Ue=pe,At=je.pd[H(Le)&Ri-1];e(je.jc),256>At.g?(re(Le,Le.u+At.g),st[Ue]=At.value,Le=0):(re(Le,Le.u+At.g-256),e(256<=At.value),Le=At.value),Le==0&&(Te=!0)}else Le=yn(je.G[0],je.H[0],G);if(G.h)break;if(Te||256>Le){if(!Te)if(je.nd)g[pe]=(je.qb|Le<<8)>>>0;else{if(le(G),Te=yn(je.G[1],je.H[1],G),le(G),st=yn(je.G[2],je.H[2],G),Ue=yn(je.G[3],je.H[3],G),G.h)break;g[pe]=(Ue<<24|Te<<16|Le<<8|st)>>>0}if(Te=!1,++pe,++q>=N&&(q=0,++$,B!=null&&$<=z&&!($%16)&&B(p,$),fe!=null))for(;Y<pe;)Le=g[Y++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le}else if(280>Le){if(Le=ti(Le-256,G),st=yn(je.G[4],je.H[4],G),le(G),st=ni(N,st=ti(st,G)),G.h)break;if(pe-b<st||I-pe<Le)break e;for(Ue=0;Ue<Le;++Ue)g[pe+Ue]=g[pe+Ue-st];for(pe+=Le,q+=Le;q>=N;)q-=N,++$,B!=null&&$<=z&&!($%16)&&B(p,$);if(e(pe<=I),q&Ne&&(je=ss(ie,q,$)),fe!=null)for(;Y<pe;)Le=g[Y++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le}else{if(!(Le<ue))break e;for(Te=Le-280,e(fe!=null);Y<pe;)Le=g[Y++],fe.X[(506832829*Le&4294967295)>>>fe.Mb]=Le;Le=pe,e(!(Te>>>(st=fe).Xa)),g[Le]=st.X[Te],Te=!0}Te||e(G.h==te(G))}if(p.Pb&&G.h&&pe<I)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Pt(p.s.vb,p.s.Wa);else{if(G.h)break e;B?.(p,$>z?z:$),p.a=0,p.$=pe-b}return 1}return p.a=3,0}function si(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var g=p.Wa;g!=null&&(g.X=null),p.vb=null,e(p!=null)}function Sa(){var p=new mn;return p==null?null:(p.a=0,p.xb=vg,Mt("Predictor","VP8LPredictors"),Mt("Predictor","VP8LPredictors_C"),Mt("PredictorAdd","VP8LPredictorsAdd"),Mt("PredictorAdd","VP8LPredictorsAdd_C"),So=Be,dr=lt,Tl=Yt,qs=It,Bi=Je,en=xt,tn=$t,M.VP8LMapColor32b=ko,M.VP8LMapColor8b=Ia,p)}function Ii(p,g,b,N,I){var z=1,B=[p],$=[g],q=N.m,G=N.s,ie=null,pe=0;e:for(;;){if(b)for(;z&&ge(q,1);){var Y=B,oe=$,ue=N,be=1,fe=ue.m,Ne=ue.gc[ue.ab],je=ge(fe,2);if(ue.Oc&1<<je)z=0;else{switch(ue.Oc|=1<<je,Ne.hc=je,Ne.Ea=Y[0],Ne.nc=oe[0],Ne.K=[null],++ue.ab,e(4>=ue.ab),je){case 0:case 1:Ne.b=ge(fe,3)+2,be=Ii(Ie(Ne.Ea,Ne.b),Ie(Ne.nc,Ne.b),0,ue,Ne.K),Ne.K=Ne.K[0];break;case 3:var Te,Le=ge(fe,8)+1,st=16<Le?0:4<Le?1:2<Le?2:3;if(Y[0]=Ie(Ne.Ea,st),Ne.b=st,Te=be=Ii(Le,1,0,ue,Ne.K)){var Ue,At=Le,Qe=Ne,Et=1<<(8>>Qe.b),Un=r(Et);if(Un==null)Te=0;else{var Ct=Qe.K[0],Xe=Qe.w;for(Un[0]=Qe.K[0][0],Ue=1;Ue<1*At;++Ue)Un[Ue]=K(Ct[Xe+Ue],Un[Ue-1]);for(;Ue<4*Et;++Ue)Un[Ue]=0;Qe.K[0]=null,Qe.K[0]=Un,Te=1}}be=Te;break;case 2:break;default:e(0)}z=be}}if(B=B[0],$=$[0],z&&ge(q,1)&&!(z=1<=(pe=ge(q,4))&&11>=pe)){N.a=3;break e}var Re;if(Re=z)t:{var An,_t,Ot,an=N,rs=B,ks=$,xn=pe,ds=b,Ns=an.m,Vn=an.s,Rt=[null],qt=1,vn=0,Ut=x5[xn];n:for(;;){if(ds&&ge(Ns,1)){var as=ge(Ns,3)+2,vi=Ie(rs,as),Cn=Ie(ks,as),Ts=vi*Cn;if(!Ii(vi,Cn,0,an,Rt))break n;for(Rt=Rt[0],Vn.xc=as,An=0;An<Ts;++An){var Jt=Rt[An]>>8&65535;Rt[An]=Jt,Jt>=qt&&(qt=Jt+1)}}if(Ns.h)break n;for(_t=0;5>_t;++_t){var Hn=yg[_t];!_t&&0<xn&&(Hn+=1<<xn),vn<Hn&&(vn=Hn)}var Vs=a(qt*Ut,W),_s=qt,Hs=a(_s,Q);if(Hs==null)var Gs=null;else e(65536>=_s),Gs=Hs;var Is=r(vn);if(Gs==null||Is==null||Vs==null){an.a=1;break n}var Ys=Vs;for(An=Ot=0;An<qt;++An){var nn=Gs[An],Zs=nn.G,bi=nn.H,Oa=0,fr=1,os=0;for(_t=0;5>_t;++_t){Hn=yg[_t],Zs[_t]=Ys,bi[_t]=Ot,!_t&&0<xn&&(Hn+=1<<xn);i:{var hd,Xh=Hn,fd=an,Fl=Is,z5=Ys,B5=Ot,ef=0,Yr=fd.m,$5=ge(Yr,1);if(i(Fl,0,0,Xh),$5){var W5=ge(Yr,1)+1,q5=ge(Yr,1),Ag=ge(Yr,q5==0?1:8);Fl[Ag]=1,W5==2&&(Fl[Ag=ge(Yr,8)]=1);var pd=1}else{var Cg=r(19),Lg=ge(Yr,4)+4;if(19<Lg){fd.a=3;var md=0;break i}for(hd=0;hd<Lg;++hd)Cg[g5[hd]]=ge(Yr,3);var tf=void 0,zl=void 0,Pg=fd,U5=Cg,gd=Xh,Mg=Fl,nf=0,Zr=Pg.m,Dg=8,Tg=a(128,W);s:for(;T(Tg,0,7,U5,19);){if(ge(Zr,1)){var V5=2+2*ge(Zr,3);if((tf=2+ge(Zr,V5))>gd)break s}else tf=gd;for(zl=0;zl<gd&&tf--;){le(Zr);var Ig=Tg[0+(127&H(Zr))];re(Zr,Zr.u+Ig.g);var jo=Ig.value;if(16>jo)Mg[zl++]=jo,jo!=0&&(Dg=jo);else{var H5=jo==16,Eg=jo-16,G5=p5[Eg],Og=ge(Zr,f5[Eg])+G5;if(zl+Og>gd)break s;for(var Y5=H5?Dg:0;0<Og--;)Mg[zl++]=Y5}}nf=1;break s}nf||(Pg.a=3),pd=nf}(pd=pd&&!Yr.h)&&(ef=T(z5,B5,8,Fl,Xh)),pd&&ef!=0?md=ef:(fd.a=3,md=0)}if(md==0)break n;if(fr&&m5[_t]==1&&(fr=Ys[Ot].g==0),Oa+=Ys[Ot].g,Ot+=md,3>=_t){var Bl,sf=Is[0];for(Bl=1;Bl<Hn;++Bl)Is[Bl]>sf&&(sf=Is[Bl]);os+=sf}}if(nn.nd=fr,nn.Qb=0,fr&&(nn.qb=(Zs[3][bi[3]+0].value<<24|Zs[1][bi[1]+0].value<<16|Zs[2][bi[2]+0].value)>>>0,Oa==0&&256>Zs[0][bi[0]+0].value&&(nn.Qb=1,nn.qb+=Zs[0][bi[0]+0].value<<8)),nn.jc=!nn.Qb&&6>os,nn.jc){var yd,pr=nn;for(yd=0;yd<Ri;++yd){var Kr=yd,Jr=pr.pd[Kr],xd=pr.G[0][pr.H[0]+Kr];256<=xd.value?(Jr.g=xd.g+256,Jr.value=xd.value):(Jr.g=0,Jr.value=0,Kr>>=Qn(xd,8,Jr),Kr>>=Qn(pr.G[1][pr.H[1]+Kr],16,Jr),Kr>>=Qn(pr.G[2][pr.H[2]+Kr],0,Jr),Qn(pr.G[3][pr.H[3]+Kr],24,Jr))}}}Vn.vc=Rt,Vn.Wb=qt,Vn.Ya=Gs,Vn.yc=Vs,Re=1;break t}Re=0}if(!(z=Re)){N.a=3;break e}if(0<pe){if(G.ua=1<<pe,!J(G.Wa,pe)){N.a=1,z=0;break e}}else G.ua=0;var rf=N,Rg=B,Z5=$,af=rf.s,of=af.xc;if(rf.c=Rg,rf.i=Z5,af.md=Ie(Rg,of),af.wc=of==0?-1:(1<<of)-1,b){N.xb=j5;break e}if((ie=r(B*$))==null){N.a=1,z=0;break e}z=(z=mi(N,ie,0,B,$,$,null))&&!q.h;break e}return z?(I!=null?I[0]=ie:(e(ie==null),e(b)),N.$=0,b||si(G)):si(G),z}function ka(p,g){var b=p.c*p.i,N=b+g+16*g;return e(p.c<=g),p.V=r(N),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+b+g,1)}function co(p,g){var b=p.C,N=g-b,I=p.V,z=p.Ba+p.c*b;for(e(g<=p.l.o);0<N;){var B=16<N?16:N,$=p.l.ma,q=p.l.width,G=q*B,ie=$.ca,pe=$.tb+q*b,Y=p.Ta,oe=p.Ua;wa(p,B,I,z),cg(Y,oe,ie,pe,G),Ti($,b,b+B,ie,pe,q),N-=B,I+=B*p.c,b+=B}e(b==g),p.C=p.Ma=g}function uo(){this.ub=this.yd=this.td=this.Rb=0}function ho(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ah(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function fl(){this.Yb=(function(){var p=[];return(function g(b,N,I){for(var z=I[N],B=0;B<z&&(b.push(I.length>N+1?[]:0),!(I.length<N+1));B++)g(b[B],N+1,I)})(p,0,[3,11]),p})()}function Uc(){this.jb=r(3),this.Wc=o([4,8],fl),this.Xc=o([4,17],fl)}function Vc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function ii(){this.ld=this.La=this.dd=this.tc=0}function pl(){this.Na=this.la=0}function Hc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ml(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gc(){this.uc=this.M=this.Nb=0,this.wa=Array(new ii),this.Y=0,this.ya=Array(new ml),this.aa=0,this.l=new fo}function Yc(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Zc(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new uo,this.Kc=new ho,this.ed=new Vc,this.Qa=new Ah,this.Ic=this.$c=this.Aa=0,this.D=new Gc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,R),this.ia=0,this.pb=a(4,Hc),this.Pa=new Uc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yc),this.Hd=0,this.rb=Array(new pl),this.sb=0,this.wa=Array(new ii),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ml),this.L=this.aa=0,this.gd=o([4,2],ii),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ch(){var p=new Zc;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Ol||(Ol=ir)),p}function In(p,g,b){return p.a==0&&(p.a=g,p.sc=b,p.cb=0),0}function Kc(p,g,b){return 3<=b&&p[g+0]==157&&p[g+1]==1&&p[g+2]==42}function Jc(p,g){if(p==null)return 0;if(p.a=0,p.sc="OK",g==null)return In(p,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,N=g.w,I=g.ha;if(4>I)return In(p,7,"Truncated header.");var z=b[N+0]|b[N+1]<<8|b[N+2]<<16,B=p.Od;if(B.Rb=!(1&z),B.td=z>>1&7,B.yd=z>>4&1,B.ub=z>>5,3<B.td)return In(p,3,"Incorrect keyframe parameters.");if(!B.yd)return In(p,4,"Frame not displayable.");N+=3,I-=3;var $=p.Kc;if(B.Rb){if(7>I)return In(p,7,"cannot parse picture header");if(!Kc(b,N,I))return In(p,3,"Bad code word");$.c=16383&(b[N+4]<<8|b[N+3]),$.Td=b[N+4]>>6,$.i=16383&(b[N+6]<<8|b[N+5]),$.Ud=b[N+6]>>6,N+=7,I-=7,p.za=$.c+15>>4,p.Ub=$.i+15>>4,g.width=$.c,g.height=$.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((z=p.Pa).jb,0,255,z.jb.length),e((z=p.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,i(z.Zb,0,0,z.Zb.length),i(z.Lb,0,0,z.Lb)}if(B.ub>I)return In(p,7,"bad partition length");ne(z=p.m,b,N,B.ub),N+=B.ub,I-=B.ub,B.Rb&&($.Ld=me(z),$.Kd=me(z)),$=p.Qa;var q,G=p.Pa;if(e(z!=null),e($!=null),$.Cb=me(z),$.Cb){if($.Bb=me(z),me(z)){for($.Fb=me(z),q=0;4>q;++q)$.Zb[q]=me(z)?F(z,7):0;for(q=0;4>q;++q)$.Lb[q]=me(z)?F(z,6):0}if($.Bb)for(q=0;3>q;++q)G.jb[q]=me(z)?ae(z,8):255}else $.Bb=0;if(z.Ka)return In(p,3,"cannot parse segment header");if(($=p.ed).zd=me(z),$.Tb=ae(z,6),$.wb=ae(z,3),$.Pc=me(z),$.Pc&&me(z)){for(G=0;4>G;++G)me(z)&&($.vd[G]=F(z,6));for(G=0;4>G;++G)me(z)&&($.od[G]=F(z,6))}if(p.L=$.Tb==0?0:$.zd?1:2,z.Ka)return In(p,3,"cannot parse filter header");var ie=I;if(I=q=N,N=q+ie,$=ie,p.Xb=(1<<ae(p.m,2))-1,ie<3*(G=p.Xb))b=7;else{for(q+=3*G,$-=3*G,ie=0;ie<G;++ie){var pe=b[I+0]|b[I+1]<<8|b[I+2]<<16;pe>$&&(pe=$),ne(p.Jc[+ie],b,q,pe),q+=pe,$-=pe,I+=3}ne(p.Jc[+G],b,q,$),b=q<N?0:5}if(b!=0)return In(p,b,"cannot parse partitions");for(b=ae(q=p.m,7),I=me(q)?F(q,4):0,N=me(q)?F(q,4):0,$=me(q)?F(q,4):0,G=me(q)?F(q,4):0,q=me(q)?F(q,4):0,ie=p.Qa,pe=0;4>pe;++pe){if(ie.Cb){var Y=ie.Zb[pe];ie.Fb||(Y+=b)}else{if(0<pe){p.pb[pe]=p.pb[0];continue}Y=b}var oe=p.pb[pe];oe.Sc[0]=Kh[qn(Y+I,127)],oe.Sc[1]=Jh[qn(Y+0,127)],oe.Eb[0]=2*Kh[qn(Y+N,127)],oe.Eb[1]=101581*Jh[qn(Y+$,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=Kh[qn(Y+G,117)],oe.Qc[1]=Jh[qn(Y+q,127)],oe.lc=Y+q}if(!B.Rb)return In(p,4,"Not a key frame.");for(me(z),B=p.Pa,b=0;4>b;++b){for(I=0;8>I;++I)for(N=0;3>N;++N)for($=0;11>$;++$)G=we(z,N5[b][I][N][$])?ae(z,8):S5[b][I][N][$],B.Wc[b][I].Yb[N][$]=G;for(I=0;17>I;++I)B.Xc[b][I]=B.Wc[b][_5[I]]}return p.kc=me(z),p.kc&&(p.Bd=ae(z,8)),p.cb=1}function ir(p,g,b,N,I,z,B){var $=g[I].Yb[b];for(b=0;16>I;++I){if(!we(p,$[b+0]))return I;for(;!we(p,$[b+1]);)if($=g[++I].Yb[0],b=0,I==16)return 16;var q=g[I+1].Yb;if(we(p,$[b+2])){var G=p,ie=0;if(we(G,(Y=$)[(pe=b)+3]))if(we(G,Y[pe+6])){for($=0,pe=2*(ie=we(G,Y[pe+8]))+(Y=we(G,Y[pe+9+ie])),ie=0,Y=b5[pe];Y[$];++$)ie+=ie+we(G,Y[$]);ie+=3+(8<<pe)}else we(G,Y[pe+7])?(ie=7+2*we(G,165),ie+=we(G,145)):ie=5+we(G,159);else ie=we(G,Y[pe+4])?3+we(G,Y[pe+5]):2;$=q[2]}else ie=1,$=q[1];q=B+w5[I],0>(G=p).b&&xe(G);var pe,Y=G.b,oe=(pe=G.Ca>>1)-(G.I>>Y)>>31;--G.b,G.Ca+=oe,G.Ca|=1,G.I-=(pe+1&oe)<<Y,z[q]=((ie^oe)-oe)*N[(0<I)+0]}return 16}function Na(p){var g=p.rb[p.sb-1];g.la=0,g.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function gi(p,g,b,N,I){I=p[g+b+32*N]+(I>>3),p[g+b+32*N]=-256&I?0>I?0:255:I}function _a(p,g,b,N,I,z){gi(p,g,0,b,N+I),gi(p,g,1,b,N+z),gi(p,g,2,b,N-z),gi(p,g,3,b,N-I)}function kn(p){return(20091*p>>16)+p}function gl(p,g,b,N){var I,z=0,B=r(16);for(I=0;4>I;++I){var $=p[g+0]+p[g+8],q=p[g+0]-p[g+8],G=(35468*p[g+4]>>16)-kn(p[g+12]),ie=kn(p[g+4])+(35468*p[g+12]>>16);B[z+0]=$+ie,B[z+1]=q+G,B[z+2]=q-G,B[z+3]=$-ie,z+=4,g++}for(I=z=0;4>I;++I)$=(p=B[z+0]+4)+B[z+8],q=p-B[z+8],G=(35468*B[z+4]>>16)-kn(B[z+12]),gi(b,N,0,0,$+(ie=kn(B[z+4])+(35468*B[z+12]>>16))),gi(b,N,1,0,q+G),gi(b,N,2,0,q-G),gi(b,N,3,0,$-ie),z++,N+=32}function Lh(p,g,b,N){var I=p[g+0]+4,z=35468*p[g+4]>>16,B=kn(p[g+4]),$=35468*p[g+1]>>16;_a(b,N,0,I+B,p=kn(p[g+1]),$),_a(b,N,1,I+z,p,$),_a(b,N,2,I-z,p,$),_a(b,N,3,I-B,p,$)}function Ph(p,g,b,N,I){gl(p,g,b,N),I&&gl(p,g+16,b,N+4)}function Mh(p,g,b,N){jn(p,g+0,b,N,1),jn(p,g+32,b,N+128,1)}function Ei(p,g,b,N){var I;for(p=p[g+0]+4,I=0;4>I;++I)for(g=0;4>g;++g)gi(b,N,g,I,p)}function Qc(p,g,b,N){p[g+0]&&$i(p,g+0,b,N),p[g+16]&&$i(p,g+16,b,N+4),p[g+32]&&$i(p,g+32,b,N+128),p[g+48]&&$i(p,g+48,b,N+128+4)}function Xc(p,g,b,N){var I,z=r(16);for(I=0;4>I;++I){var B=p[g+0+I]+p[g+12+I],$=p[g+4+I]+p[g+8+I],q=p[g+4+I]-p[g+8+I],G=p[g+0+I]-p[g+12+I];z[0+I]=B+$,z[8+I]=B-$,z[4+I]=G+q,z[12+I]=G-q}for(I=0;4>I;++I)B=(p=z[0+4*I]+3)+z[3+4*I],$=z[1+4*I]+z[2+4*I],q=z[1+4*I]-z[2+4*I],G=p-z[3+4*I],b[N+0]=B+$>>3,b[N+16]=G+q>>3,b[N+32]=B-$>>3,b[N+48]=G-q>>3,N+=64}function zr(p,g,b){var N,I=g-32,z=Us,B=255-p[I-1];for(N=0;N<b;++N){var $,q=z,G=B+p[g-1];for($=0;$<b;++$)p[g+$]=q[G+p[I+$]];g+=32}}function yl(p,g){zr(p,g,4)}function Dh(p,g){zr(p,g,8)}function Th(p,g){zr(p,g,16)}function Ih(p,g){var b;for(b=0;16>b;++b)s(p,g+32*b,p,g-32,16)}function xl(p,g){var b;for(b=16;0<b;--b)i(p,g,p[g-1],16),g+=32}function ja(p,g,b){var N;for(N=0;16>N;++N)i(g,b+32*N,p,16)}function Br(p,g){var b,N=16;for(b=0;16>b;++b)N+=p[g-1+32*b]+p[g+b-32];ja(N>>5,p,g)}function Eh(p,g){var b,N=8;for(b=0;16>b;++b)N+=p[g-1+32*b];ja(N>>4,p,g)}function Aa(p,g){var b,N=8;for(b=0;16>b;++b)N+=p[g+b-32];ja(N>>4,p,g)}function vl(p,g){ja(128,p,g)}function bt(p,g,b){return p+2*g+b+2>>2}function Oh(p,g){var b,N=g-32;for(N=new Uint8Array([bt(p[N-1],p[N+0],p[N+1]),bt(p[N+0],p[N+1],p[N+2]),bt(p[N+1],p[N+2],p[N+3]),bt(p[N+2],p[N+3],p[N+4])]),b=0;4>b;++b)s(p,g+32*b,N,0,N.length)}function Rh(p,g){var b=p[g-1],N=p[g-1+32],I=p[g-1+64],z=p[g-1+96];Me(p,g+0,16843009*bt(p[g-1-32],b,N)),Me(p,g+32,16843009*bt(b,N,I)),Me(p,g+64,16843009*bt(N,I,z)),Me(p,g+96,16843009*bt(I,z,z))}function Fh(p,g){var b,N=4;for(b=0;4>b;++b)N+=p[g+b-32]+p[g-1+32*b];for(N>>=3,b=0;4>b;++b)i(p,g+32*b,N,4)}function zh(p,g){var b=p[g-1+0],N=p[g-1+32],I=p[g-1+64],z=p[g-1-32],B=p[g+0-32],$=p[g+1-32],q=p[g+2-32],G=p[g+3-32];p[g+0+96]=bt(N,I,p[g-1+96]),p[g+1+96]=p[g+0+64]=bt(b,N,I),p[g+2+96]=p[g+1+64]=p[g+0+32]=bt(z,b,N),p[g+3+96]=p[g+2+64]=p[g+1+32]=p[g+0+0]=bt(B,z,b),p[g+3+64]=p[g+2+32]=p[g+1+0]=bt($,B,z),p[g+3+32]=p[g+2+0]=bt(q,$,B),p[g+3+0]=bt(G,q,$)}function rr(p,g){var b=p[g+1-32],N=p[g+2-32],I=p[g+3-32],z=p[g+4-32],B=p[g+5-32],$=p[g+6-32],q=p[g+7-32];p[g+0+0]=bt(p[g+0-32],b,N),p[g+1+0]=p[g+0+32]=bt(b,N,I),p[g+2+0]=p[g+1+32]=p[g+0+64]=bt(N,I,z),p[g+3+0]=p[g+2+32]=p[g+1+64]=p[g+0+96]=bt(I,z,B),p[g+3+32]=p[g+2+64]=p[g+1+96]=bt(z,B,$),p[g+3+64]=p[g+2+96]=bt(B,$,q),p[g+3+96]=bt($,q,q)}function ar(p,g){var b=p[g-1+0],N=p[g-1+32],I=p[g-1+64],z=p[g-1-32],B=p[g+0-32],$=p[g+1-32],q=p[g+2-32],G=p[g+3-32];p[g+0+0]=p[g+1+64]=z+B+1>>1,p[g+1+0]=p[g+2+64]=B+$+1>>1,p[g+2+0]=p[g+3+64]=$+q+1>>1,p[g+3+0]=q+G+1>>1,p[g+0+96]=bt(I,N,b),p[g+0+64]=bt(N,b,z),p[g+0+32]=p[g+1+96]=bt(b,z,B),p[g+1+32]=p[g+2+96]=bt(z,B,$),p[g+2+32]=p[g+3+96]=bt(B,$,q),p[g+3+32]=bt($,q,G)}function Bh(p,g){var b=p[g+0-32],N=p[g+1-32],I=p[g+2-32],z=p[g+3-32],B=p[g+4-32],$=p[g+5-32],q=p[g+6-32],G=p[g+7-32];p[g+0+0]=b+N+1>>1,p[g+1+0]=p[g+0+64]=N+I+1>>1,p[g+2+0]=p[g+1+64]=I+z+1>>1,p[g+3+0]=p[g+2+64]=z+B+1>>1,p[g+0+32]=bt(b,N,I),p[g+1+32]=p[g+0+96]=bt(N,I,z),p[g+2+32]=p[g+1+96]=bt(I,z,B),p[g+3+32]=p[g+2+96]=bt(z,B,$),p[g+3+64]=bt(B,$,q),p[g+3+96]=bt($,q,G)}function $h(p,g){var b=p[g-1+0],N=p[g-1+32],I=p[g-1+64],z=p[g-1+96];p[g+0+0]=b+N+1>>1,p[g+2+0]=p[g+0+32]=N+I+1>>1,p[g+2+32]=p[g+0+64]=I+z+1>>1,p[g+1+0]=bt(b,N,I),p[g+3+0]=p[g+1+32]=bt(N,I,z),p[g+3+32]=p[g+1+64]=bt(I,z,z),p[g+3+64]=p[g+2+64]=p[g+0+96]=p[g+1+96]=p[g+2+96]=p[g+3+96]=z}function po(p,g){var b=p[g-1+0],N=p[g-1+32],I=p[g-1+64],z=p[g-1+96],B=p[g-1-32],$=p[g+0-32],q=p[g+1-32],G=p[g+2-32];p[g+0+0]=p[g+2+32]=b+B+1>>1,p[g+0+32]=p[g+2+64]=N+b+1>>1,p[g+0+64]=p[g+2+96]=I+N+1>>1,p[g+0+96]=z+I+1>>1,p[g+3+0]=bt($,q,G),p[g+2+0]=bt(B,$,q),p[g+1+0]=p[g+3+32]=bt(b,B,$),p[g+1+32]=p[g+3+64]=bt(N,b,B),p[g+1+64]=p[g+3+96]=bt(I,N,b),p[g+1+96]=bt(z,I,N)}function bl(p,g){var b;for(b=0;8>b;++b)s(p,g+32*b,p,g-32,8)}function Ca(p,g){var b;for(b=0;8>b;++b)i(p,g,p[g-1],8),g+=32}function mo(p,g,b){var N;for(N=0;8>N;++N)i(g,b+32*N,p,8)}function go(p,g){var b,N=8;for(b=0;8>b;++b)N+=p[g+b-32]+p[g-1+32*b];mo(N>>4,p,g)}function Wh(p,g){var b,N=4;for(b=0;8>b;++b)N+=p[g+b-32];mo(N>>3,p,g)}function wl(p,g){var b,N=4;for(b=0;8>b;++b)N+=p[g-1+32*b];mo(N>>3,p,g)}function Sl(p,g){mo(128,p,g)}function La(p,g,b){var N=p[g-b],I=p[g+0],z=3*(I-N)+Vh[1020+p[g-2*b]-p[g+b]],B=sd[112+(z+4>>3)];p[g-b]=Us[255+N+sd[112+(z+3>>3)]],p[g+0]=Us[255+I-B]}function Pa(p,g,b,N){var I=p[g+0],z=p[g+b];return ai[255+p[g-2*b]-p[g-b]]>N||ai[255+z-I]>N}function kl(p,g,b,N){return 4*ai[255+p[g-b]-p[g+0]]+ai[255+p[g-2*b]-p[g+b]]<=N}function yo(p,g,b,N,I){var z=p[g-3*b],B=p[g-2*b],$=p[g-b],q=p[g+0],G=p[g+b],ie=p[g+2*b],pe=p[g+3*b];return 4*ai[255+$-q]+ai[255+B-G]>N?0:ai[255+p[g-4*b]-z]<=I&&ai[255+z-B]<=I&&ai[255+B-$]<=I&&ai[255+pe-ie]<=I&&ai[255+ie-G]<=I&&ai[255+G-q]<=I}function Nl(p,g,b,N){var I=2*N+1;for(N=0;16>N;++N)kl(p,g+N,b,I)&&La(p,g+N,b)}function Ma(p,g,b,N){var I=2*N+1;for(N=0;16>N;++N)kl(p,g+N*b,1,I)&&La(p,g+N*b,1)}function _l(p,g,b,N){var I;for(I=3;0<I;--I)Nl(p,g+=4*b,b,N)}function jl(p,g,b,N){var I;for(I=3;0<I;--I)Ma(p,g+=4,b,N)}function Ws(p,g,b,N,I,z,B,$){for(z=2*z+1;0<I--;){if(yo(p,g,b,z,B))if(Pa(p,g,b,$))La(p,g,b);else{var q=p,G=g,ie=b,pe=q[G-2*ie],Y=q[G-ie],oe=q[G+0],ue=q[G+ie],be=q[G+2*ie],fe=27*(je=Vh[1020+3*(oe-Y)+Vh[1020+pe-ue]])+63>>7,Ne=18*je+63>>7,je=9*je+63>>7;q[G-3*ie]=Us[255+q[G-3*ie]+je],q[G-2*ie]=Us[255+pe+Ne],q[G-ie]=Us[255+Y+fe],q[G+0]=Us[255+oe-fe],q[G+ie]=Us[255+ue-Ne],q[G+2*ie]=Us[255+be-je]}g+=N}}function Oi(p,g,b,N,I,z,B,$){for(z=2*z+1;0<I--;){if(yo(p,g,b,z,B))if(Pa(p,g,b,$))La(p,g,b);else{var q=p,G=g,ie=b,pe=q[G-ie],Y=q[G+0],oe=q[G+ie],ue=sd[112+(4+(be=3*(Y-pe))>>3)],be=sd[112+(be+3>>3)],fe=ue+1>>1;q[G-2*ie]=Us[255+q[G-2*ie]+fe],q[G-ie]=Us[255+pe+be],q[G+0]=Us[255+Y-ue],q[G+ie]=Us[255+oe-fe]}g+=N}}function v(p,g,b,N,I,z){Ws(p,g,b,1,16,N,I,z)}function E(p,g,b,N,I,z){Ws(p,g,1,b,16,N,I,z)}function Z(p,g,b,N,I,z){var B;for(B=3;0<B;--B)Oi(p,g+=4*b,b,1,16,N,I,z)}function se(p,g,b,N,I,z){var B;for(B=3;0<B;--B)Oi(p,g+=4,1,b,16,N,I,z)}function de(p,g,b,N,I,z,B,$){Ws(p,g,I,1,8,z,B,$),Ws(b,N,I,1,8,z,B,$)}function _e(p,g,b,N,I,z,B,$){Ws(p,g,1,I,8,z,B,$),Ws(b,N,1,I,8,z,B,$)}function Pe(p,g,b,N,I,z,B,$){Oi(p,g+4*I,I,1,8,z,B,$),Oi(b,N+4*I,I,1,8,z,B,$)}function Ke(p,g,b,N,I,z,B,$){Oi(p,g+4,1,I,8,z,B,$),Oi(b,N+4,1,I,8,z,B,$)}function tt(){this.ba=new Kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ht(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new wt,this.vb=new wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new W}function mn(){this.xb=this.a=0,this.l=new fo,this.ca=new Kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=a(4,jt),this.Oc=0}function En(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zt(p,g,b,N,I,z,B){for(p=p==null?0:p[g+0],g=0;g<B;++g)I[z+g]=p+b[N+g]&255,p=I[z+g]}function Wn(p,g,b,N,I,z,B){var $;if(p==null)Zt(null,null,b,N,I,z,B);else for($=0;$<B;++$)I[z+$]=p[g+$]+b[N+$]&255}function On(p,g,b,N,I,z,B){if(p==null)Zt(null,null,b,N,I,z,B);else{var $,q=p[g+0],G=q,ie=q;for($=0;$<B;++$)G=ie+(q=p[g+$])-G,ie=b[N+$]+(-256&G?0>G?0:255:G)&255,G=q,I[z+$]=ie}}function is(p,g,b,N){var I=g.width,z=g.o;if(e(p!=null&&g!=null),0>b||0>=N||b+N>z)return null;if(!p.Cc){if(p.ga==null){var B;if(p.ga=new En,(B=p.ga==null)||(B=g.width*g.o,e(p.Gb.length==0),p.Gb=r(B),p.Uc=0,p.Gb==null?B=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,B=1),B=!B),!B){B=p.ga;var $=p.Fa,q=p.P,G=p.qc,ie=p.mb,pe=p.nb,Y=q+1,oe=G-1,ue=B.l;if(e($!=null&&ie!=null&&g!=null),Gr[0]=null,Gr[1]=Zt,Gr[2]=Wn,Gr[3]=On,B.ca=ie,B.tb=pe,B.c=g.width,B.i=g.height,e(0<B.c&&0<B.i),1>=G)g=0;else if(B.$a=3&$[q+0],B.Z=$[q+0]>>2&3,B.Lc=$[q+0]>>4&3,q=$[q+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||q)g=0;else if(ue.put=ut,ue.ac=Di,ue.bc=nr,ue.ma=B,ue.width=g.width,ue.height=g.height,ue.Da=g.Da,ue.v=g.v,ue.va=g.va,ue.j=g.j,ue.o=g.o,B.$a)e:{e(B.$a==1),g=Sa();t:for(;;){if(g==null){g=0;break e}if(e(B!=null),B.mc=g,g.c=B.c,g.i=B.i,g.l=B.l,g.l.ma=B,g.l.width=B.c,g.l.height=B.i,g.a=0,ce(g.m,$,Y,oe),!Ii(B.c,B.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&fi(g.s)?(B.ic=1,$=g.c*g.i,g.Ta=null,g.Ua=0,g.V=r($),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(B.ic=0,g=ka(g,B.c)),!g))break t;g=1;break e}B.mc=null,g=0}else g=oe>=B.c*B.i;B=!g}if(B)return null;p.ga.Lc!=1?p.Ga=0:N=z-b}e(p.ga!=null),e(b+N<=z);e:{if(g=($=p.ga).c,z=$.l.o,$.$a==0){if(Y=p.rc,oe=p.Vc,ue=p.Fa,q=p.P+1+b*g,G=p.mb,ie=p.nb+b*g,e(q<=p.P+p.qc),$.Z!=0)for(e(Gr[$.Z]!=null),B=0;B<N;++B)Gr[$.Z](Y,oe,ue,q,G,ie,g),Y=G,oe=ie,ie+=g,q+=g;else for(B=0;B<N;++B)s(G,ie,ue,q,g),Y=G,oe=ie,ie+=g,q+=g;p.rc=Y,p.Vc=oe}else{if(e($.mc!=null),g=b+N,e((B=$.mc)!=null),e(g<=B.i),B.C>=g)g=1;else if($.ic||Da(),$.ic){$=B.V,Y=B.Ba,oe=B.c;var be=B.i,fe=(ue=1,q=B.$/oe,G=B.$%oe,ie=B.m,pe=B.s,B.$),Ne=oe*be,je=oe*g,Te=pe.wc,Le=fe<je?ss(pe,G,q):null;e(fe<=Ne),e(g<=be),e(fi(pe));t:for(;;){for(;!ie.h&&fe<je;){if(G&Te||(Le=ss(pe,G,q)),e(Le!=null),le(ie),256>(be=yn(Le.G[0],Le.H[0],ie)))$[Y+fe]=be,++fe,++G>=oe&&(G=0,++q<=g&&!(q%16)&&pi(B,q));else{if(!(280>be)){ue=0;break t}be=ti(be-256,ie);var st,Ue=yn(Le.G[4],Le.H[4],ie);if(le(ie),!(fe>=(Ue=ni(oe,Ue=ti(Ue,ie)))&&Ne-fe>=be)){ue=0;break t}for(st=0;st<be;++st)$[Y+fe+st]=$[Y+fe+st-Ue];for(fe+=be,G+=be;G>=oe;)G-=oe,++q<=g&&!(q%16)&&pi(B,q);fe<je&&G&Te&&(Le=ss(pe,G,q))}e(ie.h==te(ie))}pi(B,q>g?g:q);break t}!ue||ie.h&&fe<Ne?(ue=0,B.a=ie.h?5:3):B.$=fe,g=ue}else g=mi(B,B.V,B.Ba,B.c,B.i,g,co);if(!g){N=0;break e}}b+N>=z&&(p.Cc=1),N=1}if(!N)return null;if(p.Cc&&((N=p.ga)!=null&&(N.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+b*I}function or(p,g,b,N,I,z){for(;0<I--;){var B,$=p,q=g+(b?1:0),G=p,ie=g+(b?0:3);for(B=0;B<N;++B){var pe=G[ie+4*B];pe!=255&&(pe*=32897,$[q+4*B+0]=$[q+4*B+0]*pe>>23,$[q+4*B+1]=$[q+4*B+1]*pe>>23,$[q+4*B+2]=$[q+4*B+2]*pe>>23)}g+=z}}function $r(p,g,b,N,I){for(;0<N--;){var z;for(z=0;z<b;++z){var B=p[g+2*z+0],$=15&(G=p[g+2*z+1]),q=4369*$,G=(240&G|G>>4)*q>>16;p[g+2*z+0]=(240&B|B>>4)*q>>16&240|(15&B|B<<4)*q>>16>>4&15,p[g+2*z+1]=240&G|$}g+=I}}function qh(p,g,b,N,I,z,B,$){var q,G,ie=255;for(G=0;G<I;++G){for(q=0;q<N;++q){var pe=p[g+q];z[B+4*q]=pe,ie&=pe}g+=b,B+=$}return ie!=255}function ed(p,g,b,N,I){var z;for(z=0;z<I;++z)b[N+z]=p[g+z]>>8}function Da(){El=or,og=$r,lg=qh,cg=ed}function yi(p,g,b){M[p]=function(N,I,z,B,$,q,G,ie,pe,Y,oe,ue,be,fe,Ne,je,Te){var Le,st=Te-1>>1,Ue=$[q+0]|G[ie+0]<<16,At=pe[Y+0]|oe[ue+0]<<16;e(N!=null);var Qe=3*Ue+At+131074>>2;for(g(N[I+0],255&Qe,Qe>>16,be,fe),z!=null&&(Qe=3*At+Ue+131074>>2,g(z[B+0],255&Qe,Qe>>16,Ne,je)),Le=1;Le<=st;++Le){var Et=$[q+Le]|G[ie+Le]<<16,Un=pe[Y+Le]|oe[ue+Le]<<16,Ct=Ue+Et+At+Un+524296,Xe=Ct+2*(Et+At)>>3;Qe=Xe+Ue>>1,Ue=(Ct=Ct+2*(Ue+Un)>>3)+Et>>1,g(N[I+2*Le-1],255&Qe,Qe>>16,be,fe+(2*Le-1)*b),g(N[I+2*Le-0],255&Ue,Ue>>16,be,fe+(2*Le-0)*b),z!=null&&(Qe=Ct+At>>1,Ue=Xe+Un>>1,g(z[B+2*Le-1],255&Qe,Qe>>16,Ne,je+(2*Le-1)*b),g(z[B+2*Le+0],255&Ue,Ue>>16,Ne,je+(2*Le+0)*b)),Ue=Et,At=Un}1&Te||(Qe=3*Ue+At+131074>>2,g(N[I+Te-1],255&Qe,Qe>>16,be,fe+(Te-1)*b),z!=null&&(Qe=3*At+Ue+131074>>2,g(z[B+Te-1],255&Qe,Qe>>16,Ne,je+(Te-1)*b)))}}function Al(){oi[id]=A5,oi[rd]=bg,oi[mg]=C5,oi[ad]=wg,oi[od]=Sg,oi[Hh]=kg,oi[gg]=L5,oi[Gh]=bg,oi[Yh]=wg,oi[ld]=Sg,oi[Zh]=kg}function xo(p){return p&-16384?0>p?0:255:p>>P5}function Wr(p,g){return xo((19077*p>>8)+(26149*g>>8)-14234)}function Xn(p,g,b){return xo((19077*p>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function lr(p,g){return xo((19077*p>>8)+(33050*g>>8)-17685)}function cr(p,g,b,N,I){N[I+0]=Wr(p,b),N[I+1]=Xn(p,g,b),N[I+2]=lr(p,g)}function vo(p,g,b,N,I){N[I+0]=lr(p,g),N[I+1]=Xn(p,g,b),N[I+2]=Wr(p,b)}function Cl(p,g,b,N,I){var z=Xn(p,g,b);g=z<<3&224|lr(p,g)>>3,N[I+0]=248&Wr(p,b)|z>>5,N[I+1]=g}function Ss(p,g,b,N,I){var z=240&lr(p,g)|15;N[I+0]=240&Wr(p,b)|Xn(p,g,b)>>4,N[I+1]=z}function td(p,g,b,N,I){N[I+0]=255,cr(p,g,b,N,I+1)}function bo(p,g,b,N,I){vo(p,g,b,N,I),N[I+3]=255}function nd(p,g,b,N,I){cr(p,g,b,N,I),N[I+3]=255}function qn(p,g){return 0>p?0:p>g?g:p}function ri(p,g,b){M[p]=function(N,I,z,B,$,q,G,ie,pe){for(var Y=ie+(-2&pe)*b;ie!=Y;)g(N[I+0],z[B+0],$[q+0],G,ie),g(N[I+1],z[B+0],$[q+0],G,ie+b),I+=2,++B,++q,ie+=2*b;1&pe&&g(N[I+0],z[B+0],$[q+0],G,ie)}}function Ll(p,g,b){return b==0?p==0?g==0?6:5:g==0?4:0:b}function Pl(p,g,b,N,I){switch(p>>>30){case 3:jn(g,b,N,I,0);break;case 2:ur(g,b,N,I);break;case 1:$i(g,b,N,I)}}function qr(p,g){var b,N,I=g.M,z=g.Nb,B=p.oc,$=p.pc+40,q=p.oc,G=p.pc+584,ie=p.oc,pe=p.pc+600;for(b=0;16>b;++b)B[$+32*b-1]=129;for(b=0;8>b;++b)q[G+32*b-1]=129,ie[pe+32*b-1]=129;for(0<I?B[$-1-32]=q[G-1-32]=ie[pe-1-32]=129:(i(B,$-32-1,127,21),i(q,G-32-1,127,9),i(ie,pe-32-1,127,9)),N=0;N<p.za;++N){var Y=g.ya[g.aa+N];if(0<N){for(b=-1;16>b;++b)s(B,$+32*b-4,B,$+32*b+12,4);for(b=-1;8>b;++b)s(q,G+32*b-4,q,G+32*b+4,4),s(ie,pe+32*b-4,ie,pe+32*b+4,4)}var oe=p.Gd,ue=p.Hd+N,be=Y.ad,fe=Y.Hc;if(0<I&&(s(B,$-32,oe[ue].y,0,16),s(q,G-32,oe[ue].f,0,8),s(ie,pe-32,oe[ue].ea,0,8)),Y.Za){var Ne=B,je=$-32+16;for(0<I&&(N>=p.za-1?i(Ne,je,oe[ue].y[15],4):s(Ne,je,oe[ue+1].y,0,4)),b=0;4>b;b++)Ne[je+128+b]=Ne[je+256+b]=Ne[je+384+b]=Ne[je+0+b];for(b=0;16>b;++b,fe<<=2)Ne=B,je=$+_g[b],xi[Y.Ob[b]](Ne,je),Pl(fe,be,16*+b,Ne,je)}else if(Ne=Ll(N,I,Y.Ob[0]),Hr[Ne](B,$),fe!=0)for(b=0;16>b;++b,fe<<=2)Pl(fe,be,16*+b,B,$+_g[b]);for(b=Y.Gc,Ne=Ll(N,I,Y.Dd),hr[Ne](q,G),hr[Ne](ie,pe),fe=be,Ne=q,je=G,255&(Y=0|b)&&(170&Y?_o(fe,256,Ne,je):Il(fe,256,Ne,je)),Y=ie,fe=pe,255&(b>>=8)&&(170&b?_o(be,320,Y,fe):Il(be,320,Y,fe)),I<p.Ub-1&&(s(oe[ue].y,0,B,$+480,16),s(oe[ue].f,0,q,G+224,8),s(oe[ue].ea,0,ie,pe+224,8)),b=8*z*p.B,oe=p.sa,ue=p.ta+16*N+16*z*p.R,be=p.qa,Y=p.ra+8*N+b,fe=p.Ha,Ne=p.Ia+8*N+b,b=0;16>b;++b)s(oe,ue+b*p.R,B,$+32*b,16);for(b=0;8>b;++b)s(be,Y+b*p.B,q,G+32*b,8),s(fe,Ne+b*p.B,ie,pe+32*b,8)}}function wo(p,g,b,N,I,z,B,$,q){var G=[0],ie=[0],pe=0,Y=q!=null?q.kd:0,oe=q??new ht;if(p==null||12>b)return 7;oe.data=p,oe.w=g,oe.ha=b,g=[g],b=[b],oe.gb=[oe.gb];e:{var ue=g,be=b,fe=oe.gb;if(e(p!=null),e(be!=null),e(fe!=null),fe[0]=0,12<=be[0]&&!t(p,ue[0],"RIFF")){if(t(p,ue[0]+8,"WEBP")){fe=3;break e}var Ne=ye(p,ue[0]+4);if(12>Ne||4294967286<Ne){fe=3;break e}if(Y&&Ne>be[0]-8){fe=7;break e}fe[0]=Ne,ue[0]+=12,be[0]-=12}fe=0}if(fe!=0)return fe;for(Ne=0<oe.gb[0],b=b[0];;){e:{var je=p;be=g,fe=b;var Te=G,Le=ie,st=ue=[0];if((Qe=pe=[pe])[0]=0,8>fe[0])fe=7;else{if(!t(je,be[0],"VP8X")){if(ye(je,be[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var Ue=ye(je,be[0]+8),At=1+Oe(je,be[0]+12);if(2147483648<=At*(je=1+Oe(je,be[0]+15))){fe=3;break e}st!=null&&(st[0]=Ue),Te!=null&&(Te[0]=At),Le!=null&&(Le[0]=je),be[0]+=18,fe[0]-=18,Qe[0]=1}fe=0}}if(pe=pe[0],ue=ue[0],fe!=0)return fe;if(be=!!(2&ue),!Ne&&pe)return 3;if(z!=null&&(z[0]=!!(16&ue)),B!=null&&(B[0]=be),$!=null&&($[0]=0),B=G[0],ue=ie[0],pe&&be&&q==null){fe=0;break}if(4>b){fe=7;break}if(Ne&&pe||!Ne&&!pe&&!t(p,g[0],"ALPH")){b=[b],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{Ue=p,fe=g,Ne=b;var Qe=oe.gb;Te=oe.na,Le=oe.P,st=oe.Sa,At=22,e(Ue!=null),e(Ne!=null),je=fe[0];var Et=Ne[0];for(e(Te!=null),e(st!=null),Te[0]=null,Le[0]=null,st[0]=0;;){if(fe[0]=je,Ne[0]=Et,8>Et){fe=7;break e}var Un=ye(Ue,je+4);if(4294967286<Un){fe=3;break e}var Ct=8+Un+1&-2;if(At+=Ct,0<Qe&&At>Qe){fe=3;break e}if(!t(Ue,je,"VP8 ")||!t(Ue,je,"VP8L")){fe=0;break e}if(Et[0]<Ct){fe=7;break e}t(Ue,je,"ALPH")||(Te[0]=Ue,Le[0]=je+8,st[0]=Un),je+=Ct,Et-=Ct}}if(b=b[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],fe!=0)break}b=[b],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(Qe=p,fe=g,Ne=b,Te=oe.gb[0],Le=oe.Ja,st=oe.xa,Ue=fe[0],je=!t(Qe,Ue,"VP8 "),At=!t(Qe,Ue,"VP8L"),e(Qe!=null),e(Ne!=null),e(Le!=null),e(st!=null),8>Ne[0])fe=7;else{if(je||At){if(Qe=ye(Qe,Ue+4),12<=Te&&Qe>Te-12){fe=3;break e}if(Y&&Qe>Ne[0]-8){fe=7;break e}Le[0]=Qe,fe[0]+=8,Ne[0]-=8,st[0]=At}else st[0]=5<=Ne[0]&&Qe[Ue+0]==47&&!(Qe[Ue+4]>>5),Le[0]=Ne[0];fe=0}if(b=b[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],g=g[0],fe!=0)break;if(4294967286<oe.Ja)return 3;if($==null||be||($[0]=oe.xa?2:1),B=[B],ue=[ue],oe.xa){if(5>b){fe=7;break}$=B,Y=ue,be=z,p==null||5>b?p=0:5<=b&&p[g+0]==47&&!(p[g+4]>>5)?(Ne=[0],Qe=[0],Te=[0],ce(Le=new U,p,g,b),sr(Le,Ne,Qe,Te)?($!=null&&($[0]=Ne[0]),Y!=null&&(Y[0]=Qe[0]),be!=null&&(be[0]=Te[0]),p=1):p=0):p=0}else{if(10>b){fe=7;break}$=ue,p==null||10>b||!Kc(p,g+3,b-3)?p=0:(Y=p[g+0]|p[g+1]<<8|p[g+2]<<16,be=16383&(p[g+7]<<8|p[g+6]),p=16383&(p[g+9]<<8|p[g+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=oe.Ja||!be||!p?p=0:(B&&(B[0]=be),$&&($[0]=p),p=1))}if(!p||(B=B[0],ue=ue[0],pe&&(G[0]!=B||ie[0]!=ue)))return 3;q!=null&&(q[0]=oe,q.offset=g-q.w,e(4294967286>g-q.w),e(q.offset==q.ha-b));break}return fe==0||fe==7&&pe&&q==null?(z!=null&&(z[0]|=oe.na!=null&&0<oe.na.length),N!=null&&(N[0]=B),I!=null&&(I[0]=ue),0):fe}function Ms(p,g,b){var N=g.width,I=g.height,z=0,B=0,$=N,q=I;if(g.Da=p!=null&&0<p.Da,g.Da&&($=p.cd,q=p.bd,z=p.v,B=p.j,11>b||(z&=-2,B&=-2),0>z||0>B||0>=$||0>=q||z+$>N||B+q>I))return 0;if(g.v=z,g.j=B,g.va=z+$,g.o=B+q,g.U=$,g.T=q,g.da=p!=null&&0<p.da,g.da){if(!at($,q,b=[p.ib],z=[p.hb]))return 0;g.ib=b[0],g.hb=z[0]}return g.ob=p!=null&&p.ob,g.Kb=p==null||!p.Sd,g.da&&(g.ob=g.ib<3*N/4&&g.hb<3*I/4,g.Kb=0),1}function Ds(p){if(p==null)return 2;if(11>p.S){var g=p.f.RGBA;g.fb+=(p.height-1)*g.A,g.A=-g.A}else g=p.f.kb,p=p.height,g.O+=(p-1)*g.fa,g.fa=-g.fa,g.N+=(p-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(p-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(p-1)*g.lb,g.lb=-g.lb);return 0}function Ta(p,g,b,N){if(N==null||0>=p||0>=g)return 2;if(b!=null){if(b.Da){var I=b.cd,z=b.bd,B=-2&b.v,$=-2&b.j;if(0>B||0>$||0>=I||0>=z||B+I>p||$+z>g)return 2;p=I,g=z}if(b.da){if(!at(p,g,I=[b.ib],z=[b.hb]))return 2;p=I[0],g=z[0]}}N.width=p,N.height=g;e:{var q=N.width,G=N.height;if(p=N.S,0>=q||0>=G||!(p>=id&&13>p))p=2;else{if(0>=N.Rd&&N.sd==null){B=z=I=g=0;var ie=($=q*jg[p])*G;if(11>p||(z=(G+1)/2*(g=(q+1)/2),p==12&&(B=(I=q)*G)),(G=r(ie+2*z+B))==null){p=1;break e}N.sd=G,11>p?((q=N.f.RGBA).eb=G,q.fb=0,q.A=$,q.size=ie):((q=N.f.kb).y=G,q.O=0,q.fa=$,q.Fd=ie,q.f=G,q.N=0+ie,q.Ab=g,q.Cd=z,q.ea=G,q.W=0+ie+z,q.Db=g,q.Ed=z,p==12&&(q.F=G,q.J=0+ie+2*z),q.Tc=B,q.lb=I)}if(g=1,I=N.S,z=N.width,B=N.height,I>=id&&13>I)if(11>I)p=N.f.RGBA,g&=($=Math.abs(p.A))*(B-1)+z<=p.size,g&=$>=z*jg[I],g&=p.eb!=null;else{p=N.f.kb,$=(z+1)/2,ie=(B+1)/2,q=Math.abs(p.fa),G=Math.abs(p.Ab);var pe=Math.abs(p.Db),Y=Math.abs(p.lb),oe=Y*(B-1)+z;g&=q*(B-1)+z<=p.Fd,g&=G*(ie-1)+$<=p.Cd,g=(g&=pe*(ie-1)+$<=p.Ed)&q>=z&G>=$&pe>=$,g&=p.y!=null,g&=p.f!=null,g&=p.ea!=null,I==12&&(g&=Y>=z,g&=oe<=p.Tc,g&=p.F!=null)}else g=0;p=g?0:2}}return p!=0||b!=null&&b.fd&&(p=Ds(N)),p}var Ri=64,Ur=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ml=24,Vr=32,Nn=8,Uh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ee("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(p){return p},M.Predictor2=function(p,g,b){return g[b+0]},M.Predictor3=function(p,g,b){return g[b+1]},M.Predictor4=function(p,g,b){return g[b-1]},M.Predictor5=function(p,g,b){return ke(ke(p,g[b+1]),g[b+0])},M.Predictor6=function(p,g,b){return ke(p,g[b-1])},M.Predictor7=function(p,g,b){return ke(p,g[b+0])},M.Predictor8=function(p,g,b){return ke(g[b-1],g[b+0])},M.Predictor9=function(p,g,b){return ke(g[b+0],g[b+1])},M.Predictor10=function(p,g,b){return ke(ke(p,g[b-1]),ke(g[b+0],g[b+1]))},M.Predictor11=function(p,g,b){var N=g[b+0];return 0>=De(N>>24&255,p>>24&255,(g=g[b-1])>>24&255)+De(N>>16&255,p>>16&255,g>>16&255)+De(N>>8&255,p>>8&255,g>>8&255)+De(255&N,255&p,255&g)?N:p},M.Predictor12=function(p,g,b){var N=g[b+0];return(Ce((p>>24&255)+(N>>24&255)-((g=g[b-1])>>24&255))<<24|Ce((p>>16&255)+(N>>16&255)-(g>>16&255))<<16|Ce((p>>8&255)+(N>>8&255)-(g>>8&255))<<8|Ce((255&p)+(255&N)-(255&g)))>>>0},M.Predictor13=function(p,g,b){var N=g[b-1];return(ve((p=ke(p,g[b+0]))>>24&255,N>>24&255)<<24|ve(p>>16&255,N>>16&255)<<16|ve(p>>8&255,N>>8&255)<<8|ve(255&p,255&N))>>>0};var Fi=M.PredictorAdd0;M.PredictorAdd1=nt,ee("Predictor2","PredictorAdd2"),ee("Predictor3","PredictorAdd3"),ee("Predictor4","PredictorAdd4"),ee("Predictor5","PredictorAdd5"),ee("Predictor6","PredictorAdd6"),ee("Predictor7","PredictorAdd7"),ee("Predictor8","PredictorAdd8"),ee("Predictor9","PredictorAdd9"),ee("Predictor10","PredictorAdd10"),ee("Predictor11","PredictorAdd11"),ee("Predictor12","PredictorAdd12"),ee("Predictor13","PredictorAdd13");var zi=M.PredictorAdd2;Ve("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var So,Dl=M.ColorIndexInverseTransform,ko=M.MapARGB,No=M.VP8LColorIndexInverseTransformAlpha,Ia=M.MapAlpha,Ea=M.VP8LPredictorsAdd=[];Ea.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var dr,Tl,qs,Bi,en,tn,_n,jn,ur,_o,$i,Il,Zm,Km,Jm,Qm,Xm,eg,tg,ng,sg,ig,rg,ag,El,og,lg,cg,dg=r(511),ug=r(2041),hg=r(225),fg=r(767),pg=0,Vh=ug,sd=hg,Us=fg,ai=dg,id=0,rd=1,mg=2,ad=3,od=4,Hh=5,gg=6,Gh=7,Yh=8,ld=9,Zh=10,f5=[2,3,7],p5=[3,3,11],yg=[280,256,256,256,40],m5=[0,1,1,1,0],g5=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],y5=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],x5=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v5=8,Kh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ol=null,b5=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],w5=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],S5=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],k5=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],N5=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_5=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hr=[],xi=[],hr=[],j5=1,vg=2,Gr=[],oi=[];yi("UpsampleRgbLinePair",cr,3),yi("UpsampleBgrLinePair",vo,3),yi("UpsampleRgbaLinePair",nd,4),yi("UpsampleBgraLinePair",bo,4),yi("UpsampleArgbLinePair",td,4),yi("UpsampleRgba4444LinePair",Ss,2),yi("UpsampleRgb565LinePair",Cl,2);var A5=M.UpsampleRgbLinePair,C5=M.UpsampleBgrLinePair,bg=M.UpsampleRgbaLinePair,wg=M.UpsampleBgraLinePair,Sg=M.UpsampleArgbLinePair,kg=M.UpsampleRgba4444LinePair,L5=M.UpsampleRgb565LinePair,cd=16,dd=1<<cd-1,Rl=-227,Qh=482,P5=6,Ng=0,M5=r(256),D5=r(256),T5=r(256),I5=r(256),E5=r(Qh-Rl),O5=r(Qh-Rl);ri("YuvToRgbRow",cr,3),ri("YuvToBgrRow",vo,3),ri("YuvToRgbaRow",nd,4),ri("YuvToBgraRow",bo,4),ri("YuvToArgbRow",td,4),ri("YuvToRgba4444Row",Ss,2),ri("YuvToRgb565Row",Cl,2);var _g=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ud=[0,2,8],R5=[8,7,6,4,4,2,2,2,1,1,1,1],F5=1;this.WebPDecodeRGBA=function(p,g,b,N,I){var z=rd,B=new tt,$=new Kt;B.ba=$,$.S=z,$.width=[$.width],$.height=[$.height];var q=$.width,G=$.height,ie=new vt;if(ie==null||p==null)var pe=2;else e(ie!=null),pe=wo(p,g,b,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(pe!=0?q=0:(q!=null&&(q[0]=ie.width[0]),G!=null&&(G[0]=ie.height[0]),q=1),q){$.width=$.width[0],$.height=$.height[0],N!=null&&(N[0]=$.width),I!=null&&(I[0]=$.height);e:{if(N=new fo,(I=new ht).data=p,I.w=g,I.ha=b,I.kd=1,g=[0],e(I!=null),((p=wo(I.data,I.w,I.ha,null,null,null,g,null,I))==0||p==7)&&g[0]&&(p=4),(g=p)==0){if(e(B!=null),N.data=I.data,N.w=I.w+I.offset,N.ha=I.ha-I.offset,N.put=ut,N.ac=Di,N.bc=nr,N.ma=B,I.xa){if((p=Sa())==null){B=1;break e}if((function(Y,oe){var ue=[0],be=[0],fe=[0];t:for(;;){if(Y==null)return 0;if(oe==null)return Y.a=2,0;if(Y.l=oe,Y.a=0,ce(Y.m,oe.data,oe.w,oe.ha),!sr(Y.m,ue,be,fe)){Y.a=3;break t}if(Y.xb=vg,oe.width=ue[0],oe.height=be[0],!Ii(ue[0],be[0],1,Y,null))break t;return 1}return e(Y.a!=0),0})(p,N)){if(N=(g=Ta(N.width,N.height,B.Oa,B.ba))==0){t:{N=p;n:for(;;){if(N==null){N=0;break t}if(e(N.s.yc!=null),e(N.s.Ya!=null),e(0<N.s.Wb),e((b=N.l)!=null),e((I=b.ma)!=null),N.xb!=0){if(N.ca=I.ba,N.tb=I.tb,e(N.ca!=null),!Ms(I.Oa,b,ad)){N.a=2;break n}if(!ka(N,b.width)||b.da)break n;if((b.da||Nt(N.ca.S))&&Da(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Da()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!J(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!mi(N,N.V,N.Ba,N.c,N.i,b.o,Fr))break n;I.Dc=N.Ma,N=1;break t}e(N.a!=0),N=0}N=!N}N&&(g=p.a)}else g=p.a}else{if((p=new Ch)==null){B=1;break e}if(p.Fa=I.na,p.P=I.P,p.qc=I.Sa,Jc(p,N)){if((g=Ta(N.width,N.height,B.Oa,B.ba))==0){if(p.Aa=0,b=B.Oa,e((I=p)!=null),b!=null){if(0<(q=0>(q=b.Md)?0:100<q?255:255*q/100)){for(G=ie=0;4>G;++G)12>(pe=I.pb[G]).lc&&(pe.ia=q*R5[0>pe.lc?0:pe.lc]>>3),ie|=pe.ia;ie&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=b.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(Y,oe){if(Y==null)return 0;if(oe==null)return In(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!Jc(Y,oe))return 0;if(e(Y.cb),oe.ac==null||oe.ac(oe)){oe.ob&&(Y.L=0);var ue=ud[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=oe.v-ue>>4,Y.zb=oe.j-ue>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=oe.o+15+ue>>4,Y.Hb=oe.va+15+ue>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var be=Y.ed;for(ue=0;4>ue;++ue){var fe;if(Y.Qa.Cb){var Ne=Y.Qa.Lb[ue];Y.Qa.Fb||(Ne+=be.Tb)}else Ne=be.Tb;for(fe=0;1>=fe;++fe){var je=Y.gd[ue][fe],Te=Ne;if(be.Pc&&(Te+=be.vd[0],fe&&(Te+=be.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Le=Te;0<be.wb&&(Le=4<be.wb?Le>>2:Le>>1)>9-be.wb&&(Le=9-be.wb),1>Le&&(Le=1),je.dd=Le,je.tc=2*Te+Le,je.ld=40<=Te?2:15<=Te?1:0}else je.tc=0;je.La=fe}}}ue=0}else In(Y,6,"Frame setup failed"),ue=Y.a;if(ue=ue==0){if(ue){Y.$c=0,0<Y.Aa||(Y.Ic=F5);t:{ue=Y.Ic,be=4*(Le=Y.za);var st=32*Le,Ue=Le+1,At=0<Y.L?Le*(0<Y.Aa?2:1):0,Qe=(Y.Aa==2?2:1)*Le;if((je=be+832+(fe=3*(16*ue+ud[Y.L])/2*st)+(Ne=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=je)ue=0;else{if(je>Y.Vb){if(Y.Vb=0,Y.Ec=r(je),Y.Fc=0,Y.Ec==null){ue=In(Y,1,"no memory during frame initialization.");break t}Y.Vb=je}je=Y.Ec,Te=Y.Fc,Y.Ac=je,Y.Bc=Te,Te+=be,Y.Gd=a(st,Yc),Y.Hd=0,Y.rb=a(Ue+1,pl),Y.sb=1,Y.wa=At?a(At,ii):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=Le),e(!0),Y.oc=je,Y.pc=Te,Te+=832,Y.ya=a(Qe,ml),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=Le),Y.R=16*Le,Y.B=8*Le,Le=(st=ud[Y.L])*Y.R,st=st/2*Y.B,Y.sa=je,Y.ta=Te+Le,Y.qa=Y.sa,Y.ra=Y.ta+16*ue*Y.R+st,Y.Ha=Y.qa,Y.Ia=Y.ra+8*ue*Y.B+st,Y.$c=0,Te+=fe,Y.mb=Ne?je:null,Y.nb=Ne?Te:null,e(Te+Ne<=Y.Fc+Y.Vb),Na(Y),i(Y.Ac,Y.Bc,0,be),ue=1}}if(ue){if(oe.ka=0,oe.y=Y.sa,oe.O=Y.ta,oe.f=Y.qa,oe.N=Y.ra,oe.ea=Y.Ha,oe.Vd=Y.Ia,oe.fa=Y.R,oe.Rc=Y.B,oe.F=null,oe.J=0,!pg){for(ue=-255;255>=ue;++ue)dg[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)ug[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)hg[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)fg[255+ue]=0>ue?0:255<ue?255:ue;pg=1}_n=Xc,jn=Ph,_o=Mh,$i=Ei,Il=Qc,ur=Lh,Zm=v,Km=E,Jm=de,Qm=_e,Xm=Z,eg=se,tg=Pe,ng=Ke,sg=Nl,ig=Ma,rg=_l,ag=jl,xi[0]=Fh,xi[1]=yl,xi[2]=Oh,xi[3]=Rh,xi[4]=zh,xi[5]=ar,xi[6]=rr,xi[7]=Bh,xi[8]=po,xi[9]=$h,Hr[0]=Br,Hr[1]=Th,Hr[2]=Ih,Hr[3]=xl,Hr[4]=Eh,Hr[5]=Aa,Hr[6]=vl,hr[0]=go,hr[1]=Dh,hr[2]=bl,hr[3]=Ca,hr[4]=wl,hr[5]=Wh,hr[6]=Sl,ue=1}else ue=0}ue&&(ue=(function(Et,Un){for(Et.M=0;Et.M<Et.Va;++Et.M){var Ct,Xe=Et.Jc[Et.M&Et.Xb],Re=Et.m,An=Et;for(Ct=0;Ct<An.za;++Ct){var _t=Re,Ot=An,an=Ot.Ac,rs=Ot.Bc+4*Ct,ks=Ot.zc,xn=Ot.ya[Ot.aa+Ct];if(Ot.Qa.Bb?xn.$b=we(_t,Ot.Pa.jb[0])?2+we(_t,Ot.Pa.jb[2]):we(_t,Ot.Pa.jb[1]):xn.$b=0,Ot.kc&&(xn.Ad=we(_t,Ot.Bd)),xn.Za=!we(_t,145)+0,xn.Za){var ds=xn.Ob,Ns=0;for(Ot=0;4>Ot;++Ot){var Vn,Rt=ks[0+Ot];for(Vn=0;4>Vn;++Vn){Rt=k5[an[rs+Vn]][Rt];for(var qt=xg[we(_t,Rt[0])];0<qt;)qt=xg[2*qt+we(_t,Rt[qt])];Rt=-qt,an[rs+Vn]=Rt}s(ds,Ns,an,rs,4),Ns+=4,ks[0+Ot]=Rt}}else Rt=we(_t,156)?we(_t,128)?1:3:we(_t,163)?2:0,xn.Ob[0]=Rt,i(an,rs,Rt,4),i(ks,0,Rt,4);xn.Dd=we(_t,142)?we(_t,114)?we(_t,183)?1:3:2:0}if(An.m.Ka)return In(Et,7,"Premature end-of-partition0 encountered.");for(;Et.ja<Et.za;++Et.ja){if(An=Xe,_t=(Re=Et).rb[Re.sb-1],an=Re.rb[Re.sb+Re.ja],Ct=Re.ya[Re.aa+Re.ja],rs=Re.kc?Ct.Ad:0)_t.la=an.la=0,Ct.Za||(_t.Na=an.Na=0),Ct.Hc=0,Ct.Gc=0,Ct.ia=0;else{var vn,Ut;if(_t=an,an=An,rs=Re.Pa.Xc,ks=Re.ya[Re.aa+Re.ja],xn=Re.pb[ks.$b],Ot=ks.ad,ds=0,Ns=Re.rb[Re.sb-1],Rt=Vn=0,i(Ot,ds,0,384),ks.Za)var as=0,vi=rs[3];else{qt=r(16);var Cn=_t.Na+Ns.Na;if(Cn=Ol(an,rs[1],Cn,xn.Eb,0,qt,0),_t.Na=Ns.Na=(0<Cn)+0,1<Cn)_n(qt,0,Ot,ds);else{var Ts=qt[0]+3>>3;for(qt=0;256>qt;qt+=16)Ot[ds+qt]=Ts}as=1,vi=rs[0]}var Jt=15&_t.la,Hn=15&Ns.la;for(qt=0;4>qt;++qt){var Vs=1&Hn;for(Ts=Ut=0;4>Ts;++Ts)Jt=Jt>>1|(Vs=(Cn=Ol(an,vi,Cn=Vs+(1&Jt),xn.Sc,as,Ot,ds))>as)<<7,Ut=Ut<<2|(3<Cn?3:1<Cn?2:Ot[ds+0]!=0),ds+=16;Jt>>=4,Hn=Hn>>1|Vs<<7,Vn=(Vn<<8|Ut)>>>0}for(vi=Jt,as=Hn>>4,vn=0;4>vn;vn+=2){for(Ut=0,Jt=_t.la>>4+vn,Hn=Ns.la>>4+vn,qt=0;2>qt;++qt){for(Vs=1&Hn,Ts=0;2>Ts;++Ts)Cn=Vs+(1&Jt),Jt=Jt>>1|(Vs=0<(Cn=Ol(an,rs[2],Cn,xn.Qc,0,Ot,ds)))<<3,Ut=Ut<<2|(3<Cn?3:1<Cn?2:Ot[ds+0]!=0),ds+=16;Jt>>=2,Hn=Hn>>1|Vs<<5}Rt|=Ut<<4*vn,vi|=Jt<<4<<vn,as|=(240&Hn)<<vn}_t.la=vi,Ns.la=as,ks.Hc=Vn,ks.Gc=Rt,ks.ia=43690&Rt?0:xn.ia,rs=!(Vn|Rt)}if(0<Re.L&&(Re.wa[Re.Y+Re.ja]=Re.gd[Ct.$b][Ct.Za],Re.wa[Re.Y+Re.ja].La|=!rs),An.Ka)return In(Et,7,"Premature end-of-file encountered.")}if(Na(Et),Re=Un,An=1,Ct=(Xe=Et).D,_t=0<Xe.L&&Xe.M>=Xe.zb&&Xe.M<=Xe.Va,Xe.Aa==0)t:{if(Ct.M=Xe.M,Ct.uc=_t,qr(Xe,Ct),An=1,Ct=(Ut=Xe.D).Nb,_t=(Rt=ud[Xe.L])*Xe.R,an=Rt/2*Xe.B,qt=16*Ct*Xe.R,Ts=8*Ct*Xe.B,rs=Xe.sa,ks=Xe.ta-_t+qt,xn=Xe.qa,Ot=Xe.ra-an+Ts,ds=Xe.Ha,Ns=Xe.Ia-an+Ts,Hn=(Jt=Ut.M)==0,Vn=Jt>=Xe.Va-1,Xe.Aa==2&&qr(Xe,Ut),Ut.uc)for(Vs=(Cn=Xe).D.M,e(Cn.D.uc),Ut=Cn.yb;Ut<Cn.Hb;++Ut){as=Ut,vi=Vs;var _s=(Hs=(os=Cn).D).Nb;vn=os.R;var Hs=Hs.wa[Hs.Y+as],Gs=os.sa,Is=os.ta+16*_s*vn+16*as,Ys=Hs.dd,nn=Hs.tc;if(nn!=0)if(e(3<=nn),os.L==1)0<as&&ig(Gs,Is,vn,nn+4),Hs.La&&ag(Gs,Is,vn,nn),0<vi&&sg(Gs,Is,vn,nn+4),Hs.La&&rg(Gs,Is,vn,nn);else{var Zs=os.B,bi=os.qa,Oa=os.ra+8*_s*Zs+8*as,fr=os.Ha,os=os.Ia+8*_s*Zs+8*as;_s=Hs.ld,0<as&&(Km(Gs,Is,vn,nn+4,Ys,_s),Qm(bi,Oa,fr,os,Zs,nn+4,Ys,_s)),Hs.La&&(eg(Gs,Is,vn,nn,Ys,_s),ng(bi,Oa,fr,os,Zs,nn,Ys,_s)),0<vi&&(Zm(Gs,Is,vn,nn+4,Ys,_s),Jm(bi,Oa,fr,os,Zs,nn+4,Ys,_s)),Hs.La&&(Xm(Gs,Is,vn,nn,Ys,_s),tg(bi,Oa,fr,os,Zs,nn,Ys,_s))}}if(Xe.ia&&alert("todo:DitherRow"),Re.put!=null){if(Ut=16*Jt,Jt=16*(Jt+1),Hn?(Re.y=Xe.sa,Re.O=Xe.ta+qt,Re.f=Xe.qa,Re.N=Xe.ra+Ts,Re.ea=Xe.Ha,Re.W=Xe.Ia+Ts):(Ut-=Rt,Re.y=rs,Re.O=ks,Re.f=xn,Re.N=Ot,Re.ea=ds,Re.W=Ns),Vn||(Jt-=Rt),Jt>Re.o&&(Jt=Re.o),Re.F=null,Re.J=null,Xe.Fa!=null&&0<Xe.Fa.length&&Ut<Jt&&(Re.J=is(Xe,Re,Ut,Jt-Ut),Re.F=Xe.mb,Re.F==null&&Re.F.length==0)){An=In(Xe,3,"Could not decode alpha data.");break t}Ut<Re.j&&(Rt=Re.j-Ut,Ut=Re.j,e(!(1&Rt)),Re.O+=Xe.R*Rt,Re.N+=Xe.B*(Rt>>1),Re.W+=Xe.B*(Rt>>1),Re.F!=null&&(Re.J+=Re.width*Rt)),Ut<Jt&&(Re.O+=Re.v,Re.N+=Re.v>>1,Re.W+=Re.v>>1,Re.F!=null&&(Re.J+=Re.v),Re.ka=Ut-Re.j,Re.U=Re.va-Re.v,Re.T=Jt-Ut,An=Re.put(Re))}Ct+1!=Xe.Ic||Vn||(s(Xe.sa,Xe.ta-_t,rs,ks+16*Xe.R,_t),s(Xe.qa,Xe.ra-an,xn,Ot+8*Xe.B,an),s(Xe.Ha,Xe.Ia-an,ds,Ns+8*Xe.B,an))}if(!An)return In(Et,6,"Output aborted.")}return 1})(Y,oe)),oe.bc!=null&&oe.bc(oe),ue&=1}return ue?(Y.cb=0,ue):0})(p,N)||(g=p.a)}}else g=p.a}g==0&&B.Oa!=null&&B.Oa.fd&&(g=Ds(B.ba))}B=g}z=B!=0?null:11>z?$.f.RGBA.eb:$.f.kb.y}else z=null;return z};var jg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(M,V){for(var _="",T=0;T<4;T++)_+=String.fromCharCode(M[V++]);return _}function u(M,V){return M[V+0]|M[V+1]<<8}function f(M,V){return(M[V+0]|M[V+1]<<8|M[V+2]<<16)>>>0}function m(M,V){return(M[V+0]|M[V+1]<<8|M[V+2]<<16|M[V+3]<<24)>>>0}new c;var h=[0],y=[0],x=[],w=new c,S=n,j=(function(M,V){var _={},T=0,W=!1,D=0,Q=0;if(_.frames=[],!(function(R,U){for(var H=0;H<4;H++)if(R[U+H]!="RIFF".charCodeAt(H))return!0;return!1})(M,V)){for(m(M,V+=4),V+=8;V<M.length;){var ne=d(M,V),ae=m(M,V+=4);V+=4;var F=ae+(1&ae);switch(ne){case"VP8 ":case"VP8L":_.frames[T]===void 0&&(_.frames[T]={}),(ge=_.frames[T]).src_off=W?Q:V-8,ge.src_size=D+ae+8,T++,W&&(W=!1,D=0,Q=0);break;case"VP8X":(ge=_.header={}).feature_flags=M[V];var ce=V+4;ge.canvas_width=1+f(M,ce),ce+=3,ge.canvas_height=1+f(M,ce),ce+=3;break;case"ALPH":W=!0,D=F+8,Q=V-8;break;case"ANIM":(ge=_.header).bgcolor=m(M,V),ce=V+4,ge.loop_count=u(M,ce),ce+=2;break;case"ANMF":var Se,ge;(ge=_.frames[T]={}).offset_x=2*f(M,V),V+=3,ge.offset_y=2*f(M,V),V+=3,ge.width=1+f(M,V),V+=3,ge.height=1+f(M,V),V+=3,ge.duration=f(M,V),V+=3,Se=M[V++],ge.dispose=1&Se,ge.blend=Se>>1&1}ne!="ANMF"&&(V+=F)}return _}})(S,0);j.response=S,j.rgbaoutput=!0,j.dataurl=!1;var C=j.header?j.header:null,L=j.frames?j.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],y=[C.canvas_width];for(var P=0;P<L.length&&L[P].blend!=0;P++);}var O=L[0],k=w.WebPDecodeRGBA(S,O.src_off,O.src_size,y,h);O.rgba=k,O.imgwidth=y[0],O.imgheight=h[0];for(var A=0;A<y[0]*h[0]*4;A++)x[A]=k[A];return this.width=y,this.height=h,this.data=x,this}(function(n){var e,t,s,i,r,a,o,c,d,u=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new a,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new a,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=R;Object.defineProperty(this,"pdf",{get:function(){return U}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(ye){H=!!ye}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(ye){te=!!ye}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ye){isNaN(ye)||(re=ye)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(ye){isNaN(ye)||(le=ye)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ye){var J;typeof ye=="number"?J=[ye,ye,ye,ye]:((J=new Array(4))[0]=ye[0],J[1]=ye.length>=2?ye[1]:J[0],J[2]=ye.length>=3?ye[2]:J[0],J[3]=ye.length>=4?ye[3]:J[1]),d.margin=J}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(ye){xe=ye}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(ye){me=ye}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(ye){we=ye}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ye){ye instanceof u&&(d=ye)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ye){d.path=ye}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(ye){Me=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var J;J=m(ye),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var J=m(ye);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ee=null,Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(ye){Ee=null,Oe=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var J;if(this.ctx.font=ye,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Pt=J[1];J[2];var wt=J[3],at=J[4];J[5];var Ie=J[6],K=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(at)[2];at=Math.floor(K==="px"?parseFloat(at)*this.pdf.internal.scaleFactor:K==="em"?parseFloat(at)*this.pdf.getFontSize():parseFloat(at)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(at);var ee=(function(lt){var Ve,Yt,It=[],Je=lt.trim();if(Je==="")return Zf;if(Je in k1)return[k1[Je]];for(;Je!=="";){switch(Yt=null,Ve=(Je=_1(Je)).charAt(0)){case'"':case"'":Yt=_P(Je.substring(1),Ve);break;default:Yt=jP(Je)}if(Yt===null||(It.push(Yt[0]),(Je=_1(Yt[1]))!==""&&Je.charAt(0)!==","))return Zf;Je=Je.replace(/^,/,"")}return It})(Ie);if(this.fontFaces){var he=(function(lt,Ve){if(Ee===null){var Yt=(function(It){var Je=[];return Object.keys(It).forEach(function(xt){It[xt].forEach(function($t){var ct=null;switch($t){case"bold":ct={family:xt,weight:"bold"};break;case"italic":ct={family:xt,style:"italic"};break;case"bolditalic":ct={family:xt,weight:"bold",style:"italic"};break;case"":case"normal":ct={family:xt}}ct!==null&&(ct.ref={name:xt,style:$t},Je.push(ct))})}),Je})(lt.getFontList());Ee=(function(It){for(var Je={},xt=0;xt<It.length;++xt){var $t=Yf(It[xt]),ct=$t.family,Mt=$t.stretch,Nt=$t.style,Sn=$t.weight;Je[ct]=Je[ct]||{},Je[ct][Mt]=Je[ct][Mt]||{},Je[ct][Mt][Nt]=Je[ct][Mt][Nt]||{},Je[ct][Mt][Nt][Sn]=$t}return Je})(Yt.concat(Ve))}return Ee})(this.pdf,this.fontFaces),ke=ee.map(function(lt){return{family:lt,stretch:"normal",weight:wt,style:Pt}}),Ce=(function(lt,Ve,Yt){for(var It=(Yt=Yt||{}).defaultFontFamily||"times",Je=Object.assign({},NP,Yt.genericFontFamilies||{}),xt=null,$t=null,ct=0;ct<Ve.length;++ct)if(Je[(xt=Yf(Ve[ct])).family]&&(xt.family=Je[xt.family]),lt.hasOwnProperty(xt.family)){$t=lt[xt.family];break}if(!($t=$t||lt[It]))throw new Error("Could not find a font-family for the rule '"+N1(xt)+"' and default family '"+It+"'.");if($t=(function(Mt,Nt){if(Nt[Mt])return Nt[Mt];var Sn=$p[Mt],$n=Sn<=$p.normal?-1:1,Kt=S1(Nt,Z2,Sn,$n);if(!Kt)throw new Error("Could not find a matching font-stretch value for "+Mt);return Kt})(xt.stretch,$t),$t=(function(Mt,Nt){if(Nt[Mt])return Nt[Mt];for(var Sn=Y2[Mt],$n=0;$n<Sn.length;++$n)if(Nt[Sn[$n]])return Nt[Sn[$n]];throw new Error("Could not find a matching font-style for "+Mt)})(xt.style,$t),!($t=(function(Mt,Nt){if(Nt[Mt])return Nt[Mt];if(Mt===400&&Nt[500])return Nt[500];if(Mt===500&&Nt[400])return Nt[400];var Sn=kP[Mt],$n=S1(Nt,K2,Sn,Mt<400?-1:1);if(!$n)throw new Error("Could not find a matching font-weight for value "+Mt);return $n})(xt.weight,$t)))throw new Error("Failed to resolve a font for the rule '"+N1(xt)+"'.");return $t})(he,ke);this.pdf.setFont(Ce.ref.name,Ce.ref.style)}else{var ve="";(wt==="bold"||parseInt(wt,10)>=700||Pt==="bold")&&(ve="bold"),Pt==="italic"&&(ve+="italic"),ve.length===0&&(ve="normal");for(var De="",nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<ee.length;Be++){if(this.pdf.internal.getFont(ee[Be],ve,{noFallback:!0,disableWarning:!0})!==void 0){De=ee[Be];break}if(ve==="bolditalic"&&this.pdf.internal.getFont(ee[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)De=ee[Be],ve="bold";else if(this.pdf.internal.getFont(ee[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){De=ee[Be],ve="normal";break}}if(De===""){for(var We=0;We<ee.length;We++)if(nt[ee[We]]){De=nt[ee[We]];break}}De=De===""?"Times":De,this.pdf.setFont(De,ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){L.call(this,"fill",!1)},f.prototype.stroke=function(){L.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,U){if(isNaN(R)||isNaN(U))throw Xt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new a(R,U));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(R,U)},f.prototype.closePath=function(){var R=new a(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Ht(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){R=new a(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(R.x,R.y)},f.prototype.lineTo=function(R,U){if(isNaN(R)||isNaN(U))throw Xt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new a(R,U));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(H.x,H.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,U,H,te){if(isNaN(H)||isNaN(te)||isNaN(R)||isNaN(U))throw Xt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new a(H,te)),le=this.ctx.transform.applyToPoint(new a(R,U));this.path.push({type:"qct",x1:le.x,y1:le.y,x:re.x,y:re.y}),this.ctx.lastPoint=new a(re.x,re.y)},f.prototype.bezierCurveTo=function(R,U,H,te,re,le){if(isNaN(re)||isNaN(le)||isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te))throw Xt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new a(re,le)),me=this.ctx.transform.applyToPoint(new a(R,U)),we=this.ctx.transform.applyToPoint(new a(H,te));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:we.x,y2:we.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new a(xe.x,xe.y)},f.prototype.arc=function(R,U,H,te,re,le){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te)||isNaN(re))throw Xt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new a(R,U));R=xe.x,U=xe.y;var me=this.ctx.transform.applyToPoint(new a(0,H)),we=this.ctx.transform.applyToPoint(new a(0,0));H=Math.sqrt(Math.pow(me.x-we.x,2)+Math.pow(me.y-we.y,2))}Math.abs(re-te)>=2*Math.PI&&(te=0,re=2*Math.PI),this.path.push({type:"arc",x:R,y:U,radius:H,startAngle:te,endAngle:re,counterclockwise:le})},f.prototype.arcTo=function(R,U,H,te,re){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,U,H,te){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te))throw Xt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,U),this.lineTo(R+H,U),this.lineTo(R+H,U+te),this.lineTo(R,U+te),this.lineTo(R,U),this.lineTo(R+H,U),this.lineTo(R,U)},f.prototype.fillRect=function(R,U,H,te){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te))throw Xt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,U,H,te),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},f.prototype.strokeRect=function(R,U,H,te){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te))throw Xt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(R,U,H,te),this.stroke())},f.prototype.clearRect=function(R,U,H,te){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te))throw Xt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,U,H,te))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(U),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var U,H,te,re;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))U=0,H=0,te=0,re=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(le!==null)U=parseInt(le[1]),H=parseInt(le[2]),te=parseInt(le[3]),re=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)U=parseInt(le[1]),H=parseInt(le[2]),te=parseInt(le[3]),re=parseFloat(le[4]);else{if(re=1,typeof R=="string"&&R.charAt(0)!=="#"){var xe=new $2(R);R=xe.ok?xe.toHex():"#000000"}R.length===4?(U=R.substring(1,2),U+=U,H=R.substring(2,3),H+=H,te=R.substring(3,4),te+=te):(U=R.substring(1,3),H=R.substring(3,5),te=R.substring(5,7)),U=parseInt(U,16),H=parseInt(H,16),te=parseInt(te,16)}}return{r:U,g:H,b:te,a:re,style:R}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,U,H,te){if(isNaN(U)||isNaN(H)||typeof R!="string")throw Xt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!h.call(this)){var re=F(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;T.call(this,{text:R,x:U,y:H,scale:le,angle:re,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(R,U,H,te){if(isNaN(U)||isNaN(H)||typeof R!="string")throw Xt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){te=isNaN(te)?void 0:te;var re=F(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;T.call(this,{text:R,x:U,y:H,scale:le,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Xt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,H=this.pdf.internal.scaleFactor,te=U.internal.getFontSize(),re=U.getStringUnitWidth(R)*te/U.internal.scaleFactor;return new function(le){var xe=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:re*=Math.round(96*H/72*1e4)/1e4})},f.prototype.scale=function(R,U){if(isNaN(R)||isNaN(U))throw Xt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(R,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.rotate=function(R){if(isNaN(R))throw Xt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.translate=function(R,U){if(isNaN(R)||isNaN(U))throw Xt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,R,U);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.transform=function(R,U,H,te,re,le){if(isNaN(R)||isNaN(U)||isNaN(H)||isNaN(te)||isNaN(re)||isNaN(le))throw Xt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(R,U,H,te,re,le);this.ctx.transform=this.ctx.transform.multiply(xe)},f.prototype.setTransform=function(R,U,H,te,re,le){R=isNaN(R)?1:R,U=isNaN(U)?0:U,H=isNaN(H)?0:H,te=isNaN(te)?1:te,re=isNaN(re)?0:re,le=isNaN(le)?0:le,this.ctx.transform=new c(R,U,H,te,re,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,U,H,te,re,le,xe,me,we){var Me=this.pdf.getImageProperties(R),Ee=1,Oe=1,ye=1,J=1;te!==void 0&&me!==void 0&&(ye=me/te,J=we/re,Ee=Me.width/te*me/te,Oe=Me.height/re*we/re),le===void 0&&(le=U,xe=H,U=0,H=0),te!==void 0&&me===void 0&&(me=te,we=re),te===void 0&&me===void 0&&(me=Me.width,we=Me.height);for(var Pt,wt=this.ctx.transform.decompose(),at=F(wt.rotate.shx),Ie=new c,K=(Ie=(Ie=(Ie=Ie.multiply(wt.translate)).multiply(wt.skew)).multiply(wt.scale)).applyToRectangle(new o(le-U*ye,xe-H*J,te*Ee,re*Oe)),ee=w.call(this,K),he=[],ke=0;ke<ee.length;ke+=1)he.indexOf(ee[ke])===-1&&he.push(ee[ke]);if(C(he),this.autoPaging)for(var Ce=he[0],ve=he[he.length-1],De=Ce;De<ve+1;De++){this.pdf.setPage(De);var nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=De===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=De===1?0:We+(De-2)*lt;if(this.ctx.clip_path.length!==0){var Yt=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Pt,this.posX+this.margin[3],-Ve+Be+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Yt}var It=JSON.parse(JSON.stringify(K));It=j([It],this.posX+this.margin[3],-Ve+Be+this.ctx.prevPageLastElemOffset)[0];var Je=(De>Ce||De<ve)&&x.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,lt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",It.x,It.y,It.w,It.h,null,null,at),Je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",K.x,K.y,K.w,K.h,null,null,at)};var w=function(R,U,H){var te=[];U=U||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":te.push(Math.floor((R.y+re)/H)+1);break;case"arc":te.push(Math.floor((R.y+re-R.radius)/H)+1),te.push(Math.floor((R.y+re+R.radius)/H)+1);break;case"qct":var le=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);te.push(Math.floor((le.y+re)/H)+1),te.push(Math.floor((le.y+le.h+re)/H)+1);break;case"bct":var xe=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);te.push(Math.floor((xe.y+re)/H)+1),te.push(Math.floor((xe.y+xe.h+re)/H)+1);break;case"rect":te.push(Math.floor((R.y+re)/H)+1),te.push(Math.floor((R.y+R.h+re)/H)+1)}for(var me=0;me<te.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<te[me];)S.call(this);return te},S=function(){var R=this.fillStyle,U=this.strokeStyle,H=this.font,te=this.lineCap,re=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=U,this.font=H,this.lineCap=te,this.lineWidth=re,this.lineJoin=le},j=function(R,U,H){for(var te=0;te<R.length;te++)switch(R[te].type){case"bct":R[te].x2+=U,R[te].y2+=H;case"qct":R[te].x1+=U,R[te].y1+=H;default:R[te].x+=U,R[te].y+=H}return R},C=function(R){return R.sort(function(U,H){return U-H})},L=function(R,U){for(var H,te,re=this.fillStyle,le=this.strokeStyle,xe=this.lineCap,me=this.lineWidth,we=Math.abs(me*this.ctx.transform.scaleX),Me=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),ye=[],J=0;J<Oe.length;J++)if(Oe[J].x!==void 0)for(var Pt=w.call(this,Oe[J]),wt=0;wt<Pt.length;wt+=1)ye.indexOf(Pt[wt])===-1&&ye.push(Pt[wt]);for(var at=0;at<ye.length;at++)for(;this.pdf.internal.getNumberOfPages()<ye[at];)S.call(this);if(C(ye),this.autoPaging)for(var Ie=ye[0],K=ye[ye.length-1],ee=Ie;ee<K+1;ee++){this.pdf.setPage(ee),this.fillStyle=re,this.strokeStyle=le,this.lineCap=xe,this.lineWidth=we,this.lineJoin=Me;var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=ee===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=ee===1?0:Ce+(ee-2)*ve;if(this.ctx.clip_path.length!==0){var nt=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(H,this.posX+this.margin[3],-De+ke+this.ctx.prevPageLastElemOffset),P.call(this,R,!0),this.path=nt}if(te=JSON.parse(JSON.stringify(Ee)),this.path=j(te,this.posX+this.margin[3],-De+ke+this.ctx.prevPageLastElemOffset),U===!1||ee===0){var Be=(ee>Ie||ee<K)&&x.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,ve,null).clip().discardPath()),P.call(this,R,U),Be&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=we,P.call(this,R,U),this.lineWidth=me;this.path=Ee},P=function(R,U){if((R!=="stroke"||U||!y.call(this))&&(R==="stroke"||U||!h.call(this))){for(var H,te,re=[],le=this.path,xe=0;xe<le.length;xe++){var me=le[xe];switch(me.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:me,deltas:[],abs:[]});break;case"lt":var we=re.length;if(le[xe-1]&&!isNaN(le[xe-1].x)&&(H=[me.x-le[xe-1].x,me.y-le[xe-1].y],we>0)){for(;we>=0;we--)if(re[we-1].close!==!0&&re[we-1].begin!==!0){re[we-1].deltas.push(H),re[we-1].abs.push(me);break}}break;case"bct":H=[me.x1-le[xe-1].x,me.y1-le[xe-1].y,me.x2-le[xe-1].x,me.y2-le[xe-1].y,me.x-le[xe-1].x,me.y-le[xe-1].y],re[re.length-1].deltas.push(H);break;case"qct":var Me=le[xe-1].x+2/3*(me.x1-le[xe-1].x),Ee=le[xe-1].y+2/3*(me.y1-le[xe-1].y),Oe=me.x+2/3*(me.x1-me.x),ye=me.y+2/3*(me.y1-me.y),J=me.x,Pt=me.y;H=[Me-le[xe-1].x,Ee-le[xe-1].y,Oe-le[xe-1].x,ye-le[xe-1].y,J-le[xe-1].x,Pt-le[xe-1].y],re[re.length-1].deltas.push(H);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(me)}}te=U?null:R==="stroke"?"stroke":"fill";for(var wt=!1,at=0;at<re.length;at++)if(re[at].arc)for(var Ie=re[at].abs,K=0;K<Ie.length;K++){var ee=Ie[K];ee.type==="arc"?A.call(this,ee.x,ee.y,ee.radius,ee.startAngle,ee.endAngle,ee.counterclockwise,void 0,U,!wt):W.call(this,ee.x,ee.y),wt=!0}else if(re[at].close===!0)this.pdf.internal.out("h"),wt=!1;else if(re[at].begin!==!0){var he=re[at].start.x,ke=re[at].start.y;D.call(this,re[at].deltas,he,ke),wt=!0}te&&M.call(this,te),U&&V.call(this)}},O=function(R){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-H;case"top":return R+U-H;case"hanging":return R+U-2*H;case"middle":return R+U/2-H;default:return R}},k=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(U,H){this.colorStops.push([U,H])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(R,U,H,te,re,le,xe,me,we){for(var Me=ne.call(this,H,te,re,le),Ee=0;Ee<Me.length;Ee++){var Oe=Me[Ee];Ee===0&&(we?_.call(this,Oe.x1+R,Oe.y1+U):W.call(this,Oe.x1+R,Oe.y1+U)),Q.call(this,R,U,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}me?V.call(this):M.call(this,xe)},M=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(R,U){this.pdf.internal.out(t(R)+" "+s(U)+" m")},T=function(R){var U;switch(R.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var H=this.pdf.getTextDimensions(R.text),te=O.call(this,R.y),re=k.call(this,te)-H.h,le=this.ctx.transform.applyToPoint(new a(R.x,te)),xe=this.ctx.transform.decompose(),me=new c;me=(me=(me=me.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var we,Me,Ee,Oe=this.ctx.transform.applyToRectangle(new o(R.x,te,H.w,H.h)),ye=me.applyToRectangle(new o(R.x,re,H.w,H.h)),J=w.call(this,ye),Pt=[],wt=0;wt<J.length;wt+=1)Pt.indexOf(J[wt])===-1&&Pt.push(J[wt]);if(C(Pt),this.autoPaging)for(var at=Pt[0],Ie=Pt[Pt.length-1],K=at;K<Ie+1;K++){this.pdf.setPage(K);var ee=K===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ke=this.pdf.internal.pageSize.height-this.margin[2],Ce=ke-this.margin[0],ve=this.pdf.internal.pageSize.width-this.margin[1],De=ve-this.margin[3],nt=K===1?0:he+(K-2)*Ce;if(this.ctx.clip_path.length!==0){var Be=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(we,this.posX+this.margin[3],-1*nt+ee),P.call(this,"fill",!0),this.path=Be}var We=j([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-nt+ee+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*R.scale),Ee=this.lineWidth,this.lineWidth=Ee*R.scale);var lt=this.autoPaging!=="text";if(lt||We.y+We.h<=ke){if(lt||We.y>=ee&&We.x<=ve){var Ve=lt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||ve-We.x)[0],Yt=j([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-nt+ee+this.ctx.prevPageLastElemOffset)[0],It=lt&&(K>at||K<Ie)&&x.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Ce,null).clip().discardPath()),this.pdf.text(Ve,Yt.x,Yt.y,{angle:R.angle,align:U,renderingMode:R.renderingMode}),It&&this.pdf.restoreGraphicsState()}}else We.y<ke&&(this.ctx.prevPageLastElemOffset+=ke-We.y);R.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ee)}else R.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*R.scale),Ee=this.lineWidth,this.lineWidth=Ee*R.scale),this.pdf.text(R.text,le.x+this.posX,le.y+this.posY,{angle:R.angle,align:U,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ee)},W=function(R,U,H,te){H=H||0,te=te||0,this.pdf.internal.out(t(R+H)+" "+s(U+te)+" l")},D=function(R,U,H){return this.pdf.lines(R,U,H,null,null)},Q=function(R,U,H,te,re,le,xe,me){this.pdf.internal.out([e(i(H+R)),e(r(te+U)),e(i(re+R)),e(r(le+U)),e(i(xe+R)),e(r(me+U)),"c"].join(" "))},ne=function(R,U,H,te){for(var re=2*Math.PI,le=Math.PI/2;U>H;)U-=re;var xe=Math.abs(H-U);xe<re&&te&&(xe=re-xe);for(var me=[],we=te?-1:1,Me=U;xe>1e-5;){var Ee=Me+we*Math.min(xe,le);me.push(ae.call(this,R,Me,Ee)),xe-=Math.abs(Ee-Me),Me=Ee}return me},ae=function(R,U,H){var te=(H-U)/2,re=R*Math.cos(te),le=R*Math.sin(te),xe=re,me=-le,we=xe*xe+me*me,Me=we+xe*re+me*le,Ee=4/3*(Math.sqrt(2*we*Me)-Me)/(xe*le-me*re),Oe=xe-Ee*me,ye=me+Ee*xe,J=Oe,Pt=-ye,wt=te+U,at=Math.cos(wt),Ie=Math.sin(wt);return{x1:R*Math.cos(U),y1:R*Math.sin(U),x2:Oe*at-ye*Ie,y2:Oe*Ie+ye*at,x3:J*at-Pt*Ie,y3:J*Ie+Pt*at,x4:R*Math.cos(H),y4:R*Math.sin(H)}},F=function(R){return 180*R/Math.PI},ce=function(R,U,H,te,re,le){var xe=R+.5*(H-R),me=U+.5*(te-U),we=re+.5*(H-re),Me=le+.5*(te-le),Ee=Math.min(R,re,xe,we),Oe=Math.max(R,re,xe,we),ye=Math.min(U,le,me,Me),J=Math.max(U,le,me,Me);return new o(Ee,ye,Oe-Ee,J-ye)},Se=function(R,U,H,te,re,le,xe,me){var we,Me,Ee,Oe,ye,J,Pt,wt,at,Ie,K,ee,he,ke,Ce=H-R,ve=te-U,De=re-H,nt=le-te,Be=xe-re,We=me-le;for(Me=0;Me<41;Me++)at=(Pt=(Ee=R+(we=Me/40)*Ce)+we*((ye=H+we*De)-Ee))+we*(ye+we*(re+we*Be-ye)-Pt),Ie=(wt=(Oe=U+we*ve)+we*((J=te+we*nt)-Oe))+we*(J+we*(le+we*We-J)-wt),Me==0?(K=at,ee=Ie,he=at,ke=Ie):(K=Math.min(K,at),ee=Math.min(ee,Ie),he=Math.max(he,at),ke=Math.max(ke,Ie));return new o(Math.round(K),Math.round(ee),Math.round(he-K),Math.round(ke-ee))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,U,H=(R=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:U}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(et.API),(function(n){var e=function(a){var o,c,d,u,f,m,h,y,x,w;for(c=[],d=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>d;d+=4)(f=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))!==0?(m=(f=((f=((f=((f=(f-(w=f%85))/85)-(x=f%85))/85)-(y=f%85))/85)-(h=f%85))/85)%85,c.push(m+33,h+33,y+33,x+33,w+33)):c.push(122);return(function(S,j){for(var C=j;C>0;C--)S.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},t=function(a){var o,c,d,u,f,m=String,h="length",y=255,x="charCodeAt",w="slice",S="replace";for(a[w](-2),a=a[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),d=[],u=0,f=(a+=o="uuuuu"[w](a[h]%5||5))[h];f>u;u+=5)c=52200625*(a[x](u)-33)+614125*(a[x](u+1)-33)+7225*(a[x](u+2)-33)+85*(a[x](u+3)-33)+(a[x](u+4)-33),d.push(y&c>>24,y&c>>16,y&c>>8,y&c);return(function(j,C){for(var L=C;L>0;L--)j.pop()})(d,o[h]),m.fromCharCode.apply(m,d)},s=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var c="",d=0;d<a.length;d+=2)c+=String.fromCharCode("0x"+(a[d]+a[d+1]));return c},r=function(a){for(var o=new Uint8Array(a.length),c=a.length;c--;)o[c]=a.charCodeAt(c);return(o=Ip(o)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};n.processDataByFilters=function(a,o){var c=0,d=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=r(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})(et.API),(function(n){n.loadFile=function(e,t,s){return(function(i,r,a){r=r!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(c,d,u){var f=new XMLHttpRequest,m=0,h=function(y){var x=y.length,w=[],S=String.fromCharCode;for(m=0;m<x;m+=1)w.push(S(255&y.charCodeAt(m)));return w.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(h(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return h(f.responseText)})(i,r,a)}catch{}return o})(e,t,s)},n.loadImageFile=n.loadFile})(et.API),(function(n){function e(){return(ft.html2canvas?Promise.resolve(ft.html2canvas):Dr(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(ft.DOMPurify?Promise.resolve(ft.DOMPurify):Dr(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var c=Ht(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(o,c){var d=document.createElement(o);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},r=function o(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(o(f,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},a=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),d);return(u=u.setProgress(1,o,1,[o])).set(c)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,c){return o.__proto__=c||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=r(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var y=u[h],x=y.src.find(function(w){return w.format==="truetype"});x&&d.addFont(x.url,y.ref.name,y.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},a.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(s(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in a.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},a.prototype.get=function(o,c){return this.then(function(){var d=o in a.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},a.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(o=o||et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,c,d,u){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,c,d,u){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(u,f){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,f).then(function(m){return d.updateProgress(1),m})})},a.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),c&&(c=c.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),m=d.call(f,o,c);return a.convert(m,u.__proto__)},a.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},a.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},a.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return a.convert(c,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,et.getPageSize=function(o,c,d){if(Ht(o)==="object"){var u=o;o=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var f,m=(""+d).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var y,x=0,w=0;if(h.hasOwnProperty(m))x=h[m][1]/f,w=h[m][0]/f;else try{x=d[1],w=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",w>x&&(y=w,w=x,x=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>w&&(y=w,w=x,x=y)}return{width:w,height:x,unit:c,k:f,orientation:o}},n.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Yf):null;var d=new a(c);return c.worker?d:d.from(o).doCallback()}})(et.API),et.API.addJS=function(n){return A1=n,this.internal.events.subscribe("postPutResources",function(){Ud=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ud+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),j1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+A1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ud!==void 0&&j1!==void 0&&this.internal.out("/Names <</JavaScript "+Ud+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var a=i[r],o=s.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(r=0;r<d;r++){var f=t.internal.newObject();u.push(f);var m=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<u.length;r++)t.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,i,r){var a={title:i,options:r,children:[]};return s==null&&(s=this.root),s.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<s.children.length;r++){var a=s.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(s)),r>0&&this.line("/Prev "+this.makeRef(s.children[r-1])),r<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,i){for(var r=0;r<i.children.length;r++)s.count++,this.count_r(s,i.children[r]);return s.count}}])})(et.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,i,r,a,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(f){for(var m,h=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,x={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=h,e.indexOf(f.charCodeAt(w+1))!==-1){m=256*f.charCodeAt(w+5)+f.charCodeAt(w+6),x={width:256*f.charCodeAt(w+7)+f.charCodeAt(w+8),height:m,numcomponents:f.charCodeAt(w+9)};break}h=256*f.charCodeAt(w+2)+f.charCodeAt(w+3)}return x})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:s,alias:i}}return u}})(et.API),et.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,r=cP(n,{checkCrc:!0}),a=r.width,o=r.height,c=r.channels,d=r.palette,u=r.depth;i=d&&c===1?(function(k){for(var A=k.width,M=k.height,V=k.data,_=k.palette,T=k.depth,W=!1,D=[],Q=[],ne=void 0,ae=!1,F=0,ce=0;ce<_.length;ce++){var Se=My(_[ce],4),ge=Se[0],R=Se[1],U=Se[2],H=Se[3];D.push(ge,R,U),H!=null&&(H===0?(F++,Q.length<1&&Q.push(ce)):H<255&&(ae=!0))}if(ae||F>1){W=!0,Q=void 0;var te=A*M;ne=new Uint8Array(te);for(var re=new DataView(V.buffer),le=0;le<te;le++){var xe=Kf(re,le,T),me=My(_[xe],4)[3];ne[le]=me}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:V,alphaBytes:ne,needSMask:W,palette:D,mask:Q}})(r):c===2||c===4?(function(k){for(var A=k.data,M=k.width,V=k.height,_=k.channels,T=k.depth,W=_===2?"DeviceGray":"DeviceRGB",D=_-1,Q=M*V,ne=D,ae=Q*ne,F=1*Q,ce=Math.ceil(ae*T/8),Se=Math.ceil(F*T/8),ge=new Uint8Array(ce),R=new Uint8Array(Se),U=new DataView(A.buffer),H=new DataView(ge.buffer),te=new DataView(R.buffer),re=!1,le=0;le<Q;le++){for(var xe=le*_,me=0;me<ne;me++)O1(H,Kf(U,xe+me,T),le*ne+me,T);var we=Kf(U,xe+ne,T);we<(1<<T)-1&&(re=!0),O1(te,we,1*le,T)}return{colorSpace:W,colorsPerPixel:D,colorBytes:ge,alphaBytes:R,needSMask:re}})(r):(function(k){var A=k.data,M=k.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:A instanceof Uint8Array?A:new Uint8Array(A.buffer),needSMask:!1}})(r);var f,m,h,y=i,x=y.colorSpace,w=y.colorsPerPixel,S=y.colorBytes,j=y.alphaBytes,C=y.needSMask,L=y.palette,P=y.mask,O=null;return s!==et.API.image_compression.NONE&&typeof Ip=="function"?(O=(function(k){var A;switch(k){case et.API.image_compression.FAST:A=11;break;case et.API.image_compression.MEDIUM:A=13;break;case et.API.image_compression.SLOW:A=14;break;default:A=12}return A})(s),f=this.decode.FLATE_DECODE,m="/Predictor ".concat(O," "),n=M1(S,a*w,w,s),C&&(h=M1(j,a,1,s))):(f=void 0,m="",n=S,C&&(h=j)),m+="/Colors ".concat(w," /BitsPerComponent ").concat(u," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:t,data:n,index:e,filter:f,decodeParameters:m,transparency:P,palette:L,sMask:h,predictor:O,width:a,height:o,bitsPerComponent:u,colorSpace:x}}},(function(n){n.processGIF89A=function(e,t,s,i){var r=new PP(e),a=r.width,o=r.height,c=[];r.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:o},u=new Jf(100).encode(d,100);return n.processJPEG.call(this,u,t,s,i)},n.processGIF87A=n.processGIF89A})(et.API),wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:s,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Xt.log("bit decode error:"+t)}},wi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var r=this.datav.getUint8(this.pos++,!0),a=s*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[r>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},wi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var r=this.datav.getUint8(this.pos++,!0),a=s*this.width*4+2*i*4,o=r>>4,c=15&r,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},wi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*s;if(i<this.palette.length){var a=this.palette[i];this.data[r]=a.red,this.data[r+1]=a.green,this.data[r+2]=a.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},wi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&e)/e*255|0,o=(r>>5&e)/e*255|0,c=(r>>10&e)/e*255|0,d=r>>15?255:0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}this.pos+=n}},wi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,u=i*this.width*4+4*r;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=n}},wi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=r,this.data[a+1]=i,this.data[a+2]=s,this.data[a+3]=255}this.pos+=this.width%4}},wi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=a}},wi.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,i){var r=new wi(e,!1),a=r.width,o=r.height,c={data:r.getData(),width:a,height:o},d=new Jf(100).encode(c,100);return n.processJPEG.call(this,d,t,s,i)}})(et.API),F1.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,i){var r=new F1(e),a=r.width,o=r.height,c={data:r.getData(),width:a,height:o},d=new Jf(100).encode(c,100);return n.processJPEG.call(this,d,t,s,i)}})(et.API),et.API.processRGBA=function(n,e,t){for(var s=n.data,i=s.length,r=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,d=0;d<i;d+=4){var u=s[d],f=s[d+1],m=s[d+2],h=s[d+3];r[o++]=u,r[o++]=f,r[o++]=m,a[c++]=h}var y=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},et.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},To=et.API,Vd=To.getCharWidthsArray=function(n,e){var t,s,i=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=e.doKerning!==!1,m=0,h=n.length,y=0,x=o[0]||c,w=[];for(t=0;t<h;t++)s=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+a*(1e3/r)||0)/1e3):(m=f&&Ht(d[s])==="object"&&!isNaN(parseInt(d[s][y],10))?d[s][y]/u:0,w.push((o[s]||x)/c+m)),y=s;return w},C1=To.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return To.processArabic&&(n=To.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,i)/t:Vd.apply(this,arguments).reduce(function(r,a){return r+a},0)},L1=function(n,e,t,s){for(var i=[],r=0,a=n.length,o=0;r!==a&&o+e[r]<t;)o+=e[r],r++;i.push(n.slice(0,r));var c=r;for(o=0;r!==a;)o+e[r]>s&&(i.push(n.slice(c,r)),o=0,c=r),o+=e[r],r++;return c!==r&&i.push(n.slice(c,r)),i},P1=function(n,e,t){t||(t={});var s,i,r,a,o,c,d,u=[],f=[u],m=t.textIndent||0,h=0,y=0,x=n.split(" "),w=Vd.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var S=Array(c).join(" "),j=[];x.map(function(L){(L=L.split(/\s*\n/)).length>1?j=j.concat(L.map(function(P,O){return(O&&P.length?`
`:"")+P})):j.push(L[0])}),x=j,c=C1.apply(this,[S,t])}for(r=0,a=x.length;r<a;r++){var C=0;if(s=x[r],c&&s[0]==`
`&&(s=s.substr(1),C=1),m+h+(y=(i=Vd.apply(this,[s,t])).reduce(function(L,P){return L+P},0))>e||C){if(y>e){for(o=L1.apply(this,[s,i,e-(m+h),e]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);y=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(L,P){return L+P},0)}else u=[s];f.push(u),m=y+c,h=w}else u.push(s),m+=h+y,h=w}return d=c?function(L,P){return(P?S:"")+L.join(" ")}:function(L){return L.join(" ")},f.map(d)},To.splitTextToSize=function(n,e,t){var s,i=(t=t||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return f.metadata[m]?{widths:f.metadata[m].widths||{0:1},kerning:f.metadata[m].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=t.lineIndent;var o,c,d=[];for(o=0,c=s.length;o<c;o++)d=d.concat(P1.apply(this,[s[o],a,r]));return d},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},i={},r=0;r<16;r++)s[t[r]]=e[r],i[e[r]]=t[r];var a=function(m){return"0x"+parseInt(m,10).toString(16)},o=n.__fontmetrics__.compress=function(m){var h,y,x,w,S=["{"];for(var j in m){if(h=m[j],isNaN(parseInt(j,10))?y="'"+j+"'":(j=parseInt(j,10),y=(y=a(j).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof h=="number")h<0?(x=a(h).slice(3),w="-"):(x=a(h).slice(2),w=""),x=w+x.slice(0,-1)+i[x.slice(-1)];else{if(Ht(h)!=="object")throw new Error("Don't know what to do with value type "+Ht(h)+".");x=o(h)}S.push(y+x)}return S.push("}"),S.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,y,x,w,S={},j=1,C=S,L=[],P="",O="",k=m.length-1,A=1;A<k;A+=1)(w=m[A])=="'"?h?(x=h.join(""),h=void 0):h=[]:h?h.push(w):w=="{"?(L.push([C,x]),C={},x=void 0):w=="}"?((y=L.pop())[0][y[1]]=C,x=void 0,C=y[0]):w=="-"?j=-1:x===void 0?s.hasOwnProperty(w)?(P+=s[w],x=parseInt(P,16)*j,j=1,P=""):P+=w:s.hasOwnProperty(w)?(O+=s[w],C[x]=parseInt(O,16)*j,j=1,x=void 0,O=""):O+=w;return S},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var h=m.font,y=f.Unicode[h.postScriptName];y&&(h.metadata.Unicode={},h.metadata.Unicode.widths=y.widths,h.metadata.Unicode.kerning=y.kerning);var x=u.Unicode[h.postScriptName];x&&(h.metadata.Unicode.encoding=x,h.encoding=x.codePages[0])}])})(et.API),(function(n){var e=function(t){for(var s=t.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=t.charCodeAt(r);return i};n.API.events.push(["addFont",function(t){var s=void 0,i=t.font,r=t.instance;if(!i.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=r.existsFileInVFS(i.postScriptName)===!1?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(ru(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,s)}}])})(et),et.API.addSvgAsImage=function(n,e,t,s,i,r,a,o){if(isNaN(e)||isNaN(t))throw Xt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Xt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(ft.canvg?Promise.resolve(ft.canvg):Dr(()=>import("./index.es-CRTLou-M.js"),__vite__mapDeps([0,1,2,3]))).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,t,s,i,a,o)})},et.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(e,t);return this},et.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,i,r,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],d=0,u=0,f=0;function m(y,x){var w,S=!1;for(w=0;w<y.length;w+=1)y[w]===x&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var h=o.length;for(f=0;f<h;f+=1)t[o[f]].value=t[o[f]].defaultValue,t[o[f]].explicitSet=!1}if(Ht(n)==="object"){for(i in n)if(r=n[i],m(o,i)&&r!==void 0){if(t[i].type==="boolean"&&typeof r=="boolean")t[i].value=r;else if(t[i].type==="name"&&m(t[i].valueSet,r))t[i].value=r;else if(t[i].type==="integer"&&Number.isInteger(r))t[i].value=r;else if(t[i].type==="array"){for(d=0;d<r.length;d+=1)if(s=!0,r[d].length===1&&typeof r[d][0]=="number")c.push(String(r[d]-1));else if(r[d].length>1){for(u=0;u<r[d].length;u+=1)typeof r[d][u]!="number"&&(s=!1);s===!0&&c.push([r[d][0]-1,r[d][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in t)t[y].explicitSet===!0&&(t[y].type==="name"?x.push("/"+y+" /"+t[y].value):x.push("/"+y+" "+t[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(s)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=r.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+r+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(et.API),(function(n){var e=n.API,t=e.pdfEscape16=function(r,a){for(var o,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,m=r.length;f<m;++f){if(o=a.metadata.characterToGlyph(r.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=r.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},s=function(r){var a,o,c,d,u,f,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,m=(o=Object.keys(r).sort(function(h,y){return h-y})).length;f<m;f++)a=o[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),r[a]!==void 0&&r[a]!==null&&typeof r[a].toString=="function"&&(d=("0000"+r[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",y=0;y<m.length;y++)h+=String.fromCharCode(m[y]);var x=d();u({data:h,addLength1:!0,objectId:x}),c("endobj");var w=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var S=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Bo(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Bo(o.fontName)),c("/FontDescriptor "+S+" 0 R"),c("/W "+n.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+Bo(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,m="",h=0;h<f.length;h++)m+=String.fromCharCode(f[h]);var y=d();u({data:m,addLength1:!0,objectId:y}),c("endobj");var x=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var w=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Bo(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Bo(o.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(r)}]);var i=function(r){var a,o=r.text||"",c=r.x,d=r.y,u=r.options||{},f=r.mutex||{},m=f.pdfEscape,h=f.activeFontKey,y=f.fonts,x=h,w="",S=0,j="",C=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:f};for(j=o,x=h,Array.isArray(o)&&(j=o[0]),S=0;S<j.length;S+=1)y[x].metadata.hasOwnProperty("cmap")&&(a=y[x].metadata.cmap.unicode.codeMap[j[S].charCodeAt(0)]),a||j[S].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?w+=j[S]:w+="";var L="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?L=m(w,x).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(L=t(w,y[x])),f.isHex=!0,{text:L,x:c,y:d,options:u,mutex:f}};e.events.push(["postProcessText",function(r){var a=r.text||"",o=[],c={text:a,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([i(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(i(Object.assign({},c,{text:a[d]})).text);r.text=o}else r.text=i(Object.assign({},c,{text:a})).text}])})(et),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(et.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var i,r,a,o,c,d,u,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,C=0;this.__bidiEngine__={};var L=function(_){var T=_.charCodeAt(),W=T>>8,D=x[W];return D!==void 0?f[256*D+(255&T)]:W===252||W===253?"AL":S.test(W)?"L":W===8?"R":"N"},P=function(_){for(var T,W=0;W<_.length;W++){if((T=L(_.charAt(W)))==="L")return!1;if(T==="R")return!0}return!1},O=function(_,T,W,D){var Q,ne,ae,F,ce=T[D];switch(ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(ce="AN");break;case"AL":j=!0,ce="R";break;case"WS":case"BN":ce="N";break;case"CS":D<1||D+1>=T.length||(Q=W[D-1])!=="EN"&&Q!=="AN"||(ne=T[D+1])!=="EN"&&ne!=="AN"?ce="N":j&&(ne="AN"),ce=ne===Q?ne:"N";break;case"ES":ce=(Q=D>0?W[D-1]:"B")==="EN"&&D+1<T.length&&T[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&W[D-1]==="EN"){ce="EN";break}if(j){ce="N";break}for(ae=D+1,F=T.length;ae<F&&T[ae]==="ET";)ae++;ce=ae<F&&T[ae]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(F=T.length,ae=D+1;ae<F&&T[ae]==="NSM";)ae++;if(ae<F){var Se=_[D],ge=Se>=1425&&Se<=2303||Se===64286;if(Q=T[ae],ge&&(Q==="R"||Q==="AL")){ce="R";break}}}ce=D<1||(Q=T[D-1])==="B"?"N":W[D-1];break;case"B":j=!1,i=!0,ce=C;break;case"S":r=!0,ce="N"}return ce},k=function(_,T,W){var D=_.split("");return W&&A(D,W,{hiLevel:C}),D.reverse(),T&&T.reverse(),D.join("")},A=function(_,T,W){var D,Q,ne,ae,F,ce=-1,Se=_.length,ge=0,R=[],U=C?h:m,H=[];for(j=!1,i=!1,r=!1,Q=0;Q<Se;Q++)H[Q]=L(_[Q]);for(ne=0;ne<Se;ne++){if(F=ge,R[ne]=O(_,H,R,ne),D=240&(ge=U[F][y[R[ne]]]),ge&=15,T[ne]=ae=U[ge][5],D>0)if(D===16){for(Q=ce;Q<ne;Q++)T[Q]=1;ce=-1}else ce=-1;if(U[ge][6])ce===-1&&(ce=ne);else if(ce>-1){for(Q=ce;Q<ne;Q++)T[Q]=ae;ce=-1}H[ne]==="B"&&(T[ne]=0),W.hiLevel|=ae}r&&(function(te,re,le){for(var xe=0;xe<le;xe++)if(te[xe]==="S"){re[xe]=C;for(var me=xe-1;me>=0&&te[me]==="WS";me--)re[me]=C}})(H,T,Se)},M=function(_,T,W,D,Q){if(!(Q.hiLevel<_)){if(_===1&&C===1&&!i)return T.reverse(),void(W&&W.reverse());for(var ne,ae,F,ce,Se=T.length,ge=0;ge<Se;){if(D[ge]>=_){for(F=ge+1;F<Se&&D[F]>=_;)F++;for(ce=ge,ae=F-1;ce<ae;ce++,ae--)ne=T[ce],T[ce]=T[ae],T[ae]=ne,W&&(ne=W[ce],W[ce]=W[ae],W[ae]=ne);ge=F}ge++}}},V=function(_,T,W){var D=_.split(""),Q={hiLevel:C};return W||(W=[]),A(D,W,Q),(function(ne,ae,F){if(F.hiLevel!==0&&u)for(var ce,Se=0;Se<ne.length;Se++)ae[Se]===1&&(ce=w.indexOf(ne[Se]))>=0&&(ne[Se]=w[ce+1])})(D,W,Q),M(2,D,T,W,Q),M(1,D,T,W,Q),D.join("")};return this.__bidiEngine__.doBidiReorder=function(_,T,W){if((function(Q,ne){if(ne)for(var ae=0;ae<Q.length;ae++)ne[ae]=ae;o===void 0&&(o=P(Q)),d===void 0&&(d=P(Q))})(_,T),a||!c||d)if(a&&c&&o^d)C=o?1:0,_=k(_,T,W);else if(!a&&c&&d)C=o?1:0,_=V(_,T,W),_=k(_,T);else if(!a||o||c||d){if(a&&!c&&o^d)_=k(_,T),o?(C=0,_=V(_,T,W)):(C=1,_=V(_,T,W),_=k(_,T));else if(a&&o&&!c&&d)C=1,_=V(_,T,W),_=k(_,T);else if(!a&&!c&&o^d){var D=u;o?(C=1,_=V(_,T,W),C=0,u=!1,_=V(_,T,W),u=D):(C=0,_=V(_,T,W),_=k(_,T),C=1,u=!1,_=V(_,T,W),u=D,_=k(_,T))}}else C=0,_=V(_,T,W);else C=o?1:0,_=V(_,T,W);return _},this.__bidiEngine__.setOptions=function(_){_&&(a=_.isInputVisual,c=_.isOutputVisual,o=_.isInputRtl,d=_.isOutputRtl,u=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var i=s.text;s.x,s.y;var r=s.options||{};s.mutex,r.lang;var a=[];if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,t.setOptions(r),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);s.text=a}else s.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(et),et.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new fa(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new VP(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new MP(this.contents),this.head=new TP(this),this.name=new FP(this),this.cmap=new Q2(this),this.toUnicode={},this.hhea=new IP(this),this.maxp=new zP(this),this.hmtx=new BP(this),this.post=new OP(this),this.os2=new EP(this),this.loca=new UP(this),this.glyf=new $P(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,d;for(d=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var i,r,a,o;for(a=0,r=0,o=(e=""+e).length;0<=o?r<o:r>o;r=0<=o?++r:--r)i=e.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var Mi,fa=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,i;for(i=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,i,r,a,o,c;return e=this.readByte(),t=this.readByte(),s=this.readByte(),i=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^r)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*i+16777216*r+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,i,r;for(r=[],s=0,i=e.length;s<i;s++)t=e[s],r.push(this.writeByte(t));return r},n})(),MP=(function(){var n;function e(t){var s,i,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:i>r;i=0<=r?++i:--i)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,i,r,a,o,c,d,u,f,m,h,y,x;for(x in h=Object.keys(t).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),a=Math.floor(f/c),u=16*h-f,(i=new fa).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(a),i.writeShort(u),r=16*h,d=i.pos+r,o=null,y=[],t)for(m=t[x],i.writeString(x),i.writeInt(n(m)),i.writeInt(d),i.writeInt(m.length),y=y.concat(m),x==="head"&&(o=d),d+=m.length;d%4;)y.push(0),d++;return i.write(y),s=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(s),i.data},n=function(t){var s,i,r,a;for(t=X2.call(t);t.length%4;)t.push(0);for(r=new fa(t),i=0,s=0,a=t.length;s<a;s=s+=4)i+=r.readUInt32();return 4294967295&i},e})(),DP={}.hasOwnProperty,er=function(n,e){for(var t in e)DP.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};Mi=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var TP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new fa).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),z1=(function(){function n(e,t){var s,i,r,a,o,c,d,u,f,m,h,y,x,w,S,j,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),m=h/2,e.pos+=6,r=(function(){var L,P;for(P=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)P.push(e.readUInt16());return P})(),e.pos+=2,x=(function(){var L,P;for(P=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)P.push(e.readUInt16());return P})(),d=(function(){var L,P;for(P=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)P.push(e.readUInt16());return P})(),u=(function(){var L,P;for(P=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)P.push(e.readUInt16());return P})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var L,P;for(P=[],c=L=0;0<=i?L<i:L>i;c=0<=i?++L:--L)P.push(e.readUInt16());return P})(),c=S=0,C=r.length;S<C;c=++S)for(w=r[c],s=j=y=x[c];y<=w?j<=w:j>=w;s=y<=w?++j:--j)u[c]===0?a=s+d[c]:(a=o[u[c]/2+(s-y)-(m-c)]||0)!==0&&(a+=d[c]),this.codeMap[s]=65535&a}e.pos=f}return n.encode=function(e,t){var s,i,r,a,o,c,d,u,f,m,h,y,x,w,S,j,C,L,P,O,k,A,M,V,_,T,W,D,Q,ne,ae,F,ce,Se,ge,R,U,H,te,re,le,xe,me,we,Me,Ee;switch(D=new fa,a=Object.keys(e).sort(function(Oe,ye){return Oe-ye}),t){case"macroman":for(x=0,w=(function(){var Oe=[];for(y=0;y<256;++y)Oe.push(0);return Oe})(),j={0:0},r={},Q=0,ce=a.length;Q<ce;Q++)j[me=e[i=a[Q]]]==null&&(j[me]=++x),r[i]={old:e[i],new:j[e[i]]},w[i]=j[e[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(w),{charMap:r,subtable:D.data,maxGlyphID:x+1};case"unicode":for(T=[],f=[],C=0,j={},s={},S=d=null,ne=0,Se=a.length;ne<Se;ne++)j[P=e[i=a[ne]]]==null&&(j[P]=++C),s[i]={old:P,new:j[P]},o=j[P]-i,S!=null&&o===d||(S&&f.push(S),T.push(i),d=o),S=i;for(S&&f.push(S),f.push(65535),T.push(65535),V=2*(M=T.length),A=2*Math.pow(Math.log(M)/Math.LN2,2),m=Math.log(A/2)/Math.LN2,k=2*M-A,c=[],O=[],h=[],y=ae=0,ge=T.length;ae<ge;y=++ae){if(_=T[y],u=f[y],_===65535){c.push(0),O.push(0);break}if(_-(W=s[_].new)>=32768)for(c.push(0),O.push(2*(h.length+M-y)),i=F=_;_<=u?F<=u:F>=u;i=_<=u?++F:--F)h.push(s[i].new);else c.push(W-_),O.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*M+2*h.length),D.writeUInt16(0),D.writeUInt16(V),D.writeUInt16(A),D.writeUInt16(m),D.writeUInt16(k),le=0,R=f.length;le<R;le++)i=f[le],D.writeUInt16(i);for(D.writeUInt16(0),xe=0,U=T.length;xe<U;xe++)i=T[xe],D.writeUInt16(i);for(we=0,H=c.length;we<H;we++)o=c[we],D.writeUInt16(o);for(Me=0,te=O.length;Me<te;Me++)L=O[Me],D.writeUInt16(L);for(Ee=0,re=h.length;Ee<re;Ee++)x=h[Ee],D.writeUInt16(x);return{charMap:s,subtable:D.data,maxGlyphID:C+1}}},n})(),Q2=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)t=new z1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,i;return t==null&&(t="macroman"),s=z1.encode(e,t),(i=new fa).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},n})(),IP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),EP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),OP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(s=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var a,o,c;for(c=[],r=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(e.readUInt32());return c}).call(this)}},n})(),RP=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,i,r,a,o,c,d,u,f,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(c={},r=u=0,f=s.length;u<f;r=++u)i=s[r],e.pos=i.offset,d=e.readString(i.length),a=new RP(d,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),zP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),BP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,i,r,a,o,c;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)u.push(e.readInt16());return u})(),this.widths=(function(){var d,u,f,m;for(m=[],d=0,u=(f=this.metrics).length;d<u;d++)r=f[d],m.push(r.advance);return m}).call(this),s=this.widths[this.widths.length-1],c=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)c.push(this.widths.push(s));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),X2=[].slice,$P=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,i,r,a,o,c,d,u,f;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,s=r.indexOf(e),(i=r.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,a=(o=new fa(t.read(i))).readShort(),d=o.readShort(),f=o.readShort(),c=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new qP(o,d,f,c,u):new WP(o,a,d,f,c,u),this.cache[e]))},n.prototype.encode=function(e,t,s){var i,r,a,o,c;for(a=[],r=[],o=0,c=t.length;o<c;o++)i=e[t[o]],r.push(a.length),i&&(a=a.concat(i.encode(s)));return r.push(a.length),{table:a,offsets:r}},n})(),WP=(function(){function n(e,t,s,i,r,a){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=i,this.xMax=r,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),qP=(function(){function n(e,t,s,i,r){var a,o;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new fa(X2.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),UP=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return er(n,Mi),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=2)r.push(2*e.readUInt16());return r}).call(this):(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=4)r.push(e.readUInt32());return r}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),i=0,r=0,a=0;a<s.length;++a)if(s[a]=i,r<t.length&&t[r]==a){++r,s[a]=i;var o=this.offsets[a],c=this.offsets[a+1]-o;c>0&&(i+=c)}for(var d=new Array(4*s.length),u=0;u<s.length;++u)d[4*u+3]=255&s[u],d[4*u+2]=(65280&s[u])>>8,d[4*u+1]=(16711680&s[u])>>16,d[4*u]=(4278190080&s[u])>>24;return d},n})(),VP=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,i,r;for(t in i=this.font.cmap.tables[0].codeMap,e={},r=this.subset)s=r[t],e[t]=i[s];return e},n.prototype.glyphsFor=function(e){var t,s,i,r,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[r=e[a]]=this.font.glyf.glyphFor(r);for(r in t=[],i)(s=i[r])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(r in c=this.glyphsFor(t))s=c[r],i[r]=s;return i},n.prototype.encode=function(e,t){var s,i,r,a,o,c,d,u,f,m,h,y,x,w,S;for(i in s=Q2.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),h={0:0},S=s.charMap)h[(c=S[i]).old]=c.new;for(y in m=s.maxGlyphID,a)y in h||(h[y]=m++);return u=(function(j){var C,L;for(C in L={},j)L[j[C]]=C;return L})(h),f=Object.keys(u).sort(function(j,C){return j-C}),x=(function(){var j,C,L;for(L=[],j=0,C=f.length;j<C;j++)o=f[j],L.push(u[o]);return L})(),r=this.font.glyf.encode(a,x,h),d=this.font.loca.encode(r.offsets,x),w={cmap:this.font.cmap.raw(),glyf:r.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},n})();et.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,i,r,a;if(Array.isArray(t))return"["+(function(){var o,c,d;for(d=[],o=0,c=t.length;o<c;o++)s=t[o],d.push(e.convert(s));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in r=["<<"],t)a=t[i],r.push("/"+i+" "+e.convert(a));return r.push(">>"),r.join(`
`)}return""+t},e})();const HP=n=>{const e=["Date","Time","Pain Level","Locations","Symptoms","Limited Activities","Sleep Quality","Mood Impact","Missed Work Days","Notes"].join(","),t=n.map(s=>{const[i,r]=s.timestamp.split("T"),a=(r||"").slice(0,5);return[i,a,s.baselineData.pain,`"${s.baselineData.locations?.join("; ")||""}"`,`"${s.baselineData.symptoms?.join("; ")||""}"`,`"${s.functionalImpact?.limitedActivities?.join("; ")||""}"`,s.qualityOfLife?.sleepQuality||"",s.qualityOfLife?.moodImpact||"",s.workImpact?.missedWork||"",`"${s.notes?.replace(/"/g,'""')||""}"`].join(",")});return[e,...t].join("\\n")},GP=n=>JSON.stringify(n,null,2),YP=(n,e,t="text/plain;charset=utf-8")=>{if(typeof window>"u")return;let s;if(n.startsWith("data:")){const[a,o]=n.split(",");s=new Blob([atob(o)],{type:a.split(":")[1].split(";")[0]})}else s=new Blob([n],{type:t});const i=window.URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)},ZP=n=>{const e=new et;e.setFontSize(20),e.text("Pain Tracking Report",20,30),e.setFontSize(12);const t=n.length>0?new Date(n[0].timestamp).toLocaleDateString():"N/A",s=n.length>0?new Date(n[n.length-1].timestamp).toLocaleDateString():"N/A";if(e.text(`Report Period: ${t} to ${s}`,20,45),e.text(`Total Entries: ${n.length}`,20,55),n.length>0){const a=n.reduce((d,u)=>d+u.baselineData.pain,0)/n.length;e.text(`Average Pain Level: ${Gt(a,1)}/10`,20,65);const o=B1(n.flatMap(d=>d.baselineData.symptoms||[])),c=B1(n.flatMap(d=>d.baselineData.locations||[]));e.text(`Most Common Symptoms: ${o.slice(0,3).join(", ")}`,20,75),e.text(`Most Common Locations: ${c.slice(0,3).join(", ")}`,20,85)}let i=105;e.setFontSize(14),e.text("Detailed Entries",20,i),i+=15,e.setFontSize(10),n.slice(0,20).forEach((a,o)=>{i>270&&(e.addPage(),i=30);const c=new Date(a.timestamp).toLocaleDateString(),d=new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.text(`${o+1}. ${c} ${d} - Pain: ${a.baselineData.pain}/10`,20,i),i+=8,a.baselineData.symptoms&&a.baselineData.symptoms.length>0&&(e.text(`   Symptoms: ${a.baselineData.symptoms.join(", ")}`,25,i),i+=8),a.baselineData.locations&&a.baselineData.locations.length>0&&(e.text(`   Locations: ${a.baselineData.locations.join(", ")}`,25,i),i+=8),a.notes){const u=e.splitTextToSize(`   Notes: ${a.notes}`,150);e.text(u,25,i),i+=u.length*5+5}i+=5}),n.length>20&&e.text(`... and ${n.length-20} more entries`,20,i);const r=e.getNumberOfPages();for(let a=1;a<=r;a++)e.setPage(a),e.setFontSize(8),e.text(`Generated on ${new Date().toLocaleDateString()} - Page ${a} of ${r}`,20,285);return e.output("datauristring")},B1=n=>{const e={};return n.forEach(t=>{e[t]=(e[t]||0)+1}),Object.entries(e).sort(([,t],[,s])=>s-t).map(([t])=>t)};function KP({isOpen:n,onClose:e,entries:t,title:s="Export Pain Data"}){const[i,r]=X.useState("csv"),[a,o]=X.useState(!1),[c,d]=X.useState("idle"),[u,f]=X.useState({dateRange:{start:"",end:""},painLevelRange:{min:0,max:10},symptoms:[],locations:[],includeQualityOfLife:!0,includeWorkImpact:!0,includeMedications:!0,includeTreatments:!0}),m=X.useMemo(()=>{const C=new Set;return t.forEach(L=>{L.baselineData.symptoms&&L.baselineData.symptoms.forEach(P=>C.add(P))}),Array.from(C).sort()},[t]),h=X.useMemo(()=>{const C=new Set;return t.forEach(L=>{L.baselineData.locations&&L.baselineData.locations.forEach(P=>C.add(P))}),Array.from(C).sort()},[t]),y=X.useMemo(()=>t.filter(C=>{if(u.dateRange.start&&u.dateRange.end){const L=new Date(C.timestamp),P=new Date(u.dateRange.start),O=new Date(u.dateRange.end);if(L<P||L>O)return!1}return!(C.baselineData.pain<u.painLevelRange.min||C.baselineData.pain>u.painLevelRange.max||u.symptoms.length>0&&!u.symptoms.some(P=>C.baselineData.symptoms?.includes(P))||u.locations.length>0&&!u.locations.some(P=>C.baselineData.locations?.includes(P)))}),[t,u]),x=async()=>{if(y.length===0){d("error");return}o(!0),d("idle");try{let C,L;const P=new Date().toISOString().split("T")[0];switch(i){case"csv":C=HP(y),L=`pain-data-${P}.csv`;break;case"json":C=GP(y),L=`pain-data-${P}.json`;break;case"pdf":C=ZP(y),L=`pain-report-${P}.pdf`;break;default:throw new Error("Unsupported export format")}YP(C,L),d("success"),setTimeout(()=>{e(),d("idle")},2e3)}catch(C){console.error("Export failed:",C),d("error")}finally{o(!1)}},w=[{id:"csv",label:"CSV (Spreadsheet)",description:"Compatible with Excel, Google Sheets",icon:jk,extension:".csv"},{id:"json",label:"JSON (Data)",description:"For developers and data analysis",icon:Nk,extension:".json"},{id:"pdf",label:"PDF (Report)",description:"Formatted report for sharing",icon:mu,extension:".pdf"}],S=(C,L)=>{f(P=>({...P,[C]:L}))},j=(C,L)=>{if(!Array.isArray(u[C]))return;const P=u[C],O=P.includes(L)?P.filter(k=>k!==L):[...P,L];S(C,O)};return l.jsx(Cm,{isOpen:n,onClose:e,size:"xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(pu,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:s}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Export ",y.length," of ",t.length," entries"]})]})]}),l.jsx(dt,{variant:"ghost",size:"sm",onClick:e,children:l.jsx(Ls,{className:"h-4 w-4"})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(mu,{className:"h-5 w-5"}),l.jsx("span",{children:"Export Format"})]})}),l.jsx(qe,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:w.map(C=>{const L=C.icon;return l.jsx("button",{onClick:()=>r(C.id),className:yt("p-4 border rounded-lg text-left transition-all hover:shadow-md",i===C.id?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-border hover:border-primary/50"),children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(L,{className:"h-8 w-8 text-primary mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:C.label}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:C.description}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:C.extension})]})]})},C.id)})})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Iv,{className:"h-5 w-5"}),l.jsx("span",{children:"Filters"})]})}),l.jsxs(qe,{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),l.jsx("input",{type:"date",value:u.dateRange.start,onChange:C=>S("dateRange",{...u.dateRange,start:C.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),l.jsx("input",{type:"date",value:u.dateRange.end,onChange:C=>S("dateRange",{...u.dateRange,end:C.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Pain Level Range: ",u.painLevelRange.min," - ",u.painLevelRange.max]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"0",max:"10",value:u.painLevelRange.min,onChange:C=>S("painLevelRange",{...u.painLevelRange,min:parseInt(C.target.value)}),className:"flex-1"}),l.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),l.jsx("input",{type:"range",min:"0",max:"10",value:u.painLevelRange.max,onChange:C=>S("painLevelRange",{...u.painLevelRange,max:parseInt(C.target.value)}),className:"flex-1"})]})]}),m.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Symptoms"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(C=>l.jsx("button",{onClick:()=>j("symptoms",C),className:yt("px-3 py-1 text-sm rounded-full border transition-colors",u.symptoms.includes(C)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:C},C))})]}),h.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Locations"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(C=>l.jsx("button",{onClick:()=>j("locations",C),className:yt("px-3 py-1 text-sm rounded-full border transition-colors",u.locations.includes(C)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:C},C))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Include Data Types"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{key:"includeQualityOfLife",label:"Quality of Life"},{key:"includeWorkImpact",label:"Work Impact"},{key:"includeMedications",label:"Medications"},{key:"includeTreatments",label:"Treatments"}].map(({key:C,label:L})=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:u[C],onChange:P=>S(C,P.target.checked),className:"rounded border-border"}),l.jsx("span",{className:"text-sm",children:L})]},C))})]})]})]}),c!=="idle"&&l.jsx(ze,{className:yt("border",c==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:l.jsx(qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[c==="success"?l.jsx(pa,{className:"h-5 w-5 text-green-600"}):l.jsx(Zu,{className:"h-5 w-5 text-red-600"}),l.jsx("p",{className:yt("text-sm",c==="success"?"text-green-800":"text-red-800"),children:c==="success"?`Successfully exported ${y.length} entries!`:y.length===0?"No entries match your filters. Please adjust your criteria.":"Export failed. Please try again."})]})})}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:[y.length," entries will be exported"]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(dt,{variant:"outline",onClick:e,children:"Cancel"}),l.jsx(dt,{onClick:x,disabled:a||y.length===0,className:"min-w-[120px]",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Exporting..."]}):l.jsxs(l.Fragment,{children:[l.jsx(pu,{className:"h-4 w-4 mr-2"}),"Export ",i.toUpperCase()]})})]})]})]})})}function ew({content:n,children:e,placement:t="top",trigger:s="hover",className:i=""}){const[r,a]=X.useState(!1),[o,c]=X.useState(!1),d=X.useRef(null),u=X.useRef(null),f={top:"bottom-full mb-2 left-1/2 transform -translate-x-1/2",bottom:"top-full mt-2 left-1/2 transform -translate-x-1/2",left:"right-full mr-2 top-1/2 transform -translate-y-1/2",right:"left-full ml-2 top-1/2 transform -translate-y-1/2"},m={top:"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-popover",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-popover",left:"left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-popover",right:"right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-popover"},h=()=>{o||a(!0)},y=()=>{a(!1)},x=()=>{a(!r)},w=()=>{a(!1),c(!0)},S=C=>{C.key==="Escape"&&(y(),d.current?.focus())};X.useEffect(()=>{if(!r)return;const C=L=>{u.current&&d.current&&!u.current.contains(L.target)&&!d.current.contains(L.target)&&y()};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[r]);const j={hover:{onMouseEnter:h,onMouseLeave:y,onFocus:h,onBlur:y},click:{onClick:x},focus:{onFocus:h,onBlur:y}};return o?e?l.jsx(l.Fragment,{children:e}):null:l.jsxs("div",{className:`relative inline-block ${i}`,children:[l.jsx("button",{ref:d,className:"inline-flex items-center justify-center p-1 rounded-full hover:bg-muted transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","aria-describedby":r?"tooltip":void 0,"aria-expanded":r,...j[s],children:e||l.jsx(Ku,{className:"h-4 w-4 text-muted-foreground"})}),r&&l.jsxs("div",{ref:u,id:"tooltip",role:"tooltip",className:`absolute z-50 ${f[t]}`,onKeyDown:S,children:[l.jsx("div",{className:"bg-popover text-popover-foreground border rounded-md shadow-lg p-3 max-w-xs",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("p",{className:"text-sm",children:n}),s==="click"&&l.jsx("button",{onClick:w,className:"text-muted-foreground hover:text-foreground","aria-label":"Dismiss tooltip",children:l.jsx(Ls,{className:"h-3 w-3"})})]})}),l.jsx("div",{className:`absolute w-0 h-0 border-4 ${m[t]}`})]})]})}function JP({active:n,onChange:e}){return l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>e("overview"),className:`px-3 py-1 rounded ${n==="overview"?"bg-primary text-primary-foreground":"bg-muted"}`,children:"Overview"}),l.jsx("button",{onClick:()=>e("charts"),className:`px-3 py-1 rounded ${n==="charts"?"bg-primary text-primary-foreground":"bg-muted"}`,children:"Charts"}),l.jsx("button",{onClick:()=>e("recent"),className:`px-3 py-1 rounded ${n==="recent"?"bg-primary text-primary-foreground":"bg-muted"}`,children:"Recent"})]})})}const $1={primary:dn("color-primary")};function QP(n,e){const t=e?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",s=e?.locale||void 0,i=u=>new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(u),r=u=>new Intl.DateTimeFormat(s,{timeZone:t,month:"short",day:"numeric"}).format(u),a=[];for(let u=6;u>=0;u--){const f=new Date;f.setDate(f.getDate()-u),a.push({date:f,key:i(f),label:r(f)})}const o=new Map;for(const u of n||[]){const f=u.created_at instanceof Date?u.created_at:new Date(u.created_at);if(Number.isNaN(f.getTime()))continue;const m=i(f);o.has(m)||o.set(m,[]),o.get(m).push(Number(u.pain_level))}const c=a.map(u=>u.label),d=a.map(u=>{const f=o.get(u.key)||[];if(f.length===0)return null;const h=f.reduce((y,x)=>y+x,0)/f.length;return Math.round(h*10)/10});return{labels:c,datasets:[{label:e?.label||"Avg pain",data:d,borderColor:$1.primary,backgroundColor:$1.primary,fill:!1,tension:.4}]}}function XP({entries:n,allEntries:e}){const t=X.useMemo(()=>{const s=e?.length??n.length,i=n.length>0?n.reduce((d,u)=>d+u.baselineData.pain,0)/n.length:0,r=n.slice(-7),a=r.length>0?r.reduce((d,u)=>d+u.baselineData.pain,0)/r.length:0,o=[0,0,0,0];n.forEach(d=>{const u=d.baselineData.pain;u<=2?o[0]++:u<=5?o[1]++:u<=8?o[2]++:o[3]++});const c=QP(n.map(d=>({created_at:d.timestamp,pain_level:d.baselineData.pain})),{});return{totalEntries:s,averagePain:i,weeklyAvg:a,painRanges:o,rolling:c}},[n,e]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4",style:{gap:"var(--dashboard-gap)"},children:[l.jsx(ze,{children:l.jsxs(qe,{children:["Total Entries: ",t.totalEntries]})}),l.jsx(ze,{children:l.jsxs(qe,{children:["Avg Pain: ",Gt(Number(t.averagePain),1)]})}),l.jsx(ze,{children:l.jsxs(qe,{children:["Weekly Avg: ",Gt(Number(t.weeklyAvg),1)]})}),l.jsx(ze,{children:l.jsx(qe,{children:"Placeholder"})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Fs,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Distribution"})]})}),l.jsx(qe,{children:l.jsx(jr,{data:{labels:["Mild","Moderate","Severe","Extreme"],datasets:[{label:"Entries",data:t.painRanges}]},type:"bar",height:200})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Dn,{className:"h-5 w-5"}),l.jsx("span",{children:"Weekly Trend"})]})}),l.jsx(qe,{children:l.jsx(jr,{data:{labels:t.rolling.labels||[],datasets:t.rolling.datasets||[]},type:"line",height:200})})]})]})]})}function e8(n){return n<=2?"text-green-600 bg-green-50":n<=5?"text-yellow-600 bg-yellow-50":n<=8?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50"}function t8(n){return n<=2?l.jsx(pa,{className:"h-4 w-4 text-green-600"}):n<=5?l.jsx(Qa,{className:"h-4 w-4 text-yellow-600"}):n<=8?l.jsx(Er,{className:"h-4 w-4 text-orange-600"}):l.jsx(th,{className:"h-4 w-4 text-red-600"})}function n8({entries:n}){const e=n.slice().sort((t,s)=>new Date(s.timestamp).getTime()-new Date(t.timestamp).getTime()).slice(0,5);return l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Xi,{className:"h-5 w-5"}),l.jsx("span",{children:"Recent Activity"})]})}),l.jsx(qe,{children:e.length>0?l.jsx("div",{className:"space-y-4",children:e.map(t=>l.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[t8(t.baselineData.pain),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"font-medium",children:["Pain Level: ",t.baselineData.pain,"/10"]}),l.jsx("span",{className:yt("px-2 py-1 rounded-full text-xs font-medium",e8(t.baselineData.pain)),children:t.baselineData.pain<=2?"Mild":t.baselineData.pain<=5?"Moderate":t.baselineData.pain<=8?"Severe":"Extreme"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(t.timestamp).toLocaleString()})]})]})},t.id))}):l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Xi,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No recent activity"}),l.jsx("p",{className:"text-sm",children:"Your recent pain entries will appear here"})]})})]})}function Kl({title:n,value:e,change:t,icon:s,className:i,tooltip:r,subtitle:a}){const o=t?.trend==="up"?Dn:t?.trend==="down"?xu:xs,c=t?.trend==="up"?"text-red-600":t?.trend==="down"?"text-green-600":"text-blue-600";return l.jsx(ze,{className:yt("relative transition-all hover:shadow-md",i),children:l.jsxs(qe,{className:"p-6",children:[r&&l.jsx("div",{className:"absolute top-3 right-3",children:l.jsx(ew,{content:r,children:l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full text-xs",style:{backgroundColor:"hsl(var(--metric-tooltip-bg))",color:"hsl(var(--color-muted-foreground))"},children:l.jsx(Ku,{className:"h-3 w-3"})})})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:n}),l.jsx("p",{className:"text-2xl font-bold text-foreground",children:e}),t&&l.jsxs("div",{className:yt("flex items-center text-sm mt-1",c),children:[l.jsx(o,{className:"h-4 w-4 mr-1"}),l.jsxs("span",{children:[t.trend==="up"?"+":t.trend==="down"?"-":"",t.value,"% ",t.label]})]}),a&&l.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:a})]}),l.jsx("div",{className:"text-muted-foreground",children:s})]})]})})}function s8({entries:n,allEntries:e,className:t}){const[s,i]=X.useState("overview"),[r,a]=X.useState(!1),[o,c]=X.useState(null),d=X.useMemo(()=>{const h=(e?.length??n.length)||0,y=new Date,x=n.filter(O=>new Date(O.timestamp).toDateString()===y.toDateString()).length,w=n.length>0?n.reduce((O,k)=>O+k.baselineData.pain,0)/n.length:0,S=n.slice(-7),j=S.length>0?S.reduce((O,k)=>O+k.baselineData.pain,0)/S.length:0,C=[0,0,0,0];n.forEach(O=>{const k=O.baselineData.pain;k<=2?C[0]++:k<=5?C[1]++:k<=8?C[2]++:C[3]++});const L=n.slice().sort((O,k)=>new Date(k.timestamp).getTime()-new Date(O.timestamp).getTime()).slice(0,5).map(O=>({id:O.id,pain:O.baselineData.pain,timestamp:O.timestamp,symptoms:O.symptoms||[],qualityOfLife:O.qualityOfLife})),P=n.length>0?n.slice(-7).map((O,k)=>({label:`Day ${k+1}`,avg:O.baselineData.pain,count:1})):[];return{totalEntries:h,averagePain:Gt(Number(w),1),overallAverage:void 0,todayEntries:x,weeklyAverage:Gt(Number(j),1),painTrend:null,recentActivity:L,painDistribution:[{label:"Mild",data:[C[0]]},{label:"Moderate",data:[C[1]]},{label:"Severe",data:[C[2]]},{label:"Extreme",data:[C[3]]}],weeklyTrend:P}},[n,e]),u=d.weeklyTrend.length>0;function f(h){return h<=2?"text-success bg-success-bg":h<=5||h<=8?"text-warning bg-warning-bg":"text-destructive bg-error-bg"}function m(h){return h<=2?l.jsx(pa,{className:"h-4 w-4 text-success","aria-hidden":"true"}):h<=5?l.jsx(Qa,{className:"h-4 w-4 text-warning","aria-hidden":"true"}):h<=8?l.jsx(Er,{className:"h-4 w-4 text-warning","aria-hidden":"true"}):l.jsx(th,{className:"h-4 w-4 text-destructive","aria-hidden":"true"})}return l.jsxs("div",{className:yt("dashboard-container space-y-6",t),style:{paddingTop:"12px"},children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(JP,{active:s,onChange:h=>i(h)}),l.jsx("div",{children:l.jsxs("div",{children:[l.jsx("button",{className:"btn","aria-label":"Export currently filtered entries as CSV",disabled:r,onClick:async()=>{try{a(!0),c("Preparing CSV export...");const h=await Dr(()=>import("./exportCsv-Dmvr2UaE.js"),[]),y=h.entriesToCsv(n.map(x=>({id:x.id,timestamp:x.timestamp,pain:x.baselineData.pain,notes:x.notes||""})));h.downloadCsv(`pain-entries-${new Date().toISOString().slice(0,10)}.csv`,y),c("CSV export ready. Download starting.")}catch(h){c("CSV export failed."),console.error("Export failed",h)}finally{a(!1),setTimeout(()=>c(null),3e3)}},children:r?"Exporting":"Export CSV"}),l.jsx("div",{"aria-live":"polite",className:"sr-only",role:"status",children:o})]})})]}),n.length>0&&l.jsx("div",{children:l.jsx(it.Suspense,{fallback:l.jsx(um,{text:"Loading predictive insights..."}),children:it.createElement(it.lazy(()=>Dr(()=>import("./PredictivePanel-C6C35CRP.js"),__vite__mapDeps([4,1,2,3]))),{entries:n})})}),s==="overview"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4",style:{gap:"var(--dashboard-gap)"},children:[l.jsxs("div",{children:[l.jsx(Kl,{title:"Total Entries",value:d.totalEntries,icon:l.jsx(Fs,{className:"h-6 w-6"}),className:"relative"}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex items-center space-x-2",children:[l.jsx(ew,{content:"All-time total (not filtered)",children:"All-time total"}),l.jsx("span",{className:"mx-1",children:""}),l.jsxs("span",{children:["Showing ",n.length," filtered"]})]})]}),l.jsx(Kl,{title:"Average Pain",value:d.averagePain,change:d.painTrend||void 0,icon:l.jsx(xs,{className:"h-6 w-6"})}),l.jsx(Kl,{title:"Overall Average",value:d.overallAverage??d.averagePain,icon:l.jsx(Qa,{className:"h-6 w-6"}),tooltip:"Average pain across all recorded entries (not just filtered view)"}),l.jsx(Kl,{title:"Today's Entries",value:d.todayEntries,subtitle:d.todayEntries===0?"No entries yet today":void 0,icon:l.jsx(Ir,{className:"h-6 w-6"})}),l.jsx(Kl,{title:"Weekly Average",value:d.weeklyAverage,icon:l.jsx(Dn,{className:"h-6 w-6"}),tooltip:"Average pain over the past 7 days (includes today)"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(ze,{className:"relative",children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Fs,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Distribution"})]})}),l.jsx(qe,{children:n.length>0?l.jsx(jr,{data:{labels:d.painDistribution.map(h=>h.label),datasets:[{label:"Entries",data:d.painDistribution.map(h=>h.data[0]),backgroundColor:d.painDistribution.map(h=>h.data[0]===0?"rgba(107,114,128,0.08)":"rgba(75,85,99,0.9)"),borderColor:d.painDistribution.map(h=>h.data[0]===0?"rgba(107,114,128,0.12)":"rgba(75,85,99,0.95)")}]},type:"bar",height:200}):l.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No data available"}),l.jsx("p",{className:"text-sm",children:"Start tracking to see your pain distribution"})]})})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Dn,{className:"h-5 w-5"}),l.jsx("span",{children:"Weekly Trend"})]})}),l.jsx(qe,{children:n.length>0?u?l.jsx(jr,{data:{labels:d.weeklyTrend.map(h=>h.label),datasets:[{label:"Average Pain",data:d.weeklyTrend.map(h=>h.avg),borderColor:dn("color-primary"),backgroundColor:Au("color-primary",.1),fill:!0,yAxisID:"y"},{label:"Entry Count",data:d.weeklyTrend.map(h=>h.count),borderColor:dn("color-accent"),backgroundColor:Au("color-accent",.08),fill:!1,yAxisID:"y1"}]},type:"line",height:200,scales:{y:{min:0,max:10,ticks:{stepSize:1},title:{display:!0,text:"Pain Level"}},y1:{min:0,ticks:{stepSize:1},position:"right",title:{display:!0,text:"Entries"}}}}):l.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Dn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No entries this week"}),l.jsx("p",{className:"text-sm",children:"Track pain over time to see trends"})]})}):l.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Dn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No trend data"}),l.jsx("p",{className:"text-sm",children:"Track pain over time to see trends"})]})})})]})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Xi,{className:"h-5 w-5"}),l.jsx("span",{children:"Recent Activity"})]})}),l.jsx(qe,{children:d.recentActivity.length>0?l.jsx("div",{className:"space-y-4",children:d.recentActivity.map(h=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[m(h.pain),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"font-medium",children:["Pain Level: ",h.pain,"/10"]}),l.jsx("span",{className:yt("px-2 py-1 rounded-full text-xs font-medium",f(h.pain)),children:h.pain<=2?"Mild":h.pain<=5?"Moderate":h.pain<=8?"Severe":"Extreme"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(h.timestamp).toLocaleString()}),h.symptoms&&h.symptoms.length>0&&l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Symptoms: ",h.symptoms.join(", ")]})]})]}),h.qualityOfLife&&l.jsxs("div",{className:"text-right text-sm",children:[l.jsxs("div",{children:["Sleep: ",h.qualityOfLife.sleepQuality,"/10"]}),l.jsxs("div",{children:["Mood: ",h.qualityOfLife.moodImpact,"/10"]})]})]},h.id))}):l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Xi,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No recent activity"}),l.jsx("p",{className:"text-sm",children:"Your recent pain entries will appear here"})]})})]})]}):s==="charts"?l.jsx(XP,{entries:n,allEntries:e}):l.jsx(n8,{entries:n})]})}const i8=["head","neck","shoulders","upper back","lower back","chest","abdomen","hips","knees","ankles","feet","arms","elbows","wrists","hands","right leg","left leg","right foot","left foot","right toes","left toes","outer right leg","outer left leg","inner right leg","inner left leg"],r8=["sharp","dull","aching","burning","tingling","numbness","stiffness","weakness","spasm","swelling","radiating","throbbing","pins and needles","electric shock sensation","hypersensitivity","reduced sensation","muscle weakness","loss of reflexes","cramping"],Jl={BASIC:["walking","standing","sitting","bending","lifting","reaching","climbing stairs"],HOUSEHOLD:["cooking","cleaning","laundry","shopping","yard work","home maintenance"],WORK_RELATED:["typing","writing","driving","operating machinery","physical labor","prolonged sitting","prolonged standing"],SOCIAL:["socializing","dining out","attending events","traveling","exercising","hobbies","sports"],MOBILITY_AIDS:["cane","walker","wheelchair","crutches","braces","orthopedic shoes","mobility scooter"]};function a8({pain:n,locations:e,symptoms:t,onChange:s}){const i=d=>{const u=e.includes(d)?e.filter(f=>f!==d):[...e,d];s({locations:u})},r=d=>{const u=t.includes(d)?t.filter(f=>f!==d):[...t,d];s({symptoms:u})},a=(d,u)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),u())},o=d=>d<=3?"success":d<=6?"warning":"destructive",c=d=>d===0?"No pain":d<=3?"Mild pain":d<=6?"Moderate pain":d<=8?"Severe pain":"Worst possible pain";return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"pain-assessment-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Qa,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{id:"pain-assessment-title",className:"text-xl font-semibold text-foreground",children:"Pain Assessment"})]}),l.jsx(ze,{variant:"elevated",className:"p-6",children:l.jsx(qe,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"pain-level",className:"text-sm font-medium text-foreground",children:"Current Pain Level"}),l.jsxs(zs,{variant:o(n),className:"text-xs",children:[n,"/10 - ",c(n)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"pain-level",type:"range",min:"0",max:"10",value:n,onChange:d=>s({pain:parseInt(d.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Pain level: ${n} out of 10 - ${c(n)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No pain"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Moderate"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Worst"]})]})]}),l.jsx("div",{className:"flex space-x-1 mt-4",children:[...Array(11)].map((d,u)=>l.jsx("button",{onClick:()=>s({pain:u}),className:`flex-1 h-8 rounded transition-all duration-200 ${u===n?"bg-primary text-primary-foreground shadow-md scale-110":u<=n?"bg-primary/20 hover:bg-primary/30":"bg-muted hover:bg-muted/80"}`,"aria-label":`Set pain level to ${u}`,children:l.jsx("span",{className:"text-xs font-medium",children:u})},u))})]})})}),l.jsx(ze,{variant:"outlined",className:"p-6",children:l.jsx(qe,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Fk,{className:"h-4 w-4 text-primary"}),l.jsx("label",{id:"locations-label",className:"text-sm font-medium text-foreground",children:"Pain Locations"}),e.length>0&&l.jsxs(zs,{variant:"secondary",className:"text-xs",children:[e.length," selected"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Select all areas where you're experiencing pain"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:i8.map(d=>l.jsx(dt,{onClick:()=>i(d),onKeyPress:u=>a(u,()=>i(d)),variant:e.includes(d)?"default":"outline",size:"sm",className:"justify-start h-auto py-2 px-3 text-left",role:"checkbox","aria-checked":e.includes(d),"aria-label":`Pain location: ${d}`,children:d},d))})]})})}),l.jsx(ze,{variant:"outlined",className:"p-6",children:l.jsx(qe,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Er,{className:"h-4 w-4 text-primary"}),l.jsx("label",{id:"symptoms-label",className:"text-sm font-medium text-foreground",children:"Associated Symptoms"}),t.length>0&&l.jsxs(zs,{variant:"secondary",className:"text-xs",children:[t.length," selected"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Select any symptoms you're experiencing along with the pain"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:r8.map(d=>l.jsx(dt,{onClick:()=>r(d),onKeyPress:u=>a(u,()=>r(d)),variant:t.includes(d)?"default":"outline",size:"sm",className:"justify-start h-auto py-2 px-3 text-left",role:"checkbox","aria-checked":t.includes(d),"aria-label":`Symptom: ${d}`,children:d},d))})]})})})]})}function o8({worseningSince:n,newLimitations:e,onChange:t}){return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Comparison to Previous"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pain Worsening Since"}),l.jsx("input",{type:"date",value:n,onChange:s=>t({worseningSince:s.target.value}),className:"w-full border rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Limitations"}),l.jsx("textarea",{value:e.join(`
`),onChange:s=>t({newLimitations:s.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each new limitation on a new line"})]})]})}function l8({limitedActivities:n,mobilityAids:e,onChange:t}){const s=[...Jl.BASIC,...Jl.HOUSEHOLD,...Jl.WORK_RELATED,...Jl.SOCIAL];return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"limited-activities",className:"block text-sm font-medium text-gray-700 mb-2",children:"Limited Activities"}),l.jsx("select",{id:"limited-activities",multiple:!0,value:n,onChange:i=>{const r=Array.from(i.target.selectedOptions,a=>a.value);t({limitedActivities:r})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:4,children:s.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mobility-aids",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobility Aids Used"}),l.jsx("select",{id:"mobility-aids",multiple:!0,value:e,onChange:i=>{const r=Array.from(i.target.selectedOptions,a=>a.value);t({mobilityAids:r})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:4,children:Jl.MOBILITY_AIDS?.map(i=>l.jsx("option",{value:i,children:i},i))})]})]})}const fc=({label:n,error:e,hint:t,id:s,className:i="",...r})=>{const a=s||`input-${n.replace(/\s+/g,"-").toLowerCase()}`;return l.jsxs("div",{className:`space-y-1 ${i}`,children:[l.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-gray-900",children:n}),l.jsx("input",{id:a,...e?{"aria-invalid":!0}:{},"aria-describedby":e?`${a}-error`:t?`${a}-hint`:void 0,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-2 focus:ring-offset-1 focus-visible:ring-blue-500 ${e?"border-red-500":""}`,...r}),t&&!e&&l.jsx("p",{id:`${a}-hint`,className:"text-xs text-gray-500",children:t}),e&&l.jsx("p",{id:`${a}-error`,className:"text-xs text-red-600",role:"alert",children:e})]})},c8={success:"bg-green-50 border-green-400 text-green-800",error:"bg-red-50 border-red-400 text-red-800",info:"bg-blue-50 border-blue-400 text-blue-800",warning:"bg-yellow-50 border-yellow-400 text-yellow-800"},Im=({tone:n="info",children:e})=>l.jsx("div",{role:"status","aria-live":"polite",className:`p-3 rounded-md border ${c8[n]} text-sm`,children:e}),d8="inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",u8={primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",secondary:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus-visible:ring-indigo-500",ghost:"bg-transparent text-blue-600 hover:bg-blue-50 focus-visible:ring-blue-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",outline:"border border-input hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md",default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow-md",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow-md",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl"},h8={sm:"h-9 px-3 text-sm",md:"h-11 px-4 text-sm",lg:"h-12 px-5 text-base"},Tc=it.forwardRef(({variant:n="primary",size:e="md",className:t="",children:s,disabled:i,leftIcon:r,rightIcon:a,...o},c)=>{const d=`${d8} ${u8[n]} ${h8[e]} min-w-[44px] ${t}`.trim();return l.jsxs("button",{ref:c,className:d,disabled:i,"aria-disabled":i||void 0,...o,children:[r&&l.jsx("span",{className:"mr-2 inline-flex items-center",children:r}),s,a&&l.jsx("span",{className:"ml-2 inline-flex items-center",children:a})]})});Tc.displayName="Button";function f8({current:n,changes:e,effectiveness:t,onChange:s}){const i=(o,c,d)=>{const u=[...n];u[o]={...u[o],[c]:d},s({current:u})},r=()=>{s({current:[...n,{name:"",dosage:"",frequency:"",effectiveness:""}]})},a=o=>{s({current:n.filter((c,d)=>d!==o)})};return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"medications-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"medications",children:""}),l.jsx("h3",{id:"medications-title",className:"text-xl font-semibold text-foreground",children:"Medications"})]}),l.jsxs("div",{className:"space-y-4",children:[n.map((o,c)=>l.jsx(ze,{variant:"outlined",className:"p-4",children:l.jsxs(qe,{className:"p-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h4",{className:"font-medium text-foreground",children:["Medication #",c+1]}),l.jsx(Tc,{onClick:()=>a(c),variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive/80","aria-label":`Remove medication ${c+1}`,children:"Remove"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(fc,{label:"Name",value:o.name,onChange:d=>i(c,"name",d.target.value),placeholder:"e.g., Ibuprofen"}),l.jsx(fc,{label:"Dosage",value:o.dosage,onChange:d=>i(c,"dosage",d.target.value),placeholder:"e.g., 200mg"}),l.jsx(fc,{label:"Frequency",value:o.frequency,onChange:d=>i(c,"frequency",d.target.value),placeholder:"e.g., Twice daily"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`effectiveness-${c}`,className:"block text-sm font-medium text-foreground",children:"Effectiveness"}),l.jsxs("select",{id:`effectiveness-${c}`,value:o.effectiveness,onChange:d=>i(c,"effectiveness",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Effectiveness of medication ${c+1}`,children:[l.jsx("option",{value:"",children:"Select effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Made Things Worse",children:"Made Things Worse"})]})]})]})]})},c)),l.jsx(Tc,{type:"button",onClick:r,variant:"default",className:"w-full py-3 border-2 border-dashed border-border rounded-md text-muted-foreground hover:border-primary hover:text-primary",leftIcon:l.jsx("span",{className:"text-lg",children:"+"}),children:"Add Medication"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"medication-changes",className:"block text-sm font-medium text-foreground mb-2",children:"Recent Changes in Medications"}),l.jsx("textarea",{id:"medication-changes",value:e,onChange:o=>s({changes:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Describe any recent changes to your medication regimen...","aria-describedby":"medication-changes-hint"}),l.jsx("p",{id:"medication-changes-hint",className:"text-xs text-muted-foreground mt-1",children:"Optional: Note any changes, side effects, or adjustments"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"overall-effectiveness",className:"block text-sm font-medium text-foreground mb-2",children:"Overall Medication Effectiveness"}),l.jsxs("select",{id:"overall-effectiveness",value:t,onChange:o=>s({effectiveness:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-describedby":"overall-effectiveness-hint",children:[l.jsx("option",{value:"",children:"Select overall effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Mixed Results",children:"Mixed Results"})]}),l.jsx("p",{id:"overall-effectiveness-hint",className:"text-xs text-muted-foreground mt-1",children:"How effective has your current medication regimen been overall?"})]})]}),n.length===0&&l.jsx(Im,{tone:"info",children:"No medications recorded yet. Add your current medications above to track their effectiveness."})]})}function p8({sleepQuality:n,moodImpact:e,socialImpact:t,onChange:s}){const i=a=>a<=3?"Poor sleep quality":a<=6?"Fair sleep quality":"Good sleep quality",r=a=>a<=3?"Minimal mood impact":a<=6?"Moderate mood impact":"Significant mood impact";return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"quality-of-life-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"quality of life",children:""}),l.jsx("h3",{id:"quality-of-life-title",className:"text-xl font-semibold text-foreground",children:"Quality of Life Impact"})]}),l.jsx(ze,{variant:"elevated",className:"p-6",children:l.jsx(qe,{className:"p-0",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"sleep-quality",className:"text-sm font-medium text-foreground",children:"Sleep Quality"}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[n,"/10 - ",i(n)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"sleep-quality",type:"range",min:"0",max:"10",value:n,onChange:a=>s({sleepQuality:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Sleep quality: ${n} out of 10 - ${i(n)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No sleep"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Fair"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Excellent"]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"mood-impact",className:"text-sm font-medium text-foreground",children:"Mood Impact"}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[e,"/10 - ",r(e)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"mood-impact",type:"range",min:"0",max:"10",value:e,onChange:a=>s({moodImpact:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Mood impact: ${e} out of 10 - ${r(e)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No impact"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Moderate"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Severe"]})]})]})]})]})})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{htmlFor:"social-impact",className:"block text-sm font-medium text-foreground",children:"Social Impact"}),l.jsx("textarea",{id:"social-impact",value:t.join(`
`),onChange:a=>s({socialImpact:a.target.value.split(`
`).filter(Boolean)}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Enter each social impact on a new line (e.g., 'Unable to attend social gatherings')","aria-describedby":"social-impact-hint"}),l.jsx("p",{id:"social-impact-hint",className:"text-xs text-muted-foreground",children:"How has pain affected your social life and relationships?"})]}),n===0&&e===0&&t.length===0&&l.jsx(Im,{tone:"info",children:"Quality of life metrics help track how pain affects your daily life. Consider rating your sleep quality and mood impact above."})]})}function m8({recent:n,effectiveness:e,planned:t,onChange:s}){const i=(o,c,d)=>{const u=[...n];u[o]={...u[o],[c]:d},s({recent:u})},r=()=>{s({recent:[...n,{type:"",provider:"",date:"",effectiveness:""}]})},a=o=>{s({recent:n.filter((c,d)=>d!==o)})};return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"treatments-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"treatments",children:""}),l.jsx("h3",{id:"treatments-title",className:"text-xl font-semibold text-foreground",children:"Treatments"})]}),l.jsxs("div",{className:"space-y-4",children:[n.map((o,c)=>l.jsx(ze,{variant:"outlined",className:"p-4",children:l.jsxs(qe,{className:"p-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h4",{className:"font-medium text-foreground",children:["Treatment #",c+1]}),l.jsx(Tc,{onClick:()=>a(c),variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive/80","aria-label":`Remove treatment ${c+1}`,children:"Remove"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(fc,{label:"Type",value:o.type,onChange:d=>i(c,"type",d.target.value),placeholder:"e.g., Physical Therapy, Massage"}),l.jsx(fc,{label:"Provider",value:o.provider,onChange:d=>i(c,"provider",d.target.value),placeholder:"Healthcare provider name"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`treatment-date-${c}`,className:"block text-sm font-medium text-foreground",children:"Date"}),l.jsx("input",{id:`treatment-date-${c}`,type:"date",value:o.date,onChange:d=>i(c,"date",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Date of treatment ${c+1}`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`treatment-effectiveness-${c}`,className:"block text-sm font-medium text-foreground",children:"Effectiveness"}),l.jsxs("select",{id:`treatment-effectiveness-${c}`,value:o.effectiveness,onChange:d=>i(c,"effectiveness",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Effectiveness of treatment ${c+1}`,children:[l.jsx("option",{value:"",children:"Select effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Made Things Worse",children:"Made Things Worse"})]})]})]})]})},c)),l.jsx(Tc,{type:"button",onClick:r,variant:"default",className:"w-full py-3 border-2 border-dashed border-border rounded-md text-muted-foreground hover:border-primary hover:text-primary",leftIcon:l.jsx("span",{className:"text-lg",children:"+"}),children:"Add Treatment"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"overall-treatment-effectiveness",className:"block text-sm font-medium text-foreground mb-2",children:"Overall Treatment Effectiveness"}),l.jsxs("select",{id:"overall-treatment-effectiveness",value:e,onChange:o=>s({effectiveness:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-describedby":"overall-treatment-effectiveness-hint",children:[l.jsx("option",{value:"",children:"Select overall effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Mixed Results",children:"Mixed Results"})]}),l.jsx("p",{id:"overall-treatment-effectiveness-hint",className:"text-xs text-muted-foreground mt-1",children:"How effective have your treatments been overall?"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planned-treatments",className:"block text-sm font-medium text-foreground mb-2",children:"Planned Treatments"}),l.jsx("textarea",{id:"planned-treatments",value:t.join(`
`),onChange:o=>s({planned:o.target.value.split(`
`).filter(Boolean)}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Enter each planned treatment on a new line","aria-describedby":"planned-treatments-hint"}),l.jsx("p",{id:"planned-treatments-hint",className:"text-xs text-muted-foreground mt-1",children:"List upcoming treatments or appointments, one per line"})]})]}),n.length===0&&l.jsx(Im,{tone:"info",children:"No treatments recorded yet. Add your recent treatments above to track their effectiveness."})]})}function g8({missedWork:n,modifiedDuties:e,workLimitations:t,onChange:s}){return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Work Impact"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days of Missed Work"}),l.jsx("input",{type:"number",min:"0",value:n,onChange:i=>s({missedWork:parseInt(i.target.value)}),className:"w-full border rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modified Duties"}),l.jsx("textarea",{value:e.join(`
`),onChange:i=>s({modifiedDuties:i.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each modified duty on a new line"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Limitations"}),l.jsx("textarea",{value:t.join(`
`),onChange:i=>s({workLimitations:i.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each work limitation on a new line"})]})]})}const du={simplifiedMode:!0,showMemoryAids:!0,autoSave:!0,showProgress:!0,showCognitiveLoadIndicators:!0,adaptiveComplexity:!0,fontSize:"medium",contrast:"normal",reduceMotion:!1,touchTargetSize:"large",confirmationLevel:"standard",voiceInput:!1,gentleLanguage:!0,hideDistressingContent:!1,showComfortPrompts:!0,enableContentWarnings:!0,contentWarningLevel:"standard",enableCrisisDetection:!0,crisisDetectionSensitivity:"medium",showCrisisResources:!0,enableProgressiveDisclosure:!0,defaultDisclosureLevel:"helpful",adaptiveDisclosure:!0,realTimeValidation:!0,theme:"auto",reminderFrequency:"daily"},y8=n=>({small:"14px",medium:"16px",large:"18px",xl:"20px"})[n],x8=n=>({normal:"44px",large:"56px","extra-large":"72px"})[n],tw=X.createContext({preferences:du,updatePreferences:()=>{}}),ya=()=>X.useContext(tw);class v8{positiveKeywords=["better","improved","good","great","healing","progress","relief","comfortable","manageable","hopeful","grateful","thankful","blessed","stronger","resilient","capable","empowered","peaceful","calm"];negativeKeywords=["pain","hurt","suffering","agony","terrible","awful","unbearable","frustrated","angry","sad","depressed","anxious","worried","scared","overwhelmed","exhausted","defeated","hopeless","alone","isolated"];neutralKeywords=["same","unchanged","stable","managing","coping","continuing","routine","regular","normal","usual","consistent","steady"];triggerKeywords=["flare","spike","increase","worse","worsening","setback","episode","attack","breakthrough","sudden","intense","severe"];analyzeText(e){const t=e.toLowerCase().split(/\s+/),s=t.filter(m=>this.positiveKeywords.some(h=>m.includes(h))).length,i=t.filter(m=>this.negativeKeywords.some(h=>m.includes(h))).length,r=t.filter(m=>this.neutralKeywords.some(h=>m.includes(h))).length,a=t.filter(m=>this.triggerKeywords.some(h=>m.includes(h))).length;let o="neutral";s>i&&s>0?o="positive":i>s&&i>0?o="negative":s>0&&i>0&&(o="mixed");const c=["very","extremely","incredibly","really","so","quite"],d=t.filter(m=>c.includes(m)).length;let u="low";a>0||d>2?u="high":(d>0||i>1)&&(u="medium");const f=Math.min((s+i+r)/Math.max(t.length/4,1),1);return{valence:o,arousal:u,keywords:t.filter(m=>this.positiveKeywords.concat(this.negativeKeywords,this.neutralKeywords).some(h=>m.includes(h))),confidence:f,triggers:a>0?t.filter(m=>this.triggerKeywords.some(h=>m.includes(h))):void 0}}}class b8{supportiveMessages=["I hear that you're going through a challenging time. Your experience is valid and important.","Thank you for sharing what you're experiencing. It takes courage to track difficult moments.","Your pain matters, and so do you. Taking time to document this shows incredible strength.","I acknowledge how hard this must be for you right now. You're not alone in this journey.","Your feelings about this experience are completely understandable and valid."];emphaticMessages=["That sounds really difficult. I want you to know that your struggle is seen and recognized.","I can sense this is a tough moment for you. Please be gentle with yourself.","What you're experiencing sounds overwhelming. You're doing the best you can.","This sounds like a particularly hard day. Remember that difficult days don't last forever.","I hear the pain in your words. Your resilience in tracking this is remarkable."];celebratoryMessages=["This sounds like positive progress! It's wonderful to hear things are improving for you.","What encouraging news! Every step forward, no matter how small, is worth celebrating.","I'm so glad to hear you're experiencing some relief. You deserve these better moments.","This improvement is a testament to your strength and perseverance. Well done!","It's beautiful to see progress in your healing journey. Keep nurturing yourself."];gentleMessages=["Thank you for taking the time to track your experience. Every entry helps build understanding.","I appreciate you sharing this with me. Your consistency in tracking is admirable.","This information helps create a clearer picture of your journey. Thank you for your openness.","Each entry you make is a step toward better understanding your patterns. Well done.","Your commitment to tracking your experience shows real dedication to your wellbeing."];generate(e){let t,s,i,r,a;switch(e.valence){case"positive":t=this.celebratoryMessages,s="celebratory",i=zv,r="text-yellow-600 bg-yellow-50 border-yellow-200",a="Would you like to note what contributed to this positive experience?";break;case"negative":e.arousal==="high"?(t=this.emphaticMessages,s="empathetic",i=yk,r="text-blue-600 bg-blue-50 border-blue-200",a="Remember, you have support available. Would you like to review your comfort resources?"):(t=this.supportiveMessages,s="supportive",i=Ci,r="text-pink-600 bg-pink-50 border-pink-200",a="Taking care of yourself during difficult times is so important.");break;case"mixed":t=this.gentleMessages,s="gentle",i=Xu,r="text-purple-600 bg-purple-50 border-purple-200",a="Complex experiences deserve gentle acknowledgment.";break;default:t=this.gentleMessages,s="gentle",i=Qu,r="text-green-600 bg-green-50 border-green-200";break}return{id:`validation-${Date.now()}`,message:t[Math.floor(Math.random()*t.length)],tone:s,icon:i,color:r,followUp:a,timestamp:new Date}}}function w8({text:n,onValidationGenerated:e,isActive:t=!0,delay:s=2e3}){const{preferences:i}=ya(),[r,a]=X.useState(null),[o,c]=X.useState(!1),d=X.useRef(new v8),u=X.useRef(new b8),f=X.useRef(),m=X.useCallback(y=>{if(!y.trim()||y.length<10)return;const x=d.current.analyzeText(y);if(x.confidence<.2)return;const w=u.current.generate(x);a(w),c(!0),e?.(w),(x.valence!=="negative"||x.arousal!=="high")&&setTimeout(()=>c(!1),1e4)},[e]);if(X.useEffect(()=>{if(!(!t||!i.realTimeValidation))return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{m(n)},s),()=>{f.current&&clearTimeout(f.current)}},[n,t,s,m,i.realTimeValidation]),!i.realTimeValidation||!r||!o)return null;const h=r.icon;return l.jsx("div",{className:`
        mt-3 p-4 rounded-lg border transition-all duration-300 ease-in-out
        ${r.color}
        ${o?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-2"}
      `,role:"alert","aria-live":"polite",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(h,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium mb-1",children:r.message}),r.followUp&&l.jsx("p",{className:"text-xs opacity-75",children:r.followUp})]}),l.jsx("button",{onClick:()=>c(!1),className:"text-xs opacity-50 hover:opacity-75 transition-opacity","aria-label":"Dismiss validation message",children:""})]})})}const W1={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var q1={};const S8=()=>{try{if(typeof import.meta<"u"&&W1)return W1}catch{}return typeof process<"u"&&q1?q1:{}},k8=(()=>{const n=S8();return n.VITE_REACT_APP_ENABLE_VALIDATION==="true"||n.REACT_APP_ENABLE_VALIDATION==="true"})();function N8({onSubmit:n}){const{ui:e,setCurrentFormSection:t}=Yu(),s=e.currentFormSection,[i,r]=X.useState(!1),[a,o]=X.useState({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""}),c=[{title:"Pain Assessment",description:"Rate your current pain and identify affected areas",icon:"",component:l.jsx(a8,{...a.baselineData,locations:a.baselineData.locations||[],symptoms:a.baselineData.symptoms||[],onChange:h=>o(y=>({...y,baselineData:{...y.baselineData,...h}}))}),required:!0,estimatedTime:"2 min"},{title:"Functional Impact",description:"How is pain affecting your daily activities?",icon:"",component:l.jsx(l8,{limitedActivities:a.functionalImpact?.limitedActivities||[],mobilityAids:a.functionalImpact?.mobilityAids||[],onChange:h=>o(y=>({...y,functionalImpact:{...y.functionalImpact,...h}}))}),required:!1,estimatedTime:"3 min"},{title:"Medications",description:"Track your current medications and their effectiveness",icon:"",component:l.jsx(f8,{...a.medications,onChange:h=>o(y=>({...y,medications:{...y.medications,...h}}))}),required:!1,estimatedTime:"2 min"},{title:"Treatments",description:"Document recent treatments and their outcomes",icon:"",component:l.jsx(m8,{...a.treatments,onChange:h=>o(y=>({...y,treatments:{...y.treatments,...h}}))}),required:!1,estimatedTime:"3 min"},{title:"Quality of Life",description:"How is pain affecting your sleep, mood, and social life?",icon:"",component:l.jsx(p8,{...a.qualityOfLife,onChange:h=>o(y=>({...y,qualityOfLife:{...y.qualityOfLife,...h}}))}),required:!1,estimatedTime:"2 min"},{title:"Work Impact",description:"How has pain affected your work and productivity?",icon:"",component:l.jsx(g8,{...a.workImpact,onChange:h=>o(y=>({...y,workImpact:{...y.workImpact,...h}}))}),required:!1,estimatedTime:"2 min"},{title:"Comparison",description:"Compare your current condition to previous assessments",icon:"",component:l.jsx(o8,{...a.comparison,onChange:h=>o(y=>({...y,comparison:{...y.comparison,...h}}))}),required:!1,estimatedTime:"2 min"}],d=async()=>{r(!0);try{await n(a),o({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""}),t(0)}finally{r(!1)}},f=(h=>h===0?a.baselineData.pain>=0&&a.baselineData.pain<=10:!0)(s),m=s===c.length-1;return l.jsxs(ze,{className:"max-w-4xl mx-auto",children:[l.jsxs(mt,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:c[s].icon}),l.jsx("span",{children:c[s].title})]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:c[s].description})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(zs,{variant:"outline",className:"text-xs",children:[l.jsx(Xi,{className:"h-3 w-3 mr-1"}),c[s].estimatedTime]}),l.jsxs(zs,{variant:"secondary",children:[s+1," of ",c.length]})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Math.round((s+1)/c.length*100),"%"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/c.length*100}%`}})})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:c.map((h,y)=>l.jsxs("button",{onClick:()=>t(y),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${y===s?"bg-primary text-primary-foreground":y<s?"bg-success text-success-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,"aria-label":`Go to ${h.title} section`,children:[y<s?l.jsx(nk,{className:"h-3 w-3 inline mr-1"}):l.jsx("span",{className:"mr-1",children:h.icon}),l.jsx("span",{className:"hidden sm:inline",children:h.title}),l.jsx("span",{className:"sm:hidden",children:y+1})]},y))})]}),l.jsx(qe,{children:l.jsxs("form",{role:"form","aria-label":"Pain Entry Form",onSubmit:h=>{h.preventDefault(),m&&f&&d()},className:"space-y-6",children:[l.jsx("div",{className:"min-h-[400px]",children:c[s].component}),k8&&l.jsx("div",{className:"mt-4",children:l.jsx(w8,{text:a.notes||"",onValidationGenerated:()=>{},isActive:!0})}),!f&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[l.jsx(Zu,{className:"h-4 w-4 text-warning"}),l.jsx("span",{className:"text-sm text-warning",children:"Please complete the required information in this section before proceeding."})]}),l.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[l.jsx(dt,{type:"button",variant:"outline",onClick:()=>t(Math.max(0,s-1)),disabled:s===0,leftIcon:l.jsx(ak,{className:"h-4 w-4"}),children:"Previous"}),l.jsx("div",{className:"flex space-x-3",children:m?l.jsx(dt,{type:"submit",disabled:!f||i,leftIcon:i?void 0:l.jsx(yu,{className:"h-4 w-4"}),className:"min-w-[120px]",children:i?l.jsxs(l.Fragment,{children:[l.jsx(um,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Entry"}):l.jsx(dt,{type:"button",onClick:()=>t(Math.min(c.length-1,s+1)),disabled:!f,rightIcon:l.jsx(Tv,{className:"h-4 w-4"}),children:"Next"})})]})]})})]})}function _8({onSubmit:n}){return l.jsxs(ze,{className:"xl:col-span-1","data-walkthrough":"pain-entry-form",children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(ji,{className:"h-5 w-5"}),l.jsx("span",{children:"Record Pain Entry"})]}),l.jsx(Zi,{children:"Track your pain levels, symptoms, and daily impact"})]}),l.jsx(qe,{children:l.jsx(N8,{onSubmit:n})})]})}function j8({entries:n}){const e=[...n].sort((t,s)=>new Date(t.timestamp).getTime()-new Date(s.timestamp).getTime()).map(t=>({timestamp:Lv(new Date(t.timestamp),"MM/dd HH:mm"),pain:t.baselineData.pain}));return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pain History Chart"}),l.jsx("div",{className:"h-64",children:l.jsx(Q5,{width:"100%",height:"100%",children:l.jsxs(X5,{data:e,children:[l.jsx(eS,{dataKey:"timestamp"}),l.jsx(tS,{domain:[0,10]}),l.jsx(nS,{}),l.jsx(sS,{type:"monotone",dataKey:"pain",stroke:"#3b82f6",strokeWidth:2})]})})})]})}const Hd=[{id:"head",name:"Head",path:"M150 50 C170 50, 180 60, 180 80 C180 100, 170 110, 150 110 C130 110, 120 100, 120 80 C120 60, 130 50, 150 50 Z",center:{x:150,y:80}},{id:"neck",name:"Neck",path:"M140 110 L160 110 L160 130 L140 130 Z",center:{x:150,y:120}},{id:"left-shoulder",name:"Left Shoulder",path:"M90 140 C110 130, 130 140, 140 160 C130 170, 110 170, 90 160 Z",center:{x:115,y:150}},{id:"right-shoulder",name:"Right Shoulder",path:"M160 160 C170 140, 190 130, 210 140 L210 160 C190 170, 170 170, 160 160 Z",center:{x:185,y:150}},{id:"left-arm",name:"Left Arm",path:"M90 160 L110 160 L110 240 L90 240 Z",center:{x:100,y:200}},{id:"right-arm",name:"Right Arm",path:"M190 160 L210 160 L210 240 L190 240 Z",center:{x:200,y:200}},{id:"chest",name:"Chest",path:"M140 130 L160 130 L180 160 L180 200 L120 200 L120 160 Z",center:{x:150,y:165}},{id:"upper-back",name:"Upper Back",path:"M120 130 L180 130 L180 180 L120 180 Z",center:{x:150,y:155}},{id:"abdomen",name:"Abdomen",path:"M120 200 L180 200 L180 260 L120 260 Z",center:{x:150,y:230}},{id:"lower-back",name:"Lower Back",path:"M120 180 L180 180 L180 260 L120 260 Z",center:{x:150,y:220}},{id:"left-hip",name:"Left Hip",path:"M120 260 L140 260 L140 300 L120 300 Z",center:{x:130,y:280}},{id:"right-hip",name:"Right Hip",path:"M160 260 L180 260 L180 300 L160 300 Z",center:{x:170,y:280}},{id:"left-thigh",name:"Left Thigh",path:"M120 300 L140 300 L140 380 L120 380 Z",center:{x:130,y:340}},{id:"right-thigh",name:"Right Thigh",path:"M160 300 L180 300 L180 380 L160 380 Z",center:{x:170,y:340}},{id:"left-knee",name:"Left Knee",path:"M120 380 L140 380 L140 400 L120 400 Z",center:{x:130,y:390}},{id:"right-knee",name:"Right Knee",path:"M160 380 L180 380 L180 400 L160 400 Z",center:{x:170,y:390}},{id:"left-calf",name:"Left Calf",path:"M120 400 L140 400 L140 480 L120 480 Z",center:{x:130,y:440}},{id:"right-calf",name:"Right Calf",path:"M160 400 L180 400 L180 480 L160 480 Z",center:{x:170,y:440}},{id:"left-foot",name:"Left Foot",path:"M115 480 L145 480 L145 500 L115 500 Z",center:{x:130,y:490}},{id:"right-foot",name:"Right Foot",path:"M155 480 L185 480 L185 500 L155 500 Z",center:{x:170,y:490}}];function A8({entries:n=[],selectedRegions:e=[],onRegionSelect:t,mode:s="selection",className:i=""}){const[r,a]=X.useState(null),[o,c]=X.useState(!0),d=X.useRef(null),u=X.useRef(new Map);X.useEffect(()=>{if(s==="heatmap"&&n.length>0){const x=new Map;n.forEach(w=>{w.baselineData?.locations&&w.baselineData.locations.forEach(S=>{const j=C8(S);if(j&&Hd.find(C=>C.id===j)){x.has(j)||x.set(j,{total:0,count:0});const C=x.get(j);C.total+=w.baselineData.pain,C.count+=1}})}),u.current.clear(),x.forEach((w,S)=>{u.current.set(S,w.total/w.count)})}},[n,s]);const f=x=>{if(s==="selection"&&t){const w=e.includes(x)?e.filter(S=>S!==x):[...e,x];t(w)}},m=x=>{if(s==="selection")return e.includes(x)?"#ef4444":r===x?"#3b82f6":"#e5e7eb";if(s==="heatmap"){const w=u.current.get(x)||0;if(w===0)return"#e5e7eb";const S=w/10;return S<.3?`rgba(34, 197, 94, ${.3+S*.7})`:S<.6?`rgba(251, 191, 36, ${.3+S*.7})`:`rgba(239, 68, 68, ${.3+S*.7})`}return"#e5e7eb"},h=x=>s==="heatmap"?(u.current.get(x)||0)===0?.3:.7:r===x?.8:.6,y=x=>u.current.get(x)||0;return l.jsxs("div",{className:`interactive-body-map ${i}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Rv,{className:"h-5 w-5"}),l.jsx("span",{className:"font-medium",children:s==="selection"?"Select Pain Locations":"Pain Heat Map"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[l.jsx(cm,{className:"h-4 w-4"}),l.jsx("span",{children:o?"Show Back":"Show Front"})]}),s==="heatmap"&&l.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[l.jsx(gu,{className:"h-4 w-4"}),l.jsx("span",{children:"Color intensity = pain level"})]})]})]}),l.jsxs("div",{className:"relative bg-white rounded-lg border p-4",children:[l.jsxs("svg",{ref:d,viewBox:"0 0 300 520",className:"w-full max-w-md mx-auto",style:{maxHeight:"600px"},children:[l.jsx("rect",{x:"0",y:"0",width:"300",height:"520",fill:"none",stroke:"#e5e7eb",strokeWidth:"2",rx:"10"}),Hd.map(x=>{const w=!x.id.includes("back");return o!==w?null:l.jsxs("g",{children:[l.jsx("path",{d:x.path,fill:m(x.id),stroke:"#374151",strokeWidth:"1",opacity:h(x.id),className:"cursor-pointer transition-all duration-200 hover:stroke-2",onClick:()=>f(x.id),onMouseEnter:()=>a(x.id),onMouseLeave:()=>a(null)}),l.jsx("text",{x:x.center.x,y:x.center.y,textAnchor:"middle",dominantBaseline:"central",className:"text-xs font-medium pointer-events-none select-none",fill:"#374151",children:s==="heatmap"&&y(x.id)>0?Gt(y(x.id),1):""})]},x.id)})]}),r&&l.jsxs("div",{className:"absolute top-4 right-4 bg-black text-white px-3 py-2 rounded-md text-sm pointer-events-none",children:[l.jsx("div",{className:"font-medium",children:Hd.find(x=>x.id===r)?.name}),s==="heatmap"&&l.jsxs("div",{className:"text-xs",children:["Pain Level: ",Gt(y(r),1),"/10"]}),s==="selection"&&l.jsxs("div",{className:"text-xs",children:["Click to ",e.includes(r)?"deselect":"select"]})]}),s==="heatmap"&&l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:"Low Pain"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"}),l.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),l.jsx("div",{className:"w-4 h-4 bg-red-400 rounded"})]}),l.jsx("span",{children:"High Pain"})]})}),s==="selection"&&e.length>0&&l.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[l.jsxs("div",{className:"text-sm font-medium text-blue-900 mb-2",children:["Selected Locations (",e.length,"):"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(x=>{const w=Hd.find(S=>S.id===x);return l.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[w?.name,l.jsx("button",{onClick:()=>f(x),className:"ml-1 hover:text-blue-600",children:""})]},x)})})]})]})]})}function C8(n){const e=n.toLowerCase();return{head:"head",neck:"neck",shoulder:"left-shoulder","left shoulder":"left-shoulder","right shoulder":"right-shoulder",arm:"left-arm","left arm":"left-arm","right arm":"right-arm",chest:"chest",back:"upper-back","upper back":"upper-back","lower back":"lower-back",abdomen:"abdomen",stomach:"abdomen",hip:"left-hip","left hip":"left-hip","right hip":"right-hip",thigh:"left-thigh","left thigh":"left-thigh","right thigh":"right-thigh",knee:"left-knee","left knee":"left-knee","right knee":"right-knee",leg:"left-calf",calf:"left-calf","left calf":"left-calf","right calf":"right-calf",foot:"left-foot","left foot":"left-foot","right foot":"right-foot"}[e]||null}class L8{analyzePatterns(e){if(e.length<3)return[];const t=[],s=this.analyzeSymptomPainCorrelation(e);s.length>0&&t.push({id:"symptom-pain-correlation",name:"Symptom-Pain Correlation",confidence:.8,description:"Strong correlation found between specific symptoms and high pain levels",triggers:s.map(a=>a.symptom),recommendations:["Monitor and manage high-correlation symptoms early","Consider preventive measures for identified triggers","Discuss symptom management with healthcare provider"]});const i=this.analyzeTemporalPatterns(e);i.cyclical.strength>.6&&t.push({id:"temporal-pattern",name:"Cyclical Pain Pattern",confidence:i.cyclical.strength,description:`Pain levels follow a ${i.cyclical.period} pattern`,triggers:[`${i.cyclical.period} cycle`],recommendations:["Plan activities around predictable pain cycles","Prepare pain management strategies in advance","Track additional factors during high-pain periods"]});const r=this.analyzeMedicationEffectiveness(e);return r.length>0&&t.push({id:"medication-effectiveness",name:"Medication Effectiveness Pattern",confidence:.7,description:"Identified patterns in medication effectiveness",triggers:r.map(a=>a.medication),recommendations:["Review medication timing and effectiveness with provider","Consider dose adjustments for low-effectiveness medications","Track side effects and their impact on daily function"]}),t}predictPain(e,t="24h"){if(e.length<5)return{predictedPain:0,confidence:0,timeframe:t,factors:[]};const s=e.slice(-10),i=s.reduce((d,u)=>d+u.baselineData.pain,0)/s.length,r=this.calculateTrend(s),a=this.calculateSeasonalFactor(new Date),o=this.calculateStressFactor(s);let c=i;return c+=r*this.getTimeframeMultiplier(t),c+=a,c+=o,c=Math.max(0,Math.min(10,c)),{predictedPain:Math.round(c*10)/10,confidence:Math.min(.9,e.length/20),timeframe:t,factors:[{factor:"Recent Trend",impact:r,description:r>0?"Pain increasing":r<0?"Pain decreasing":"Pain stable"},{factor:"Seasonal",impact:a,description:this.getSeasonalDescription(a)},{factor:"Stress/Sleep",impact:o,description:this.getStressDescription(o)}]}}analyzeCorrelations(e){return{symptomCorrelations:this.analyzeSymptomPainCorrelation(e),activityCorrelations:this.analyzeActivityCorrelations(e),medicationEffectiveness:this.analyzeMedicationEffectiveness(e)}}analyzeTrends(e){const t=this.calculateOverallTrend(e),s=this.analyzeTemporalPatterns(e);return{overallTrend:t.direction,trendStrength:Math.abs(t.strength),periodicPatterns:[{pattern:"Weekly Cycle",strength:s.weekly.strength,description:`${s.weekly.strength>.5?"Strong":"Weak"} weekly pattern detected`},{pattern:"Monthly Cycle",strength:s.monthly.strength,description:`${s.monthly.strength>.5?"Strong":"Weak"} monthly pattern detected`}],seasonalFactors:this.analyzeSeasonalFactors()}}analyzeSymptomPainCorrelation(e){const t=new Map;return e.forEach(s=>{(s.baselineData.symptoms||[]).forEach(i=>{t.has(i)||t.set(i,{painSum:0,count:0});const r=t.get(i);r.painSum+=s.baselineData.pain,r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({symptom:s,painCorrelation:i.painSum/i.count,frequency:i.count})).filter(s=>s.frequency>=2).sort((s,i)=>i.painCorrelation-s.painCorrelation)}analyzeActivityCorrelations(e){const t=new Map;return e.forEach(s=>{(s.functionalImpact?.limitedActivities||[]).forEach(i=>{t.has(i)||t.set(i,{painSum:0,count:0});const r=t.get(i);r.painSum+=s.baselineData.pain,r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({activity:s,painImpact:i.painSum/i.count,frequency:i.count})).filter(s=>s.frequency>=2).sort((s,i)=>i.painImpact-s.painImpact)}analyzeMedicationEffectiveness(e){const t=new Map;return e.forEach(s=>{(s.medications?.current||[]).forEach(i=>{t.has(i.name)||t.set(i.name,{effectiveness:0,painReduction:0,count:0});const r=t.get(i.name),a=this.parseEffectiveness(i.effectiveness||"moderate");r.effectiveness+=a,r.painReduction+=Math.max(0,10-s.baselineData.pain),r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({medication:s,effectivenessScore:i.effectiveness/i.count,painReduction:i.painReduction/i.count})).filter(s=>s.effectivenessScore>0).sort((s,i)=>i.effectivenessScore-s.effectivenessScore)}analyzeTemporalPatterns(e){const t=new Array(7).fill(0).map(()=>({sum:0,count:0})),s=new Array(31).fill(0).map(()=>({sum:0,count:0}));e.forEach(a=>{const o=new Date(a.timestamp),c=new Date(o.getFullYear(),o.getMonth(),o.getDate()),d=c.getDay(),u=c.getDate()-1;t[d].sum+=a.baselineData.pain,t[d].count+=1,u<31&&(s[u].sum+=a.baselineData.pain,s[u].count+=1)});const i=t.map(a=>a.count>0?a.sum/a.count:0),r=s.map(a=>a.count>0?a.sum/a.count:0);return{cyclical:{period:"weekly",strength:this.calculateVariance(i)/10},weekly:{strength:this.calculateVariance(i)/10,data:i},monthly:{strength:this.calculateVariance(r)/10,data:r}}}calculateTrend(e){if(e.length<3)return 0;const t=e.map(u=>u.baselineData.pain),s=t.length,i=Array.from({length:s},(u,f)=>f),r=i.reduce((u,f)=>u+f,0),a=t.reduce((u,f)=>u+f,0),o=i.reduce((u,f,m)=>u+f*t[m],0),c=i.reduce((u,f)=>u+f*f,0);return(s*o-r*a)/(s*c-r*r)}calculateOverallTrend(e){const t=this.calculateTrend(e.slice(-10));return{direction:t>.1?"worsening":t<-.1?"improving":"stable",strength:Math.abs(t)}}calculateSeasonalFactor(e){const t=e.getMonth();return[.2,.1,-.1,-.2,-.2,0,0,0,-.1,.1,.2,.2][t]}calculateStressFactor(e){const t=e.slice(-3),s=t.reduce((o,c)=>o+(c.qualityOfLife?.sleepQuality||5),0)/t.length,i=t.reduce((o,c)=>o+(c.qualityOfLife?.moodImpact||5),0)/t.length,r=(5-s)*.2,a=(i-5)*.2;return r+a}getTimeframeMultiplier(e){switch(e){case"24h":return .5;case"7d":return 2;case"30d":return 5;default:return 1}}getSeasonalDescription(e){return e>.1?"Seasonal factors may increase pain":e<-.1?"Seasonal factors may reduce pain":"Neutral seasonal impact"}getStressDescription(e){return e>.3?"Poor sleep/stress may worsen pain":e>.1?"Mild stress/sleep impact":"Good sleep/stress management"}analyzeSeasonalFactors(){return[{factor:"Weather Sensitivity",impact:.2,season:"Winter"},{factor:"Activity Level",impact:-.1,season:"Spring"}]}parseEffectiveness(e){const t=e.toLowerCase();return t.includes("excellent")||t.includes("very good")?5:t.includes("good")||t.includes("effective")?4:t.includes("moderate")||t.includes("fair")?3:t.includes("poor")||t.includes("minimal")?2:t.includes("none")||t.includes("ineffective")?1:3}calculateVariance(e){const t=e.reduce((i,r)=>i+r,0)/e.length,s=e.reduce((i,r)=>i+Math.pow(r-t,2),0)/e.length;return Math.sqrt(s)}}const Gd=new L8;function P8({entries:n}){const e=X.useMemo(()=>n.length<3?null:{patterns:Gd.analyzePatterns(n),prediction:Gd.predictPain(n,"7d"),correlations:Gd.analyzeCorrelations(n),trends:Gd.analyzeTrends(n)},[n]);if(!e||n.length<3)return l.jsxs(ze,{children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(ei,{className:"h-5 w-5"}),l.jsx("span",{children:"AI-Powered Insights"})]}),l.jsx(Zi,{children:"Advanced pain analytics require at least 3 entries"})]}),l.jsx(qe,{children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ei,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Keep tracking your pain to unlock predictive insights and pattern recognition"})]})})]});const t=i=>{switch(i){case"improving":return l.jsx(xu,{className:"h-5 w-5 text-green-500"});case"worsening":return l.jsx(Dn,{className:"h-5 w-5 text-red-500"});default:return l.jsx(xs,{className:"h-5 w-5 text-blue-500"})}},s=i=>{switch(i){case"improving":return"text-green-600 bg-green-50";case"worsening":return"text-red-600 bg-red-50";default:return"text-blue-600 bg-blue-50"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ze,{children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[t(e.trends.overallTrend),l.jsx("span",{children:"Pain Trend Analysis"})]}),l.jsx(Zi,{children:"Your pain pattern analysis over recent entries"})]}),l.jsxs(qe,{children:[l.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s(e.trends.overallTrend)}`,children:[e.trends.overallTrend.charAt(0).toUpperCase()+e.trends.overallTrend.slice(1)," Trend",l.jsxs("span",{className:"ml-2",children:["(",Math.round(e.trends.trendStrength*100),"% confidence)"]})]}),e.trends.periodicPatterns.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",children:"Detected Patterns:"}),l.jsx("div",{className:"space-y-2",children:e.trends.periodicPatterns.map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{children:i.pattern}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${i.strength*100}%`}})}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(i.strength*100),"%"]})]})]},r))})]})]})]}),l.jsxs(ze,{children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Ir,{className:"h-5 w-5"}),l.jsx("span",{children:"7-Day Pain Forecast"})]}),l.jsx(Zi,{children:"AI-powered prediction based on your patterns"})]}),l.jsxs(qe,{children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary",children:e.prediction.predictedPain}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Predicted Level"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-semibold text-muted-foreground",children:[Math.round(e.prediction.confidence*100),"%"]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Confidence"})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",children:"Contributing Factors:"}),l.jsx("div",{className:"space-y-2",children:e.prediction.factors.map((i,r)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:i.factor}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("span",{className:`px-2 py-1 rounded text-xs ${i.impact>0?"bg-red-100 text-red-600":i.impact<0?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:[i.impact>0?"+":"",Gt(i.impact,1)]})})]},r))})]})]})]}),e.patterns.length>0&&l.jsxs(ze,{children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Er,{className:"h-5 w-5"}),l.jsx("span",{children:"Identified Patterns"})]}),l.jsx(Zi,{children:"AI-detected patterns in your pain data"})]}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:e.patterns.map(i=>l.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium",children:i.name}),l.jsxs("span",{className:"text-sm bg-blue-100 text-blue-600 px-2 py-1 rounded",children:[Math.round(i.confidence*100),"% confidence"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i.description}),i.triggers.length>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Triggers: "}),l.jsx("span",{className:"text-xs",children:i.triggers.join(", ")})]}),i.recommendations.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Recommendations:"}),l.jsx("ul",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:i.recommendations.map((r,a)=>l.jsxs("li",{className:"flex items-start space-x-1",children:[l.jsx("span",{children:""}),l.jsx("span",{children:r})]},a))})]})]},i.id))})})]}),(e.correlations.symptomCorrelations.length>0||e.correlations.medicationEffectiveness.length>0)&&l.jsxs(ze,{children:[l.jsxs(mt,{children:[l.jsx(gt,{children:"Correlation Analysis"}),l.jsx(Zi,{children:"Relationships between symptoms, medications, and pain levels"})]}),l.jsx(qe,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.correlations.symptomCorrelations.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-3",children:"High-Pain Symptoms"}),l.jsx("div",{className:"space-y-2",children:e.correlations.symptomCorrelations.slice(0,5).map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{children:i.symptom}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-12 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${i.painCorrelation/10*100}%`}})}),l.jsx("span",{className:"text-xs text-muted-foreground",children:Gt(i.painCorrelation,1)})]})]},r))})]}),e.correlations.medicationEffectiveness.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-3",children:"Medication Effectiveness"}),l.jsx("div",{className:"space-y-2",children:e.correlations.medicationEffectiveness.slice(0,5).map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{className:"truncate",children:i.medication}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-12 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${i.effectivenessScore/5*100}%`}})}),l.jsx("span",{className:"text-xs text-muted-foreground",children:Gt(i.effectivenessScore,1)})]})]},r))})]})]})})]})]})}function M8({entries:n}){const[e,t]=X.useState("chart"),s=[{id:"chart",name:"Trend Chart",icon:Fs,description:"Pain levels over time"},{id:"bodymap",name:"Body Map",icon:Hg,description:"Pain location heatmap"},{id:"analytics",name:"AI Insights",icon:ei,description:"Predictive analysis"}];return l.jsxs(ze,{className:"xl:col-span-1","data-walkthrough":"pain-visualization",children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Dn,{className:"h-5 w-5"}),l.jsx("span",{children:"Advanced Pain Visualization"})]}),l.jsx(Zi,{children:"Comprehensive analysis of your pain patterns and trends"})]}),l.jsxs(qe,{children:[l.jsx("div",{className:"flex flex-wrap gap-2 mb-6 p-1 bg-muted rounded-lg",children:s.map(i=>{const r=i.icon;return l.jsxs(dt,{variant:e===i.id?"default":"ghost",size:"sm",onClick:()=>t(i.id),className:"flex-1 min-w-fit",children:[l.jsx(r,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:i.name}),l.jsx("span",{className:"sm:hidden",children:i.name.split(" ")[0]})]},i.id)})}),l.jsxs("div",{className:"min-h-[400px]",children:[e==="chart"&&l.jsxs("div",{children:[l.jsx(j8,{entries:n}),n.length>=5&&l.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Quick Insights:"}),l.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[l.jsxs("p",{children:[" Average Pain Level: ",U1(n)]}),l.jsxs("p",{children:[" Total Entries: ",n.length]}),l.jsxs("p",{children:[" Tracking Period: ",D8(n)," days"]})]})]})]}),e==="bodymap"&&l.jsxs("div",{children:[l.jsx(A8,{entries:n,mode:"heatmap",className:"mb-4"}),n.length===0&&l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Hg,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Record pain entries to see location heatmap"})]})]}),e==="analytics"&&l.jsx("div",{className:"max-h-[500px] overflow-y-auto pr-2",children:l.jsx(P8,{entries:n})})]}),n.length>0&&l.jsx("div",{className:"mt-6 pt-4 border-t border-muted",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Entries"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:U1(n)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Pain"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:T8(n)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Locations"})]})]})})]})]})}function U1(n){if(n.length===0)return Gt(0,1);const e=n.reduce((t,s)=>t+s.baselineData.pain,0);return Gt(e/n.length,1)}function D8(n){if(n.length===0)return 0;const e=n.map(i=>new Date(i.timestamp)),t=Math.min(...e.map(i=>i.getTime())),s=Math.max(...e.map(i=>i.getTime()));return Math.ceil((s-t)/(1e3*60*60*24))+1}function T8(n){const e=new Set;return n.forEach(t=>{t.baselineData.locations?.forEach(s=>{e.add(s)})}),e.size}function I8(n){const e=n.toLowerCase();return e.includes("relationship")||e.includes("people")||e.includes("connect")?"relational":e.includes("feel")||e.includes("emotion")||e.includes("heart")?"emotional":e.includes("meaning")||e.includes("purpose")||e.includes("spiritual")?"spiritual":e.includes("myself")||e.includes("i am")||e.includes("identity")?"self-knowledge":"practical"}function E8(n){const t=["can","will","should","need to","must","always","never"].reduce((s,i)=>s+(n.toLowerCase().includes(i)?1:0),0);return Math.min(100,t*20+40)}function O8(n){const t=["life-changing","transformed","completely","totally","fundamental"].reduce((s,i)=>s+(n.toLowerCase().includes(i)?1:0),0);return Math.min(100,t*30+30)}function R8(n,e){const t=n.toLowerCase().split(" ").filter(i=>i.length>4);let s=0;for(const i of e){const r=i.notes.toLowerCase().split(" ");t.some(a=>r.includes(a))&&s++}return e.length===0?0:Math.min(100,s/e.length*100)}async function V1(n,e,t){const s=[];return t.filter(r=>{const a=r.notes.toLowerCase();return a.includes("learned")||a.includes("realized")||a.includes("understand now")||a.includes("wisdom")||a.includes("insight")}).forEach((r,a)=>{r.notes.length>30&&s.push({id:`wisdom_${n}_${a}`,category:I8(r.notes),insight:r.notes,dateGained:r.timestamp,contextualSource:r.context,applicability:E8(r.notes),transformativeLevel:O8(r.notes),sharedWith:[],reinforcementLevel:R8(r.notes,t)})}),s.slice(0,10)}function Yd(n){if(n.length<2)return 0;let e=0,t=0;for(let s=1;s<n.length;s++)n[s]>n[s-1]?e++:n[s]<n[s-1]&&t++;return(e-t)/(n.length-1)*100}function H1(n){if(!n.length)return 0;const e=n.reduce((t,s)=>t+s,0)/n.length;return n.reduce((t,s)=>t+Math.pow(s-e,2),0)/n.length}function F8(n,e){const t=n.slice(-7).reduce((i,r)=>i+r.baselineData.pain,0)/Math.max(1,Math.min(7,n.length||1)),s=e.slice(-7).reduce((i,r)=>i+r.mood,0)/Math.max(1,Math.min(7,e.length||1));return{empathyForecast:[{timeframe:"next week",predictedEmpathyLevel:Math.max(0,Math.min(100,s*10)),confidenceInterval:{min:40,max:80},influencingFactors:[],recommendedPreparations:[]}],riskPrediction:[{riskType:"compassion_fatigue",riskLevel:Math.max(0,Math.min(100,t*10)),timeToRisk:14,earlyWarningSignals:[],preventionStrategies:[],mitigation:[]}],opportunityPrediction:[{opportunityType:"growth_window",potentialImpact:60,timeWindow:"next 2 weeks",preparationNeeded:[],supportRequired:[],expectedOutcomes:[]}],burnoutRisk:{currentRiskLevel:Math.max(0,Math.min(100,100-s+t*.5)),riskFactors:["high_pain","low_mood"],protectiveFactors:[],timeToIntervention:7,interventionStrategies:[],recoveryTimeline:"2-4 weeks"},growthPotential:{currentGrowthTrajectory:Math.max(0,Math.min(100,s-t*.3)),growthAccelerators:["emotional_awareness","social_support"],growthBarriers:[],optimalGrowthConditions:[],expectedTimeline:"1 month",supportNeeded:[]},adaptiveRecommendations:[],personalizedInterventions:[]}}class z8{_config;userPatterns=new Map;culturalContext=new Map;wisdomDatabase=new Map;predictionModels=new Map;constructor(e){this._config=e}async calculateAdvancedEmpathyMetrics(e,t,s=[],i,r,a,o){this._config.learningRate,await this.updateUserPatterns(e,t,s);const c=await this.getOrCreatePredictionModel(e),d=await this.calculateEnhancedEmotionalIntelligence(e,s,t),u=await this.calculateAdvancedCompassionateProgress(e,t,s),f=await this.calculateAdvancedEmpathyKPIs(e,s,i),m=await this.calculateAdvancedHumanizedMetrics(e,t,s,r);return this.calculateTraumaIntegration(t,s),{emotionalIntelligence:{selfAwareness:d.selfAwareness,selfRegulation:d.selfRegulation,motivation:d.motivation,empathy:d.empathy,socialSkills:d.socialSkills,emotionalGranularity:this.calculateEmotionalGranularity(s),metaEmotionalAwareness:this.calculateMetaEmotionalAwareness(s),neuralEmpathyPatterns:await this.calculateNeuralEmpathyProfile(e,s)},compassionateProgress:{selfCompassion:u.selfCompassion,selfCriticism:u.selfCriticism,progressCelebration:u.progressCelebration,setbackResilience:u.setbackResilience,hopefulness:u.hopefulness,postTraumaticGrowth:this.calculatePostTraumaticGrowth(t,s),meaningMaking:this.calculateMeaningMaking(s),adaptiveReframing:this.calculateAdaptiveReframing(s),compassionFatigue:this.calculateCompassionFatigue(s),recoveryPatterns:await this.analyzeRecoveryPatterns(e,t,s)},empathyKPIs:{validationReceived:f.validationReceived,validationGiven:f.validationGiven,emotionalSupport:f.emotionalSupport,understandingFelt:f.understandingFelt,connectionQuality:f.connectionQuality,empathicAccuracy:this.calculateEmpathicAccuracy(s),empathicConcern:this.calculateEmpathicConcern(s),perspectiveTaking:this.calculatePerspectiveTaking(s),empathicMotivation:this.calculateEmpathicMotivation(s),boundaryMaintenance:this.calculateBoundaryMaintenance(s),culturalEmpathy:await this.calculateCulturalEmpathy(e,s,o)},humanizedMetrics:{courageScore:m.courageScore,vulnerabilityAcceptance:m.vulnerabilityAcceptance,authenticityLevel:m.authenticityLevel,growthMindset:m.growthMindset,wisdomGained:await this.generateWisdomProfile(e,t,s),innerStrength:this.calculateInnerStrength(t,s),dignityMaintenance:this.calculateDignityMaintenance(s),purposeClarity:this.calculatePurposeClarity(s),spiritualWellbeing:this.calculateSpiritualWellbeing(s),lifeNarrativeCoherence:this.calculateLifeNarrativeCoherence(s)},empathyIntelligence:await this.calculateEmpathyIntelligenceProfile(e,s,t),temporalPatterns:await this.analyzeTemporalEmpathyPatterns(e,s,t),microEmpathyMoments:await this.trackMicroEmpathyMoments(e,s),predictiveMetrics:await this.generatePredictiveModel(e,t,s,c)}}async generateAdvancedInsights(e,t,s){const i=[];return i.push(...await this.generatePatternInsights(e,t,s)),i.push(...await this.generateCorrelationInsights(e,t,s)),i.push(...await this.generateGrowthInsights(e,t,s)),i.push(...await this.generateWisdomInsights(e,t,s)),i.push(...await this.generatePredictiveInsights(e,t,s)),i.sort((r,a)=>a.confidence-r.confidence).slice(0,12)}async generatePersonalizedRecommendations(e,t,s){const i=[],r=this.userPatterns.get(e);return t.predictiveMetrics.burnoutRisk.currentRiskLevel>70&&i.push(...await this.generateBurnoutPreventionRecommendations(e,t)),t.predictiveMetrics.growthPotential.currentGrowthTrajectory>60&&i.push(...await this.generateGrowthAccelerationRecommendations(e,t)),i.push(...await this.generateMicroInterventions(e,t)),i.push(...await this.generateWisdomApplicationRecommendations(e,t)),i.push(...await this.generateCulturalEmpathyRecommendations(e,t)),i.sort((a,o)=>this.prioritizeRecommendations(a,o,r)).slice(0,8)}async calculateNeuralEmpathyProfile(e,t){return{mirrorNeuronActivity:this.calculateMirrorNeuronActivity(t),emotionalContagionResistance:this.calculateEmotionalContagionResistance(t),empathicDistressManagement:this.calculateEmpathicDistressManagement(t),cognitivePerspectiveTaking:this.calculateCognitivePerspectiveTaking(t),affectivePerspectiveTaking:this.calculateAffectivePerspectiveTaking(t),empathyFlexibility:this.calculateEmpathyFlexibility(t),empathyCalibration:this.calculateEmpathyCalibration(t),empathicMemory:this.calculateEmpathicMemory(t)}}calculateMirrorNeuronActivity(e){if(e.length===0)return 50;const t=e.filter(r=>r.notes.toLowerCase().includes("felt their")||r.notes.toLowerCase().includes("could feel")||r.notes.toLowerCase().includes("mirrored")||r.context.toLowerCase().includes("emotional connection")),s=e.filter(r=>r.socialSupport!=="none"),i=t.length/Math.max(s.length,1);return Math.min(100,i*80+20)}calculateEmotionalContagionResistance(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("boundary")||a.notes.toLowerCase().includes("protect myself")||a.notes.toLowerCase().includes("didn't absorb")||a.copingStrategies.includes("boundaries")),s=e.filter(a=>a.notes.toLowerCase().includes("overwhelmed by others")||a.notes.toLowerCase().includes("absorbed their emotions")||a.anxiety>7&&a.context.toLowerCase().includes("social")),i=t.length/e.length*70,r=s.length/e.length*30;return Math.max(10,Math.min(100,50+i-r))}calculateEmpathicDistressManagement(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("too much pain")||a.notes.toLowerCase().includes("can't handle their suffering")||a.anxiety>7&&a.notes.toLowerCase().includes("others")),s=e.filter(a=>a.copingStrategies.includes("self-care")||a.copingStrategies.includes("mindfulness")||a.notes.toLowerCase().includes("stepped back")||a.notes.toLowerCase().includes("took care of myself")),i=t.length/e.length*40,r=s.length/e.length*60;return Math.min(100,50+r-i)}calculateEmotionalGranularity(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=e.filter(a=>a.notes.split(" ").length>10&&(a.notes.includes("and")||a.notes.includes("but")||a.notes.includes("also"))),i=t*10,r=s.length/e.length*30;return Math.min(100,i*.7+r)}calculateMetaEmotionalAwareness(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("notice that i")||a.notes.toLowerCase().includes("realize i'm")||a.notes.toLowerCase().includes("aware of my")||a.notes.toLowerCase().includes("observing my")),s=e.reduce((a,o)=>a+o.emotionalRegulation,0)/e.length,i=t.length/e.length*60,r=s*4;return Math.min(100,i+r)}calculatePostTraumaticGrowth(e,t){if(e.length===0&&t.length===0)return 50;const s=t.filter(a=>a.notes.toLowerCase().includes("stronger because")||a.notes.toLowerCase().includes("learned from")||a.notes.toLowerCase().includes("grateful for the lesson")||a.notes.toLowerCase().includes("helped me grow")),i=e.filter(a=>a.baselineData.pain>=7),r=i.length>0?s.length/i.length:0;return Math.min(100,r*80+20)}calculateMeaningMaking(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("meaning")||a.notes.toLowerCase().includes("purpose")||a.notes.toLowerCase().includes("why this happened")||a.notes.toLowerCase().includes("makes sense")),s=e.filter(a=>a.hopefulness>=7&&a.notes.length>30),i=t.length/e.length*60,r=s.length/e.length*40;return Math.min(100,i+r)}async generateWisdomProfile(e,t,s){return{insights:await V1(e,t,s),wisdomCategories:{practicalWisdom:this.calculatePracticalWisdom(s),emotionalWisdom:this.calculateEmotionalWisdom(s),spiritualWisdom:this.calculateSpiritualWisdom(s),relationalWisdom:this.calculateRelationalWisdom(s),selfKnowledgeWisdom:this.calculateSelfKnowledgeWisdom(s)},wisdomGrowthRate:this.calculateWisdomGrowthRate(s),wisdomApplication:this.calculateWisdomApplication(s),wisdomSharing:this.calculateWisdomSharing(s),integratedWisdom:this.calculateIntegratedWisdom(s)}}calculatePracticalWisdom(e){const t=e.length?e.reduce((s,i)=>s+i.emotionalClarity,0)/e.length:5;return Math.max(0,Math.min(100,t*10))}calculateEmotionalWisdom(e){if(e.length===0)return 50;const t=e.reduce((i,r)=>i+r.emotionalRegulation,0)/e.length,s=e.reduce((i,r)=>i+r.hopefulness,0)/e.length;return Math.max(0,Math.min(100,(t+s)*5))}async updateUserPatterns(e,t,s){const i={userId:e,patterns:[{recentPainAvg:t.slice(-7).reduce((r,a)=>r+a.baselineData.pain,0)/Math.max(1,Math.min(7,t.length))}],preferences:[],responsiveness:s.length?s.reduce((r,a)=>r+a.mood,0)/(s.length*10):.5};this.userPatterns.set(e,i)}async getOrCreatePredictionModel(e){const t=this.predictionModels.get(e);if(t)return t;const s={modelId:`pred_${e}`,accuracy:.7,trainingData:[],predictions:[]};return this.predictionModels.set(e,s),s}prioritizeRecommendations(e,t,s){const i={urgent:4,high:3,medium:2,low:1};return i[t.priority]-i[e.priority]}async calculateEnhancedEmotionalIntelligence(e,t,s){return{selfAwareness:this.calculateEmotionalAwareness(t),selfRegulation:this.calculateEmotionalRegulation(t),motivation:t.length?t.reduce((i,r)=>i+r.hopefulness,0)/t.length*10:50,empathy:this.calculateEmpathyQuotient(t),socialSkills:this.calculateRelationshipManagement(t)}}async calculateAdvancedCompassionateProgress(e,t,s){return{selfCompassion:this.calculateSelfCompassion(s),selfCriticism:Math.max(0,100-this.calculateSelfCompassion(s)),progressCelebration:Math.min(100,s.filter(i=>{const r=i.notes.toLowerCase();return r.includes("proud")||r.includes("celebrate")||r.includes("celebration")}).length/Math.max(1,s.length)*100),setbackResilience:this.calculateResilienceGrowth(t,s),hopefulness:s.length?s.reduce((i,r)=>i+r.hopefulness,0)/s.length*10:50}}calculateAdaptiveReframing(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("perspective")||s.notes.toLowerCase().includes("reframe")||s.notes.toLowerCase().includes("silver lining")).length;return Math.min(t/e.length*100,100)}calculateCompassionFatigue(e){if(e.length===0)return 20;const t=e.filter(s=>s.notes.toLowerCase().includes("tired")||s.notes.toLowerCase().includes("exhausted")||s.notes.toLowerCase().includes("burned out")).length;return Math.min(t/e.length*100,80)}async analyzeRecoveryPatterns(e,t,s){const i=t.slice(-30).map(a=>a.baselineData.pain),r=Yd(i);return{avgRecoveryTime:Math.max(30,120-r),recoveryConsistency:Math.max(0,100-H1(i)*10),recoveryStrategies:[],setbackPredictors:[],resilienceFactors:[],recoveryTrajectory:[],adaptiveRecovery:Math.max(0,Math.min(100,r+50))}}async calculateAdvancedEmpathyKPIs(e,t,s){return{validationReceived:this.calculateSocialAwareness(t),validationGiven:this.calculateRelationshipManagement(t),emotionalSupport:this.calculateHumanConnection(t),understandingFelt:this.calculateEmpathicAccuracy(t),connectionQuality:this.calculateHumanConnection(t)}}calculateEmpathicAccuracy(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("understood")||s.notes.toLowerCase().includes("accurate")||s.notes.toLowerCase().includes("right")).length;return Math.min(t/e.length*100,100)}calculateEmpathicConcern(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("worried")||s.notes.toLowerCase().includes("concerned")||s.notes.toLowerCase().includes("care")).length;return Math.min(t/e.length*100,100)}calculatePerspectiveTaking(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("their perspective")||s.notes.toLowerCase().includes("see their side")||s.notes.toLowerCase().includes("understand them")).length;return Math.min(t/e.length*100,100)}calculateEmpathicMotivation(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("help")||s.notes.toLowerCase().includes("support")||s.notes.toLowerCase().includes("encourage")).length;return Math.min(t/e.length*100,100)}calculateBoundaryMaintenance(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("boundary")||s.notes.toLowerCase().includes("limit")||s.notes.toLowerCase().includes("space")).length;return Math.min(t/e.length*100,100)}async calculateCulturalEmpathy(e,t,s){if(t.length===0)return{culturalAwareness:50,crossCulturalEmpathy:50,culturalHumility:50,universalEmpathy:50,culturalAdaptation:50,inclusiveEmpathy:50,intersectionalAwareness:50};const i=this.culturalContext.get(e),r=t.filter(c=>c.notes.toLowerCase().includes("culture")||c.notes.toLowerCase().includes("tradition")||c.notes.toLowerCase().includes("background")).length,a=Math.min(r/t.length*100,100),o=i?Math.min(100,a+5):a;return{culturalAwareness:o,crossCulturalEmpathy:Math.max(0,o-5),culturalHumility:Math.min(100,o+5),universalEmpathy:Math.max(0,Math.min(100,60+o/5)),culturalAdaptation:Math.max(0,o-10),inclusiveEmpathy:Math.min(100,o+10),intersectionalAwareness:Math.max(0,o-15)}}async calculateAdvancedHumanizedMetrics(e,t,s,i){const r=this.calculateHumanConnection(s),a=this.calculateDignityPreservation(s),o=this.calculateMeaningfulness(t,s);return{courageScore:Math.max(0,Math.min(100,(o+r)/2)),vulnerabilityAcceptance:Math.max(0,Math.min(100,r*.6+a*.4)),authenticityLevel:Math.max(0,Math.min(100,a)),growthMindset:Math.max(0,Math.min(100,(o+60)/1.2))}}calculateInnerStrength(e,t){const s=e.slice(-7).reduce((r,a)=>r+a.baselineData.pain,0)/Math.max(1,Math.min(7,e.length||1)),i=t.slice(-7).reduce((r,a)=>r+a.mood,0)/7;return Math.max(0,Math.min(100,i/s*50))}calculateDignityMaintenance(e){if(e.length===0)return 75;const t=e.filter(s=>s.notes.toLowerCase().includes("dignity")||s.notes.toLowerCase().includes("respect")||s.notes.toLowerCase().includes("worthy")).length;return Math.min(t/e.length*100+50,100)}calculatePurposeClarity(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("purpose")||s.notes.toLowerCase().includes("meaning")||s.notes.toLowerCase().includes("direction")).length;return Math.min(t/e.length*100+40,100)}calculateSpiritualWellbeing(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("spiritual")||s.notes.toLowerCase().includes("faith")||s.notes.toLowerCase().includes("transcendent")).length;return Math.min(t/e.length*100+40,100)}calculateLifeNarrativeCoherence(e){if(e.length===0)return 65;const t=e.filter(s=>s.notes.toLowerCase().includes("story")||s.notes.toLowerCase().includes("journey")||s.notes.toLowerCase().includes("path")).length;return Math.min(t/e.length*100+50,100)}async calculateEmpathyIntelligenceProfile(e,t,s){const i=this.calculateEmpathyQuotient(t),r=this.calculateEmotionalRegulation(t),a=this.calculateSocialCognition(t);return{empathyIQ:Math.max(0,Math.min(200,i*2)),empathyProcessingSpeed:Math.max(0,Math.min(100,60+r/2)),empathyAccuracy:Math.max(0,Math.min(100,i)),empathyDiversity:Math.max(0,Math.min(100,a)),empathyInnovation:Math.max(0,Math.min(100,50+(i-50)/2)),empathyLeadership:Math.max(0,Math.min(100,40+a/2)),empathyTeaching:Math.max(0,Math.min(100,40+i/3)),empathyHealing:Math.max(0,Math.min(100,50+r/3)),metaEmpathy:Math.max(0,Math.min(100,this.calculateMetaEmotionalAwareness(t))),empathyWisdom:Math.max(0,Math.min(100,this.calculateEmotionalWisdom(t)))}}async analyzeTemporalEmpathyPatterns(e,t,s){const i=t.slice(-30).map(a=>a.mood),r=new Date;return this.analyzeDailyPatterns(i),this.analyzeWeeklyPatterns(i),this.analyzeMonthlyTrends(i),{dailyPatterns:[{timeOfDay:"morning",empathyLevel:Math.max(0,Math.min(100,i[i.length-1]??50)),empathyQuality:"tender",triggers:[],optimalMoments:[],challengingMoments:[]}],weeklyTrends:[{week:r,avgEmpathyLevel:Math.max(0,Math.min(100,i.reduce((a,o)=>a+o,0)/Math.max(1,i.length))),empathyRange:{min:0,max:100},dominantPattern:"stable",growthAreas:[],breakthroughs:[]}],monthlyEvolution:[{month:r,evolutionScore:50,newCapabilities:[],deepenedCapacities:[],challenges:[],integrationLevel:50}],seasonalInfluences:[{season:"summer",empathyCharacteristics:[],seasonalChallenges:[],seasonalGifts:[],adaptationStrategies:[]}],lifePhaseEmpathy:[],empathyMilestones:[],empathyRegression:[],futurEmpathyProjection:{projectionTimeframe:"3 months",predictedGrowthAreas:[],anticipatedChallenges:[],developmentOpportunities:[],requiredSupports:[],confidenceLevel:60}}}async trackMicroEmpathyMoments(e,t){const s=Math.max(0,Math.min(100,t.reduce((i,r)=>i+r.mood,0)/Math.max(1,t.length)*10));return{microMoments:[],dailyMicroAverage:s,microEmpathyQuality:this.calculateMicroMomentQuality(t),microEmpathyConsistency:60,spontaneousEmpathy:55,mindfulEmpathy:65,empathyInterruptions:[],empathyRecovery:[]}}async generatePredictiveModel(e,t,s,i){return F8(t,s)}async generatePatternInsights(e,t,s){return[{id:"1",type:"pattern",title:"Empathy Pattern Detected",description:"Your empathy levels show consistent improvement over time.",confidence:85,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateCorrelationInsights(e,t,s){return[{id:"2",type:"correlation",title:"Pain-Empathy Correlation",description:"Higher pain levels correlate with increased empathy for others.",confidence:78,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateGrowthInsights(e,t,s){return[{id:"3",type:"improvement",title:"Empathy Growth Opportunity",description:"Focus on perspective-taking exercises for enhanced empathy.",confidence:82,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateWisdomInsights(e,t,s){return(await V1(e,s.painEntries,s.moodEntries)).map(r=>({id:r.id,type:"celebration",title:`Wisdom: ${r.category}`,description:r.insight,confidence:Math.min(100,r.applicability),actionable:!0,personalized:!1,timestamp:r.dateGained,dataPoints:[]}))}async generatePredictiveInsights(e,t,s){return[{id:"5",type:"improvement",title:"Empathy Forecast",description:"Your empathy levels are predicted to increase over the next week.",confidence:74,actionable:!0,timestamp:new Date,personalized:!1,dataPoints:[]}]}async generateBurnoutPreventionRecommendations(e,t){return[{id:"1",category:"lifestyle",priority:"high",title:"Burnout Prevention",description:"Take regular breaks to prevent empathy fatigue.",rationale:"Frequent short rests reduce emotional overload.",steps:["Schedule 10-minute breaks","Practice mindfulness","Set boundaries"],expectedBenefits:["Reduced burnout risk"],timeframe:"1 week",effort:"low",personalization:[]}]}async generateGrowthAccelerationRecommendations(e,t){return[{id:"2",category:"cognitive",priority:"medium",title:"Accelerate Empathy Growth",description:"Engage in perspective-taking exercises to enhance empathy.",rationale:"Perspective-taking practices improve empathic accuracy.",steps:["Read diverse perspectives","Practice active listening","Volunteer"],expectedBenefits:["Improved perspective-taking"],timeframe:"2 weeks",effort:"medium",personalization:[]}]}async generateMicroInterventions(e,t){return[{id:"3",category:"emotional",priority:"low",title:"Daily Empathy Moment",description:"Take 2 minutes daily to reflect on others' perspectives.",rationale:"Micro-reflections build consistent empathic habits.",steps:["Set daily reminder","Practice empathy check-ins"],expectedBenefits:["Improved empathy awareness"],timeframe:"1 day",effort:"low",personalization:[]}]}async generateWisdomApplicationRecommendations(e,t){return[{id:"4",category:"social",priority:"medium",title:"Apply Your Wisdom",description:"Share your empathy insights with others to reinforce learning.",rationale:"Teaching others consolidates learning.",steps:["Mentor someone","Write about experiences","Join support groups"],expectedBenefits:["Enhanced wisdom integration"],timeframe:"1 month",effort:"medium",personalization:[]}]}async generateCulturalEmpathyRecommendations(e,t){return[{id:"5",category:"social",priority:"low",title:"Cultural Empathy Development",description:"Explore different cultural perspectives on pain and healing.",rationale:"Exposure to diverse perspectives deepens empathy.",steps:["Read multicultural literature","Attend cultural events","Learn about traditions"],expectedBenefits:["Broader empathy understanding"],timeframe:"2 months",effort:"medium",personalization:[]}]}calculateCognitivePerspectiveTaking(e){return this.calculatePerspectiveTaking(e)}calculateAffectivePerspectiveTaking(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("felt with")||s.notes.toLowerCase().includes("emotional connection")).length;return Math.min(t/e.length*100,100)}calculateEmpathyFlexibility(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("adapt")||s.notes.toLowerCase().includes("adjust")).length;return Math.min(t/e.length*100+40,100)}calculateEmpathyCalibration(e){if(e.length===0)return 55;const t=e.filter(s=>s.notes.toLowerCase().includes("balance")||s.notes.toLowerCase().includes("appropriate")).length;return Math.min(t/e.length*100+35,100)}calculateEmpathicMemory(e){if(e.length===0)return 65;const t=e.filter(s=>s.notes.toLowerCase().includes("remember")||s.notes.toLowerCase().includes("recall")).length;return Math.min(t/e.length*100+45,100)}calculateEmotionalAwareness(e){return e.length===0?50:Math.min(e.length*2,100)}calculateEmotionalRegulation(e){if(e.length<2)return 50;const t=e.slice(1).map((i,r)=>Math.abs(i.mood-e[r].mood)),s=t.reduce((i,r)=>i+r,0)/t.length;return Math.max(0,100-s*10)}calculateSocialAwareness(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("others")||s.notes.toLowerCase().includes("people")||s.notes.toLowerCase().includes("social")).length;return Math.min(t/e.length*100,100)}calculateRelationshipManagement(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("relationship")||s.notes.toLowerCase().includes("friend")||s.notes.toLowerCase().includes("family")).length;return Math.min(t/e.length*100,100)}calculateSelfCompassion(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("kind to myself")||s.notes.toLowerCase().includes("self-compassion")||s.notes.toLowerCase().includes("forgive myself")).length;return Math.min(t/e.length*100,100)}calculateCompassionForOthers(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("compassion")||s.notes.toLowerCase().includes("empathy")||s.notes.toLowerCase().includes("understanding")).length;return Math.min(t/e.length*100,100)}calculateResilienceGrowth(e,t){if(e.length<7||t.length<7)return 50;const s=e.slice(-7).reduce((d,u)=>d+u.baselineData.pain,0)/7,i=e.slice(-14,-7).reduce((d,u)=>d+u.baselineData.pain,0)/7,r=t.slice(-7).reduce((d,u)=>d+u.mood,0)/7,a=t.slice(-14,-7).reduce((d,u)=>d+u.mood,0)/7,o=i-s,c=r-a;return Math.max(0,Math.min(100,(o+c)*10+50))}calculateTraumaIntegration(e,t){if(e.length===0||t.length===0)return 50;const s=t.filter(i=>i.notes.toLowerCase().includes("healing")||i.notes.toLowerCase().includes("growth")||i.notes.toLowerCase().includes("integration")).length;return Math.min(s/t.length*100+30,100)}calculateEmpathyQuotient(e){if(e.length===0)return 50;const t=e.filter(i=>i.notes.toLowerCase().includes("empathy")||i.notes.toLowerCase().includes("understand")||i.notes.toLowerCase().includes("feel for")).length,s=this.calculateCompassionForOthers(e);return Math.min(t/e.length*70+s*.3,100)}calculateEmotionalIntelligence(e){return(this.calculateEmotionalAwareness(e)+this.calculateEmotionalRegulation(e))/2}calculateSocialIntelligence(e){return(this.calculateSocialAwareness(e)+this.calculateRelationshipManagement(e))/2}calculateSocialCognition(e){return this.calculateEmotionalIntelligence(e),this.calculateSocialIntelligence(e)}calculateHumanConnection(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("connection")||s.notes.toLowerCase().includes("bond")||s.notes.toLowerCase().includes("close")).length;return Math.min(t/e.length*100,100)}calculateDignityPreservation(e){return this.calculateDignityMaintenance(e)}calculateMeaningfulness(e,t){if(t.length===0)return 50;const s=t.filter(o=>o.notes.toLowerCase().includes("meaning")||o.notes.toLowerCase().includes("purpose")||o.notes.toLowerCase().includes("significant")).length,i=Math.min(s/t.length*100,100),r=e.slice(-7).reduce((o,c)=>o+c.baselineData.pain,0)/7,a=Math.max(0,(10-r)*2);return Math.min(i+a,100)}calculatePatternStability(e){if(e.length<2)return 50;const t=H1(e);return Math.max(0,100-t*10)}calculateRecoverySpeed(e){if(e.length<3)return 50;const t=e.slice(-3),s=t[0]-t[t.length-1];return Math.max(0,Math.min(100,s*10+50))}analyzeDailyPatterns(e){return{trend:Yd(e),stability:this.calculatePatternStability(e)}}analyzeWeeklyPatterns(e){return{trend:Yd(e),stability:this.calculatePatternStability(e)}}analyzeMonthlyTrends(e){return{trend:Yd(e),improvement:this.calculateRecoverySpeed(e)}}calculateMicroMomentQuality(e){if(e.length===0)return 50;const t=e.reduce((i,r)=>i+r.mood,0)/e.length,s=e.filter(i=>i.notes.toLowerCase().includes("quality")||i.notes.toLowerCase().includes("meaningful")||i.notes.toLowerCase().includes("deep")).length;return Math.min(t+s/e.length*20,100)}calculateSpiritualWisdom(e){if(e.length===0)return 50;const t=["meaning","purpose","transcend","transcendent","faith","spiritual","bigger than","grateful"];let s=0;for(const o of e){const c=o.notes.toLowerCase();t.some(d=>c.includes(d))&&s++}const i=e.reduce((o,c)=>o+c.emotionalClarity,0)/e.length,r=e.reduce((o,c)=>o+c.emotionalRegulation,0)/e.length,a=s/e.length*60;return Math.max(0,Math.min(100,a+(i+r)*2))}calculateRelationalWisdom(e){if(e.length===0)return 50;const t=["relationship","friend","family","support","listened","helped","connection"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.filter(r=>r.socialSupport!=="none").length/e.length*50;return Math.max(0,Math.min(100,s/e.length*50+i))}calculateSelfKnowledgeWisdom(e){if(e.length===0)return 50;const t=["i feel","i notice","i realized","i understand","i learned","aware","noticing"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.reduce((r,a)=>r+a.emotionalClarity,0)/e.length;return Math.max(0,Math.min(100,s/e.length*60+i*4))}calculateWisdomGrowthRate(e){if(e.length<2)return 10;const t=Math.floor(e.length/2),s=["learned","realized","understand","insight","growth"],i=c=>c.filter(d=>{const u=d.notes.toLowerCase();return s.some(f=>u.includes(f))}).length/Math.max(1,c.length),r=i(e.slice(0,t)),o=(i(e.slice(t))-r)*100;return Math.max(0,Math.min(100,40+o))}calculateWisdomApplication(e){if(e.length===0)return 40;const t=["applied","use","used","practice","practiced","implemented","shared"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.reduce((r,a)=>r+a.emotionalRegulation,0)/e.length;return Math.max(0,Math.min(100,s/e.length*70+i*3))}calculateWisdomSharing(e){if(e.length===0)return 30;const t=["told","shared","explained","helped someone","wrote about"];let s=0;for(const i of e){const r=i.notes.toLowerCase();t.some(a=>r.includes(a))&&s++}return Math.max(0,Math.min(100,s/e.length*100))}calculateIntegratedWisdom(e){if(e.length===0)return 40;const t=["learned","realized","understand","insight"],s=["applied","use","practice","implemented"];let i=0;for(const a of e){const o=a.notes.toLowerCase();t.some(c=>o.includes(c))&&s.some(c=>o.includes(c))&&i++}const r=this.calculateEmotionalRegulation(e);return Math.max(0,Math.min(100,i/e.length*60+r*.4))}}class B8{config;achievements=new Map;milestones=new Map;meaningfulMoments=new Map;empathyIntelligence;constructor(e){this.config=e,this.empathyIntelligence=new z8({learningRate:.1,predictionHorizon:30,personalizationDepth:"deep",culturalSensitivity:"enhanced",interventionStyle:"adaptive",privacyLevel:"enhanced"})}async calculateQuantifiedEmpathy(e,t,s=[],i,r,a){return await this.empathyIntelligence.calculateAdvancedEmpathyMetrics(e,t,s,i,r,a)}async generateEmpathyInsights(e,t,s,i){return await this.empathyIntelligence.generateAdvancedInsights(e,t,{painEntries:s,moodEntries:i})}async generateEmpathyRecommendations(e,t,s){return await this.empathyIntelligence.generatePersonalizedRecommendations(e,t,s)}async calculateEmotionalIntelligence(e,t,s){const i=t.slice(-30),r=this.calculateSelfAwarenessEQ(i),a=this.calculateSelfRegulationEQ(i),o=this.calculateMotivationEQ(i,s),c=this.calculateEmpathyEQ(i),d=this.calculateSocialSkillsEQ(i);return{selfAwareness:r,selfRegulation:a,motivation:o,empathy:c,socialSkills:d}}async calculateCompassionateProgress(e,t,s){const i=t.slice(-30),r=s.slice(-30);return{selfCompassion:this.calculateSelfCompassion(r,i),selfCriticism:this.calculateSelfCriticism(r),progressCelebration:this.calculateProgressCelebrationScore(i,r),setbackResilience:this.calculateSetbackResilience(i,r),hopefulness:this.calculateHopefulnessScore(r)}}async calculateEmpathyKPIs(e,t,s){const i=t.slice(-30);return{validationReceived:this.calculateValidationReceived(i,s),validationGiven:this.calculateValidationGiven(i),emotionalSupport:this.calculateEmotionalSupport(i),understandingFelt:this.calculateUnderstandingFelt(i),connectionQuality:this.calculateConnectionQualityKPI(i)}}async calculateHumanizedMetrics(e,t,s,i){const r=t.slice(-30),a=s.slice(-30);return{courageScore:this.calculateCourageScore(r,a),vulnerabilityAcceptance:this.calculateVulnerabilityAcceptance(a),authenticityLevel:this.calculateAuthenticityLevel(a),growthMindset:this.calculateGrowthMindset(a,i),wisdomGained:this.extractWisdomGained(r,a)}}calculateSelfAwarenessEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=this.calculateMoodVariability(e),i=t*10,r=Math.max(0,20-s);return Math.min(100,i+r)}calculateSelfRegulationEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalRegulation,0)/e.length,s=new Set;e.forEach(a=>{a.copingStrategies.forEach(o=>s.add(o))});const i=t*10,r=Math.min(30,s.size*5);return Math.min(100,i+r)}calculateMotivationEQ(e,t){if(e.length===0)return 50;const s=e.reduce((o,c)=>o+c.hopefulness,0)/e.length,i=Math.min(t.length,30)/30,r=s*10,a=i*40;return Math.min(100,r*.6+a*.4)}calculateEmpathyEQ(e){if(e.length===0)return 50;const t=e.filter(a=>a.socialSupport!=="none"),s=e.filter(a=>a.context.toLowerCase().includes("helping")||a.context.toLowerCase().includes("supporting")||a.notes.toLowerCase().includes("helped someone")),i=t.length/e.length*50,r=s.length/e.length*50;return Math.min(100,i+r)}calculateSocialSkillsEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=this.calculateAverageSocialSupport(e);return(t*10+s)/2}calculateSelfCompassion(e,t){if(e.length===0)return 50;const s=e.filter(o=>o.notes.toLowerCase().includes("gentle with myself")||o.notes.toLowerCase().includes("self-care")||o.copingStrategies.includes("self-compassion")||o.copingStrategies.includes("mindfulness")),i=e.filter(o=>o.notes.toLowerCase().includes("should have")||o.notes.toLowerCase().includes("failed")||o.notes.toLowerCase().includes("not good enough")),r=s.length/e.length*60,a=i.length/e.length*30;return Math.max(20,Math.min(100,50+r-a))}calculateSelfCriticism(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes.toLowerCase().includes("should have")||s.notes.toLowerCase().includes("failed")||s.notes.toLowerCase().includes("not good enough")||s.notes.toLowerCase().includes("weak")||s.notes.toLowerCase().includes("giving up"));return Math.min(100,t.length/e.length*100)}calculateProgressCelebrationScore(e,t){if(e.length===0&&t.length===0)return 50;const s=t.filter(o=>o.mood>=7),i=t.filter(o=>o.notes.toLowerCase().includes("accomplished")||o.notes.toLowerCase().includes("proud")||o.notes.toLowerCase().includes("achieved")||o.context.toLowerCase().includes("success")),r=s.length/Math.max(t.length,1)*50,a=i.length/Math.max(t.length,1)*50;return Math.min(100,r+a)}calculateSetbackResilience(e,t){if(e.length===0&&t.length===0)return 50;let s=0,i=0;for(let a=1;a<t.length;a++){const o=t[a],c=t[a-1];c.mood<=4&&o.mood>=6&&s++,c.mood<=4&&i++}for(let a=1;a<e.length;a++){const o=e[a],c=e[a-1];c.baselineData.pain>=7&&o.baselineData.pain<=5&&s++,c.baselineData.pain>=7&&i++}const r=i>0?s/i:.5;return Math.min(100,r*100)}calculateHopefulnessScore(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.hopefulness,0)/e.length,s=e.filter(a=>a.notes.toLowerCase().includes("hope")||a.notes.toLowerCase().includes("better")||a.notes.toLowerCase().includes("future")||a.notes.toLowerCase().includes("optimistic")),i=t*10,r=s.length/e.length*20;return Math.min(100,i+r)}calculateValidationReceived(e,t){if(e.length===0)return 40;const s=e.filter(o=>o.socialSupport!=="none"),i=e.filter(o=>o.notes.toLowerCase().includes("understood")||o.notes.toLowerCase().includes("supported")||o.notes.toLowerCase().includes("validated")||o.notes.toLowerCase().includes("heard")),r=s.length/e.length*60,a=i.length/e.length*40;return Math.min(100,r+a)}calculateValidationGiven(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes.toLowerCase().includes("helped")||s.notes.toLowerCase().includes("supported")||s.notes.toLowerCase().includes("listened")||s.context.toLowerCase().includes("helping"));return Math.min(100,t.length/e.length*100)}calculateEmotionalSupport(e){if(e.length===0)return 40;const t=this.calculateAverageSocialSupport(e),s=e.filter(a=>a.socialSupport==="strong"||a.socialSupport==="moderate").length,i=t,r=s/e.length*40;return Math.min(100,i+r)}calculateUnderstandingFelt(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes.toLowerCase().includes("understood")||s.notes.toLowerCase().includes("gets it")||s.notes.toLowerCase().includes("knows how I feel")||s.socialSupport==="strong");return Math.min(100,t.length/e.length*120)}calculateConnectionQualityKPI(e){if(e.length===0)return 40;const t=e.filter(r=>r.socialSupport!=="none"&&r.mood>=6),s=this.calculateAverageSocialSupport(e),i=t.length/e.length*50;return Math.min(100,s*.6+i)}calculateCourageScore(e,t){if(e.length===0&&t.length===0)return 50;const s=Math.min(e.length,30)/30,i=e.filter(d=>d.baselineData.pain>=7).length,r=t.filter(d=>d.notes.toLowerCase().includes("despite")||d.notes.toLowerCase().includes("even though")||d.notes.toLowerCase().includes("courage")||d.notes.toLowerCase().includes("brave")),a=s*40,o=Math.min(30,i*2),c=r.length/Math.max(t.length,1)*30;return Math.min(100,a+o+c)}calculateVulnerabilityAcceptance(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("vulnerable")||a.notes.toLowerCase().includes("afraid")||a.notes.toLowerCase().includes("scared")||a.notes.toLowerCase().includes("uncertain")||a.notes.toLowerCase().includes("don't know")),s=e.filter(a=>a.notes.toLowerCase().includes("accept")||a.notes.toLowerCase().includes("okay with")||a.notes.toLowerCase().includes("allow myself")),i=t.length/e.length*50,r=s.length/e.length*50;return Math.min(100,i+r)}calculateAuthenticityLevel(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=e.filter(a=>a.notes.toLowerCase().includes("honestly")||a.notes.toLowerCase().includes("truth")||a.notes.toLowerCase().includes("really feel")||a.notes.toLowerCase().includes("authentic")),i=t*10,r=s.length/e.length*30;return Math.min(100,i*.7+r)}calculateGrowthMindset(e,t){if(e.length===0)return 50;const s=e.filter(o=>o.notes.toLowerCase().includes("learn")||o.notes.toLowerCase().includes("grow")||o.notes.toLowerCase().includes("improve")||o.notes.toLowerCase().includes("try")||o.notes.toLowerCase().includes("practice")),i=new Set;e.forEach(o=>{o.copingStrategies.forEach(c=>i.add(c))});const r=s.length/e.length*60,a=Math.min(40,i.size*5);return Math.min(100,r+a)}extractWisdomGained(e,t){const s=[];return t.filter(r=>r.notes.toLowerCase().includes("learned")||r.notes.toLowerCase().includes("realized")||r.notes.toLowerCase().includes("understand now")||r.notes.toLowerCase().includes("insight")).forEach(r=>{r.notes.length>20&&s.push(r.notes)}),e.length>10&&s.push("Pain tracking has helped me identify patterns and triggers"),t.filter(r=>r.copingStrategies.length>0).length>5&&s.push("I've discovered effective coping strategies that work for me"),t.filter(r=>r.socialSupport!=="none").length>3&&s.push("Seeking support from others is a sign of strength, not weakness"),s.slice(0,5)}calculateMoodVariability(e){if(e.length<2)return 0;const t=e.map(r=>r.mood),s=t.reduce((r,a)=>r+a,0)/t.length,i=t.reduce((r,a)=>r+Math.pow(a-s,2),0)/t.length;return Math.sqrt(i)}calculateAverageSocialSupport(e){const t=e.filter(i=>i.socialSupport!=="none");if(t.length===0)return 25;const s={minimal:25,moderate:60,strong:90};return t.reduce((i,r)=>{const a=s[r.socialSupport]||25;return i+a},0)/t.length}async calculateEmotionalValidation(e,t,s="weekly"){const i=this.filterByTimeframe(t,s);return{validationScore:this.calculateValidationScore(i),emotionalTrends:{copingStrategiesUsed:this.extractCopingStrategies(i),emotionalResilience:this.calculateResilience(i),supportSystemEngagement:this.calculateSupportEngagement(i),selfAdvocacyInstances:this.countSelfAdvocacy(i)},validationSources:{selfValidation:this.calculateSelfValidation(i),communitySupport:this.calculateCommunitySupport(i),professionalAcknowledment:this.calculateProfessionalValidation(i),familyUnderstanding:this.calculateFamilySupport(i)}}}async generateProgressCelebration(e,t){const s=await this.identifyAchievements(e,t),i=await this.identifyMilestones(e,t),r=await this.identifyMeaningfulMoments(e,t);return{achievements:s,milestones:i,personalGrowth:{selfAwareness:this.calculateSelfAwareness(t),copingSkills:this.calculateCopingSkillsGrowth(t),communicationImprovement:this.calculateCommunicationGrowth(t),boundarySettingProgress:this.calculateBoundaryProgress(t)},meaningfulMoments:r}}async calculateUserAgency(e,t){return{decisionMakingPower:this.calculateDecisionMakingPower(t),selfAdvocacyScore:this.calculateSelfAdvocacyScore(t),choiceExercised:{treatmentDecisions:this.countTreatmentChoices(t),dailyChoices:this.countDailyChoices(t),boundarySettings:this.countBoundaryChoices(t),communicationStyles:this.countCommunicationChoices(t)},empowermentActivities:{educationSeeking:this.countEducationActivities(t),resourceUtilization:this.countResourceUse(t),communityParticipation:this.countCommunityEngagement(t),selfCareInitiatives:this.countSelfCareInitiatives(t)}}}async generateDignityPreservingReport(e,t){return{userDefinedSuccess:await this.extractUserDefinedSuccesses(t),strengthsBased:{resilience:this.identifyResilienceStrengths(t),resourcefulness:this.identifyResourcefulness(t),wisdom:this.identifyWisdomGained(t),courage:this.identifyCourage(t)},growthOriented:{learnings:this.extractLearnings(t),adaptations:this.identifyAdaptations(t),newSkills:this.identifyNewSkills(t),perspectives:this.identifyPerspectiveShifts(t)},personCentered:{values:this.extractValues(t),priorities:this.identifyPriorities(t),preferences:this.extractPreferences(t),goals:this.identifyGoals(t)}}}async identifyAchievements(e,t){const s=[];this.filterByTimeframe(t,"daily").length>0&&s.push({id:`daily-${Date.now()}`,type:"daily",title:"Showed Up Today",description:"You tracked your experience and showed self-care by paying attention to your needs.",dateAchieved:new Date().toISOString(),category:"self_care",celebrationMessage:"Every entry is an act of self-advocacy. You showed up for yourself today! ",shareableMessage:"I practiced self-care by listening to my body today.",icon:""});const r=this.extractCopingStrategies(t);return r.length>=3&&s.push({id:`coping-${Date.now()}`,type:"weekly",title:"Coping Strategy Explorer",description:`You've tried ${r.length} different coping strategies this week.`,dateAchieved:new Date().toISOString(),category:"coping",celebrationMessage:`You're building a diverse toolkit! ${r.length} strategies shows real wisdom. `,shareableMessage:"I'm expanding my coping toolkit with new strategies.",icon:""}),this.calculateCommunicationGrowth(t)>.7&&s.push({id:`communication-${Date.now()}`,type:"monthly",title:"Voice of Advocacy",description:"You've shown significant growth in expressing your needs and experiences.",dateAchieved:new Date().toISOString(),category:"advocacy",celebrationMessage:"Your voice matters, and you're using it with increasing confidence! ",shareableMessage:"I'm finding my voice and learning to advocate for my needs.",icon:""}),s}async identifyMilestones(e,t){const s=[];t.length===1&&s.push({id:`first-entry-${e}`,title:"Journey Begins",description:"You took the first step in tracking your pain journey.",dateReached:t[0].timestamp,significance:"moderate",personalMeaning:"Starting to honor your experience by documenting it.",supportNetwork:["yourself"],nextSteps:["Continue tracking","Explore patterns","Be gentle with yourself"]});const i=this.getEntriesInLastWeeks(t,4),r=this.countConsistentWeeks(i);return r>=2&&s.push({id:`consistency-${e}`,title:"Building Routine",description:`You've consistently tracked for ${r} weeks.`,dateReached:new Date().toISOString(),significance:"moderate",personalMeaning:"Developing a sustainable practice of self-awareness.",supportNetwork:["yourself","routine"],nextSteps:["Celebrate this dedication","Notice emerging patterns","Trust the process"]}),s}async identifyMeaningfulMoments(e,t){const s=[];for(const i of t)i.notes&&this.containsInsightKeywords(i.notes)&&s.push({id:`moment-${i.timestamp}`,date:i.timestamp,description:this.extractInsightDescription(i.notes),emotionalImpact:this.calculateEmotionalImpact(i),insights:this.extractInsights(i.notes),gratitude:this.extractGratitude(i.notes),connections:this.extractConnections(i.notes)});return s}calculateValidationScore(e){let t=0,s=0;for(const i of e)i.notes&&(this.containsValidationKeywords(i.notes)&&(t+=20),this.containsSupportKeywords(i.notes)&&(t+=15),this.containsProfessionalValidation(i.notes)&&(t+=25),s++);return s>0?Math.min(100,t/s):50}extractCopingStrategies(e){const t=new Set,s=["meditation","breathing","rest","heat","cold","massage","music","distraction","mindfulness","exercise","stretching","bath","reading","talking","journaling","art","nature","support","therapy"];for(const i of e)if(i.notes){const r=i.notes.toLowerCase();for(const a of s)r.includes(a)&&t.add(a)}return Array.from(t)}calculateResilience(e){let t=0,s=0;for(const i of e)i.baselineData.pain>6&&(i.notes&&this.containsResilienceMarkers(i.notes)&&(t+=1),s++);return s>0?t/s*100:70}containsValidationKeywords(e){return["valid","real","understand","acknowledge","believe","legitimate"].some(s=>e.toLowerCase().includes(s))}containsSupportKeywords(e){return["support","help","care","listen","friend","family","group"].some(s=>e.toLowerCase().includes(s))}containsProfessionalValidation(e){return["doctor","therapist","nurse","specialist","diagnosed","treatment"].some(s=>e.toLowerCase().includes(s))}containsInsightKeywords(e){return["realized","learned","discovered","noticed","breakthrough","understanding"].some(s=>e.toLowerCase().includes(s))}containsResilienceMarkers(e){return["despite","still","managed","cope","through","persevere","continue"].some(s=>e.toLowerCase().includes(s))}filterByTimeframe(e,t){const s=new Date;let i;switch(t){case"daily":i=new Date(s.getTime()-1440*60*1e3);break;case"weekly":i=new Date(s.getTime()-10080*60*1e3);break;case"monthly":i=new Date(s.getTime()-720*60*60*1e3);break}return e.filter(r=>new Date(r.timestamp)>=i)}calculateSupportEngagement(e){if(e.length===0)return 40;let t=0;for(const i of e){const r=(i.notes||"").toLowerCase();/(support|friend|family|group|community|talked|call)/.test(r)&&t++}const s=t/e.length;return Math.max(0,Math.min(100,30+s*70))}countSelfAdvocacy(e){return e.filter(t=>t.notes&&this.containsAdvocacyKeywords(t.notes)).length}containsAdvocacyKeywords(e){return["asked","spoke up","boundary","need","no","explained","requested"].some(s=>e.toLowerCase().includes(s))}calculateSelfValidation(e){if(e.length===0)return 50;const t=["valid","real","accepted","okay","allowed","legitimate","deserve","worthy"],s=["fake","imagining","overreact","exaggerat","not real","should not"];let i=0,r=0;for(const c of e){const d=(c.notes||"").toLowerCase();t.some(u=>d.includes(u))&&i++,s.some(u=>d.includes(u))&&r++}const a=i/e.length,o=r/e.length;return Math.max(0,Math.min(100,40+a*60-o*30))}calculateCommunitySupport(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes&&/community|group|meeting|peer/i.test(s.notes)).length;return Math.min(100,20+t/e.length*80)}calculateProfessionalValidation(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes&&/doctor|therapist|specialist|nurse|appointment|clinic/i.test(s.notes)).length;return Math.min(100,25+t/e.length*75)}calculateFamilySupport(e){if(e.length===0)return 35;const t=e.filter(s=>s.notes&&/family|parent|sibling|partner|spouse|child|kids/i.test(s.notes)).length;return Math.min(100,30+t/e.length*70)}calculateSelfAwareness(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes&&/noticed|realized|aware|pattern|trigger|understand/i.test(s.notes)).length;return Math.min(100,t/e.length*100)}calculateCopingSkillsGrowth(e){if(e.length===0)return 40;const t=["meditation","breathing","stretch","journaling","mindfulness","rest","heat","cold","pace"];let s=new Set;for(const i of e){const r=(i.notes||"").toLowerCase();t.forEach(a=>{r.includes(a)&&s.add(a)})}return Math.min(100,20+s.size*10)}calculateCommunicationGrowth(e){if(e.length===0)return 40;const t=["communicat","told","said","explained","express","shared"];let s=0;for(const i of e){const r=(i.notes||"").toLowerCase();t.some(a=>r.includes(a))&&s++}return Math.min(100,30+s/e.length*70)}calculateBoundaryProgress(e){if(e.length===0)return 35;const t=e.filter(s=>s.notes&&/boundary|said no|limit|protected|rested instead/i.test(s.notes)).length;return Math.min(100,25+t/e.length*75)}calculateDecisionMakingPower(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes&&/decided|chose|opted|selected|planned/i.test(s.notes)).length;return Math.min(100,35+t/e.length*65)}calculateSelfAdvocacyScore(e){if(e.length===0)return 45;const t=e.filter(s=>s.notes&&/asked|requested|advocat|explained need|pushed for/i.test(s.notes)).length;return Math.min(100,30+t/e.length*70)}countTreatmentChoices(e){return e.filter(t=>t.notes&&/treatment|therapy|exercise|protocol|plan/i.test(t.notes)).length}countDailyChoices(e){return e.filter(t=>t.notes&&/decided|chose|opted|adjusted|scheduled/i.test(t.notes)).length}countBoundaryChoices(e){return e.filter(t=>t.notes&&/boundary|said no|limit/i.test(t.notes)).length}countCommunicationChoices(e){return e.filter(t=>t.notes&&/communicat|told|shared|express/i.test(t.notes)).length}countEducationActivities(e){return e.filter(t=>t.notes&&/read|research|article|learn|webinar|podcast/i.test(t.notes)).length}countResourceUse(e){return e.filter(t=>t.notes&&/resource|tool|app|tracker|guide/i.test(t.notes)).length}countCommunityEngagement(e){return e.filter(t=>t.notes&&/group|community|forum|meeting|peer/i.test(t.notes)).length}countSelfCareInitiatives(e){return e.filter(t=>t.notes&&/self-care|rested|hydrated|nutrition|sleep|mindfulness|meditation|breathing/i.test(t.notes)).length}async extractUserDefinedSuccesses(e){return["Getting through tough days","Learning about myself","Building coping skills"]}identifyResilienceStrengths(e){return["Persistence","Adaptability","Hope"]}identifyResourcefulness(e){return["Creative problem solving","Finding helpful resources","Building support networks"]}identifyWisdomGained(e){return["Understanding my patterns","Knowing my limits","Recognizing what helps"]}identifyCourage(e){return["Facing difficult days","Speaking up for needs","Trying new approaches"]}extractLearnings(e){return["Pain doesn't define me","I have more strength than I knew","It's okay to ask for help"]}identifyAdaptations(e){return["Modified daily routines","New communication strategies","Flexible goal setting"]}identifyNewSkills(e){return["Mindfulness techniques","Pain management strategies","Self-advocacy"]}identifyPerspectiveShifts(e){return["Focus on progress not perfection","Value rest as productive","Appreciate small victories"]}extractValues(e){return["Self-compassion","Authenticity","Connection","Growth"]}identifyPriorities(e){return["Health and wellbeing","Meaningful relationships","Personal growth"]}extractPreferences(e){return["Gentle approaches","Collaborative care","Holistic methods"]}identifyGoals(e){return["Better quality of life","Increased self-understanding","Stronger support network"]}extractInsightDescription(e){return"Personal breakthrough in understanding pain patterns"}calculateEmotionalImpact(e){return 75}extractInsights(e){return["Pain patterns are connected to stress","Rest is not giving up"]}extractGratitude(e){return["Supportive friends","Access to healthcare","Inner strength"]}extractConnections(e){return["Support group","Healthcare team","Family"]}getEntriesInLastWeeks(e,t){const s=new Date(Date.now()-t*7*24*60*60*1e3);return e.filter(i=>new Date(i.timestamp)>=s)}countConsistentWeeks(e){if(e.length===0)return 0;const t={};for(const s of e){const i=new Date(s.timestamp),r=i.getUTCFullYear(),a=new Date(Date.UTC(r,0,1)),o=Math.ceil(((i.getTime()-a.getTime())/864e5+a.getUTCDay()+1)/7),c=`${r}-W${o}`;t[c]=(t[c]||0)+1}return Object.values(t).filter(s=>s>=3).length}}class $8{moodEntries=new Map;triggerDatabase=new Map;recoveryData=new Map;copingStrategies=new Map;async addMoodEntry(e,t){const s={...t,timestamp:new Date},i=this.moodEntries.get(e)||[];return i.push(s),this.moodEntries.set(e,i),this.analyzeEmotionalPatterns(e,s),s}async calculateEmotionalStateMetrics(e,t){const s=this.moodEntries.get(e)||[];return{moodPatterns:await this.analyzeMoodPatterns(e,s),emotionalTriggers:await this.analyzeEmotionalTriggers(e,s,t),emotionalRecovery:await this.calculateEmotionalRecovery(e,s),socialEmotionalHealth:await this.assessSocialEmotionalHealth(e,s)}}async analyzeMoodPatterns(e,t){const s=new Date,i=t.filter(a=>s.getTime()-a.timestamp.getTime()<10080*60*1e3);return{current:i.length>0?i[i.length-1]:this.getDefaultMoodEntry(),dailyTrends:this.calculateDailyTrends(t),weeklyAverages:this.calculateWeeklyAverages(t),monthlyTrends:this.calculateMonthlyTrends(t),seasonalPatterns:this.identifySeasonalPatterns(t)}}async analyzeEmotionalTriggers(e,t,s){const i=this.identifyTriggers(t,s),r=this.analyzeTriggerPatterns(i,t),a=this.calculateRecoveryTimes(e,t),o=this.analyzeCopingEffectiveness(e,t);return{identified:i,patterns:r,recoveryTimes:a,copingEffectiveness:o}}async calculateEmotionalRecovery(e,t){const s=this.recoveryData.get(e)||[],i=this.calculateEmotionalBaseline(t),r=s.length>0?s.reduce((a,o)=>a+o.recoveryTimeMinutes,0)/s.length:60;return{baseline:i,recoveryTime:r,resilienceScore:this.calculateResilienceScore(t,s),adaptabilityIndex:this.calculateAdaptabilityIndex(t)}}async assessSocialEmotionalHealth(e,t){return{connectionQuality:this.calculateConnectionQuality(t),supportSystemStrength:this.calculateSupportSystemStrength(t),communicationEffectiveness:this.calculateCommunicationEffectiveness(t),empathyReceived:this.calculateEmpathyReceived(t),empathyGiven:this.calculateEmpathyGiven(t)}}calculateDailyTrends(e){return e.filter(s=>(Date.now()-s.timestamp.getTime())/864e5<=7).sort((s,i)=>s.timestamp.getTime()-i.timestamp.getTime())}calculateWeeklyAverages(e){const t={};return e.forEach(s=>{const i=this.getWeekKey(s.timestamp);t[i]||(t[i]=[]),t[i].push(s)}),Object.entries(t).map(([s,i])=>{const r=this.getWeekStart(s),a=new Date(r.getTime()+8640*60*1e3);return{period:{start:r,end:a},averages:this.calculateAverages(i),improvements:this.identifyImprovements(i),challenges:this.identifyChallenges(i),insights:this.generateInsights(i)}})}calculateMonthlyTrends(e){const t={};return e.forEach(s=>{const i=`${s.timestamp.getFullYear()}-${s.timestamp.getMonth()}`;t[i]||(t[i]=[]),t[i].push(s)}),Object.entries(t).map(([s,i])=>{const[r,a]=s.split("-").map(Number),o=new Date(r,a,1),c=new Date(r,a+1,0);return{period:{start:o,end:c},averages:this.calculateAverages(i),improvements:this.identifyImprovements(i),challenges:this.identifyChallenges(i),insights:this.generateInsights(i)}})}identifySeasonalPatterns(e){const t=[],s=this.groupBySeason(e);return Object.entries(s).forEach(([i,r])=>{const a=r.reduce((c,d)=>c+d.mood,0)/r.length,o=e.reduce((c,d)=>c+d.mood,0)/e.length;Math.abs(a-o)>.5&&t.push({type:"seasonal",name:`${i} Pattern`,description:a>o?`Mood tends to be better during ${i}`:`Mood tends to be lower during ${i}`,correlation:(a-o)/5,confidence:Math.min(95,r.length*2),recommendations:this.generateSeasonalRecommendations(i)})}),t}async analyzeEmotionalPatterns(e,t){const s=this.moodEntries.get(e)||[];return this.analyzeMoodPatterns(e,s)}identifyTriggers(e,t){const s=[];for(let i=1;i<e.length;i++){const r=e[i],a=e[i-1],o=a.mood-r.mood;if(o>=2){const c=t.find(d=>Math.abs(new Date(d.timestamp).getTime()-r.timestamp.getTime())<72e5);c&&c.baselineData.pain>=6&&s.push({id:`pain-trigger-${r.timestamp.getTime()}`,name:"Pain Flare",type:"pain_flare",severity:c.baselineData.pain>=8?"severe":"moderate",frequency:this.calculateTriggerFrequency("pain_flare",e),emotionalImpact:o,lastOccurrence:r.timestamp,description:`Pain level ${c.baselineData.pain}/10 caused mood drop from ${a.mood} to ${r.mood}`,warningSignsIdentified:c.baselineData.symptoms??[],preventionStrategies:["Pain management","Stress reduction","Preventive rest"]}),r.triggers.length>0&&r.triggers.forEach(d=>{s.push({id:`trigger-${r.timestamp.getTime()}-${d}`,name:d,type:this.categorizeTrigger(d),severity:o>=3?"severe":"moderate",frequency:this.calculateTriggerFrequency(d,e),emotionalImpact:o,lastOccurrence:r.timestamp,description:`${d} caused mood drop from ${a.mood} to ${r.mood}`,warningSignsIdentified:this.identifyWarningSigns(),preventionStrategies:this.generatePreventionStrategies(d)})})}}return s}analyzeTriggerPatterns(e,t){const s=[];return[...new Set(e.map(r=>r.type))].forEach(r=>{const a=e.filter(c=>c.type===r),o=t.filter(c=>a.some(d=>Math.abs(d.lastOccurrence.getTime()-c.timestamp.getTime())<3600*1e3));s.push({triggerType:r,timePatterns:this.analyzeTimePatterns(o),contextualFactors:this.analyzeContextualFactors(o),predictiveIndicators:this.identifyPredictiveIndicators()})}),s}calculateRecoveryTimes(e,t){const s=[];for(let i=1;i<t.length-1;i++){const r=t[i],a=t[i-1],o=t[i+1];if(a.mood>r.mood&&o.mood>r.mood){const c=a.mood-r.mood,d=o.mood-r.mood;if(c>=1.5&&d>=1){const u=(o.timestamp.getTime()-r.timestamp.getTime())/6e4;s.push({triggerEvent:r.triggers.join(", ")||"Unknown trigger",recoveryTimeMinutes:u,strategiesUsed:r.copingStrategies,effectiveness:d/c*10,supportReceived:r.socialSupport!=="none",baseline:a.mood,lowest:r.mood,recovered:o.mood,timestamp:r.timestamp})}}}return s}analyzeCopingEffectiveness(e,t){const s={};return t.forEach(i=>{i.copingStrategies.forEach(r=>{s[r]||(s[r]={uses:0,totalEffectiveness:0,contexts:new Set}),s[r].uses++,s[r].totalEffectiveness+=i.mood,s[r].contexts.add(i.context)})}),Object.entries(s).map(([i,r])=>({strategy:i,usageFrequency:r.uses/4,effectiveness:r.totalEffectiveness/r.uses,contexts:Array.from(r.contexts),timeToEffect:30,sideEffects:[],personalizedNotes:`Used ${r.uses} times across various contexts`}))}calculateEmotionalBaseline(e){if(e.length===0)return 50;const t=e.slice(-30);return t.reduce((i,r)=>i+(r.mood+r.energy+(10-r.anxiety)+(10-r.stress)+r.hopefulness+r.selfEfficacy),0)/(t.length*6)*10}calculateResilienceScore(e,t){if(t.length===0)return 50;const s=t.reduce((o,c)=>o+c.recoveryTimeMinutes,0)/t.length,i=t.reduce((o,c)=>o+c.effectiveness,0)/t.length,r=Math.max(0,100-s/10),a=i*10;return(r+a)/2}calculateAdaptabilityIndex(e){if(e.length<10)return 50;const t=e.slice(-20),s=this.calculateVariability(t.map(o=>o.mood)),i=new Set(t.map(o=>o.context)).size,r=Math.max(0,100-s*20),a=Math.min(30,i*5);return Math.min(100,r+a)}calculateConnectionQuality(e){const t=e.filter(r=>r.socialSupport!=="none");if(t.length===0)return 30;const s={minimal:25,moderate:60,strong:90};return t.reduce((r,a)=>r+(a.socialSupport!=="none"?s[a.socialSupport]:0),0)/t.length}calculateSupportSystemStrength(e){const t=e.filter(o=>o.socialSupport!=="none").length/e.length,s=this.calculateAverageMoodWithSupport(e),i=this.calculateAverageMoodWithoutSupport(e),r=t*50,a=Math.max(0,s-i)*10;return Math.min(100,r+a)}calculateCommunicationEffectiveness(e){const t=e.reduce((i,r)=>i+r.emotionalClarity,0)/e.length,s=e.reduce((i,r)=>i+r.emotionalRegulation,0)/e.length;return(t+s)/2*10}calculateEmpathyReceived(e){const s=e.filter(r=>r.socialSupport==="strong"||r.socialSupport==="moderate").length/e.length*70,i=this.calculateSupportEffectivenessBonus(e);return Math.min(100,s+i)}calculateEmpathyGiven(e){const t=e.filter(s=>s.context.toLowerCase().includes("helping")||s.context.toLowerCase().includes("supporting")||s.notes.toLowerCase().includes("helped")||s.notes.toLowerCase().includes("listened"));return Math.min(100,t.length/e.length*200)}getDefaultMoodEntry(){return{timestamp:new Date,mood:5,energy:5,anxiety:5,stress:5,hopefulness:5,selfEfficacy:5,emotionalClarity:5,emotionalRegulation:5,context:"",triggers:[],copingStrategies:[],socialSupport:"none",notes:""}}getWeekKey(e){const t=e.getFullYear(),s=this.getWeekNumber(e);return`${t}-W${s}`}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=(e.getTime()-t.getTime())/864e5;return Math.ceil((s+t.getDay()+1)/7)}getWeekStart(e){const[t,s]=e.split("-W").map(Number),i=new Date(t,0,1),r=(s-1)*7-i.getDay();return new Date(t,0,1+r)}calculateAverages(e){return{mood:e.reduce((t,s)=>t+s.mood,0)/e.length,energy:e.reduce((t,s)=>t+s.energy,0)/e.length,anxiety:e.reduce((t,s)=>t+s.anxiety,0)/e.length,stress:e.reduce((t,s)=>t+s.stress,0)/e.length,hopefulness:e.reduce((t,s)=>t+s.hopefulness,0)/e.length,selfEfficacy:e.reduce((t,s)=>t+s.selfEfficacy,0)/e.length}}identifyImprovements(e){const t=[];return e.reduce((i,r)=>i+r.mood,0)/e.length>=7&&t.push("Sustained positive mood"),e.some(i=>i.hopefulness>=8)&&t.push("High hopefulness periods"),t}identifyChallenges(e){const t=[];return e.reduce((i,r)=>i+r.stress,0)/e.length>=7&&t.push("High stress levels"),e.some(i=>i.mood<=3)&&t.push("Low mood episodes"),t}generateInsights(e){const t=[],s=[...new Set(e.flatMap(i=>i.copingStrategies))];return s.length>0&&t.push(`Using ${s.length} different coping strategies`),t}groupBySeason(e){return e.reduce((t,s)=>{const i=s.timestamp.getMonth();let r;return i>=2&&i<=4?r="Spring":i>=5&&i<=7?r="Summer":i>=8&&i<=10?r="Fall":r="Winter",t[r]||(t[r]=[]),t[r].push(s),t},{})}generateSeasonalRecommendations(e){return{Spring:["Light therapy","Outdoor activities","Allergy management"],Summer:["Heat management","Hydration focus","UV protection"],Fall:["Routine maintenance","Light therapy preparation","Seasonal transition support"],Winter:["Light therapy","Vitamin D","Indoor activities","Social connection"]}[e]||[]}categorizeTrigger(e){const t=e.toLowerCase();return t.includes("pain")||t.includes("flare")?"pain_flare":t.includes("stress")||t.includes("work")?"stress_event":t.includes("social")||t.includes("people")?"social_interaction":t.includes("doctor")||t.includes("medical")?"medical_appointment":t.includes("weather")||t.includes("rain")?"weather":"other"}calculateTriggerFrequency(e,t){return t.filter(i=>i.triggers.some(r=>r.toLowerCase().includes(e.toLowerCase()))).length/4}identifyWarningSigns(){return["Increased stress","Sleep disturbance","Energy drop"]}generatePreventionStrategies(e){const t={pain:["Pain management","Preventive medication","Stress reduction"],stress:["Mindfulness","Time management","Boundary setting"],social:["Communication skills","Support system","Self-advocacy"],medical:["Preparation strategies","Support person","Question list"],weather:["Weather monitoring","Preventive measures","Indoor alternatives"]},s=e.toLowerCase();for(const[i,r]of Object.entries(t))if(s.includes(i))return r;return["Self-care","Support system","Stress management"]}analyzeTimePatterns(e){const t={},s={},i={};return e.forEach(r=>{const a=r.timestamp.getHours().toString(),o=r.timestamp.toLocaleDateString("en-US",{weekday:"long"}),c=this.getWeekKey(r.timestamp);t[a]=(t[a]||0)+1,s[o]=(s[o]||0)+1,i[c]=(i[c]||0)+1}),{timeOfDay:t,dayOfWeek:s,monthlyTrends:i}}analyzeContextualFactors(e){return{painLevel:e.map(t=>t.stress),stressLevel:e.map(t=>t.stress),socialContext:e.map(t=>t.socialSupport),environmentalFactors:e.map(t=>t.context)}}identifyPredictiveIndicators(){return{earlyWarnings:["Increased stress","Sleep changes","Mood drops"],behavioralChanges:["Social withdrawal","Activity reduction","Coping strategy changes"],physiologicalSigns:["Fatigue","Tension","Sleep disturbance"]}}calculateVariability(e){const t=e.reduce((i,r)=>i+r,0)/e.length,s=e.reduce((i,r)=>i+Math.pow(r-t,2),0)/e.length;return Math.sqrt(s)}calculateAverageMoodWithSupport(e){const t=e.filter(s=>s.socialSupport!=="none");return t.length>0?t.reduce((s,i)=>s+i.mood,0)/t.length:5}calculateAverageMoodWithoutSupport(e){const t=e.filter(s=>s.socialSupport==="none");return t.length>0?t.reduce((s,i)=>s+i.mood,0)/t.length:5}calculateSupportEffectivenessBonus(e){let t=0,s=0;for(let i=1;i<e.length;i++){const r=e[i],a=e[i-1];r.socialSupport!=="none"&&r.mood>a.mood&&(t+=r.mood-a.mood,s++)}return s>0?t/s*10:0}}class W8{wellbeingHistory=new Map;energyData=new Map;pacingPreferences=new Map;async calculateWellbeingMetrics(e,t,s){return{qualityOfLife:await this.assessQualityOfLife(e,t,s),functionalIndependence:await this.assessFunctionalIndependence(e,t),socialConnectionMetrics:await this.assessSocialConnections(e,s),cognitiveWellness:await this.assessCognitiveWellness(e,t,s)}}async assessQualityOfLife(e,t,s){const i=this.getRecentEntries(t,30),r=this.getRecentMoodEntries(s,30),a=i.length>0?i.reduce((u,f)=>u+f.baselineData.pain,0)/i.length:5,o=r.length>0?r.reduce((u,f)=>u+f.mood,0)/r.length:5;r.length>0&&r.reduce((u,f)=>u+f.hopefulness,0)/r.length;const c=r.length>0?r.reduce((u,f)=>u+f.selfEfficacy,0)/r.length:5,d=i.length>0?i.reduce((u,f)=>u+(f.qualityOfLife?.sleepQuality||5),0)/i.length:5;return{overallSatisfaction:this.calculateLifeSatisfaction(a,o,d),meaningAndPurpose:this.calculateMeaningAndPurpose(r,i),personalGrowth:this.calculatePersonalGrowth(r),autonomy:this.calculateAutonomy(i,r),environmentalMastery:this.calculateEnvironmentalMastery(i,r),positiveRelations:this.calculatePositiveRelations(r),selfAcceptance:c*10}}async assessFunctionalIndependence(e,t){const s=this.getRecentEntries(t,30);return{dailyActivities:this.assessDailyActivities(s),mobility:this.assessMobility(s),cognition:this.assessCognitiveFunctioning(s),communication:this.assessCommunication(s),workCapacity:this.assessWorkCapacity(s)}}async assessSocialConnections(e,t){const s=this.getRecentMoodEntries(t,30),i=s.filter(o=>o.socialSupport!=="none"),r=i.length>0?this.calculateAverageSocialSupport(i):25,a=i.length/4.3;return{networkSize:this.estimateNetworkSize(s),contactFrequency:a,relationshipQuality:r,socialSupport:r,communityInvolvement:this.calculateCommunityInvolvement(s),loneliness:Math.max(0,100-r),belongingness:this.calculateBelongingness(s)}}async assessCognitiveWellness(e,t,s){const i=this.getRecentEntries(t,30),r=this.getRecentMoodEntries(s,30),a=r.length>0?r.reduce((f,m)=>f+m.emotionalClarity,0)/r.length:5,o=r.length>0?r.reduce((f,m)=>f+m.emotionalRegulation,0)/r.length:5,c=i.filter(f=>f.baselineData.pain>=7).length,d=r.filter(f=>f.stress>=7).length,u=Math.min(30,c+d);return{memoryFunction:Math.max(10,100-u*2),attention:Math.max(10,100-u*2.5),executiveFunction:o*10,processingSpeed:Math.max(10,100-u*3),mentalClarity:a*10,brainFogFrequency:u,cognitiveReserve:this.calculateCognitiveReserve(r,i)}}async calculateDigitalPacing(e,t,s){const i=this.energyData.get(e)||[];return{energyManagement:await this.calculateEnergyManagement(e,i,t,s),activitySuggestions:await this.generateActivitySuggestions(e,t,s),recoveryOptimization:await this.calculateRecoveryOptimization(e,t,s),smartNotifications:await this.generateSmartNotifications(e,t,s)}}async calculateEnergyManagement(e,t,s,i){const r=await this.estimateCurrentEnergyLevel(e,s,i),a=this.calculateEnergyTrends(t);return{currentEnergyLevel:r,energyTrends:a,energyBudget:this.calculateEnergyBudget(r,a),spoonTheory:this.calculateSpoonTheory(r,s),batteryAnalogy:this.calculateBatteryMetrics(r,i)}}async generateActivitySuggestions(e,t,s){const i=this.getCurrentPainLevel(t),r=this.getCurrentMood(s),a=await this.estimateCurrentEnergyLevel(e,t,s);return{currentRecommendations:this.generateCurrentRecommendations(i,r,a),adaptiveScheduling:this.generateAdaptiveScheduling(e,i,a),paceAdjustments:this.generatePaceAdjustments(i,a),restReminders:this.generateRestReminders(i,a,s)}}async calculateRecoveryOptimization(e,t,s){return{recoveryTime:this.calculateRecoveryTimeMetrics(t,s),restQuality:this.calculateRestQualityMetrics(t,s),sleepOptimization:this.calculateSleepOptimization(t),stressRecovery:this.calculateStressRecoveryMetrics(s)}}async generateSmartNotifications(e,t,s){const i=this.getCurrentPainLevel(t),r=await this.estimateCurrentEnergyLevel(e,t,s);return{pacingReminders:this.generatePacingReminders(i,r),energyAlerts:this.generateEnergyAlerts(r),recoveryPrompts:this.generateRecoveryPrompts(i,s),achievementCelebrations:this.generateAchievementCelebrations(t,s)}}getRecentEntries(e,t){const s=new Date;return s.setDate(s.getDate()-t),e.filter(i=>new Date(i.timestamp)>=s)}getRecentMoodEntries(e,t){const s=new Date;return s.setDate(s.getDate()-t),e.filter(i=>i.timestamp>=s)}calculateLifeSatisfaction(e,t,s){const i=Math.max(0,100-e*10),r=t*10,a=s*10;return i*.4+r*.4+a*.2}calculateMeaningAndPurpose(e,t){const s=e.length>0?e.reduce((a,o)=>a+o.hopefulness,0)/e.length:5,i=e.filter(a=>a.context.toLowerCase().includes("purpose")||a.context.toLowerCase().includes("goal")||a.context.toLowerCase().includes("meaningful")||a.context.toLowerCase().includes("helping")).length,r=Math.min(30,i*5);return Math.min(100,s*10+r)}calculatePersonalGrowth(e){if(e.length<5)return 50;const t=e.slice(-7).reduce((a,o)=>a+o.selfEfficacy,0)/7,s=e.slice(-14,-7).reduce((a,o)=>a+o.selfEfficacy,0)/7,i=t>s?20:0,r=t*10;return Math.min(100,r+i)}calculateAutonomy(e,t){const s=t.length>0?t.reduce((a,o)=>a+o.selfEfficacy,0)/t.length:5,i=e.map(a=>{const o=(a.functionalImpact?.assistanceNeeded||[]).length,c=(a.functionalImpact?.mobilityAids||[]).length;return Math.max(0,10-o-c)}),r=i.length>0?i.reduce((a,o)=>a+o,0)/i.length:5;return(s*10+r*10)/2}calculateEnvironmentalMastery(e,t){const s=t.length>0?t.reduce((a,o)=>a+o.emotionalRegulation,0)/t.length:5,i=new Set;t.forEach(a=>{a.copingStrategies.forEach(o=>i.add(o))});const r=Math.min(30,i.size*5);return Math.min(100,s*10+r)}calculatePositiveRelations(e){const t=e.filter(r=>r.socialSupport!=="none"),s=t.length/e.length,i=this.calculateAverageSocialSupport(t);return s*50+i*.5}assessDailyActivities(e){const t=e.flatMap(r=>r.functionalImpact?.limitedActivities||[]),s=new Set(t),i=Math.max(0,100-s.size*10);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:[],barriers:Array.from(s),improvements:[],goals:[]}}assessMobility(e){const t=e.flatMap(r=>r.functionalImpact?.mobilityAids||[]),s=new Set(t),i=Math.max(0,100-s.size*15);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:Array.from(s),barriers:[],improvements:[],goals:[]}}assessCognitiveFunctioning(e){const t=["brain fog","confusion","memory","concentration"],s=e.filter(r=>(r.baselineData.symptoms||[]).some(a=>t.some(o=>a.toLowerCase().includes(o)))).length,i=Math.max(20,100-s*5);return{independence:i,assistanceNeeded:i<40?"moderate":i<70?"minimal":"none",adaptationsUsed:["memory aids","simplified tasks"],barriers:["cognitive fatigue","brain fog"],improvements:[],goals:[]}}assessCommunication(e){const t=e.flatMap(r=>r.qualityOfLife?.socialImpact||[]),s=t.filter(r=>r.toLowerCase().includes("communication")||r.toLowerCase().includes("speaking")||r.toLowerCase().includes("expressing")).length,i=Math.max(30,100-s*10);return{independence:i,assistanceNeeded:i<50?"moderate":i<80?"minimal":"none",adaptationsUsed:[],barriers:t,improvements:[],goals:[]}}assessWorkCapacity(e){const t=e.flatMap(r=>r.workImpact?.workLimitations||[]),s=e.reduce((r,a)=>r+(a.workImpact?.missedWork||0),0),i=Math.max(0,100-t.length*5-s*2);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:e.flatMap(r=>r.workImpact?.modifiedDuties||[]),barriers:t,improvements:[],goals:[]}}calculateAverageSocialSupport(e){if(e.length===0)return 25;const t={minimal:25,moderate:60,strong:90};return e.reduce((s,i)=>{const r=t[i.socialSupport]||25;return s+r},0)/e.length}estimateNetworkSize(e){const t=new Set;return e.forEach(s=>{s.socialSupport!=="none"&&t.add(s.context)}),Math.min(50,t.size*2)}calculateCommunityInvolvement(e){const t=e.filter(s=>s.context.toLowerCase().includes("community")||s.context.toLowerCase().includes("group")||s.context.toLowerCase().includes("volunteer")||s.context.toLowerCase().includes("church")||s.context.toLowerCase().includes("club")).length;return Math.min(100,t/e.length*200)}calculateBelongingness(e){const t=e.filter(i=>i.notes.toLowerCase().includes("belong")||i.notes.toLowerCase().includes("accepted")||i.notes.toLowerCase().includes("welcomed")||i.context.toLowerCase().includes("family")||i.context.toLowerCase().includes("friends")).length,s=this.calculateAverageSocialSupport(e.filter(i=>i.socialSupport!=="none"));return t/e.length*50+s*.5}calculateCognitiveReserve(e,t){const s=new Set;e.forEach(o=>{o.copingStrategies.forEach(c=>s.add(c))});const i=Math.min(40,s.size*5),a=(e.length>0?e.reduce((o,c)=>o+c.emotionalClarity,0)/e.length:5)*10;return Math.min(100,i+a+20)}async estimateCurrentEnergyLevel(e,t,s){const i=this.getCurrentPainLevel(t),r=this.getCurrentMood(s),a=s.length>0?s[s.length-1].energy:5,o=Math.max(0,100-i*10),c=r*10,d=a*10;return o*.4+c*.3+d*.3}calculateEnergyTrends(e){const t=e.slice(-20);return t.map(s=>({...s,predictedNext:this.predictNextEnergyLevel(s,t)}))}predictNextEnergyLevel(e,t){if(t.length<3)return e.energyLevel;const s=t.slice(-3),i=s[s.length-1].energyLevel-s[0].energyLevel;return Math.max(0,Math.min(100,e.energyLevel+i*.5))}calculateEnergyBudget(e,t){const s=Math.max(20,e),i=Math.max(0,100-e),r=s*.3,a=Math.max(0,s-r);return{daily:{total:s,used:i,reserved:r,flexible:a},weekly:{pattern:{Monday:s*.9,Tuesday:s*.8,Wednesday:s*.7,Thursday:s*.8,Friday:s*.9,Saturday:s*1.1,Sunday:s*1},adjustments:{},carryOver:0}}}calculateSpoonTheory(e,t){const s=Math.floor(e/10),i=this.getCurrentPainLevel(t),r=Math.floor(i/2);return{totalSpoons:s,usedSpoons:r,activityCosts:{shower:2,cooking:3,groceries:4,work:5,socializing:3,exercise:4,cleaning:3},predictions:{shower:2,cooking:3,groceries:4,work:5,socializing:3,exercise:4,cleaning:3},adaptations:["Break tasks into smaller parts","Use energy-saving devices","Ask for help with high-cost activities","Schedule high-cost activities for high-energy times"]}}calculateBatteryMetrics(e,t){const s=this.getCurrentMood(t);return{currentCharge:e,chargingActivities:["Rest","Gentle movement","Nature time","Social connection","Creative activities","Meditation"],drainingActivities:["Stress","Overexertion","Poor sleep","Conflict","Overwhelming environments","Pain flares"],chargingRate:Math.max(1,s),depletionRate:Math.max(1,10-s),optimalCharging:["Power naps (20-30 minutes)","Gentle stretching","Breathing exercises","Listening to music","Light reading"]}}generateCurrentRecommendations(e,t,s){const i=[];return s>70&&e<5&&i.push({activity:"Gentle Exercise",type:"physical",energyCost:30,painRisk:"low",benefits:["Improved mood","Better sleep","Endorphin release"],adaptations:["Start slowly","Listen to your body","Stop if pain increases"],timing:"morning",duration:30,confidence:85}),t<5&&s>30&&i.push({activity:"Social Connection",type:"social",energyCost:25,painRisk:"low",benefits:["Improved mood","Emotional support","Sense of belonging"],adaptations:["Choose supportive people","Set boundaries","Keep it brief if needed"],timing:"flexible",duration:45,confidence:75}),s<40&&i.push({activity:"Restorative Rest",type:"restful",energyCost:0,painRisk:"low",benefits:["Energy restoration","Pain relief","Stress reduction"],adaptations:["Create comfortable environment","Use heat/cold therapy","Practice mindfulness"],timing:"flexible",duration:60,confidence:95}),i}generateAdaptiveScheduling(e,t,s){const i=[];if(s<50){const r=new Date,a=new Date(r.getTime()+7200*1e3);i.push({timeBlock:{start:r,end:a},originalPlan:"Planned activities",adaptation:"Reduce activity intensity and duration",reason:"Low energy levels detected",energyImpact:20,painImpact:-1,acceptanceStatus:"suggested"})}return i}generatePaceAdjustments(e,t){const s=[];return(e>6||t<40)&&s.push({activity:"Daily tasks",originalDuration:60,suggestedDuration:90,reason:"High pain or low energy levels",benefits:["Reduced fatigue","Better pain management","Maintained productivity"],implementation:["Take breaks every 15 minutes","Split tasks across the day","Use energy-saving techniques"]}),s}generateRestReminders(e,t,s){const i=[];return t<30&&i.push({trigger:"energy_based",message:"Your energy is running low. Consider taking a rest break.",urgency:"high",restType:"extended_rest",duration:30,activities:["Lie down","Deep breathing","Listen to calming music"]}),e>7&&i.push({trigger:"symptom_based",message:"High pain levels detected. Time for pain management.",urgency:"high",restType:"short_rest",duration:20,activities:["Apply heat/cold","Gentle stretching","Medication if needed"]}),i}calculateRecoveryTimeMetrics(e,t){return{afterActivity:{light_exercise:60,household_chores:45,social_activities:30,work_tasks:90,medical_appointments:120},afterFlare:180,afterStress:90,sleepRecovery:8,baseline:60,factors:[{factor:"Pain level",impact:-20,confidence:85,recommendations:["Pain management","Gentle movement","Heat therapy"]},{factor:"Sleep quality",impact:30,confidence:90,recommendations:["Sleep hygiene","Consistent schedule","Comfortable environment"]}]}}calculateRestQualityMetrics(e,t){const s=e.length>0?e.reduce((i,r)=>i+(r.qualityOfLife?.sleepQuality||5),0)/e.length:5;return{restfulness:s*10,interruptions:Math.max(0,5-s),restTypes:{power_nap:80,meditation:75,quiet_time:70,nature_rest:85},environment:"Quiet, comfortable, temperature-controlled",timing:"When energy drops below 40%",duration:20}}calculateSleepOptimization(e){const t=this.getRecentEntries(e,7),s=t.length>0?t.reduce((r,a)=>r+(a.qualityOfLife?.sleepQuality||5),0)/t.length:5,i=t.length>0?t.reduce((r,a)=>r+a.baselineData.pain,0)/t.length:5;return{quality:s*10,duration:Math.max(6,10-i),efficiency:Math.max(50,s*15),restfulness:s*10,painImpact:i,recovery:Math.max(30,100-i*10),recommendations:["Maintain consistent sleep schedule","Use pain management before bed","Create comfortable sleep environment","Limit screen time before bed"]}}calculateStressRecoveryMetrics(e){const t=this.getRecentMoodEntries(e,7),s=t.length>0?t.reduce((r,a)=>r+a.stress,0)/t.length:5,i=new Set;return t.forEach(r=>{r.copingStrategies.forEach(a=>i.add(a))}),{recoveryTime:Math.max(15,s*10),strategies:Array.from(i.values()),effectiveness:{deep_breathing:85,meditation:80,exercise:75,social_support:70,nature_time:85},physicalSigns:["Muscle tension","Headache","Fatigue"],emotionalSigns:["Irritability","Anxiety","Overwhelm"],behavioralSigns:["Restlessness","Sleep changes","Appetite changes"]}}generatePacingReminders(e,t){const s=[];return t<40&&s.push({id:"energy-low",type:"pacing",message:"Your energy is running low. Consider pacing yourself.",enabled:!0,frequency:"as_needed",conditions:["energy < 40"],customization:{tone:"gentle",timing:"immediate",personalization:["energy-aware","supportive"]}}),s}generateEnergyAlerts(e){const t=[];return e<25&&t.push({id:"energy-critical",type:"energy_alert",message:"Energy levels are critically low. Rest is strongly recommended.",enabled:!0,frequency:"immediate",conditions:["energy < 25"],customization:{tone:"gentle",timing:"immediate",personalization:["urgent","caring"]}}),t}generateRecoveryPrompts(e,t){const s=[];return e>7&&s.push({id:"recovery-high-pain",type:"recovery_prompt",message:"High pain detected. Would you like some recovery suggestions?",enabled:!0,frequency:"as_needed",conditions:["pain > 7"],customization:{tone:"gentle",timing:"immediate",personalization:["pain-aware","helpful"]}}),s}generateAchievementCelebrations(e,t){const s=[],i=Math.min(e.length,7);return i>=3&&s.push({id:"tracking-streak",type:"achievement",message:`Wonderful! You've tracked for ${i} days in a row. Your commitment to self-care is inspiring!`,enabled:!0,frequency:"as_needed",conditions:["tracking_streak >= 3"],customization:{tone:"celebratory",timing:"optimal",personalization:["encouraging","proud"]}}),s}getCurrentPainLevel(e){return e.length>0?e[e.length-1].baselineData.pain:5}getCurrentMood(e){return e.length>0?e[e.length-1].mood:5}}const q8=({userId:n,painEntries:e,moodEntries:t=[],onInsightSelect:s,onRecommendationAccept:i,onShareMetrics:r})=>{const[a]=X.useState(()=>new B8({validationThreshold:70,celebrationFrequency:"daily",reportingStyle:"balanced",privacyLevel:"personal",languagePreference:"everyday"})),[o]=X.useState(()=>new $8),[c]=X.useState(()=>new W8),[d,u]=X.useState("overview"),[f,m]=X.useState(!0),[h,y]=X.useState("month"),[x,w]=X.useState(null),[S,j]=X.useState(null),[C,L]=X.useState(null),[P,O]=X.useState(null),[k,A]=X.useState([]),[M,V]=X.useState([]),_=X.useRef(!1);X.useEffect(()=>{if(_.current)return;(async()=>{_.current=!0,m(!0);try{const Q=await o.calculateEmotionalStateMetrics(n,e);j(Q);const ne=await c.calculateWellbeingMetrics(n,e,t);L(ne);const ae=await c.calculateDigitalPacing(n,e,t);O(ae);const F=await a.calculateQuantifiedEmpathy(n,e,t,Q,ne,ae);w(F);const ce=T(F,Q,ne,ae),Se=W(F,Q,ne,ae);A(ce),V(Se)}catch(Q){console.error("Failed to load empathy metrics:",Q)}finally{m(!1),_.current=!1}})()},[n,h]);const T=X.useCallback((D,Q,ne,ae)=>{const F=[];return D.emotionalIntelligence.selfAwareness>80&&F.push({id:"high-self-awareness",type:"celebration",title:"Exceptional Self-Awareness",description:`Your self-awareness score of ${D.emotionalIntelligence.selfAwareness}% shows remarkable emotional intelligence. You have deep insight into your emotions and patterns.`,confidence:95,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["emotional-intelligence","self-awareness"]}),D.compassionateProgress.selfCompassion<40&&F.push({id:"self-compassion-opportunity",type:"concern",title:"Self-Compassion Growth Opportunity",description:`Your self-compassion score of ${D.compassionateProgress.selfCompassion}% suggests you might benefit from being gentler with yourself during difficult times.`,confidence:80,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["compassionate-progress","self-compassion"]}),ne.qualityOfLife.overallSatisfaction>75&&F.push({id:"high-life-satisfaction",type:"celebration",title:"Strong Life Satisfaction",description:`Your overall life satisfaction of ${Gt(ne.qualityOfLife.overallSatisfaction,0)}% reflects resilience and positive adaptation despite challenges.`,confidence:90,actionable:!1,personalized:!0,timestamp:new Date,dataPoints:["quality-of-life","satisfaction"]}),ae.energyManagement.currentEnergyLevel<30&&F.push({id:"low-energy-pattern",type:"concern",title:"Energy Conservation Needed",description:`Your current energy level of ${ae.energyManagement.currentEnergyLevel}% suggests implementing energy conservation strategies could be beneficial.`,confidence:85,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["energy-management","current-energy"]}),F},[]),W=X.useCallback((D,Q,ne,ae)=>{const F=[];return D.compassionateProgress.selfCompassion<50&&F.push({id:"self-compassion-practice",category:"emotional",priority:"medium",title:"Practice Self-Compassion",description:"Develop a gentler inner voice and treat yourself with the same kindness you would show a good friend.",rationale:"Self-compassion is linked to better emotional resilience and reduced stress.",steps:["Practice self-compassion breaks during difficult moments","Write yourself a compassionate letter","Use kind, understanding language when talking to yourself","Remember that suffering is part of the human experience"],expectedBenefits:["Reduced self-criticism","Improved emotional resilience","Better stress management","Enhanced overall wellbeing"],timeframe:"2-4 weeks of daily practice",effort:"low",personalization:["mindfulness-based","gentle-approach"]}),ae.energyManagement.currentEnergyLevel<40&&F.push({id:"energy-pacing",category:"physical",priority:"high",title:"Implement Energy Pacing",description:"Use strategic pacing to manage your energy more effectively throughout the day.",rationale:"Energy conservation helps prevent crashes and maintains consistent functioning.",steps:["Track energy levels throughout the day","Plan high-energy activities for your best times","Take regular breaks before feeling exhausted","Use the spoon theory to budget energy for activities"],expectedBenefits:["More consistent energy levels","Reduced post-activity crashes","Better activity planning","Improved quality of life"],timeframe:"1-2 weeks to establish routine",effort:"medium",personalization:["energy-aware","activity-based"]}),D.empathyKPIs.connectionQuality<50&&F.push({id:"social-connection",category:"social",priority:"medium",title:"Strengthen Social Connections",description:"Build and maintain meaningful relationships that provide mutual support and understanding.",rationale:"Strong social connections are crucial for emotional wellbeing and pain management.",steps:["Reach out to one supportive person this week","Join a chronic illness support group","Practice active listening in conversations","Share your experiences with trusted friends or family"],expectedBenefits:["Reduced feelings of isolation","Increased emotional support","Better coping resources","Enhanced sense of belonging"],timeframe:"2-6 weeks to build routines",effort:"medium",personalization:["socially-focused","community-oriented"]}),F},[]);return f?l.jsx(ze,{className:"w-full",children:l.jsx(qe,{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Xu,{className:"w-8 h-8 mx-auto mb-4 text-purple-500 animate-pulse"}),l.jsx("p",{className:"text-gray-600",children:"Calculating your empathy metrics..."})]})})}):!x||!S||!C||!P?l.jsx(ze,{className:"w-full",children:l.jsx(qe,{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx(ei,{className:"w-8 h-8 mx-auto mb-4 text-gray-400"}),l.jsx("p",{className:"text-gray-600",children:"Not enough data to generate empathy metrics yet."}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Keep tracking to unlock insights!"})]})})}):l.jsxs("div",{className:"w-full space-y-6",children:[l.jsx(ze,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:l.jsx(mt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Ci,{className:"w-8 h-8 text-purple-600"}),l.jsxs("div",{children:[l.jsx(gt,{className:"text-2xl text-purple-800",children:"Quantified Empathy Metrics"}),l.jsx("p",{className:"text-purple-600 mt-1",children:"Your compassionate journey through data and insights"})]})]}),l.jsx("div",{className:"flex space-x-2",children:r&&l.jsx(dt,{variant:"secondary",onClick:()=>r(x),className:"text-sm",children:"Share Insights"})})]})})}),l.jsx(ze,{children:l.jsx(qe,{className:"p-4",children:l.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{id:"overview",label:"Overview",icon:Fs},{id:"emotional-intelligence",label:"Emotional Intelligence",icon:ei},{id:"wellbeing",label:"Holistic Wellbeing",icon:eh},{id:"pacing",label:"Energy & Pacing",icon:Dv},{id:"insights",label:"Insights",icon:lm},{id:"trends",label:"Trends",icon:Dn}].map(({id:D,label:Q,icon:ne})=>l.jsxs(dt,{variant:d===D?"default":"secondary",onClick:()=>u(D),className:"flex items-center space-x-2 text-sm",children:[l.jsx(ne,{className:"w-4 h-4"}),l.jsx("span",{children:Q})]},D))})})}),l.jsx(ze,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Timeframe:"}),[{id:"week",label:"Past Week"},{id:"month",label:"Past Month"},{id:"quarter",label:"Past Quarter"}].map(({id:D,label:Q})=>l.jsx(dt,{variant:h===D?"default":"secondary",onClick:()=>y(D),className:"text-sm",children:Q},D))]})})}),d==="overview"&&l.jsx(U8,{empathy:x,emotional:S,wellbeing:C,pacing:P}),d==="emotional-intelligence"&&l.jsx(V8,{empathy:x}),d==="wellbeing"&&l.jsx(H8,{wellbeing:C}),d==="pacing"&&l.jsx(G8,{pacing:P}),d==="insights"&&l.jsx(Y8,{insights:k,recommendations:M,onInsightSelect:s,onRecommendationAccept:i}),d==="trends"&&l.jsx(Z8,{painEntries:e,moodEntries:t,timeframe:h})]})},U8=({empathy:n,wellbeing:e,pacing:t})=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs(ze,{className:"border-blue-200 bg-blue-50",children:[l.jsx(mt,{className:"pb-3",children:l.jsxs(gt,{className:"flex items-center text-blue-700 text-sm",children:[l.jsx(ei,{className:"w-4 h-4 mr-2"}),"Emotional Intelligence"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[Math.round((n.emotionalIntelligence.selfAwareness+n.emotionalIntelligence.selfRegulation+n.emotionalIntelligence.motivation+n.emotionalIntelligence.empathy+n.emotionalIntelligence.socialSkills)/5),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Overall EQ Score"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Awareness"}),l.jsxs("span",{children:[n.emotionalIntelligence.selfAwareness,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Regulation"}),l.jsxs("span",{children:[n.emotionalIntelligence.selfRegulation,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Motivation"}),l.jsxs("span",{children:[n.emotionalIntelligence.motivation,"%"]})]})]})]})})]}),l.jsxs(ze,{className:"border-green-200 bg-green-50",children:[l.jsx(mt,{className:"pb-3",children:l.jsxs(gt,{className:"flex items-center text-green-700 text-sm",children:[l.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Compassionate Progress"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[Math.round((n.compassionateProgress.selfCompassion+(100-n.compassionateProgress.selfCriticism)+n.compassionateProgress.progressCelebration+n.compassionateProgress.setbackResilience+n.compassionateProgress.hopefulness)/5),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Compassion Score"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Compassion"}),l.jsxs("span",{children:[n.compassionateProgress.selfCompassion,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Resilience"}),l.jsxs("span",{children:[n.compassionateProgress.setbackResilience,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Hopefulness"}),l.jsxs("span",{children:[n.compassionateProgress.hopefulness,"%"]})]})]})]})})]}),l.jsxs(ze,{className:"border-purple-200 bg-purple-50",children:[l.jsx(mt,{className:"pb-3",children:l.jsxs(gt,{className:"flex items-center text-purple-700 text-sm",children:[l.jsx(eh,{className:"w-4 h-4 mr-2"}),"Quality of Life"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[Math.round(e.qualityOfLife.overallSatisfaction),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Life Satisfaction"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Meaning & Purpose"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.meaningAndPurpose),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Personal Growth"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.personalGrowth),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Autonomy"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.autonomy),"%"]})]})]})]})})]}),l.jsxs(ze,{className:"border-orange-200 bg-orange-50",children:[l.jsx(mt,{className:"pb-3",children:l.jsxs(gt,{className:"flex items-center text-orange-700 text-sm",children:[l.jsx(Dv,{className:"w-4 h-4 mr-2"}),"Energy Management"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.energyManagement.currentEnergyLevel),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Current Energy"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Available Spoons"}),l.jsx("span",{children:t.energyManagement.spoonTheory.totalSpoons-t.energyManagement.spoonTheory.usedSpoons})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Battery Charge"}),l.jsxs("span",{children:[Math.round(t.energyManagement.batteryAnalogy.currentCharge),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Energy Budget"}),l.jsxs("span",{children:[Math.round(t.energyManagement.energyBudget.daily.flexible),"%"]})]})]})]})})]})]}),V8=({empathy:n})=>l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center text-blue-700",children:[l.jsx(ei,{className:"w-5 h-5 mr-2"}),"Emotional Intelligence Breakdown"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:Object.entries(n.emotionalIntelligence).map(([e,t])=>{const s=typeof t=="number"?t:0;return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),l.jsxs("span",{className:"text-sm font-medium w-10 text-right",children:[s,"%"]})]})]},e)})})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center text-green-700",children:[l.jsx(Ci,{className:"w-5 h-5 mr-2"}),"Empathy KPIs"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:Object.entries(n.empathyKPIs).map(([e,t])=>{const s=typeof t=="number"?t:0;return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),l.jsxs("span",{className:"text-sm font-medium w-10 text-right",children:[s,"%"]})]})]},e)})})})]}),l.jsxs(ze,{className:"lg:col-span-2",children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center text-purple-700",children:[l.jsx(Xu,{className:"w-5 h-5 mr-2"}),"Humanized Metrics"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("div",{className:"space-y-4",children:Object.entries(n.humanizedMetrics).slice(0,-1).map(([e,t])=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${typeof t=="number"?t:50}%`}})}),l.jsx("span",{className:"text-sm font-medium w-10 text-right",children:typeof t=="number"?`${t}%`:""})]})]},e))}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Wisdom Gained"}),l.jsx("div",{className:"space-y-2",children:Array.isArray(n.humanizedMetrics.wisdomGained)&&n.humanizedMetrics.wisdomGained.slice(0,3).map((e,t)=>l.jsxs("div",{className:"text-sm text-gray-600 p-2 bg-gray-50 rounded",children:['"',typeof e=="string"?e.length>100?e.substring(0,100)+"...":e:"",'"']},t))})]})]})})]})]}),H8=({wellbeing:n})=>l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsx(gt,{children:"Holistic Wellbeing Metrics"})}),l.jsxs(qe,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Overall satisfaction: ",Math.round(n.qualityOfLife.overallSatisfaction),"%"]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["Meaning & Purpose: ",Math.round(n.qualityOfLife.meaningAndPurpose),"%"]})]})]}),G8=({pacing:n})=>l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsx(gt,{children:"Energy & Pacing Dashboard"})}),l.jsxs(qe,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Current energy: ",Math.round(n.energyManagement.currentEnergyLevel),"%"]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["Used spoons: ",n.energyManagement.spoonTheory.usedSpoons,"/",n.energyManagement.spoonTheory.totalSpoons]})]})]}),Y8=({insights:n,recommendations:e,onInsightSelect:t,onRecommendationAccept:s})=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center",children:[l.jsx(lm,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Personal Insights"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:n.map(i=>l.jsx("div",{className:"p-4 border rounded-lg cursor-pointer hover:bg-gray-50",onClick:()=>t?.(i),children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:i.title}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),l.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[l.jsxs("span",{children:["Confidence: ",i.confidence,"%"]}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"capitalize",children:i.type})]})]}),i.type==="celebration"&&l.jsx(il,{className:"w-5 h-5 text-yellow-500"}),i.type==="concern"&&l.jsx(Er,{className:"w-5 h-5 text-orange-500"}),i.type==="pattern"&&l.jsx(Dn,{className:"w-5 h-5 text-blue-500"})]})},i.id))})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center",children:[l.jsx(xs,{className:"w-5 h-5 mr-2 text-green-500"}),"Personalized Recommendations"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:e.map(i=>l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:i.title}),l.jsxs("span",{className:`px-2 py-1 text-xs rounded ${i.priority==="high"?"bg-red-100 text-red-700":i.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[i.priority," priority"]})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:i.description}),l.jsxs("div",{className:"text-xs text-gray-500",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Timeframe:"})," ",i.timeframe]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Effort:"})," ",i.effort]})]})]}),l.jsx(dt,{size:"sm",variant:"secondary",onClick:()=>s?.(i),className:"ml-4",children:"Accept"})]})},i.id))})})]})]}),Z8=({painEntries:n,moodEntries:e,timeframe:t})=>l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center",children:[l.jsx(Dn,{className:"w-5 h-5 mr-2"}),"Trends Analysis"]})}),l.jsxs(qe,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Entries: pain ",n.length,"  mood ",e.length,"  timeframe ",t]}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Detailed visualization placeholder."})]})]});function K8(n){const e=n.flatMap(t=>t.treatments?.recent||[]).reduce((t,s)=>{const i=s.type;return t[i]=(t[i]||0)+1,t},{});return Object.entries(e).sort(([,t],[,s])=>s-t).map(([t,s])=>({treatment:t,frequency:s}))}function J8(n){const e=n.reduce((s,i)=>s+(i.workImpact?.missedWork||0),0),t=n.flatMap(s=>s.workImpact?.workLimitations||[]).reduce((s,i)=>(s[i]=(s[i]||0)+1,s),{});return{missedDays:e,commonLimitations:Object.entries(t).sort(([,s],[,i])=>i-s).slice(0,5)}}function nw(n,e,t,s,i){s=s||{};var r=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,c=i.getLineHeightFactor?i.getLineHeightFactor():r,d=o*c,u=/\r\n|\r|\n/g,f="",m=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(f=typeof n=="string"?n.split(u):n,m=f.length||1),t+=o*(2-r),s.valign==="middle"?t-=m/2*d:s.valign==="bottom"&&(t-=m*d),s.halign==="center"||s.halign==="right"){var h=o;if(s.halign==="center"&&(h*=.5),f&&m>=1){for(var y=0;y<f.length;y++)i.text(f[y],e-i.getStringUnitWidth(f[y])*h,t),t+=d;return i}e-=i.getStringUnitWidth(n)*h}return s.halign==="justify"?i.text(n,e,t,{maxWidth:s.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var G1={},nl=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:G1=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var s,i,r;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),o=d[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=n.unifyColor(e.fillColor);u&&(s=this.jsPDFDocument).setFillColor.apply(s,u),u=n.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=n.unifyColor(e.lineColor),u&&(r=this.jsPDFDocument).setDrawColor.apply(r,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,s){return this.jsPDFDocument.splitTextToSize(e,t,s)},n.prototype.rect=function(e,t,s,i,r){return this.jsPDFDocument.rect(e,t,s,i,r)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return G1||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),Wp=function(n,e){return Wp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},Wp(n,e)};function sw(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iw=(function(n){sw(e,n);function e(t){var s=n.call(this)||this;return s._element=t,s}return e})(Array);function Q8(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function X8(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Du(n,e,t){t.applyStyles(e,!0);var s=Array.isArray(n)?n:[n],i=s.map(function(r){return t.getTextWidth(r)}).reduce(function(r,a){return Math.max(r,a)},0);return i}function rw(n,e,t,s){var i=e.settings.tableLineWidth,r=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:r});var a=aw(i,!1);a&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),s.y-t.y,a)}function aw(n,e){var t=n>0,s=e||e===0;return t&&s?"DF":t?"S":s?"F":null}function mh(n,e){var t,s,i,r;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(s=n.top)!==null&&s!==void 0?s:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(r=n.bottom)!==null&&r!==void 0?r:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function ow(n,e){var t=mh(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function eM(n,e,t,s,i){var r={},a=1.3333333333333333,o=Qf(e,function(C){return i.getComputedStyle(C).backgroundColor});o!=null&&(r.fillColor=o);var c=Qf(e,function(C){return i.getComputedStyle(C).color});c!=null&&(r.textColor=c);var d=nM(s,t);d&&(r.cellPadding=d);var u="borderTopColor",f=a*t,m=s.borderTopWidth;if(s.borderBottomWidth===m&&s.borderRightWidth===m&&s.borderLeftWidth===m){var h=(parseFloat(m)||0)/f;h&&(r.lineWidth=h)}else r.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/f,right:(parseFloat(s.borderRightWidth)||0)/f,bottom:(parseFloat(s.borderBottomWidth)||0)/f,left:(parseFloat(s.borderLeftWidth)||0)/f},r.lineWidth.top||(r.lineWidth.right?u="borderRightColor":r.lineWidth.bottom?u="borderBottomColor":r.lineWidth.left&&(u="borderLeftColor"));var y=Qf(e,function(C){return i.getComputedStyle(C)[u]});y!=null&&(r.lineColor=y);var x=["left","right","center","justify"];x.indexOf(s.textAlign)!==-1&&(r.halign=s.textAlign),x=["middle","bottom","top"],x.indexOf(s.verticalAlign)!==-1&&(r.valign=s.verticalAlign);var w=parseInt(s.fontSize||"");isNaN(w)||(r.fontSize=w/a);var S=tM(s);S&&(r.fontStyle=S);var j=(s.fontFamily||"").toLowerCase();return n.indexOf(j)!==-1&&(r.font=j),r}function tM(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Qf(n,e){var t=lw(n,e);if(!t)return null;var s=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var i=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],r=parseInt(s[4]);return r===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function lw(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:lw(n.parentElement,e):t}function nM(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],s=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,r=t.map(function(o){return parseInt(o||"0")/s}),a=mh(r,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function cw(n,e,t,s,i){var r,a;s===void 0&&(s=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var c=Object.keys(n.getFontList()),d=n.scaleFactor(),u=[],f=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:u,body:f,foot:m};for(var h=0;h<o.rows.length;h++){var y=o.rows[h],x=(a=(r=y?.parentElement)===null||r===void 0?void 0:r.tagName)===null||a===void 0?void 0:a.toLowerCase(),w=sM(c,d,t,y,s,i);w&&(x==="thead"?u.push(w):x==="tfoot"?m.push(w):f.push(w))}return{head:u,body:f,foot:m}}function sM(n,e,t,s,i,r){for(var a=new iw(s),o=0;o<s.cells.length;o++){var c=s.cells[o],d=t.getComputedStyle(c);if(i||d.display!=="none"){var u=void 0;r&&(u=eM(n,c,e,d,t)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:iM(c)})}}var f=t.getComputedStyle(s);if(a.length>0&&(i||f.display!=="none"))return a}function iM(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function rM(n,e,t){for(var s=0,i=[n,e,t];s<i.length;s++){var r=i[s];r&&typeof r!="object"&&console.error("The options parameter should be of type object, is: "+typeof r),r.startY&&typeof r.startY!="number"&&(console.error("Invalid value for startY option",r.startY),delete r.startY)}}function Pr(n,e,t,s,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r}function aM(n,e){var t=new nl(n),s=t.getDocumentOptions(),i=t.getGlobalOptions();rM(i,s,e);var r=Pr({},i,s,e),a;typeof window<"u"&&(a=window);var o=oM(i,s,e),c=lM(i,s,e),d=cM(t,r),u=uM(t,r,a);return{id:e.tableId,content:u,hooks:c,styles:o,settings:d}}function oM(n,e,t){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var d=n[c],u=e[c],f=t[c];s.columnStyles=Pr({},d,u,f)}else{var m=[n,e,t],h=m.map(function(y){return y[c]||{}});s[c]=Pr({},h[0],h[1],h[2])}},r=0,a=Object.keys(s);r<a.length;r++){var o=a[r];i(o)}return s}function lM(n,e,t){for(var s=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,a=s;r<a.length;r++){var o=a[r];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function cM(n,e){var t,s,i,r,a,o,c,d,u,f,m,h,y=mh(e.margin,40/n.scaleFactor()),x=(t=dM(n,e.startY))!==null&&t!==void 0?t:y.top,w;e.showFoot===!0?w="everyPage":e.showFoot===!1?w="never":w=(s=e.showFoot)!==null&&s!==void 0?s:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var j=(r=e.useCss)!==null&&r!==void 0?r:!1,C=e.theme||(j?"plain":"striped"),L=!!e.horizontalPageBreak,P=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:j,theme:C,startY:x,margin:y,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=e.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:S,showFoot:w,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:L,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function dM(n,e){var t=n.getLastAutoTable(),s=n.scaleFactor(),i=n.pageNumber(),r=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;r=a===i}return typeof e=="number"?e:(e==null||e===!1)&&r&&t?.finalY!=null?t.finalY+20/s:null}function uM(n,e,t){var s=e.head||[],i=e.body||[],r=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=cw(n,e.html,t,a,e.useCss)||{};s=o.head||s,i=o.body||s,r=o.foot||s}else console.error("Cannot parse html in non browser environment")}var c=e.columns||hM(s,i,r);return{columns:c,head:s,body:i,foot:r}}function hM(n,e,t){var s=n[0]||e[0]||t[0]||[],i=[];return Object.keys(s).filter(function(r){return r!=="_element"}).forEach(function(r){var a=1,o;Array.isArray(s)?o=s[parseInt(r)]:o=s[r],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var c=0;c<a;c++){var d=void 0;Array.isArray(s)?d=i.length:d=r+(c>0?"_".concat(c):"");var u={dataKey:d};i.push(u)}}),i}var qp=(function(){function n(e,t,s){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=s,this.doc=e.getDocument()}return n})(),fM=(function(n){sw(e,n);function e(t,s,i,r,a,o){var c=n.call(this,t,s,o)||this;return c.cell=i,c.row=r,c.column=a,c.section=r.section,c}return e})(qp),pM=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,s,i,r,a){for(var o=0,c=t;o<c.length;o++){var d=c[o],u=new fM(e,this,s,i,r,a),f=d(u)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],f)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var s=0,i=this.hooks.didDrawPage;s<i.length;s++){var r=i[s];r(new qp(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var s=0,i=this.hooks.willDrawPage;s<i.length;s++){var r=i[s];r(new qp(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,r){return i+r.wrappedWidth},0);return t}else{var s=this.settings.margin;return e-s.left-s.right}},n})(),dw=(function(){function n(e,t,s,i,r){r===void 0&&(r=!1),this.height=0,this.raw=e,e instanceof iw&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=s,this.cells=i,this.spansMultiplePages=r}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(s,i){var r;return Math.max(s,((r=t.cells[i.index])===null||r===void 0?void 0:r.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(s){var i=t.cells[s.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var s=this;return e.reduce(function(i,r){var a=s.cells[r.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),d=c+o;return d>i?d:i},0)},n})(),uw=(function(){function n(e,t,s){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=s,this.raw=e;var r=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,r=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=r!=null?""+r:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");s=this.x+i/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var s=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,r=s*i+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=mh(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),mM=(function(){function n(e,t,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=s}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,s=0,i=e.allRows();s<i.length;s++){var r=i[s],a=r.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},n})();function gM(n,e){yM(n,e);var t=[],s=0;e.columns.forEach(function(r){var a=r.getMaxCustomCellWidth(e);a?r.width=a:(r.width=r.wrappedWidth,t.push(r)),s+=r.width});var i=e.getWidth(n.pageSize().width)-s;i&&(i=Up(t,i,function(r){return Math.max(r.minReadableWidth,r.minWidth)})),i&&(i=Up(t,i,function(r){return r.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),vM(e),bM(e,n),xM(e)}function yM(n,e){var t=n.scaleFactor(),s=e.settings.horizontalPageBreak,i=ow(n,e);e.allRows().forEach(function(r){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d){var u=e.hooks.didParseCell;e.callCellHooks(n,u,d,r,c,null);var f=d.padding("horizontal");d.contentWidth=Du(d.text,d.styles,n)+f;var m=Du(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,n);if(d.minReadableWidth=m+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||s===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var h=10/t;d.minWidth=d.styles.minCellWidth||h,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),e.allRows().forEach(function(r){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Up(n,e,t){for(var s=e,i=n.reduce(function(h,y){return h+y.wrappedWidth},0),r=0;r<n.length;r++){var a=n[r],o=a.wrappedWidth/i,c=s*o,d=a.width+c,u=t(a),f=d<u?u:d;e-=f-a.width,a.width=f}if(e=Math.round(e*1e10)/1e10,e){var m=n.filter(function(h){return e<0?h.width>t(h):!0});m.length&&(e=Up(m,e,t))}return e}function xM(n){for(var e={},t=1,s=n.allRows(),i=0;i<s.length;i++)for(var r=s[i],a=0,o=n.columns;a<o.length;a++){var c=o[a],d=e[c.index];if(t>1)t--,delete r.cells[c.index];else if(d)d.cell.height+=r.height,t=d.cell.colSpan,delete r.cells[c.index],d.left--,d.left<=1&&delete e[c.index];else{var u=r.cells[c.index];if(!u)continue;if(u.height=r.height,u.rowSpan>1){var f=s.length-i,m=u.rowSpan>f?f:u.rowSpan;e[c.index]={cell:u,left:m,row:r}}}}}function vM(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var s=e[t],i=null,r=0,a=0,o=0;o<n.columns.length;o++){var c=n.columns[o];if(a-=1,a>1&&n.columns[o+1])r+=c.width,delete s.cells[c.index];else if(i){var d=i;delete s.cells[c.index],i=null,d.width=c.width+r}else{var d=s.cells[c.index];if(!d)continue;if(a=d.colSpan,r=0,d.colSpan>1){i=d,r+=c.width;continue}d.width=c.width+r}}}function bM(n,e){for(var t={count:0,height:0},s=0,i=n.allRows();s<i.length;s++){for(var r=i[s],a=0,o=n.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d){e.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=e.splitTextToSize(d.text,u+1/e.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=Y1(d.text,u,d.styles,e,"...");else if(d.styles.overflow==="hidden")d.text=Y1(d.text,u,d.styles,e,"");else if(typeof d.styles.overflow=="function"){var f=d.styles.overflow(d.text,u);typeof f=="string"?d.text=[f]:d.text=f}d.contentHeight=d.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&t.count*t.height<m*d.rowSpan?t={height:m,count:d.rowSpan}:t&&t.count>0&&t.height>m&&(m=t.height),m>r.height&&(r.height=m)}}t.count--}}function Y1(n,e,t,s,i){return n.map(function(r){return wM(r,e,t,s,i)})}function wM(n,e,t,s,i){var r=1e4*s.scaleFactor();if(e=Math.ceil(e*r)/r,e>=Du(n,t,s))return n;for(;e<Du(n+i,t,s)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function SM(n,e){var t=new nl(n),s=kM(e,t.scaleFactor()),i=new pM(e,s);return gM(t,i),t.applyStyles(t.userStyles),i}function kM(n,e){var t=n.content,s=_M(t.columns);if(t.head.length===0){var i=Z1(s,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=Z1(s,"foot");i&&t.foot.push(i)}var r=n.settings.theme,a=n.styles;return{columns:s,head:Xf("head",t.head,s,a,r,e),body:Xf("body",t.body,s,a,r,e),foot:Xf("foot",t.foot,s,a,r,e)}}function Xf(n,e,t,s,i,r){var a={},o=e.map(function(c,d){for(var u=0,f={},m=0,h=0,y=0,x=t;y<x.length;y++){var w=x[y];if(a[w.index]==null||a[w.index].left===0)if(h===0){var S=void 0;Array.isArray(c)?S=c[w.index-m-u]:S=c[w.dataKey];var j={};typeof S=="object"&&!Array.isArray(S)&&(j=S?.styles||{});var C=jM(n,w,d,i,s,r,j),L=new uw(S,C,n);f[w.dataKey]=L,f[w.index]=L,h=L.colSpan-1,a[w.index]={left:L.rowSpan-1,times:h}}else h--,m++;else a[w.index].left--,h=a[w.index].times,u++}return new dw(c,d,n,f)});return o}function Z1(n,e){var t={};return n.forEach(function(s){if(s.raw!=null){var i=NM(e,s.raw);i!=null&&(t[s.dataKey]=i)}}),Object.keys(t).length>0?t:null}function NM(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function _M(n){return n.map(function(e,t){var s,i;return typeof e=="object"?i=(s=e.dataKey)!==null&&s!==void 0?s:t:i=t,new mM(i,e,t)})}function jM(n,e,t,s,i,r,a){var o=X8(s),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var d=Pr({},o.table,o[n],i.styles,c),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=n==="body"?u:{},m=n==="body"&&t%2===0?Pr({},o.alternateRow,i.alternateRowStyles):{},h=Q8(r),y=Pr({},h,d,m,f);return Pr(y,a)}function AM(n,e,t){var s;t===void 0&&(t={});var i=ow(n,e),r=new Map,a=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var h=e.columns.find(function(y){return y.dataKey===m||y.index===m});h&&!r.has(h.index)&&(r.set(h.index,!0),a.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var d=!0,u=(s=t?.start)!==null&&s!==void 0?s:0;u<e.columns.length;){if(r.has(u)){u++;continue}var f=e.columns[u].wrappedWidth;if(d||i>=f)d=!1,a.push(u),o.push(e.columns[u]),i-=f;else break;u++}return{colIndexes:a,columns:o,lastIndex:u-1}}function CM(n,e){for(var t=[],s=0;s<e.columns.length;s++){var i=AM(n,e,{start:s});i.columns.length&&(t.push(i),s=i.lastIndex)}return t}function LM(n,e){var t=e.settings,s=t.startY,i=t.margin,r={x:i.left,y:s},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=s+i.bottom+a;if(t.pageBreak==="avoid"){var c=e.body,d=c.reduce(function(m,h){return m+h.height},0);o+=d}var u=new nl(n);(t.pageBreak==="always"||t.startY!=null&&o>u.pageSize().height)&&(fw(u),r.y=i.top),e.callWillDrawPageHooks(u,r);var f=Pr({},r);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?PM(u,e,f,r):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(m){return Or(u,e,m,r,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(m,h){var y=h===e.body.length-1;Tu(u,e,m,y,f,r,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(m){return Or(u,e,m,r,e.columns)})),rw(u,e,f,r),e.callEndPageHooks(u,r),e.finalY=r.y,n.lastAutoTable=e,u.applyStyles(u.userStyles)}function PM(n,e,t,s){var i=CM(n,e),r=e.settings;if(r.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,u){n.applyStyles(n.userStyles),u>0?pc(n,e,t,s,d.columns,!0):K1(n,e,s,d.columns),MM(n,e,t,s,d.columns),ep(n,e,s,d.columns)});else for(var a=-1,o=i[0],c=function(){var d=a;if(o){n.applyStyles(n.userStyles);var u=o.columns;a>=0?pc(n,e,t,s,u,!0):K1(n,e,s,u),d=J1(n,e,a+1,s,u),ep(n,e,s,u)}var f=d-a;i.slice(1).forEach(function(m){n.applyStyles(n.userStyles),pc(n,e,t,s,m.columns,!0),J1(n,e,a+1,s,m.columns,f),ep(n,e,s,m.columns)}),a=d};a<e.body.length-1;)c()}function K1(n,e,t,s){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(r){return Or(n,e,r,t,s)})}function MM(n,e,t,s,i){n.applyStyles(n.userStyles),e.body.forEach(function(r,a){var o=a===e.body.length-1;Tu(n,e,r,o,t,s,i)})}function J1(n,e,t,s,i,r){n.applyStyles(n.userStyles),r=r??e.body.length;var a=Math.min(t+r,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(c,d){var u=t+d===e.body.length-1,f=hw(n,e,u,s);c.canEntireRowFit(f,i)&&(Or(n,e,c,s,i),o=t+d)}),o}function ep(n,e,t,s){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(r){return Or(n,e,r,t,s)})}function DM(n,e,t){var s=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),r=Math.floor((e-i)/s);return Math.max(0,r)}function TM(n,e,t,s){var i={};n.spansMultiplePages=!0,n.height=0;for(var r=0,a=0,o=t.columns;a<o.length;a++){var c=o[a],d=n.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new uw(d.raw,d.styles,d.section);u=Pr(u,d),u.text=[];var f=DM(d,e,s);d.text.length>f&&(u.text=d.text.splice(f,d.text.length));var m=s.scaleFactor(),h=s.getLineHeightFactor();d.contentHeight=d.getContentHeight(m,h),d.contentHeight>=e&&(d.contentHeight=e,u.styles.minCellHeight-=e),d.contentHeight>n.height&&(n.height=d.contentHeight),u.contentHeight=u.getContentHeight(m,h),u.contentHeight>r&&(r=u.contentHeight),i[c.index]=u}}var y=new dw(n.raw,-1,n.section,i,!0);y.height=r;for(var x=0,w=t.columns;x<w.length;x++){var c=w[x],u=y.cells[c.index];u&&(u.height=y.height);var d=n.cells[c.index];d&&(d.height=n.height)}return y}function IM(n,e,t,s){var i=n.pageSize().height,r=s.settings.margin,a=r.top+r.bottom,o=i-a;e.section==="body"&&(o-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var c=e.getMinimumRowHeight(s.columns,n),d=c<t;if(c>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=e.hasRowSpan(s.columns),f=e.getMaxCellHeight(s.columns)>o;return f?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||s.settings.rowPageBreak==="avoid")}function Tu(n,e,t,s,i,r,a){var o=hw(n,e,s,r);if(t.canEntireRowFit(o,a))Or(n,e,t,r,a);else if(IM(n,t,o,e)){var c=TM(t,o,e,n);Or(n,e,t,r,a),pc(n,e,i,r,a),Tu(n,e,c,s,i,r,a)}else pc(n,e,i,r,a),Tu(n,e,t,s,i,r,a)}function Or(n,e,t,s,i){s.x=e.settings.margin.left;for(var r=0,a=i;r<a.length;r++){var o=a[r],c=t.cells[o.index];if(!c){s.x+=o.width;continue}n.applyStyles(c.styles),c.x=s.x,c.y=s.y;var d=e.callCellHooks(n,e.hooks.willDrawCell,c,t,o,s);if(d===!1){s.x+=o.width;continue}EM(n,c,s);var u=c.getTextPos();nw(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,o,s),s.x+=o.width}s.y+=t.height}function EM(n,e,t){var s=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof s.lineWidth=="number"){var i=aw(s.lineWidth,s.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof s.lineWidth=="object"&&(s.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),OM(n,e,t,s.lineWidth))}function OM(n,e,t,s){var i,r,a,o;s.top&&(i=t.x,r=t.y,a=t.x+e.width,o=t.y,s.right&&(a+=.5*s.right),s.left&&(i-=.5*s.left),c(s.top,i,r,a,o)),s.bottom&&(i=t.x,r=t.y+e.height,a=t.x+e.width,o=t.y+e.height,s.right&&(a+=.5*s.right),s.left&&(i-=.5*s.left),c(s.bottom,i,r,a,o)),s.left&&(i=t.x,r=t.y,a=t.x,o=t.y+e.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),c(s.left,i,r,a,o)),s.right&&(i=t.x+e.width,r=t.y,a=t.x+e.width,o=t.y+e.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),c(s.right,i,r,a,o));function c(d,u,f,m,h){n.getDocument().setLineWidth(d),n.getDocument().line(u,f,m,h,"S")}}function hw(n,e,t,s){var i=e.settings.margin.bottom,r=e.settings.showFoot;return(r==="everyPage"||r==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-s.y-i}function pc(n,e,t,s,i,r){i===void 0&&(i=[]),r===void 0&&(r=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!r&&e.foot.forEach(function(o){return Or(n,e,o,s,i)}),e.callEndPageHooks(n,s);var a=e.settings.margin;rw(n,e,t,s),fw(n),e.pageNumber++,s.x=a.left,s.y=a.top,t.y=a.top,e.callWillDrawPageHooks(n,s),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Or(n,e,o,s,i)}),n.applyStyles(n.userStyles))}function fw(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function RM(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=e[0],i=aM(this,s),r=SM(this,i);return LM(this,r),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,s,i){nw(e,t,s,i,this)},n.API.autoTableSetDefaults=function(e){return nl.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){nl.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var s;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new nl(this),r=cw(i,e,window,t,!1),a=r.head,o=r.body,c=((s=a[0])===null||s===void 0?void 0:s.map(function(d){return d.content}))||[];return{columns:c,rows:o,data:o}}}var tp;try{if(typeof window<"u"&&window){var Q1=window,X1=Q1.jsPDF||((tp=Q1.jspdf)===null||tp===void 0?void 0:tp.jsPDF);X1&&RM(X1)}}catch(n){console.error("Could not apply autoTable plugin",n)}class FM{doc;constructor(){this.doc=new et}generateWCBReport(e){return new Promise((t,s)=>{try{this.doc=new et,this.setupDocument(),this.addHeader(e),this.addPainTrends(e),this.addWorkImpact(e),this.addFunctionalAnalysis(e),this.addTreatments(e),this.addRecommendations(e);const i=this.doc.output("blob");t(i)}catch(i){s(i)}})}downloadWCBReport(e,t){return new Promise((s,i)=>{try{const r=`wcb-report-${new Date(e.period.start).toISOString().split("T")[0]}-to-${new Date(e.period.end).toISOString().split("T")[0]}.pdf`;this.generateWCBReport(e).then(a=>{const o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=t||r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o),s()}).catch(i)}catch(r){i(r)}})}setupDocument(){this.doc.setProperties({title:"WCB Pain Report",subject:"Workers Compensation Board Pain Tracking Report",author:"Pain Tracker Pro",keywords:"pain, tracking, WCB, report",creator:"Pain Tracker Pro"})}addHeader(e){this.doc.setFontSize(20),this.doc.setFont("helvetica","bold"),this.doc.text("Workers Compensation Board",20,30),this.doc.text("Pain Tracking Report",20,40),this.doc.setFontSize(12),this.doc.setFont("helvetica","normal"),this.doc.text(`Report Period: ${new Date(e.period.start).toLocaleDateString()} - ${new Date(e.period.end).toLocaleDateString()}`,20,60),this.doc.text(`Generated: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,20,70),this.doc.line(20,80,190,80)}addPainTrends(e){let t=90;if(this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Pain Trends",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.text(`Average Pain Level: ${e.painTrends.average.toFixed(1)}/10`,20,t),t+=10,Object.keys(e.painTrends.locations).length>0){this.doc.text("Common Pain Locations:",20,t),t+=8;const s=Object.entries(e.painTrends.locations).sort(([,i],[,r])=>Number(r)-Number(i)).map(([i,r])=>[i,String(r)]);this.doc.autoTable({startY:t,head:[["Location","Occurrences"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),t=this.doc.lastAutoTable?.finalY?this.doc.lastAutoTable.finalY+15:t+15}else this.doc.text("No pain location data recorded.",20,t),t+=10}addWorkImpact(e){this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Work Impact",20,this.doc.internal.pageSize.height>150?150:120);let t=this.doc.internal.pageSize.height>150?160:130;if(this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.text(`Missed Work Days: ${e.workImpact.missedDays}`,20,t),t+=10,e.workImpact.limitations.length>0){this.doc.text("Work Limitations:",20,t),t+=8;const s=e.workImpact.limitations.map(([i,r])=>[i,r.toString()]);this.doc.autoTable({startY:t,head:[["Limitation","Frequency"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[231,76,60]}}),t=this.doc.lastAutoTable.finalY+15}if(e.workImpact.accommodationsNeeded.length>0){this.doc.text("Workplace Accommodations Needed:",20,t),t+=8;const s=e.workImpact.accommodationsNeeded.map(i=>[i]);this.doc.autoTable({startY:t,head:[["Accommodation"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[46,204,113]}}),t=this.doc.lastAutoTable.finalY+15}}addFunctionalAnalysis(e){let t=this.doc.lastAutoTable?.finalY||200;if(t>250&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Functional Analysis",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.functionalAnalysis.limitations.length>0){this.doc.text("Functional Limitations:",20,t),t+=8;const s=e.functionalAnalysis.limitations.map(i=>[i]);this.doc.autoTable({startY:t,head:[["Limitation"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[155,89,182]}}),t=this.doc.lastAutoTable.finalY+15}if(e.functionalAnalysis.deterioration.length>0||e.functionalAnalysis.improvements.length>0){this.doc.text("Changes Over Time:",20,t),t+=8;const s=[...e.functionalAnalysis.deterioration.map(i=>["Deterioration",i]),...e.functionalAnalysis.improvements.map(i=>["Improvement",i])];this.doc.autoTable({startY:t,head:[["Type","Description"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[230,126,34]}}),t=this.doc.lastAutoTable.finalY+15}}addTreatments(e){let t=this.doc.lastAutoTable?.finalY||200;if(t>220&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Treatments",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.treatments.current.length>0){this.doc.text("Current Treatments:",20,t),t+=8;const s=e.treatments.current.map(i=>[i.treatment,i.frequency.toString()]);this.doc.autoTable({startY:t,head:[["Treatment","Frequency"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[26,188,156]}}),t=this.doc.lastAutoTable.finalY+10}this.doc.text(`Treatment Effectiveness: ${e.treatments.effectiveness}`,20,t)}addRecommendations(e){let t=this.doc.lastAutoTable?.finalY||250;t>200&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Recommendations",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.recommendations.forEach((i,r)=>{const a=this.doc.splitTextToSize(i,160);this.doc.text(`${r+1}.`,20,t),this.doc.text(a,30,t),t+=a.length*5+3});const s=this.doc.internal.pageSize.height;this.doc.setFontSize(8),this.doc.setFont("helvetica","italic"),this.doc.text("Generated by Pain Tracker Pro - Confidential Medical Information",20,s-20),this.doc.text(`Page ${this.doc.getNumberOfPages()}`,180,s-20)}}const zM=new FM;function BM(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let Vp=1;class $M{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...i}=e,r=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vp++,a=this.toasts.find(c=>c.id===r),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(c=>c.id===r?(this.publish({...c,...e,id:r,title:s}),{...c,...e,id:r,dismissible:o,title:s}):c):this.addToast({title:s,...i,dismissible:o,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let r=s!==void 0,a;const o=i.then(async d=>{if(a=["resolve",d],it.isValidElement(d))r=!1,this.create({id:s,type:"default",message:d});else if(qM(d)&&!d.ok){r=!1;const f=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,y=typeof f=="object"&&!it.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:m,...y})}else if(d instanceof Error){r=!1;const f=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description,y=typeof f=="object"&&!it.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:m,...y})}else if(t.success!==void 0){r=!1;const f=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description,y=typeof f=="object"&&!it.isValidElement(f)?f:{message:f};this.create({id:s,type:"success",description:m,...y})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){r=!1;const u=typeof t.error=="function"?await t.error(d):t.error,f=typeof t.description=="function"?await t.description(d):t.description,h=typeof u=="object"&&!it.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:f,...h})}}).finally(()=>{r&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((d,u)=>o.then(()=>a[0]==="reject"?u(a[1]):d(a[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,t)=>{const s=t?.id||Vp++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const di=new $M,WM=(n,e)=>{const t=e?.id||Vp++;return di.addToast({title:n,...e,id:t}),t},qM=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",UM=WM,VM=()=>di.toasts,HM=()=>di.getActiveToasts(),Ql=Object.assign(UM,{success:di.success,info:di.info,warning:di.warning,error:di.error,custom:di.custom,message:di.message,promise:di.promise,dismiss:di.dismiss,loading:di.loading},{getHistory:VM,getToasts:HM});BM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const GM=["Continue monitoring pain levels","Follow up with healthcare provider","Modify work duties as needed"],ex=n=>({period:n,painTrends:{average:0,progression:[],locations:{}},workImpact:{missedDays:0,limitations:[],accommodationsNeeded:[]},functionalAnalysis:{limitations:[],deterioration:[],improvements:[]},treatments:{current:[],effectiveness:"No treatment data recorded."},recommendations:["No entries available for the selected period. Maintain regular logging to build a comprehensive record."]});function YM({entries:n,period:e}){const t=X.useMemo(()=>{const i=new Date(e.start),r=new Date(e.end);if(Number.isNaN(i.getTime())||Number.isNaN(r.getTime()))return ex(e);const a=n.filter(k=>{const A=new Date(k.timestamp);return Number.isNaN(A.getTime())?!1:A>=i&&A<=r});if(a.length===0)return ex(e);const o=[...a].sort((k,A)=>new Date(k.timestamp).getTime()-new Date(A.timestamp).getTime()),c=o.map(k=>k.baselineData.pain),d=c.reduce((k,A)=>k+A,0),u=c.length>0?d/c.length:0,f=o.reduce((k,A)=>(A.baselineData.locations?.forEach(M=>{const V=M.trim()||"Unspecified";k[V]=(k[V]||0)+1}),k),{}),m=[a.flatMap(k=>k.functionalImpact?.limitedActivities??[]),a.flatMap(k=>k.workImpact?.workLimitations??[]),a.flatMap(k=>k.comparison?.newLimitations??[])],h=Array.from(new Set(m.flat())).sort(),y=[],x=[];o.forEach((k,A)=>{if(A===0)return;const M=o[A-1].baselineData.pain,_=k.baselineData.pain-M,T=new Date(k.timestamp).toLocaleDateString();_>=2?y.push(`Pain increased significantly on ${T}`):_<=-2&&x.push(`Pain decreased significantly on ${T}`)});const{missedDays:w,commonLimitations:S}=J8(a),j=Array.from(new Set(a.flatMap(k=>k.workImpact?.modifiedDuties??[]))).sort(),C=K8(a).slice(0,5),L=a.flatMap(k=>[k.treatments?.effectiveness??"",...(k.treatments?.recent??[]).map(A=>A.effectiveness??"")]).map(k=>k.trim()).filter(Boolean);let P="No treatment data recorded.";if(L.length>0){const k=L.reduce((D,Q)=>(D.set(Q,(D.get(Q)??0)+1),D),new Map),A=Array.from(k.entries()).sort((D,Q)=>Q[1]-D[1]),[M,V]=A[0],_=L.length,T=Math.round(V/_*100),W=A.slice(1).map(([D,Q])=>`${D} (${Q})`);P=`${M} (${T}% of ${_} reports)`,W.length>0&&(P+=`; other feedback: ${W.join(", ")}`)}const O=[...GM];return u>=7&&O.unshift("Elevated pain levels detected; consider clinical reassessment."),w>0&&O.push("Document missed work days for employer or insurer discussions."),j.length>0&&O.push("Review workplace accommodations to ensure ongoing suitability."),{period:e,painTrends:{average:Number.isFinite(u)?u:0,progression:o.map(k=>({date:k.timestamp,pain:k.baselineData.pain,locations:k.baselineData.locations??[],symptoms:k.baselineData.symptoms??[]})),locations:f},workImpact:{missedDays:w,limitations:S,accommodationsNeeded:j},functionalAnalysis:{limitations:h,deterioration:y,improvements:x},treatments:{current:C,effectiveness:P},recommendations:O}},[n,e]),s=async()=>{try{Ql.loading("Generating PDF report..."),await zM.downloadWCBReport(t),Ql.dismiss(),Ql.success("PDF report downloaded successfully!")}catch(i){Ql.dismiss(),console.error("PDF export failed:",i),Ql.error("Failed to generate PDF report. Please try again.")}};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"WCB Report"}),l.jsx("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",disabled:t.recommendations.includes("No entries available for the selected period"),children:"Export PDF"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Period"}),l.jsxs("p",{children:["From: ",new Date(e.start).toLocaleDateString()]}),l.jsxs("p",{children:["To: ",new Date(e.end).toLocaleDateString()]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Pain Trends"}),t.painTrends?l.jsxs(l.Fragment,{children:[l.jsxs("p",{children:["Average Pain Level: ",Gt(t.painTrends.average,1)]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Common Locations:"}),Object.keys(t.painTrends.locations).length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No pain location data recorded."}):l.jsx("ul",{className:"list-disc pl-5",children:Object.entries(t.painTrends.locations).sort(([,i],[,r])=>r-i).map(([i,r])=>l.jsxs("li",{children:[i,": ",r," occurrences"]},i))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"No pain trend data available."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Work Impact"}),l.jsxs("p",{children:["Missed Days: ",t.workImpact.missedDays]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Common Limitations:"}),t.workImpact.limitations.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No work limitations reported."}):l.jsx("ul",{className:"list-disc pl-5",children:t.workImpact.limitations.map(([i,r])=>l.jsxs("li",{children:[i,": ",r," occurrences"]},i))})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Accommodations Needed:"}),t.workImpact.accommodationsNeeded.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No accommodations documented."}):l.jsx("ul",{className:"list-disc pl-5",children:t.workImpact.accommodationsNeeded.map(i=>l.jsx("li",{children:i},i))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Functional Analysis"}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Limitations:"}),t.functionalAnalysis.limitations.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No functional limitations reported."}):l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.limitations.map(i=>l.jsx("li",{children:i},i))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Changes Over Time"}),t.functionalAnalysis.deterioration.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Deterioration:"}),l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.deterioration.map((i,r)=>l.jsx("li",{children:i},i+r))})]}),t.functionalAnalysis.improvements.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Improvements:"}),l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.improvements.map((i,r)=>l.jsx("li",{children:i},i+r))})]}),t.functionalAnalysis.deterioration.length===0&&t.functionalAnalysis.improvements.length===0&&l.jsx("p",{className:"text-sm text-gray-500",children:"No significant pain changes detected."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Treatments"}),t.treatments.current.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No active treatments recorded."}):l.jsx("ul",{className:"list-disc pl-5",children:t.treatments.current.map(i=>l.jsxs("li",{children:[i.treatment,": ",i.frequency," entries"]},i.treatment))}),l.jsx("p",{className:"mt-2 text-sm text-gray-700",children:t.treatments.effectiveness})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Recommendations"}),l.jsx("ul",{className:"list-disc pl-5",children:t.recommendations.map(i=>l.jsx("li",{children:i},i))})]})]})]})}function ZM({entries:n}){const{ui:e,setReportPeriod:t}=Yu(),s=X.useRef(null);return X.useEffect(()=>{s.current&&s.current.focus()},[]),l.jsxs(ze,{className:"mb-8",id:"wcb-report-section",children:[l.jsxs(mt,{children:[l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(mu,{className:"h-5 w-5"}),l.jsx("span",{children:"WCB Report"})]}),l.jsx(Zi,{children:"Generate a comprehensive report for WorkSafe BC submission"})]}),l.jsxs(qe,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-foreground mb-2",children:"Start Date"}),l.jsx("input",{ref:s,id:"start-date",type:"date",value:e.reportPeriod.start,onChange:i=>t({start:i.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Report start date"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-foreground mb-2",children:"End Date"}),l.jsx("input",{id:"end-date",type:"date",value:e.reportPeriod.end,onChange:i=>t({end:i.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Report end date"})]})]}),r2("workSafeBCExport")?l.jsx(YM,{entries:n,period:e.reportPeriod}):l.jsx("div",{className:"text-sm text-muted-foreground p-4 bg-muted/5 rounded",children:"WorkSafe BC report export is not available in this release."})]})]})}const KM=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,JM={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},QM=n=>JM[n],XM=n=>n.replace(KM,QM);let tx={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:XM};const eD=(n={})=>{tx={...tx,...n}},tD={type:"3rdParty",init(n){eD(n.options.react)}};function nD({children:n}){const[e,t]=X.useState(()=>{const i=un.get("trauma-informed-preferences",{encrypt:!0});if(i)return{...du,...i};try{const r=localStorage.getItem("trauma-informed-preferences");if(r){const a=JSON.parse(r);return un.set("trauma-informed-preferences",a,{encrypt:!0}),{...du,...a}}}catch{}return du}),s=i=>{const r={...e,...i};t(r),un.set("trauma-informed-preferences",r,{encrypt:!0})};return X.useEffect(()=>{const i=document.documentElement;i.style.setProperty("--ti-font-size",y8(e.fontSize)),i.style.setProperty("--ti-touch-size",x8(e.touchTargetSize));const r=`ti-contrast-${e.contrast}`;document.body.className=document.body.className.replace(/ti-contrast-\w+/g,""),document.body.classList.add(r),e.reduceMotion?document.body.classList.add("ti-reduce-motion"):document.body.classList.remove("ti-reduce-motion"),e.simplifiedMode?document.body.classList.add("ti-simplified"):document.body.classList.remove("ti-simplified")},[e]),l.jsx(tw.Provider,{value:{preferences:e,updatePreferences:s},children:n})}function sD({title:n,level:e,children:t,defaultOpen:s=!1,memoryAid:i}){const{preferences:r}=ya(),[a,o]=X.useState(s),c=r.simplifiedMode&&e==="essential",d={essential:"border-l-blue-500 bg-blue-50",helpful:"border-l-yellow-500 bg-yellow-50",advanced:"border-l-gray-500 bg-gray-50"},u={essential:"Essential",helpful:"Helpful",advanced:"Advanced"};return l.jsxs("div",{className:`border-l-4 ${d[e]} rounded-r-md mb-4`,children:[l.jsx("button",{onClick:()=>o(!a),className:"w-full p-4 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset",style:{minHeight:"var(--ti-touch-size)"},"aria-expanded":a,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[a?l.jsx(ik,{className:"w-5 h-5 text-gray-600"}):l.jsx(Tv,{className:"w-5 h-5 text-gray-600"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:n}),l.jsx("span",{className:"text-xs text-gray-500 font-medium",children:u[e]})]})]}),r.showMemoryAids&&i&&l.jsxs("div",{className:"text-xs text-gray-600 bg-gray-200 px-2 py-1 rounded",children:[" ",i]})]})}),(a||c)&&l.jsx("div",{className:"px-4 pb-4",children:t})]})}function nx({text:n,type:e="tip",title:t,items:s}){const{preferences:i}=ya();if(!i.showMemoryAids)return null;const r={tip:"",reminder:"",example:""};return t&&s?l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-2",children:[l.jsx("div",{className:"font-medium text-blue-800 mb-2",children:t}),l.jsx("ul",{className:"list-disc pl-5 text-sm text-blue-800 space-y-1",children:s.map((a,o)=>l.jsx("li",{children:a},o))})]}):l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-2",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-lg",children:r[e]}),l.jsx("p",{className:"text-sm text-blue-800",children:n})]})})}function iD({intensity:n="gentle"}){const{preferences:e}=ya(),[t,s]=X.useState(!1);if(X.useEffect(()=>{if(e.showComfortPrompts){const r=setTimeout(()=>s(!0),3e4);return()=>clearTimeout(r)}},[e.showComfortPrompts]),!e.showComfortPrompts||!t)return null;const i={gentle:"Take your time. There's no rush with tracking your health.",standard:"Remember to take breaks if you need them. Your wellbeing comes first.",strong:"If you're feeling overwhelmed, it's okay to save and continue later."};return l.jsx("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Ci,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:i[n]}),l.jsx("button",{onClick:()=>s(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"Dismiss"})]})]})})}function uu({children:n,onClick:e,variant:t="primary",size:s="normal",disabled:i=!1,className:r=""}){const{preferences:a}=ya(),o=`
    inline-flex items-center justify-center
    font-medium rounded-md
    focus:outline-none focus:ring-2 focus:ring-offset-2
    transition-colors
    ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}
  `,c={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",gentle:"bg-green-100 text-green-800 hover:bg-green-200 focus:ring-green-500"},d=s==="large"||a.touchTargetSize!=="normal"?"px-6 py-4 text-lg min-h-[var(--ti-touch-size)]":"px-4 py-2 text-base min-h-[44px]";return l.jsx("button",{onClick:e,disabled:i,className:`${o} ${c[t]} ${d} ${r}`,style:{fontSize:"var(--ti-font-size)",transition:a.reduceMotion?"none":"all var(--ti-transition-duration)"},children:n})}function rD(){const{preferences:n,updatePreferences:e}=ya(),[t,s]=X.useState("cognitive"),i=o=>{e(o)},r=()=>{e({simplifiedMode:!0,showMemoryAids:!0,autoSave:!0,showProgress:!0,fontSize:"medium",contrast:"normal",reduceMotion:!1,touchTargetSize:"large",confirmationLevel:"standard",voiceInput:!1,gentleLanguage:!0,hideDistressingContent:!1,showComfortPrompts:!0})},a=[{id:"cognitive",label:"Cognitive Support",icon:l.jsx(ei,{className:"w-5 h-5"}),description:"Memory aids and cognitive load reduction"},{id:"visual",label:"Visual Preferences",icon:l.jsx(Ju,{className:"w-5 h-5"}),description:"Text size, contrast, and motion settings"},{id:"motor",label:"Motor & Input",icon:l.jsx(Ev,{className:"w-5 h-5"}),description:"Touch targets and alternative input methods"},{id:"emotional",label:"Emotional Safety",icon:l.jsx(Ci,{className:"w-5 h-5"}),description:"Trauma-informed interaction patterns"}];return l.jsxs(ze,{className:"accessibility-settings w-full max-w-4xl mx-auto",children:[l.jsx(mt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(ll,{className:"w-6 h-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx(gt,{children:"Accessibility & Comfort Settings"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customize the interface to work best for your needs"})]})]}),l.jsx("div",{className:"flex space-x-2",children:l.jsxs(uu,{variant:"secondary",onClick:r,size:"normal",children:[l.jsx(cm,{className:"w-4 h-4 mr-2"}),"Reset"]})})]})}),l.jsxs(qe,{children:[l.jsx("div",{className:"border-b border-gray-200 mb-6",children:l.jsx("nav",{className:"flex space-x-4","aria-label":"Settings categories",children:a.map(o=>l.jsxs("button",{onClick:()=>s(o.id),className:`
                  flex items-center space-x-2 px-4 py-3 text-sm font-medium rounded-t-lg
                  transition-colors min-h-[var(--ti-touch-size)]
                  ${t===o.id?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
                `,"aria-selected":t===o.id,role:"tab",children:[o.icon,l.jsxs("div",{className:"text-left",children:[l.jsx("div",{children:o.label}),l.jsx("div",{className:"text-xs text-gray-500",children:o.description})]})]},o.id))})}),l.jsxs("div",{className:"space-y-6",children:[t==="cognitive"&&l.jsx(aD,{preferences:n,onChange:i}),t==="visual"&&l.jsx(oD,{preferences:n,onChange:i}),t==="motor"&&l.jsx(lD,{preferences:n,onChange:i}),t==="emotional"&&l.jsx(cD,{preferences:n,onChange:i})]})]})]})}function aD({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ai,{title:"Interface Complexity",description:"Reduce cognitive load by simplifying the interface",icon:l.jsx(ei,{className:"w-5 h-5 text-purple-500"}),children:l.jsx(Mr,{label:"Simplified Mode",description:"Show only essential features and reduce interface complexity",checked:n.simplifiedMode,onChange:t=>e({simplifiedMode:t})})}),l.jsxs(Ai,{title:"Memory Support",description:"Tools to help remember and navigate the interface",icon:l.jsx(th,{className:"w-5 h-5 text-yellow-500"}),children:[l.jsx(Mr,{label:"Memory Aids",description:"Show helpful tips and reminders throughout the interface",checked:n.showMemoryAids,onChange:t=>e({showMemoryAids:t})}),l.jsx(Mr,{label:"Progress Indicators",description:"Show your progress through forms and tasks",checked:n.showProgress,onChange:t=>e({showProgress:t})}),l.jsx(Mr,{label:"Auto-Save",description:"Automatically save your work to prevent data loss",checked:n.autoSave,onChange:t=>e({autoSave:t})})]})]})}function oD({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ai,{title:"Text & Typography",description:"Adjust text size for comfortable reading",icon:l.jsx(xN,{className:"w-5 h-5 text-blue-500"}),children:l.jsx(Iu,{label:"Font Size",description:"Choose a comfortable text size for reading",value:n.fontSize,options:[{value:"small",label:"Small (14px)"},{value:"medium",label:"Medium (16px)"},{value:"large",label:"Large (18px)"},{value:"xl",label:"Extra Large (20px)"}],onChange:t=>e({fontSize:t})})}),l.jsx(Ai,{title:"Contrast & Colors",description:"Adjust visual contrast for better visibility",icon:l.jsx(Rv,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Iu,{label:"Contrast Level",description:"Higher contrast can improve text readability",value:n.contrast,options:[{value:"normal",label:"Normal Contrast"},{value:"high",label:"High Contrast"},{value:"extra-high",label:"Extra High Contrast"}],onChange:t=>e({contrast:t})})}),l.jsx(Ai,{title:"Motion & Animation",description:"Control movement and transitions in the interface",icon:l.jsx(th,{className:"w-5 h-5 text-orange-500"}),children:l.jsx(Mr,{label:"Reduce Motion",description:"Minimize animations and transitions that may cause discomfort",checked:n.reduceMotion,onChange:t=>e({reduceMotion:t})})})]})}function lD({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ai,{title:"Touch & Click Targets",description:"Adjust the size of buttons and interactive elements",icon:l.jsx(Ev,{className:"w-5 h-5 text-blue-500"}),children:l.jsx(Iu,{label:"Touch Target Size",description:"Larger targets are easier to tap accurately",value:n.touchTargetSize,options:[{value:"normal",label:"Normal (44px)"},{value:"large",label:"Large (56px)"},{value:"extra-large",label:"Extra Large (72px)"}],onChange:t=>e({touchTargetSize:t})})}),l.jsx(Ai,{title:"Alternative Input",description:"Enable alternative ways to interact with the interface",icon:l.jsx(SN,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Mr,{label:"Voice Input",description:"Use speech-to-text for filling out forms (requires microphone)",checked:n.voiceInput,onChange:t=>e({voiceInput:t})})}),l.jsx(Ai,{title:"Interaction Feedback",description:"Control confirmation prompts and feedback",icon:l.jsx(Qu,{className:"w-5 h-5 text-purple-500"}),children:l.jsx(Iu,{label:"Confirmation Level",description:"How much confirmation do you want for actions?",value:n.confirmationLevel,options:[{value:"minimal",label:"Minimal - Few confirmations"},{value:"standard",label:"Standard - Important actions only"},{value:"high",label:"High - Confirm most actions"}],onChange:t=>e({confirmationLevel:t})})})]})}function cD({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ai,{title:"Language & Communication",description:"How the interface communicates with you",icon:l.jsx(Ci,{className:"w-5 h-5 text-pink-500"}),children:l.jsx(Mr,{label:"Gentle Language",description:"Use supportive, non-judgmental language in messages and feedback",checked:n.gentleLanguage,onChange:t=>e({gentleLanguage:t})})}),l.jsx(Ai,{title:"Content Controls",description:"Control what content is displayed",icon:l.jsx(Qu,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Mr,{label:"Hide Distressing Content",description:"Filter out potentially triggering medical images or detailed descriptions",checked:n.hideDistressingContent,onChange:t=>e({hideDistressingContent:t})})}),l.jsx(Ai,{title:"Comfort & Support",description:"Gentle reminders and encouragement",icon:l.jsx(Ci,{className:"w-5 h-5 text-red-500"}),children:l.jsx(Mr,{label:"Comfort Prompts",description:"Show gentle reminders to take breaks and practice self-care",checked:n.showComfortPrompts,onChange:t=>e({showComfortPrompts:t})})})]})}function Ai({title:n,description:e,icon:t,children:s}){return l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[t,l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:n}),l.jsx("p",{className:"text-sm text-gray-600",children:e})]})]}),l.jsx("div",{className:"space-y-4",children:s})]})}function Mr({label:n,description:e,checked:t,onChange:s}){return l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"font-medium text-gray-900 text-sm",children:n}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e})]}),l.jsx("button",{onClick:()=>s(!t),className:`
          relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent 
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
          ${t?"bg-blue-600":"bg-gray-200"}
        `,style:{minHeight:"var(--ti-touch-size)",minWidth:"44px"},role:"switch","aria-checked":t,"aria-labelledby":`toggle-${n.replace(/\s+/g,"-").toLowerCase()}`,children:l.jsx("span",{className:`
            inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out
            ${t?"translate-x-5":"translate-x-0"}
          `})})]})}function Iu({label:n,description:e,value:t,options:s,onChange:i}){return l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium text-gray-900 text-sm mb-1",children:n}),l.jsx("p",{className:"text-xs text-gray-600 mb-3",children:e}),l.jsx("select",{value:t,onChange:r=>i(r.target.value),className:`\r
          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm\r
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\r
          text-sm\r
        `,style:{minHeight:"var(--ti-touch-size)",fontSize:"var(--ti-font-size)"},children:s.map(r=>l.jsx("option",{value:r.value,children:r.label},r.value))})]})}function qa({children:n,title:e,description:t,importance:s="normal",canCollapse:i=!0}){const{preferences:r}=ya();return r.simplifiedMode&&i&&s==="low"?l.jsx(sD,{title:e,level:"advanced",memoryAid:t||"Optional information",defaultOpen:!1,children:l.jsx("div",{className:"mb-6",children:n})}):l.jsxs("section",{className:"trauma-informed-section mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),t&&l.jsx("p",{className:"text-sm text-gray-600",children:t})]}),n]})}const np=n=>n,sp=n=>n,qi={NOTIFICATIONS:"pain_tracker_notifications",PREFERENCES:"pain_tracker_notification_preferences",SCHEDULES:"pain_tracker_notification_schedules",LAST_BACKUP:"pain_tracker_notifications_last_backup"};class qo{static instance;constructor(){}static getInstance(){return qo.instance||(qo.instance=new qo),qo.instance}async saveNotification(e){try{const t=await this.getAllNotifications(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),await this.saveNotificationsToStorage(t)}catch(t){throw console.error("Failed to save notification:",t),new Error("Failed to save notification")}}async getNotification(e){try{return(await this.getAllNotifications()).find(s=>s.id===e)||null}catch(t){return console.error("Failed to get notification:",t),null}}async getAllNotifications(){try{const e=localStorage.getItem(qi.NOTIFICATIONS);if(!e)return[];const t=await sp(e);return JSON.parse(t).filter(this.isValidNotification)}catch(e){return console.error("Failed to load notifications:",e),[]}}async getNotificationsByStatus(e){return(await this.getAllNotifications()).filter(s=>s.status===e)}async getNotificationsByType(e){return(await this.getAllNotifications()).filter(s=>s.type===e)}async updateNotificationStatus(e,t){try{const s=await this.getNotification(e);if(!s)return;const i={...s,status:t,updatedAt:new Date().toISOString(),...t==="read"&&{readAt:new Date().toISOString()},...t==="dismissed"&&{dismissedAt:new Date().toISOString()}};await this.saveNotification(i)}catch(s){throw console.error("Failed to update notification status:",s),new Error("Failed to update notification status")}}async deleteNotification(e){try{const s=(await this.getAllNotifications()).filter(i=>i.id!==e);await this.saveNotificationsToStorage(s)}catch(t){throw console.error("Failed to delete notification:",t),new Error("Failed to delete notification")}}async bulkUpdateStatus(e,t){try{const i=(await this.getAllNotifications()).map(r=>e.includes(r.id)?{...r,status:t,updatedAt:new Date().toISOString(),...t==="read"&&{readAt:new Date().toISOString()},...t==="dismissed"&&{dismissedAt:new Date().toISOString()}}:r);await this.saveNotificationsToStorage(i)}catch(s){throw console.error("Failed to bulk update notifications:",s),new Error("Failed to bulk update notifications")}}async archiveOldNotifications(e=30){try{const t=await this.getAllNotifications(),s=new Date;s.setDate(s.getDate()-e);const i=t.map(r=>new Date(r.createdAt)<s&&r.status==="read"?{...r,status:"archived",updatedAt:new Date().toISOString()}:r);await this.saveNotificationsToStorage(i)}catch(t){console.error("Failed to archive old notifications:",t)}}async savePreferences(e){try{const t=await np(JSON.stringify(e));localStorage.setItem(qi.PREFERENCES,t)}catch(t){throw console.error("Failed to save notification preferences:",t),new Error("Failed to save notification preferences")}}async getPreferences(){try{const e=localStorage.getItem(qi.PREFERENCES);if(!e)return this.getDefaultPreferences();const t=await sp(e),s=JSON.parse(t);return this.validatePreferences(s)}catch(e){return console.error("Failed to load notification preferences:",e),this.getDefaultPreferences()}}async saveSchedule(e){try{const t=await this.getAllSchedules(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),await this.saveSchedulesToStorage(t)}catch(t){throw console.error("Failed to save notification schedule:",t),new Error("Failed to save notification schedule")}}async getAllSchedules(){try{const e=localStorage.getItem(qi.SCHEDULES);if(!e)return[];const t=await sp(e);return JSON.parse(t).filter(this.isValidSchedule)}catch(e){return console.error("Failed to load notification schedules:",e),[]}}async deleteSchedule(e){try{const s=(await this.getAllSchedules()).filter(i=>i.id!==e);await this.saveSchedulesToStorage(s)}catch(t){throw console.error("Failed to delete notification schedule:",t),new Error("Failed to delete notification schedule")}}async saveNotificationsToStorage(e){const t=await np(JSON.stringify(e));localStorage.setItem(qi.NOTIFICATIONS,t)}async saveSchedulesToStorage(e){const t=await np(JSON.stringify(e));localStorage.setItem(qi.SCHEDULES,t)}isValidNotification(e){const t=e;return t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.title=="string"&&typeof t.message=="string"&&["low","medium","high","urgent"].includes(t.priority)&&["pending","sent","read","dismissed","archived"].includes(t.status)&&Array.isArray(t.deliveryMethods)&&typeof t.createdAt=="string"}isValidSchedule(e){const t=e;if(!t||typeof t!="object")return!1;const s=typeof t.id=="string",i=typeof t.name=="string",r=typeof t.type=="string",a=!!t.trigger,o=!!t.template,c=typeof t.isActive=="boolean",d=typeof t.createdAt=="string";return!!(s&&i&&r&&a&&o&&c&&d)}getDefaultPreferences(){return{enabled:!0,deliveryMethods:{browser:!0,in_app:!0,email:!1,sms:!1},categories:{pain_reminders:!0,medication_alerts:!0,appointment_reminders:!0,goal_achievements:!0,progress_checkins:!0,system_updates:!1,custom:!0},quietHours:{enabled:!1,start:"22:00",end:"08:00"},frequencyLimits:{maxPerDay:10,maxPerHour:3}}}validatePreferences(e){const t=e,s=this.getDefaultPreferences();return!t||typeof t!="object"?s:{enabled:typeof t.enabled=="boolean"?t.enabled:s.enabled,deliveryMethods:{browser:typeof t.deliveryMethods?.browser=="boolean"?t.deliveryMethods.browser:s.deliveryMethods.browser,in_app:typeof t.deliveryMethods?.in_app=="boolean"?t.deliveryMethods.in_app:s.deliveryMethods.in_app,email:typeof t.deliveryMethods?.email=="boolean"?t.deliveryMethods.email:s.deliveryMethods.email,sms:typeof t.deliveryMethods?.sms=="boolean"?t.deliveryMethods.sms:s.deliveryMethods.sms},categories:{pain_reminders:typeof t.categories?.pain_reminders=="boolean"?t.categories.pain_reminders:s.categories.pain_reminders,medication_alerts:typeof t.categories?.medication_alerts=="boolean"?t.categories.medication_alerts:s.categories.medication_alerts,appointment_reminders:typeof t.categories?.appointment_reminders=="boolean"?t.categories.appointment_reminders:s.categories.appointment_reminders,goal_achievements:typeof t.categories?.goal_achievements=="boolean"?t.categories.goal_achievements:s.categories.goal_achievements,progress_checkins:typeof t.categories?.progress_checkins=="boolean"?t.categories.progress_checkins:s.categories.progress_checkins,system_updates:typeof t.categories?.system_updates=="boolean"?t.categories.system_updates:s.categories.system_updates,custom:typeof t.categories?.custom=="boolean"?t.categories.custom:s.categories.custom},quietHours:{enabled:typeof t.quietHours?.enabled=="boolean"?t.quietHours.enabled:s.quietHours.enabled,start:typeof t.quietHours?.start=="string"?t.quietHours.start:s.quietHours.start,end:typeof t.quietHours?.end=="string"?t.quietHours.end:s.quietHours.end},frequencyLimits:{maxPerDay:typeof t.frequencyLimits?.maxPerDay=="number"?t.frequencyLimits.maxPerDay:s.frequencyLimits.maxPerDay,maxPerHour:typeof t.frequencyLimits?.maxPerHour=="number"?t.frequencyLimits.maxPerHour:s.frequencyLimits.maxPerHour}}}async cleanup(){try{await this.archiveOldNotifications(30);const e=await this.getAllNotifications(),t=new Date,s=e.filter(i=>!i.expiresAt||new Date(i.expiresAt)>t);s.length!==e.length&&await this.saveNotificationsToStorage(s)}catch(e){console.error("Failed to cleanup notifications:",e)}}async clearAll(){try{localStorage.removeItem(qi.NOTIFICATIONS),localStorage.removeItem(qi.PREFERENCES),localStorage.removeItem(qi.SCHEDULES),localStorage.removeItem(qi.LAST_BACKUP)}catch(e){throw console.error("Failed to clear notification data:",e),new Error("Failed to clear notification data")}}}const dD=qo.getInstance();class Uo{static instance;permission="default";notificationQueue=[];constructor(){this.checkPermission()}static getInstance(){return Uo.instance||(Uo.instance=new Uo),Uo.instance}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}getPermission(){return this.isSupported()?Notification.permission:"denied"}async requestPermission(){if(!this.isSupported())return console.warn("Browser notifications are not supported"),"denied";try{const e=await Notification.requestPermission();return this.permission=e,this.permission==="granted"&&this.processQueue(),this.permission}catch(e){return console.error("Failed to request notification permission:",e),"denied"}}checkPermission(){this.isSupported()&&(this.permission=Notification.permission)}async show(e){if(!this.isSupported())return console.warn("Browser notifications are not supported"),null;if(this.permission!=="granted")return this.notificationQueue.push(e),null;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/icons/notification-icon.png",badge:e.badge||"/icons/badge-icon.png",tag:e.tag,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,data:e.data});return e.requireInteraction||setTimeout(()=>{t.close()},5e3),t.onclick=()=>{if(window.focus(),e.data&&typeof e.data=="object"&&"actionUrl"in e.data){const s=e.data.actionUrl;s&&(window.location.href=s)}t.close()},t.onclose=()=>{},t.onerror=s=>{console.error("Notification error:",s)},t}catch(t){return console.error("Failed to show notification:",t),null}}async showFromNotification(e){const t={title:e.title,body:e.message,tag:e.id,requireInteraction:e.priority==="urgent"||e.priority==="high",data:{actionUrl:e.actionUrl,notificationId:e.id}};return this.show(t)}processQueue(){for(;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();e&&this.show(e)}}closeByTag(e){this.isSupported()&&console.log(`Attempting to close notifications with tag: ${e}`)}getStatus(){return{supported:this.isSupported(),permission:this.permission,queueLength:this.notificationQueue.length}}clearQueue(){this.notificationQueue=[]}async test(){const e={title:"Test Notification",body:"This is a test notification to verify browser notification functionality.",tag:"test-notification",requireInteraction:!1};return await this.show(e)!==null}}const ip=Uo.getInstance();function Eu(n){const e=typeof n=="string"?iS(n):n;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function Hp(n,e){const t=Eu(n),s=Eu(e);return t.getTime()===s.getTime()}class Vo{static instance;activeTriggers=new Map;lastAnalysis=new Map;analysisCooldown=300*1e3;constructor(){}static getInstance(){return Vo.instance||(Vo.instance=new Vo),Vo.instance}registerTrigger(e){this.activeTriggers.set(e.id,e)}unregisterTrigger(e){this.activeTriggers.delete(e)}async analyzeTriggers(e){const t=new Date;for(const s of this.activeTriggers.values()){if(!s.isActive)continue;const i=this.lastAnalysis.get(s.id);if(i&&t.getTime()-i.getTime()<this.analysisCooldown||this.hasExceededDailyLimit(s))continue;const r=await this.analyzeTrigger(s,e);r.shouldTrigger&&(await this.executeTrigger(s,r),this.lastAnalysis.set(s.id,t))}}async analyzeTrigger(e,t){let s=0,i=0;const r=[];for(const c of e.conditions){const d=await this.evaluateCondition(c,t);s+=d.confidence,i++,d.shouldTrigger&&r.push(d.reason)}const a=i>0?s/i:0;return{shouldTrigger:a>=.7,confidence:a,reason:r.join("; "),recommendedPriority:this.calculateRecommendedPriority(e,a)}}async evaluateCondition(e,t){switch(e.type){case"pain_threshold":return this.evaluatePainThreshold(e,t);case"pattern_recognition":return this.evaluatePatternRecognition(e,t);case"medication_due":return this.evaluateMedicationDue(e,t);case"goal_progress":return this.evaluateGoalProgress(e,t);case"time_since_last_entry":return this.evaluateTimeSinceLastEntry(e,t);case"streak_maintenance":return this.evaluateStreakMaintenance(e,t);default:return{shouldTrigger:!1,confidence:0,reason:"Unknown condition type"}}}async executeTrigger(e,t){try{const s={userId:"current-user",type:e.type,title:this.generateTriggerTitle(e),message:this.generateTriggerMessage(e,t),priority:t.recommendedPriority||e.priority,status:"sent",deliveryMethods:["in_app"],sentAt:new Date().toISOString(),metadata:{triggerId:e.id,confidence:t.confidence,reason:t.reason},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i=`intelligent_${e.id}_${Date.now()}`,r={...s,id:i};await dD.saveNotification(r);const a={...e,lastTriggered:new Date().toISOString(),triggerCount:e.triggerCount+1};this.activeTriggers.set(e.id,a),ip.isSupported()&&ip.getPermission()==="granted"&&await ip.showFromNotification(r),console.log(`Intelligent trigger executed: ${e.name} (${Gt(t.confidence,2)} confidence)`)}catch(s){console.error("Failed to execute intelligent trigger:",s)}}evaluatePainThreshold(e,t){if(!e.threshold||t.length===0)return{shouldTrigger:!1,confidence:0,reason:"Insufficient data for pain threshold analysis"};const s=t.slice(-7),i=s.reduce((o,c)=>o+c.baselineData.pain,0)/s.length,r=i>=e.threshold,a=Math.min(i/10,1);return{shouldTrigger:r,confidence:a,reason:`Average pain level ${Gt(i,1)}/10 ${r?"exceeds":"below"} threshold ${e.threshold}`}}evaluatePatternRecognition(e,t){if(t.length<5)return{shouldTrigger:!1,confidence:0,reason:"Insufficient data for pattern recognition"};const i=t.slice(-5).map(c=>c.baselineData.pain),r=this.calculateTrend(i),a=r>.5,o=Math.abs(r);return{shouldTrigger:a,confidence:o,reason:`Pain trend ${r>0?"increasing":"decreasing"} with ${Gt(o,2)} confidence`}}evaluateMedicationDue(e,t){return{shouldTrigger:!1,confidence:0,reason:"Medication due evaluation requires medication schedule data"}}evaluateGoalProgress(e,t){return{shouldTrigger:!1,confidence:0,reason:"Goal progress evaluation requires goal tracking data"}}evaluateTimeSinceLastEntry(e,t){if(t.length===0)return{shouldTrigger:!0,confidence:1,reason:"No pain entries recorded yet"};const s=t[t.length-1],i=(Date.now()-new Date(s.timestamp).getTime())/(1e3*60*60),r=e.timeWindow||24,a=i>=r,o=Math.min(i/r,1);return{shouldTrigger:a,confidence:o,reason:`${Gt(i,1)} hours since last entry (${r}h threshold)`}}evaluateStreakMaintenance(e,t){const s=e.streakLength||7,i=s;if(t.length<i)return{shouldTrigger:!1,confidence:0,reason:"Insufficient entries for streak analysis"};const r=t.slice(-i),o=new Set(r.map(u=>Eu(u.timestamp).toDateString())).size/s;return{shouldTrigger:o>=.8,confidence:o,reason:`${Gt(o*100,1)}% consistency over last ${s} days`}}calculateTrend(e){if(e.length<2)return 0;let t=0;for(let s=1;s<e.length;s++)t+=e[s]-e[s-1];return t/(e.length-1)}calculateRecommendedPriority(e,t){return t>=.9?"urgent":t>=.7?"high":t>=.5?"medium":"low"}generateTriggerTitle(e){switch(e.type){case"pain_reminder":return"Smart Pain Check-in";case"medication_alert":return"Medication Reminder";case"goal_achievement":return"Goal Progress Update";case"progress_checkin":return"Progress Check-in";default:return e.name}}generateTriggerMessage(e,t){return`${e.description}. ${t.reason}`}hasExceededDailyLimit(e){if(!e.lastTriggered)return!1;const t=new Date(e.lastTriggered);return Hp(t,new Date)&&e.triggerCount>=e.maxTriggersPerDay}getActiveTriggers(){return Array.from(this.activeTriggers.values())}getTriggerStats(e){const t=this.activeTriggers.get(e);return t?{triggerCount:t.triggerCount,lastTriggered:t.lastTriggered}:null}updateTrigger(e,t){const s=this.activeTriggers.get(e);s&&this.activeTriggers.set(e,{...s,...t})}}const Si=Vo.getInstance(),pw=()=>[{id:"pain_threshold_high",name:"High Pain Alert",description:"Alert when pain levels are consistently high",type:"pain_reminder",conditions:[{type:"pain_threshold",threshold:7},{type:"pattern_recognition"}],priority:"high",cooldownPeriod:120,maxTriggersPerDay:2,isActive:!0,triggerCount:0},{id:"missed_entries",name:"Missed Entries Reminder",description:"Remind when entries haven't been logged recently",type:"pain_reminder",conditions:[{type:"time_since_last_entry",timeWindow:48}],priority:"medium",cooldownPeriod:1440,maxTriggersPerDay:1,isActive:!0,triggerCount:0},{id:"consistency_streak",name:"Consistency Encouragement",description:"Encourage maintaining consistent tracking",type:"progress_checkin",conditions:[{type:"streak_maintenance",streakLength:5}],priority:"low",cooldownPeriod:1440,maxTriggersPerDay:1,isActive:!0,triggerCount:0}],uD=()=>{pw().forEach(e=>{Si.registerTrigger(e)})},hD=async n=>{await Si.analyzeTriggers(n)},fD=()=>{const[n,e]=X.useState([]),[t,s]=X.useState(!1),[i,r]=X.useState(null);X.useEffect(()=>{uD(),e(Si.getActiveTriggers())},[]);const a=X.useCallback(async u=>{s(!0);try{await hD(u),r(new Date),e(Si.getActiveTriggers())}catch(f){console.error("Failed to analyze triggers:",f)}finally{s(!1)}},[]),o=X.useCallback((u,f)=>{Si.updateTrigger(u,f),e(Si.getActiveTriggers())},[]),c=X.useCallback(()=>{Si.getActiveTriggers().forEach(m=>{Si.unregisterTrigger(m.id)}),pw().forEach(m=>{Si.registerTrigger(m)}),e(Si.getActiveTriggers())},[]),d=X.useCallback(u=>Si.getTriggerStats(u),[]);return{triggers:n,isAnalyzing:t,lastAnalysis:i,analyzeTriggers:a,updateTrigger:o,resetToDefaults:c,getTriggerStats:d}},pD=()=>{const[n,e]=X.useState({selectedTrigger:null,isEditing:!1,showStats:!1}),t=X.useCallback(o=>{e(c=>({...c,selectedTrigger:o,isEditing:!1,showStats:!1}))},[]),s=X.useCallback(()=>{e(o=>({...o,isEditing:!0,showStats:!1}))},[]),i=X.useCallback(()=>{e(o=>({...o,isEditing:!1}))},[]),r=X.useCallback(()=>{e(o=>({...o,showStats:!0,isEditing:!1}))},[]),a=X.useCallback(()=>{e(o=>({...o,showStats:!1}))},[]);return{...n,selectTrigger:t,startEditing:s,cancelEditing:i,openStats:r,hideStats:a}},Yn=ze,Zn=qe,As=mt,Cs=gt,Ft=dt,Ps=zs,mw=({checked:n=!1,onCheckedChange:e,className:t=""})=>l.jsx("input",{type:"checkbox",role:"switch",className:t,checked:n,onChange:s=>e?.(s.target.checked)}),gh=({value:n=0,className:e="",...t})=>{const s=Math.max(0,Math.min(100,n));return l.jsx("div",{className:`w-full h-2 bg-gray-200 rounded ${e}`,...t,children:l.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${s}%`}})})},mD=({className:n=""})=>{const{triggers:e,isAnalyzing:t,lastAnalysis:s,updateTrigger:i,resetToDefaults:r,getTriggerStats:a}=fD(),{selectedTrigger:o,isEditing:c,showStats:d,selectTrigger:u,startEditing:f,cancelEditing:m,openStats:h}=pD(),y=j=>{switch(j){case"pain_reminder":return l.jsx(Er,{className:"w-4 h-4"});case"medication_alert":return l.jsx(Xi,{className:"w-4 h-4"});case"goal_achievement":return l.jsx(xs,{className:"w-4 h-4"});case"progress_checkin":return l.jsx(Dn,{className:"w-4 h-4"});default:return l.jsx(ei,{className:"w-4 h-4"})}},x=j=>{switch(j){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},w=j=>j<60?`${j}m`:j<1440?`${Math.floor(j/60)}h`:`${Math.floor(j/1440)}d`,S=j=>{if(!j)return"Never";const C=new Date(j),O=(new Date().getTime()-C.getTime())/(1e3*60*60);return O<1?"Recently":O<24?`${Math.floor(O)}h ago`:`${Math.floor(O/24)}d ago`};return l.jsxs("div",{className:`space-y-6 ${n}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ei,{className:"w-6 h-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Intelligent Triggers"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Smart notifications based on your pain patterns and goals"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[s&&l.jsxs("span",{className:"text-sm text-gray-500",children:["Last analyzed: ",s.toLocaleTimeString()]}),l.jsxs(Ft,{variant:"outline",size:"sm",onClick:r,className:"flex items-center gap-2",children:[l.jsx(gp,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]}),t&&l.jsx(Yn,{className:"border-blue-200 bg-blue-50",children:l.jsx(Zn,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(gp,{className:"w-5 h-5 animate-spin text-blue-600"}),l.jsx("span",{className:"text-blue-800",children:"Analyzing your data for smart notifications..."})]})})}),l.jsx("div",{className:"grid gap-4",children:e.map(j=>{const C=a(j.id),L=o?.id===j.id;return l.jsxs(Yn,{className:`cursor-pointer transition-all ${L?"ring-2 ring-blue-500":"hover:shadow-md"}`,onClick:()=>u(j),children:[l.jsx(As,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[y(j.type),l.jsxs("div",{children:[l.jsx(Cs,{className:"text-lg",children:j.name}),l.jsx("p",{className:"text-sm text-gray-600",children:j.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ps,{variant:"secondary",className:`${x(j.priority)} text-white`,children:j.priority}),l.jsx(mw,{checked:j.isActive,onCheckedChange:P=>i(j.id,{isActive:P})})]})]})}),l.jsxs(Zn,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C?.triggerCount||0}),l.jsx("div",{className:"text-xs text-gray-500",children:"Triggers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:w(j.cooldownPeriod)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Cooldown"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-orange-600",children:j.maxTriggersPerDay}),l.jsx("div",{className:"text-xs text-gray-500",children:"Max/Day"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:S(C?.lastTriggered)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Last Trigger"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Trigger Conditions:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:j.conditions.map((P,O)=>l.jsx(Ps,{variant:"outline",className:"text-xs",children:String(P.type).replace("_"," ")},O))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ft,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),h()},className:"flex items-center gap-2",children:[l.jsx(Fs,{className:"w-4 h-4"}),"Stats"]}),l.jsxs(Ft,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),f()},className:"flex items-center gap-2",children:[l.jsx(ll,{className:"w-4 h-4"}),"Configure"]})]})]})]},j.id)})}),o&&l.jsxs(Yn,{className:"mt-6",children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center gap-2",children:[y(o.type),o.name," Details"]})}),l.jsx(Zn,{children:d?l.jsx(yD,{trigger:o,stats:a(o.id)}):c?l.jsx(xD,{trigger:o,onSave:j=>{i(o.id,j),m()},onCancel:m}):l.jsx(gD,{trigger:o})})]}),e.length===0&&l.jsx(Yn,{className:"text-center py-12",children:l.jsxs(Zn,{children:[l.jsx(ei,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Intelligent Triggers"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Set up smart notifications that respond to your pain patterns and goals."}),l.jsx(Ft,{onClick:r,children:"Create Default Triggers"})]})})]})},gD=({trigger:n})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Description"}),l.jsx("p",{className:"text-gray-600",children:n.description})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Trigger Conditions"}),l.jsx("div",{className:"space-y-2",children:n.conditions.map((e,t)=>l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[l.jsx(gu,{className:"w-4 h-4 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium capitalize",children:e.type.replace("_"," ")}),e.threshold&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Threshold: ",e.threshold]}),e.timeWindow&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Time Window: ",e.timeWindow,"h"]})]})]},t))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Settings"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{children:["Cooldown: ",vD(n.cooldownPeriod)]}),l.jsxs("div",{children:["Max per day: ",n.maxTriggersPerDay]}),l.jsxs("div",{children:["Priority: ",l.jsx(Ps,{className:wD(n.priority),children:n.priority})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Status"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[n.isActive?l.jsx(pa,{className:"w-4 h-4 text-green-600"}):l.jsx(Er,{className:"w-4 h-4 text-gray-400"}),n.isActive?"Active":"Inactive"]}),l.jsxs("div",{children:["Triggers sent: ",n.triggerCount]})]})]})]})]}),yD=({trigger:n,stats:e})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e?.triggerCount||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Triggers"})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:e?.lastTriggered?bD(e.lastTriggered):"Never"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Last Triggered"})]}),l.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(n.triggerCount/Math.max(1,n.maxTriggersPerDay)*100),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Daily Usage"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Performance"}),l.jsx(gh,{value:n.triggerCount/Math.max(1,n.maxTriggersPerDay*7)*100,className:"mb-2"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[n.triggerCount," triggers sent this week"]})]})]}),xD=({trigger:n,onSave:e,onCancel:t})=>{const[s,i]=it.useState({isActive:n.isActive,cooldownPeriod:n.cooldownPeriod,maxTriggersPerDay:n.maxTriggersPerDay,priority:n.priority}),r=()=>{e(s)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Active"}),l.jsx(mw,{checked:s.isActive,onCheckedChange:a=>i(o=>({...o,isActive:a}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),l.jsxs("select",{value:s.priority,onChange:a=>i(o=>({...o,priority:a.target.value})),className:"w-full p-2 border rounded",children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"urgent",children:"Urgent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cooldown (minutes)"}),l.jsx("input",{type:"number",value:s.cooldownPeriod,onChange:a=>i(o=>({...o,cooldownPeriod:parseInt(a.target.value)})),className:"w-full p-2 border rounded",min:"1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max per Day"}),l.jsx("input",{type:"number",value:s.maxTriggersPerDay,onChange:a=>i(o=>({...o,maxTriggersPerDay:parseInt(a.target.value)})),className:"w-full p-2 border rounded",min:"1"})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(Ft,{onClick:r,children:"Save Changes"}),l.jsx(Ft,{variant:"outline",onClick:t,children:"Cancel"})]})]})},vD=n=>n<60?`${n}m`:n<1440?`${Math.floor(n/60)}h`:`${Math.floor(n/1440)}d`,bD=n=>{if(!n)return"Never";const e=new Date(n),i=(new Date().getTime()-e.getTime())/(1e3*60*60);return i<1?"Recently":i<24?`${Math.floor(i)}h ago`:`${Math.floor(i/24)}d ago`},wD=n=>{switch(n){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}};class Ho{static instance;STORAGE_KEY="pain-tracker-goals";PROGRESS_KEY="pain-tracker-goal-progress";REMINDERS_KEY="pain-tracker-goal-reminders";constructor(){}static getInstance(){return Ho.instance||(Ho.instance=new Ho),Ho.instance}async saveGoal(e){try{const t=await this.getAllGoals(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save goal:",t),new Error("Failed to save goal")}}async getGoal(e){try{return(await this.getAllGoals()).find(s=>s.id===e)||null}catch(t){return console.error("Failed to get goal:",t),null}}async getAllGoals(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get goals:",e),[]}}async getGoalsByStatus(e){return(await this.getAllGoals()).filter(s=>s.status===e)}async getActiveGoals(){return this.getGoalsByStatus("active")}async deleteGoal(e){try{const s=(await this.getAllGoals()).filter(i=>i.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s)),await this.deleteGoalProgress(e),await this.deleteGoalReminders(e)}catch(t){throw console.error("Failed to delete goal:",t),new Error("Failed to delete goal")}}async saveProgress(e){try{const t=await this.getAllProgress(),s=t.findIndex(i=>i.goalId===e.goalId&&i.date===e.date);s>=0?t[s]=e:t.push(e),localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save progress:",t),new Error("Failed to save progress")}}async getGoalProgress(e){try{return(await this.getAllProgress()).filter(s=>s.goalId===e)}catch(t){return console.error("Failed to get goal progress:",t),[]}}async saveGoalProgress(e){return this.saveProgress(e)}async getGoalMilestones(e){return(await this.getGoal(e))?.milestones??[]}async getAllProgress(){try{const e=localStorage.getItem(this.PROGRESS_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get progress:",e),[]}}async deleteGoalProgress(e){try{const s=(await this.getAllProgress()).filter(i=>i.goalId!==e);localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(s))}catch(t){console.error("Failed to delete goal progress:",t)}}async saveReminder(e){try{const t=await this.getAllReminders(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]=e:t.push(e),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save reminder:",t),new Error("Failed to save reminder")}}async getGoalReminders(e){try{return(await this.getAllReminders()).filter(s=>s.goalId===e)}catch(t){return console.error("Failed to get goal reminders:",t),[]}}async getAllReminders(){try{const e=localStorage.getItem(this.REMINDERS_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get reminders:",e),[]}}async deleteGoalReminders(e){try{const s=(await this.getAllReminders()).filter(i=>i.goalId!==e);localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(s))}catch(t){console.error("Failed to delete goal reminders:",t)}}async calculateGoalAnalytics(e){try{const t=await this.getGoal(e);if(!t)return null;const s=await this.getGoalProgress(e),i=new Date,r=t.endDate?new Date(t.endDate):new Date(i.getTime()+720*60*60*1e3),a=s.reduce((x,w)=>x+w.value,0),o=s.length>0?a/s.length:0,{bestStreak:c,currentStreak:d}=this.calculateStreaks(s,t.targets),u=this.calculateCompletionPercentage(t,s),f=Math.max(0,Math.ceil((r.getTime()-i.getTime())/(1440*60*1e3))),m=this.projectCompletionDate(t,s),h=this.calculateTrend(s),y=this.generateInsights(t,s,u,h);return{goalId:e,totalProgress:a,averageProgress:o,bestStreak:c,currentStreak:d,completionPercentage:u,daysRemaining:f,projectedCompletion:m,trend:h,insights:y}}catch(t){return console.error("Failed to calculate goal analytics:",t),null}}calculateStreaks(e,t){if(e.length===0)return{bestStreak:0,currentStreak:0};const s=e.sort((o,c)=>new Date(o.date).getTime()-new Date(c.date).getTime());let i=0,r=0,a=0;for(let o=0;o<s.length;o++){const c=s[o];this.isProgressSuccessful(c,t)?(a++,r=a,i=Math.max(i,a)):a=0}return{bestStreak:i,currentStreak:r}}isProgressSuccessful(e,t){return t.some(s=>{switch(s.comparison){case"less_than":return e.value<s.targetValue;case"greater_than":return e.value>s.targetValue;case"equal_to":return e.value===s.targetValue;default:return!1}})}calculateCompletionPercentage(e,t){if(e.targets.length===0)return 0;const s=e.targets[0],i=t[t.length-1];if(!i)return 0;switch(s.comparison){case"percentage_decrease":case"percentage_increase":return Math.min(100,Math.max(0,i.value));default:return Math.min(100,Math.max(0,i.value/s.targetValue*100))}}projectCompletionDate(e,t){if(t.length<2)return"Insufficient data";const s=t.slice(-7);if(s.length<2)return"Insufficient data";const i=s.reduce((u,f,m)=>m===0?0:u+(f.value-s[m-1].value),0)/(s.length-1);if(i===0)return"Stable progress";const r=e.targets[0],a=s[s.length-1].value,c=(r.targetValue-a)/i;if(c<=0)return"Already achieved";if(c>365)return"More than a year";const d=new Date;return d.setDate(d.getDate()+Math.ceil(c)),d.toLocaleDateString()}calculateTrend(e){if(e.length<3)return"stable";const s=e.slice(-5).map(r=>r.value),i=s.reduce((r,a,o)=>o===0?0:r+(a-s[o-1]),0)/(s.length-1);return i>.1?"improving":i<-.1?"declining":"stable"}generateInsights(e,t,s,i){const r=[];return s>=100?r.push(" Goal achieved! Congratulations!"):s>=75?r.push(" Great progress! You're almost there!"):s>=50&&r.push(" Halfway there! Keep up the momentum!"),i==="improving"?r.push(" Your progress is trending upward - excellent work!"):i==="declining"&&r.push(" Progress has slowed. Consider reviewing your strategies."),t.length===0&&r.push(" Start tracking your progress to see detailed insights."),r}async exportGoals(){const e=await this.getAllGoals(),t=await this.getAllProgress(),s=await this.getAllReminders();return JSON.stringify({goals:e,progress:t,reminders:s,exportedAt:new Date().toISOString()},null,2)}async importGoals(e){try{const t=JSON.parse(e);t.goals&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t.goals)),t.progress&&localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(t.progress)),t.reminders&&localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t.reminders))}catch(t){throw console.error("Failed to import goals:",t),new Error("Invalid import data")}}async clearAllData(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.PROGRESS_KEY),localStorage.removeItem(this.REMINDERS_KEY)}}const Tr=Ho.getInstance(),SD=[{id:"reduce_pain_30_percent",name:"Reduce Pain by 30%",description:"Lower your average pain level by 30% over the next 30 days",type:"pain_reduction",targets:[{metric:"pain_level",targetValue:30,unit:"%",comparison:"percentage_decrease"}],duration:30,milestones:[{title:"Week 1 Complete",description:"Completed first week of pain tracking",targetValue:7,reward:"Small celebration!"},{title:"15% Reduction",description:"Achieved 15% pain reduction",targetValue:15,reward:"Great progress!"},{title:"Goal Achieved",description:"Successfully reduced pain by 30%",targetValue:30,reward:"Congratulations!"}],category:"pain_management",difficulty:"medium",estimatedSuccess:65},{id:"consistent_tracking",name:"Track Daily for 30 Days",description:"Maintain consistent daily pain tracking for a full month",type:"consistency",targets:[{metric:"entry_count",targetValue:30,unit:"entries",comparison:"greater_than"}],duration:30,milestones:[{title:"Week 1 Streak",description:"7 consecutive days of tracking",targetValue:7,reward:"Building good habits!"},{title:"Halfway Point",description:"15 days completed",targetValue:15,reward:"You're doing great!"},{title:"30-Day Champion",description:"Completed 30 days of consistent tracking",targetValue:30,reward:"Consistency master!"}],category:"lifestyle",difficulty:"easy",estimatedSuccess:80},{id:"medication_adherence",name:"Perfect Medication Schedule",description:"Take all prescribed medications on time for 14 days",type:"medication_adherence",targets:[{metric:"medication_taken",targetValue:100,unit:"%",comparison:"equal_to"}],duration:14,milestones:[{title:"First Week",description:"Completed medication schedule for 7 days",targetValue:7,reward:"Great start!"},{title:"Perfect Record",description:"14 days of perfect medication adherence",targetValue:14,reward:"Health hero!"}],category:"medication",difficulty:"medium",estimatedSuccess:70},{id:"increase_activity",name:"Increase Daily Activity",description:"Gradually increase daily physical activity to 30 minutes",type:"activity_increase",targets:[{metric:"activity_minutes",targetValue:30,unit:"minutes",comparison:"greater_than"}],duration:21,milestones:[{title:"Week 1: 10 minutes",description:"Achieved 10 minutes of daily activity",targetValue:10,reward:"Movement matters!"},{title:"Week 2: 20 minutes",description:"Achieved 20 minutes of daily activity",targetValue:20,reward:"Building momentum!"},{title:"Goal Achieved: 30 minutes",description:"Successfully reached 30 minutes daily",targetValue:30,reward:"Active lifestyle champion!"}],category:"lifestyle",difficulty:"medium",estimatedSuccess:60}],kD={pain_reduction:"Pain Reduction",frequency_reduction:"Reduce Frequency",consistency:"Consistency",medication_adherence:"Medication Adherence",activity_increase:"Increase Activity",sleep_improvement:"Sleep Improvement",mood_tracking:"Mood Tracking",custom:"Custom Goal"},ND={low:"Low",medium:"Medium",high:"High",urgent:"Urgent"};class la{static calculateProgressPercentage(e,t){if(e.targets.length===0||t.length===0)return 0;const s=e.targets[0],i=t[t.length-1];switch(s.comparison){case"percentage_decrease":case"percentage_increase":return Math.min(100,Math.max(0,i.value));case"less_than":{const r=this.calculateBaselineValue(t),a=(r-i.value)/r*100;return Math.min(100,Math.max(0,a))}case"greater_than":return Math.min(100,Math.max(0,i.value/s.targetValue*100));case"equal_to":return i.value>=s.targetValue?100:i.value/s.targetValue*100;default:return 0}}static calculateBaselineValue(e){if(e.length===0)return 0;const t=e.slice(0,Math.min(3,e.length));return t.reduce((s,i)=>s+i.value,0)/t.length}static calculateStreak(e){if(e.length===0)return 0;const t=e.sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime());let s=0;const i=new Date;if(!t.find(a=>Hp(a.date,i)))return 0;for(let a=t.length-1;a>=0;a--){const o=t[a],c=new Date(i);if(c.setDate(c.getDate()-(t.length-1-a)),Hp(o.date,c))s++;else break}return s}static calculateWeeklyProgress(e){const t={};return e.forEach(s=>{const i=new Date(s.date),r=Eu(i),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay()).toISOString().split("T")[0];t[o]||(t[o]={sum:0,count:0}),t[o].sum+=s.value,t[o].count++}),Object.entries(t).sort(([s],[i])=>s.localeCompare(i)).map(([s,i])=>({week:s,average:i.sum/i.count,count:i.count}))}static calculateTrend(e){if(e.length<3)return"stable";const t=e.slice(-7);if(t.length<3)return"stable";const s=t.map(o=>o.value),i=s.slice(1).map((o,c)=>o-s[c]),r=i.reduce((o,c)=>o+c,0)/i.length,a=Math.abs(s[0]*.05);return r>a?"improving":r<-a?"declining":"stable"}static generateProgressInsights(e,t){const s=[],i=this.calculateProgressPercentage(e,t),r=this.calculateTrend(t),a=this.calculateStreak(t);i>=100?s.push(" Congratulations! You've achieved your goal!"):i>=75?s.push(" Excellent progress! You're in the final stretch."):i>=50?s.push(" You're halfway there! Keep up the great work."):i>=25&&s.push(" Good start! You're building momentum."),r==="improving"?s.push(" Your progress is trending upward - you're on the right track!"):r==="declining"&&s.push(" Your progress has slowed. Consider reviewing your strategies."),a>=7?s.push(` ${a}-day streak! You're building excellent habits.`):a>=3&&s.push(` ${a}-day streak! Keep the momentum going.`);const o=this.calculateWeeklyProgress(t);if(o.length>=2){const d=o[o.length-1],u=o[o.length-2];d.count>u.count?s.push(" You're tracking more frequently this week!"):d.count<u.count&&s.push(" Consider increasing your tracking frequency.")}return Math.floor((Date.now()-new Date(e.startDate).getTime())/(1440*60*1e3))>0&&t.length===0&&s.push(" Start tracking your progress to see detailed insights."),s}static calculateMilestoneProgress(e,t){return e.milestones.map(s=>{const i=t.some(r=>r.value>=s.targetValue);return{...s,isCompleted:i,progressPercentage:Math.min(100,(t[t.length-1]?.value||0)/s.targetValue*100)}})}static projectCompletionDate(e,t){if(t.length<2)return null;const s=t.slice(-7);if(s.length<2)return null;const i=s.slice(1).map((f,m)=>f.value-s[m].value),r=i.reduce((f,m)=>f+m,0)/i.length;if(Math.abs(r)<.01)return null;const a=e.targets[0],o=s[s.length-1].value,d=(a.targetValue-o)/r;if(d<=0||d>365)return null;const u=new Date;return u.setDate(u.getDate()+Math.ceil(d)),u}static getGoalHealthScore(e,t){let s=50;const i=this.calculateProgressPercentage(e,t);s+=i*.3;const r=this.calculateStreak(t);s+=Math.min(r*2,20);const a=this.calculateWeeklyProgress(t);if(a.length>=4){const c=a.reduce((d,u)=>d+u.count,0)/a.length;s+=Math.min(c*5,15)}const o=this.calculateTrend(t);return o==="improving"?s+=10:o==="declining"&&(s-=10),Math.max(0,Math.min(100,s))}}const _D=n=>{const e=n.endDate?new Date(n.endDate):null;if(!e)return-1;const t=new Date,s=e.getTime()-t.getTime(),i=Math.ceil(s/(1e3*60*60*24));return Math.max(0,i)},jD=n=>n.endDate?new Date(n.endDate)<new Date&&n.status==="active":!1,AD=n=>{switch(n){case"completed":return"text-green-600 bg-green-100";case"active":return"text-blue-600 bg-blue-100";case"paused":return"text-yellow-600 bg-yellow-100";case"abandoned":return"text-gray-600 bg-gray-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},CD=(n,e)=>e==="%"?`${bS(n,1)}`:e.includes("minute")||e.includes("hour")?`${Gt(n,0)} ${e}`:`${Gt(n,1)} ${e}`,gw={async calculateGoalAnalytics(n,e){const t=la.calculateProgressPercentage(n,e),s=la.calculateTrend(e),i=la.generateProgressInsights(n,e),r=la.calculateStreak(e),a=r,o=e.reduce((d,u)=>d+u.value,0),c=e.length?o/e.length:0;return{progressPercentage:t,trend:s,insights:i,bestStreak:r,currentStreak:a,totalEntries:e.length,averageProgress:c}}},LD=({onOpenManager:n,className:e="",compact:t=!1})=>{const[s,i]=X.useState([]),[r,a]=X.useState({}),[o,c]=X.useState(!0);X.useEffect(()=>{d()},[]);const d=async()=>{try{c(!0);const x=await Tr.getAllGoals();i(x);const w=x.filter(P=>P.status==="active"),S=x.filter(P=>P.status==="completed");let j=0,C=0;for(const P of x){const O=await Tr.getGoalProgress(P.id),k=await gw.calculateGoalAnalytics(P,O);k.progressPercentage!==void 0&&(j+=k.progressPercentage),C+=O.length}const L=x.length>0?j/x.length:0;a({totalGoals:x.length,activeGoals:w.length,completedGoals:S.length,avgProgress:Math.round(L),totalEntries:C})}catch(x){console.error("Failed to load goals data:",x)}finally{c(!1)}},u=x=>{switch(x){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"abandoned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=x=>{switch(x){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-gray-200 bg-gray-50"}},m=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t?l.jsxs(Yn,{className:e,children:[l.jsx(As,{className:"pb-3",children:l.jsxs(Cs,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xs,{className:"w-5 h-5 text-blue-600"}),"Goals"]}),l.jsx(Ft,{variant:"ghost",size:"sm",onClick:n,children:l.jsx(mp,{className:"w-4 h-4"})})]})}),l.jsx(Zn,{children:o?l.jsxs("div",{className:"animate-pulse space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-2 bg-gray-200 rounded"})]}):r.totalGoals===0?l.jsxs("div",{className:"text-center py-6",children:[l.jsx(xs,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"No goals yet"}),l.jsxs(Ft,{onClick:n,size:"sm",children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:r.activeGoals}),l.jsx("div",{className:"text-xs text-gray-600",children:"Active"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:r.completedGoals}),l.jsx("div",{className:"text-xs text-gray-600",children:"Done"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-purple-600",children:r.totalEntries}),l.jsx("div",{className:"text-xs text-gray-600",children:"Entries"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Overall Progress"}),l.jsxs("span",{children:[r.avgProgress,"%"]})]}),l.jsx(gh,{value:r.avgProgress,className:"h-2"})]}),l.jsx(Ft,{onClick:n,variant:"outline",className:"w-full",size:"sm",children:"Manage Goals"})]})})]}):l.jsxs(Yn,{className:e,children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xs,{className:"w-6 h-6 text-blue-600"}),"Goal Dashboard"]}),l.jsxs(Ft,{variant:"outline",size:"sm",onClick:n,children:[l.jsx(mp,{className:"w-4 h-4 mr-2"}),"View All"]})]})}),l.jsx(Zn,{children:o?l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"h-16 bg-gray-200 rounded"}),l.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]}):r.totalGoals===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(xs,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Your Journey"}),l.jsx("p",{className:"text-gray-600 mb-6 max-w-sm mx-auto",children:"Set meaningful goals to track your progress and celebrate your achievements."}),l.jsxs(Ft,{onClick:n,children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"Create Your First Goal"]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.totalGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Goals"})]}),l.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.activeGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),l.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.completedGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),l.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[r.avgProgress,"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Avg Progress"})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[l.jsx(Xi,{className:"w-4 h-4"}),"Recent Goals"]}),l.jsx("div",{className:"space-y-3",children:s.filter(x=>x.status==="active").sort((x,w)=>new Date(w.updatedAt).getTime()-new Date(x.updatedAt).getTime()).slice(0,3).map(x=>l.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer hover:shadow-md transition-shadow ${f(x.priority)}`,onClick:n,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-medium text-sm",children:x.title}),l.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:x.description})]}),l.jsx(Ps,{className:`text-xs ${u(x.status)}`,children:x.status})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[l.jsxs("span",{children:["Started ",m(x.startDate)]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Dn,{className:"w-3 h-3"}),l.jsx("span",{children:"Track Progress"})]})]})]},x.id))})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(Ft,{onClick:n,className:"flex-1",children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"New Goal"]}),l.jsxs(Ft,{variant:"outline",onClick:n,className:"flex-1",children:[l.jsx(il,{className:"w-4 h-4 mr-2"}),"View Achievements"]})]})]})})]})},sx={dateRange:{start:"",end:""},painLevelRange:{min:1,max:10},locations:[],symptoms:[],medications:[],treatments:[],sleepQualityRange:{min:1,max:10},moodImpactRange:{min:1,max:10},workImpact:{hasMissedWork:!1,hasModifiedDuties:!1},searchText:""};function PD({entries:n,onFiltersChange:e,savedFilters:t,onSaveFilter:s,onLoadFilter:i,onDeleteFilter:r}){const[a,o]=X.useState(sx),[c,d]=X.useState(!1),[u,f]=X.useState(""),[m,h]=X.useState(!1);X.useEffect(()=>{try{const A=new URLSearchParams(window.location.search).get("filters");if(A){const M=JSON.parse(decodeURIComponent(A));o(M)}}catch(k){console.warn("Failed to load filters from URL:",k)}},[]),X.useEffect(()=>{try{const k=new URL(window.location.href);a.searchText||a.dateRange.start||a.dateRange.end||a.painLevelRange.min!==1||a.painLevelRange.max!==10||a.locations.length>0||a.symptoms.length>0||a.medications.length>0||a.treatments.length>0||a.sleepQualityRange.min!==1||a.sleepQualityRange.max!==10||a.moodImpactRange.min!==1||a.moodImpactRange.max!==10||a.workImpact.hasMissedWork||a.workImpact.hasModifiedDuties?k.searchParams.set("filters",encodeURIComponent(JSON.stringify(a))):k.searchParams.delete("filters"),window.history.replaceState({},"",k.toString())}catch(k){console.warn("Failed to update URL with filters:",k)}},[a]);const y=X.useMemo(()=>{const k=new Set,A=new Set,M=new Set,V=new Set,_=new Set;return n.forEach(T=>{T.baselineData.locations&&T.baselineData.locations.forEach(W=>{k.add(W),W.toLowerCase().split(" ").forEach(D=>_.add(D))}),T.baselineData.symptoms&&T.baselineData.symptoms.forEach(W=>{A.add(W),W.toLowerCase().split(" ").forEach(D=>_.add(D))}),T.medications?.current&&T.medications.current.forEach(W=>{M.add(W.name),W.name.toLowerCase().split(" ").forEach(D=>_.add(D))}),T.treatments?.recent&&T.treatments.recent.forEach(W=>{V.add(W.type),W.type.toLowerCase().split(" ").forEach(D=>_.add(D))}),T.notes&&T.notes.toLowerCase().split(/\s+/).forEach(W=>{W.length>2&&_.add(W)})}),{locations:Array.from(k).sort(),symptoms:Array.from(A).sort(),medications:Array.from(M).sort(),treatments:Array.from(V).sort(),searchTerms:Array.from(_).sort().slice(0,20)}},[n]),x=X.useMemo(()=>n.filter(k=>{if(a.dateRange.start&&new Date(k.timestamp)<new Date(a.dateRange.start)||a.dateRange.end&&new Date(k.timestamp)>new Date(a.dateRange.end)||k.baselineData.pain<a.painLevelRange.min||k.baselineData.pain>a.painLevelRange.max||a.locations.length>0&&!a.locations.some(A=>k.baselineData.locations?.includes(A))||a.symptoms.length>0&&!a.symptoms.some(A=>k.baselineData.symptoms?.includes(A))||a.medications.length>0&&!a.medications.some(A=>k.medications?.current?.some(M=>M.name===A))||a.treatments.length>0&&!a.treatments.some(A=>k.treatments?.recent?.some(M=>M.type===A))||k.qualityOfLife?.sleepQuality!==void 0&&(k.qualityOfLife.sleepQuality<a.sleepQualityRange.min||k.qualityOfLife.sleepQuality>a.sleepQualityRange.max)||k.qualityOfLife?.moodImpact!==void 0&&(k.qualityOfLife.moodImpact<a.moodImpactRange.min||k.qualityOfLife.moodImpact>a.moodImpactRange.max)||a.workImpact.hasMissedWork&&(k.workImpact?.missedWork??0)===0||a.workImpact.hasModifiedDuties&&(k.workImpact?.modifiedDuties?.length??0)===0)return!1;if(a.searchText){const A=a.searchText.toLowerCase();if(![k.notes,...k.baselineData.symptoms||[],...k.baselineData.locations||[],...k.medications?.current?.map(_=>_.name)||[],...k.medications?.current?.map(_=>_.dosage)||[],...k.medications?.current?.map(_=>_.effectiveness)||[],k.medications?.changes,...k.treatments?.recent?.map(_=>_.type)||[],...k.treatments?.recent?.map(_=>_.provider)||[],...k.treatments?.recent?.map(_=>_.effectiveness)||[],k.treatments?.effectiveness,k.treatments?.planned?.join(" "),...k.functionalImpact?.limitedActivities||[],...k.functionalImpact?.assistanceNeeded||[],...k.functionalImpact?.mobilityAids||[],...k.workImpact?.modifiedDuties||[],...k.workImpact?.workLimitations||[],k.comparison?.worseningSince,...k.comparison?.newLimitations||[],k.qualityOfLife?.socialImpact?.join(" ")].some(_=>_&&_.toString().toLowerCase().includes(A)))return!1}return!0}),[n,a]);it.useEffect(()=>{e(x)},[x,e]);const w=(k,A)=>{o(M=>({...M,[k]:A}))},S=(k,A,M)=>{o(V=>({...V,[k]:{...V[k],[A]:M}}))},j=X.useMemo(()=>{let k=0;return(a.dateRange.start||a.dateRange.end)&&k++,(a.painLevelRange.min!==1||a.painLevelRange.max!==10)&&k++,a.locations.length>0&&k++,a.symptoms.length>0&&k++,a.medications.length>0&&k++,a.treatments.length>0&&k++,(a.sleepQualityRange.min!==1||a.sleepQualityRange.max!==10)&&k++,(a.moodImpactRange.min!==1||a.moodImpactRange.max!==10)&&k++,(a.workImpact.hasMissedWork||a.workImpact.hasModifiedDuties)&&k++,a.searchText&&k++,k},[a]),C=()=>{o(sx)},L=()=>{u.trim()&&(s(u.trim(),a),f(""),h(!1))},P=X.useCallback(()=>{try{const k=new URL(window.location.href);k.searchParams.set("filters",encodeURIComponent(JSON.stringify(a))),navigator.clipboard.writeText(k.toString()),console.log("Filter URL copied to clipboard:",k.toString())}catch(k){console.error("Failed to copy filter URL:",k)}},[a]),O=X.useMemo(()=>a.searchText||a.dateRange.start||a.dateRange.end||a.painLevelRange.min!==1||a.painLevelRange.max!==10||a.locations.length>0||a.symptoms.length>0||a.medications.length>0||a.treatments.length>0||a.sleepQualityRange.min!==1||a.sleepQualityRange.max!==10||a.moodImpactRange.min!==1||a.moodImpactRange.max!==10||a.workImpact.hasMissedWork||a.workImpact.hasModifiedDuties,[a]);return l.jsxs(ze,{className:"mb-6",children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Iv,{className:"h-5 w-5"}),l.jsx("span",{children:"Advanced Filters & Search"}),j>0&&l.jsxs(zs,{variant:"secondary",className:"ml-2 border-transparent",style:{backgroundColor:"hsl(var(--color-badge-bg))",color:"hsl(var(--color-badge-foreground))"},children:[j," active"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>d(!c),children:[c?"Hide":"Show"," Advanced"]}),l.jsxs(dt,{variant:"outline",size:"sm",onClick:C,disabled:j===0,children:[l.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Clear"]}),O&&l.jsxs(dt,{variant:"outline",size:"sm",onClick:P,title:"Copy shareable link with current filters",children:[l.jsx(yu,{className:"h-4 w-4 mr-1"}),"Share"]})]})]})}),l.jsxs(qe,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Search"}),l.jsxs("div",{className:"relative",children:[l.jsx(Fv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ci,{placeholder:"Search across all fields (notes, symptoms, medications, treatments...)",value:a.searchText,onChange:k=>w("searchText",k.target.value),className:"pl-9 pr-9"}),a.searchText&&l.jsx("button",{onClick:()=>w("searchText",""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground hover:text-foreground",children:l.jsx(Ls,{className:"h-4 w-4"})})]}),a.searchText&&l.jsx("div",{className:"text-xs text-muted-foreground",children:"Searching across: notes, symptoms, locations, medications, treatments, functional impact, work impact, and more"}),!a.searchText&&y.searchTerms.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Popular search terms:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:y.searchTerms.slice(0,8).map(k=>l.jsx("button",{onClick:()=>w("searchText",k),className:"text-xs px-2 py-1 bg-muted rounded-md hover:bg-muted/80 transition-colors",children:k},k))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(ci,{type:"date",value:a.dateRange.start,onChange:k=>S("dateRange","start",k.target.value),placeholder:"Start date"}),l.jsx(ci,{type:"date",value:a.dateRange.end,onChange:k=>S("dateRange","end",k.target.value),placeholder:"End date"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Pain Level (",a.painLevelRange.min,"-",a.painLevelRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(ci,{type:"number",min:"1",max:"10",value:a.painLevelRange.min,onChange:k=>S("painLevelRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(ci,{type:"number",min:"1",max:"10",value:a.painLevelRange.max,onChange:k=>S("painLevelRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Results"}),l.jsx("div",{className:"text-2xl font-bold text-primary",children:x.length}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",n.length," entries"]})]})]}),c&&l.jsxs("div",{className:"border-t pt-4 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Locations"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:y.locations.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`location-${k}`,checked:a.locations.includes(k),onChange:A=>{A.target.checked?w("locations",[...a.locations,k]):w("locations",a.locations.filter(M=>M!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`location-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Symptoms"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:y.symptoms.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`symptom-${k}`,checked:a.symptoms.includes(k),onChange:A=>{A.target.checked?w("symptoms",[...a.symptoms,k]):w("symptoms",a.symptoms.filter(M=>M!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`symptom-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Medications"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:y.medications.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`medication-${k}`,checked:a.medications.includes(k),onChange:A=>{A.target.checked?w("medications",[...a.medications,k]):w("medications",a.medications.filter(M=>M!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`medication-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Treatments"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:y.treatments.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`treatment-${k}`,checked:a.treatments.includes(k),onChange:A=>{A.target.checked?w("treatments",[...a.treatments,k]):w("treatments",a.treatments.filter(M=>M!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`treatment-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Sleep Quality (",a.sleepQualityRange.min,"-",a.sleepQualityRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(ci,{type:"number",min:"1",max:"10",value:a.sleepQualityRange.min,onChange:k=>S("sleepQualityRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(ci,{type:"number",min:"1",max:"10",value:a.sleepQualityRange.max,onChange:k=>S("sleepQualityRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Mood Impact (",a.moodImpactRange.min,"-",a.moodImpactRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(ci,{type:"number",min:"1",max:"10",value:a.moodImpactRange.min,onChange:k=>S("moodImpactRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(ci,{type:"number",min:"1",max:"10",value:a.moodImpactRange.max,onChange:k=>S("moodImpactRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Work Impact"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"has-missed-work",checked:a.workImpact.hasMissedWork,onChange:k=>S("workImpact","hasMissedWork",k.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:"has-missed-work",className:"text-sm",children:"Has missed work"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"has-modified-duties",checked:a.workImpact.hasModifiedDuties,onChange:k=>S("workImpact","hasModifiedDuties",k.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:"has-modified-duties",className:"text-sm",children:"Has modified duties"})]})]})]})]}),t.length>0&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Saved Filters"}),l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[l.jsx(yu,{className:"h-4 w-4 mr-1"}),"Save Current"]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(k=>l.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>i(k),className:"flex items-center space-x-1",children:[l.jsx(VS,{className:"h-3 w-3"}),l.jsx("span",{children:k.name}),l.jsx(dt,{variant:"ghost",size:"sm",onClick:A=>{A.stopPropagation(),r(k.id)},className:"h-4 w-4 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",children:l.jsx(Ls,{className:"h-3 w-3"})})]},k.id))})]}),m&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 transition-opacity bg-background/80 backdrop-blur-sm",onClick:()=>h(!1)}),l.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-card shadow-xl rounded-lg border",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Save Filter Preset"}),l.jsx(ci,{placeholder:"Filter name",value:u,onChange:k=>f(k.target.value),onKeyPress:k=>k.key==="Enter"&&L(),autoFocus:!0}),l.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[l.jsx(dt,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),l.jsx(dt,{onClick:L,disabled:!u.trim(),children:"Save"})]})]})]})})]})]})}const ix="pain-tracker-saved-filters";function MD(){const[n,e]=X.useState([]);return X.useEffect(()=>{try{const a=localStorage.getItem(ix);if(a){const o=JSON.parse(a);e(o)}}catch(a){console.error("Failed to load saved filters:",a)}},[]),X.useEffect(()=>{try{localStorage.setItem(ix,JSON.stringify(n))}catch(a){console.error("Failed to save filters:",a)}},[n]),{savedFilters:n,saveFilter:(a,o)=>{const c={id:`filter-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:a.trim(),criteria:{...o},createdAt:new Date().toISOString()};return e(d=>[...d,c]),c},loadFilter:a=>a.criteria,deleteFilter:a=>{e(o=>o.filter(c=>c.id!==a))},updateFilter:(a,o,c)=>{e(d=>d.map(u=>u.id===a?{...u,name:o.trim(),criteria:{...c}}:u))}}}const Io={"dashboard-overview":{id:"dashboard-overview",type:"dashboard-overview",title:"Dashboard Overview",description:"Key metrics, charts, and recent activity",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!1,canResize:!0,traumaInformed:!0},"pain-entry":{id:"pain-entry",type:"pain-entry",title:"Record Pain",description:"Track your current pain level and symptoms",icon:l.jsx(ji,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!1,canResize:!1,traumaInformed:!0},"pain-visualization":{id:"pain-visualization",type:"pain-visualization",title:"Pain Visualization",description:"Charts and graphs of your pain patterns",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"large",category:"analytics",canRemove:!0,canResize:!0,traumaInformed:!0},"recent-history":{id:"recent-history",type:"recent-history",title:"Recent History",description:"Your latest pain entries",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"medium",category:"core",canRemove:!0,canResize:!0,traumaInformed:!0},"empathy-analytics":{id:"empathy-analytics",type:"empathy-analytics",title:"Empathy Analytics",description:"Quantified empathy metrics and insights",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"large",category:"analytics",canRemove:!0,canResize:!0,traumaInformed:!0},"wcb-report":{id:"wcb-report",type:"wcb-report",title:"WCB Report",description:"Workers' compensation report generator",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"medium",category:"reports",canRemove:!0,canResize:!0,traumaInformed:!0},"current-stats":{id:"current-stats",type:"current-stats",title:"Current Stats",description:"Quick overview of your current metrics",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"small",category:"utilities",canRemove:!0,canResize:!1,traumaInformed:!0},"quick-actions":{id:"quick-actions",type:"quick-actions",title:"Quick Actions",description:"Common actions and shortcuts",icon:l.jsx(Ra,{className:"h-4 w-4"}),defaultSize:"small",category:"utilities",canRemove:!0,canResize:!1,traumaInformed:!0},"intelligent-triggers":{id:"intelligent-triggers",type:"intelligent-triggers",title:"Intelligent Triggers",description:"Smart notifications based on your pain patterns",icon:l.jsx(ll,{className:"h-4 w-4"}),defaultSize:"large",category:"utilities",canRemove:!0,canResize:!0,traumaInformed:!0},"goal-tracking":{id:"goal-tracking",type:"goal-tracking",title:"Goal Tracking",description:"Set and track your health and wellness goals",icon:l.jsx(xs,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!0,canResize:!0,traumaInformed:!0}},rx={widgets:[{id:"dashboard-overview",type:"dashboard-overview",size:"large",position:0,visible:!0},{id:"pain-entry",type:"pain-entry",size:"large",position:1,visible:!0},{id:"goal-tracking",type:"goal-tracking",size:"large",position:2,visible:!0},{id:"pain-visualization",type:"pain-visualization",size:"large",position:3,visible:!0},{id:"recent-history",type:"recent-history",size:"medium",position:4,visible:!0},{id:"current-stats",type:"current-stats",size:"small",position:5,visible:!0},{id:"quick-actions",type:"quick-actions",size:"small",position:6,visible:!0},{id:"intelligent-triggers",type:"intelligent-triggers",size:"large",position:7,visible:!1},{id:"empathy-analytics",type:"empathy-analytics",size:"large",position:8,visible:!1},{id:"wcb-report",type:"wcb-report",size:"medium",position:9,visible:!1}],layout:"grid",columns:3},ax="pain-tracker-dashboard-layout";function DD(){const[n,e]=X.useState(rx),[t,s]=X.useState(!1);X.useEffect(()=>{try{const u=localStorage.getItem(ax);if(u){const f=JSON.parse(u);e(f)}}catch(u){console.warn("Failed to load dashboard layout from localStorage:",u)}finally{s(!0)}},[]);const i=X.useCallback(u=>{try{localStorage.setItem(ax,JSON.stringify(u)),e(u)}catch(f){console.error("Failed to save dashboard layout:",f)}},[]),r=X.useCallback(()=>{i(rx)},[i]),a=X.useCallback(u=>{const f={...n,widgets:n.widgets.map(m=>m.id===u?{...m,visible:!m.visible}:m)};i(f)},[n,i]),o=X.useCallback((u,f)=>{const m={...n,widgets:n.widgets.map(h=>h.id===u?{...h,size:f}:h)};i(m)},[n,i]),c=X.useCallback((u,f)=>{const m=Array.from(n.widgets),[h]=m.splice(u,1);m.splice(f,0,h);const y=m.map((w,S)=>({...w,position:S})),x={...n,widgets:y};i(x)},[n,i]),d=X.useCallback(u=>{const f={...n,...u};i(f)},[n,i]);return{layout:n,isLoaded:t,saveLayout:i,resetLayout:r,toggleWidget:a,updateWidgetSize:o,reorderWidgets:c,updateLayoutSettings:d}}function TD({isOpen:n,onClose:e,layout:t,onToggleWidget:s,onResetLayout:i,onUpdateLayoutSettings:r}){const[a,o]=X.useState("all"),c=[{id:"all",label:"All Widgets",count:t.widgets.length},{id:"core",label:"Core",count:t.widgets.filter(u=>Io[u.type].category==="core").length},{id:"analytics",label:"Analytics",count:t.widgets.filter(u=>Io[u.type].category==="analytics").length},{id:"reports",label:"Reports",count:t.widgets.filter(u=>Io[u.type].category==="reports").length},{id:"utilities",label:"Utilities",count:t.widgets.filter(u=>Io[u.type].category==="utilities").length}],d=a==="all"?t.widgets:t.widgets.filter(u=>Io[u.type].category===a);return l.jsx(Cm,{isOpen:n,onClose:e,size:"xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(ll,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Customize Dashboard"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, and rearrange your dashboard widgets"})]})]}),l.jsx(dt,{variant:"ghost",size:"sm",onClick:e,children:l.jsx(Ls,{className:"h-4 w-4"})})]}),l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsxs(gt,{className:"flex items-center space-x-2",children:[l.jsx(Yk,{className:"h-5 w-5"}),l.jsx("span",{children:"Layout Settings"})]})}),l.jsx(qe,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Layout Style"}),l.jsxs("select",{value:t.layout,onChange:u=>r({layout:u.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"grid",children:"Grid"}),l.jsx("option",{value:"masonry",children:"Masonry"}),l.jsx("option",{value:"list",children:"List"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Columns"}),l.jsxs("select",{value:t.columns,onChange:u=>r({columns:parseInt(u.target.value)}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:1,children:"1 Column"}),l.jsx("option",{value:2,children:"2 Columns"}),l.jsx("option",{value:3,children:"3 Columns"}),l.jsx("option",{value:4,children:"4 Columns"})]})]})]})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(u=>l.jsxs("button",{onClick:()=>o(u.id),className:yt("px-3 py-2 text-sm rounded-full border transition-colors",a===u.id?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:[u.label," (",u.count,")"]},u.id))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(u=>{const f=Io[u.type];return l.jsx(ze,{className:yt("transition-all",u.visible?"border-primary/20 bg-primary/5":"opacity-60"),children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"text-primary mt-1",children:f.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium",children:f.title}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.description}),l.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[l.jsx(zs,{variant:"outline",className:"text-xs",children:f.category}),f.canRemove&&l.jsx(zs,{variant:"secondary",className:"text-xs",children:"Removable"})]})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx(dt,{variant:"ghost",size:"sm",onClick:()=>s(u.id),className:"p-2",children:u.visible?l.jsx(Ju,{className:"h-4 w-4"}):l.jsx(om,{className:"h-4 w-4"})})})]})})},u.id)})}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[l.jsxs(dt,{variant:"outline",onClick:i,children:[l.jsx(cm,{className:"h-4 w-4 mr-2"}),"Reset to Default"]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(dt,{variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(dt,{onClick:e,children:[l.jsx(yu,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})}function ID({widget:n,entries:e,allEntries:t,onAddEntry:s,onStartWalkthrough:i,onOpenGoalManager:r,onDragStart:a,onDragEnd:o,onDrop:c,isDragging:d,layout:u}){const f=()=>{switch(n.type){case"dashboard-overview":return l.jsx(s8,{entries:e,allEntries:t});case"pain-entry":return l.jsx(qa,{title:"Record Your Pain",description:"Track your current pain level and symptoms",importance:"high",canCollapse:!1,children:l.jsx(_8,{onSubmit:s})});case"pain-visualization":return l.jsx(qa,{title:"Pain Visualization",description:"Charts and graphs of your pain patterns",importance:"normal",canCollapse:!0,children:l.jsx(M8,{entries:e})});case"recent-history":return l.jsx(qa,{title:"Recent History",description:`Your ${e.length} recorded pain ${e.length===1?"entry":"entries"}`,importance:"normal",canCollapse:!0,children:l.jsx(i2,{entries:e.slice(-5)})});case"empathy-analytics":return l.jsx(qa,{title:"Empathy Analytics",description:"Quantified empathy metrics and insights for your healing journey",importance:"normal",canCollapse:!0,children:l.jsx(q8,{userId:"current-user",painEntries:e,onInsightSelect:h=>{console.log("Insight selected:",h)},onRecommendationAccept:h=>{console.log("Recommendation accepted:",h)},onShareMetrics:h=>{console.log("Share metrics:",h)},showAdvancedMetrics:!0})});case"wcb-report":return l.jsx(qa,{title:"Workers' Compensation Report",description:"Generate reports for your workers' compensation claim",importance:"normal",canCollapse:!0,children:l.jsx(ZM,{entries:e})});case"current-stats":return l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsx(gt,{className:"text-lg",children:"Current Overview"})}),l.jsxs(qe,{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Entries"}),l.jsx(zs,{variant:"secondary",children:e.length})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Pain Level"}),l.jsx(zs,{variant:"outline",children:e.length>0?Gt(e.reduce((h,y)=>h+y.baselineData.pain,0)/e.length,1):"0"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Entry"}),l.jsx("span",{className:"text-sm",children:new Date(e[e.length-1]?.timestamp||"").toLocaleDateString()})]})]})]});case"quick-actions":return l.jsxs(ze,{children:[l.jsx(mt,{children:l.jsx(gt,{className:"text-lg",children:"Quick Actions"})}),l.jsx(qe,{className:"space-y-3",children:l.jsx(dt,{variant:"outline",className:"w-full justify-start",onClick:i,leftIcon:l.jsx(Ku,{className:"h-4 w-4"}),children:"Help & Tutorial"})})]});case"intelligent-triggers":return l.jsx(qa,{title:"Intelligent Triggers",description:"Smart notifications based on your pain patterns and goals",importance:"normal",canCollapse:!0,children:l.jsx(mD,{})});case"goal-tracking":return l.jsx(qa,{title:"Goal Tracking",description:"Set and track your health and wellness goals",importance:"normal",canCollapse:!0,children:l.jsx(LD,{onOpenManager:r||(()=>{console.log("Open goal manager")})})});default:return l.jsx(ze,{children:l.jsx(qe,{className:"p-6 text-center text-muted-foreground",children:l.jsxs("p",{children:['Widget type "',n.type,'" not implemented']})})})}},m={small:"col-span-1",medium:"col-span-1 md:col-span-2",large:"col-span-1 md:col-span-2 lg:col-span-3",full:"col-span-1 md:col-span-2 lg:col-span-3 xl:col-span-4"};return l.jsx("div",{className:yt("transition-all duration-200",u==="grid"&&m[n.size],d&&"opacity-50 scale-95","cursor-move"),draggable:!0,onDragStart:a,onDragEnd:o,onDragOver:h=>h.preventDefault(),onDrop:c,children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("div",{className:"bg-background/80 backdrop-blur-sm rounded p-1",children:l.jsx(Mk,{className:"h-4 w-4 text-muted-foreground"})})}),l.jsx("div",{className:"group",children:f()})]})})}function ED({entries:n,onAddEntry:e,onStartWalkthrough:t,onOpenGoalManager:s,className:i}){const{layout:r,isLoaded:a,toggleWidget:o,resetLayout:c,updateLayoutSettings:d}=DD(),[u,f]=X.useState(!1),[m,h]=X.useState(null),[y,x]=X.useState(n),{savedFilters:w,saveFilter:S,deleteFilter:j}=MD();X.useEffect(()=>{x(n)},[n]);const C=r.widgets.filter(_=>_.visible).sort((_,T)=>_.position-T.position),L=_=>{h(_)},P=()=>{h(null)},O=_=>{if(!m||m===_)return;const T=r.widgets.findIndex(D=>D.id===m),W=r.widgets.findIndex(D=>D.id===_);if(T!==-1&&W!==-1){const D=Array.from(r.widgets),[Q]=D.splice(T,1);D.splice(W,0,Q);const ne=D.map((ae,F)=>({...ae,position:F}));d({widgets:ne})}},k=X.useCallback(_=>{x(_)},[]),A=X.useCallback((_,T)=>{S(_,T)},[S]),M=X.useCallback(_=>{console.log("Loading filter:",_.name)},[]),V=X.useCallback(_=>{j(_)},[j]);return a?l.jsxs("div",{className:yt("space-y-6",i),children:[l.jsx(PD,{entries:n,onFiltersChange:k,savedFilters:w,onSaveFilter:A,onLoadFilter:M,onDeleteFilter:V}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Custom Dashboard"}),l.jsxs("p",{className:"text-muted-foreground",children:["Your personalized pain tracking dashboard",y.length!==n.length&&l.jsxs("span",{className:"ml-2 text-sm",children:["(showing ",y.length," of ",n.length," entries)"]})]})]}),l.jsx(dt,{variant:"outline",onClick:()=>f(!0),leftIcon:l.jsx(ll,{className:"h-4 w-4"}),children:"Customize"})]}),l.jsx("div",{className:yt("grid gap-6",r.layout==="grid"&&(r.columns===1?"grid-cols-1":r.columns===2?"grid-cols-1 md:grid-cols-2":r.columns===3?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":r.columns===4?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),r.layout==="masonry"&&"columns-1 md:columns-2 lg:columns-3",r.layout==="list"&&"grid-cols-1"),children:C.map(_=>l.jsx(ID,{widget:_,entries:y,allEntries:n,onAddEntry:e,onStartWalkthrough:t,onOpenGoalManager:s,onDragStart:()=>L(_.id),onDragEnd:P,onDrop:()=>O(_.id),isDragging:m===_.id,layout:r.layout},_.id))}),l.jsx(TD,{isOpen:u,onClose:()=>f(!1),layout:r,onToggleWidget:o,onResetLayout:c,onUpdateLayoutSettings:d})]}):l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}var $c=n=>n.type==="checkbox",Ya=n=>n instanceof Date,js=n=>n==null;const yw=n=>typeof n=="object";var zn=n=>!js(n)&&!Array.isArray(n)&&yw(n)&&!Ya(n),OD=n=>zn(n)&&n.target?$c(n.target)?n.target.checked:n.target.value:n,RD=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,FD=(n,e)=>n.has(RD(e)),zD=n=>{const e=n.constructor&&n.constructor.prototype;return zn(e)&&e.hasOwnProperty("isPrototypeOf")},Em=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function es(n){let e;const t=Array.isArray(n),s=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(Em&&(n instanceof Blob||s))&&(t||zn(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!zD(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=es(n[i]));else return n;return e}var yh=n=>/^\w*$/.test(n),Fn=n=>n===void 0,Om=n=>Array.isArray(n)?n.filter(Boolean):[],Rm=n=>Om(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Ye=(n,e,t)=>{if(!e||!zn(n))return t;const s=(yh(e)?[e]:Rm(e)).reduce((i,r)=>js(i)?i:i[r],n);return Fn(s)||s===n?Fn(n[e])?t:n[e]:s},Yi=n=>typeof n=="boolean",Qt=(n,e,t)=>{let s=-1;const i=yh(e)?[e]:Rm(e),r=i.length,a=r-1;for(;++s<r;){const o=i[s];let c=t;if(s!==a){const d=n[o];c=zn(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;n[o]=c,n=n[o]}};const ox={BLUR:"blur",FOCUS_OUT:"focusout"},ki={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},br={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},BD=it.createContext(null);BD.displayName="HookFormContext";var $D=(n,e,t,s=!0)=>{const i={defaultValues:e._defaultValues};for(const r in n)Object.defineProperty(i,r,{get:()=>{const a=r;return e._proxyFormState[a]!==ki.all&&(e._proxyFormState[a]=!s||ki.all),n[a]}});return i};const WD=typeof window<"u"?it.useLayoutEffect:it.useEffect;var Qs=n=>typeof n=="string",qD=(n,e,t,s,i)=>Qs(n)?(s&&e.watch.add(n),Ye(t,n,i)):Array.isArray(n)?n.map(r=>(s&&e.watch.add(r),Ye(t,r))):(s&&(e.watchAll=!0),t),Gp=n=>js(n)||!yw(n);function na(n,e,t=new WeakSet){if(Gp(n)||Gp(e))return n===e;if(Ya(n)&&Ya(e))return n.getTime()===e.getTime();const s=Object.keys(n),i=Object.keys(e);if(s.length!==i.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const r of s){const a=n[r];if(!i.includes(r))return!1;if(r!=="ref"){const o=e[r];if(Ya(a)&&Ya(o)||zn(a)&&zn(o)||Array.isArray(a)&&Array.isArray(o)?!na(a,o,t):a!==o)return!1}}return!0}var Fm=(n,e,t,s,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[s]:i||!0}}:{},mc=n=>Array.isArray(n)?n:[n],lx=()=>{let n=[];return{get observers(){return n},next:i=>{for(const r of n)r.next&&r.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(r=>r!==i)}}),unsubscribe:()=>{n=[]}}};function xw(n,e){const t={};for(const s in n)if(n.hasOwnProperty(s)){const i=n[s],r=e[s];if(i&&zn(i)&&r){const a=xw(i,r);zn(a)&&(t[s]=a)}else n[s]&&(t[s]=r)}return t}var Os=n=>zn(n)&&!Object.keys(n).length,zm=n=>n.type==="file",Ni=n=>typeof n=="function",Ou=n=>{if(!Em)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},vw=n=>n.type==="select-multiple",Bm=n=>n.type==="radio",UD=n=>Bm(n)||$c(n),rp=n=>Ou(n)&&n.isConnected;function VD(n,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)n=Fn(n)?s++:n[e[s++]];return n}function HD(n){for(const e in n)if(n.hasOwnProperty(e)&&!Fn(n[e]))return!1;return!0}function Rn(n,e){const t=Array.isArray(e)?e:yh(e)?[e]:Rm(e),s=t.length===1?n:VD(n,t),i=t.length-1,r=t[i];return s&&delete s[r],i!==0&&(zn(s)&&Os(s)||Array.isArray(s)&&HD(s))&&Rn(n,t.slice(0,-1)),n}var GD=n=>{for(const e in n)if(Ni(n[e]))return!0;return!1};function bw(n){return Array.isArray(n)||zn(n)&&!GD(n)}function Yp(n,e={}){for(const t in n)bw(n[t])?(e[t]=Array.isArray(n[t])?[]:{},Yp(n[t],e[t])):js(n[t])||(e[t]=!0);return e}function $o(n,e,t){t||(t=Yp(e));for(const s in n)bw(n[s])?Fn(e)||Gp(t[s])?t[s]=Yp(n[s],Array.isArray(n[s])?[]:{}):$o(n[s],js(e)?{}:e[s],t[s]):t[s]=!na(n[s],e[s]);return t}const cx={value:!1,isValid:!1},dx={value:!0,isValid:!0};var ww=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Fn(n[0].attributes.value)?Fn(n[0].value)||n[0].value===""?dx:{value:n[0].value,isValid:!0}:dx:cx}return cx},Sw=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>Fn(n)?n:e?n===""?NaN:n&&+n:t&&Qs(n)?new Date(n):s?s(n):n;const ux={isValid:!1,value:null};var kw=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ux):ux;function hx(n){const e=n.ref;return zm(e)?e.files:Bm(e)?kw(n.refs).value:vw(e)?[...e.selectedOptions].map(({value:t})=>t):$c(e)?ww(n.refs).value:Sw(Fn(e.value)?n.ref.value:e.value,n)}var YD=(n,e,t,s)=>{const i={};for(const r of n){const a=Ye(e,r);a&&Qt(i,r,a._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:s}},Ru=n=>n instanceof RegExp,Xl=n=>Fn(n)?n:Ru(n)?n.source:zn(n)?Ru(n.value)?n.value.source:n.value:n,fx=n=>({isOnSubmit:!n||n===ki.onSubmit,isOnBlur:n===ki.onBlur,isOnChange:n===ki.onChange,isOnAll:n===ki.all,isOnTouch:n===ki.onTouched});const px="AsyncFunction";var ZD=n=>!!n&&!!n.validate&&!!(Ni(n.validate)&&n.validate.constructor.name===px||zn(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===px)),KD=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),mx=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const gc=(n,e,t,s)=>{for(const i of t||Object.keys(n)){const r=Ye(n,i);if(r){const{_f:a,...o}=r;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!s)return!0;if(a.ref&&e(a.ref,a.name)&&!s)return!0;if(gc(o,e))break}else if(zn(o)&&gc(o,e))break}}};function gx(n,e,t){const s=Ye(n,t);if(s||yh(t))return{error:s,name:t};const i=t.split(".");for(;i.length;){const r=i.join("."),a=Ye(e,r),o=Ye(n,r);if(a&&!Array.isArray(a)&&t!==r)return{name:t};if(o&&o.type)return{name:r,error:o};if(o&&o.root&&o.root.type)return{name:`${r}.root`,error:o.root};i.pop()}return{name:t}}var JD=(n,e,t,s)=>{t(n);const{name:i,...r}=n;return Os(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(a=>e[a]===(!s||ki.all))},QD=(n,e,t)=>!n||!e||n===e||mc(n).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),XD=(n,e,t,s,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?s.isOnBlur:i.isOnBlur)?!n:(t?s.isOnChange:i.isOnChange)?n:!0,eT=(n,e)=>!Om(Ye(n,e)).length&&Rn(n,e),tT=(n,e,t)=>{const s=mc(Ye(n,t));return Qt(s,"root",e[t]),Qt(n,t,s),n};function yx(n,e,t="validate"){if(Qs(n)||Array.isArray(n)&&n.every(Qs)||Yi(n)&&!n)return{type:t,message:Qs(n)?n:"",ref:e}}var Eo=n=>zn(n)&&!Ru(n)?n:{value:n,message:""},xx=async(n,e,t,s,i,r)=>{const{ref:a,refs:o,required:c,maxLength:d,minLength:u,min:f,max:m,pattern:h,validate:y,name:x,valueAsNumber:w,mount:S}=n._f,j=Ye(t,x);if(!S||e.has(x))return{};const C=o?o[0]:a,L=T=>{i&&C.reportValidity&&(C.setCustomValidity(Yi(T)?"":T||""),C.reportValidity())},P={},O=Bm(a),k=$c(a),A=O||k,M=(w||zm(a))&&Fn(a.value)&&Fn(j)||Ou(a)&&a.value===""||j===""||Array.isArray(j)&&!j.length,V=Fm.bind(null,x,s,P),_=(T,W,D,Q=br.maxLength,ne=br.minLength)=>{const ae=T?W:D;P[x]={type:T?Q:ne,message:ae,ref:a,...V(T?Q:ne,ae)}};if(r?!Array.isArray(j)||!j.length:c&&(!A&&(M||js(j))||Yi(j)&&!j||k&&!ww(o).isValid||O&&!kw(o).isValid)){const{value:T,message:W}=Qs(c)?{value:!!c,message:c}:Eo(c);if(T&&(P[x]={type:br.required,message:W,ref:C,...V(br.required,W)},!s))return L(W),P}if(!M&&(!js(f)||!js(m))){let T,W;const D=Eo(m),Q=Eo(f);if(!js(j)&&!isNaN(j)){const ne=a.valueAsNumber||j&&+j;js(D.value)||(T=ne>D.value),js(Q.value)||(W=ne<Q.value)}else{const ne=a.valueAsDate||new Date(j),ae=Se=>new Date(new Date().toDateString()+" "+Se),F=a.type=="time",ce=a.type=="week";Qs(D.value)&&j&&(T=F?ae(j)>ae(D.value):ce?j>D.value:ne>new Date(D.value)),Qs(Q.value)&&j&&(W=F?ae(j)<ae(Q.value):ce?j<Q.value:ne<new Date(Q.value))}if((T||W)&&(_(!!T,D.message,Q.message,br.max,br.min),!s))return L(P[x].message),P}if((d||u)&&!M&&(Qs(j)||r&&Array.isArray(j))){const T=Eo(d),W=Eo(u),D=!js(T.value)&&j.length>+T.value,Q=!js(W.value)&&j.length<+W.value;if((D||Q)&&(_(D,T.message,W.message),!s))return L(P[x].message),P}if(h&&!M&&Qs(j)){const{value:T,message:W}=Eo(h);if(Ru(T)&&!j.match(T)&&(P[x]={type:br.pattern,message:W,ref:a,...V(br.pattern,W)},!s))return L(W),P}if(y){if(Ni(y)){const T=await y(j,t),W=yx(T,C);if(W&&(P[x]={...W,...V(br.validate,W.message)},!s))return L(W.message),P}else if(zn(y)){let T={};for(const W in y){if(!Os(T)&&!s)break;const D=yx(await y[W](j,t),C,W);D&&(T={...D,...V(W,D.message)},L(D.message),s&&(P[x]=T))}if(!Os(T)&&(P[x]={ref:C,...T},!s))return P}}return L(!0),P};const nT={mode:ki.onSubmit,reValidateMode:ki.onChange,shouldFocusError:!0};function sT(n={}){let e={...nT,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ni(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},i=zn(e.defaultValues)||zn(e.values)?es(e.defaultValues||e.values)||{}:{},r=e.shouldUnregister?{}:es(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:lx(),state:lx()},h=e.criteriaMode===ki.all,y=K=>ee=>{clearTimeout(d),d=setTimeout(K,ee)},x=async K=>{if(!e.disabled&&(u.isValid||f.isValid||K)){const ee=e.resolver?Os((await k()).errors):await M(s,!0);ee!==t.isValid&&m.state.next({isValid:ee})}},w=(K,ee)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((K||Array.from(o.mount)).forEach(he=>{he&&(ee?Qt(t.validatingFields,he,ee):Rn(t.validatingFields,he))}),m.state.next({validatingFields:t.validatingFields,isValidating:!Os(t.validatingFields)}))},S=(K,ee=[],he,ke,Ce=!0,ve=!0)=>{if(ke&&he&&!e.disabled){if(a.action=!0,ve&&Array.isArray(Ye(s,K))){const De=he(Ye(s,K),ke.argA,ke.argB);Ce&&Qt(s,K,De)}if(ve&&Array.isArray(Ye(t.errors,K))){const De=he(Ye(t.errors,K),ke.argA,ke.argB);Ce&&Qt(t.errors,K,De),eT(t.errors,K)}if((u.touchedFields||f.touchedFields)&&ve&&Array.isArray(Ye(t.touchedFields,K))){const De=he(Ye(t.touchedFields,K),ke.argA,ke.argB);Ce&&Qt(t.touchedFields,K,De)}(u.dirtyFields||f.dirtyFields)&&(t.dirtyFields=$o(i,r)),m.state.next({name:K,isDirty:_(K,ee),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Qt(r,K,ee)},j=(K,ee)=>{Qt(t.errors,K,ee),m.state.next({errors:t.errors})},C=K=>{t.errors=K,m.state.next({errors:t.errors,isValid:!1})},L=(K,ee,he,ke)=>{const Ce=Ye(s,K);if(Ce){const ve=Ye(r,K,Fn(he)?Ye(i,K):he);Fn(ve)||ke&&ke.defaultChecked||ee?Qt(r,K,ee?ve:hx(Ce._f)):D(K,ve),a.mount&&x()}},P=(K,ee,he,ke,Ce)=>{let ve=!1,De=!1;const nt={name:K};if(!e.disabled){if(!he||ke){(u.isDirty||f.isDirty)&&(De=t.isDirty,t.isDirty=nt.isDirty=_(),ve=De!==nt.isDirty);const Be=na(Ye(i,K),ee);De=!!Ye(t.dirtyFields,K),Be?Rn(t.dirtyFields,K):Qt(t.dirtyFields,K,!0),nt.dirtyFields=t.dirtyFields,ve=ve||(u.dirtyFields||f.dirtyFields)&&De!==!Be}if(he){const Be=Ye(t.touchedFields,K);Be||(Qt(t.touchedFields,K,he),nt.touchedFields=t.touchedFields,ve=ve||(u.touchedFields||f.touchedFields)&&Be!==he)}ve&&Ce&&m.state.next(nt)}return ve?nt:{}},O=(K,ee,he,ke)=>{const Ce=Ye(t.errors,K),ve=(u.isValid||f.isValid)&&Yi(ee)&&t.isValid!==ee;if(e.delayError&&he?(c=y(()=>j(K,he)),c(e.delayError)):(clearTimeout(d),c=null,he?Qt(t.errors,K,he):Rn(t.errors,K)),(he?!na(Ce,he):Ce)||!Os(ke)||ve){const De={...ke,...ve&&Yi(ee)?{isValid:ee}:{},errors:t.errors,name:K};t={...t,...De},m.state.next(De)}},k=async K=>{w(K,!0);const ee=await e.resolver(r,e.context,YD(K||o.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return w(K),ee},A=async K=>{const{errors:ee}=await k(K);if(K)for(const he of K){const ke=Ye(ee,he);ke?Qt(t.errors,he,ke):Rn(t.errors,he)}else t.errors=ee;return ee},M=async(K,ee,he={valid:!0})=>{for(const ke in K){const Ce=K[ke];if(Ce){const{_f:ve,...De}=Ce;if(ve){const nt=o.array.has(ve.name),Be=Ce._f&&ZD(Ce._f);Be&&u.validatingFields&&w([ve.name],!0);const We=await xx(Ce,o.disabled,r,h,e.shouldUseNativeValidation&&!ee,nt);if(Be&&u.validatingFields&&w([ve.name]),We[ve.name]&&(he.valid=!1,ee))break;!ee&&(Ye(We,ve.name)?nt?tT(t.errors,We,ve.name):Qt(t.errors,ve.name,We[ve.name]):Rn(t.errors,ve.name))}!Os(De)&&await M(De,ee,he)}}return he.valid},V=()=>{for(const K of o.unMount){const ee=Ye(s,K);ee&&(ee._f.refs?ee._f.refs.every(he=>!rp(he)):!rp(ee._f.ref))&&le(K)}o.unMount=new Set},_=(K,ee)=>!e.disabled&&(K&&ee&&Qt(r,K,ee),!na(Se(),i)),T=(K,ee,he)=>qD(K,o,{...a.mount?r:Fn(ee)?i:Qs(K)?{[K]:ee}:ee},he,ee),W=K=>Om(Ye(a.mount?r:i,K,e.shouldUnregister?Ye(i,K,[]):[])),D=(K,ee,he={})=>{const ke=Ye(s,K);let Ce=ee;if(ke){const ve=ke._f;ve&&(!ve.disabled&&Qt(r,K,Sw(ee,ve)),Ce=Ou(ve.ref)&&js(ee)?"":ee,vw(ve.ref)?[...ve.ref.options].forEach(De=>De.selected=Ce.includes(De.value)):ve.refs?$c(ve.ref)?ve.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(Ce)?De.checked=!!Ce.find(nt=>nt===De.value):De.checked=Ce===De.value||!!Ce)}):ve.refs.forEach(De=>De.checked=De.value===Ce):zm(ve.ref)?ve.ref.value="":(ve.ref.value=Ce,ve.ref.type||m.state.next({name:K,values:es(r)})))}(he.shouldDirty||he.shouldTouch)&&P(K,Ce,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&ce(K)},Q=(K,ee,he)=>{for(const ke in ee){if(!ee.hasOwnProperty(ke))return;const Ce=ee[ke],ve=K+"."+ke,De=Ye(s,ve);(o.array.has(K)||zn(Ce)||De&&!De._f)&&!Ya(Ce)?Q(ve,Ce,he):D(ve,Ce,he)}},ne=(K,ee,he={})=>{const ke=Ye(s,K),Ce=o.array.has(K),ve=es(ee);Qt(r,K,ve),Ce?(m.array.next({name:K,values:es(r)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&he.shouldDirty&&m.state.next({name:K,dirtyFields:$o(i,r),isDirty:_(K,ve)})):ke&&!ke._f&&!js(ve)?Q(K,ve,he):D(K,ve,he),mx(K,o)&&m.state.next({...t,name:K}),m.state.next({name:a.mount?K:void 0,values:es(r)})},ae=async K=>{a.mount=!0;const ee=K.target;let he=ee.name,ke=!0;const Ce=Ye(s,he),ve=Be=>{ke=Number.isNaN(Be)||Ya(Be)&&isNaN(Be.getTime())||na(Be,Ye(r,he,Be))},De=fx(e.mode),nt=fx(e.reValidateMode);if(Ce){let Be,We;const lt=ee.type?hx(Ce._f):OD(K),Ve=K.type===ox.BLUR||K.type===ox.FOCUS_OUT,Yt=!KD(Ce._f)&&!e.resolver&&!Ye(t.errors,he)&&!Ce._f.deps||XD(Ve,Ye(t.touchedFields,he),t.isSubmitted,nt,De),It=mx(he,o,Ve);Qt(r,he,lt),Ve?(!ee||!ee.readOnly)&&(Ce._f.onBlur&&Ce._f.onBlur(K),c&&c(0)):Ce._f.onChange&&Ce._f.onChange(K);const Je=P(he,lt,Ve),xt=!Os(Je)||It;if(!Ve&&m.state.next({name:he,type:K.type,values:es(r)}),Yt)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?Ve&&x():Ve||x()),xt&&m.state.next({name:he,...It?{}:Je});if(!Ve&&It&&m.state.next({...t}),e.resolver){const{errors:$t}=await k([he]);if(ve(lt),ke){const ct=gx(t.errors,s,he),Mt=gx($t,s,ct.name||he);Be=Mt.error,he=Mt.name,We=Os($t)}}else w([he],!0),Be=(await xx(Ce,o.disabled,r,h,e.shouldUseNativeValidation))[he],w([he]),ve(lt),ke&&(Be?We=!1:(u.isValid||f.isValid)&&(We=await M(s,!0)));ke&&(Ce._f.deps&&(!Array.isArray(Ce._f.deps)||Ce._f.deps.length>0)&&ce(Ce._f.deps),O(he,We,Be,Je))}},F=(K,ee)=>{if(Ye(t.errors,ee)&&K.focus)return K.focus(),1},ce=async(K,ee={})=>{let he,ke;const Ce=mc(K);if(e.resolver){const ve=await A(Fn(K)?K:Ce);he=Os(ve),ke=K?!Ce.some(De=>Ye(ve,De)):he}else K?(ke=(await Promise.all(Ce.map(async ve=>{const De=Ye(s,ve);return await M(De&&De._f?{[ve]:De}:De)}))).every(Boolean),!(!ke&&!t.isValid)&&x()):ke=he=await M(s);return m.state.next({...!Qs(K)||(u.isValid||f.isValid)&&he!==t.isValid?{}:{name:K},...e.resolver||!K?{isValid:he}:{},errors:t.errors}),ee.shouldFocus&&!ke&&gc(s,F,K?Ce:o.mount),ke},Se=(K,ee)=>{let he={...a.mount?r:i};return ee&&(he=xw(ee.dirtyFields?t.dirtyFields:t.touchedFields,he)),Fn(K)?he:Qs(K)?Ye(he,K):K.map(ke=>Ye(he,ke))},ge=(K,ee)=>({invalid:!!Ye((ee||t).errors,K),isDirty:!!Ye((ee||t).dirtyFields,K),error:Ye((ee||t).errors,K),isValidating:!!Ye(t.validatingFields,K),isTouched:!!Ye((ee||t).touchedFields,K)}),R=K=>{K&&mc(K).forEach(ee=>Rn(t.errors,ee)),m.state.next({errors:K?t.errors:{}})},U=(K,ee,he)=>{const ke=(Ye(s,K,{_f:{}})._f||{}).ref,Ce=Ye(t.errors,K)||{},{ref:ve,message:De,type:nt,...Be}=Ce;Qt(t.errors,K,{...Be,...ee,ref:ke}),m.state.next({name:K,errors:t.errors,isValid:!1}),he&&he.shouldFocus&&ke&&ke.focus&&ke.focus()},H=(K,ee)=>Ni(K)?m.state.subscribe({next:he=>"values"in he&&K(T(void 0,ee),he)}):T(K,ee,!0),te=K=>m.state.subscribe({next:ee=>{QD(K.name,ee.name,K.exact)&&JD(ee,K.formState||u,wt,K.reRenderRoot)&&K.callback({values:{...r},...t,...ee,defaultValues:i})}}).unsubscribe,re=K=>(a.mount=!0,f={...f,...K.formState},te({...K,formState:f})),le=(K,ee={})=>{for(const he of K?mc(K):o.mount)o.mount.delete(he),o.array.delete(he),ee.keepValue||(Rn(s,he),Rn(r,he)),!ee.keepError&&Rn(t.errors,he),!ee.keepDirty&&Rn(t.dirtyFields,he),!ee.keepTouched&&Rn(t.touchedFields,he),!ee.keepIsValidating&&Rn(t.validatingFields,he),!e.shouldUnregister&&!ee.keepDefaultValue&&Rn(i,he);m.state.next({values:es(r)}),m.state.next({...t,...ee.keepDirty?{isDirty:_()}:{}}),!ee.keepIsValid&&x()},xe=({disabled:K,name:ee})=>{(Yi(K)&&a.mount||K||o.disabled.has(ee))&&(K?o.disabled.add(ee):o.disabled.delete(ee))},me=(K,ee={})=>{let he=Ye(s,K);const ke=Yi(ee.disabled)||Yi(e.disabled);return Qt(s,K,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:K}},name:K,mount:!0,...ee}}),o.mount.add(K),he?xe({disabled:Yi(ee.disabled)?ee.disabled:e.disabled,name:K}):L(K,!0,ee.value),{...ke?{disabled:ee.disabled||e.disabled}:{},...e.progressive?{required:!!ee.required,min:Xl(ee.min),max:Xl(ee.max),minLength:Xl(ee.minLength),maxLength:Xl(ee.maxLength),pattern:Xl(ee.pattern)}:{},name:K,onChange:ae,onBlur:ae,ref:Ce=>{if(Ce){me(K,ee),he=Ye(s,K);const ve=Fn(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,De=UD(ve),nt=he._f.refs||[];if(De?nt.find(Be=>Be===ve):ve===he._f.ref)return;Qt(s,K,{_f:{...he._f,...De?{refs:[...nt.filter(rp),ve,...Array.isArray(Ye(i,K))?[{}]:[]],ref:{type:ve.type,name:K}}:{ref:ve}}}),L(K,!1,void 0,ve)}else he=Ye(s,K,{}),he._f&&(he._f.mount=!1),(e.shouldUnregister||ee.shouldUnregister)&&!(FD(o.array,K)&&a.action)&&o.unMount.add(K)}}},we=()=>e.shouldFocusError&&gc(s,F,o.mount),Me=K=>{Yi(K)&&(m.state.next({disabled:K}),gc(s,(ee,he)=>{const ke=Ye(s,he);ke&&(ee.disabled=ke._f.disabled||K,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(Ce=>{Ce.disabled=ke._f.disabled||K}))},0,!1))},Ee=(K,ee)=>async he=>{let ke;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let Ce=es(r);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:ve,values:De}=await k();t.errors=ve,Ce=es(De)}else await M(s);if(o.disabled.size)for(const ve of o.disabled)Rn(Ce,ve);if(Rn(t.errors,"root"),Os(t.errors)){m.state.next({errors:{}});try{await K(Ce,he)}catch(ve){ke=ve}}else ee&&await ee({...t.errors},he),we(),setTimeout(we);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Os(t.errors)&&!ke,submitCount:t.submitCount+1,errors:t.errors}),ke)throw ke},Oe=(K,ee={})=>{Ye(s,K)&&(Fn(ee.defaultValue)?ne(K,es(Ye(i,K))):(ne(K,ee.defaultValue),Qt(i,K,es(ee.defaultValue))),ee.keepTouched||Rn(t.touchedFields,K),ee.keepDirty||(Rn(t.dirtyFields,K),t.isDirty=ee.defaultValue?_(K,es(Ye(i,K))):_()),ee.keepError||(Rn(t.errors,K),u.isValid&&x()),m.state.next({...t}))},ye=(K,ee={})=>{const he=K?es(K):i,ke=es(he),Ce=Os(K),ve=Ce?i:ke;if(ee.keepDefaultValues||(i=he),!ee.keepValues){if(ee.keepDirtyValues){const De=new Set([...o.mount,...Object.keys($o(i,r))]);for(const nt of Array.from(De))Ye(t.dirtyFields,nt)?Qt(ve,nt,Ye(r,nt)):ne(nt,Ye(ve,nt))}else{if(Em&&Fn(K))for(const De of o.mount){const nt=Ye(s,De);if(nt&&nt._f){const Be=Array.isArray(nt._f.refs)?nt._f.refs[0]:nt._f.ref;if(Ou(Be)){const We=Be.closest("form");if(We){We.reset();break}}}}if(ee.keepFieldsRef)for(const De of o.mount)ne(De,Ye(ve,De));else s={}}r=e.shouldUnregister?ee.keepDefaultValues?es(i):{}:es(ve),m.array.next({values:{...ve}}),m.state.next({values:{...ve}})}o={mount:ee.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:ee.keepSubmitCount?t.submitCount:0,isDirty:Ce?!1:ee.keepDirty?t.isDirty:!!(ee.keepDefaultValues&&!na(K,i)),isSubmitted:ee.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Ce?{}:ee.keepDirtyValues?ee.keepDefaultValues&&r?$o(i,r):t.dirtyFields:ee.keepDefaultValues&&K?$o(i,K):ee.keepDirty?t.dirtyFields:{},touchedFields:ee.keepTouched?t.touchedFields:{},errors:ee.keepErrors?t.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},J=(K,ee)=>ye(Ni(K)?K(r):K,ee),Pt=(K,ee={})=>{const he=Ye(s,K),ke=he&&he._f;if(ke){const Ce=ke.refs?ke.refs[0]:ke.ref;Ce.focus&&(Ce.focus(),ee.shouldSelect&&Ni(Ce.select)&&Ce.select())}},wt=K=>{t={...t,...K}},Ie={control:{register:me,unregister:le,getFieldState:ge,handleSubmit:Ee,setError:U,_subscribe:te,_runSchema:k,_focusError:we,_getWatch:T,_getDirty:_,_setValid:x,_setFieldArray:S,_setDisabledField:xe,_setErrors:C,_getFieldArray:W,_reset:ye,_resetDefaultValues:()=>Ni(e.defaultValues)&&e.defaultValues().then(K=>{J(K,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:Me,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return r},get _state(){return a},set _state(K){a=K},get _defaultValues(){return i},get _names(){return o},set _names(K){o=K},get _formState(){return t},get _options(){return e},set _options(K){e={...e,...K}}},subscribe:re,trigger:ce,register:me,handleSubmit:Ee,watch:H,setValue:ne,getValues:Se,reset:J,resetField:Oe,clearErrors:R,unregister:le,setError:U,setFocus:Pt,getFieldState:ge};return{...Ie,formControl:Ie}}function iT(n={}){const e=it.useRef(void 0),t=it.useRef(void 0),[s,i]=it.useState({isDirty:!1,isValidating:!1,isLoading:Ni(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Ni(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:s},n.defaultValues&&!Ni(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:a,...o}=sT(n);e.current={...o,formState:s}}const r=e.current.control;return r._options=n,WD(()=>{const a=r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),r._formState.isReady=!0,a},[r]),it.useEffect(()=>r._disableForm(n.disabled),[r,n.disabled]),it.useEffect(()=>{n.mode&&(r._options.mode=n.mode),n.reValidateMode&&(r._options.reValidateMode=n.reValidateMode)},[r,n.mode,n.reValidateMode]),it.useEffect(()=>{n.errors&&(r._setErrors(n.errors),r._focusError())},[r,n.errors]),it.useEffect(()=>{n.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,n.shouldUnregister]),it.useEffect(()=>{if(r._proxyFormState.isDirty){const a=r._getDirty();a!==s.isDirty&&r._subjects.state.next({isDirty:a})}},[r,s.isDirty]),it.useEffect(()=>{n.values&&!na(n.values,t.current)?(r._reset(n.values,{keepFieldsRef:!0,...r._options.resetOptions}),t.current=n.values,i(a=>({...a}))):r._resetDefaultValues()},[r,n.values]),it.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),e.current.formState=$D(s,r),e.current}const vx=(n,e,t)=>{if(n&&"reportValidity"in n){const s=Ye(t,e);n.setCustomValidity(s&&s.message||""),n.reportValidity()}},Zp=(n,e)=>{for(const t in e.fields){const s=e.fields[t];s&&s.ref&&"reportValidity"in s.ref?vx(s.ref,t,n):s&&s.refs&&s.refs.forEach(i=>vx(i,t,n))}},bx=(n,e)=>{e.shouldUseNativeValidation&&Zp(n,e);const t={};for(const s in n){const i=Ye(e.fields,s),r=Object.assign(n[s]||{},{ref:i&&i.ref});if(rT(e.names||Object.keys(n),s)){const a=Object.assign({},Ye(t,s));Qt(a,"root",r),Qt(t,s,a)}else Qt(t,s,r)}return t},rT=(n,e)=>{const t=wx(e);return n.some(s=>wx(s).match(`^${t}\\.\\d+`))};function wx(n){return n.replace(/\]|\[/g,"")}function Ae(n,e,t){function s(o,c){var d;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(d=o._zod).traits??(d.traits=new Set),o._zod.traits.add(n),e(o,c);for(const u in a.prototype)u in o||Object.defineProperty(o,u,{value:a.prototype[u].bind(o)});o._zod.constr=a,o._zod.def=c}const i=t?.Parent??Object;class r extends i{}Object.defineProperty(r,"name",{value:n});function a(o){var c;const d=t?.Parent?new r:this;s(d,o),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>t?.Parent&&o instanceof t.Parent?!0:o?._zod?.traits?.has(n)}),Object.defineProperty(a,"name",{value:n}),a}class sl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Nw extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const _w={};function so(n){return _w}function aT(n){const e=Object.values(n).filter(s=>typeof s=="number");return Object.entries(n).filter(([s,i])=>e.indexOf(+s)===-1).map(([s,i])=>i)}function Kp(n,e){return typeof e=="bigint"?e.toString():e}function $m(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function Wm(n){return n==null}function qm(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function oT(n,e){const t=(n.toString().split(".")[1]||"").length,s=e.toString();let i=(s.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(s)){const c=s.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}const r=t>i?t:i,a=Number.parseInt(n.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return a%o/10**r}const Sx=Symbol("evaluating");function rn(n,e,t){let s;Object.defineProperty(n,e,{get(){if(s!==Sx)return s===void 0&&(s=Sx,s=t()),s},set(i){Object.defineProperty(n,e,{value:i})},configurable:!0})}function lT(n){return Object.create(Object.getPrototypeOf(n),Object.getOwnPropertyDescriptors(n))}function xa(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function hl(...n){const e={};for(const t of n){const s=Object.getOwnPropertyDescriptors(t);Object.assign(e,s)}return Object.defineProperties({},e)}function kx(n){return JSON.stringify(n)}const jw="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Fu(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const cT=$m(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function Ic(n){if(Fu(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(Fu(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function Aw(n){return Ic(n)?{...n}:Array.isArray(n)?[...n]:n}const dT=new Set(["string","number","symbol"]);function xh(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function va(n,e,t){const s=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(s._zod.parent=n),s}function ot(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function uT(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const hT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function fT(n,e){const t=n._zod.def,s=hl(n._zod.def,{get shape(){const i={};for(const r in e){if(!(r in t.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&(i[r]=t.shape[r])}return xa(this,"shape",i),i},checks:[]});return va(n,s)}function pT(n,e){const t=n._zod.def,s=hl(n._zod.def,{get shape(){const i={...n._zod.def.shape};for(const r in e){if(!(r in t.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&delete i[r]}return xa(this,"shape",i),i},checks:[]});return va(n,s)}function mT(n,e){if(!Ic(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=hl(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return xa(this,"shape",r),r},checks:[]});return va(n,i)}function gT(n,e){if(!Ic(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t={...n._zod.def,get shape(){const s={...n._zod.def.shape,...e};return xa(this,"shape",s),s},checks:n._zod.def.checks};return va(n,t)}function yT(n,e){const t=hl(n._zod.def,{get shape(){const s={...n._zod.def.shape,...e._zod.def.shape};return xa(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return va(n,t)}function xT(n,e,t){const s=hl(e._zod.def,{get shape(){const i=e._zod.def.shape,r={...i};if(t)for(const a in t){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=n?new n({type:"optional",innerType:i[a]}):i[a])}else for(const a in i)r[a]=n?new n({type:"optional",innerType:i[a]}):i[a];return xa(this,"shape",r),r},checks:[]});return va(e,s)}function vT(n,e,t){const s=hl(e._zod.def,{get shape(){const i=e._zod.def.shape,r={...i};if(t)for(const a in t){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=new n({type:"nonoptional",innerType:i[a]}))}else for(const a in i)r[a]=new n({type:"nonoptional",innerType:i[a]});return xa(this,"shape",r),r},checks:[]});return va(e,s)}function Go(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function Cw(n,e){return e.map(t=>{var s;return(s=t).path??(s.path=[]),t.path.unshift(n),t})}function Zd(n){return typeof n=="string"?n:n?.message}function io(n,e,t){const s={...n,path:n.path??[]};if(!n.message){const i=Zd(n.inst?._zod.def?.error?.(n))??Zd(e?.error?.(n))??Zd(t.customError?.(n))??Zd(t.localeError?.(n))??"Invalid input";s.message=i}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function Um(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Ec(...n){const[e,t,s]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:s}:{...e}}const Lw=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Kp,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},Vm=Ae("$ZodError",Lw),vh=Ae("$ZodError",Lw,{Parent:Error});function bT(n,e=t=>t.message){const t={},s=[];for(const i of n.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}function wT(n,e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(o=>i({issues:o}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const d=a.path[c];c===a.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(a))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return i(n),s}const bh=n=>(e,t,s,i)=>{const r=s?Object.assign(s,{async:!1}):{async:!1},a=e._zod.run({value:t,issues:[]},r);if(a instanceof Promise)throw new sl;if(a.issues.length){const o=new(i?.Err??n)(a.issues.map(c=>io(c,r,so())));throw jw(o,i?.callee),o}return a.value},ST=bh(vh),wh=n=>async(e,t,s,i)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let a=e._zod.run({value:t,issues:[]},r);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new(i?.Err??n)(a.issues.map(c=>io(c,r,so())));throw jw(o,i?.callee),o}return a.value},kT=wh(vh),Sh=n=>(e,t,s)=>{const i=s?{...s,async:!1}:{async:!1},r=e._zod.run({value:t,issues:[]},i);if(r instanceof Promise)throw new sl;return r.issues.length?{success:!1,error:new(n??Vm)(r.issues.map(a=>io(a,i,so())))}:{success:!0,data:r.value}},NT=Sh(vh),kh=n=>async(e,t,s)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let r=e._zod.run({value:t,issues:[]},i);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new n(r.issues.map(a=>io(a,i,so())))}:{success:!0,data:r.value}},_T=kh(vh),jT=n=>(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return bh(n)(e,t,i)},AT=n=>(e,t,s)=>bh(n)(e,t,s),CT=n=>async(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return wh(n)(e,t,i)},LT=n=>async(e,t,s)=>wh(n)(e,t,s),PT=n=>(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Sh(n)(e,t,i)},MT=n=>(e,t,s)=>Sh(n)(e,t,s),DT=n=>async(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return kh(n)(e,t,i)},TT=n=>async(e,t,s)=>kh(n)(e,t,s),IT=/^[cC][^\s-]{8,}$/,ET=/^[0-9a-z]+$/,OT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,RT=/^[0-9a-vA-V]{20}$/,FT=/^[A-Za-z0-9]{27}$/,zT=/^[a-zA-Z0-9_-]{21}$/,BT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,$T=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Nx=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,WT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,qT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function UT(){return new RegExp(qT,"u")}const VT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,GT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,YT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ZT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Pw=/^[A-Za-z0-9_-]*$/,KT=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,JT=/^\+(?:[0-9]){6,14}[0-9]$/,Mw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",QT=new RegExp(`^${Mw}$`);function Dw(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function XT(n){return new RegExp(`^${Dw(n)}$`)}function eI(n){const e=Dw({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${t.join("|")})`;return new RegExp(`^${Mw}T(?:${s})$`)}const tI=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},nI=/^-?\d+$/,sI=/^-?\d+(?:\.\d+)?/,iI=/^[^A-Z]*$/,rI=/^[^a-z]*$/,$s=Ae("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),Tw={number:"number",bigint:"bigint",object:"date"},Iw=Ae("$ZodCheckLessThan",(n,e)=>{$s.init(n,e);const t=Tw[typeof e.value];n._zod.onattach.push(s=>{const i=s._zod.bag,r=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<r&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),n._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:t,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),Ew=Ae("$ZodCheckGreaterThan",(n,e)=>{$s.init(n,e);const t=Tw[typeof e.value];n._zod.onattach.push(s=>{const i=s._zod.bag,r=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>r&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),n._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:t,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),aI=Ae("$ZodCheckMultipleOf",(n,e)=>{$s.init(n,e),n._zod.onattach.push(t=>{var s;(s=t._zod.bag).multipleOf??(s.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):oT(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),oI=Ae("$ZodCheckNumberFormat",(n,e)=>{$s.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),s=t?"int":"number",[i,r]=hT[e.format];n._zod.onattach.push(a=>{const o=a._zod.bag;o.format=e.format,o.minimum=i,o.maximum=r,t&&(o.pattern=nI)}),n._zod.check=a=>{const o=a.value;if(t){if(!Number.isInteger(o)){a.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:o,inst:n});return}if(!Number.isSafeInteger(o)){o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!e.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!e.abort});return}}o<i&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:n,continue:!e.abort}),o>r&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:r,inst:n})}}),lI=Ae("$ZodCheckMaxLength",(n,e)=>{var t;$s.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Wm(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(s._zod.bag.maximum=e.maximum)}),n._zod.check=s=>{const i=s.value;if(i.length<=e.maximum)return;const a=Um(i);s.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),cI=Ae("$ZodCheckMinLength",(n,e)=>{var t;$s.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Wm(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(s._zod.bag.minimum=e.minimum)}),n._zod.check=s=>{const i=s.value;if(i.length>=e.minimum)return;const a=Um(i);s.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),dI=Ae("$ZodCheckLengthEquals",(n,e)=>{var t;$s.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Wm(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),n._zod.check=s=>{const i=s.value,r=i.length;if(r===e.length)return;const a=Um(i),o=r>e.length;s.issues.push({origin:a,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:n,continue:!e.abort})}}),Nh=Ae("$ZodCheckStringFormat",(n,e)=>{var t,s;$s.init(n,e),n._zod.onattach.push(i=>{const r=i._zod.bag;r.format=e.format,e.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(s=n._zod).check??(s.check=()=>{})}),uI=Ae("$ZodCheckRegex",(n,e)=>{Nh.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),hI=Ae("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=iI),Nh.init(n,e)}),fI=Ae("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=rI),Nh.init(n,e)}),pI=Ae("$ZodCheckIncludes",(n,e)=>{$s.init(n,e);const t=xh(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=s,n._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),n._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:n,continue:!e.abort})}}),mI=Ae("$ZodCheckStartsWith",(n,e)=>{$s.init(n,e);const t=new RegExp(`^${xh(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:n,continue:!e.abort})}}),gI=Ae("$ZodCheckEndsWith",(n,e)=>{$s.init(n,e);const t=new RegExp(`.*${xh(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:n,continue:!e.abort})}}),yI=Ae("$ZodCheckOverwrite",(n,e)=>{$s.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class xI{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(a=>a),i=Math.min(...s.map(a=>a.length-a.trimStart().length)),r=s.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of r)this.content.push(a)}compile(){const e=Function,t=this?.args,i=[...(this?.content??[""]).map(r=>`  ${r}`)];return new e(...t,i.join(`
`))}}const vI={major:4,minor:1,patch:8},Bn=Ae("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=vI;const s=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&s.unshift(n);for(const i of s)for(const r of i._zod.onattach)r(n);if(s.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const i=(a,o,c)=>{let d=Go(a),u;for(const f of o){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(d)continue;const m=a.issues.length,h=f._zod.check(a);if(h instanceof Promise&&c?.async===!1)throw new sl;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,a.issues.length!==m&&(d||(d=Go(a,m)))});else{if(a.issues.length===m)continue;d||(d=Go(a,m))}}return u?u.then(()=>a):a},r=(a,o,c)=>{if(Go(a))return a.aborted=!0,a;const d=i(o,s,c);if(d instanceof Promise){if(c.async===!1)throw new sl;return d.then(u=>n._zod.parse(u,c))}return n._zod.parse(d,c)};n._zod.run=(a,o)=>{if(o.skipChecks)return n._zod.parse(a,o);if(o.direction==="backward"){const d=n._zod.parse({value:a.value,issues:[]},{...o,skipChecks:!0});return d instanceof Promise?d.then(u=>r(u,a,o)):r(d,a,o)}const c=n._zod.parse(a,o);if(c instanceof Promise){if(o.async===!1)throw new sl;return c.then(d=>i(d,s,o))}return i(c,s,o)}}n["~standard"]={validate:i=>{try{const r=NT(n,i);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return _T(n,i).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Hm=Ae("$ZodString",(n,e)=>{Bn.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??tI(n._zod.bag),n._zod.parse=(t,s)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),pn=Ae("$ZodStringFormat",(n,e)=>{Nh.init(n,e),Hm.init(n,e)}),bI=Ae("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=$T),pn.init(n,e)}),wI=Ae("$ZodUUID",(n,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Nx(s))}else e.pattern??(e.pattern=Nx());pn.init(n,e)}),SI=Ae("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=WT),pn.init(n,e)}),kI=Ae("$ZodURL",(n,e)=>{pn.init(n,e),n._zod.check=t=>{try{const s=t.value.trim(),i=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:KT.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=i.href:t.value=s;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),NI=Ae("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=UT()),pn.init(n,e)}),_I=Ae("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=zT),pn.init(n,e)}),jI=Ae("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=IT),pn.init(n,e)}),AI=Ae("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=ET),pn.init(n,e)}),CI=Ae("$ZodULID",(n,e)=>{e.pattern??(e.pattern=OT),pn.init(n,e)}),LI=Ae("$ZodXID",(n,e)=>{e.pattern??(e.pattern=RT),pn.init(n,e)}),PI=Ae("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=FT),pn.init(n,e)}),MI=Ae("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=eI(e)),pn.init(n,e)}),DI=Ae("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=QT),pn.init(n,e)}),TI=Ae("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=XT(e)),pn.init(n,e)}),II=Ae("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=BT),pn.init(n,e)}),EI=Ae("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=VT),pn.init(n,e),n._zod.onattach.push(t=>{const s=t._zod.bag;s.format="ipv4"})}),OI=Ae("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=HT),pn.init(n,e),n._zod.onattach.push(t=>{const s=t._zod.bag;s.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),RI=Ae("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=GT),pn.init(n,e)}),FI=Ae("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=YT),pn.init(n,e),n._zod.check=t=>{const s=t.value.split("/");try{if(s.length!==2)throw new Error;const[i,r]=s;if(!r)throw new Error;const a=Number(r);if(`${a}`!==r)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function Ow(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const zI=Ae("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=ZT),pn.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{Ow(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function BI(n){if(!Pw.test(n))return!1;const e=n.replace(/[-_]/g,s=>s==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return Ow(t)}const $I=Ae("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=Pw),pn.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{BI(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),WI=Ae("$ZodE164",(n,e)=>{e.pattern??(e.pattern=JT),pn.init(n,e)});function qI(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[s]=t;if(!s)return!1;const i=JSON.parse(atob(s));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const UI=Ae("$ZodJWT",(n,e)=>{pn.init(n,e),n._zod.check=t=>{qI(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),Rw=Ae("$ZodNumber",(n,e)=>{Bn.init(n,e),n._zod.pattern=n._zod.bag.pattern??sI,n._zod.parse=(t,s)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const i=t.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return t;const r=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:i,inst:n,...r?{received:r}:{}}),t}}),VI=Ae("$ZodNumber",(n,e)=>{oI.init(n,e),Rw.init(n,e)}),HI=Ae("$ZodUnknown",(n,e)=>{Bn.init(n,e),n._zod.parse=t=>t}),GI=Ae("$ZodNever",(n,e)=>{Bn.init(n,e),n._zod.parse=(t,s)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function _x(n,e,t){n.issues.length&&e.issues.push(...Cw(t,n.issues)),e.value[t]=n.value}const YI=Ae("$ZodArray",(n,e)=>{Bn.init(n,e),n._zod.parse=(t,s)=>{const i=t.value;if(!Array.isArray(i))return t.issues.push({expected:"array",code:"invalid_type",input:i,inst:n}),t;t.value=Array(i.length);const r=[];for(let a=0;a<i.length;a++){const o=i[a],c=e.element._zod.run({value:o,issues:[]},s);c instanceof Promise?r.push(c.then(d=>_x(d,t,a))):_x(c,t,a)}return r.length?Promise.all(r).then(()=>t):t}});function zu(n,e,t,s){n.issues.length&&e.issues.push(...Cw(t,n.issues)),n.value===void 0?t in s&&(e.value[t]=void 0):e.value[t]=n.value}function Fw(n){const e=Object.keys(n.shape);for(const s of e)if(!n.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const t=uT(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function zw(n,e,t,s,i,r){const a=[],o=i.keySet,c=i.catchall._zod,d=c.def.type;for(const u of Object.keys(e)){if(o.has(u))continue;if(d==="never"){a.push(u);continue}const f=c.run({value:e[u],issues:[]},s);f instanceof Promise?n.push(f.then(m=>zu(m,t,u,e))):zu(f,t,u,e)}return a.length&&t.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:r}),n.length?Promise.all(n).then(()=>t):t}const ZI=Ae("$ZodObject",(n,e)=>{Bn.init(n,e);const t=$m(()=>Fw(e));rn(n._zod,"propValues",()=>{const a=e.shape,o={};for(const c in a){const d=a[c]._zod;if(d.values){o[c]??(o[c]=new Set);for(const u of d.values)o[c].add(u)}}return o});const s=Fu,i=e.catchall;let r;n._zod.parse=(a,o)=>{r??(r=t.value);const c=a.value;if(!s(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:n}),a;a.value={};const d=[],u=r.shape;for(const f of r.keys){const h=u[f]._zod.run({value:c[f],issues:[]},o);h instanceof Promise?d.push(h.then(y=>zu(y,a,f,c))):zu(h,a,f,c)}return i?zw(d,c,a,o,t.value,n):d.length?Promise.all(d).then(()=>a):a}}),KI=Ae("$ZodObjectJIT",(n,e)=>{ZI.init(n,e);const t=n._zod.parse,s=$m(()=>Fw(e)),i=m=>{const h=new xI(["shape","payload","ctx"]),y=s.value,x=C=>{const L=kx(C);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};h.write("const input = payload.value;");const w=Object.create(null);let S=0;for(const C of y.keys)w[C]=`key_${S++}`;h.write("const newResult = {};");for(const C of y.keys){const L=w[C],P=kx(C);h.write(`const ${L} = ${x(C)};`),h.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        
        if (${L}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${L}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const j=h.compile();return(C,L)=>j(m,C,L)};let r;const a=Fu,o=!_w.jitless,d=o&&cT.value,u=e.catchall;let f;n._zod.parse=(m,h)=>{f??(f=s.value);const y=m.value;return a(y)?o&&d&&h?.async===!1&&h.jitless!==!0?(r||(r=i(e.shape)),m=r(m,h),u?zw([],y,m,h,f,n):m):t(m,h):(m.issues.push({expected:"object",code:"invalid_type",input:y,inst:n}),m)}});function jx(n,e,t,s){for(const r of n)if(r.issues.length===0)return e.value=r.value,e;const i=n.filter(r=>!Go(r));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(r=>r.issues.map(a=>io(a,s,so())))}),e)}const JI=Ae("$ZodUnion",(n,e)=>{Bn.init(n,e),rn(n._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),rn(n._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),rn(n._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),rn(n._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${i.map(r=>qm(r.source)).join("|")})$`)}});const t=e.options.length===1,s=e.options[0]._zod.run;n._zod.parse=(i,r)=>{if(t)return s(i,r);let a=!1;const o=[];for(const c of e.options){const d=c._zod.run({value:i.value,issues:[]},r);if(d instanceof Promise)o.push(d),a=!0;else{if(d.issues.length===0)return d;o.push(d)}}return a?Promise.all(o).then(c=>jx(c,i,n,r)):jx(o,i,n,r)}}),QI=Ae("$ZodIntersection",(n,e)=>{Bn.init(n,e),n._zod.parse=(t,s)=>{const i=t.value,r=e.left._zod.run({value:i,issues:[]},s),a=e.right._zod.run({value:i,issues:[]},s);return r instanceof Promise||a instanceof Promise?Promise.all([r,a]).then(([c,d])=>Ax(t,c,d)):Ax(t,r,a)}});function Jp(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(Ic(n)&&Ic(e)){const t=Object.keys(e),s=Object.keys(n).filter(r=>t.indexOf(r)!==-1),i={...n,...e};for(const r of s){const a=Jp(n[r],e[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};i[r]=a.data}return{valid:!0,data:i}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let s=0;s<n.length;s++){const i=n[s],r=e[s],a=Jp(i,r);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};t.push(a.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function Ax(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),Go(n))return n;const s=Jp(e.value,t.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return n.value=s.data,n}const XI=Ae("$ZodEnum",(n,e)=>{Bn.init(n,e);const t=aT(e.entries),s=new Set(t);n._zod.values=s,n._zod.pattern=new RegExp(`^(${t.filter(i=>dT.has(typeof i)).map(i=>typeof i=="string"?xh(i):i.toString()).join("|")})$`),n._zod.parse=(i,r)=>{const a=i.value;return s.has(a)||i.issues.push({code:"invalid_value",values:t,input:a,inst:n}),i}}),eE=Ae("$ZodTransform",(n,e)=>{Bn.init(n,e),n._zod.parse=(t,s)=>{if(s.direction==="backward")throw new Nw(n.constructor.name);const i=e.transform(t.value,t);if(s.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(t.value=a,t));if(i instanceof Promise)throw new sl;return t.value=i,t}});function Cx(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const tE=Ae("$ZodOptional",(n,e)=>{Bn.init(n,e),n._zod.optin="optional",n._zod.optout="optional",rn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),rn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${qm(t.source)})?$`):void 0}),n._zod.parse=(t,s)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>Cx(r,t.value)):Cx(i,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,s)}}),nE=Ae("$ZodNullable",(n,e)=>{Bn.init(n,e),rn(n._zod,"optin",()=>e.innerType._zod.optin),rn(n._zod,"optout",()=>e.innerType._zod.optout),rn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${qm(t.source)}|null)$`):void 0}),rn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,s)=>t.value===null?t:e.innerType._zod.run(t,s)}),sE=Ae("$ZodDefault",(n,e)=>{Bn.init(n,e),n._zod.optin="optional",rn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);if(t.value===void 0)return t.value=e.defaultValue,t;const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>Lx(r,e)):Lx(i,e)}});function Lx(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const iE=Ae("$ZodPrefault",(n,e)=>{Bn.init(n,e),n._zod.optin="optional",rn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>(s.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,s))}),rE=Ae("$ZodNonOptional",(n,e)=>{Bn.init(n,e),rn(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(s=>s!==void 0)):void 0}),n._zod.parse=(t,s)=>{const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>Px(r,n)):Px(i,n)}});function Px(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const aE=Ae("$ZodCatch",(n,e)=>{Bn.init(n,e),rn(n._zod,"optin",()=>e.innerType._zod.optin),rn(n._zod,"optout",()=>e.innerType._zod.optout),rn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>(t.value=r.value,r.issues.length&&(t.value=e.catchValue({...t,error:{issues:r.issues.map(a=>io(a,s,so()))},input:t.value}),t.issues=[]),t)):(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(r=>io(r,s,so()))},input:t.value}),t.issues=[]),t)}}),oE=Ae("$ZodPipe",(n,e)=>{Bn.init(n,e),rn(n._zod,"values",()=>e.in._zod.values),rn(n._zod,"optin",()=>e.in._zod.optin),rn(n._zod,"optout",()=>e.out._zod.optout),rn(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,s)=>{if(s.direction==="backward"){const r=e.out._zod.run(t,s);return r instanceof Promise?r.then(a=>Kd(a,e.in,s)):Kd(r,e.in,s)}const i=e.in._zod.run(t,s);return i instanceof Promise?i.then(r=>Kd(r,e.out,s)):Kd(i,e.out,s)}});function Kd(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const lE=Ae("$ZodReadonly",(n,e)=>{Bn.init(n,e),rn(n._zod,"propValues",()=>e.innerType._zod.propValues),rn(n._zod,"values",()=>e.innerType._zod.values),rn(n._zod,"optin",()=>e.innerType._zod.optin),rn(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(Mx):Mx(i)}});function Mx(n){return n.value=Object.freeze(n.value),n}const cE=Ae("$ZodCustom",(n,e)=>{$s.init(n,e),Bn.init(n,e),n._zod.parse=(t,s)=>t,n._zod.check=t=>{const s=t.value,i=e.fn(s);if(i instanceof Promise)return i.then(r=>Dx(r,t,s,n));Dx(i,t,s,n)}});function Dx(n,e,t,s){if(!n){const i={code:"custom",input:t,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(i.params=s._zod.def.params),e.issues.push(Ec(i))}}class dE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const s=t[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const s={...this.get(t)??{}};delete s.id;const i={...s,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function uE(){return new dE}const Jd=uE();function hE(n,e){return new n({type:"string",...ot(e)})}function fE(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...ot(e)})}function Tx(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...ot(e)})}function pE(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...ot(e)})}function mE(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ot(e)})}function gE(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ot(e)})}function yE(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ot(e)})}function xE(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...ot(e)})}function vE(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...ot(e)})}function bE(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...ot(e)})}function wE(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...ot(e)})}function SE(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...ot(e)})}function kE(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...ot(e)})}function NE(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...ot(e)})}function _E(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...ot(e)})}function jE(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...ot(e)})}function AE(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...ot(e)})}function CE(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ot(e)})}function LE(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ot(e)})}function PE(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...ot(e)})}function ME(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...ot(e)})}function DE(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...ot(e)})}function TE(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...ot(e)})}function IE(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ot(e)})}function EE(n,e){return new n({type:"string",format:"date",check:"string_format",...ot(e)})}function OE(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...ot(e)})}function RE(n,e){return new n({type:"string",format:"duration",check:"string_format",...ot(e)})}function FE(n,e){return new n({type:"number",checks:[],...ot(e)})}function zE(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...ot(e)})}function BE(n){return new n({type:"unknown"})}function $E(n,e){return new n({type:"never",...ot(e)})}function Ix(n,e){return new Iw({check:"less_than",...ot(e),value:n,inclusive:!1})}function ap(n,e){return new Iw({check:"less_than",...ot(e),value:n,inclusive:!0})}function Ex(n,e){return new Ew({check:"greater_than",...ot(e),value:n,inclusive:!1})}function op(n,e){return new Ew({check:"greater_than",...ot(e),value:n,inclusive:!0})}function Ox(n,e){return new aI({check:"multiple_of",...ot(e),value:n})}function Bw(n,e){return new lI({check:"max_length",...ot(e),maximum:n})}function Bu(n,e){return new cI({check:"min_length",...ot(e),minimum:n})}function $w(n,e){return new dI({check:"length_equals",...ot(e),length:n})}function WE(n,e){return new uI({check:"string_format",format:"regex",...ot(e),pattern:n})}function qE(n){return new hI({check:"string_format",format:"lowercase",...ot(n)})}function UE(n){return new fI({check:"string_format",format:"uppercase",...ot(n)})}function VE(n,e){return new pI({check:"string_format",format:"includes",...ot(e),includes:n})}function HE(n,e){return new mI({check:"string_format",format:"starts_with",...ot(e),prefix:n})}function GE(n,e){return new gI({check:"string_format",format:"ends_with",...ot(e),suffix:n})}function Wc(n){return new yI({check:"overwrite",tx:n})}function YE(n){return Wc(e=>e.normalize(n))}function ZE(){return Wc(n=>n.trim())}function KE(){return Wc(n=>n.toLowerCase())}function JE(){return Wc(n=>n.toUpperCase())}function QE(n,e,t){return new n({type:"array",element:e,...ot(t)})}function XE(n,e,t){return new n({type:"custom",check:"custom",fn:e,...ot(t)})}function e7(n){const e=t7(t=>(t.addIssue=s=>{if(typeof s=="string")t.issues.push(Ec(s,t.value,e._zod.def));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=t.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),t.issues.push(Ec(i))}},n(t.value,t)));return e}function t7(n,e){const t=new $s({check:"custom",...ot(e)});return t._zod.check=n,t}function Rx(n,e){try{var t=n()}catch(s){return e(s)}return t&&t.then?t.then(void 0,e):t}function n7(n,e){for(var t={};n.length;){var s=n[0],i=s.code,r=s.message,a=s.path.join(".");if(!t[a])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];t[a]={message:o.message,type:o.code}}else t[a]={message:r,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return n.push(f)})}),e){var c=t[a].types,d=c&&c[s.code];t[a]=Fm(a,e,t,i,d?[].concat(d,s.message):s.message)}n.shift()}return t}function s7(n,e){for(var t={};n.length;){var s=n[0],i=s.code,r=s.message,a=s.path.join(".");if(!t[a])if(s.code==="invalid_union"&&s.errors.length>0){var o=s.errors[0][0];t[a]={message:o.message,type:o.code}}else t[a]={message:r,type:i};if(s.code==="invalid_union"&&s.errors.forEach(function(u){return u.forEach(function(f){return n.push(f)})}),e){var c=t[a].types,d=c&&c[s.code];t[a]=Fm(a,e,t,i,d?[].concat(d,s.message):s.message)}n.shift()}return t}function i7(n,e,t){if(t===void 0&&(t={}),(function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def})(n))return function(s,i,r){try{return Promise.resolve(Rx(function(){return Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(a){return r.shouldUseNativeValidation&&Zp({},r),{errors:{},values:t.raw?Object.assign({},s):a}})},function(a){if((function(o){return Array.isArray(o?.issues)})(a))return{values:{},errors:bx(n7(a.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw a}))}catch(a){return Promise.reject(a)}};if((function(s){return"_zod"in s&&typeof s._zod=="object"})(n))return function(s,i,r){try{return Promise.resolve(Rx(function(){return Promise.resolve((t.mode==="sync"?ST:kT)(n,s,e)).then(function(a){return r.shouldUseNativeValidation&&Zp({},r),{errors:{},values:t.raw?Object.assign({},s):a}})},function(a){if((function(o){return o instanceof Vm})(a))return{values:{},errors:bx(s7(a.issues,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw a}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}const r7=Ae("ZodISODateTime",(n,e)=>{MI.init(n,e),gn.init(n,e)});function a7(n){return IE(r7,n)}const o7=Ae("ZodISODate",(n,e)=>{DI.init(n,e),gn.init(n,e)});function l7(n){return EE(o7,n)}const c7=Ae("ZodISOTime",(n,e)=>{TI.init(n,e),gn.init(n,e)});function d7(n){return OE(c7,n)}const u7=Ae("ZodISODuration",(n,e)=>{II.init(n,e),gn.init(n,e)});function h7(n){return RE(u7,n)}const f7=(n,e)=>{Vm.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>wT(n,t)},flatten:{value:t=>bT(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Kp,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Kp,2)}},isEmpty:{get(){return n.issues.length===0}}})},hi=Ae("ZodError",f7,{Parent:Error}),p7=bh(hi),m7=wh(hi),g7=Sh(hi),y7=kh(hi),x7=jT(hi),v7=AT(hi),b7=CT(hi),w7=LT(hi),S7=PT(hi),k7=MT(hi),N7=DT(hi),_7=TT(hi),Jn=Ae("ZodType",(n,e)=>(Bn.init(n,e),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone({...e,checks:[...e.checks??[],...t.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),n.clone=(t,s)=>va(n,t,s),n.brand=()=>n,n.register=((t,s)=>(t.add(n,s),n)),n.parse=(t,s)=>p7(n,t,s,{callee:n.parse}),n.safeParse=(t,s)=>g7(n,t,s),n.parseAsync=async(t,s)=>m7(n,t,s,{callee:n.parseAsync}),n.safeParseAsync=async(t,s)=>y7(n,t,s),n.spa=n.safeParseAsync,n.encode=(t,s)=>x7(n,t,s),n.decode=(t,s)=>v7(n,t,s),n.encodeAsync=async(t,s)=>b7(n,t,s),n.decodeAsync=async(t,s)=>w7(n,t,s),n.safeEncode=(t,s)=>S7(n,t,s),n.safeDecode=(t,s)=>k7(n,t,s),n.safeEncodeAsync=async(t,s)=>N7(n,t,s),n.safeDecodeAsync=async(t,s)=>_7(n,t,s),n.refine=(t,s)=>n.check(pO(t,s)),n.superRefine=t=>n.check(mO(t)),n.overwrite=t=>n.check(Wc(t)),n.optional=()=>Wx(n),n.nullable=()=>qx(n),n.nullish=()=>Wx(qx(n)),n.nonoptional=t=>oO(n,t),n.array=()=>hu(n),n.or=t=>J7([n,t]),n.and=t=>X7(n,t),n.transform=t=>Ux(n,tO(t)),n.default=t=>iO(n,t),n.prefault=t=>aO(n,t),n.catch=t=>cO(n,t),n.pipe=t=>Ux(n,t),n.readonly=()=>hO(n),n.describe=t=>{const s=n.clone();return Jd.add(s,{description:t}),s},Object.defineProperty(n,"description",{get(){return Jd.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return Jd.get(n);const s=n.clone();return Jd.add(s,t[0]),s},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),Ww=Ae("_ZodString",(n,e)=>{Hm.init(n,e),Jn.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...s)=>n.check(WE(...s)),n.includes=(...s)=>n.check(VE(...s)),n.startsWith=(...s)=>n.check(HE(...s)),n.endsWith=(...s)=>n.check(GE(...s)),n.min=(...s)=>n.check(Bu(...s)),n.max=(...s)=>n.check(Bw(...s)),n.length=(...s)=>n.check($w(...s)),n.nonempty=(...s)=>n.check(Bu(1,...s)),n.lowercase=s=>n.check(qE(s)),n.uppercase=s=>n.check(UE(s)),n.trim=()=>n.check(ZE()),n.normalize=(...s)=>n.check(YE(...s)),n.toLowerCase=()=>n.check(KE()),n.toUpperCase=()=>n.check(JE())}),j7=Ae("ZodString",(n,e)=>{Hm.init(n,e),Ww.init(n,e),n.email=t=>n.check(fE(A7,t)),n.url=t=>n.check(xE(C7,t)),n.jwt=t=>n.check(TE(q7,t)),n.emoji=t=>n.check(vE(L7,t)),n.guid=t=>n.check(Tx(Fx,t)),n.uuid=t=>n.check(pE(Qd,t)),n.uuidv4=t=>n.check(mE(Qd,t)),n.uuidv6=t=>n.check(gE(Qd,t)),n.uuidv7=t=>n.check(yE(Qd,t)),n.nanoid=t=>n.check(bE(P7,t)),n.guid=t=>n.check(Tx(Fx,t)),n.cuid=t=>n.check(wE(M7,t)),n.cuid2=t=>n.check(SE(D7,t)),n.ulid=t=>n.check(kE(T7,t)),n.base64=t=>n.check(PE(B7,t)),n.base64url=t=>n.check(ME($7,t)),n.xid=t=>n.check(NE(I7,t)),n.ksuid=t=>n.check(_E(E7,t)),n.ipv4=t=>n.check(jE(O7,t)),n.ipv6=t=>n.check(AE(R7,t)),n.cidrv4=t=>n.check(CE(F7,t)),n.cidrv6=t=>n.check(LE(z7,t)),n.e164=t=>n.check(DE(W7,t)),n.datetime=t=>n.check(a7(t)),n.date=t=>n.check(l7(t)),n.time=t=>n.check(d7(t)),n.duration=t=>n.check(h7(t))});function ta(n){return hE(j7,n)}const gn=Ae("ZodStringFormat",(n,e)=>{pn.init(n,e),Ww.init(n,e)}),A7=Ae("ZodEmail",(n,e)=>{SI.init(n,e),gn.init(n,e)}),Fx=Ae("ZodGUID",(n,e)=>{bI.init(n,e),gn.init(n,e)}),Qd=Ae("ZodUUID",(n,e)=>{wI.init(n,e),gn.init(n,e)}),C7=Ae("ZodURL",(n,e)=>{kI.init(n,e),gn.init(n,e)}),L7=Ae("ZodEmoji",(n,e)=>{NI.init(n,e),gn.init(n,e)}),P7=Ae("ZodNanoID",(n,e)=>{_I.init(n,e),gn.init(n,e)}),M7=Ae("ZodCUID",(n,e)=>{jI.init(n,e),gn.init(n,e)}),D7=Ae("ZodCUID2",(n,e)=>{AI.init(n,e),gn.init(n,e)}),T7=Ae("ZodULID",(n,e)=>{CI.init(n,e),gn.init(n,e)}),I7=Ae("ZodXID",(n,e)=>{LI.init(n,e),gn.init(n,e)}),E7=Ae("ZodKSUID",(n,e)=>{PI.init(n,e),gn.init(n,e)}),O7=Ae("ZodIPv4",(n,e)=>{EI.init(n,e),gn.init(n,e)}),R7=Ae("ZodIPv6",(n,e)=>{OI.init(n,e),gn.init(n,e)}),F7=Ae("ZodCIDRv4",(n,e)=>{RI.init(n,e),gn.init(n,e)}),z7=Ae("ZodCIDRv6",(n,e)=>{FI.init(n,e),gn.init(n,e)}),B7=Ae("ZodBase64",(n,e)=>{zI.init(n,e),gn.init(n,e)}),$7=Ae("ZodBase64URL",(n,e)=>{$I.init(n,e),gn.init(n,e)}),W7=Ae("ZodE164",(n,e)=>{WI.init(n,e),gn.init(n,e)}),q7=Ae("ZodJWT",(n,e)=>{UI.init(n,e),gn.init(n,e)}),qw=Ae("ZodNumber",(n,e)=>{Rw.init(n,e),Jn.init(n,e),n.gt=(s,i)=>n.check(Ex(s,i)),n.gte=(s,i)=>n.check(op(s,i)),n.min=(s,i)=>n.check(op(s,i)),n.lt=(s,i)=>n.check(Ix(s,i)),n.lte=(s,i)=>n.check(ap(s,i)),n.max=(s,i)=>n.check(ap(s,i)),n.int=s=>n.check(zx(s)),n.safe=s=>n.check(zx(s)),n.positive=s=>n.check(Ex(0,s)),n.nonnegative=s=>n.check(op(0,s)),n.negative=s=>n.check(Ix(0,s)),n.nonpositive=s=>n.check(ap(0,s)),n.multipleOf=(s,i)=>n.check(Ox(s,i)),n.step=(s,i)=>n.check(Ox(s,i)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function lp(n){return FE(qw,n)}const U7=Ae("ZodNumberFormat",(n,e)=>{VI.init(n,e),qw.init(n,e)});function zx(n){return zE(U7,n)}const V7=Ae("ZodUnknown",(n,e)=>{HI.init(n,e),Jn.init(n,e)});function Bx(){return BE(V7)}const H7=Ae("ZodNever",(n,e)=>{GI.init(n,e),Jn.init(n,e)});function G7(n){return $E(H7,n)}const Y7=Ae("ZodArray",(n,e)=>{YI.init(n,e),Jn.init(n,e),n.element=e.element,n.min=(t,s)=>n.check(Bu(t,s)),n.nonempty=t=>n.check(Bu(1,t)),n.max=(t,s)=>n.check(Bw(t,s)),n.length=(t,s)=>n.check($w(t,s)),n.unwrap=()=>n.element});function hu(n,e){return QE(Y7,n,e)}const Z7=Ae("ZodObject",(n,e)=>{KI.init(n,e),Jn.init(n,e),rn(n,"shape",()=>e.shape),n.keyof=()=>Xp(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:Bx()}),n.loose=()=>n.clone({...n._zod.def,catchall:Bx()}),n.strict=()=>n.clone({...n._zod.def,catchall:G7()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>mT(n,t),n.safeExtend=t=>gT(n,t),n.merge=t=>yT(n,t),n.pick=t=>fT(n,t),n.omit=t=>pT(n,t),n.partial=(...t)=>xT(Uw,n,t[0]),n.required=(...t)=>vT(Vw,n,t[0])});function $x(n,e){const t={type:"object",get shape(){return xa(this,"shape",n?lT(n):{}),this.shape},...ot(e)};return new Z7(t)}const K7=Ae("ZodUnion",(n,e)=>{JI.init(n,e),Jn.init(n,e),n.options=e.options});function J7(n,e){return new K7({type:"union",options:n,...ot(e)})}const Q7=Ae("ZodIntersection",(n,e)=>{QI.init(n,e),Jn.init(n,e)});function X7(n,e){return new Q7({type:"intersection",left:n,right:e})}const Qp=Ae("ZodEnum",(n,e)=>{XI.init(n,e),Jn.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(s,i)=>{const r={};for(const a of s)if(t.has(a))r[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Qp({...e,checks:[],...ot(i),entries:r})},n.exclude=(s,i)=>{const r={...e.entries};for(const a of s)if(t.has(a))delete r[a];else throw new Error(`Key ${a} not found in enum`);return new Qp({...e,checks:[],...ot(i),entries:r})}});function Xp(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(s=>[s,s])):n;return new Qp({type:"enum",entries:t,...ot(e)})}const eO=Ae("ZodTransform",(n,e)=>{eE.init(n,e),Jn.init(n,e),n._zod.parse=(t,s)=>{if(s.direction==="backward")throw new Nw(n.constructor.name);t.addIssue=r=>{if(typeof r=="string")t.issues.push(Ec(r,t.value,e));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=t.value),a.inst??(a.inst=n),t.issues.push(Ec(a))}};const i=e.transform(t.value,t);return i instanceof Promise?i.then(r=>(t.value=r,t)):(t.value=i,t)}});function tO(n){return new eO({type:"transform",transform:n})}const Uw=Ae("ZodOptional",(n,e)=>{tE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Wx(n){return new Uw({type:"optional",innerType:n})}const nO=Ae("ZodNullable",(n,e)=>{nE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function qx(n){return new nO({type:"nullable",innerType:n})}const sO=Ae("ZodDefault",(n,e)=>{sE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function iO(n,e){return new sO({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():Aw(e)}})}const rO=Ae("ZodPrefault",(n,e)=>{iE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function aO(n,e){return new rO({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():Aw(e)}})}const Vw=Ae("ZodNonOptional",(n,e)=>{rE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function oO(n,e){return new Vw({type:"nonoptional",innerType:n,...ot(e)})}const lO=Ae("ZodCatch",(n,e)=>{aE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function cO(n,e){return new lO({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const dO=Ae("ZodPipe",(n,e)=>{oE.init(n,e),Jn.init(n,e),n.in=e.in,n.out=e.out});function Ux(n,e){return new dO({type:"pipe",in:n,out:e})}const uO=Ae("ZodReadonly",(n,e)=>{lE.init(n,e),Jn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function hO(n){return new uO({type:"readonly",innerType:n})}const fO=Ae("ZodCustom",(n,e)=>{cE.init(n,e),Jn.init(n,e)});function pO(n,e={}){return XE(fO,n,e)}function mO(n){return e7(n)}const kr=ci,em=({className:n="",...e})=>l.jsx("textarea",{className:`block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ${n}`,...e}),yc=({children:n})=>l.jsx("div",{"data-select-root":!0,children:n}),xc=({value:n,onValueChange:e,children:t,className:s="",...i})=>l.jsx("select",{className:`mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ${s}`,value:n,onChange:r=>e?.(r.target.value),...i,children:t}),vc=({children:n})=>l.jsx(l.Fragment,{children:n}),ls=({value:n,children:e,...t})=>l.jsx("option",{value:n,...t,children:e}),bc=({placeholder:n,value:e})=>l.jsx("span",{"data-select-value":!0,children:e??n??""}),Hw=({children:n,className:e})=>l.jsx("div",{"data-tabs":!0,className:e,children:n}),Gw=({children:n,className:e=""})=>l.jsx("div",{className:e,children:n}),$u=({children:n,onClick:e,className:t=""})=>l.jsx("button",{type:"button",className:t,onClick:e,children:n}),Wu=({children:n,className:e=""})=>l.jsx("div",{className:e,children:n}),Ui=({className:n="",...e})=>l.jsx("label",{className:`text-sm font-medium ${n}`,...e}),gO=$x({title:ta().min(1,"Title is required").max(100,"Title too long"),description:ta().max(500,"Description too long"),type:Xp(["pain_reduction","frequency_reduction","consistency","medication_adherence","activity_increase","sleep_improvement","mood_tracking","custom"]),priority:Xp(["low","medium","high","urgent"]),duration:lp().min(1).max(365),targetValue:lp().min(0),targetUnit:ta().min(1),customFrequency:$x({interval:lp().min(1),reminderTime:ta().optional()}).optional(),tags:hu(ta()),motivation:ta().max(200),obstacles:hu(ta()),strategies:hu(ta())}),yO=({onSubmit:n,onCancel:e,initialData:t})=>{const[s,i]=X.useState(null),[r,a]=X.useState("templates"),[o,c]=X.useState(""),[d,u]=X.useState(""),[f,m]=X.useState(""),{register:h,handleSubmit:y,watch:x,setValue:w,formState:{errors:S}}=iT({resolver:i7(gO),defaultValues:{title:t?.title||"",description:t?.description||"",type:t?.type||"custom",priority:t?.priority||"medium",duration:30,targetValue:0,targetUnit:"",tags:t?.tags||[],motivation:t?.motivation||"",obstacles:t?.obstacles||[],strategies:t?.strategies||[]}}),j=x("type"),C=x("tags"),L=x("obstacles"),P=x("strategies");X.useEffect(()=>{s&&(w("title",s.name),w("description",s.description),w("type",s.type),w("duration",s.duration),s.targets[0]&&(w("targetValue",s.targets[0].targetValue),w("targetUnit",s.targets[0].unit)))},[s,w]);const O=D=>{const Q=new Date,ne=new Date(Q);ne.setDate(Q.getDate()+D.duration);const ae={userId:"current-user",title:D.title,description:D.description,type:D.type,status:"active",priority:D.priority,targets:[{metric:D.type==="pain_reduction"?"pain_level":"custom",targetValue:D.targetValue,currentValue:0,unit:D.targetUnit,comparison:D.type==="pain_reduction"?"percentage_decrease":"greater_than"}],startDate:Q.toISOString(),endDate:ne.toISOString(),frequency:"daily",customFrequency:D.customFrequency,milestones:s?.milestones.map(F=>({...F,id:`milestone_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isCompleted:!1}))||[],progress:[],tags:D.tags,isPublic:!1,motivation:D.motivation,obstacles:D.obstacles,strategies:D.strategies};n(ae)},k=()=>{o.trim()&&!C.includes(o.trim())&&(w("tags",[...C,o.trim()]),c(""))},A=D=>{w("tags",C.filter(Q=>Q!==D))},M=()=>{d.trim()&&!L.includes(d.trim())&&(w("obstacles",[...L,d.trim()]),u(""))},V=D=>{w("obstacles",L.filter(Q=>Q!==D))},_=()=>{f.trim()&&!P.includes(f.trim())&&(w("strategies",[...P,f.trim()]),m(""))},T=D=>{w("strategies",P.filter(Q=>Q!==D))},W=D=>{switch(D){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Create New Goal"}),l.jsx("p",{className:"text-gray-600",children:"Set meaningful goals to track your progress and stay motivated"})]}),l.jsxs(Ft,{variant:"outline",onClick:e,children:[l.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}),l.jsxs(Hw,{value:r,onValueChange:D=>a(D),children:[l.jsxs(Gw,{className:"grid w-full grid-cols-2",children:[l.jsx($u,{value:"templates",children:"Use Template"}),l.jsx($u,{value:"custom",children:"Custom Goal"})]}),l.jsxs(Wu,{value:"templates",className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:SD.map(D=>l.jsxs(Yn,{className:`cursor-pointer transition-all ${s?.id===D.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>i(D),children:[l.jsxs(As,{className:"pb-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Cs,{className:"text-lg",children:D.name}),l.jsx(Ps,{className:W(D.difficulty),children:D.difficulty})]}),l.jsx("p",{className:"text-sm text-gray-600",children:D.description})]}),l.jsx(Zn,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(Ir,{className:"w-4 h-4 mr-2"}),D.duration," days"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(xs,{className:"w-4 h-4 mr-2"}),D.estimatedSuccess,"% success rate"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(il,{className:"w-4 h-4 mr-2"}),D.milestones.length," milestones"]})]})})]},D.id))}),s&&l.jsxs(Yn,{className:"bg-blue-50 border-blue-200",children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center text-blue-800",children:[l.jsx(pa,{className:"w-5 h-5 mr-2"}),"Selected: ",s.name]})}),l.jsx(Zn,{children:l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Milestones:"}),l.jsx("div",{className:"space-y-2",children:s.milestones.map((D,Q)=>l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx(eh,{className:"w-4 h-4 mr-2 text-yellow-500"}),D.title," - ",D.targetValue,s.targets[0]?.unit]},Q))})]})})})]})]}),l.jsx(Wu,{value:"custom",className:"space-y-6",children:l.jsxs("form",{onSubmit:y(O),className:"space-y-6",children:[l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsx(Cs,{children:"Basic Information"})}),l.jsxs(Zn,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"title",children:"Goal Title *"}),l.jsx(kr,{id:"title",...h("title"),placeholder:"e.g., Reduce daily pain by 30%"}),S.title&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:S.title.message})]}),l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"type",children:"Goal Type"}),l.jsxs(yc,{value:j,onValueChange:D=>w("type",D),children:[l.jsx(xc,{children:l.jsx(bc,{})}),l.jsx(vc,{children:Object.entries(kD).map(([D,Q])=>l.jsx(ls,{value:D,children:Q},D))})]})]})]}),l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"description",children:"Description"}),l.jsx(em,{id:"description",...h("description"),placeholder:"Describe your goal and what you hope to achieve...",rows:3}),S.description&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:S.description.message})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"priority",children:"Priority"}),l.jsxs(yc,{value:x("priority"),onValueChange:D=>w("priority",D),children:[l.jsx(xc,{children:l.jsx(bc,{})}),l.jsx(vc,{children:Object.entries(ND).map(([D,Q])=>l.jsx(ls,{value:D,children:Q},D))})]})]}),l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"duration",children:"Duration (days)"}),l.jsx(kr,{id:"duration",type:"number",...h("duration",{valueAsNumber:!0}),min:"1",max:"365"})]}),l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"targetValue",children:"Target Value"}),l.jsx(kr,{id:"targetValue",type:"number",...h("targetValue",{valueAsNumber:!0}),min:"0"})]})]}),l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"targetUnit",children:"Target Unit"}),l.jsx(kr,{id:"targetUnit",...h("targetUnit"),placeholder:"e.g., %, points, minutes"})]})]})]}),l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsx(Cs,{children:"Tags"})}),l.jsxs(Zn,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(kr,{value:o,onChange:D=>c(D.target.value),placeholder:"Add a tag...",onKeyPress:D=>D.key==="Enter"&&(D.preventDefault(),k())}),l.jsx(Ft,{type:"button",onClick:k,variant:"outline",children:l.jsx(ji,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(D=>l.jsxs(Ps,{variant:"secondary",className:"flex items-center gap-1",children:[D,l.jsx(Ls,{className:"w-3 h-3 cursor-pointer",onClick:()=>A(D)})]},D))})]})]}),l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsx(Cs,{children:"Motivation & Challenges"})}),l.jsxs(Zn,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ui,{htmlFor:"motivation",children:"What motivates you to achieve this goal?"}),l.jsx(em,{id:"motivation",...h("motivation"),placeholder:"e.g., I want to feel more in control of my health...",rows:2})]}),l.jsxs("div",{children:[l.jsx(Ui,{children:"Potential Obstacles"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(kr,{value:d,onChange:D=>u(D.target.value),placeholder:"Add an obstacle...",onKeyPress:D=>D.key==="Enter"&&(D.preventDefault(),M())}),l.jsx(Ft,{type:"button",onClick:M,variant:"outline",children:l.jsx(ji,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(D=>l.jsxs(Ps,{variant:"destructive",className:"flex items-center gap-1",children:[D,l.jsx(Ls,{className:"w-3 h-3 cursor-pointer",onClick:()=>V(D)})]},D))})]}),l.jsxs("div",{children:[l.jsx(Ui,{children:"Strategies to Overcome Challenges"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(kr,{value:f,onChange:D=>m(D.target.value),placeholder:"Add a strategy...",onKeyPress:D=>D.key==="Enter"&&(D.preventDefault(),_())}),l.jsx(Ft,{type:"button",onClick:_,variant:"outline",children:l.jsx(ji,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(D=>l.jsxs(Ps,{variant:"default",className:"flex items-center gap-1",children:[D,l.jsx(Ls,{className:"w-3 h-3 cursor-pointer",onClick:()=>T(D)})]},D))})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Ft,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(Ft,{type:"submit",children:[l.jsx(xs,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]})]})})]})]})},xO=({onCreateGoal:n,onEditGoal:e,onViewProgress:t})=>{const[s,i]=X.useState([]),[r,a]=X.useState([]),[o,c]=X.useState(!0),[d,u]=X.useState(""),[f,m]=X.useState("all"),[h,y]=X.useState("all"),[x,w]=X.useState("created");X.useEffect(()=>{S()},[]),X.useEffect(()=>{j()},[s,d,f,h,x]);const S=async()=>{try{const k=await Tr.getAllGoals();i(k)}catch(k){console.error("Failed to load goals:",k)}finally{c(!1)}},j=X.useCallback(()=>{let k=s.filter(A=>{const M=A.title.toLowerCase().includes(d.toLowerCase())||A.description.toLowerCase().includes(d.toLowerCase()),V=f==="all"||A.status===f,_=h==="all"||A.type===h;return M&&V&&_});k.sort((A,M)=>{switch(x){case"priority":{const V={urgent:4,high:3,medium:2,low:1};return V[M.priority]-V[A.priority]}case"progress":{const V=la.calculateProgressPercentage(A,[]);return la.calculateProgressPercentage(M,[])-V}case"due_date":{const V=A.endDate?new Date(A.endDate).getTime():1/0,_=M.endDate?new Date(M.endDate).getTime():1/0;return V-_}case"created":default:return new Date(M.createdAt).getTime()-new Date(A.createdAt).getTime()}}),a(k)},[s,d,f,h,x]),C=async(k,A)=>{try{const M=s.find(_=>_.id===k);if(!M)return;const V={...M,status:A,completedAt:A==="completed"?new Date().toISOString():void 0,updatedAt:new Date().toISOString()};await Tr.saveGoal(V),await S()}catch(M){console.error("Failed to update goal status:",M)}},L=async k=>{if(confirm("Are you sure you want to delete this goal? This action cannot be undone."))try{await Tr.deleteGoal(k),await S()}catch(A){console.error("Failed to delete goal:",A)}},P=k=>{switch(k){case"pain_reduction":return l.jsx(Dn,{className:"w-5 h-5 text-red-500"});case"consistency":return l.jsx(Ir,{className:"w-5 h-5 text-blue-500"});case"medication_adherence":return l.jsx(Xi,{className:"w-5 h-5 text-green-500"});case"activity_increase":return l.jsx(xs,{className:"w-5 h-5 text-orange-500"});default:return l.jsx(eh,{className:"w-5 h-5 text-purple-500"})}},O=k=>{switch(k){case"completed":return l.jsx(pa,{className:"w-4 h-4 text-green-500"});case"active":return l.jsx(Yg,{className:"w-4 h-4 text-blue-500"});case"paused":return l.jsx(Gg,{className:"w-4 h-4 text-yellow-500"});case"overdue":return l.jsx(Er,{className:"w-4 h-4 text-red-500"});default:return l.jsx(Er,{className:"w-4 h-4 text-gray-500"})}};return o?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"My Goals"}),l.jsx("p",{className:"text-gray-600",children:"Track your progress and stay motivated on your health journey"})]}),l.jsxs(Ft,{onClick:n,children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]}),l.jsx(Yn,{children:l.jsx(Zn,{className:"pt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Fv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l.jsx(kr,{placeholder:"Search goals...",value:d,onChange:k=>u(k.target.value),className:"pl-10"})]}),l.jsxs(yc,{value:f,onValueChange:m,children:[l.jsx(xc,{children:l.jsx(bc,{placeholder:"Filter by status"})}),l.jsxs(vc,{children:[l.jsx(ls,{value:"all",children:"All Status"}),l.jsx(ls,{value:"active",children:"Active"}),l.jsx(ls,{value:"completed",children:"Completed"}),l.jsx(ls,{value:"paused",children:"Paused"}),l.jsx(ls,{value:"overdue",children:"Overdue"})]})]}),l.jsxs(yc,{value:h,onValueChange:y,children:[l.jsx(xc,{children:l.jsx(bc,{placeholder:"Filter by type"})}),l.jsxs(vc,{children:[l.jsx(ls,{value:"all",children:"All Types"}),l.jsx(ls,{value:"pain_reduction",children:"Pain Reduction"}),l.jsx(ls,{value:"consistency",children:"Consistency"}),l.jsx(ls,{value:"medication_adherence",children:"Medication"}),l.jsx(ls,{value:"activity_increase",children:"Activity"}),l.jsx(ls,{value:"custom",children:"Custom"})]})]}),l.jsxs(yc,{value:x,onValueChange:k=>w(k),children:[l.jsx(xc,{children:l.jsx(bc,{placeholder:"Sort by"})}),l.jsxs(vc,{children:[l.jsx(ls,{value:"created",children:"Date Created"}),l.jsx(ls,{value:"priority",children:"Priority"}),l.jsx(ls,{value:"progress",children:"Progress"}),l.jsx(ls,{value:"due_date",children:"Due Date"})]})]})]})})}),r.length===0?l.jsx(Yn,{className:"text-center py-12",children:l.jsxs(Zn,{children:[l.jsx(xs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:s.length===0?"No goals yet":"No goals match your filters"}),l.jsx("p",{className:"text-gray-600 mb-4",children:s.length===0?"Create your first goal to start tracking your progress":"Try adjusting your search or filters"}),s.length===0&&l.jsxs(Ft,{onClick:n,children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"Create Your First Goal"]})]})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(k=>{const A=la.calculateProgressPercentage(k,[]),M=_D(k),V=jD(k),_=AD(k.status);return l.jsxs(Yn,{className:"hover:shadow-lg transition-shadow",children:[l.jsx(As,{className:"pb-3",children:l.jsx("div",{className:"flex items-start justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[P(k.type),l.jsxs("div",{children:[l.jsx(Cs,{className:"text-lg line-clamp-2",children:k.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[O(k.status),l.jsx(Ps,{className:_,children:k.status})]})]})]})})}),l.jsxs(Zn,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Math.round(A),"%"]})]}),l.jsx(gh,{value:A,className:"h-2"})]}),k.targets[0]&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Target: ",CD(k.targets[0].targetValue,k.targets[0].unit)]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ir,{className:"w-4 h-4"}),M===-1?"No deadline":M===0?"Due today":M>0?`${M} days left`:`${Math.abs(M)} days overdue`]}),V&&l.jsx(Ps,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Ps,{variant:"outline",children:[k.priority," priority"]}),k.milestones.length>0&&l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[l.jsx(il,{className:"w-4 h-4"}),k.milestones.filter(T=>T.isCompleted).length,"/",k.milestones.length]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs(Ft,{variant:"outline",size:"sm",onClick:()=>t(k),className:"flex-1",children:[l.jsx(Fs,{className:"w-4 h-4 mr-1"}),"Progress"]}),l.jsx(Ft,{variant:"outline",size:"sm",onClick:()=>e(k),children:l.jsx(lN,{className:"w-4 h-4"})}),k.status==="active"&&l.jsx(Ft,{variant:"outline",size:"sm",onClick:()=>C(k.id,"paused"),children:l.jsx(Gg,{className:"w-4 h-4"})}),k.status==="paused"&&l.jsx(Ft,{variant:"outline",size:"sm",onClick:()=>C(k.id,"active"),children:l.jsx(Yg,{className:"w-4 h-4"})}),l.jsx(Ft,{variant:"outline",size:"sm",onClick:()=>L(k.id),className:"text-red-600 hover:text-red-700",children:l.jsx(fN,{className:"w-4 h-4"})})]})]})]},k.id)})}),s.length>0&&l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center gap-2",children:[l.jsx(Fs,{className:"w-5 h-5"}),"Goal Summary"]})}),l.jsx(Zn,{children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Goals"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(k=>k.status==="completed").length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(k=>k.status==="active").length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(s.reduce((k,A)=>{const M=la.calculateProgressPercentage(A,[]);return k+M},0)/s.length),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Avg Progress"})]})]})})]})]})},vO=({goal:n,onBack:e})=>{const[t,s]=X.useState([]),[i,r]=X.useState([]),[a,o]=X.useState(null),[c,d]=X.useState(!1),[u,f]=X.useState(""),[m,h]=X.useState(""),y=X.useCallback(async()=>{try{const O=await Tr.getGoalProgress(n.id),k=await Tr.getGoalMilestones(n.id),A=await gw.calculateGoalAnalytics(n,O);s(O),r(k),o(A)}catch(O){console.error("Failed to load progress data:",O)}},[n]);X.useEffect(()=>{y()},[n.id,y]);const x=async()=>{if(u.trim())try{const O=new Date().toISOString(),k={id:`progress_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,goalId:n.id,value:parseFloat(u),notes:m.trim()||void 0,timestamp:O,date:O,isManualEntry:!0};await Tr.saveGoalProgress(k),f(""),h(""),d(!1),await y()}catch(O){console.error("Failed to add progress:",O)}},w=O=>{switch(O){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"abandoned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=O=>{switch(O){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center gap-2",children:[l.jsx(xs,{className:"w-5 h-5"}),"Goal Details"]})}),l.jsxs(Zn,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-lg",children:n.title}),l.jsx("p",{className:"text-gray-600 mt-1",children:n.description})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(Ps,{className:w(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)}),l.jsxs(Ps,{className:S(n.priority),children:[n.priority.charAt(0).toUpperCase()+n.priority.slice(1)," Priority"]}),l.jsx(Ps,{variant:"outline",children:n.type.replace("_"," ").replace(/\b\w/g,O=>O.toUpperCase())})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Start Date:"}),l.jsx("div",{className:"font-medium",children:j(n.startDate)})]}),n.endDate&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"End Date:"}),l.jsx("div",{className:"font-medium",children:j(n.endDate)})]})]}),n.tags&&n.tags.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 text-sm",children:"Tags:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:n.tags.map((O,k)=>l.jsx(Ps,{variant:"secondary",className:"text-xs",children:O},k))})]})]})]}),l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center gap-2",children:[l.jsx(Fs,{className:"w-5 h-5"}),"Progress Overview"]})}),l.jsx(Zn,{className:"space-y-4",children:a&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Overall Progress"}),l.jsxs("span",{children:[Math.round(a.progressPercentage??0),"%"]})]}),l.jsx(gh,{value:a.progressPercentage??0,className:"h-3"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Current Streak:"}),l.jsxs("div",{className:"font-medium",children:[a.currentStreak," days"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Best Streak:"}),l.jsxs("div",{className:"font-medium",children:[a.bestStreak," days"]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total Entries:"}),l.jsx("div",{className:"font-medium",children:a.totalEntries})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Avg. Progress:"}),l.jsx("div",{className:"font-medium",children:a.averageProgress?Gt(a.averageProgress,1):"N/A"})]})]})]})})]})]}),L=()=>l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Dn,{className:"w-5 h-5"}),"Progress Entries"]}),l.jsxs(Ft,{onClick:()=>d(!0),size:"sm",disabled:n.status!=="active",children:[l.jsx(ji,{className:"w-4 h-4 mr-2"}),"Add Progress"]})]})}),l.jsxs(Zn,{children:[c&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Add New Progress"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Progress Value"}),l.jsx(kr,{type:"number",placeholder:"Enter progress value",value:u,onChange:O=>f(O.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Notes (Optional)"}),l.jsx(em,{placeholder:"Add any notes about this progress...",value:m,onChange:O=>h(O.target.value),rows:3})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ft,{onClick:x,size:"sm",children:"Save Progress"}),l.jsx(Ft,{variant:"outline",onClick:()=>{d(!1),f(""),h("")},size:"sm",children:"Cancel"})]})]})]}),t.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Dn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No progress entries yet"}),l.jsx("p",{className:"text-sm mt-1",children:"Start tracking your progress by adding your first entry!"})]}):l.jsx("div",{className:"space-y-3",children:t.sort((O,k)=>new Date(k.timestamp??k.date).getTime()-new Date(O.timestamp??O.date).getTime()).map(O=>l.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Dn,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium",children:["Progress: ",O.value]}),l.jsx("div",{className:"text-sm text-gray-600",children:j(O.timestamp??O.date)}),O.notes&&l.jsx("div",{className:"text-sm text-gray-700 mt-1",children:O.notes})]})]})},O.id))})]})]}),P=()=>l.jsxs(Yn,{children:[l.jsx(As,{children:l.jsxs(Cs,{className:"flex items-center gap-2",children:[l.jsx(il,{className:"w-5 h-5"}),"Milestones"]})}),l.jsx(Zn,{children:i.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(il,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No milestones set"}),l.jsx("p",{className:"text-sm mt-1",children:"Milestones help you track significant achievements!"})]}):l.jsx("div",{className:"space-y-3",children:i.map(O=>l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${O.completed?"bg-green-100":"bg-gray-100"}`,children:O.completed?l.jsx(pa,{className:"w-5 h-5 text-green-600"}):l.jsx(Xi,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:O.title}),l.jsx("div",{className:"text-sm text-gray-600",children:O.description}),O.targetDate&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Target: ",j(O.targetDate)]})]}),O.completed&&O.completedAt&&l.jsxs("div",{className:"text-xs text-green-600",children:["Completed ",j(O.completedAt)]})]},O.id))})})]});return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsxs(Ft,{variant:"ghost",onClick:e,children:[l.jsx(am,{className:"w-4 h-4 mr-2"}),"Back to Goals"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Goal Progress"}),l.jsx("p",{className:"text-gray-600",children:"Track and analyze your goal progress"})]})]}),C(),l.jsxs(Hw,{defaultValue:"progress",className:"w-full",children:[l.jsxs(Gw,{className:"grid w-full grid-cols-2",children:[l.jsx($u,{value:"progress",children:"Progress Tracking"}),l.jsx($u,{value:"milestones",children:"Milestones"})]}),l.jsx(Wu,{value:"progress",className:"mt-6",children:L()}),l.jsx(Wu,{value:"milestones",className:"mt-6",children:P()})]})]})},bO=({onClose:n,className:e=""})=>{const[t,s]=X.useState("list"),[i,r]=X.useState(null),[a,o]=X.useState(null),c=async y=>{try{const x={...y,id:`goal_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Tr.saveGoal(x),s("list")}catch(x){console.error("Failed to create goal:",x)}},d=y=>{o(y),s("create")},u=y=>{r(y),s("progress")},f=()=>{s("list"),r(null),o(null)},m=()=>l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[t!=="list"&&l.jsxs(Ft,{variant:"ghost",size:"sm",onClick:f,children:[l.jsx(am,{className:"w-4 h-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(xs,{className:"w-8 h-8 text-blue-600"}),"Goal Management"]}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Set, track, and achieve your health and wellness goals"})]})]}),n&&l.jsx(Ft,{variant:"outline",onClick:n,children:"Close"})]}),h=()=>{switch(t){case"create":return l.jsx(yO,{onSubmit:c,onCancel:f,initialData:a||void 0});case"progress":return i?l.jsx(vO,{goal:i,onBack:f}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{children:"No goal selected"}),l.jsx(Ft,{onClick:f,className:"mt-4",children:"Back to Goals"})]});case"list":default:return l.jsx(xO,{onCreateGoal:()=>s("create"),onEditGoal:d,onViewProgress:u})}};return l.jsxs("div",{className:`max-w-7xl mx-auto ${e}`,children:[m(),h()]})},wO=({isOpen:n,onClose:e})=>l.jsx(Cm,{isOpen:n,onClose:e,size:"xl",children:l.jsx(bO,{onClose:e})});function SO({entries:n,error:e,onAddEntry:t,onStartWalkthrough:s}){const{preferences:i}=ya(),[r,a]=it.useState(!1),[o,c]=it.useState("dashboard"),[d,u]=it.useState(!1),[f,m]=it.useState(!1),h=[{id:"dashboard",label:"Dashboard",icon:Fs,description:"Overview and quick actions"},{id:"analytics",label:"Analytics",icon:Dn,description:"Detailed insights and trends"},{id:"history",label:"History",icon:Ir,description:"Past entries and patterns"}];return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50 shadow-lg",children:"Skip to main content"}),l.jsx("header",{className:"border-b bg-card/50 backdrop-blur supports-[backdrop-filter]:bg-card/50 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(Bv,{size:40}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Pain Tracker Pro"}),l.jsx("div",{className:"text-xs text-muted-foreground font-medium tracking-wide",children:"AI-POWERED PAIN MANAGEMENT"})]})]}),l.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:h.map(y=>l.jsxs(dt,{variant:o===y.id?"default":"ghost",size:"sm",onClick:()=>c(y.id),className:"flex items-center space-x-2",children:[l.jsx(y.icon,{className:"h-4 w-4"}),l.jsx("span",{children:y.label})]},y.id))}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"hidden lg:flex items-center space-x-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Ir,{className:"h-4 w-4"}),l.jsxs("span",{children:[n.length," entries"]})]}),n.length>0&&l.jsxs(zs,{variant:"outline",className:"text-xs",children:["Last: ",new Date(n[n.length-1]?.timestamp||"").toLocaleDateString()]})]}),l.jsx(uu,{onClick:()=>a(!r),variant:"secondary",size:"normal","aria-label":"Open accessibility settings","aria-expanded":r,children:l.jsx(ll,{className:"h-4 w-4"})}),l.jsx(uu,{onClick:s,variant:"secondary",size:"normal","aria-label":"Get help and tutorial",children:l.jsx(Ku,{className:"h-4 w-4"})}),l.jsx(f4,{})]})]}),l.jsx("div",{className:"md:hidden pb-4",children:l.jsx("nav",{className:"flex space-x-1",children:h.map(y=>l.jsxs(dt,{variant:o===y.id?"default":"ghost",size:"sm",onClick:()=>c(y.id),className:"flex-1 flex items-center justify-center space-x-1",children:[l.jsx(y.icon,{className:"h-4 w-4"}),l.jsx("span",{className:"text-xs",children:y.label})]},y.id))})})]})}),r&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 transition-opacity bg-background/80 backdrop-blur-sm",onClick:()=>a(!1),"aria-hidden":"true"}),l.jsxs("div",{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-card shadow-xl rounded-lg border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-medium text-card-foreground",children:"Accessibility & Comfort Settings"}),l.jsx(uu,{variant:"secondary",onClick:()=>a(!1),"aria-label":"Close settings",children:""})]}),l.jsx(rD,{})]})]})}),l.jsxs("main",{id:"main-content",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.showComfortPrompts&&l.jsx("div",{className:"mb-6",children:l.jsx(iD,{})}),i.showMemoryAids&&n.length===0&&l.jsx("div",{className:"mb-6",children:l.jsx(nx,{text:"Welcome! Start by recording your current pain level. Your information is automatically saved as you go, so you can take breaks anytime.",type:"tip"})}),e&&l.jsx(ze,{className:"mb-6 border-destructive/50 bg-destructive/5",children:l.jsx(qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center space-x-2",role:"alert","aria-live":"polite",children:[l.jsx(Zu,{className:"h-5 w-5 text-destructive"}),l.jsx("div",{children:i.gentleLanguage?l.jsxs(l.Fragment,{children:[l.jsx("strong",{className:"font-semibold text-destructive",children:"Something didn't work: "}),l.jsx("span",{className:"text-destructive",children:"We encountered an issue. Please try again when you're ready. Your data is safe."})]}):l.jsxs(l.Fragment,{children:[l.jsx("strong",{className:"font-semibold text-destructive",children:"Error: "}),l.jsx("span",{className:"text-destructive",children:e})]})})]})})}),o==="dashboard"&&l.jsx(ED,{entries:n,onAddEntry:t,onStartWalkthrough:s,onOpenGoalManager:()=>m(!0)}),o==="analytics"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Advanced Analytics Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Predictive insights and advanced visualizations for your pain journey"})]}),l.jsx(dt,{variant:"outline",onClick:()=>c("dashboard"),children:"Back to Dashboard"})]}),l.jsx(sC,{entries:n})]}),o==="history"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Pain History"}),l.jsx("p",{className:"text-muted-foreground",children:"Complete history of your pain entries and patterns"})]}),l.jsx(dt,{variant:"outline",onClick:()=>c("dashboard"),children:"Back to Dashboard"})]}),l.jsx(i2,{entries:n})]}),i.showMemoryAids&&n.length>=3&&l.jsx("div",{className:"mt-6",children:l.jsx(nx,{text:"Great progress! You've been consistently tracking your pain. Look for patterns in your data to share with your healthcare provider.",type:"reminder"})})]}),l.jsx("footer",{className:"bg-card/50 border-t mt-auto",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[l.jsx("div",{className:"text-sm text-muted-foreground text-center md:text-left",children:i.gentleLanguage?"Your health journey matters. You're doing great by tracking your symptoms.":"Pain Tracker Pro - Manage your health information with confidence"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[i.showComfortPrompts&&l.jsx("div",{className:"text-sm text-muted-foreground",children:"Remember to be gentle with yourself"}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:"v2.0.0"}),l.jsx("span",{children:""}),l.jsx("span",{children:"Enhanced UX"})]})]})]})})}),l.jsx(KP,{isOpen:d,onClose:()=>u(!1),entries:n}),l.jsx(wO,{isOpen:f,onClose:()=>m(!1)})]})}function Vx({onNext:n,onSkip:e}){return l.jsxs("div",{className:"text-center space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Qa,{className:"h-16 w-16 text-primary"}),l.jsx(Ci,{className:"h-6 w-6 text-red-500 absolute -top-1 -right-1"})]})}),l.jsx("h3",{className:"text-3xl font-bold text-foreground mb-4",children:"Welcome to Pain Tracker"}),l.jsx("p",{className:"text-lg text-muted-foreground mb-6 max-w-md mx-auto",children:"Take control of your pain management journey with comprehensive tracking and insights."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(Qa,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Track Daily"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Record pain levels, symptoms, and daily activities"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(Dn,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Analyze Trends"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualize patterns and improvements over time"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(Ci,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Improve Life"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Make informed decisions with your healthcare team"})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(dt,{variant:"outline",onClick:e,children:"Skip Tour"}),l.jsx(dt,{onClick:n,className:"min-w-24",children:"Get Started"})]})]})}function Hx({onNext:n,onPrevious:e}){const t=[{icon:QS,title:"Visual Analytics",description:"Interactive charts and graphs to visualize your pain patterns, trends, and progress over time.",highlight:"See your progress at a glance"},{icon:mu,title:"WCB Reports",description:"Generate comprehensive reports for WorkSafe BC submissions with all required documentation.",highlight:"Professional medical reports"},{icon:Xi,title:"Smart Tracking",description:"Quick and easy pain entry forms with intelligent suggestions and auto-save functionality.",highlight:"Never lose your data"},{icon:Qu,title:"Privacy First",description:"All your data stays on your device. No cloud storage, no tracking, complete privacy.",highlight:"Your data is yours alone"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"Powerful Features for Better Health"}),l.jsx("p",{className:"text-muted-foreground",children:"Discover what makes Pain Tracker the complete solution for pain management"})]}),l.jsx("div",{className:"space-y-6",children:t.map((s,i)=>l.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg border bg-card/50",children:[l.jsx("div",{className:"bg-primary/10 rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0",children:l.jsx(s.icon,{className:"h-6 w-6 text-primary"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:s.title}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),l.jsx("span",{className:"text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded",children:s.highlight})]})]},i))}),l.jsxs("div",{className:"flex justify-between items-center pt-4",children:[l.jsx(dt,{variant:"outline",onClick:e,children:"Previous"}),l.jsx(dt,{onClick:n,className:"min-w-24",children:"Continue"})]})]})}function Gx({onComplete:n,onPrevious:e}){const[t,s]=X.useState(null),i=()=>{n(t==="sample")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"How would you like to start?"}),l.jsx("p",{className:"text-muted-foreground",children:"Choose your preferred way to begin your pain tracking journey"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>s("sample"),className:`w-full p-6 rounded-lg border-2 transition-all ${t==="sample"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0",children:l.jsx(Xu,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{className:"text-left flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Start with Sample Data"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Explore Pain Tracker with pre-filled sample entries to see how features work. Perfect for understanding the app before adding your own data."}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"Try before you track"}),l.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"See example reports"})]})]})]})}),l.jsx("button",{onClick:()=>s("fresh"),className:`w-full p-6 rounded-lg border-2 transition-all ${t==="fresh"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0",children:l.jsx(bN,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),l.jsxs("div",{className:"text-left flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Start Fresh"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Begin with a clean slate and add your first real pain entry. Best for users ready to start tracking immediately."}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"Clean start"}),l.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"Real data only"})]})]})]})})]}),l.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(vk,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm font-medium text-foreground",children:"Privacy Note"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"All data is stored locally on your device. You can clear sample data anytime, and no information is sent to external servers."})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4",children:[l.jsx(dt,{variant:"outline",onClick:e,children:"Previous"}),l.jsx(dt,{onClick:i,disabled:!t,className:"min-w-24",children:t==="sample"?"Setup with Samples":t==="fresh"?"Start Fresh":"Continue"})]})]})}function kO({onComplete:n,onSkip:e}){const[t,s]=X.useState(0),[i,r]=X.useState(!0),a=[{component:Vx,title:"Welcome"},{component:Hx,title:"Features"},{component:Gx,title:"Setup"}],o=()=>{t<a.length-1&&s(t+1)},c=()=>{t>0&&s(t-1)},d=f=>{r(!1),n(f)},u=()=>{r(!1),e()};return X.useEffect(()=>{const f=document.querySelector("[data-onboarding-step]");f&&f.focus()},[t]),i?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"onboarding-title",children:l.jsx(ze,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs(qe,{className:"p-8",children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{id:"onboarding-title",className:"text-2xl font-bold text-foreground",children:a[t].title}),l.jsx("button",{onClick:u,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Skip onboarding",type:"button",children:"Skip"})]}),l.jsx("div",{className:"flex space-x-2 mb-6",children:a.map((f,m)=>l.jsx("div",{className:`h-2 flex-1 rounded ${m<=t?"bg-primary":"bg-muted"}`,role:"progressbar","aria-label":`Onboarding step ${m+1} of ${a.length}`,"aria-valuenow":t+1,"aria-valuemax":a.length},m))})]}),l.jsxs("div",{"data-onboarding-step":!0,tabIndex:-1,children:[t===0&&l.jsx(Vx,{onNext:o,onSkip:u,isFirstStep:!0,isLastStep:!1}),t===1&&l.jsx(Hx,{onNext:o,onPrevious:c,isFirstStep:!1,isLastStep:!1}),t===2&&l.jsx(Gx,{onComplete:d,onPrevious:c,isFirstStep:!1,isLastStep:!0})]})]})})}):null}function NO({steps:n,isActive:e,onComplete:t,onSkip:s}){const[i,r]=X.useState(0),[a,o]=X.useState(null),c=X.useRef(null),d=n[i];X.useEffect(()=>{if(!e||!d)return;const y=document.querySelector(d.target);if(y)return o(y),y.scrollIntoView({behavior:"smooth",block:"center"}),y.classList.add("walkthrough-highlight"),()=>{y.classList.remove("walkthrough-highlight")}},[i,d,e]);const u=()=>{if(!a)return{};const y=a.getBoundingClientRect();switch(d.placement||"bottom"){case"top":return{top:y.top-20,left:y.left+y.width/2,transform:"translate(-50%, -100%)"};case"bottom":return{top:y.bottom+20,left:y.left+y.width/2,transform:"translate(-50%, 0)"};case"left":return{top:y.top+y.height/2,left:y.left-20,transform:"translate(-100%, -50%)"};case"right":return{top:y.top+y.height/2,left:y.right+20,transform:"translate(0, -50%)"};default:return{top:y.bottom+20,left:y.left+y.width/2,transform:"translate(-50%, 0)"}}},f=()=>{i<n.length-1?r(i+1):t()},m=()=>{i>0&&r(i-1)},h=y=>{y.key==="Escape"?s():y.key==="ArrowLeft"&&i>0?m():y.key==="ArrowRight"&&i<n.length-1&&f()};return X.useEffect(()=>{const y=document.createElement("style");return y.innerHTML=`
      .walkthrough-highlight {
        position: relative;
        z-index: 45;
        box-shadow: 0 0 0 4px rgba(var(--primary), 0.5);
        border-radius: 4px;
      }
    `,document.head.appendChild(y),()=>{document.head.removeChild(y)}},[]),!e||!d?null:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40"}),l.jsx("div",{ref:c,className:"fixed z-50 max-w-sm",style:u(),onKeyDown:h,tabIndex:-1,children:l.jsxs("div",{className:"bg-popover border rounded-lg shadow-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Step ",i+1," of ",n.length]})}),l.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-foreground","aria-label":"Skip walkthrough",children:l.jsx(Ls,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex space-x-1 mb-4",children:n.map((y,x)=>l.jsx("div",{className:`h-1 flex-1 rounded ${x<=i?"bg-primary":"bg-muted"}`},x))}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"font-semibold text-foreground mb-2",children:d.title}),l.jsx("p",{className:"text-sm text-muted-foreground",children:d.content}),d.action&&l.jsxs("p",{className:"text-xs text-primary mt-2 font-medium",children:["Try it: ",d.action]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs(dt,{variant:"outline",size:"sm",onClick:m,disabled:i===0,className:"flex items-center space-x-1",children:[l.jsx(am,{className:"h-3 w-3"}),l.jsx("span",{children:"Previous"})]}),l.jsxs(dt,{size:"sm",onClick:f,className:"flex items-center space-x-1",children:[l.jsx("span",{children:i===n.length-1?"Finish":"Next"}),i<n.length-1&&l.jsx(mp,{className:"h-3 w-3"})]})]})]})})]})}function _O({id:n,type:e,title:t,message:s,duration:i=5e3,action:r,onDismiss:a}){const[o,c]=X.useState(!0),[d,u]=X.useState(!1),f=X.useCallback(()=>{u(!0),setTimeout(()=>{c(!1),a(n)},150)},[n,a]);X.useEffect(()=>{if(i>0){const y=setTimeout(()=>{f()},i);return()=>clearTimeout(y)}},[i,f]);const m=()=>{switch(e){case"success":return l.jsx(pa,{className:"h-5 w-5 text-green-600"});case"error":return l.jsx(hk,{className:"h-5 w-5 text-red-600"});case"warning":return l.jsx(Zu,{className:"h-5 w-5 text-yellow-600"});case"info":return l.jsx(gu,{className:"h-5 w-5 text-blue-600"});default:return l.jsx(gu,{className:"h-5 w-5 text-blue-600"})}},h=()=>{switch(e){case"success":return"bg-green-50 border-green-200 dark:bg-green-950/30 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950/30 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/30 dark:border-yellow-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950/30 dark:border-blue-800";default:return"bg-card border-border"}};return o?l.jsx("div",{className:`
        pointer-events-auto w-full max-w-sm rounded-lg border p-4 shadow-lg
        transition-all duration-150 ease-in-out
        ${h()}
        ${d?"opacity-0 transform translate-x-full":"opacity-100 transform translate-x-0"}
      `,role:"alert","aria-live":"polite",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0",children:m()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-semibold text-foreground",children:t}),s&&l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s}),r&&l.jsx("button",{onClick:r.onClick,className:"text-sm font-medium text-primary hover:text-primary/80 mt-2 block",children:r.label})]}),l.jsx("button",{onClick:f,className:"flex-shrink-0 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Dismiss notification",children:l.jsx(Ls,{className:"h-4 w-4"})})]})}):null}const Yw=X.createContext(void 0);function jO(){const n=X.useContext(Yw);if(!n)throw new Error("useToastContext must be used within a ToastProvider");return n}function AO({children:n}){const[e,t]=X.useState([]),s=a=>{const o=Math.random().toString(36).substring(2,9),c={...a,id:o};t(d=>[...d,c])},i=a=>{t(o=>o.filter(c=>c.id!==a))},r=()=>{t([])};return l.jsxs(Yw.Provider,{value:{addToast:s,removeToast:i,clearToasts:r},children:[n,l.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col space-y-2 pointer-events-none",children:e.map(a=>l.jsx(_O,{...a,onDismiss:i},a.id))})]})}function CO(){const{addToast:n,removeToast:e,clearToasts:t}=jO();return{success:(i,r,a)=>{n({type:"success",title:i,message:r,action:a})},error:(i,r,a)=>{n({type:"error",title:i,message:r,action:a,duration:7e3})},warning:(i,r,a)=>{n({type:"warning",title:i,message:r,action:a,duration:6e3})},info:(i,r,a)=>{n({type:"info",title:i,message:r,action:a})},custom:i=>{n(i)},dismiss:e,clear:t}}const LO=[{id:1,timestamp:new Date(Date.now()-10080*60*1e3).toISOString(),baselineData:{pain:6,locations:["Lower Back","Right Leg"],symptoms:["Sharp pain","Stiffness","Numbness"]},functionalImpact:{limitedActivities:["Walking","Sitting for long periods"],assistanceNeeded:["Getting dressed"],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"Twice daily",effectiveness:"Moderate relief for 2-3 hours"}],changes:"Started taking ibuprofen twice daily",effectiveness:"Moderate relief for 2-3 hours"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-8640*60*1e3).toISOString(),effectiveness:"Some improvement in flexibility"}],effectiveness:"Some improvement in flexibility",planned:["Follow-up with specialist"]},qualityOfLife:{sleepQuality:4,moodImpact:5,socialImpact:["Cancelled dinner with friends"]},workImpact:{missedWork:1,modifiedDuties:["Working from home"],workLimitations:["Cannot lift heavy items"]},comparison:{worseningSince:"Last week after moving boxes",newLimitations:["Difficulty with stairs"]},notes:"Pain started after helping friends move. Worse in the morning and when sitting too long."},{id:2,timestamp:new Date(Date.now()-7200*60*1e3).toISOString(),baselineData:{pain:4,locations:["Lower Back"],symptoms:["Dull ache","Stiffness"]},functionalImpact:{limitedActivities:["Prolonged standing"],assistanceNeeded:[],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"Once daily",effectiveness:"Good relief, lasts 4-5 hours"}],changes:"Reduced to once daily",effectiveness:"Good relief, lasts 4-5 hours"},treatments:{recent:[{type:"Heat therapy",provider:"Self-administered",date:new Date(Date.now()-5760*60*1e3).toISOString(),effectiveness:"Heat helps significantly"},{type:"Gentle stretching",provider:"Self-administered",date:new Date(Date.now()-5760*60*1e3).toISOString(),effectiveness:"Good improvement in mobility"}],effectiveness:"Heat helps significantly",planned:["Continue physiotherapy"]},qualityOfLife:{sleepQuality:6,moodImpact:7,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:["Standing desk option"],workLimitations:["Avoid lifting over 10kg"]},comparison:{worseningSince:"",newLimitations:[]},notes:"Improvement noticed. Heat pack in the morning really helps. Stretching exercises from physio are effective."},{id:3,timestamp:new Date(Date.now()-4320*60*1e3).toISOString(),baselineData:{pain:3,locations:["Lower Back"],symptoms:["Mild stiffness"]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"As needed",effectiveness:"Good when needed"}],changes:"Only taking when pain increases",effectiveness:"Good when needed"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-2880*60*1e3).toISOString(),effectiveness:"Significant improvement in mobility"},{type:"Regular walking",provider:"Self-administered",date:new Date(Date.now()-2880*60*1e3).toISOString(),effectiveness:"Improved overall fitness"}],effectiveness:"Significant improvement in mobility",planned:["Gradually increase activity level"]},qualityOfLife:{sleepQuality:8,moodImpact:8,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:["Still cautious with heavy lifting"]},comparison:{worseningSince:"",newLimitations:[]},notes:"Much better! Can walk for 30 minutes without discomfort. Sleep quality improved significantly."},{id:4,timestamp:new Date(Date.now()-1440*60*1e3).toISOString(),baselineData:{pain:2,locations:["Lower Back"],symptoms:["Occasional stiffness"]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"Stopped regular medication",effectiveness:"No longer needed for daily activities"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-1440*60*1e3).toISOString(),effectiveness:"Excellent progress"},{type:"Regular exercise routine",provider:"Self-administered",date:new Date(Date.now()-1440*60*1e3).toISOString(),effectiveness:"Maintaining strength and flexibility"}],effectiveness:"Excellent progress",planned:["Maintain current exercise routine"]},qualityOfLife:{sleepQuality:9,moodImpact:9,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:"Feeling great! Back to normal activities. Continuing exercises to prevent future issues."}],Zw=[{target:'[data-walkthrough="pain-entry-form"]',title:"Record Your Pain",content:"Start by recording your current pain level, location, and symptoms. This form is designed to be quick and comprehensive.",placement:"right",action:"Try entering a pain level using the slider"},{target:'[data-walkthrough="pain-chart"]',title:"Visualize Your Progress",content:"Your entries are automatically charted here, helping you spot patterns and track improvements over time.",placement:"left"},{target:'[data-walkthrough="wcb-report"]',title:"Generate Reports",content:"When needed, generate professional reports for healthcare providers or WorkSafe BC submissions.",placement:"bottom"},{target:'[data-walkthrough="pain-history"]',title:"Review Your History",content:"Access detailed views of all your pain entries, with filtering and search capabilities.",placement:"top"}],PO=Object.freeze(Object.defineProperty({__proto__:null,samplePainEntries:LO,walkthroughSteps:Zw},Symbol.toStringTag,{value:"Module"}));function MO(){const{entries:n,ui:e,error:t,addEntry:s,setShowOnboarding:i,setShowWalkthrough:r,setError:a,loadSampleData:o}=Yu(),c=CO();X.useEffect(()=>{try{const w=un.get("pain-tracker-onboarding-completed"),S=n.length>0;!w&&!S&&i(!0)}catch(w){console.warn("Unable to check onboarding status:",w)}},[n.length,i]);const d=w=>{try{un.set("pain-tracker-onboarding-completed","true")}catch(S){console.warn("Unable to save onboarding status:",S)}i(!1),w?(o(),c.success("Sample data loaded!","Explore the features with example pain entries. You can clear this data anytime.")):c.info("Welcome to Pain Tracker!","Start by recording your first pain entry above.")},u=()=>{try{un.set("pain-tracker-onboarding-completed","true")}catch(w){console.warn("Unable to save onboarding status:",w)}i(!1),c.info("Onboarding skipped","You can always access help from the help menu.")},f=()=>{r(!0)},m=()=>{r(!1),c.success("Tutorial completed!","You're all set to start tracking your pain effectively.")},h=()=>{r(!1)},y=w=>{if(!w.baselineData)return!1;const{pain:S}=w.baselineData;if(typeof S!="number"||S<0||S>10)return!1;if(w.qualityOfLife){const{sleepQuality:j,moodImpact:C}=w.qualityOfLife;if(typeof j!="number"||j<0||j>10||typeof C!="number"||C<0||C>10)return!1}return!0},x=w=>{try{if(!y(w)){a("Invalid pain entry data. Please check your input values."),c.error("Invalid Entry","Please check your input values and try again.");return}s(w),a(null),c.success("Entry Saved","Your pain entry has been recorded successfully.")}catch(S){a("Failed to add pain entry. Please try again."),c.error("Save Failed","Unable to add pain entry. Please try again."),console.error("Error adding pain entry:",S)}};return l.jsxs(l.Fragment,{children:[l.jsx(SO,{entries:n,error:t,onAddEntry:x,onStartWalkthrough:f}),e.showOnboarding&&l.jsx(kO,{onComplete:d,onSkip:u}),l.jsx(NO,{steps:Zw,isActive:e.showWalkthrough,onComplete:m,onSkip:h})]})}const pt=n=>typeof n=="string",ec=()=>{let n,e;const t=new Promise((s,i)=>{n=s,e=i});return t.resolve=n,t.reject=e,t},Yx=n=>n==null?"":""+n,DO=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},TO=/###/g,Zx=n=>n&&n.indexOf("###")>-1?n.replace(TO,"."):n,Kx=n=>!n||pt(n),wc=(n,e,t)=>{const s=pt(e)?e.split("."):e;let i=0;for(;i<s.length-1;){if(Kx(n))return{};const r=Zx(s[i]);!n[r]&&t&&(n[r]=new t),Object.prototype.hasOwnProperty.call(n,r)?n=n[r]:n={},++i}return Kx(n)?{}:{obj:n,k:Zx(s[i])}},Jx=(n,e,t)=>{const{obj:s,k:i}=wc(n,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=wc(n,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=wc(n,a,Object),o?.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=t},IO=(n,e,t,s)=>{const{obj:i,k:r}=wc(n,e,Object);i[r]=i[r]||[],i[r].push(t)},qu=(n,e)=>{const{obj:t,k:s}=wc(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},EO=(n,e,t)=>{const s=qu(n,t);return s!==void 0?s:qu(e,t)},Kw=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?pt(n[s])||n[s]instanceof String||pt(e[s])||e[s]instanceof String?t&&(n[s]=e[s]):Kw(n[s],e[s],t):n[s]=e[s]);return n},Oo=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var OO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const RO=n=>pt(n)?n.replace(/[&<>"'\/]/g,e=>OO[e]):n;class FO{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const zO=[" ",",","?","!",";"],BO=new FO(20),$O=(n,e,t)=>{e=e||"",t=t||"";const s=zO.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const i=BO.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(n);if(!r){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(r=!0)}return r},tm=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const s=e.split(t);let i=n;for(let r=0;r<s.length;){if(!i||typeof i!="object")return;let a,o="";for(let c=r;c<s.length;++c)if(c!==r&&(o+=t),o+=s[c],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<s.length-1)continue;r+=c-r+1;break}i=a}return i},Oc=n=>n?.replace("_","-"),WO={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Uu{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||WO,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(pt(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Uu(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Uu(this.logger,e)}}var Ji=new Uu;class _h{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,r])=>{for(let a=0;a<r;a++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,r])=>{for(let a=0;a<r;a++)i.apply(i,[e,...t])})}}class Qx extends _h{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,i={}){const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):pt(s)&&r?o.push(...s.split(r)):o.push(s)));const c=qu(this.data,o);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),c||!a||!pt(s)?c:tm(this.data?.[e]?.[t],s,r)}addResource(e,t,s,i,r={silent:!1}){const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),Jx(this.data,o,i),r.silent||this.emit("added",e,t,s,i)}addResources(e,t,s,i={silent:!1}){for(const r in s)(pt(s[r])||Array.isArray(s[r]))&&this.addResource(e,t,r,s[r],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,r,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=s,s=t,t=o[1]),this.addNamespaces(t);let c=qu(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?Kw(c,s,r):c={...c,...s},Jx(this.data,o,c),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var Jw={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,i){return n.forEach(r=>{e=this.processors[r]?.process(e,t,s,i)??e}),e}};const Qw=Symbol("i18next/PATH_KEY");function qO(){const n=[],e=Object.create(null);let t;return e.get=(s,i)=>(t?.revoke?.(),i===Qw?n:(n.push(i),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function nm(n,e){const{[Qw]:t}=n(qO());return t.join(e?.keySeparator??".")}const Xx={},ev=n=>!pt(n)&&typeof n!="boolean"&&typeof n!="number";class Vu extends _h{constructor(e,t={}){super(),DO(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ji.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};return e==null?!1:this.resolve(e,s)?.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!$O(e,s,i);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:pt(r)?[r]:r};const d=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(d[0])>-1)&&(r=d.shift()),e=d.join(i)}return{key:e,namespaces:pt(r)?[r]:r}}translate(e,t,s){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=nm(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const r=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],i),d=c[c.length-1];let u=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const f=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return m?r?{res:`${d}${u}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${u}${o}`:r?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:o;const h=this.resolve(e,i);let y=h?.res;const x=h?.usedKey||o,w=h?.exactUsedKey||o,S=["[object Number]","[object Function]","[object RegExp]"],j=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,L=i.count!==void 0&&!pt(i.count),P=Vu.hasDefaultValue(i),O=L?this.pluralResolver.getSuffix(f,i.count,i):"",k=i.ordinal&&L?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",A=L&&!i.ordinal&&i.count===0,M=A&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${O}`]||i[`defaultValue${k}`]||i.defaultValue;let V=y;C&&!y&&P&&(V=M);const _=ev(V),T=Object.prototype.toString.apply(V);if(C&&V&&_&&S.indexOf(T)<0&&!(pt(j)&&Array.isArray(V))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,V,{...i,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(h.res=W,h.usedParams=this.getUsedParamsDetails(i),h):W}if(a){const W=Array.isArray(V),D=W?[]:{},Q=W?w:x;for(const ne in V)if(Object.prototype.hasOwnProperty.call(V,ne)){const ae=`${Q}${a}${ne}`;P&&!y?D[ne]=this.translate(ae,{...i,defaultValue:ev(M)?M[ne]:void 0,joinArrays:!1,ns:c}):D[ne]=this.translate(ae,{...i,joinArrays:!1,ns:c}),D[ne]===ae&&(D[ne]=V[ne])}y=D}}else if(C&&pt(j)&&Array.isArray(y))y=y.join(j),y&&(y=this.extendTranslation(y,e,i,s));else{let W=!1,D=!1;!this.isValidLookup(y)&&P&&(W=!0,y=M),this.isValidLookup(y)||(D=!0,y=o);const ne=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&D?void 0:y,ae=P&&M!==y&&this.options.updateMissing;if(D||W||ae){if(this.logger.log(ae?"updateKey":"missingKey",f,d,o,ae?M:y),a){const ge=this.resolve(o,{...i,keySeparator:!1});ge&&ge.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const ce=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ce&&ce[0])for(let ge=0;ge<ce.length;ge++)F.push(ce[ge]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(i.lng||this.language):F.push(i.lng||this.language);const Se=(ge,R,U)=>{const H=P&&U!==y?U:ne;this.options.missingKeyHandler?this.options.missingKeyHandler(ge,d,R,H,ae,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ge,d,R,H,ae,i),this.emit("missingKey",ge,d,R,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?F.forEach(ge=>{const R=this.pluralResolver.getSuffixes(ge,i);A&&i[`defaultValue${this.options.pluralSeparator}zero`]&&R.indexOf(`${this.options.pluralSeparator}zero`)<0&&R.push(`${this.options.pluralSeparator}zero`),R.forEach(U=>{Se([ge],o+U,i[`defaultValue${U}`]||M)})}):Se(F,o,M))}y=this.extendTranslation(y,e,i,h,s),D&&y===o&&this.options.appendNamespaceToMissingKey&&(y=`${d}${u}${o}`),(D||W)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${u}${o}`:o,W?y:void 0,i))}return r?(h.res=y,h.usedParams=this.getUsedParamsDetails(i),h):y}extendTranslation(e,t,s,i,r){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const c=pt(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const f=e.match(this.interpolator.nestingRegexp);d=f&&f.length}let u=s.replace&&!pt(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,s.lng||this.language||i.usedLng,s),c){const f=e.match(this.interpolator.nestingRegexp),m=f&&f.length;d<m&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...f)=>r?.[0]===f[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):this.translate(...f,t),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,o=pt(a)?[a]:a;return e!=null&&o?.length&&s.applyPostProcessor!==!1&&(e=Jw.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,i,r,a,o;return pt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(c,t),u=d.key;i=u;let f=d.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const m=t.count!==void 0&&!pt(t.count),h=m&&!t.ordinal&&t.count===0,y=t.context!==void 0&&(pt(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(w=>{this.isValidLookup(s)||(o=w,!Xx[`${x[0]}-${w}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(Xx[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${i}" for languages "${x.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(S=>{if(this.isValidLookup(s))return;a=S;const j=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(j,u,S,w,t);else{let L;m&&(L=this.pluralResolver.getSuffix(S,t.count,t));const P=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(t.ordinal&&L.indexOf(O)===0&&j.push(u+L.replace(O,this.options.pluralSeparator)),j.push(u+L),h&&j.push(u+P)),y){const k=`${u}${this.options.contextSeparator||"_"}${t.context}`;j.push(k),m&&(t.ordinal&&L.indexOf(O)===0&&j.push(k+L.replace(O,this.options.pluralSeparator)),j.push(k+L),h&&j.push(k+P))}}let C;for(;C=j.pop();)this.isValidLookup(s)||(r=C,s=this.getResource(S,w,C,t))}))})}),{res:s,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!pt(e.replace);let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const r of t)delete i[r]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class tv{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ji.create("languageUtils")}getScriptPartFromCode(e){if(e=Oc(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Oc(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(pt(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return t=i;const r=this.getLanguagePartFromCode(s);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(a=>{if(a===r)return a;if(!(a.indexOf("-")<0&&r.indexOf("-")<0)&&(a.indexOf("-")>0&&r.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===r||a.indexOf(r)===0&&r.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),pt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return pt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):pt(e)&&r(this.formatLanguageCode(e)),s.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}const nv={zero:0,one:1,two:2,few:3,many:4,other:5},sv={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class UO{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ji.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=Oc(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(s,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),sv;if(!e.match(/-|_/))return sv;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[r]=a,a}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((i,r)=>nv[i]-nv[r]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,s={}){const i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const iv=(n,e,t,s=".",i=!0)=>{let r=EO(n,e,t);return!r&&i&&pt(t)&&(r=tm(n,t,s),r===void 0&&(r=tm(e,t,s))),r},cp=n=>n.replace(/\$/g,"$$$$");class VO{constructor(e={}){this.logger=Ji.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:f,nestingPrefix:m,nestingPrefixEscaped:h,nestingSuffix:y,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:S,alwaysFormat:j}=e.interpolation;this.escape=t!==void 0?t:RO,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Oo(r):a||"{{",this.suffix=o?Oo(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?Oo(m):h||Oo("$t("),this.nestingSuffix=y?Oo(y):x||Oo(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=S||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let r,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=h=>{if(h.indexOf(this.formatSeparator)<0){const S=iv(t,c,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,s,{...i,...t,interpolationkey:h}):S}const y=h.split(this.formatSeparator),x=y.shift().trim(),w=y.join(this.formatSeparator).trim();return this.format(iv(t,c,x,this.options.keySeparator,this.options.ignoreJSONStructure),w,s,{...i,...t,interpolationkey:x})};this.resetRegExp();const u=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>cp(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?cp(this.escape(h)):cp(h)}].forEach(h=>{for(o=0;r=h.regex.exec(e);){const y=r[1].trim();if(a=d(y),a===void 0)if(typeof u=="function"){const w=u(e,r,i);a=pt(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))a="";else if(f){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!pt(a)&&!this.useRawValueToEscape&&(a=Yx(a));const x=h.safeValue(a);if(e=e.replace(r[0],x),f?(h.regex.lastIndex+=a.length,h.regex.lastIndex-=r[0].length):h.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,s={}){let i,r,a;const o=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const f=c.split(new RegExp(`${u}[ ]*{`));let m=`{${f[1]}`;c=f[0],m=this.interpolate(m,a);const h=m.match(/'/g),y=m.match(/"/g);((h?.length??0)%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{a=JSON.parse(m),d&&(a={...d,...a})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${u}${m}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];a={...s},a=a.replace&&!pt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(c=i[1].slice(d).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),r=t(o.call(this,i[1].trim(),a),a),r&&i[0]===e&&!pt(r))return r;pt(r)||(r=Yx(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),r=""),c.length&&(r=c.reduce((u,f)=>this.format(u,f,s.lng,{...s,interpolationkey:i[1].trim()}),r.trim())),e=e.replace(i[0],r),this.regexp.lastIndex=0}return e}}const HO=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();t[u]||(t[u]=d),d==="false"&&(t[u]=!1),d==="true"&&(t[u]=!0),isNaN(d)||(t[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},rv=n=>{const e={};return(t,s,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const a=s+JSON.stringify(r);let o=e[a];return o||(o=n(Oc(s),i),e[a]=o),o(t)}},GO=n=>(e,t,s)=>n(Oc(t),s)(e);class YO{constructor(e={}){this.logger=Ji.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?rv:GO;this.formats={number:s((i,r)=>{const a=new Intl.NumberFormat(i,{...r});return o=>a.format(o)}),currency:s((i,r)=>{const a=new Intl.NumberFormat(i,{...r,style:"currency"});return o=>a.format(o)}),datetime:s((i,r)=>{const a=new Intl.DateTimeFormat(i,{...r});return o=>a.format(o)}),relativetime:s((i,r)=>{const a=new Intl.RelativeTimeFormat(i,{...r});return o=>a.format(o,r.range||"day")}),list:s((i,r)=>{const a=new Intl.ListFormat(i,{...r});return o=>a.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=rv(t)}format(e,t,s,i={}){const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,c)=>{const{formatName:d,formatOptions:u}=HO(c);if(this.formats[d]){let f=o;try{const m=i?.formatParams?.[i.interpolationkey]||{},h=m.locale||m.lng||i.locale||i.lng||s;f=this.formats[d](o,h,{...u,...i,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${d}`);return o},e)}}const ZO=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class KO extends _h{constructor(e,t,s,i={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=Ji.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,i.backend,i)}queueLoad(e,t,s,i){const r={},a={},o={},c={};return e.forEach(d=>{let u=!0;t.forEach(f=>{const m=`${d}|${f}`;!s.reload&&this.store.hasResourceBundle(d,f)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?a[m]===void 0&&(a[m]=!0):(this.state[m]=1,u=!1,a[m]===void 0&&(a[m]=!0),r[m]===void 0&&(r[m]=!0),c[f]===void 0&&(c[f]=!0)))}),u||(o[d]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,s){const i=e.split("|"),r=i[0],a=i[1];t&&this.emit("failedLoading",r,a,t),!t&&s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(c=>{IO(c.loaded,[r],a),ZO(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const u=c.loaded[d];u.length&&u.forEach(f=>{o[d][f]===void 0&&(o[d][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,s,i=0,r=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:r,callback:a});return}this.readingCalls++;const o=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(d&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,r*2,a)},r);return}a(d,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const d=c(e,t);d&&typeof d.then=="function"?d.then(u=>o(null,u)).catch(o):o(null,d)}catch(d){o(d)}return}return c(e,t,o)}prepareLoading(e,t,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();pt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),pt(t)&&(t=[t]);const r=this.queueLoad(e,t,s,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),i=s[0],r=s[1];this.read(i,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${r} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,i,r,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const c={...a,isUpdate:r},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,t,s,i,c):u=d(e,t,s,i),u&&typeof u.then=="function"?u.then(f=>o(null,f)).catch(o):o(null,u)}catch(u){o(u)}else d(e,t,s,i,o,c)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}const av=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),pt(n[1])&&(e.defaultValue=n[1]),pt(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ov=n=>(pt(n.ns)&&(n.ns=[n.ns]),pt(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),pt(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Xd=()=>{},JO=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Rc extends _h{constructor(e={},t){if(super(),this.options=ov(e),this.services={},this.logger=Ji,this.modules={external:[]},JO(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(pt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=av();this.options={...s,...this.options,...ov(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Ji.init(i(this.modules.logger),this.options):Ji.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=YO;const u=new tv(this.options);this.store=new Qx(this.options.resources,this.options);const f=this.services;f.logger=Ji,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new UO(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=i(d),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new VO(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new KO(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(h,...y)=>{this.emit(h,...y)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Vu(this.services,this.options),this.translator.on("*",(h,...y)=>{this.emit(h,...y)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Xd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...u)=>this.store[d](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...u)=>(this.store[d](...u),this)});const o=ec(),c=()=>{const d=(u,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(f),t(u,f)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(e,t=Xd){let s=t;const i=pt(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const r=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(d=>{d!=="cimode"&&r.indexOf(d)<0&&r.push(d)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(o=>a(o)),this.services.backendConnector.load(r,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(e,t,s){const i=ec();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Xd),this.services.backendConnector.reload(e,t,r=>{i.resolve(),s(r)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Jw.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=ec();this.emit("languageChanging",e);const i=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},r=(o,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...d)=>this.t(...d)),t&&t(o,(...d)=>this.t(...d))},a=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const c=pt(o)?o:o&&o[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(pt(o)?[o]:o);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,u=>{r(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,s){const i=(r,a,...o)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([r,a].concat(o)):c={...a},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||i.keyPrefix);const d=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(r)?u=r.map(f=>(typeof f=="function"&&(f=nm(f,{...this.options,...a})),`${c.keyPrefix}${d}${f}`)):(typeof r=="function"&&(r=nm(r,{...this.options,...a})),u=c.keyPrefix?`${c.keyPrefix}${d}${r}`:r),this.t(u,c)};return pt(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!i||a(r,e)))}loadNamespaces(e,t){const s=ec();return this.options.ns?(pt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=ec();pt(e)&&(e=[e]);const i=this.options.preload||[],r=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const r=i.getTextInfo();if(r&&r.direction)return r.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new tv(av());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Rc(e,t)}cloneInstance(e={},t=Xd){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new Rc(i);if((e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s){const o=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((u,f)=>(u[f]={...c[d][f]},u),c[d]),c),{});r.store=new Qx(o,i),r.services.resourceStore=r.store}return r.translator=new Vu(r.services,i),r.translator.on("*",(o,...c)=>{r.emit(o,...c)}),r.init(i,t),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ws=Rc.createInstance();ws.createInstance=Rc.createInstance;ws.createInstance;ws.dir;ws.init;ws.loadResources;ws.reloadResources;ws.use;ws.changeLanguage;ws.getFixedT;ws.t;ws.exists;ws.setDefaultNamespace;ws.hasLoadedNamespace;ws.loadNamespaces;ws.loadLanguages;const{slice:QO,forEach:XO}=[];function eR(n){return XO.call(QO.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function tR(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const lv=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,nR=function(n,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let r=`${n}=${i}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!lv.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!lv.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r},cv={create(n,e,t,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),s&&(i.domain=s),document.cookie=nR(n,e,i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let s=0;s<t.length;s++){let i=t[s];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var sR={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return cv.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:s,cookieDomain:i,cookieOptions:r}=e;t&&typeof document<"u"&&cv.create(t,n,s,i,r)}},iR={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const r=s.substring(1).split("&");for(let a=0;a<r.length;a++){const o=r[a].indexOf("=");o>0&&r[a].substring(0,o)===e&&(t=r[a].substring(o+1))}}return t}},rR={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const r=i.substring(1);if(e){const a=r.split("&");for(let o=0;o<a.length;o++){const c=a[o].indexOf("=");c>0&&a[o].substring(0,c)===e&&(s=a[o].substring(c+1))}}if(s)return s;if(!s&&t>-1){const a=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return s}};let Ro=null;const dv=()=>{if(Ro!==null)return Ro;try{if(Ro=typeof window<"u"&&window.localStorage!==null,!Ro)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ro=!1}return Ro};var aR={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&dv())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&dv()&&window.localStorage.setItem(t,n)}};let Fo=null;const uv=()=>{if(Fo!==null)return Fo;try{if(Fo=typeof window<"u"&&window.sessionStorage!==null,!Fo)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Fo=!1}return Fo};var oR={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&uv())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&uv()&&window.sessionStorage.setItem(t,n)}},lR={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:s,language:i}=navigator;if(t)for(let r=0;r<t.length;r++)e.push(t[r]);s&&e.push(s),i&&e.push(i)}return e.length>0?e:void 0}},cR={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},dR={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},uR={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[t]}};let Xw=!1;try{document.cookie,Xw=!0}catch{}const e5=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Xw||e5.splice(1,1);const hR=()=>({order:e5,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class t5{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=eR(t,this.options||{},hR()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(sR),this.addDetector(iR),this.addDetector(aR),this.addDetector(oR),this.addDetector(lR),this.addDetector(cR),this.addDetector(dR),this.addDetector(uR),this.addDetector(rR)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(s=>{if(this.detectors[s]){let i=this.detectors[s].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(s=>s!=null&&!tR(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}t5.type="languageDetector";const fR={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",loading:"Loading...",error:"Error",success:"Success",yes:"Yes",no:"No",close:"Close",back:"Back",next:"Next",previous:"Previous",export:"Export",import:"Import",print:"Print"},pR={overview:"Overview",comparisons:"Comparisons",heatmap:"Body Heatmap",treatment:"Treatment Timeline",clinical:"Clinical Export"},mR={level:"Pain Level",location:"Location",locations:"Locations",symptoms:"Symptoms",intensity:"Intensity",average:"Average Pain",current:"Current Pain",trend:"Pain Trend",assessment:"Pain Assessment"},gR={title:"Pain Analytics",noData:"No data available",totalEntries:"Total Entries",dateRange:"Date Range",summary:"Summary",details:"Details"},yR={settings:"Accessibility Settings",theme:"Visual Theme",themes:{light:"Light Theme",dark:"Dark Theme",highContrast:"High Contrast"},reducedMotion:"Reduced Motion",enabled:"Enabled",disabled:"Disabled",keyboardTips:"Keyboard Navigation Tips"},xR={common:fR,navigation:pR,pain:mR,analytics:gR,export:{clinical:"Clinical Data Export",visitSummary:"Visit Summary",formats:{standard:"Standard Clinical Export",detailed:"Detailed Comprehensive Export",summary:"Executive Summary Export"}},accessibility:yR},vR={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",loading:"Chargement...",error:"Erreur",success:"Succs",yes:"Oui",no:"Non",close:"Fermer",back:"Retour",next:"Suivant",previous:"Prcdent",export:"Exporter",import:"Importer",print:"Imprimer"},bR={overview:"Aperu",comparisons:"Comparaisons",heatmap:"Carte thermique corporelle",treatment:"Chronologie des traitements",clinical:"Exportation clinique"},wR={level:"Niveau de douleur",location:"Emplacement",locations:"Emplacements",symptoms:"Symptmes",intensity:"Intensit",average:"Douleur moyenne",current:"Douleur actuelle",trend:"Tendance de la douleur",assessment:"valuation de la douleur"},SR={title:"Analyses de la douleur",noData:"Aucune donne disponible",totalEntries:"Total des entres",dateRange:"Plage de dates",summary:"Rsum",details:"Dtails"},kR={settings:"Paramtres d'accessibilit",theme:"Thme visuel",themes:{light:"Thme clair",dark:"Thme sombre",highContrast:"Contraste lev"},reducedMotion:"Mouvement rduit",enabled:"Activ",disabled:"Dsactiv",keyboardTips:"Conseils de navigation au clavier"},NR={common:vR,navigation:bR,pain:wR,analytics:SR,export:{clinical:"Exportation de donnes cliniques",visitSummary:"Rsum de visite",formats:{standard:"Exportation clinique standard",detailed:"Exportation complte dtaille",summary:"Exportation de rsum excutif"}},accessibility:kR},_R={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",loading:"Cargando...",error:"Error",success:"xito",yes:"S",no:"No",close:"Cerrar",back:"Atrs",next:"Siguiente",previous:"Anterior",export:"Exportar",import:"Importar",print:"Imprimir"},jR={overview:"Resumen",comparisons:"Comparaciones",heatmap:"Mapa de calor corporal",treatment:"Cronologa de tratamiento",clinical:"Exportacin clnica"},AR={level:"Nivel de dolor",location:"Ubicacin",locations:"Ubicaciones",symptoms:"Sntomas",intensity:"Intensidad",average:"Dolor promedio",current:"Dolor actual",trend:"Tendencia del dolor",assessment:"Evaluacin del dolor"},CR={title:"Anlisis del dolor",noData:"No hay datos disponibles",totalEntries:"Total de entradas",dateRange:"Rango de fechas",summary:"Resumen",details:"Detalles"},LR={settings:"Configuracin de accesibilidad",theme:"Tema visual",themes:{light:"Tema claro",dark:"Tema oscuro",highContrast:"Alto contraste"},reducedMotion:"Movimiento reducido",enabled:"Habilitado",disabled:"Deshabilitado",keyboardTips:"Consejos de navegacin por teclado"},PR={common:_R,navigation:jR,pain:AR,analytics:CR,export:{clinical:"Exportacin de datos clnicos",visitSummary:"Resumen de visita",formats:{standard:"Exportacin clnica estndar",detailed:"Exportacin detallada completa",summary:"Exportacin de resumen ejecutivo"}},accessibility:LR},MR={en:{translation:xR},fr:{translation:NR},es:{translation:PR}};ws.use(t5).use(tD).init({resources:MR,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},react:{useSuspense:!1}});class jh{dbName="pain-tracker-offline";dbVersion=1;db=null;static _instance=null;stores={data:"offline-data",syncQueue:"sync-queue",cache:"cache-metadata"};async init(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,this.dbVersion);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=i=>{const r=i.target.result;if(!r.objectStoreNames.contains(this.stores.data)){const a=r.createObjectStore(this.stores.data,{keyPath:"id",autoIncrement:!0});a.createIndex("type","type",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("synced","synced",{unique:!1})}if(!r.objectStoreNames.contains(this.stores.syncQueue)){const a=r.createObjectStore(this.stores.syncQueue,{keyPath:"id",autoIncrement:!0});a.createIndex("priority","priority",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("retryCount","retryCount",{unique:!1})}r.objectStoreNames.contains(this.stores.cache)||r.createObjectStore(this.stores.cache,{keyPath:"url"}).createIndex("expiry","expiry",{unique:!1})}})}async setItem(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}await this.storeData("settings",{key:e,value:t})}async getItem(e){try{const t=localStorage.getItem(e);if(t!==null)return JSON.parse(t)}catch{}try{const s=(await this.getData("settings")).find(i=>i.data&&typeof i.data=="object"&&"key"in i.data&&i.data.key===e);if(s&&s.data&&typeof s.data=="object"&&"value"in s.data)return s.data.value}catch{}return null}makeTableKey(e,t){return`table:${e}:${t}`}parseTableKey(e){if(!e.startsWith("table:"))return null;const t=e.split(":");return t.length<3?null:{table:t[1],id:t.slice(2).join(":")}}async getAllFromTable(e){const t=await this.getData("settings"),s=[];for(const i of t)if(i.data&&typeof i.data=="object"&&"key"in i.data&&"value"in i.data){const r=i.data.key,a=this.parseTableKey(r);a&&a.table===e&&s.push(i.data.value)}return s}async replaceTable(e,t){const s=await this.getData("settings"),i=[];for(const r of s)if(r.id!==void 0&&r.data&&typeof r.data=="object"&&"key"in r.data){const a=r.data.key,o=this.parseTableKey(a);o&&o.table===e&&i.push(this.deleteData(r.id))}await Promise.allSettled(i);for(const r of t){const a=r.id||crypto.randomUUID();await this.storeData("settings",{key:this.makeTableKey(e,String(a)),value:r})}}async addToTable(e,t){const s=t.id||crypto.randomUUID();await this.storeData("settings",{key:this.makeTableKey(e,String(s)),value:{...t,id:s}})}async updateInTable(e,t,s){const i=await this.getData("settings"),r=this.makeTableKey(e,String(t)),a=i.find(o=>o.data&&typeof o.data=="object"&&"key"in o.data&&o.data.key===r);a&&a.id!==void 0?await this.updateData(a.id,{key:r,value:s}):await this.storeData("settings",{key:r,value:s})}async removeFromTable(e,t){const s=await this.getData("settings"),i=this.makeTableKey(e,String(t)),r=s.find(a=>a.data&&typeof a.data=="object"&&"key"in a.data&&a.data.key===i);r&&r.id!==void 0&&await this.deleteData(r.id)}async getFromTable(e,t){const s=await this.getData("settings"),i=this.makeTableKey(e,String(t)),r=s.find(a=>a.data&&typeof a.data=="object"&&"key"in a.data&&a.data.key===i);return r&&r.data&&typeof r.data=="object"&&"value"in r.data?r.data.value:null}async storeData(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),o={timestamp:new Date().toISOString(),type:e,data:t,synced:!1,lastModified:new Date().toISOString()},c=a.add(o);c.onsuccess=()=>s(c.result),c.onerror=()=>i(c.error)})}async updateData(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),o=a.get(e);o.onsuccess=()=>{const c=o.result;if(c){c.data=t,c.lastModified=new Date().toISOString(),c.synced=!1;const d=a.put(c);d.onsuccess=()=>s(),d.onerror=()=>i(d.error)}else i(new Error("Data not found"))},o.onerror=()=>i(o.error)})}async getData(e){return this.db||await this.init(),new Promise((t,s)=>{const o=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).index("type").getAll(e);o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedData(){return this.db||await this.init(),new Promise((e,t)=>{const a=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).index("synced").getAll(0);a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})}async markAsSynced(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),a=r.get(e);a.onsuccess=()=>{const o=a.result;if(o){o.synced=!0;const c=r.put(o);c.onsuccess=()=>t(),c.onerror=()=>s(c.error)}else s(new Error("Data not found"))},a.onerror=()=>s(a.error)})}async deleteData(e){return this.db||await this.init(),new Promise((t,s)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data).delete(e);a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})}async addToSyncQueue(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue),a={...e,timestamp:new Date().toISOString(),retryCount:0},o=r.add(a);o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})}async getSyncQueue(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction([this.stores.syncQueue],"readonly").objectStore(this.stores.syncQueue).getAll();r.onsuccess=()=>{const a=r.result.sort((o,c)=>{const d={high:0,medium:1,low:2},u=(d[o.priority]||2)-(d[c.priority]||2);return u!==0?u:new Date(o.timestamp).getTime()-new Date(c.timestamp).getTime()});e(a)},r.onerror=()=>t(r.error)})}async updateSyncQueueItem(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue),o=a.get(e);o.onsuccess=()=>{const c=o.result;if(c){Object.assign(c,t);const d=a.put(c);d.onsuccess=()=>s(),d.onerror=()=>i(d.error)}else i(new Error("Sync queue item not found"))},o.onerror=()=>i(o.error)})}async removeSyncQueueItem(e){return this.db||await this.init(),new Promise((t,s)=>{const a=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue).delete(e);a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})}async clearAllData(){return this.db||await this.init(),new Promise((e,t)=>{const s=this.db.transaction([this.stores.data,this.stores.syncQueue],"readwrite");let i=0;const r=()=>{i++,i===2&&e()},a=s.objectStore(this.stores.data),o=s.objectStore(this.stores.syncQueue),c=a.clear(),d=o.clear();c.onsuccess=r,d.onsuccess=r,c.onerror=()=>t(c.error),d.onerror=()=>t(d.error)})}async getStorageUsage(){if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();return{used:e.usage||0,quota:e.quota||0}}return{used:0,quota:0}}async exportData(){const[e,t]=await Promise.all([this.getAllData(),this.getSyncQueue()]);return{data:e,syncQueue:t}}async getAllData(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}async importData(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data);let a=0;const o=e.length;if(o===0){t();return}const c=()=>{a++,a===o&&t()};e.forEach(d=>{const{id:u,...f}=d,m=r.add(f);m.onsuccess=c,m.onerror=()=>s(m.error)})})}static getInstance(){return this._instance||(this._instance=new jh),this._instance}}const gs=jh.getInstance(),DR=Object.freeze(Object.defineProperty({__proto__:null,OfflineStorageService:jh,offlineStorage:gs},Symbol.toStringTag,{value:"Module"}));class ca{static instance;isOnline=navigator.onLine;syncInProgress=!1;retryTimeouts=new Map;maxRetries=3;retryDelays=[1e3,5e3,15e3];constructor(){this.setupEventListeners(),this.startPeriodicSync()}static getInstance(){return ca.instance||(ca.instance=new ca),ca.instance}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("BackgroundSync: Connection restored, starting sync"),this.syncAllPendingData()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("BackgroundSync: Connection lost")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.isOnline&&this.syncAllPendingData()}),window.addEventListener("pwa-online",()=>{this.isOnline=!0,this.syncAllPendingData()})}startPeriodicSync(){setInterval(()=>{this.isOnline&&!this.syncInProgress&&this.syncAllPendingData()},300*1e3)}async queueForSync(e,t,s,i="medium"){try{const r={"Content-Type":"application/json"},a=un.get("auth-token",{encrypt:!0});a&&(r.Authorization=`Bearer ${a}`),await gs.addToSyncQueue({url:e,method:t.toUpperCase(),headers:r,body:s?JSON.stringify(s):void 0,priority:i,type:"api-request"}),console.log(`BackgroundSync: Queued ${t} ${e} for sync`),this.isOnline&&this.syncAllPendingData()}catch(r){throw console.error("BackgroundSync: Failed to queue item for sync:",r),r}}async syncAllPendingData(){if(this.syncInProgress)return console.log("BackgroundSync: Sync already in progress"),this.getEmptyStats();if(!this.isOnline)return console.log("BackgroundSync: Cannot sync while offline"),this.getEmptyStats();this.syncInProgress=!0,console.log("BackgroundSync: Starting sync process");const e={totalItems:0,successCount:0,failureCount:0,skippedCount:0,errors:[]};try{const t=await gs.getSyncQueue();if(e.totalItems=t.length,t.length===0)return console.log("BackgroundSync: No items to sync"),e;console.log(`BackgroundSync: Found ${t.length} items to sync`);for(const s of t)try{const i=await this.syncItem(s);i.success?(e.successCount++,await gs.removeSyncQueueItem(s.id),console.log(`BackgroundSync: Successfully synced ${s.method} ${s.url}`)):i.error&&((s.retryCount||0)>=this.maxRetries?(e.failureCount++,e.errors.push(`Max retries exceeded for ${s.url}: ${i.error}`),await gs.removeSyncQueueItem(s.id),console.error(`BackgroundSync: Max retries exceeded for ${s.url}`)):(await this.scheduleRetry(s,i),e.skippedCount++))}catch(i){e.failureCount++,e.errors.push(`Sync error for ${s.url}: ${i}`),console.error(`BackgroundSync: Error syncing ${s.url}:`,i)}e.successCount>0&&await this.updateLocalStore(),console.log("BackgroundSync: Sync completed",e),this.dispatchSyncEvent("sync-completed",e)}catch(t){const s=t instanceof Error?t.message:String(t);console.error("BackgroundSync: Sync process failed:",t),e.errors.push(`Sync process failed: ${s}`),this.dispatchSyncEvent("sync-error",{error:s})}finally{this.syncInProgress=!1}return e}async syncItem(e){try{if(!this.isOnline)return{success:!1,itemId:e.id,error:"Offline"};const t=await fetch(e.url,{method:e.method,headers:e.headers,body:e.body});if(t.ok)return{success:!0,itemId:e.id};{let s=`HTTP ${t.status}`;try{s=(await t.json()).message||s}catch{s=t.statusText||s}const i=t.status>=500||t.status===429;return{success:!1,itemId:e.id,error:s,retryAfter:i?this.getRetryDelay(e.retryCount||0):void 0}}}catch(t){return{success:!1,itemId:e.id,error:t instanceof Error?t.message:"Network error"}}}async scheduleRetry(e,t){const s=t.retryAfter||this.getRetryDelay(e.retryCount||0);this.retryTimeouts.has(e.id)&&clearTimeout(this.retryTimeouts.get(e.id)),await gs.updateSyncQueueItem(e.id,{retryCount:(e.retryCount||0)+1});const i=setTimeout(()=>{this.retryTimeouts.delete(e.id),this.syncAllPendingData()},s);this.retryTimeouts.set(e.id,i),console.log(`BackgroundSync: Scheduled retry for ${e.url} in ${s}ms`)}getRetryDelay(e){return e<this.retryDelays.length?this.retryDelays[e]:Math.min(3e4,this.retryDelays[this.retryDelays.length-1]*Math.pow(2,e-this.retryDelays.length))}async updateLocalStore(){try{const e=await gs.getUnsyncedData();for(const t of e)t.type==="pain-entry"&&t.synced}catch(e){console.error("BackgroundSync: Failed to update local store:",e)}}getEmptyStats(){return{totalItems:0,successCount:0,failureCount:0,skippedCount:0,errors:[]}}dispatchSyncEvent(e,t){const s=new CustomEvent(`background-sync-${e}`,{detail:t});window.dispatchEvent(s)}async forcSync(){return console.log("BackgroundSync: Force sync requested"),this.syncAllPendingData()}async forceSync(){return this.forcSync()}async clearFailedItems(){try{const t=(await gs.getSyncQueue()).filter(s=>(s.retryCount||0)>=this.maxRetries);await Promise.all(t.map(s=>gs.removeSyncQueueItem(s.id))),console.log(`BackgroundSync: Cleared ${t.length} failed items`)}catch(e){console.error("BackgroundSync: Failed to clear failed items:",e)}}async getPendingItemsCount(){try{return(await gs.getSyncQueue()).length}catch(e){return console.error("BackgroundSync: Failed to get pending items count:",e),0}}getSyncStatus(){return{isOnline:this.isOnline,isSyncing:this.syncInProgress}}async emergencySync(e,t){if(!this.isOnline)return await this.queueForSync(t,"POST",e,"high"),!1;try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${un.get("auth-token",{encrypt:!0})||""}`},body:JSON.stringify(e)})).ok?(console.log("BackgroundSync: Emergency sync successful"),!0):(await this.queueForSync(t,"POST",e,"high"),!1)}catch(s){return console.error("BackgroundSync: Emergency sync failed:",s),await this.queueForSync(t,"POST",e,"high"),!1}}}class n5{backgroundSync;baseUrl;constructor(){this.backgroundSync=ca.getInstance(),this.baseUrl="/api"}async syncPainEntry(e){const t=`${this.baseUrl}/pain-entries`;await this.backgroundSync.queueForSync(t,"POST",e,"high")}async syncPainEntryUpdate(e,t){const s=`${this.baseUrl}/pain-entries/${e}`;await this.backgroundSync.queueForSync(s,"PUT",t,"medium")}async syncEmergencyData(e){const t=`${this.baseUrl}/emergency`;return this.backgroundSync.emergencySync(e,t)}async syncActivityLog(e){const t=`${this.baseUrl}/activity-logs`;await this.backgroundSync.queueForSync(t,"POST",e,"low")}async syncSettings(e){const t=`${this.baseUrl}/settings`;await this.backgroundSync.queueForSync(t,"PUT",e,"low")}async getSyncStatus(){const t=(await gs.getSyncQueue()).filter(a=>a.url.includes("/pain-entries")),s=un.get("last-sync-time"),{isOnline:i,isSyncing:r}=this.backgroundSync.getSyncStatus();return{pendingEntries:t.length,lastSync:s,isOnline:i,isSyncing:r}}async forceSync(){(await this.backgroundSync.forceSync()).successCount>0&&un.set("last-sync-time",new Date().toISOString())}}const sm=ca.getInstance(),TR=new n5,s5=Object.freeze(Object.defineProperty({__proto__:null,BackgroundSyncService:ca,PainTrackerSync:n5,backgroundSync:sm,painTrackerSync:TR},Symbol.toStringTag,{value:"Module"})),IR={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Yo{static instance;installPromptEvent=null;isInstalled=!1;swRegistration=null;isInitialized=!1;capabilities={serviceWorker:!1,pushNotifications:!1,backgroundSync:!1,persistentStorage:!1,installPrompt:!1,fullscreen:!1};constructor(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}static getInstance(){return Yo.instance||(Yo.instance=new Yo),Yo.instance}async init(){this.isInitialized||(console.log("PWA: Initializing PWA Manager"),this.checkInstallStatus(),this.setupInstallPromptListener(),await this.detectCapabilities(),await this.registerServiceWorker(),await this.initializeOfflineStorage(),this.setupOnlineOfflineListeners(),this.setupPerformanceMonitoring(),this.isInitialized=!0,this.dispatchCustomEvent("pwa-initialized",{capabilities:this.capabilities}))}async detectCapabilities(){this.capabilities.serviceWorker="serviceWorker"in navigator,this.capabilities.pushNotifications="Notification"in window&&"PushManager"in window,this.capabilities.backgroundSync="serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,this.capabilities.installPrompt="BeforeInstallPromptEvent"in window,this.capabilities.fullscreen="requestFullscreen"in document.documentElement,"storage"in navigator&&"persist"in navigator.storage&&(this.capabilities.persistentStorage=await navigator.storage.persist())}getCapabilities(){return{...this.capabilities}}async initializeOfflineStorage(){try{if(await gs.init(),console.log("PWA: Offline storage initialized"),"storage"in navigator&&"persist"in navigator.storage){const e=await navigator.storage.persist();console.log("PWA: Persistent storage:",e?"granted":"denied"),e&&this.dispatchCustomEvent("pwa-persistent-storage-granted")}}catch(e){console.error("PWA: Failed to initialize offline storage:",e),this.dispatchCustomEvent("pwa-storage-error",{error:e})}}async registerServiceWorker(){if(!this.capabilities.serviceWorker){console.warn("PWA: Service Workers not supported");return}try{const e="/pain-tracker/",t=`${e}sw.js`.replace(/\/+/g,"/");this.swRegistration=await navigator.serviceWorker.register(t,{scope:e,updateViaCache:"none"}),console.log("PWA: Service Worker registered successfully",this.swRegistration),this.swRegistration.addEventListener("updatefound",()=>{const s=this.swRegistration?.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&(navigator.serviceWorker.controller?this.notifyUpdate():this.notifyInstalled())})}),navigator.serviceWorker.addEventListener("message",s=>{this.handleServiceWorkerMessage(s)}),this.capabilities.backgroundSync&&this.setupBackgroundSync(),this.monitorServiceWorkerPerformance()}catch(e){console.error("PWA: Service Worker registration failed:",e),this.dispatchCustomEvent("pwa-sw-registration-failed",{error:e})}}async __test_registerSW(){this.swRegistration||!this.capabilities.serviceWorker||await this.registerServiceWorker()}handleServiceWorkerMessage(e){const{data:t}=e;switch(t.type){case"SW_UPDATE_AVAILABLE":this.dispatchCustomEvent("pwa-update-available");break;case"SW_OFFLINE_FALLBACK":this.dispatchCustomEvent("pwa-offline-fallback",{url:t.url});break;case"SW_CACHE_UPDATED":this.dispatchCustomEvent("pwa-cache-updated",{cacheName:t.cacheName});break;case"SW_SYNC_COMPLETED":this.dispatchCustomEvent("pwa-sync-completed",{stats:t.stats});break}}monitorServiceWorkerPerformance(){if(!this.swRegistration)return;let e=0,t=0;navigator.serviceWorker.addEventListener("message",s=>{s.data.type==="CACHE_HIT"?e++:s.data.type==="CACHE_MISS"&&t++}),setInterval(()=>{const s=e+t;if(s>0){const i=e/s*100;this.dispatchCustomEvent("pwa-cache-performance",{hitRatio:Number(Gt(i,2)),totalRequests:s}),e=0,t=0}},6e4)}setupInstallPromptListener(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.installPromptEvent=e,console.log("PWA: Install prompt available"),this.dispatchCustomEvent("pwa-install-available")}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.installPromptEvent=null,console.log("PWA: App installed successfully"),this.dispatchCustomEvent("pwa-installed")})}async showInstallPrompt(){if(!this.installPromptEvent)return!1;try{return await this.installPromptEvent.prompt(),(await this.installPromptEvent.userChoice).outcome==="accepted"?(console.log("PWA: User accepted install prompt"),!0):(console.log("PWA: User dismissed install prompt"),!1)}catch(e){return console.error("PWA: Error showing install prompt:",e),!1}}isInstallPromptAvailable(){return this.installPromptEvent!==null}checkInstallStatus(){window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0),window.navigator.standalone&&(this.isInstalled=!0)}isAppInstalled(){return this.isInstalled}setupOnlineOfflineListeners(){window.addEventListener("online",async()=>{console.log("PWA: Back online"),await this.handleOnlineStatus(!0),this.dispatchCustomEvent("pwa-online")}),window.addEventListener("offline",()=>{console.log("PWA: Gone offline"),this.handleOnlineStatus(!1),this.dispatchCustomEvent("pwa-offline")}),this.monitorConnectionQuality()}async handleOnlineStatus(e){if(e)try{const t=sm;if(typeof t.forceSync=="function"?await t.forceSync():typeof t.forcSync=="function"&&await t.forcSync(),this.swRegistration?.active&&this.swRegistration.active.postMessage({type:"ONLINE"}),"sync"in this.swRegistration)try{await this.swRegistration.sync.register("pain-tracker-sync")}catch(s){console.error("PWA: Background sync registration failed:",s)}}catch(t){console.error("PWA: Failed to sync data when coming online:",t)}}monitorConnectionQuality(){if("connection"in navigator){const e=navigator.connection,t=()=>{e&&this.dispatchCustomEvent("pwa-connection-change",{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData})};e&&typeof e.addEventListener=="function"&&e.addEventListener("change",t),t()}this.startConnectionQualityTests()}startConnectionQualityTests(){setInterval(async()=>{if(!navigator.onLine)return;const e=performance.now();try{const s="/pain-tracker/manifest.json".replace(/\/+/g,"/");await fetch(s,{mode:"cors",cache:"no-cache"});const r=performance.now()-e;this.dispatchCustomEvent("pwa-connection-test",{latency:r,quality:r<100?"good":r<500?"moderate":"poor"})}catch{this.dispatchCustomEvent("pwa-connection-test",{latency:-1,quality:"offline"})}},3e4)}setupPerformanceMonitoring(){"performance"in window&&(window.addEventListener("load",()=>{setTimeout(()=>{const t=performance.getEntriesByType("navigation")[0];this.dispatchCustomEvent("pwa-performance-metrics",{loadTime:t.loadEventEnd-t.fetchStart,domContentLoaded:t.domContentLoadedEventEnd-t.fetchStart,firstPaint:this.getFirstPaint(),cacheHitRatio:this.getCacheHitRatio()})},0)}),new PerformanceObserver(t=>{const i=t.getEntries().filter(r=>r.duration>1e3);i.length>0&&this.dispatchCustomEvent("pwa-slow-resources",{resources:i.map(r=>{const a=r;return{name:r.name,duration:r.duration,size:a.transferSize||0}})})}).observe({type:"resource",buffered:!0}))}getFirstPaint(){const t=performance.getEntriesByType("paint").find(s=>s.name==="first-paint");return t?t.startTime:0}getCacheHitRatio(){const e=un.get("pwa-cache-hit-ratio");return parseFloat(e||"0")}isOnline(){return navigator.onLine}async requestNotificationPermission(){return"Notification"in window?Notification.permission==="default"?await Notification.requestPermission():Notification.permission:(console.warn("PWA: This browser does not support notifications"),"denied")}async subscribeToPushNotifications(){if(!this.swRegistration)return console.error("PWA: Service Worker not registered"),null;try{if(await this.requestNotificationPermission()!=="granted")return console.warn("PWA: Notification permission not granted"),null;const t=IR?.VITE_VAPID_PUBLIC_KEY;if(!t)return console.error("PWA: VAPID public key not found"),null;const s=await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(t).buffer});return console.log("PWA: Push subscription created:",s),s}catch(e){return console.error("PWA: Failed to subscribe to push notifications:",e),null}}async scheduleNotification(e,t,s){!("Notification"in window)||await this.requestNotificationPermission()!=="granted"||setTimeout(()=>{const r="/pain-tracker/";new Notification(e,{body:t,icon:`${r}icons/icon-192x192.png`.replace(/\/+/g,"/"),badge:`${r}icons/badge-72x72.png`.replace(/\/+/g,"/"),tag:"pain-tracker-reminder",requireInteraction:!0})},s)}setupBackgroundSync(){this.swRegistration&&"sync"in this.swRegistration?console.log("PWA: Background sync is supported"):console.log("PWA: Background sync is not supported")}notifyUpdate(){this.dispatchCustomEvent("pwa-update-available")}notifyInstalled(){this.dispatchCustomEvent("pwa-content-cached")}async updateApp(){if(this.swRegistration){const e=this.swRegistration;e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}}dispatchCustomEvent(e,t){const s=new CustomEvent(e,{detail:t});window.dispatchEvent(s)}urlBase64ToUint8Array(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(s),r=new Uint8Array(i.length);for(let a=0;a<i.length;++a)r[a]=i.charCodeAt(a);return r}async clearCaches(){if("caches"in window){const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t))),console.log("PWA: All caches cleared")}}async getCacheSize(){if(!("storage"in navigator&&"estimate"in navigator.storage))return 0;try{return(await navigator.storage.estimate()).usage||0}catch(e){return console.error("PWA: Failed to get cache size:",e),0}}async exportOfflineData(){try{const e=await gs.exportData();return{entries:un.safeJSON("painEntries",[]),settings:un.safeJSON("pain-tracker-settings",{}),timestamp:new Date().toISOString(),syncQueue:e.syncQueue}}catch(e){throw console.error("PWA: Failed to export offline data:",e),e}}async importOfflineData(e){try{if(e.entries&&un.set("painEntries",e.entries),e.settings&&un.set("pain-tracker-settings",e.settings),e.syncQueue)for(const t of e.syncQueue){const s=t;await gs.addToSyncQueue({url:s.url,method:s.method,headers:s.headers||{},body:typeof s.body=="string"?s.body:JSON.stringify(s.body||{}),priority:s.priority||"medium",type:s.type||"sync"})}console.log("PWA: Data imported successfully"),this.dispatchCustomEvent("pwa-data-imported")}catch(t){throw console.error("PWA: Failed to import offline data:",t),t}}async enableHealthDataSync(){try{return"storage"in navigator&&"persist"in navigator.storage&&!await navigator.storage.persist()?(console.warn("PWA: Persistent storage not granted for health data"),!1):this.swRegistration&&"sync"in this.swRegistration?(await this.swRegistration.sync.register("health-data-sync"),console.log("PWA: Health data background sync enabled"),!0):!1}catch(e){return console.error("PWA: Failed to enable health data sync:",e),!1}}async scheduleHealthReminder(e,t,s){if(!("Notification"in window)){console.warn("PWA: Notifications not supported");return}if(await this.requestNotificationPermission()!=="granted"){console.warn("PWA: Notification permission not granted");return}const r=new Date,a=s.getTime()-r.getTime();if(a<=0){this.showNotification(e,t);return}setTimeout(()=>{this.showNotification(e,t)},a),console.log(`PWA: Health reminder scheduled for ${s.toLocaleString()}`)}showNotification(e,t){const s="/pain-tracker/";new Notification(e,{body:t,icon:`${s}icons/icon-192x192.png`.replace(/\/+/g,"/"),badge:`${s}icons/badge-72x72.png`.replace(/\/+/g,"/"),tag:"health-reminder",requireInteraction:!0,data:{url:`${s}?reminder=true`.replace(/\/+/g,"/"),timestamp:new Date().toISOString()}})}async getDiagnostics(){const e=await gs.getStorageUsage(),t=await sm.getPendingItemsCount(),s=un.get("last-sync-time");return{isInstalled:this.isInstalled,hasServiceWorker:!!this.swRegistration,isOnline:navigator.onLine,storageUsage:e,capabilities:this.capabilities,pendingSyncItems:t,lastSync:s}}async clearPWAData(){try{await this.clearCaches(),await gs.clearAllData(),un.keys().forEach(e=>un.remove(e)),console.log("PWA: All PWA data cleared"),this.dispatchCustomEvent("pwa-data-cleared")}catch(e){throw console.error("PWA: Failed to clear PWA data:",e),e}}async resetServiceWorker(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(t=>t.unregister())),console.log("PWA: All service workers unregistered")}await this.clearCaches(),await this.clearPWAData(),console.log("PWA: Service worker completely reset"),this.dispatchCustomEvent("pwa-service-worker-reset")}catch(e){throw console.error("PWA: Failed to reset service worker:",e),e}}async forceRefresh(){try{await this.clearCaches(),window.location.reload()}catch(e){console.error("PWA: Failed to force refresh:",e),window.location.reload()}}async checkForUpdates(){if(!this.swRegistration)return!1;try{return await this.swRegistration.update(),!!this.swRegistration.waiting}catch(e){return console.error("PWA: Failed to check for updates:",e),!1}}}const Zo=Yo.getInstance();function ER(){const[n,e]=X.useState(!1),[t,s]=X.useState(!1);X.useEffect(()=>{const a=()=>{Zo.isAppInstalled()||e(!0)},o=()=>{e(!1),s(!1)};return Zo.isInstallPromptAvailable()&&!Zo.isAppInstalled()&&e(!0),window.addEventListener("pwa-install-available",a),window.addEventListener("pwa-installed",o),()=>{window.removeEventListener("pwa-install-available",a),window.removeEventListener("pwa-installed",o)}},[]);const i=async()=>{s(!0);try{await Zo.showInstallPrompt()||s(!1)}catch(a){console.error("Failed to install PWA:",a),s(!1)}},r=()=>{e(!1),sessionStorage.setItem("pwa-install-dismissed","true")};return sessionStorage.getItem("pwa-install-dismissed")||!n?null:l.jsx(ze,{className:"fixed bottom-4 left-4 z-50 shadow-lg border-primary max-w-sm w-[min(92%,420px)]",role:"dialog","aria-label":"Install Pain Tracker",children:l.jsxs(qe,{className:"p-4",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:l.jsx(rN,{className:"h-6 w-6 text-primary"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Install Pain Tracker"}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add to your home screen for quick access and offline use"}),l.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[l.jsxs(dt,{size:"sm",onClick:i,disabled:t,className:"flex items-center space-x-1",children:[l.jsx(pu,{className:"h-4 w-4"}),l.jsx("span",{children:t?"Installing...":"Install"})]}),l.jsx(dt,{variant:"ghost",size:"sm",onClick:r,className:"text-muted-foreground",children:l.jsx(Ls,{className:"h-4 w-4"})})]})]})]}),l.jsx("div",{className:"mt-4 pt-3 border-t border-muted",children:l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full"}),l.jsx("span",{children:"Works offline"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),l.jsx("span",{children:"Fast app-like experience"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full"}),l.jsx("span",{children:"Reminder notifications"})]})]})})]})})}function OR(){const[n,e]=X.useState({isOnline:navigator.onLine,pendingSync:0,isSyncing:!1});return X.useEffect(()=>{const t=async()=>{try{const{backgroundSync:o}=await Dr(async()=>{const{backgroundSync:u}=await Promise.resolve().then(()=>s5);return{backgroundSync:u}},void 0),c=await o.getPendingItemsCount(),{isSyncing:d}=o.getSyncStatus();e(u=>({...u,pendingSync:c,isSyncing:d}))}catch{e(o=>({...o,pendingSync:0,isSyncing:!1}))}},s=()=>{e(o=>({...o,isOnline:!0})),t()},i=()=>e(o=>({...o,isOnline:!1})),r=()=>t();window.addEventListener("online",s),window.addEventListener("offline",i),window.addEventListener("background-sync-sync-completed",r),window.addEventListener("background-sync-sync-started",r),t();const a=setInterval(t,3e4);return()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i),window.removeEventListener("background-sync-sync-completed",r),window.removeEventListener("background-sync-sync-started",r),clearInterval(a)}},[]),n.isOnline&&n.pendingSync===0&&!n.isSyncing?null:l.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg border shadow-lg border-l-4 border-l-blue-500 p-3 max-w-xs",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[!n.isOnline&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),l.jsx("span",{className:"text-sm font-medium text-red-700",children:"Offline"})]}),n.isSyncing&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Syncing..."})]}),n.pendingSync>0&&!n.isSyncing&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:[n.pendingSync," pending"]})]})]}),!n.isOnline&&l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Your data is saved locally and will sync when you're back online"})]})})}function RR(){const[n,e]=X.useState(!1);X.useEffect(()=>{try{const s=un.get(Pf);e(s!=="true")}catch{e(!0)}},[]);const t=()=>{try{un.set(Pf,"true")}catch{try{localStorage.setItem(Pf,"1")}catch{}}e(!1)};return n?l.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-3xl w-full px-4",children:l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4 shadow-md flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:Lf.title}),l.jsx("p",{className:"text-sm mt-1",children:Lf.message}),l.jsx("a",{className:"text-xs text-yellow-700 underline mt-2 inline-block",href:Lf.supportUrl,target:"_blank",rel:"noreferrer",children:"Report an issue or give feedback"})]}),l.jsx("div",{className:"ml-4 flex items-start",children:l.jsx("button",{"aria-label":"Dismiss beta notice",onClick:t,className:"text-sm bg-yellow-600 text-white px-3 py-1 rounded-md hover:bg-yellow-700",children:"Dismiss"})})]})}):null}const FR=n=>n.includes("headache")?["head","migraine"]:n.includes("back")?["back","spine"]:["general"];function zR(){const n=new CustomEvent("quick-log",{detail:{source:"quick-actions",time:new Date().toISOString()}});window.dispatchEvent(n)}function BR(){const[n,e]=X.useState([]),[t,s]=X.useState(!1);function i(){const r={time:new Date().toISOString(),suggestedTags:[]},o=FR("");r.suggestedTags=o,window.dispatchEvent(new CustomEvent("quick-note",{detail:r})),e(o),setTimeout(()=>e([]),6e3)}return l.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:l.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[t&&l.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[l.jsx("button",{"aria-label":"Quick note",onClick:i,className:"flex items-center justify-center w-12 h-12 rounded-full bg-secondary text-secondary-foreground shadow-md",title:"Quick note",children:""}),l.jsx("button",{"aria-label":"Quick log pain",onClick:()=>{zR(),s(!1)},className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary text-primary-foreground shadow-md",title:"Quick log pain",children:"+"})]}),l.jsx("button",{"aria-label":"Open quick actions",onClick:()=>s(r=>!r),className:"flex items-center justify-center w-14 h-14 rounded-full bg-foreground text-foreground-contrast shadow-lg",children:t?"":""}),n.length>0&&l.jsxs("div",{className:"mt-2 bg-card border rounded p-2 text-sm shadow-md",children:["Suggested tags: ",n.join(", ")]})]})})}var dp={exports:{}},up,hv;function $R(){if(hv)return up;hv=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return up=n,up}var hp,fv;function WR(){if(fv)return hp;fv=1;var n=$R();function e(){}function t(){}return t.resetWarningCache=e,hp=function(){function s(a,o,c,d,u,f){if(f!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function i(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},hp}var pv;function qR(){return pv||(pv=1,dp.exports=WR()()),dp.exports}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var i5=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Hu=i5.join(","),r5=typeof Element>"u",ro=r5?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,im=!r5&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},a5=function(e,t,s){var i=Array.prototype.slice.apply(e.querySelectorAll(Hu));return t&&ro.call(e,Hu)&&i.unshift(e),i=i.filter(s),i},o5=function n(e,t,s){for(var i=[],r=Array.from(e);r.length;){var a=r.shift();if(a.tagName==="SLOT"){var o=a.assignedElements(),c=o.length?o:a.children,d=n(c,!0,s);s.flatten?i.push.apply(i,d):i.push({scope:a,candidates:d})}else{var u=ro.call(a,Hu);u&&s.filter(a)&&(t||!e.includes(a))&&i.push(a);var f=a.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(a),m=!s.shadowRootFilter||s.shadowRootFilter(a);if(f&&m){var h=n(f===!0?a.children:f.children,!0,s);s.flatten?i.push.apply(i,h):i.push({scope:a,candidates:h})}else r.unshift.apply(r,a.children)}}return i},l5=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},UR=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},c5=function(e){return e.tagName==="INPUT"},VR=function(e){return c5(e)&&e.type==="hidden"},HR=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return t},GR=function(e,t){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===t)return e[s]},YR=function(e){if(!e.name)return!0;var t=e.form||im(e),s=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=s(window.CSS.escape(e.name));else try{i=s(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var r=GR(i,e.form);return!r||r===e},ZR=function(e){return c5(e)&&e.type==="radio"},KR=function(e){return ZR(e)&&!YR(e)},mv=function(e){var t=e.getBoundingClientRect(),s=t.width,i=t.height;return s===0&&i===0},JR=function(e,t){var s=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=ro.call(e,"details>summary:first-of-type"),a=r?e.parentElement:e;if(ro.call(a,"details:not([open]) *"))return!0;var o=im(e).host,c=o?.ownerDocument.contains(o)||e.ownerDocument.contains(e);if(!s||s==="full"){if(typeof i=="function"){for(var d=e;e;){var u=e.parentElement,f=im(e);if(u&&!u.shadowRoot&&i(u)===!0)return mv(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=d}if(c)return!e.getClientRects().length}else if(s==="non-zero-area")return mv(e);return!1},QR=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var s=0;s<t.children.length;s++){var i=t.children.item(s);if(i.tagName==="LEGEND")return ro.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Gu=function(e,t){return!(t.disabled||VR(t)||JR(t,e)||HR(t)||QR(t))},rm=function(e,t){return!(KR(t)||l5(t)<0||!Gu(e,t))},XR=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},eF=function n(e){var t=[],s=[];return e.forEach(function(i,r){var a=!!i.scope,o=a?i.scope:i,c=l5(o,a),d=a?n(i.candidates):o;c===0?a?t.push.apply(t,d):t.push(o):s.push({documentOrder:r,tabIndex:c,item:i,isScope:a,content:d})}),s.sort(UR).reduce(function(i,r){return r.isScope?i.push.apply(i,r.content):i.push(r.content),i},[]).concat(t)},d5=function(e,t){t=t||{};var s;return t.getShadowRoot?s=o5([e],t.includeContainer,{filter:rm.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:XR}):s=a5(e,t.includeContainer,rm.bind(null,t)),eF(s)},u5=function(e,t){t=t||{};var s;return t.getShadowRoot?s=o5([e],t.includeContainer,{filter:Gu.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):s=a5(e,t.includeContainer,Gu.bind(null,t)),s},ac=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return ro.call(e,Hu)===!1?!1:rm(t,e)},tF=i5.concat("iframe").join(","),fu=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return ro.call(e,tF)===!1?!1:Gu(t,e)};const nF=Object.freeze(Object.defineProperty({__proto__:null,focusable:u5,isFocusable:fu,isTabbable:ac,tabbable:d5},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function gv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function yv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gv(Object(t),!0).forEach(function(s){sF(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gv(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function sF(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var xv=(function(){var n=[];return{activateTrap:function(t){if(n.length>0){var s=n[n.length-1];s!==t&&s.pause()}var i=n.indexOf(t);i===-1||n.splice(i,1),n.push(t)},deactivateTrap:function(t){var s=n.indexOf(t);s!==-1&&n.splice(s,1),n.length>0&&n[n.length-1].unpause()}}})(),iF=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},rF=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},aF=function(e){return e.key==="Tab"||e.keyCode===9},vv=function(e){return setTimeout(e,0)},bv=function(e,t){var s=-1;return e.every(function(i,r){return t(i)?(s=r,!1):!0}),s},tc=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,s):e},eu=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},oF=function(e,t){var s=t?.document||document,i=yv({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,o=function(O,k,A){return O&&O[k]!==void 0?O[k]:i[A||k]},c=function(O){return r.containerGroups.findIndex(function(k){var A=k.container,M=k.tabbableNodes;return A.contains(O)||M.find(function(V){return V===O})})},d=function(O){var k=i[O];if(typeof k=="function"){for(var A=arguments.length,M=new Array(A>1?A-1:0),V=1;V<A;V++)M[V-1]=arguments[V];k=k.apply(void 0,M)}if(k===!0&&(k=void 0),!k){if(k===void 0||k===!1)return k;throw new Error("`".concat(O,"` was specified but was not a node, or did not return a node"))}var _=k;if(typeof k=="string"&&(_=s.querySelector(k),!_))throw new Error("`".concat(O,"` as selector refers to no known node"));return _},u=function(){var O=d("initialFocus");if(O===!1)return!1;if(O===void 0)if(c(s.activeElement)>=0)O=s.activeElement;else{var k=r.tabbableGroups[0],A=k&&k.firstTabbableNode;O=A||d("fallbackFocus")}if(!O)throw new Error("Your focus-trap needs to have at least one focusable element");return O},f=function(){if(r.containerGroups=r.containers.map(function(O){var k=d5(O,i.tabbableOptions),A=u5(O,i.tabbableOptions);return{container:O,tabbableNodes:k,focusableNodes:A,firstTabbableNode:k.length>0?k[0]:null,lastTabbableNode:k.length>0?k[k.length-1]:null,nextTabbableNode:function(V){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,T=A.findIndex(function(W){return W===V});if(!(T<0))return _?A.slice(T+1).find(function(W){return ac(W,i.tabbableOptions)}):A.slice(0,T).reverse().find(function(W){return ac(W,i.tabbableOptions)})}}}),r.tabbableGroups=r.containerGroups.filter(function(O){return O.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},m=function P(O){if(O!==!1&&O!==s.activeElement){if(!O||!O.focus){P(u());return}O.focus({preventScroll:!!i.preventScroll}),r.mostRecentlyFocusedNode=O,iF(O)&&O.select()}},h=function(O){var k=d("setReturnFocus",O);return k||(k===!1?!1:O)},y=function(O){var k=eu(O);if(!(c(k)>=0)){if(tc(i.clickOutsideDeactivates,O)){a.deactivate({returnFocus:i.returnFocusOnDeactivate&&!fu(k,i.tabbableOptions)});return}tc(i.allowOutsideClick,O)||O.preventDefault()}},x=function(O){var k=eu(O),A=c(k)>=0;A||k instanceof Document?A&&(r.mostRecentlyFocusedNode=k):(O.stopImmediatePropagation(),m(r.mostRecentlyFocusedNode||u()))},w=function(O){var k=eu(O);f();var A=null;if(r.tabbableGroups.length>0){var M=c(k),V=M>=0?r.containerGroups[M]:void 0;if(M<0)O.shiftKey?A=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:A=r.tabbableGroups[0].firstTabbableNode;else if(O.shiftKey){var _=bv(r.tabbableGroups,function(ae){var F=ae.firstTabbableNode;return k===F});if(_<0&&(V.container===k||fu(k,i.tabbableOptions)&&!ac(k,i.tabbableOptions)&&!V.nextTabbableNode(k,!1))&&(_=M),_>=0){var T=_===0?r.tabbableGroups.length-1:_-1,W=r.tabbableGroups[T];A=W.lastTabbableNode}}else{var D=bv(r.tabbableGroups,function(ae){var F=ae.lastTabbableNode;return k===F});if(D<0&&(V.container===k||fu(k,i.tabbableOptions)&&!ac(k,i.tabbableOptions)&&!V.nextTabbableNode(k))&&(D=M),D>=0){var Q=D===r.tabbableGroups.length-1?0:D+1,ne=r.tabbableGroups[Q];A=ne.firstTabbableNode}}}else A=d("fallbackFocus");A&&(O.preventDefault(),m(A))},S=function(O){if(rF(O)&&tc(i.escapeDeactivates,O)!==!1){O.preventDefault(),a.deactivate();return}if(aF(O)){w(O);return}},j=function(O){var k=eu(O);c(k)>=0||tc(i.clickOutsideDeactivates,O)||tc(i.allowOutsideClick,O)||(O.preventDefault(),O.stopImmediatePropagation())},C=function(){if(r.active)return xv.activateTrap(a),r.delayInitialFocusTimer=i.delayInitialFocus?vv(function(){m(u())}):m(u()),s.addEventListener("focusin",x,!0),s.addEventListener("mousedown",y,{capture:!0,passive:!1}),s.addEventListener("touchstart",y,{capture:!0,passive:!1}),s.addEventListener("click",j,{capture:!0,passive:!1}),s.addEventListener("keydown",S,{capture:!0,passive:!1}),a},L=function(){if(r.active)return s.removeEventListener("focusin",x,!0),s.removeEventListener("mousedown",y,!0),s.removeEventListener("touchstart",y,!0),s.removeEventListener("click",j,!0),s.removeEventListener("keydown",S,!0),a};return a={get active(){return r.active},get paused(){return r.paused},activate:function(O){if(r.active)return this;var k=o(O,"onActivate"),A=o(O,"onPostActivate"),M=o(O,"checkCanFocusTrap");M||f(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=s.activeElement,k&&k();var V=function(){M&&f(),C(),A&&A()};return M?(M(r.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(O){if(!r.active)return this;var k=yv({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},O);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,L(),r.active=!1,r.paused=!1,xv.deactivateTrap(a);var A=o(k,"onDeactivate"),M=o(k,"onPostDeactivate"),V=o(k,"checkCanReturnFocus"),_=o(k,"returnFocus","returnFocusOnDeactivate");A&&A();var T=function(){vv(function(){_&&m(h(r.nodeFocusedBeforeActivation)),M&&M()})};return _&&V?(V(h(r.nodeFocusedBeforeActivation)).then(T,T),this):(T(),this)},pause:function(){return r.paused||!r.active?this:(r.paused=!0,L(),this)},unpause:function(){return!r.paused||!r.active?this:(r.paused=!1,f(),C(),this)},updateContainerElements:function(O){var k=[].concat(O).filter(Boolean);return r.containers=k.map(function(A){return typeof A=="string"?s.querySelector(A):A}),r.active&&f(),this}},a.updateContainerElements(e),a};const lF=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:oF},Symbol.toStringTag,{value:"Module"})),cF=Av(lF),dF=Av(nF);var fp,wv;function uF(){if(wv)return fp;wv=1;function n(L){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},n(L)}function e(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}function t(L,P){for(var O=0;O<P.length;O++){var k=P[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(L,k.key,k)}}function s(L,P,O){return P&&t(L.prototype,P),Object.defineProperty(L,"prototype",{writable:!1}),L}function i(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),P&&r(L,P)}function r(L,P){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,A){return k.__proto__=A,k},r(L,P)}function a(L){var P=d();return function(){var k=u(L),A;if(P){var M=u(this).constructor;A=Reflect.construct(k,arguments,M)}else A=k.apply(this,arguments);return o(this,A)}}function o(L,P){if(P&&(n(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(L)}function c(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(L){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},u(L)}function f(L,P,O){return P in L?Object.defineProperty(L,P,{value:O,enumerable:!0,configurable:!0,writable:!0}):L[P]=O,L}var m=_v(),h=qR(),y=cF,x=y.createFocusTrap,w=dF,S=w.isFocusable,j=(function(L){i(O,L);var P=a(O);function O(k){var A;e(this,O),A=P.call(this,k),f(c(A),"getNodeForOption",function(_){var T,W=(T=this.internalOptions[_])!==null&&T!==void 0?T:this.originalOptions[_];if(typeof W=="function"){for(var D=arguments.length,Q=new Array(D>1?D-1:0),ne=1;ne<D;ne++)Q[ne-1]=arguments[ne];W=W.apply(void 0,Q)}if(W===!0&&(W=void 0),!W){if(W===void 0||W===!1)return W;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var ae=W;if(typeof W=="string"){var F;if(ae=(F=this.getDocument())===null||F===void 0?void 0:F.querySelector(W),!ae)throw new Error("`".concat(_,"` as selector refers to no known node"))}return ae}),A.handleDeactivate=A.handleDeactivate.bind(c(A)),A.handlePostDeactivate=A.handlePostDeactivate.bind(c(A)),A.handleClickOutsideDeactivates=A.handleClickOutsideDeactivates.bind(c(A)),A.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:A.handleDeactivate,onPostDeactivate:A.handlePostDeactivate,clickOutsideDeactivates:A.handleClickOutsideDeactivates},A.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var M=k.focusTrapOptions;for(var V in M)if(Object.prototype.hasOwnProperty.call(M,V)){if(V==="returnFocusOnDeactivate"||V==="onDeactivate"||V==="onPostDeactivate"||V==="checkCanReturnFocus"||V==="clickOutsideDeactivates"){A.originalOptions[V]=M[V];continue}A.internalOptions[V]=M[V]}return A.outsideClick=null,A.focusTrapElements=k.containerElements||[],A.updatePreviousElement(),A}return s(O,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var A=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return A||(A===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var A=this.getDocument();A&&(this.previouslyFocusedElement=A.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(A){var M=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,A):this.originalOptions.clickOutsideDeactivates;return M&&(this.outsideClick={target:A.target,allowDeactivation:M}),M}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var A=this,M=function(){var _=A.getReturnFocusNode(),T=!!(A.originalOptions.returnFocusOnDeactivate&&_!==null&&_!==void 0&&_.focus&&(!A.outsideClick||A.outsideClick.allowDeactivation&&!S(A.outsideClick.target,A.internalOptions.tabbableOptions))),W=A.internalOptions.preventScroll,D=W===void 0?!1:W;T&&_.focus({preventScroll:D}),A.originalOptions.onPostDeactivate&&A.originalOptions.onPostDeactivate.call(null),A.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(M,M):M()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var A=this.focusTrapElements.some(Boolean);A&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(A){if(this.focusTrap){A.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var M=!A.active&&this.props.active,V=A.active&&!this.props.active,_=!A.paused&&this.props.paused,T=A.paused&&!this.props.paused;if(M&&(this.updatePreviousElement(),this.focusTrap.activate()),V){this.deactivateTrap();return}_&&this.focusTrap.pause(),T&&this.focusTrap.unpause()}else A.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var A=this,M=this.props.children?m.Children.only(this.props.children):void 0;if(M){if(M.type&&M.type===m.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var V=function(W){var D=A.props.containerElements;M&&(typeof M.ref=="function"?M.ref(W):M.ref&&(M.ref.current=W)),A.focusTrapElements=D||[W]},_=m.cloneElement(M,{ref:V});return _}return null}}]),O})(m.Component),C=typeof Element>"u"?Function:Element;return j.propTypes={active:h.bool,paused:h.bool,focusTrapOptions:h.shape({document:h.object,onActivate:h.func,onPostActivate:h.func,checkCanFocusTrap:h.func,onDeactivate:h.func,onPostDeactivate:h.func,checkCanReturnFocus:h.func,initialFocus:h.oneOfType([h.instanceOf(C),h.string,h.bool,h.func]),fallbackFocus:h.oneOfType([h.instanceOf(C),h.string,h.func]),escapeDeactivates:h.oneOfType([h.bool,h.func]),clickOutsideDeactivates:h.oneOfType([h.bool,h.func]),returnFocusOnDeactivate:h.bool,setReturnFocus:h.oneOfType([h.instanceOf(C),h.string,h.bool,h.func]),allowOutsideClick:h.oneOfType([h.bool,h.func]),preventScroll:h.bool,tabbableOptions:h.shape({displayCheck:h.oneOf(["full","non-zero-area","none"]),getShadowRoot:h.oneOfType([h.bool,h.func])})}),containerElements:h.arrayOf(h.instanceOf(C)),children:h.oneOfType([h.element,h.instanceOf(C)])},j.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:x},fp=j,fp}var hF=uF();const Gm=jv(hF),h5="pain-tracker:medication-reminders";function fF(){try{const n=localStorage.getItem(h5);return n?JSON.parse(n):[]}catch(n){return console.debug("reminders: load failed",n),[]}}function Ym(n){try{localStorage.setItem(h5,JSON.stringify(n))}catch(e){console.debug("reminders: save failed",e)}}function pF(n,e){const t=crypto?.randomUUID?.()??`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,s=[...n,{...e,id:t}];return Ym(s),s}function Sv(n,e,t){const s=n.map(i=>i.id===e?{...i,...t}:i);return Ym(s),s}function mF(n,e){const t=n.filter(s=>s.id!==e);return Ym(t),t}function gF(n){try{const[e,t]=n.time.split(":").map(Number),s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate(),e,t,0,0);return i>s?i.toLocaleString():n.recurrence==="daily"?new Date(i.getTime()+864e5).toLocaleString():n.recurrence==="weekly"?new Date(i.getTime()+6048e5).toLocaleString():i.toLocaleString()}catch{return n.time}}function yF(){const[n,e]=X.useState(()=>fF()),[t,s]=X.useState(""),[i,r]=X.useState("08:00"),[a,o]=X.useState([]),[c,d]=X.useState(""),[u,f]=X.useState("none"),[m,h]=X.useState("once"),[y,x]=X.useState(""),[w,S]=X.useState(!1),j=X.useRef(null),C=X.useRef(null),[L,P]=X.useState(!1);X.useEffect(()=>{const _=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(w){if(C.current=document.activeElement,_){P(!0);return}P(!1);const T=window.setTimeout(()=>P(!0),10);return()=>clearTimeout(T)}else{P(!1);try{C.current?.focus()}catch{}}},[w]),X.useEffect(()=>{const _=setInterval(()=>{const W=new Date().toTimeString().slice(0,5);n.forEach(D=>{if(!D.enabled)return;if((D.times&&D.times.length>0?D.times:[D.time]).includes(W)){if(Notification&&Notification.permission==="granted"){const ne=`${D.title}${D.dosage?`  ${D.dosage}`:""}`;new Notification("Medication reminder",{body:ne})}D.recurrence==="none"&&Sv(n,D.id,{enabled:!1})}})},6e4);return()=>clearInterval(_)},[n]);function O(){const _=m==="twice-daily"?[i,a[0]||V(i,12)]:m==="custom"?a.length>0?a:[i]:void 0,T=pF(n,{title:t,time:i,enabled:!0,dosage:c||void 0,recurrence:u,frequency:m,notes:y||void 0,times:_});e(T),s(""),d(""),f("none"),h("once"),x(""),o([])}function k(){o(_=>[..._,"12:00"])}function A(_,T){o(W=>W.map((D,Q)=>Q===_?T:D))}function M(_){o(T=>T.filter((W,D)=>D!==_))}function V(_,T){try{const[W,D]=_.split(":").map(Number),Q=new Date;Q.setHours(W+T,D,0,0);const ne=String(Q.getHours()).padStart(2,"0"),ae=String(Q.getMinutes()).padStart(2,"0");return`${ne}:${ae}`}catch{return _}}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>S(!0),className:"bg-white border rounded-md px-3 py-2 shadow-sm text-sm",children:"Medication Reminders"})}),w&&l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),l.jsx(Gm,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:()=>S(!1)},children:l.jsxs("div",{ref:j,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-transform duration-200 ${L?"translate-x-0":"translate-x-full"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Medication Reminders"}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{className:"btn btn-sm",onClick:()=>S(!1),children:"Close"})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{value:t,onChange:_=>s(_.target.value),placeholder:"Medication name",className:"input w-full"}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"time",value:i,onChange:_=>r(_.target.value),className:"input"}),l.jsx("input",{value:c,onChange:_=>d(_.target.value),placeholder:"Dosage (e.g. 10mg)",className:"input"}),l.jsxs("select",{value:m,onChange:_=>h(_.target.value),className:"input",children:[l.jsx("option",{value:"once",children:"Once"}),l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"twice-daily",children:"Twice daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"custom",children:"Custom"})]})]}),(m==="twice-daily"||m==="custom")&&l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"time",value:i,onChange:_=>r(_.target.value),className:"input"}),m==="twice-daily"?l.jsx("input",{type:"time",value:a[0]||V(i,12),onChange:_=>A(0,_.target.value),className:"input"}):l.jsxs("div",{className:"flex flex-col w-full",children:[a.map((_,T)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"time",value:_,onChange:W=>A(T,W.target.value),className:"input"}),l.jsx("button",{className:"btn btn-sm",onClick:()=>M(T),children:"Remove"})]},T)),l.jsx("div",{children:l.jsx("button",{className:"btn btn-sm",onClick:k,children:"Add time"})})]})]})}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsxs("select",{value:u,onChange:_=>f(_.target.value),className:"input",children:[l.jsx("option",{value:"none",children:"No recurrence"}),l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"})]}),l.jsx("input",{value:y,onChange:_=>x(_.target.value),placeholder:"Notes (e.g. before meals)",className:"input flex-1"}),l.jsx("button",{onClick:O,className:"btn",children:"Add"})]})]}),l.jsx("div",{children:l.jsx("ul",{className:"space-y-3",children:n.map(_=>l.jsxs("li",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:_.title}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.times&&_.times.length>0?_.times.join("  "):_.time," ",_.enabled?"":"(disabled)"]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.dosage?`${_.dosage} `:""," ",_.frequency??_.recurrence]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Next: ",gF(_)]})]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>{e(Sv(n,_.id,{enabled:!_.enabled}))},className:"btn btn-sm",children:_.enabled?"Disable":"Enable"}),l.jsx("button",{onClick:()=>e(mF(n,_.id)),className:"btn btn-sm",children:"Delete"})]})]},_.id))})})]})]})})]})]})}const tu="pain-tracker:notification-consent";function xF(){const[n,e]=X.useState(()=>{try{return localStorage.getItem(tu)}catch{return null}});X.useEffect(()=>{},[n]);async function t(){try{const i=await Notification.requestPermission();localStorage.setItem(tu,i),e(i)}catch{localStorage.setItem(tu,"denied"),e("denied")}}function s(){localStorage.setItem(tu,"dismissed"),e("dismissed")}return n?null:l.jsxs("div",{className:"fixed bottom-4 left-4 z-60 p-4 bg-card border rounded shadow-md max-w-sm",children:[l.jsx("div",{className:"mb-2 font-medium",children:"Get gentle notifications?"}),l.jsx("div",{className:"text-sm text-muted-foreground mb-3",children:"We can notify you about important pain pattern alerts and medication reminders. You can change this later in Settings."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:t,className:"btn btn-primary",children:"Allow"}),l.jsx("button",{onClick:s,className:"btn",children:"Not now"})]})]})}const kv="pain-tracker:alerts-settings";function vF(){const[n,e]=X.useState(()=>{try{const c=localStorage.getItem(kv);return c?JSON.parse(c):{threshold:3}}catch{return{threshold:3}}}),[t,s]=X.useState(!1),i=X.useRef(null),r=X.useRef(null),[a,o]=X.useState(!1);return X.useEffect(()=>{try{localStorage.setItem(kv,JSON.stringify(n))}catch{}},[n]),X.useEffect(()=>{const c=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(t){if(r.current=document.activeElement,c){o(!0);return}o(!1);const d=window.setTimeout(()=>o(!0),10);return()=>clearTimeout(d)}else{o(!1);try{r.current?.focus()}catch{}}},[t]),l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsxs("button",{onClick:()=>s(!0),className:"bg-white border rounded-md px-3 py-2 shadow-sm text-sm flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:l.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V5.178C16.39 6.006 18 8.388 18 11V16L20 18V19H4V18L6 16V11C6 8.388 7.61 6.006 10 5.178V4C10 2.89543 10.8954 2 12 2Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"})}),"Alerts"]})}),t&&l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>s(!1)}),l.jsx(Gm,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:()=>s(!1)},children:l.jsxs("div",{ref:i,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-all duration-200 ${a?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,style:window.matchMedia("(prefers-reduced-motion: reduce)").matches?{transitionTimingFunction:"linear"}:void 0,children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Alerts settings"}),l.jsx("div",{children:l.jsx("button",{className:"btn btn-sm",onClick:()=>s(!1),children:"Close"})})]}),l.jsx("label",{className:"block text-sm mb-2",children:"Sensitivity (pain increase threshold)"}),l.jsx("input",{type:"range",min:1,max:6,value:n.threshold,onChange:c=>e({threshold:Number(c.target.value)})}),l.jsxs("div",{className:"text-sm mt-2",children:["Current threshold: ",n.threshold," points"]}),l.jsxs("div",{className:"text-sm mt-2 text-muted-foreground",children:["Live preview: You will be alerted when your pain increases by ",n.threshold," or more points compared to your recent baseline. For example, if your usual pain is 3/10, an entry of ",Math.min(10,3+n.threshold),"/10 would trigger an alert."]})]})})]})]})}const qc="pain-tracker:alerts-log";function Sc(){try{const n=localStorage.getItem(qc);return n?JSON.parse(n):[]}catch{return[]}}function bF(n){try{const e=Sc();e.unshift(n),localStorage.setItem(qc,JSON.stringify(e.slice(0,50))),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function wF(){try{localStorage.removeItem(qc),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function Nv(n){try{const e=Sc().filter(t=>t.id!==n);localStorage.setItem(qc,JSON.stringify(e)),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function SF(){const[n,e]=X.useState(()=>Sc()),[t,s]=X.useState(!1),[i,r]=X.useState(null),[a,o]=X.useState(!1),c=X.useRef(null),d=X.useRef(null),[u,f]=X.useState(!1),m=X.useRef(null),h=X.useRef(null),[y,x]=X.useState(!1);X.useEffect(()=>{const j=()=>e(Sc());return window.addEventListener("alerts-log-updated",j),()=>window.removeEventListener("alerts-log-updated",j)},[]),X.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),X.useEffect(()=>{const j=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(u){if(h.current=document.activeElement,j){x(!0);return}x(!1);const C=window.setTimeout(()=>x(!0),10);return()=>clearTimeout(C)}else x(!1)},[u]);function w(j){try{const C=new Date(j).getTime(),L=Date.now()-C,P=Math.floor(L/1e3);if(P<60)return`${P}s ago`;const O=Math.floor(P/60);if(O<60)return`${O}m ago`;const k=Math.floor(O/60);return k<24?`${k}h ago`:`${Math.floor(k/24)}d ago`}catch{return new Date(j).toLocaleString()}}const S=n.length>0;return l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsxs("button",{onClick:()=>f(!0),className:"relative bg-white border rounded-md px-3 py-2 shadow-sm text-sm flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:l.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V5.178C16.39 6.006 18 8.388 18 11V16L20 18V19H4V18L6 16V11C6 8.388 7.61 6.006 10 5.178V4C10 2.89543 10.8954 2 12 2Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"})}),"Recent Alerts",S&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full px-2",children:n.length}),S&&l.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:w(n[0].time)})]})}),u&&l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>f(!1)}),l.jsx(Gm,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:()=>f(!1)},children:l.jsxs("div",{ref:m,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-all duration-200 ${y?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,style:{transitionTimingFunction:window.matchMedia("(prefers-reduced-motion: reduce)").matches?"linear":void 0},children:[l.jsx("button",{id:"__alerts-focus-anchor",tabIndex:0,onFocus:()=>{},style:{position:"absolute",left:"-9999px",width:1,height:1,margin:0,padding:0,border:0}}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Recent Alerts"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{className:"text-xs text-foreground/80 hover:underline mr-2",onClick:()=>s(!0),"aria-haspopup":"dialog",children:"Clear all"}),l.jsx("button",{className:"btn btn-sm",onClick:()=>f(!1),children:"Close"})]})]}),a&&i&&l.jsxs("div",{className:"mb-2 p-2 bg-muted rounded flex items-center justify-between",role:"status","aria-live":"polite",children:[l.jsx("div",{className:"text-sm",children:"Alerts cleared."}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{try{localStorage.setItem(qc,JSON.stringify(i)),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}r(null),o(!1),c.current&&(clearTimeout(c.current),c.current=null)},className:"text-sm underline",children:"Undo"})})]}),t&&l.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-white p-4 rounded max-w-sm w-full",children:[l.jsx("div",{className:"font-medium mb-2",children:"Confirm clear all alerts"}),l.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"This will remove all recent alerts. You can undo for a short time."}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1",children:"Cancel"}),l.jsx("button",{onClick:()=>{const j=Sc();r(j),wF(),s(!1),o(!0),setTimeout(()=>{d.current?.focus()},10),c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{o(!1),r(null),c.current=null},6e3)},className:"px-3 py-1 bg-primary text-white",children:"Yes, clear"})]})]})}),!S&&l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx("div",{className:"text-sm text-muted-foreground",tabIndex:-1,ref:d,children:"No recent alerts"}),l.jsx("button",{className:"mt-2 px-3 py-1 rounded bg-muted text-foreground text-sm border",onClick:()=>f(!1),autoFocus:!0,children:"Close"})]}),S&&l.jsx("ul",{className:"text-sm space-y-2",children:n.map(j=>l.jsx("li",{className:"border rounded p-2",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:j.message}),l.jsx("div",{className:"text-muted-foreground text-xs","aria-label":new Date(j.time).toLocaleString(),children:w(j.time)})]}),l.jsx("div",{className:"ml-3 flex flex-col items-end",children:l.jsx("button",{onClick:()=>{try{window.confirm?.("Acknowledge this alert?")&&Nv(j.id)}catch{Nv(j.id)}},className:"text-xs text-foreground/80 hover:underline",children:"Acknowledge"})})]})},j.id))})]})})]})]})}const kF=(n,e)=>{for(let t=1;t<n.length;t++)if(n[t]-n[t-1]>=e)return t;return-1},NF=(n,e,t)=>{for(let s=e;s<n.length;s++){const i=n.slice(s-e,s).reduce((r,a)=>r+a,0)/e;if(n[s]-i>=t)return s}return-1},_F=(n,e)=>{const t=n.reduce((i,r)=>i+r,0)/n.length,s=Math.sqrt(n.reduce((i,r)=>i+Math.pow(r-t,2),0)/n.length);for(let i=0;i<n.length;i++)if(Math.abs(n[i]-t)/s>=e)return i;return-1},jF="pain-tracker:alerts-settings",AF="pain-tracker:notification-consent";function CF(n){const e=X.useRef(new Set);X.useEffect(()=>{try{const t=localStorage.getItem(jF),s=t?JSON.parse(t):{threshold:3},i=localStorage.getItem(AF),r=n.map(c=>c.pain),a=[c=>kF(c,s.threshold),c=>NF(c,3,1),c=>_F(c,2)];let o=-1;for(const c of a){const d=c(r);if(d>=0){o=d;break}}if(o>=0&&!e.current.has(o)){e.current.add(o);const c=`Sudden pain increase to ${r[o]} (entry ${o+1})`;try{bF({id:`${Date.now()}-${Math.random().toString(36).slice(2,7)}`,time:new Date().toISOString(),message:c}),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}i==="granted"&&typeof Notification<"u"?new Notification("Pain pattern detected",{body:c}):console.debug("Pattern alert suppressed (no consent)")}}catch(t){console.debug("usePatternAlerts: error",t)}},[n])}function LF(){const[n,e]=X.useState(navigator.onLine);return X.useEffect(()=>{const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[]),n?null:l.jsx("div",{className:"bg-orange-500 text-white px-4 py-2",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(mk,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"You're currently offline"}),l.jsx("p",{className:"text-xs opacity-90",children:"Your data is saved locally and will sync when you're back online"})]})]}),l.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md transition-colors",children:[l.jsx(gp,{className:"h-4 w-4"}),l.jsx("span",{className:"text-xs",children:"Retry"})]})]})})}function PF({message:n="Loading Pain Tracker Pro...",progress:e,showProgress:t=!1,className:s=""}){const[i,r]=X.useState(0);return X.useEffect(()=>{if(e!==void 0){const a=setTimeout(()=>{r(e)},100);return()=>clearTimeout(a)}},[e]),l.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 ${s}`,children:l.jsxs("div",{className:"text-center space-y-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"animate-pulse",children:l.jsx(Bv,{size:96,className:"mx-auto"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-blue-200 animate-ping opacity-75"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-32 h-32 rounded-full border-2 border-green-200 animate-ping opacity-50 animation-delay-150"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Pain Tracker",l.jsx("span",{className:"inline-flex items-center ml-2 px-2 py-1 rounded-full text-xs bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold",children:"PRO"})]}),l.jsx("p",{className:"text-slate-600 font-medium",children:"AI-Powered Pain Management"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-slate-700 font-medium",children:n}),t&&l.jsxs("div",{className:"w-64 mx-auto",children:[l.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-2",children:[l.jsx("span",{children:"Loading..."}),l.jsxs("span",{children:[Math.round(i),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500 ease-out",style:{width:`${i}%`}})})]}),!t&&l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce animation-delay-100"}),l.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce animation-delay-200"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs text-slate-600 max-w-md mx-auto",children:[l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("span",{children:"FHIR Compliant"})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})}),l.jsx("span",{children:"AI Analytics"})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),l.jsx("span",{children:"Offline Ready"})]})]})]})})}const MF=`
.animation-delay-100 {
  animation-delay: 0.1s;
}
.animation-delay-150 {
  animation-delay: 0.15s;
}
.animation-delay-200 {
  animation-delay: 0.2s;
}
`;if(typeof document<"u"){const n=document.createElement("style");n.textContent=MF,document.head.appendChild(n)}const DF=()=>l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsxs("div",{className:"text-center p-8 bg-card rounded-lg border shadow-lg max-w-md mx-4",children:[l.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"We encountered an unexpected error. Please try refreshing the page."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"Refresh Page"})]})}),TF=()=>l.jsx(PF,{message:"Loading Pain Tracker Pro..."});function IF(){X.useEffect(()=>{Zo.isAppInstalled(),(async()=>{try{const{offlineStorage:s}=await Dr(async()=>{const{offlineStorage:i}=await Promise.resolve().then(()=>DR);return{offlineStorage:i}},void 0);await s.init();try{await Dr(()=>Promise.resolve().then(()=>s5),void 0)}catch{}await Zo.enableHealthDataSync()}catch{}})()},[]);const e=Yu(TS).map(t=>({time:t.timestamp,pain:t.baselineData?.pain??0}));return CF(e),l.jsx(AN,{children:l.jsx(nD,{children:l.jsx(AO,{children:l.jsxs("div",{className:"min-h-screen bg-background transition-colors",children:[l.jsx(LF,{}),l.jsx(RR,{}),l.jsx(BR,{}),l.jsxs("div",{className:"fixed top-20 right-4 z-50 w-80 space-y-2",children:[l.jsx(yF,{}),l.jsx(vF,{}),l.jsx(SF,{})]}),l.jsx(xF,{}),l.jsx(hS,{fallback:l.jsx(DF,{}),children:l.jsx(X.Suspense,{fallback:l.jsx(TF,{}),children:l.jsx(MO,{})})}),l.jsx(ER,{}),l.jsx(OR,{})]})})})})}cS.createRoot(document.getElementById("root")).render(l.jsx(it.StrictMode,{children:l.jsx(IF,{})}));export{jr as C,Ht as _,ze as a,mt as b,Cf as c,gt as d,qe as e,s2 as g,l as j};
//# sourceMappingURL=index-wxXM0OTV.js.map
