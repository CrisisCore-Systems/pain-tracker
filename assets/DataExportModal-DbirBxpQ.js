import{r as e,j as r}from"./react-vendor-CM2d6bHp.js";import{B as t,C as s,m as a,n as o,e as n,c}from"./index-CMuG_LiM.js";import{M as i}from"./Modal-khbJLhfd.js";import{b as m,e as l,a as p,d as u}from"./export-Dpg4AlPP.js";import{D as d,X as x,F as N,az as D,aA as b,ay as h,d as j,C as f}from"./icons-vendor-DZ-9b690.js";import"./chart-vendor-C6dKBweC.js";import"./state-vendor-gOFTyJpA.js";import"./pdf-vendor-zZbfvrDE.js";import"./date-vendor-Bi3xipBn.js";import"./i18n-vendor-C-xkjauL.js";function k({isOpen:k,onClose:E,entries:v,title:y="Export Pain Data"}){const[g,C]=e.useState("csv"),[M,P]=e.useState(!1),[U,V]=e.useState("idle"),[w,R]=e.useState({dateRange:{start:"",end:""},painLevelRange:{min:0,max:10},symptoms:[],locations:[]}),S=e.useMemo(()=>{const e=new Set;return v.forEach(r=>{r.baselineData.symptoms&&r.baselineData.symptoms.forEach(r=>e.add(r))}),Array.from(e).sort()},[v]),L=e.useMemo(()=>{const e=new Set;return v.forEach(r=>{r.baselineData.locations&&r.baselineData.locations.forEach(r=>e.add(r))}),Array.from(e).sort()},[v]),F=e.useMemo(()=>v.filter(e=>{if(w.dateRange.start&&w.dateRange.end){const r=new Date(e.timestamp),t=new Date(w.dateRange.start),s=new Date(w.dateRange.end);if(r<t||r>s)return!1}if(e.baselineData.pain<w.painLevelRange.min||e.baselineData.pain>w.painLevelRange.max)return!1;if(w.symptoms.length>0){if(!w.symptoms.some(r=>e.baselineData.symptoms?.includes(r)))return!1}if(w.locations.length>0){if(!w.locations.some(r=>e.baselineData.locations?.includes(r)))return!1}return!0}),[v,w]),A=[{id:"csv",label:"CSV (Spreadsheet)",description:"Compatible with Excel, Google Sheets",icon:D,extension:".csv"},{id:"json",label:"JSON (Data)",description:"For developers and data analysis",icon:b,extension:".json"},{id:"pdf",label:"PDF (Report)",description:"Formatted report for sharing",icon:N,extension:".pdf"}],O=(e,r)=>{R(t=>({...t,[e]:r}))},$=(e,r)=>{if(!Array.isArray(w[e]))return;const t=w[e],s=t.includes(r)?t.filter(e=>e!==r):[...t,r];O(e,s)};return r.jsxDEV(i,{isOpen:k,onClose:E,size:"xl",children:r.jsxDEV("div",{className:"space-y-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{className:"flex items-center space-x-3",children:[r.jsxDEV(d,{className:"h-6 w-6 text-primary"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:227,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("h2",{className:"text-xl font-semibold",children:y},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:229,columnNumber:15},this),r.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Export ",F.length," of ",v.length," entries"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:226,columnNumber:11},this),r.jsxDEV(t,{variant:"ghost",size:"sm",onClick:E,children:r.jsxDEV(x,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:236,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:235,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:225,columnNumber:9},this),r.jsxDEV(s,{children:[r.jsxDEV(a,{children:r.jsxDEV(o,{className:"flex items-center space-x-2",children:[r.jsxDEV(N,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:244,columnNumber:15},this),r.jsxDEV("span",{children:"Export Format"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:245,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:243,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:242,columnNumber:11},this),r.jsxDEV(n,{children:r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map(e=>{const t=e.icon;return r.jsxDEV("button",{onClick:()=>C(e.id),className:c("p-4 border rounded-lg text-left transition-all hover:shadow-md",g===e.id?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-border hover:border-primary/50"),children:r.jsxDEV("div",{className:"flex items-start space-x-3",children:[r.jsxDEV(t,{className:"h-8 w-8 text-primary mt-1"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:264,columnNumber:23},this),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-medium",children:e.label},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:266,columnNumber:25},this),r.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:e.description},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:267,columnNumber:25},this),r.jsxDEV("p",{className:"text-xs text-muted-foreground mt-2",children:e.extension},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:268,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:265,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:263,columnNumber:21},this)},e.id,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:253,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:249,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:248,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:241,columnNumber:9},this),r.jsxDEV(s,{children:[r.jsxDEV(a,{children:r.jsxDEV(o,{className:"flex items-center space-x-2",children:[r.jsxDEV(h,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:282,columnNumber:15},this),r.jsxDEV("span",{children:"Filters"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:283,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:281,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:280,columnNumber:11},this),r.jsxDEV(n,{className:"space-y-6",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Start Date"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:290,columnNumber:17},this),r.jsxDEV("input",{type:"date",value:w.dateRange.start,onChange:e=>O("dateRange",{...w.dateRange,start:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:291,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:289,columnNumber:15},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"End Date"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:304,columnNumber:17},this),r.jsxDEV("input",{type:"date",value:w.dateRange.end,onChange:e=>O("dateRange",{...w.dateRange,end:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:305,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:303,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:288,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:["Pain Level Range: ",w.painLevelRange.min," - ",w.painLevelRange.max]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:321,columnNumber:15},this),r.jsxDEV("div",{className:"flex items-center space-x-4",children:[r.jsxDEV("input",{type:"range",min:"0",max:"10",value:w.painLevelRange.min,onChange:e=>O("painLevelRange",{...w.painLevelRange,min:parseInt(e.target.value)}),className:"flex-1"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:325,columnNumber:17},this),r.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"to"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:338,columnNumber:17},this),r.jsxDEV("input",{type:"range",min:"0",max:"10",value:w.painLevelRange.max,onChange:e=>O("painLevelRange",{...w.painLevelRange,max:parseInt(e.target.value)}),className:"flex-1"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:339,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:324,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:320,columnNumber:13},this),S.length>0&&r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Symptoms"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:358,columnNumber:17},this),r.jsxDEV("div",{className:"flex flex-wrap gap-2",children:S.map(e=>r.jsxDEV("button",{onClick:()=>$("symptoms",e),className:c("px-3 py-1 text-sm rounded-full border transition-colors",w.symptoms.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:e},e,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:361,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:359,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:357,columnNumber:15},this),L.length>0&&r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Locations"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:381,columnNumber:17},this),r.jsxDEV("div",{className:"flex flex-wrap gap-2",children:L.map(e=>r.jsxDEV("button",{onClick:()=>$("locations",e),className:c("px-3 py-1 text-sm rounded-full border transition-colors",w.locations.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:e},e,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:384,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:380,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:286,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:279,columnNumber:9},this),"idle"!==U&&r.jsxDEV(s,{className:c("border","success"===U?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:r.jsxDEV(n,{className:"pt-6",children:r.jsxDEV("div",{className:"flex items-center space-x-2",children:["success"===U?r.jsxDEV(j,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:416,columnNumber:19},this):r.jsxDEV(f,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:418,columnNumber:19},this),r.jsxDEV("p",{className:c("text-sm","success"===U?"text-green-800":"text-red-800"),children:"success"===U?`Successfully exported ${F.length} entries!`:0===F.length?"No entries match your filters. Please adjust your criteria.":"Export failed. Please try again."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:420,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:414,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:413,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:405,columnNumber:11},this),r.jsxDEV("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxDEV("div",{className:"text-sm text-muted-foreground",children:[F.length," entries will be exported"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:439,columnNumber:11},this),r.jsxDEV("div",{className:"flex space-x-3",children:[r.jsxDEV(t,{variant:"outline",onClick:E,children:"Cancel"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:443,columnNumber:13},this),r.jsxDEV(t,{onClick:async()=>{if(0!==F.length){P(!0),V("idle");try{let e,r,t;const s=(new Date).toISOString().split("T")[0];switch(g){case"csv":e=p(F),r=`pain-data-${s}.csv`,t="text/csv";break;case"json":e=l(F),r=`pain-data-${s}.json`,t="application/json";break;case"pdf":e=m(F),r=`pain-report-${s}.pdf`,t="application/pdf";break;default:throw new Error("Unsupported export format")}u(e,r,t),V("success"),setTimeout(()=>{E(),V("idle")},2e3)}catch(e){V("error")}finally{P(!1)}}else V("error")},disabled:M||0===F.length,className:"min-w-[120px]",children:M?r.jsxDEV(r.Fragment,{children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:453,columnNumber:19},this),"Exporting..."]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:452,columnNumber:17},this):r.jsxDEV(r.Fragment,{children:[r.jsxDEV(d,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:458,columnNumber:19},this),"Export ",g.toUpperCase()]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:457,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:446,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:442,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:438,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:223,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/DataExportModal.tsx",lineNumber:222,columnNumber:5},this)}export{k as DataExportModal};
