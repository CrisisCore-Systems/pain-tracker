{"version":3,"mappings":"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","names":["PatientClaimInfoModal","isOpen","onClose","onSubmit","initialData","formData","setFormData","useState","patientName","patientDOB","patientAddress","patientPhone","claimNumber","injuryDate","employerName","physicianName","physicianPhone","errors","setErrors","handleChange","field","value","prev","jsxDEV","className","role","children","id","fileName","lineNumber","columnNumber","this","onClick","X","size","e","preventDefault","newErrors","trim","Object","keys","length","validateForm","htmlFor","type","onChange","target","placeholder","rows","convertSVGToPNG","svgString","width","height","Promise","resolve","reject","canvas","document","createElement","ctx","getContext","Error","scale","img","Image","svgBlob","Blob","url","URL","createObjectURL","onload","drawImage","revokeObjectURL","dataUrl","toDataURL","error","onerror","src","captureChartById","async","elementId","element","getElementById","querySelector","HTMLCanvasElement","canvasElement","captureCanvasChart","SVGElement","svgElement","clonedSvg","cloneNode","styles","window","getComputedStyle","parseInt","setAttribute","toString","XMLSerializer","serializeToString","captureSVGChart","ClinicalPDFExportButton","entries","moodEntries","variant","showModal","setShowModal","isExporting","setIsExporting","setError","logPdfAudit","useCallback","action","actionType","outcome","details","hipaaComplianceService","logAuditEvent","userId","userRole","resourceType","entryCount","moodEntryCount","auditError","handleExportClick","reason","step","handleSubmitPatientInfo","patientInfo","stage","hasPatientInfo","Boolean","timeout","requestAnimationFrame","setTimeout","waitForChartsToRender","chartImages","charts","results","chart","captureMultipleCharts","ClinicalPDFExporter","__vitePreload","import","__VITE_PRELOAD__","exporter","generateReport","painTrend","painDistribution","includeNarrative","navigator","vibrate","chartsCaptured","err","message","Fragment","disabled","FileText","Download"],"ignoreList":[],"sources":["../../src/components/export/PatientClaimInfoModal.tsx","../../src/utils/chartCapture.ts","../../src/components/export/ClinicalPDFExportButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { X } from 'lucide-react';\n\nexport interface PatientClaimInfo {\n  patientName: string;\n  patientDOB: string;\n  patientAddress: string;\n  patientPhone: string;\n  claimNumber: string;\n  injuryDate: string;\n  employerName: string;\n  physicianName: string;\n  physicianPhone: string;\n}\n\ninterface PatientClaimInfoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (info: PatientClaimInfo) => void;\n  initialData?: Partial<PatientClaimInfo>;\n}\n\n/**\n * Patient and Claim Information Form\n *\n * Collects WorkSafe BC required information for clinical PDF export.\n * Trauma-informed design with gentle validation and clear labels.\n */\nexport const PatientClaimInfoModal: React.FC<PatientClaimInfoModalProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  initialData = {},\n}) => {\n  const [formData, setFormData] = useState<PatientClaimInfo>({\n    patientName: initialData.patientName || '',\n    patientDOB: initialData.patientDOB || '',\n    patientAddress: initialData.patientAddress || '',\n    patientPhone: initialData.patientPhone || '',\n    claimNumber: initialData.claimNumber || '',\n    injuryDate: initialData.injuryDate || '',\n    employerName: initialData.employerName || '',\n    physicianName: initialData.physicianName || '',\n    physicianPhone: initialData.physicianPhone || '',\n  });\n\n  const [errors, setErrors] = useState<Partial<Record<keyof PatientClaimInfo, string>>>({});\n\n  if (!isOpen) return null;\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<Record<keyof PatientClaimInfo, string>> = {};\n\n    if (!formData.patientName.trim()) {\n      newErrors.patientName = 'Patient name is required';\n    }\n\n    if (!formData.claimNumber.trim()) {\n      newErrors.claimNumber = 'Claim number is required for WorkSafe BC';\n    }\n\n    if (!formData.injuryDate) {\n      newErrors.injuryDate = 'Injury date is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (validateForm()) {\n      onSubmit(formData);\n      onClose();\n    }\n  };\n\n  const handleChange = (field: keyof PatientClaimInfo, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: undefined }));\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4\"\n      role=\"dialog\"\n      aria-labelledby=\"patient-info-title\"\n      aria-modal=\"true\"\n    >\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-lg flex items-center justify-between\">\n          <div>\n            <h2 id=\"patient-info-title\" className=\"text-xl font-bold\">\n              Patient & Claim Information\n            </h2>\n            <p className=\"text-sm text-blue-100 mt-1\">Required for WorkSafe BC clinical report</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-white hover:bg-white/20 rounded-full p-2 transition-colors\"\n            aria-label=\"Close dialog\"\n          >\n            <X size={24} />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Patient Information Section */}\n          <fieldset>\n            <legend className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\n              <span className=\"text-2xl\">ðŸ‘¤</span> Patient Information\n            </legend>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label\n                  htmlFor=\"patientName\"\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  Full Name <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"patientName\"\n                  value={formData.patientName}\n                  onChange={e => handleChange('patientName', e.target.value)}\n                  className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${\n                    errors.patientName ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"John Doe\"\n                  aria-invalid={!!errors.patientName}\n                  aria-describedby={errors.patientName ? 'patientName-error' : undefined}\n                />\n                {errors.patientName && (\n                  <p id=\"patientName-error\" className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                    {errors.patientName}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <label\n                    htmlFor=\"patientDOB\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Date of Birth\n                  </label>\n                  <input\n                    type=\"date\"\n                    id=\"patientDOB\"\n                    value={formData.patientDOB}\n                    onChange={e => handleChange('patientDOB', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label\n                    htmlFor=\"patientPhone\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Phone Number\n                  </label>\n                  <input\n                    type=\"tel\"\n                    id=\"patientPhone\"\n                    value={formData.patientPhone}\n                    onChange={e => handleChange('patientPhone', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                    placeholder=\"(555) 123-4567\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label\n                  htmlFor=\"patientAddress\"\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  Address\n                </label>\n                <textarea\n                  id=\"patientAddress\"\n                  value={formData.patientAddress}\n                  onChange={e => handleChange('patientAddress', e.target.value)}\n                  rows={2}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                  placeholder=\"123 Main St, City, Province, Postal Code\"\n                />\n              </div>\n            </div>\n          </fieldset>\n\n          {/* WorkSafe BC Claim Information */}\n          <fieldset className=\"pt-6 border-t border-gray-200 dark:border-gray-700\">\n            <legend className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\n              <span className=\"text-2xl\">ðŸ“‹</span> WorkSafe BC Claim\n            </legend>\n\n            <div className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <label\n                    htmlFor=\"claimNumber\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Claim Number <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"claimNumber\"\n                    value={formData.claimNumber}\n                    onChange={e => handleChange('claimNumber', e.target.value)}\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${\n                      errors.claimNumber ? 'border-red-500' : 'border-gray-300'\n                    }`}\n                    placeholder=\"WCB-2025-12345\"\n                    aria-invalid={!!errors.claimNumber}\n                    aria-describedby={errors.claimNumber ? 'claimNumber-error' : undefined}\n                  />\n                  {errors.claimNumber && (\n                    <p\n                      id=\"claimNumber-error\"\n                      className=\"mt-1 text-sm text-red-600 dark:text-red-400\"\n                    >\n                      {errors.claimNumber}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label\n                    htmlFor=\"injuryDate\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Date of Injury <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    id=\"injuryDate\"\n                    value={formData.injuryDate}\n                    onChange={e => handleChange('injuryDate', e.target.value)}\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${\n                      errors.injuryDate ? 'border-red-500' : 'border-gray-300'\n                    }`}\n                    aria-invalid={!!errors.injuryDate}\n                    aria-describedby={errors.injuryDate ? 'injuryDate-error' : undefined}\n                  />\n                  {errors.injuryDate && (\n                    <p\n                      id=\"injuryDate-error\"\n                      className=\"mt-1 text-sm text-red-600 dark:text-red-400\"\n                    >\n                      {errors.injuryDate}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <label\n                  htmlFor=\"employerName\"\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  Employer Name\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"employerName\"\n                  value={formData.employerName}\n                  onChange={e => handleChange('employerName', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                  placeholder=\"Company Name\"\n                />\n              </div>\n            </div>\n          </fieldset>\n\n          {/* Healthcare Provider Information */}\n          <fieldset className=\"pt-6 border-t border-gray-200 dark:border-gray-700\">\n            <legend className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\n              <span className=\"text-2xl\">ðŸ©º</span> Healthcare Provider\n            </legend>\n\n            <div className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <label\n                    htmlFor=\"physicianName\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Physician Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"physicianName\"\n                    value={formData.physicianName}\n                    onChange={e => handleChange('physicianName', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                    placeholder=\"Dr. Jane Smith\"\n                  />\n                </div>\n\n                <div>\n                  <label\n                    htmlFor=\"physicianPhone\"\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    Physician Phone\n                  </label>\n                  <input\n                    type=\"tel\"\n                    id=\"physicianPhone\"\n                    value={formData.physicianPhone}\n                    onChange={e => handleChange('physicianPhone', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                    placeholder=\"(555) 987-6543\"\n                  />\n                </div>\n              </div>\n            </div>\n          </fieldset>\n\n          {/* Help Text */}\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n            <p className=\"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2\">\n              <span className=\"text-lg\">ðŸ’¡</span>\n              <span>\n                <strong>Privacy Notice:</strong> This information is used only to generate your\n                clinical report. All data remains on your device and is encrypted. Fields marked\n                with * are required for WorkSafe BC compliance.\n              </span>\n            </p>\n          </div>\n\n          {/* Form Actions */}\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg\"\n            >\n              Generate Report\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n","/**\n * Chart Capture Utilities\n *\n * Provides functions to capture chart elements as data URLs for PDF embedding.\n * Supports both canvas-based and SVG-based charts.\n */\n\n/**\n * Capture a canvas element as a data URL\n */\nexport const captureCanvasChart = (canvasElement: HTMLCanvasElement): string => {\n  try {\n    return canvasElement.toDataURL('image/png', 1.0);\n  } catch (error) {\n    console.error('Failed to capture canvas chart:', error);\n    return '';\n  }\n};\n\n/**\n * Capture an SVG element as a data URL\n */\nexport const captureSVGChart = async (svgElement: SVGElement): Promise<string> => {\n  try {\n    // Clone the SVG to avoid modifying the original\n    const clonedSvg = svgElement.cloneNode(true) as SVGElement;\n\n    // Get computed styles\n    const styles = window.getComputedStyle(svgElement);\n    const width = parseInt(styles.width);\n    const height = parseInt(styles.height);\n\n    // Set explicit dimensions\n    clonedSvg.setAttribute('width', width.toString());\n    clonedSvg.setAttribute('height', height.toString());\n\n    // Serialize SVG to string\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(clonedSvg);\n\n    // Convert to PNG via canvas for better PDF compatibility\n    return await convertSVGToPNG(svgString, width, height);\n  } catch (error) {\n    console.error('Failed to capture SVG chart:', error);\n    return '';\n  }\n};\n\n/**\n * Convert SVG string to PNG data URL\n */\nconst convertSVGToPNG = (svgString: string, width: number, height: number): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      reject(new Error('Failed to get canvas context'));\n      return;\n    }\n\n    // Set canvas dimensions with scale factor for better quality\n    const scale = 2;\n    canvas.width = width * scale;\n    canvas.height = height * scale;\n    ctx.scale(scale, scale);\n\n    // Create image from SVG\n    const img = new Image();\n    const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });\n    const url = URL.createObjectURL(svgBlob);\n\n    img.onload = () => {\n      ctx.drawImage(img, 0, 0);\n      URL.revokeObjectURL(url);\n\n      try {\n        const dataUrl = canvas.toDataURL('image/png', 1.0);\n        resolve(dataUrl);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    img.onerror = () => {\n      URL.revokeObjectURL(url);\n      reject(new Error('Failed to load SVG image'));\n    };\n\n    img.src = url;\n  });\n};\n\n/**\n * Capture a chart by ID or selector\n */\nexport const captureChartById = async (\n  elementId: string,\n  type: 'canvas' | 'svg' = 'canvas'\n): Promise<string> => {\n  const element = document.getElementById(elementId) || document.querySelector(elementId);\n\n  if (!element) {\n    console.warn(`Chart element not found: ${elementId}`);\n    return '';\n  }\n\n  if (type === 'canvas' && element instanceof HTMLCanvasElement) {\n    return captureCanvasChart(element);\n  } else if (type === 'svg' && element instanceof SVGElement) {\n    return await captureSVGChart(element);\n  } else {\n    console.warn(`Element ${elementId} is not a ${type} element`);\n    return '';\n  }\n};\n\n/**\n * Capture multiple charts at once\n */\nexport const captureMultipleCharts = async (\n  charts: Array<{ id: string; type: 'canvas' | 'svg' }>\n): Promise<Record<string, string>> => {\n  const results: Record<string, string> = {};\n\n  for (const chart of charts) {\n    results[chart.id] = await captureChartById(chart.id, chart.type);\n  }\n\n  return results;\n};\n\n/**\n * Wait for charts to render before capturing\n */\nexport const waitForChartsToRender = (timeout = 2000): Promise<void> => {\n  return new Promise(resolve => {\n    // Use requestAnimationFrame to wait for rendering\n    requestAnimationFrame(() => {\n      setTimeout(resolve, timeout);\n    });\n  });\n};\n\n/**\n * Create a placeholder chart image for when actual chart is unavailable\n */\nexport const createPlaceholderChart = (\n  width = 600,\n  height = 400,\n  text = 'Chart Not Available'\n): string => {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return '';\n\n  // Background\n  ctx.fillStyle = '#f3f4f6';\n  ctx.fillRect(0, 0, width, height);\n\n  // Border\n  ctx.strokeStyle = '#d1d5db';\n  ctx.lineWidth = 2;\n  ctx.strokeRect(0, 0, width, height);\n\n  // Text\n  ctx.fillStyle = '#6b7280';\n  ctx.font = '16px sans-serif';\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText(text, width / 2, height / 2);\n\n  return canvas.toDataURL('image/png');\n};\n","import React, { useState, useCallback } from 'react';\nimport { FileText, Download } from 'lucide-react';\nimport { PatientClaimInfoModal, type PatientClaimInfo } from './PatientClaimInfoModal';\nimport { captureMultipleCharts, waitForChartsToRender } from '../../utils/chartCapture';\nimport type { PainEntry } from '../../types';\nimport type { MoodEntry } from '../../types/quantified-empathy';\nimport { hipaaComplianceService } from '../../services/HIPAACompliance';\nimport type { AuditTrail } from '../../services/HIPAACompliance';\n\ntype AuditActionType = AuditTrail['actionType'];\ntype AuditOutcome = AuditTrail['outcome'];\n\ninterface ClinicalPDFExportButtonProps {\n  entries: PainEntry[];\n  moodEntries?: MoodEntry[];\n  className?: string;\n  variant?: 'button' | 'compact';\n}\n\n/**\n * Clinical PDF Export Button with Patient Info Collection\n *\n * Integrates patient info modal, chart capture, and PDF generation.\n * Provides user feedback during export process.\n */\nexport const ClinicalPDFExportButton: React.FC<ClinicalPDFExportButtonProps> = ({\n  entries,\n  moodEntries = [],\n  className = '',\n  variant = 'button',\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const logPdfAudit = useCallback(\n    async ({\n      action,\n      actionType = 'export',\n      outcome = 'success',\n      details = {},\n    }: {\n      action: string;\n      actionType?: AuditActionType;\n      outcome?: AuditOutcome;\n      details?: Record<string, unknown>;\n    }) => {\n      try {\n        await hipaaComplianceService.logAuditEvent({\n          actionType,\n          userId: 'local-user',\n          userRole: 'patient',\n          resourceType: 'ClinicalPDFExport',\n          outcome,\n          details: {\n            action,\n            entryCount: entries.length,\n            moodEntryCount: moodEntries.length,\n            ...details,\n          },\n        });\n      } catch (auditError) {\n        console.error('HIPAA audit logging failed', auditError);\n      }\n    },\n    [entries.length, moodEntries.length]\n  );\n\n  const handleExportClick = () => {\n    if (entries.length === 0) {\n      setError('No pain entries to export');\n      void logPdfAudit({\n        action: 'clinical-pdf-export',\n        outcome: 'failure',\n        details: { reason: 'no-entries' },\n      });\n      return;\n    }\n    setError(null);\n    setShowModal(true);\n    void logPdfAudit({\n      action: 'clinical-pdf-export',\n      actionType: 'access',\n      details: { step: 'patient-info-modal' },\n    });\n  };\n\n  const handleSubmitPatientInfo = async (patientInfo: PatientClaimInfo) => {\n    setIsExporting(true);\n    setError(null);\n    void logPdfAudit({\n      action: 'clinical-pdf-export',\n      details: {\n        stage: 'generation-start',\n        hasPatientInfo: Boolean(patientInfo),\n      },\n    });\n\n    try {\n      // Wait for charts to render\n      await waitForChartsToRender(1000);\n\n      // Capture chart images\n      const chartImages = await captureMultipleCharts([\n        { id: 'pain-trend-chart', type: 'canvas' },\n        { id: 'pain-distribution-chart', type: 'canvas' },\n      ]);\n\n      // Lazy load PDF exporter to defer jsPDF bundle loading (Phase 3 optimization)\n      const { ClinicalPDFExporter } = await import('../../services/ClinicalPDFExporter');\n      const exporter = new ClinicalPDFExporter();\n      await exporter.generateReport({\n        entries,\n        patientInfo,\n        moodEntries,\n        charts: {\n          painTrend: chartImages['pain-trend-chart'],\n          painDistribution: chartImages['pain-distribution-chart'],\n        },\n        includeNarrative: true,\n      });\n\n      // Success feedback\n      if ('vibrate' in navigator) {\n        navigator.vibrate([100, 50, 100]);\n      }\n      await logPdfAudit({\n        action: 'clinical-pdf-export',\n        details: {\n          stage: 'generation-complete',\n          chartsCaptured: Object.keys(chartImages).length,\n        },\n      });\n    } catch (err) {\n      console.error('PDF export failed:', err);\n      setError('Failed to generate PDF. Please try again.');\n      await logPdfAudit({\n        action: 'clinical-pdf-export',\n        outcome: 'failure',\n        details: {\n          stage: 'generation-error',\n          error: err instanceof Error ? err.message : 'unknown-error',\n        },\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  if (variant === 'compact') {\n    return (\n      <>\n        <button\n          onClick={handleExportClick}\n          disabled={isExporting || entries.length === 0}\n          className={`inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium ${className}`}\n          aria-label=\"Export clinical PDF report\"\n        >\n          {isExporting ? (\n            <>\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\" />\n              Exporting...\n            </>\n          ) : (\n            <>\n              <FileText size={16} />\n              Export PDF\n            </>\n          )}\n        </button>\n\n        {error && (\n          <p className=\"text-sm text-red-600 dark:text-red-400 mt-2\" role=\"alert\">\n            {error}\n          </p>\n        )}\n\n        <PatientClaimInfoModal\n          isOpen={showModal}\n          onClose={() => setShowModal(false)}\n          onSubmit={handleSubmitPatientInfo}\n        />\n      </>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <button\n        onClick={handleExportClick}\n        disabled={isExporting || entries.length === 0}\n        className=\"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl font-medium text-lg\"\n        aria-label=\"Export clinical PDF report\"\n      >\n        {isExporting ? (\n          <>\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\" />\n            <span>Generating PDF Report...</span>\n          </>\n        ) : (\n          <>\n            <Download size={24} />\n            <span>Export Clinical PDF Report</span>\n          </>\n        )}\n      </button>\n\n      {error && (\n        <div\n          className=\"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\"\n          role=\"alert\"\n        >\n          <p className=\"text-sm text-red-800 dark:text-red-300\">{error}</p>\n        </div>\n      )}\n\n      {entries.length === 0 && (\n        <p className=\"mt-4 text-sm text-gray-600 dark:text-gray-400 text-center\">\n          Start tracking your pain to generate clinical reports\n        </p>\n      )}\n\n      <PatientClaimInfoModal\n        isOpen={showModal}\n        onClose={() => setShowModal(false)}\n        onSubmit={handleSubmitPatientInfo}\n      />\n    </div>\n  );\n};\n"],"file":"ClinicalPDFExportButton-BN9YkRxz.js"}