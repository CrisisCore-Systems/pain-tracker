const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClinicalPDFExporter-C8Zcgu44.js","assets/index-B_OlMJtf.js","assets/react-vendor-Bn1aEwkj.js","assets/chart-vendor-Cjsg3YbF.js","assets/date-vendor-Bjuqiw2y.js","assets/index-XbuqgM6p.css"])))=>i.map(i=>d[i]);
import{j as e,X as D,m as h,F as C,D as P,_ as j}from"./index-B_OlMJtf.js";import{r as f}from"./chart-vendor-Cjsg3YbF.js";import"./react-vendor-Bn1aEwkj.js";import"./date-vendor-Bjuqiw2y.js";const g=({isOpen:a,onClose:n,onSubmit:s,initialData:l={}})=>{const[o,c]=f.useState({patientName:l.patientName||"",patientDOB:l.patientDOB||"",patientAddress:l.patientAddress||"",patientPhone:l.patientPhone||"",claimNumber:l.claimNumber||"",injuryDate:l.injuryDate||"",employerName:l.employerName||"",physicianName:l.physicianName||"",physicianPhone:l.physicianPhone||""}),[t,m]=f.useState({});if(!a)return null;const d=()=>{const r={};return o.patientName.trim()||(r.patientName="Patient name is required"),o.claimNumber.trim()||(r.claimNumber="Claim number is required for WorkSafe BC"),o.injuryDate||(r.injuryDate="Injury date is required"),m(r),Object.keys(r).length===0},p=r=>{r.preventDefault(),d()&&(s(o),n())},i=(r,b)=>{c(x=>({...x,[r]:b})),t[r]&&m(x=>({...x,[r]:void 0}))};return e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",role:"dialog","aria-labelledby":"patient-info-title","aria-modal":"true",children:e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-lg flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{id:"patient-info-title",className:"text-xl font-bold",children:"Patient & Claim Information"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-blue-100 mt-1",children:"Required for WorkSafe BC clinical report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:97,columnNumber:11},void 0),e.jsxDEV("button",{onClick:n,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors","aria-label":"Close dialog",children:e.jsxDEV(D,{size:24},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:108,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:103,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:96,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:p,className:"p-6 space-y-6",children:[e.jsxDEV("fieldset",{children:[e.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-2xl",children:"ðŸ‘¤"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:117,columnNumber:15},void 0)," Patient Information"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:116,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"patientName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:126,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:122,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",id:"patientName",value:o.patientName,onChange:r=>i("patientName",r.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${t.patientName?"border-red-500":"border-gray-300"}`,placeholder:"John Doe","aria-invalid":!!t.patientName,"aria-describedby":t.patientName?"patientName-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:128,columnNumber:17},void 0),t.patientName&&e.jsxDEV("p",{id:"patientName-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.patientName},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:141,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:121,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"patientDOB",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:149,columnNumber:19},void 0),e.jsxDEV("input",{type:"date",id:"patientDOB",value:o.patientDOB,onChange:r=>i("patientDOB",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:155,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:148,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"patientPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:165,columnNumber:19},void 0),e.jsxDEV("input",{type:"tel",id:"patientPhone",value:o.patientPhone,onChange:r=>i("patientPhone",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"(555) 123-4567"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:171,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:164,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:147,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"patientAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:183,columnNumber:17},void 0),e.jsxDEV("textarea",{id:"patientAddress",value:o.patientAddress,onChange:r=>i("patientAddress",r.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"123 Main St, City, Province, Postal Code"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:189,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:120,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:115,columnNumber:11},void 0),e.jsxDEV("fieldset",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-2xl",children:"ðŸ“‹"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:204,columnNumber:15},void 0)," WorkSafe BC Claim"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:203,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"claimNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Claim Number ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:214,columnNumber:34},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:210,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",id:"claimNumber",value:o.claimNumber,onChange:r=>i("claimNumber",r.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${t.claimNumber?"border-red-500":"border-gray-300"}`,placeholder:"WCB-2025-12345","aria-invalid":!!t.claimNumber,"aria-describedby":t.claimNumber?"claimNumber-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:216,columnNumber:19},void 0),t.claimNumber&&e.jsxDEV("p",{id:"claimNumber-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.claimNumber},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:229,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:209,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"injuryDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Date of Injury ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:243,columnNumber:36},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:239,columnNumber:19},void 0),e.jsxDEV("input",{type:"date",id:"injuryDate",value:o.injuryDate,onChange:r=>i("injuryDate",r.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${t.injuryDate?"border-red-500":"border-gray-300"}`,"aria-invalid":!!t.injuryDate,"aria-describedby":t.injuryDate?"injuryDate-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:245,columnNumber:19},void 0),t.injuryDate&&e.jsxDEV("p",{id:"injuryDate-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.injuryDate},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:257,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:208,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"employerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Employer Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:268,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",id:"employerName",value:o.employerName,onChange:r=>i("employerName",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Company Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:267,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:207,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:202,columnNumber:11},void 0),e.jsxDEV("fieldset",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-2xl",children:"ðŸ©º"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:289,columnNumber:15},void 0)," Healthcare Provider"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:288,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"physicianName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Physician Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:295,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",id:"physicianName",value:o.physicianName,onChange:r=>i("physicianName",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Dr. Jane Smith"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:301,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:294,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"physicianPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Physician Phone"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV("input",{type:"tel",id:"physicianPhone",value:o.physicianPhone,onChange:r=>i("physicianPhone",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"(555) 987-6543"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:318,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:311,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:293,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:287,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxDEV("p",{className:"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2",children:[e.jsxDEV("span",{className:"text-lg",children:"ðŸ’¡"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:334,columnNumber:15},void 0),e.jsxDEV("span",{children:[e.jsxDEV("strong",{children:"Privacy Notice:"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:336,columnNumber:17},void 0)," This information is used only to generate your clinical report. All data remains on your device and is encrypted. Fields marked with * are required for WorkSafe BC compliance."]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:335,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:333,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:332,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex gap-3 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:345,columnNumber:13},void 0),e.jsxDEV("button",{type:"submit",className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg",children:"Generate Report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:344,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:94,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:88,columnNumber:5},void 0)},v=a=>{try{return a.toDataURL("image/png",1)}catch(n){return console.error("Failed to capture canvas chart:",n),""}},E=async a=>{try{const n=a.cloneNode(!0),s=window.getComputedStyle(a),l=parseInt(s.width),o=parseInt(s.height);n.setAttribute("width",l.toString()),n.setAttribute("height",o.toString());const t=new XMLSerializer().serializeToString(n),m=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return await U(t,l,o)}catch(n){return console.error("Failed to capture SVG chart:",n),""}},U=(a,n,s)=>new Promise((l,o)=>{const c=document.createElement("canvas"),t=c.getContext("2d");if(!t){o(new Error("Failed to get canvas context"));return}const m=2;c.width=n*m,c.height=s*m,t.scale(m,m);const d=new Image,p=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(p);d.onload=()=>{t.drawImage(d,0,0),URL.revokeObjectURL(i);try{const r=c.toDataURL("image/png",1);l(r)}catch(r){o(r)}},d.onerror=()=>{URL.revokeObjectURL(i),o(new Error("Failed to load SVG image"))},d.src=i}),V=async(a,n="canvas")=>{const s=document.getElementById(a)||document.querySelector(a);return s?n==="canvas"&&s instanceof HTMLCanvasElement?v(s):n==="svg"&&s instanceof SVGElement?await E(s):(console.warn(`Element ${a} is not a ${n} element`),""):(console.warn(`Chart element not found: ${a}`),"")},w=async a=>{const n={};for(const s of a)n[s.id]=await V(s.id,s.type);return n},I=(a=2e3)=>new Promise(n=>{requestAnimationFrame(()=>{setTimeout(n,a)})}),R=({entries:a,moodEntries:n=[],className:s="",variant:l="button"})=>{const[o,c]=f.useState(!1),[t,m]=f.useState(!1),[d,p]=f.useState(null),i=f.useCallback(async({action:x,actionType:u="export",outcome:N="success",details:k={}})=>{try{await h.logAuditEvent({actionType:u,userId:"local-user",userRole:"patient",resourceType:"ClinicalPDFExport",outcome:N,details:{action:x,entryCount:a.length,moodEntryCount:n.length,...k}})}catch(y){console.error("HIPAA audit logging failed",y)}},[a.length,n.length]),r=()=>{if(a.length===0){p("No pain entries to export"),i({action:"clinical-pdf-export",outcome:"failure",details:{reason:"no-entries"}});return}p(null),c(!0),i({action:"clinical-pdf-export",actionType:"access",details:{step:"patient-info-modal"}})},b=async x=>{m(!0),p(null),i({action:"clinical-pdf-export",details:{stage:"generation-start",hasPatientInfo:!!x}});try{await I(1e3);const u=await w([{id:"pain-trend-chart",type:"canvas"},{id:"pain-distribution-chart",type:"canvas"}]),{ClinicalPDFExporter:N}=await j(async()=>{const{ClinicalPDFExporter:y}=await import("./ClinicalPDFExporter-C8Zcgu44.js");return{ClinicalPDFExporter:y}},__vite__mapDeps([0,1,2,3,4,5]));await new N().generateReport({entries:a,patientInfo:x,moodEntries:n,charts:{painTrend:u["pain-trend-chart"],painDistribution:u["pain-distribution-chart"]},includeNarrative:!0}),"vibrate"in navigator&&navigator.vibrate([100,50,100]),await i({action:"clinical-pdf-export",details:{stage:"generation-complete",chartsCaptured:Object.keys(u).length}})}catch(u){console.error("PDF export failed:",u),p("Failed to generate PDF. Please try again."),await i({action:"clinical-pdf-export",outcome:"failure",details:{stage:"generation-error",error:u instanceof Error?u.message:"unknown-error"}})}finally{m(!1)}};return l==="compact"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:r,disabled:t||a.length===0,className:`inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium ${s}`,"aria-label":"Export clinical PDF report",children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:161,columnNumber:15},void 0),"Exporting..."]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:160,columnNumber:13},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C,{size:16},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:166,columnNumber:15},void 0),"Export PDF"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:165,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:153,columnNumber:9},void 0),d&&e.jsxDEV("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",role:"alert",children:d},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:173,columnNumber:11},void 0),e.jsxDEV(g,{isOpen:o,onClose:()=>c(!1),onSubmit:b},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:178,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:152,columnNumber:7},void 0):e.jsxDEV("div",{className:s,children:[e.jsxDEV("button",{onClick:r,disabled:t||a.length===0,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl font-medium text-lg","aria-label":"Export clinical PDF report",children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:197,columnNumber:13},void 0),e.jsxDEV("span",{children:"Generating PDF Report..."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:196,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(P,{size:24},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:202,columnNumber:13},void 0),e.jsxDEV("span",{children:"Export Clinical PDF Report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:203,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:201,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:189,columnNumber:7},void 0),d&&e.jsxDEV("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",role:"alert",children:e.jsxDEV("p",{className:"text-sm text-red-800 dark:text-red-300",children:d},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:213,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:209,columnNumber:9},void 0),a.length===0&&e.jsxDEV("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 text-center",children:"Start tracking your pain to generate clinical reports"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:218,columnNumber:9},void 0),e.jsxDEV(g,{isOpen:o,onClose:()=>c(!1),onSubmit:b},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:223,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:188,columnNumber:5},void 0)};export{R as ClinicalPDFExportButton};
//# sourceMappingURL=ClinicalPDFExportButton-NfYP_vuT.js.map
