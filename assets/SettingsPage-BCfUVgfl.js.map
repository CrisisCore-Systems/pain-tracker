{"version":3,"mappings":"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","names":["AccessibilitySettingsPanel","preferences","updatePreferences","useTraumaInformed","mobilePrefs","updateMobilePrefs","setPreferences","useState","voiceInput","textToSpeech","hapticFeedback","largeText","highContrast","reducedMotion","useEffect","saved","localStorage","getItem","JSON","parse","error","useCallback","updates","newPrefs","setItem","stringify","useMobileAccessibility","activeTab","setActiveTab","handlePreferenceChange","tabs","id","label","icon","jsxDEV","Brain","className","fileName","lineNumber","columnNumber","this","description","Eye","Hand","Smartphone","Heart","children","Settings","onClick","simplifiedMode","showMemoryAids","autoSave","showProgress","fontSize","contrast","reduceMotion","touchTargetSize","confirmationLevel","gentleLanguage","hideDistressingContent","showComfortPrompts","RotateCcw","map","tab","isActive","role","CognitiveSettings","onChange","VisualSettings","MotorSettings","MobileSettings","onTraumaChange","EmotionalSafetySettings","SettingGroup","title","ToggleSetting","checked","Zap","Type","SelectSetting","value","options","Palette","Volume2","Shield","mode","setMode","isHighContrast","useTheme","window","matchMedia","matches","style","minHeight","minWidth","replace","toLowerCase","transform","marginTop","e","target","option","PHQ9","React","lazy","__vitePreload","import","__VITE_PRELOAD__","STORAGE_KEY","AlertsSettings","variant","onClose","settings","setSettings","raw","threshold","open","setOpen","showPHQ","setShowPHQ","containerRef","useRef","prevActiveRef","slideIn","setSlideIn","prefersReduced","current","document","activeElement","t","setTimeout","clearTimeout","focus","handleClose","renderBody","showClose","type","usePainTrackerStore","getState","crisisDetectionEnabled","setCrisisDetectionEnabled","min","max","Number","Math","cn","Fragment","background","border","color","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinejoin","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","escapeDeactivates","onDeactivate","ref","tabIndex","borderLeft","transitionTimingFunction","Suspense","fallback","Card","DSCard","CardContent","DSCardContent","CardHeader","DSCardHeader","CardTitle","DSCardTitle","Button","DSButton","Badge","DSBadge","Input","DSInput","Select","SelectTrigger","onValueChange","props","STORAGE_KEYS","NotificationStorage","static","constructor","getInstance","instance","saveNotification","notification","notifications","getAllNotifications","existingIndex","findIndex","n","updatedAt","Date","toISOString","push","saveNotificationsToStorage","Error","getNotification","find","encrypted","decrypted","filter","isValidNotification","getNotificationsByStatus","status","getNotificationsByType","updateNotificationStatus","updatedNotification","readAt","dismissedAt","deleteNotification","filtered","bulkUpdateStatus","ids","updated","includes","archiveOldNotifications","daysOld","cutoffDate","setDate","getDate","createdAt","savePreferences","getPreferences","getDefaultPreferences","validatePreferences","saveSchedule","schedule","schedules","getAllSchedules","s","saveSchedulesToStorage","isValidSchedule","deleteSchedule","message","priority","Array","isArray","deliveryMethods","hasId","hasName","name","hasType","hasTrigger","trigger","hasTemplate","template","hasIsActive","hasCreatedAt","Boolean","enabled","browser","in_app","email","sms","categories","pain_reminders","medication_alerts","appointment_reminders","goal_achievements","progress_checkins","system_updates","custom","quietHours","start","end","frequencyLimits","maxPerDay","maxPerHour","prefs","defaults","cleanup","now","activeNotifications","expiresAt","length","clearAll","removeItem","notificationStorage","NotificationItem","onMarkAsRead","onMarkAsUnread","onDismiss","onArchive","onDelete","isExpanded","setIsExpanded","AlertTriangle","Info","getPriorityIcon","CheckCircle","Bell","X","Archive","getStatusIcon","substring","Clock","dateString","date","diffInHours","floor","getTime","toLocaleDateString","formatTime","actionLabel","size","Check","Trash2","NotificationManagement","setNotifications","loading","setLoading","selectedNotifications","setSelectedNotifications","Set","showBulkActions","setShowBulkActions","filters","setFilters","search","loadNotifications","async","allNotifications","sort","a","b","filteredNotifications","useMemo","searchLower","hasAnyNotifications","handleMarkAsRead","handleMarkAsUnread","handleDismiss","handleArchive","handleDelete","Search","placeholder","prev","from","CheckCheck","handleSelectAll","selected","BellOff","has","newSelected","add","delete","handleSelectNotification","DEFAULT_NOTIFICATION_PREFERENCES","loadPrefs","stored","secureStorage","safeJSON","NotificationPreferencesPanel","setPrefs","set","Switch","onCheckedChange","BackupSettings","lastExport","setLastExport","importError","setImportError","importResult","setImportResult","keys","payload","key","get","data","exportedAt","filename","URL","createObjectURL","blob","Blob","url","createElement","href","download","click","revokeObjectURL","dataUrl","encodeURIComponent","downloadJSON","accept","file","files","text","parsed","Object","forEach","k","handleImport","toLocaleString","ExportSettings","entries","state","format","setFormat","exportToJSON","downloadData","exportToCSV","dataUri","exportToPDF","PrivacySettings","sharing","setSharing","readPrivacySettings","dataSharing","analytics","setAnalytics","analyticsConsent","retention","setRetention","retentionDays","weatherAutoCapture","setWeatherAutoCapture","writePrivacySettings","String","remove","PRIVACY_SETTINGS_STORAGE_KEY","SettingsPage","Download"],"ignoreList":[],"sources":["../../src/components/accessibility/AccessibilitySettings.tsx","../../src/components/accessibility/MobileAccessibility.tsx","../../src/components/AlertsSettings.tsx","../../src/components/ui/card.tsx","../../src/components/ui/button.tsx","../../src/components/ui/badge.tsx","../../src/components/ui/input.tsx","../../src/components/ui/select.tsx","../../src/utils/notifications/storage.ts","../../src/components/notifications/NotificationManagement.tsx","../../src/types/notifications.ts","../../src/components/settings/NotificationPreferencesPanel.tsx","../../src/components/settings/BackupSettings.tsx","../../src/components/settings/ExportSettings.tsx","../../src/components/settings/PrivacySettings.tsx","../../src/pages/SettingsPage.tsx"],"sourcesContent":["/**\r\n * Customizable Interface Options\r\n * Settings panel for trauma-informed accessibility preferences\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Settings,\r\n  Eye,\r\n  Type,\r\n  Palette,\r\n  Hand,\r\n  Volume2,\r\n  Heart,\r\n  Shield,\r\n  Brain,\r\n  Zap,\r\n  RotateCcw,\r\n  Smartphone,\r\n} from 'lucide-react';\r\nimport { useMobileAccessibility } from './MobileAccessibility';\r\nimport { useTraumaInformed } from './TraumaInformedHooks';\r\nimport { useTheme } from '../../design-system';\r\nimport type { TraumaInformedPreferences } from './TraumaInformedTypes';\r\n\r\nexport function AccessibilitySettingsPanel() {\r\n  const { preferences, updatePreferences } = useTraumaInformed();\r\n  const { preferences: mobilePrefs, updatePreferences: updateMobilePrefs } =\r\n    useMobileAccessibility();\r\n  const [activeTab, setActiveTab] = useState<\r\n    'cognitive' | 'visual' | 'motor' | 'emotional' | 'mobile'\r\n  >('cognitive');\r\n\r\n  const handlePreferenceChange = (updates: Partial<TraumaInformedPreferences>) => {\r\n    updatePreferences(updates);\r\n  };\r\n\r\n  const resetToDefaults = () => {\r\n    updatePreferences({\r\n      simplifiedMode: true,\r\n      showMemoryAids: true,\r\n      autoSave: true,\r\n      showProgress: true,\r\n      fontSize: 'medium',\r\n      contrast: 'normal',\r\n      reduceMotion: false,\r\n      touchTargetSize: 'large',\r\n      confirmationLevel: 'standard',\r\n      voiceInput: false,\r\n      gentleLanguage: true,\r\n      hideDistressingContent: false,\r\n      showComfortPrompts: true,\r\n    });\r\n  };\r\n\r\n  const tabs = [\r\n    {\r\n      id: 'cognitive' as const,\r\n      label: 'Cognitive Support',\r\n      icon: <Brain className=\"w-5 h-5\" />,\r\n      description: 'Memory aids and cognitive load reduction',\r\n    },\r\n    {\r\n      id: 'visual' as const,\r\n      label: 'Visual Preferences',\r\n      icon: <Eye className=\"w-5 h-5\" />,\r\n      description: 'Text size, contrast, and motion settings',\r\n    },\r\n    {\r\n      id: 'motor' as const,\r\n      label: 'Motor & Input',\r\n      icon: <Hand className=\"w-5 h-5\" />,\r\n      description: 'Touch targets and alternative input methods',\r\n    },\r\n    {\r\n      id: 'mobile' as const,\r\n      label: 'Mobile Features',\r\n      icon: <Smartphone className=\"w-5 h-5\" />,\r\n      description: 'Voice input, haptic feedback, and mobile accessibility',\r\n    },\r\n    {\r\n      id: 'emotional' as const,\r\n      label: 'Emotional Safety',\r\n      icon: <Heart className=\"w-5 h-5\" />,\r\n      description: 'Trauma-informed interaction patterns',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div \r\n      className=\"accessibility-settings w-full max-w-4xl mx-auto rounded-xl p-5 bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\"\r\n    >\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div \r\n            className=\"p-2 rounded-lg bg-sky-100 dark:bg-sky-500/15\"\r\n          >\r\n            <Settings className=\"w-6 h-6 text-sky-600 dark:text-sky-400\" />\r\n          </div>\r\n          <div>\r\n            <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Accessibility & Comfort Settings</h4>\r\n            <p className=\"text-sm text-gray-600 dark:text-slate-400 mt-1\">\r\n              Customize the interface to work best for your needs\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex space-x-2\">\r\n          <button\r\n            onClick={resetToDefaults}\r\n            className=\"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10 text-gray-600 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-white/10\"\r\n          >\r\n            <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n            Reset\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        {/* Tab Navigation */}\r\n        <div className=\"mb-6 border-b border-gray-200 dark:border-white/5\">\r\n          <nav className=\"w-full overflow-x-auto pb-2\" aria-label=\"Settings categories\">\r\n            <div className=\"inline-flex flex-nowrap gap-2 whitespace-nowrap min-w-max\">\r\n              {tabs.map(tab => {\r\n                const isActive = activeTab === tab.id;\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`shrink-0 flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg transition-all min-h-[44px] whitespace-nowrap overflow-hidden ${\r\n                      isActive\r\n                        ? 'bg-sky-100 dark:bg-sky-500/15 border border-sky-200 dark:border-sky-500/30 text-sky-700 dark:text-sky-400'\r\n                        : 'bg-transparent border border-transparent text-gray-500 dark:text-slate-500 hover:text-gray-700 dark:hover:text-slate-300'\r\n                    }`}\r\n                    aria-selected={isActive}\r\n                    role=\"tab\"\r\n                  >\r\n                    {tab.icon}\r\n                    <div className=\"text-left min-w-0\">\r\n                      <div className=\"truncate\">{tab.label}</div>\r\n                      <div className=\"hidden sm:block text-xs opacity-70 truncate\">{tab.description}</div>\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        <div className=\"space-y-6\">\r\n          {activeTab === 'cognitive' && (\r\n            <CognitiveSettings preferences={preferences} onChange={handlePreferenceChange} />\r\n          )}\r\n\r\n          {activeTab === 'visual' && (\r\n            <VisualSettings preferences={preferences} onChange={handlePreferenceChange} />\r\n          )}\r\n\r\n          {activeTab === 'motor' && (\r\n            <MotorSettings preferences={preferences} onChange={handlePreferenceChange} />\r\n          )}\r\n\r\n          {activeTab === 'mobile' && (\r\n            <MobileSettings\r\n              preferences={mobilePrefs}\r\n              onChange={updateMobilePrefs}\r\n              onTraumaChange={handlePreferenceChange}\r\n            />\r\n          )}\r\n\r\n          {activeTab === 'emotional' && (\r\n            <EmotionalSafetySettings preferences={preferences} onChange={handlePreferenceChange} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Cognitive Settings Tab\r\nfunction CognitiveSettings({\r\n  preferences,\r\n  onChange,\r\n}: {\r\n  preferences: TraumaInformedPreferences;\r\n  onChange: (updates: Partial<TraumaInformedPreferences>) => void;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SettingGroup\r\n        title=\"Interface Complexity\"\r\n        description=\"Reduce cognitive load by simplifying the interface\"\r\n        icon={<Brain className=\"w-5 h-5 text-purple-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Simplified Mode\"\r\n          description=\"Show only essential features and reduce interface complexity\"\r\n          checked={preferences.simplifiedMode}\r\n          onChange={checked => onChange({ simplifiedMode: checked })}\r\n        />\r\n\r\n        <div className=\"text-xs text-gray-600 dark:text-slate-400 rounded-lg border border-gray-200 dark:border-white/10 bg-white/70 dark:bg-slate-950/30 p-3\">\r\n          <div className=\"font-medium text-gray-800 dark:text-slate-200 mb-1\">\r\n            What changes when this is {preferences.simplifiedMode ? 'on' : 'off'}\r\n          </div>\r\n          <ul className=\"space-y-1\">\r\n            <li>\r\n              Forms show <span className=\"font-medium\">essential sections</span> only (you can still\r\n              choose Show All Sections from within the form).\r\n            </li>\r\n            <li>\r\n              Advanced details are <span className=\"font-medium\">collapsed/hidden by default</span>\r\n              using progressive disclosure.\r\n            </li>\r\n            <li>\r\n              The interface reduces <span className=\"font-medium\">visual noise</span> (fewer\r\n              decorative elements and less distraction).\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Memory Support\"\r\n        description=\"Tools to help remember and navigate the interface\"\r\n        icon={<Zap className=\"w-5 h-5 text-yellow-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Memory Aids\"\r\n          description=\"Show helpful tips and reminders throughout the interface\"\r\n          checked={preferences.showMemoryAids}\r\n          onChange={checked => onChange({ showMemoryAids: checked })}\r\n        />\r\n\r\n        <ToggleSetting\r\n          label=\"Progress Indicators\"\r\n          description=\"Show your progress through forms and tasks\"\r\n          checked={preferences.showProgress}\r\n          onChange={checked => onChange({ showProgress: checked })}\r\n        />\r\n\r\n        <ToggleSetting\r\n          label=\"Auto-Save\"\r\n          description=\"Automatically save your work to prevent data loss\"\r\n          checked={preferences.autoSave}\r\n          onChange={checked => onChange({ autoSave: checked })}\r\n        />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Visual Settings Tab\r\nfunction VisualSettings({\r\n  preferences,\r\n  onChange,\r\n}: {\r\n  preferences: TraumaInformedPreferences;\r\n  onChange: (updates: Partial<TraumaInformedPreferences>) => void;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SettingGroup\r\n        title=\"Text & Typography\"\r\n        description=\"Adjust text size for comfortable reading\"\r\n        icon={<Type className=\"w-5 h-5 text-blue-500\" />}\r\n      >\r\n        <SelectSetting\r\n          label=\"Font Size\"\r\n          description=\"Choose a comfortable text size for reading\"\r\n          value={preferences.fontSize}\r\n          options={[\r\n            { value: 'small', label: 'Small (14px)' },\r\n            { value: 'medium', label: 'Medium (16px)' },\r\n            { value: 'large', label: 'Large (18px)' },\r\n            { value: 'xl', label: 'Extra Large (20px)' },\r\n          ]}\r\n          onChange={value => onChange({ fontSize: value as TraumaInformedPreferences['fontSize'] })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Contrast & Colors\"\r\n        description=\"Adjust visual contrast for better visibility\"\r\n        icon={<Palette className=\"w-5 h-5 text-green-500\" />}\r\n      >\r\n        <SelectSetting\r\n          label=\"Contrast Level\"\r\n          description=\"Higher contrast can improve text readability\"\r\n          value={preferences.contrast}\r\n          options={[\r\n            { value: 'normal', label: 'Normal Contrast' },\r\n            { value: 'high', label: 'High Contrast' },\r\n            { value: 'extra-high', label: 'Extra High Contrast' },\r\n          ]}\r\n          onChange={value => onChange({ contrast: value as TraumaInformedPreferences['contrast'] })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Motion & Animation\"\r\n        description=\"Control movement and transitions in the interface\"\r\n        icon={<Zap className=\"w-5 h-5 text-orange-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Reduce Motion\"\r\n          description=\"Minimize animations and transitions that may cause discomfort\"\r\n          checked={preferences.reduceMotion}\r\n          onChange={checked => onChange({ reduceMotion: checked })}\r\n        />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Motor Settings Tab\r\nfunction MotorSettings({\r\n  preferences,\r\n  onChange,\r\n}: {\r\n  preferences: TraumaInformedPreferences;\r\n  onChange: (updates: Partial<TraumaInformedPreferences>) => void;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SettingGroup\r\n        title=\"Touch & Click Targets\"\r\n        description=\"Adjust the size of buttons and interactive elements\"\r\n        icon={<Hand className=\"w-5 h-5 text-blue-500\" />}\r\n      >\r\n        <SelectSetting\r\n          label=\"Touch Target Size\"\r\n          description=\"Larger targets are easier to tap accurately\"\r\n          value={preferences.touchTargetSize}\r\n          options={[\r\n            { value: 'normal', label: 'Normal (44px)' },\r\n            { value: 'large', label: 'Large (56px)' },\r\n            { value: 'extra-large', label: 'Extra Large (72px)' },\r\n          ]}\r\n          onChange={value =>\r\n            onChange({ touchTargetSize: value as TraumaInformedPreferences['touchTargetSize'] })\r\n          }\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Alternative Input\"\r\n        description=\"Enable alternative ways to interact with the interface\"\r\n        icon={<Volume2 className=\"w-5 h-5 text-green-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Voice Input\"\r\n          description=\"Use speech-to-text for filling out forms (requires microphone)\"\r\n          checked={preferences.voiceInput}\r\n          onChange={checked => onChange({ voiceInput: checked })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Interaction Feedback\"\r\n        description=\"Control confirmation prompts and feedback\"\r\n        icon={<Shield className=\"w-5 h-5 text-purple-500\" />}\r\n      >\r\n        <SelectSetting\r\n          label=\"Confirmation Level\"\r\n          description=\"How much confirmation do you want for actions?\"\r\n          value={preferences.confirmationLevel}\r\n          options={[\r\n            { value: 'minimal', label: 'Minimal - Few confirmations' },\r\n            { value: 'standard', label: 'Standard - Important actions only' },\r\n            { value: 'high', label: 'High - Confirm most actions' },\r\n          ]}\r\n          onChange={value =>\r\n            onChange({ confirmationLevel: value as TraumaInformedPreferences['confirmationLevel'] })\r\n          }\r\n        />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Emotional Safety Settings Tab\r\nfunction EmotionalSafetySettings({\r\n  preferences,\r\n  onChange,\r\n}: {\r\n  preferences: TraumaInformedPreferences;\r\n  onChange: (updates: Partial<TraumaInformedPreferences>) => void;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SettingGroup\r\n        title=\"Language & Communication\"\r\n        description=\"How the interface communicates with you\"\r\n        icon={<Heart className=\"w-5 h-5 text-pink-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Gentle Language\"\r\n          description=\"Use supportive, non-judgmental language in messages and feedback\"\r\n          checked={preferences.gentleLanguage}\r\n          onChange={checked => onChange({ gentleLanguage: checked })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Content Controls\"\r\n        description=\"Control what content is displayed\"\r\n        icon={<Shield className=\"w-5 h-5 text-green-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Hide Distressing Content\"\r\n          description=\"Filter out potentially triggering medical images or detailed descriptions\"\r\n          checked={preferences.hideDistressingContent}\r\n          onChange={checked => onChange({ hideDistressingContent: checked })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Comfort & Support\"\r\n        description=\"Gentle reminders and encouragement\"\r\n        icon={<Heart className=\"w-5 h-5 text-red-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Comfort Prompts\"\r\n          description=\"Show gentle reminders to take breaks and practice self-care\"\r\n          checked={preferences.showComfortPrompts}\r\n          onChange={checked => onChange({ showComfortPrompts: checked })}\r\n        />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Mobile Settings Tab\r\nfunction MobileSettings({\r\n  preferences,\r\n  onChange,\r\n  onTraumaChange,\r\n}: {\r\n  preferences: ReturnType<typeof useMobileAccessibility>['preferences'];\r\n  onChange: ReturnType<typeof useMobileAccessibility>['updatePreferences'];\r\n  onTraumaChange: (updates: Partial<TraumaInformedPreferences>) => void;\r\n}) {\r\n  const { mode, setMode, isHighContrast } = useTheme();\r\n\r\n  const resolveSystemTheme = () =>\r\n    window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SettingGroup\r\n        title=\"Voice & Speech\"\r\n        description=\"Voice input and text-to-speech features\"\r\n        icon={<Volume2 className=\"w-5 h-5 text-blue-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Voice Input\"\r\n          description=\"Enable voice commands for navigation and form input\"\r\n          checked={preferences.voiceInput}\r\n          onChange={checked => {\r\n            onChange({ voiceInput: checked });\r\n            onTraumaChange({ voiceInput: checked });\r\n          }}\r\n        />\r\n\r\n        <ToggleSetting\r\n          label=\"Text-to-Speech\"\r\n          description=\"Read interface elements aloud when requested\"\r\n          checked={preferences.textToSpeech}\r\n          onChange={checked => onChange({ textToSpeech: checked })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Haptic Feedback\"\r\n        description=\"Vibration feedback for interactions\"\r\n        icon={<Zap className=\"w-5 h-5 text-purple-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Haptic Feedback\"\r\n          description=\"Vibrate device for button presses and confirmations\"\r\n          checked={preferences.hapticFeedback}\r\n          onChange={checked => onChange({ hapticFeedback: checked })}\r\n        />\r\n      </SettingGroup>\r\n\r\n      <SettingGroup\r\n        title=\"Text & Display\"\r\n        description=\"Mobile-specific text and display preferences\"\r\n        icon={<Type className=\"w-5 h-5 text-green-500\" />}\r\n      >\r\n        <ToggleSetting\r\n          label=\"Large Text\"\r\n          description=\"Increase text size for better mobile readability\"\r\n          checked={preferences.largeText}\r\n          onChange={checked => {\r\n            onChange({ largeText: checked });\r\n            onTraumaChange({ fontSize: checked ? 'large' : 'medium' });\r\n          }}\r\n        />\r\n\r\n        <ToggleSetting\r\n          label=\"High Contrast\"\r\n          description=\"Enhanced contrast for better visibility on mobile screens\"\r\n          checked={preferences.highContrast}\r\n          onChange={checked => {\r\n            onChange({ highContrast: checked });\r\n            setMode(checked ? 'high-contrast' : isHighContrast ? resolveSystemTheme() : mode);\r\n          }}\r\n        />\r\n\r\n        <ToggleSetting\r\n          label=\"Reduced Motion\"\r\n          description=\"Minimize animations that may cause motion sickness\"\r\n          checked={preferences.reducedMotion}\r\n          onChange={checked => {\r\n            onChange({ reducedMotion: checked });\r\n            onTraumaChange({ reduceMotion: checked });\r\n          }}\r\n        />\r\n      </SettingGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Setting Group Component\r\nfunction SettingGroup({\r\n  title,\r\n  description,\r\n  icon,\r\n  children,\r\n}: {\r\n  title: string;\r\n  description: string;\r\n  icon: React.ReactNode;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <div \r\n      className=\"rounded-xl p-4 bg-gray-50 dark:bg-slate-900/50 border border-gray-100 dark:border-white/5\"\r\n    >\r\n      <div className=\"flex items-start space-x-3 mb-4\">\r\n        <div className=\"p-1.5 rounded-lg bg-gray-100 dark:bg-white/5\">\r\n          {icon}\r\n        </div>\r\n        <div>\r\n          <h3 className=\"font-medium text-gray-800 dark:text-slate-200\">{title}</h3>\r\n          <p className=\"text-sm text-gray-600 dark:text-slate-400\">{description}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"space-y-4\">{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Toggle Setting Component\r\nfunction ToggleSetting({\r\n  label,\r\n  description,\r\n  checked,\r\n  onChange,\r\n}: {\r\n  label: string;\r\n  description: string;\r\n  checked: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}) {\r\n  return (\r\n    <div className=\"flex items-start justify-between gap-4\">\r\n      <div className=\"flex-1\">\r\n        <label className=\"font-medium text-gray-800 dark:text-slate-200 text-sm\">{label}</label>\r\n        <p className=\"text-xs text-gray-600 dark:text-slate-400 mt-1\">{description}</p>\r\n      </div>\r\n      <button\r\n        onClick={() => onChange(!checked)}\r\n        className={`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900 ${\r\n          checked \r\n            ? 'bg-gradient-to-r from-sky-500 to-cyan-500 shadow-lg shadow-sky-500/30' \r\n            : 'bg-gray-300 dark:bg-slate-600'\r\n        }`}\r\n        style={{\r\n          minHeight: 'var(--ti-touch-size, 44px)',\r\n          minWidth: '48px',\r\n        }}\r\n        role=\"switch\"\r\n        aria-checked={checked}\r\n        aria-labelledby={`toggle-${label.replace(/\\s+/g, '-').toLowerCase()}`}\r\n      >\r\n        <span\r\n          className=\"pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow-md ring-0 transition duration-300 ease-in-out\"\r\n          style={{\r\n            transform: checked ? 'translateX(22px)' : 'translateX(2px)',\r\n            marginTop: '2px',\r\n          }}\r\n        />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Select Setting Component\r\nfunction SelectSetting({\r\n  label,\r\n  description,\r\n  value,\r\n  options,\r\n  onChange,\r\n}: {\r\n  label: string;\r\n  description: string;\r\n  value: string;\r\n  options: { value: string; label: string }[];\r\n  onChange: (value: string) => void;\r\n}) {\r\n  return (\r\n    <div>\r\n      <label className=\"block font-medium text-gray-800 dark:text-slate-200 text-sm mb-1\">\r\n        {label}\r\n      </label>\r\n      <p className=\"text-xs text-gray-600 dark:text-slate-400 mb-3\">{description}</p>\r\n      <select\r\n        value={value}\r\n        onChange={e => onChange(e.target.value)}\r\n        className=\"block w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900 bg-white dark:bg-slate-700 border border-gray-200 dark:border-white/10 text-gray-900 dark:text-slate-200\"\r\n        style={{\r\n          minHeight: 'var(--ti-touch-size, 44px)',\r\n          fontSize: 'var(--ti-font-size, 14px)',\r\n        }}\r\n      >\r\n        {options.map(option => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Mobile Accessibility Enhancements\r\n * Voice input, haptic feedback, and mobile-specific accessibility features\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Mic, MicOff, Volume2 } from 'lucide-react';\r\nimport { Button } from '../../design-system';\r\nimport { useTheme } from '../../design-system/ThemeProvider';\r\nimport { ScreenReaderAnnouncement } from './ScreenReaderUtils';\r\nimport type { SpeechRecognition } from '../../types/speech';\r\n\r\ninterface VoiceInputProps {\r\n  onResult: (text: string) => void;\r\n  onError?: (error: string) => void;\r\n  placeholder?: string;\r\n  disabled?: boolean;\r\n  language?: string;\r\n  continuous?: boolean;\r\n}\r\n\r\nexport function VoiceInput({\r\n  onResult,\r\n  onError,\r\n  placeholder: _placeholder = 'Tap to speak...',\r\n  disabled = false,\r\n  language = 'en-US',\r\n  continuous = false,\r\n}: VoiceInputProps) {\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSupported, setIsSupported] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n  const recognitionRef = React.useRef<SpeechRecognition | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Check if speech recognition is supported\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    setIsSupported(!!SpeechRecognition);\r\n\r\n    if (SpeechRecognition) {\r\n      const recognition = new SpeechRecognition();\r\n      recognition.continuous = continuous;\r\n      recognition.interimResults = true;\r\n      recognition.lang = language;\r\n\r\n      recognition.onresult = event => {\r\n        let finalTranscript = '';\r\n        let interimTranscript = '';\r\n\r\n        for (let i = event.resultIndex; i < event.results.length; i++) {\r\n          const result = event.results[i];\r\n          if (result.isFinal) {\r\n            finalTranscript += result[0].transcript;\r\n          } else {\r\n            interimTranscript += result[0].transcript;\r\n          }\r\n        }\r\n\r\n        setTranscript(finalTranscript || interimTranscript);\r\n\r\n        if (finalTranscript) {\r\n          onResult(finalTranscript);\r\n          setTranscript('');\r\n        }\r\n      };\r\n\r\n      recognition.onerror = event => {\r\n        setIsListening(false);\r\n        onError?.(`Speech recognition error: ${event.error}`);\r\n        // Haptic feedback for error\r\n        if ('vibrate' in navigator) {\r\n          navigator.vibrate([100, 50, 100]);\r\n        }\r\n      };\r\n\r\n      recognition.onend = () => {\r\n        setIsListening(false);\r\n        setTranscript('');\r\n      };\r\n\r\n      recognitionRef.current = recognition;\r\n    }\r\n\r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n    };\r\n  }, [continuous, language, onResult, onError]);\r\n\r\n  const startListening = useCallback(() => {\r\n    if (recognitionRef.current && !isListening) {\r\n      try {\r\n        setIsListening(true);\r\n        // Haptic feedback\r\n        if ('vibrate' in navigator) {\r\n          navigator.vibrate(50);\r\n        }\r\n        recognitionRef.current.start();\r\n      } catch {\r\n        setIsListening(false);\r\n        onError?.('Failed to start speech recognition');\r\n      }\r\n    }\r\n  }, [isListening, onError]);\r\n\r\n  const stopListening = useCallback(() => {\r\n    if (recognitionRef.current && isListening) {\r\n      recognitionRef.current.stop();\r\n    }\r\n  }, [isListening]);\r\n\r\n  if (!isSupported) {\r\n    return null; // Don't render if not supported\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <Button\r\n        onClick={isListening ? stopListening : startListening}\r\n        disabled={disabled}\r\n        variant={isListening ? 'destructive' : 'outline'}\r\n        size=\"lg\"\r\n        className=\"min-h-[48px] min-w-[48px]\"\r\n        aria-label={isListening ? 'Stop voice input' : 'Start voice input'}\r\n        aria-pressed={isListening}\r\n      >\r\n        {isListening ? <MicOff className=\"h-5 w-5\" /> : <Mic className=\"h-5 w-5\" />}\r\n        <span className=\"sr-only\">{isListening ? 'Stop listening' : 'Start voice input'}</span>\r\n      </Button>\r\n\r\n      {isListening && (\r\n        <div className=\"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-card border rounded-lg px-3 py-2 shadow-lg z-10 min-w-[200px] text-center\">\r\n          <div className=\"flex items-center justify-center space-x-2\">\r\n            <div className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></div>\r\n            <span className=\"text-sm font-medium\">Listening...</span>\r\n          </div>\r\n          {transcript && <p className=\"text-xs text-muted-foreground mt-1\">{transcript}</p>}\r\n        </div>\r\n      )}\r\n\r\n      <ScreenReaderAnnouncement\r\n        message={isListening ? 'Voice input active' : 'Voice input inactive'}\r\n        priority=\"assertive\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n// Text-to-Speech Hook\r\nexport function useTextToSpeech() {\r\n  const [isSupported, setIsSupported] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsSupported('speechSynthesis' in window);\r\n  }, []);\r\n\r\n  const speak = useCallback(\r\n    (text: string, options: Partial<SpeechSynthesisUtterance> = {}) => {\r\n      if (!isSupported || isSpeaking) return;\r\n\r\n      const utterance = new SpeechSynthesisUtterance(text);\r\n\r\n      // Apply options\r\n      if (options.lang) utterance.lang = options.lang;\r\n      if (options.rate !== undefined) utterance.rate = options.rate;\r\n      if (options.pitch !== undefined) utterance.pitch = options.pitch;\r\n      if (options.volume !== undefined) utterance.volume = options.volume;\r\n\r\n      utterance.onstart = () => setIsSpeaking(true);\r\n      utterance.onend = () => setIsSpeaking(false);\r\n      utterance.onerror = () => setIsSpeaking(false);\r\n\r\n      window.speechSynthesis.speak(utterance);\r\n    },\r\n    [isSupported, isSpeaking]\r\n  );\r\n\r\n  const stop = useCallback(() => {\r\n    window.speechSynthesis.cancel();\r\n    setIsSpeaking(false);\r\n  }, []);\r\n\r\n  return { speak, stop, isSpeaking, isSupported };\r\n}\r\n\r\n// Text-to-Speech Button Component\r\ninterface TextToSpeechButtonProps {\r\n  text: string;\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n  size?: 'sm' | 'default' | 'lg';\r\n}\r\n\r\nexport function TextToSpeechButton({\r\n  text,\r\n  children,\r\n  className,\r\n  size = 'default',\r\n}: TextToSpeechButtonProps) {\r\n  const { speak, stop, isSpeaking, isSupported } = useTextToSpeech();\r\n\r\n  if (!isSupported) return null;\r\n\r\n  const handleClick = () => {\r\n    if (isSpeaking) {\r\n      stop();\r\n    } else {\r\n      speak(text);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleClick}\r\n      variant=\"ghost\"\r\n      size={size}\r\n      className={className}\r\n      aria-label={isSpeaking ? 'Stop reading' : 'Read aloud'}\r\n      aria-pressed={isSpeaking}\r\n    >\r\n      {children || <Volume2 className={`h-4 w-4 ${isSpeaking ? 'text-primary' : ''}`} />}\r\n      <span className=\"sr-only\">{isSpeaking ? 'Stop text-to-speech' : 'Start text-to-speech'}</span>\r\n    </Button>\r\n  );\r\n}\r\n\r\n// Mobile Gesture Hints Component\r\ninterface GestureHintProps {\r\n  gesture: 'swipe' | 'pinch' | 'tap' | 'long-press';\r\n  direction?: 'left' | 'right' | 'up' | 'down';\r\n  description: string;\r\n  show?: boolean;\r\n}\r\n\r\nexport function GestureHint({ gesture, direction, description, show = true }: GestureHintProps) {\r\n  if (!show) return null;\r\n\r\n  const getGestureIcon = () => {\r\n    switch (gesture) {\r\n      case 'swipe':\r\n        return direction === 'left'\r\n          ? ''\r\n          : direction === 'right'\r\n            ? ''\r\n            : direction === 'up'\r\n              ? ''\r\n              : '';\r\n      case 'pinch':\r\n        return '';\r\n      case 'tap':\r\n        return '';\r\n      case 'long-press':\r\n        return '';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"gesture-hint fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-card border rounded-lg px-4 py-2 shadow-lg z-40 max-w-xs text-center\">\r\n      <div className=\"flex items-center justify-center space-x-2 mb-1\">\r\n        <span className=\"text-lg\">{getGestureIcon()}</span>\r\n        <span className=\"text-sm font-medium\">{description}</span>\r\n      </div>\r\n      <p className=\"text-xs text-muted-foreground\">\r\n        {gesture === 'swipe' && `Swipe ${direction} to navigate`}\r\n        {gesture === 'pinch' && 'Pinch to zoom in/out'}\r\n        {gesture === 'tap' && 'Tap to interact'}\r\n        {gesture === 'long-press' && 'Press and hold for options'}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Mobile Accessibility Preferences Hook\r\nexport function useMobileAccessibility() {\r\n  const [preferences, setPreferences] = useState({\r\n    voiceInput: false,\r\n    textToSpeech: false,\r\n    hapticFeedback: true,\r\n    largeText: false,\r\n    highContrast: false,\r\n    reducedMotion: false,\r\n  });\r\n\r\n  // Load preferences from localStorage\r\n  useEffect(() => {\r\n    try {\r\n      const saved = localStorage.getItem('mobile-accessibility-prefs');\r\n      if (saved) {\r\n        setPreferences(JSON.parse(saved));\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load mobile accessibility preferences:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Save preferences to localStorage\r\n  const updatePreferences = useCallback(\r\n    (updates: Partial<typeof preferences>) => {\r\n      const newPrefs = { ...preferences, ...updates };\r\n      setPreferences(newPrefs);\r\n      try {\r\n        localStorage.setItem('mobile-accessibility-prefs', JSON.stringify(newPrefs));\r\n      } catch (error) {\r\n        console.warn('Failed to save mobile accessibility preferences:', error);\r\n      }\r\n    },\r\n    [preferences]\r\n  );\r\n\r\n  return { preferences, updatePreferences };\r\n}\r\n\r\n// High Contrast Mode Toggle\r\nexport function HighContrastToggle() {\r\n  const { mode, setMode, isHighContrast } = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      onClick={() => setMode(isHighContrast ? (mode === 'high-contrast' ? 'dark' : mode) : 'high-contrast')}\r\n      variant=\"outline\"\r\n      size=\"sm\"\r\n      aria-label={`Toggle high contrast mode ${isHighContrast ? 'off' : 'on'}`}\r\n      aria-pressed={isHighContrast}\r\n    >\r\n      {isHighContrast ? '' : ''} Contrast\r\n    </Button>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport FocusTrap from 'focus-trap-react';\r\nimport { usePainTrackerStore } from '../stores/pain-tracker-store';\r\nimport { cn } from '../design-system/utils';\r\n\r\nconst PHQ9 = React.lazy(() => import('./assessments/PHQ9'));\r\n\r\nconst STORAGE_KEY = 'pain-tracker:alerts-settings';\r\n\r\ntype Settings = { threshold: number };\r\n\r\ntype AlertsSettingsProps = {\r\n  variant?: 'overlay' | 'inline';\r\n  className?: string;\r\n  onClose?: () => void;\r\n};\r\n\r\nexport default function AlertsSettings({\r\n  variant = 'overlay',\r\n  className,\r\n  onClose,\r\n}: AlertsSettingsProps) {\r\n  const [settings, setSettings] = useState<Settings>(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEY);\r\n      return raw ? JSON.parse(raw) : { threshold: 3 };\r\n    } catch {\r\n      return { threshold: 3 };\r\n    }\r\n  });\r\n  const [open, setOpen] = useState(false);\r\n  const [showPHQ, setShowPHQ] = useState(false);\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const prevActiveRef = useRef<HTMLElement | null>(null);\r\n  const [slideIn, setSlideIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\r\n    } catch {\r\n      // Ignore localStorage errors\r\n    }\r\n  }, [settings]);\r\n\r\n  useEffect(() => {\r\n    if (variant === 'inline') {\r\n      return;\r\n    }\r\n\r\n    const prefersReduced =\r\n      typeof window !== 'undefined' &&\r\n      window.matchMedia &&\r\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n    if (open) {\r\n      prevActiveRef.current = document.activeElement as HTMLElement | null;\r\n      if (prefersReduced) {\r\n        setSlideIn(true);\r\n        return;\r\n      }\r\n      setSlideIn(false);\r\n      const t = window.setTimeout(() => setSlideIn(true), 10);\r\n      return () => clearTimeout(t);\r\n    } else {\r\n      setSlideIn(false);\r\n      try {\r\n        prevActiveRef.current?.focus();\r\n      } catch {\r\n        // Ignore focus errors\r\n      }\r\n    }\r\n  }, [open, variant]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    onClose?.();\r\n  };\r\n\r\n  const renderBody = (showClose: boolean) => (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"text-sm\">\r\n          <label className=\"font-medium block\">Crisis detection</label>\r\n          <div className=\"text-xs text-gray-500 dark:text-slate-400\">\r\n            Enable local high-pain alerts (device-only)\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={usePainTrackerStore.getState().crisisDetectionEnabled ?? true}\r\n            onChange={(e) => usePainTrackerStore.getState().setCrisisDetectionEnabled(e.target.checked)}\r\n            aria-label=\"Enable crisis detection\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"text-xs text-gray-500 dark:text-slate-400\">\r\n        How it decides: compares your latest pain value to your baseline (average over the last 7 days).\r\n        It alerts when the latest value is at least <span className=\"font-medium\">1.2 baseline</span>{' '}\r\n        <span className=\"font-medium\">and</span> at least <span className=\"font-medium\">2 points higher</span>.\r\n        If there isn\u0019t enough history to form a baseline, it uses the 2-point rule.\r\n      </div>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Alerts settings</h3>\r\n          <p className=\"text-xs text-gray-500 dark:text-slate-400\">Tune sensitivity for pattern alerts.</p>\r\n        </div>\r\n        {showClose && (\r\n          <button \r\n            className=\"px-3 py-1.5 rounded-lg text-sm font-medium transition-all bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-white/10 text-gray-600 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-white/10\"\r\n            onClick={handleClose}\r\n          >\r\n            Close\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <label className=\"block text-sm font-medium text-gray-700 dark:text-slate-200\">Sensitivity (pain increase threshold)</label>\r\n      <input\r\n        type=\"range\"\r\n        min={1}\r\n        max={6}\r\n        value={settings.threshold}\r\n        onChange={e => setSettings({ threshold: Number(e.target.value) })}\r\n        className=\"w-full accent-amber-500\"\r\n      />\r\n      <div className=\"text-sm text-gray-600 dark:text-slate-300\">Current threshold: {settings.threshold} points</div>\r\n      <div className=\"text-sm text-gray-500 dark:text-slate-400 space-y-2\">\r\n        <div>\r\n          This slider affects <span className=\"font-medium\">sudden jumps</span>: you&apos;ll get an alert\r\n          when a new entry is at least {settings.threshold} points higher than the previous entry.\r\n        </div>\r\n        <div>\r\n          Example: if your last entry was 3/10, an entry of {Math.min(10, 3 + settings.threshold)}/10\r\n          or higher may alert.\r\n        </div>\r\n        <div>\r\n          Alerts also use a couple of <span className=\"font-medium\">additional local checks</span>\r\n          (even if the jump is smaller):\r\n          <ul className=\"list-disc pl-5 mt-1 space-y-1\">\r\n            <li>Higher than your recent rolling average</li>\r\n            <li>Unusual outliers compared to your recent pattern</li>\r\n          </ul>\r\n        </div>\r\n        <div>\r\n          These are device-only and meant to be a gentle heads-up, not a diagnosis.\r\n        </div>\r\n      </div>\r\n      <div className=\"pt-3 border-t border-gray-100 dark:border-white/5\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h4 className=\"text-sm font-medium\">Mental health screening</h4>\r\n            <div className=\"text-xs text-gray-500\">Optional PHQ-9 screening stored locally</div>\r\n          </div>\r\n          <div>\r\n            <button className=\"px-3 py-2 rounded-lg text-sm\" onClick={() => setShowPHQ(true)}>Take PHQ-9</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  if (variant === 'inline') {\r\n    return (\r\n      <div \r\n        className={cn('rounded-xl p-5 space-y-3 text-sm bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg', className)}\r\n      >\r\n        {renderBody(false)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <button\r\n          onClick={() => setOpen(true)}\r\n          className=\"rounded-lg px-3 py-2 text-sm flex items-center gap-2 transition-all\"\r\n          style={{\r\n            background: 'rgba(245, 158, 11, 0.15)',\r\n            border: '1px solid rgba(245, 158, 11, 0.3)',\r\n            color: '#fbbf24',\r\n          }}\r\n        >\r\n          <svg\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            aria-hidden\r\n          >\r\n            <path\r\n              d=\"M12 2C13.1046 2 14 2.89543 14 4V5.178C16.39 6.006 18 8.388 18 11V16L20 18V19H4V18L6 16V11C6 8.388 7.61 6.006 10 5.178V4C10 2.89543 10.8954 2 12 2Z\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"1.2\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          Alerts\r\n        </button>\r\n      </div>\r\n\r\n      {open && (\r\n        <div className=\"fixed inset-0 z-[100]\" role=\"presentation\">\r\n          <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={handleClose} />\r\n          <FocusTrap\r\n            active={true}\r\n            focusTrapOptions={{\r\n              clickOutsideDeactivates: true,\r\n              escapeDeactivates: true,\r\n              onDeactivate: handleClose,\r\n            }}\r\n          >\r\n            <div\r\n              ref={containerRef}\r\n              role=\"dialog\"\r\n              aria-modal=\"true\"\r\n              tabIndex={-1}\r\n              className={`absolute right-0 top-0 h-full w-full md:w-96 shadow-2xl p-5 overflow-auto transform transition-all duration-200 ${slideIn ? 'translate-x-0 opacity-100 scale-100' : 'translate-x-full opacity-0 scale-95'}`}\r\n              style={{\r\n                background: 'linear-gradient(180deg, #0f172a 0%, #020617 100%)',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                ...(window.matchMedia('(prefers-reduced-motion: reduce)').matches\r\n                  ? { transitionTimingFunction: 'linear' }\r\n                  : {}),\r\n              }}\r\n            >\r\n              {renderBody(true)}\r\n              {showPHQ && (\r\n                <div className=\"fixed inset-0 z-[200]\">\r\n                  <div className=\"absolute inset-0 bg-black/60\" onClick={() => setShowPHQ(false)} />\r\n                  <div className=\"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl p-4\">\r\n                    <div className=\"bg-background rounded-xl shadow-2xl p-4\">\r\n                      {/** Lazy import PHQ9 to keep bundle small */}\r\n                      <React.Suspense fallback={<div>Loading</div>}>\r\n                        <PHQ9 onClose={() => setShowPHQ(false)} />\r\n                      </React.Suspense>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </FocusTrap>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import {\n  Card as DSCard,\n  CardContent as DSCardContent,\n  CardHeader as DSCardHeader,\n  CardTitle as DSCardTitle,\n} from '../../design-system/components/Card';\n\nexport const Card = DSCard;\nexport const CardContent = DSCardContent;\nexport const CardHeader = DSCardHeader;\nexport const CardTitle = DSCardTitle;\n\nexport default Card;\n","import { Button as DSButton } from '../../design-system/components/Button';\n\nexport const Button = DSButton;\nexport default Button;\n","import { Badge as DSBadge } from '../../design-system/components/Badge';\n\nexport const Badge = DSBadge;\nexport default Badge;\n","import { Input as DSInput } from '../../design-system/components/Input';\n\nexport const Input = DSInput;\nexport default Input;\n","import React from 'react';\n\nexport interface SelectRootProps {\n  value?: string;\n  onValueChange?: (value: string) => void;\n  children: React.ReactNode;\n}\n\nexport const Select: React.FC<SelectRootProps> = ({ children }) => {\n  return <div data-select-root>{children}</div>;\n};\n\nexport interface SelectTriggerProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nexport const SelectTrigger: React.FC<SelectTriggerProps> = ({\n  value,\n  onValueChange,\n  children,\n  className = '',\n  ...props\n}) => {\n  return (\n    <select\n      className={`mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ${className}`}\n      value={value}\n      onChange={e => onValueChange?.(e.target.value)}\n      {...props}\n    >\n      {children}\n    </select>\n  );\n};\n\nexport const SelectContent: React.FC<{ children: React.ReactNode }> = ({ children }) => (\n  <>{children}</>\n);\n\nexport interface SelectItemProps extends React.OptionHTMLAttributes<HTMLOptionElement> {\n  value: string;\n}\n\nexport const SelectItem: React.FC<SelectItemProps> = ({ value, children, ...props }) => (\n  <option value={value} {...props}>\n    {children}\n  </option>\n);\n\nexport const SelectValue: React.FC<{ placeholder?: string; value?: string }> = ({\n  placeholder,\n  value,\n}) => <span data-select-value>{value ?? placeholder ?? ''}</span>;\n\nexport default Select;\n","import type {\n  Notification,\n  NotificationPreferences,\n  NotificationSchedule,\n  NotificationStatus,\n  NotificationType,\n} from '../../types/notifications';\n// Lightweight fallback encryption shim; replace with real implementation if available\nconst encryptData = (data: string) => data;\nconst decryptData = (data: string) => data;\n\nconst STORAGE_KEYS = {\n  NOTIFICATIONS: 'pain_tracker_notifications',\n  PREFERENCES: 'pain_tracker_notification_preferences',\n  SCHEDULES: 'pain_tracker_notification_schedules',\n  LAST_BACKUP: 'pain_tracker_notifications_last_backup',\n} as const;\n\n// Storage utilities for notifications\nexport class NotificationStorage {\n  private static instance: NotificationStorage;\n\n  private constructor() {}\n\n  static getInstance(): NotificationStorage {\n    if (!NotificationStorage.instance) {\n      NotificationStorage.instance = new NotificationStorage();\n    }\n    return NotificationStorage.instance;\n  }\n\n  // Notification CRUD operations\n  async saveNotification(notification: Notification): Promise<void> {\n    try {\n      const notifications = await this.getAllNotifications();\n      const existingIndex = notifications.findIndex(n => n.id === notification.id);\n\n      if (existingIndex >= 0) {\n        notifications[existingIndex] = { ...notification, updatedAt: new Date().toISOString() };\n      } else {\n        notifications.push(notification);\n      }\n\n      await this.saveNotificationsToStorage(notifications);\n    } catch (error) {\n      console.error('Failed to save notification:', error);\n      throw new Error('Failed to save notification');\n    }\n  }\n\n  async getNotification(id: string): Promise<Notification | null> {\n    try {\n      const notifications = await this.getAllNotifications();\n      return notifications.find(n => n.id === id) || null;\n    } catch (error) {\n      console.error('Failed to get notification:', error);\n      return null;\n    }\n  }\n\n  async getAllNotifications(): Promise<Notification[]> {\n    try {\n      const encrypted = localStorage.getItem(STORAGE_KEYS.NOTIFICATIONS);\n      if (!encrypted) return [];\n\n      const decrypted = await decryptData(encrypted);\n      const notifications = JSON.parse(decrypted) as Notification[];\n\n      // Validate and filter out corrupted notifications\n      return notifications.filter(this.isValidNotification);\n    } catch (error) {\n      console.error('Failed to load notifications:', error);\n      return [];\n    }\n  }\n\n  async getNotificationsByStatus(status: NotificationStatus): Promise<Notification[]> {\n    const notifications = await this.getAllNotifications();\n    return notifications.filter(n => n.status === status);\n  }\n\n  async getNotificationsByType(type: NotificationType): Promise<Notification[]> {\n    const notifications = await this.getAllNotifications();\n    return notifications.filter(n => n.type === type);\n  }\n\n  async updateNotificationStatus(id: string, status: NotificationStatus): Promise<void> {\n    try {\n      const notification = await this.getNotification(id);\n      if (!notification) return;\n\n      const updatedNotification: Notification = {\n        ...notification,\n        status,\n        updatedAt: new Date().toISOString(),\n        ...(status === 'read' && { readAt: new Date().toISOString() }),\n        ...(status === 'dismissed' && { dismissedAt: new Date().toISOString() }),\n      };\n\n      await this.saveNotification(updatedNotification);\n    } catch (error) {\n      console.error('Failed to update notification status:', error);\n      throw new Error('Failed to update notification status');\n    }\n  }\n\n  async deleteNotification(id: string): Promise<void> {\n    try {\n      const notifications = await this.getAllNotifications();\n      const filtered = notifications.filter(n => n.id !== id);\n      await this.saveNotificationsToStorage(filtered);\n    } catch (error) {\n      console.error('Failed to delete notification:', error);\n      throw new Error('Failed to delete notification');\n    }\n  }\n\n  async bulkUpdateStatus(ids: string[], status: NotificationStatus): Promise<void> {\n    try {\n      const notifications = await this.getAllNotifications();\n      const updated = notifications.map(n =>\n        ids.includes(n.id)\n          ? {\n              ...n,\n              status,\n              updatedAt: new Date().toISOString(),\n              ...(status === 'read' && { readAt: new Date().toISOString() }),\n              ...(status === 'dismissed' && { dismissedAt: new Date().toISOString() }),\n            }\n          : n\n      );\n      await this.saveNotificationsToStorage(updated);\n    } catch (error) {\n      console.error('Failed to bulk update notifications:', error);\n      throw new Error('Failed to bulk update notifications');\n    }\n  }\n\n  async archiveOldNotifications(daysOld: number = 30): Promise<void> {\n    try {\n      const notifications = await this.getAllNotifications();\n      const cutoffDate = new Date();\n      cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n\n      const updated = notifications.map(n =>\n        new Date(n.createdAt) < cutoffDate && n.status === 'read'\n          ? { ...n, status: 'archived' as NotificationStatus, updatedAt: new Date().toISOString() }\n          : n\n      );\n\n      await this.saveNotificationsToStorage(updated);\n    } catch (error) {\n      console.error('Failed to archive old notifications:', error);\n    }\n  }\n\n  // Preferences management\n  async savePreferences(preferences: NotificationPreferences): Promise<void> {\n    try {\n      const encrypted = await encryptData(JSON.stringify(preferences));\n      localStorage.setItem(STORAGE_KEYS.PREFERENCES, encrypted);\n    } catch (error) {\n      console.error('Failed to save notification preferences:', error);\n      throw new Error('Failed to save notification preferences');\n    }\n  }\n\n  async getPreferences(): Promise<NotificationPreferences> {\n    try {\n      const encrypted = localStorage.getItem(STORAGE_KEYS.PREFERENCES);\n      if (!encrypted) return this.getDefaultPreferences();\n\n      const decrypted = await decryptData(encrypted);\n      const preferences = JSON.parse(decrypted) as NotificationPreferences;\n\n      // Validate preferences structure\n      return this.validatePreferences(preferences);\n    } catch (error) {\n      console.error('Failed to load notification preferences:', error);\n      return this.getDefaultPreferences();\n    }\n  }\n\n  // Schedule management\n  async saveSchedule(schedule: NotificationSchedule): Promise<void> {\n    try {\n      const schedules = await this.getAllSchedules();\n      const existingIndex = schedules.findIndex(s => s.id === schedule.id);\n\n      if (existingIndex >= 0) {\n        schedules[existingIndex] = { ...schedule, updatedAt: new Date().toISOString() };\n      } else {\n        schedules.push(schedule);\n      }\n\n      await this.saveSchedulesToStorage(schedules);\n    } catch (error) {\n      console.error('Failed to save notification schedule:', error);\n      throw new Error('Failed to save notification schedule');\n    }\n  }\n\n  async getAllSchedules(): Promise<NotificationSchedule[]> {\n    try {\n      const encrypted = localStorage.getItem(STORAGE_KEYS.SCHEDULES);\n      if (!encrypted) return [];\n\n      const decrypted = await decryptData(encrypted);\n      const schedules = JSON.parse(decrypted) as NotificationSchedule[];\n\n      return schedules.filter(this.isValidSchedule);\n    } catch (error) {\n      console.error('Failed to load notification schedules:', error);\n      return [];\n    }\n  }\n\n  async deleteSchedule(id: string): Promise<void> {\n    try {\n      const schedules = await this.getAllSchedules();\n      const filtered = schedules.filter(s => s.id !== id);\n      await this.saveSchedulesToStorage(filtered);\n    } catch (error) {\n      console.error('Failed to delete notification schedule:', error);\n      throw new Error('Failed to delete notification schedule');\n    }\n  }\n\n  // Utility methods\n  private async saveNotificationsToStorage(notifications: Notification[]): Promise<void> {\n    const encrypted = await encryptData(JSON.stringify(notifications));\n    localStorage.setItem(STORAGE_KEYS.NOTIFICATIONS, encrypted);\n  }\n\n  private async saveSchedulesToStorage(schedules: NotificationSchedule[]): Promise<void> {\n    const encrypted = await encryptData(JSON.stringify(schedules));\n    localStorage.setItem(STORAGE_KEYS.SCHEDULES, encrypted);\n  }\n\n  private isValidNotification(notification: unknown): notification is Notification {\n    const n = notification as Record<string, unknown>;\n    return (\n      n &&\n      typeof n === 'object' &&\n      typeof n.id === 'string' &&\n      typeof n.title === 'string' &&\n      typeof n.message === 'string' &&\n      ['low', 'medium', 'high', 'urgent'].includes(n.priority as string) &&\n      ['pending', 'sent', 'read', 'dismissed', 'archived'].includes(n.status as string) &&\n      Array.isArray(n.deliveryMethods) &&\n      typeof n.createdAt === 'string'\n    );\n  }\n\n  private isValidSchedule(schedule: unknown): schedule is NotificationSchedule {\n    const s = schedule as Record<string, unknown> | null | undefined;\n    if (!s || typeof s !== 'object') return false;\n    const hasId = typeof s.id === 'string';\n    const hasName = typeof s.name === 'string';\n    const hasType = typeof s.type === 'string';\n    const hasTrigger = !!s.trigger;\n    const hasTemplate = !!s.template;\n    const hasIsActive = typeof s.isActive === 'boolean';\n    const hasCreatedAt = typeof s.createdAt === 'string';\n\n    return Boolean(\n      hasId && hasName && hasType && hasTrigger && hasTemplate && hasIsActive && hasCreatedAt\n    );\n  }\n\n  private getDefaultPreferences(): NotificationPreferences {\n    return {\n      enabled: true,\n      deliveryMethods: {\n        browser: true,\n        in_app: true,\n        email: false,\n        sms: false,\n      },\n      categories: {\n        pain_reminders: true,\n        medication_alerts: true,\n        appointment_reminders: true,\n        goal_achievements: true,\n        progress_checkins: true,\n        system_updates: false,\n        custom: true,\n      },\n      quietHours: {\n        enabled: false,\n        start: '22:00',\n        end: '08:00',\n      },\n      frequencyLimits: {\n        maxPerDay: 10,\n        maxPerHour: 3,\n      },\n    };\n  }\n\n  private validatePreferences(preferences: unknown): NotificationPreferences {\n    const prefs = preferences as Record<string, unknown>;\n    const defaults = this.getDefaultPreferences();\n\n    if (!prefs || typeof prefs !== 'object') {\n      return defaults;\n    }\n\n    return {\n      enabled: typeof prefs.enabled === 'boolean' ? prefs.enabled : defaults.enabled,\n      deliveryMethods: {\n        browser:\n          typeof (prefs.deliveryMethods as Record<string, unknown>)?.browser === 'boolean'\n            ? ((prefs.deliveryMethods as Record<string, unknown>).browser as boolean)\n            : defaults.deliveryMethods.browser,\n        in_app:\n          typeof (prefs.deliveryMethods as Record<string, unknown>)?.in_app === 'boolean'\n            ? ((prefs.deliveryMethods as Record<string, unknown>).in_app as boolean)\n            : defaults.deliveryMethods.in_app,\n        email:\n          typeof (prefs.deliveryMethods as Record<string, unknown>)?.email === 'boolean'\n            ? ((prefs.deliveryMethods as Record<string, unknown>).email as boolean)\n            : defaults.deliveryMethods.email,\n        sms:\n          typeof (prefs.deliveryMethods as Record<string, unknown>)?.sms === 'boolean'\n            ? ((prefs.deliveryMethods as Record<string, unknown>).sms as boolean)\n            : defaults.deliveryMethods.sms,\n      },\n      categories: {\n        pain_reminders:\n          typeof (prefs.categories as Record<string, unknown>)?.pain_reminders === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).pain_reminders as boolean)\n            : defaults.categories.pain_reminders,\n        medication_alerts:\n          typeof (prefs.categories as Record<string, unknown>)?.medication_alerts === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).medication_alerts as boolean)\n            : defaults.categories.medication_alerts,\n        appointment_reminders:\n          typeof (prefs.categories as Record<string, unknown>)?.appointment_reminders === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).appointment_reminders as boolean)\n            : defaults.categories.appointment_reminders,\n        goal_achievements:\n          typeof (prefs.categories as Record<string, unknown>)?.goal_achievements === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).goal_achievements as boolean)\n            : defaults.categories.goal_achievements,\n        progress_checkins:\n          typeof (prefs.categories as Record<string, unknown>)?.progress_checkins === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).progress_checkins as boolean)\n            : defaults.categories.progress_checkins,\n        system_updates:\n          typeof (prefs.categories as Record<string, unknown>)?.system_updates === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).system_updates as boolean)\n            : defaults.categories.system_updates,\n        custom:\n          typeof (prefs.categories as Record<string, unknown>)?.custom === 'boolean'\n            ? ((prefs.categories as Record<string, unknown>).custom as boolean)\n            : defaults.categories.custom,\n      },\n      quietHours: {\n        enabled:\n          typeof (prefs.quietHours as Record<string, unknown>)?.enabled === 'boolean'\n            ? ((prefs.quietHours as Record<string, unknown>).enabled as boolean)\n            : defaults.quietHours.enabled,\n        start:\n          typeof (prefs.quietHours as Record<string, unknown>)?.start === 'string'\n            ? ((prefs.quietHours as Record<string, unknown>).start as string)\n            : defaults.quietHours.start,\n        end:\n          typeof (prefs.quietHours as Record<string, unknown>)?.end === 'string'\n            ? ((prefs.quietHours as Record<string, unknown>).end as string)\n            : defaults.quietHours.end,\n      },\n      frequencyLimits: {\n        maxPerDay:\n          typeof (prefs.frequencyLimits as Record<string, unknown>)?.maxPerDay === 'number'\n            ? ((prefs.frequencyLimits as Record<string, unknown>).maxPerDay as number)\n            : defaults.frequencyLimits.maxPerDay,\n        maxPerHour:\n          typeof (prefs.frequencyLimits as Record<string, unknown>)?.maxPerHour === 'number'\n            ? ((prefs.frequencyLimits as Record<string, unknown>).maxPerHour as number)\n            : defaults.frequencyLimits.maxPerHour,\n      },\n    };\n  }\n\n  // Cleanup and maintenance\n  async cleanup(): Promise<void> {\n    try {\n      // Archive old notifications\n      await this.archiveOldNotifications(30);\n\n      // Remove expired notifications\n      const notifications = await this.getAllNotifications();\n      const now = new Date();\n      const activeNotifications = notifications.filter(\n        n => !n.expiresAt || new Date(n.expiresAt) > now\n      );\n\n      if (activeNotifications.length !== notifications.length) {\n        await this.saveNotificationsToStorage(activeNotifications);\n      }\n    } catch (error) {\n      console.error('Failed to cleanup notifications:', error);\n    }\n  }\n\n  async clearAll(): Promise<void> {\n    try {\n      localStorage.removeItem(STORAGE_KEYS.NOTIFICATIONS);\n      localStorage.removeItem(STORAGE_KEYS.PREFERENCES);\n      localStorage.removeItem(STORAGE_KEYS.SCHEDULES);\n      localStorage.removeItem(STORAGE_KEYS.LAST_BACKUP);\n    } catch (error) {\n      console.error('Failed to clear notification data:', error);\n      throw new Error('Failed to clear notification data');\n    }\n  }\n}\n\n// Export singleton instance\nexport const notificationStorage = NotificationStorage.getInstance();\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Input } from '../ui/input';\nimport { Select, SelectTrigger } from '../ui/select';\nimport {\n  Bell,\n  BellOff,\n  Check,\n  CheckCheck,\n  Trash2,\n  Archive,\n  Search,\n  Clock,\n  AlertTriangle,\n  Info,\n  CheckCircle,\n  X,\n} from 'lucide-react';\nimport type { Notification, NotificationStatus, NotificationType } from '../../types/notifications';\nimport { notificationStorage } from '../../utils/notifications/storage';\n\ninterface NotificationItemProps {\n  notification: Notification;\n  onMarkAsRead: (id: string) => void;\n  onMarkAsUnread: (id: string) => void;\n  onDismiss: (id: string) => void;\n  onArchive: (id: string) => void;\n  onDelete: (id: string) => void;\n}\n\nconst NotificationItem: React.FC<NotificationItemProps> = ({\n  notification,\n  onMarkAsRead,\n  onMarkAsUnread,\n  onDismiss,\n  onArchive,\n  onDelete,\n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const getPriorityIcon = (priority: string) => {\n    switch (priority) {\n      case 'urgent':\n        return <AlertTriangle className=\"h-4 w-4 text-red-500\" />;\n      case 'high':\n        return <AlertTriangle className=\"h-4 w-4 text-orange-500\" />;\n      case 'medium':\n        return <Info className=\"h-4 w-4 text-blue-500\" />;\n      case 'low':\n        return <Info className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />;\n      default:\n        return <Info className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />;\n    }\n  };\n\n  const getStatusIcon = (status: NotificationStatus) => {\n    switch (status) {\n      case 'read':\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case 'sent':\n        return <Bell className=\"h-4 w-4 text-blue-500\" />;\n      case 'dismissed':\n        return <X className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />;\n      case 'archived':\n        return <Archive className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />;\n      default:\n        return <Bell className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />;\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));\n\n    if (diffInHours < 1) return 'Just now';\n    if (diffInHours < 24) return `${diffInHours}h ago`;\n    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <div\n      className={`border rounded-lg p-4 transition-all duration-200 ${\n        notification.status === 'read' ? 'bg-gray-50' : 'bg-white shadow-sm'\n      }`}\n    >\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex items-start space-x-3 flex-1\">\n          <div className=\"flex-shrink-0 mt-1\">{getPriorityIcon(notification.priority)}</div>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center space-x-2 mb-1\">\n              <h4\n                className={`text-sm font-medium truncate ${\n                  notification.status === 'read' ? 'text-gray-600' : 'text-gray-900'\n                }`}\n              >\n                {notification.title}\n              </h4>\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {notification.type.replace('_', ' ')}\n              </Badge>\n              {getStatusIcon(notification.status)}\n            </div>\n            <p\n              className={`text-sm ${\n                notification.status === 'read' ? 'text-gray-500' : 'text-gray-700'\n              }`}\n            >\n              {isExpanded ? notification.message : notification.message.substring(0, 100)}\n              {notification.message.length > 100 && (\n                <button\n                  onClick={() => setIsExpanded(!isExpanded)}\n                  className=\"text-blue-500 hover:text-blue-700 ml-1 text-xs\"\n                >\n                  {isExpanded ? 'Show less' : 'Show more'}\n                </button>\n              )}\n            </p>\n            <div className=\"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-400\">\n              <span className=\"flex items-center space-x-1\">\n                <Clock className=\"h-3 w-3\" />\n                <span>{formatTime(notification.createdAt)}</span>\n              </span>\n              {notification.actionLabel && (\n                <button className=\"text-blue-500 hover:text-blue-700\">\n                  {notification.actionLabel}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"flex items-center space-x-1 ml-4\">\n          {notification.status === 'sent' && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => onMarkAsRead(notification.id)}\n              className=\"h-8 w-8 p-0\"\n            >\n              <Check className=\"h-4 w-4\" />\n            </Button>\n          )}\n          {notification.status === 'read' && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => onMarkAsUnread(notification.id)}\n              className=\"h-8 w-8 p-0\"\n            >\n              <Bell className=\"h-4 w-4\" />\n            </Button>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => onDismiss(notification.id)}\n            className=\"h-8 w-8 p-0\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => onArchive(notification.id)}\n            className=\"h-8 w-8 p-0\"\n          >\n            <Archive className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => onDelete(notification.id)}\n            className=\"h-8 w-8 p-0 text-red-500 hover:text-red-700\"\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface NotificationFilters {\n  status: NotificationStatus | 'all';\n  type: NotificationType | 'all';\n  search: string;\n}\n\ninterface NotificationManagementProps {\n  className?: string;\n}\n\nexport const NotificationManagement: React.FC<NotificationManagementProps> = ({ className }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedNotifications, setSelectedNotifications] = useState<Set<string>>(new Set());\n  const [showBulkActions, setShowBulkActions] = useState(false);\n  const [filters, setFilters] = useState<NotificationFilters>({\n    status: 'all',\n    type: 'all',\n    search: '',\n  });\n\n  // Load notifications on mount\n  useEffect(() => {\n    loadNotifications();\n  }, []);\n\n  const loadNotifications = async () => {\n    try {\n      setLoading(true);\n      const allNotifications = await notificationStorage.getAllNotifications();\n      setNotifications(\n        allNotifications.sort(\n          (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        )\n      );\n    } catch (error) {\n      console.error('Failed to load notifications:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter notifications\n  const filteredNotifications = useMemo(() => {\n    return notifications.filter(notification => {\n      if (filters.status !== 'all' && notification.status !== filters.status) return false;\n      if (filters.type !== 'all' && notification.type !== filters.type) return false;\n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        return (\n          notification.title.toLowerCase().includes(searchLower) ||\n          notification.message.toLowerCase().includes(searchLower)\n        );\n      }\n      return true;\n    });\n  }, [notifications, filters]);\n\n  const hasAnyNotifications = notifications.length > 0;\n\n  // Bulk actions\n  const handleBulkMarkAsRead = async () => {\n    try {\n      await notificationStorage.bulkUpdateStatus(Array.from(selectedNotifications), 'read');\n      await loadNotifications();\n      setSelectedNotifications(new Set());\n      setShowBulkActions(false);\n    } catch (error) {\n      console.error('Failed to mark notifications as read:', error);\n    }\n  };\n\n  const handleBulkArchive = async () => {\n    try {\n      await notificationStorage.bulkUpdateStatus(Array.from(selectedNotifications), 'archived');\n      await loadNotifications();\n      setSelectedNotifications(new Set());\n      setShowBulkActions(false);\n    } catch (error) {\n      console.error('Failed to archive notifications:', error);\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    try {\n      for (const id of selectedNotifications) {\n        await notificationStorage.deleteNotification(id);\n      }\n      await loadNotifications();\n      setSelectedNotifications(new Set());\n      setShowBulkActions(false);\n    } catch (error) {\n      console.error('Failed to delete notifications:', error);\n    }\n  };\n\n  // Individual actions\n  const handleMarkAsRead = async (id: string) => {\n    try {\n      await notificationStorage.updateNotificationStatus(id, 'read');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Failed to mark notification as read:', error);\n    }\n  };\n\n  const handleMarkAsUnread = async (id: string) => {\n    try {\n      await notificationStorage.updateNotificationStatus(id, 'sent');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Failed to mark notification as unread:', error);\n    }\n  };\n\n  const handleDismiss = async (id: string) => {\n    try {\n      await notificationStorage.updateNotificationStatus(id, 'dismissed');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Failed to dismiss notification:', error);\n    }\n  };\n\n  const handleArchive = async (id: string) => {\n    try {\n      await notificationStorage.updateNotificationStatus(id, 'archived');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Failed to archive notification:', error);\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    try {\n      await notificationStorage.deleteNotification(id);\n      await loadNotifications();\n    } catch (error) {\n      console.error('Failed to delete notification:', error);\n    }\n  };\n\n  const handleSelectNotification = (id: string, selected: boolean) => {\n    const newSelected = new Set(selectedNotifications);\n    if (selected) {\n      newSelected.add(id);\n    } else {\n      newSelected.delete(id);\n    }\n    setSelectedNotifications(newSelected);\n    setShowBulkActions(newSelected.size > 0);\n  };\n\n  const handleSelectAll = (selected: boolean) => {\n    if (selected) {\n      setSelectedNotifications(new Set(filteredNotifications.map(n => n.id)));\n    } else {\n      setSelectedNotifications(new Set());\n    }\n    setShowBulkActions(selected);\n  };\n\n  if (loading) {\n    return (\n      <Card className={className}>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n            <span className=\"ml-2\">Loading notifications...</span>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <Bell className=\"h-5 w-5\" />\n          <span>Notifications</span>\n          <Badge variant=\"secondary\">{filteredNotifications.length}</Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Empty state (fresh account) */}\n        {!hasAnyNotifications ? (\n          <div className=\"text-center py-8 text-gray-600 dark:text-gray-400\">\n            <BellOff className=\"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600\" />\n            <p className=\"font-medium text-gray-800 dark:text-gray-200\">No notifications yet</p>\n            <p className=\"text-sm mt-1\">\n              When this app creates reminders, achievements, or system updates, theyll appear here.\n            </p>\n            <p className=\"text-xs mt-3\">Tip: enable notifications above to allow browser alerts.</p>\n          </div>\n        ) : (\n          <>\n            {/* Filters */}\n            <div className=\"flex flex-wrap gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n              <div className=\"flex-1 min-w-48\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                  <Input\n                    placeholder=\"Search notifications...\"\n                    value={filters.search}\n                    onChange={e => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                    className=\"pl-10\"\n                  />\n                </div>\n              </div>\n              <Select>\n                <SelectTrigger\n                  value={filters.status}\n                  onValueChange={value =>\n                    setFilters(prev => ({ ...prev, status: value as NotificationStatus | 'all' }))\n                  }\n                >\n                  <option value=\"all\">All Status</option>\n                  <option value=\"sent\">Unread</option>\n                  <option value=\"read\">Read</option>\n                  <option value=\"dismissed\">Dismissed</option>\n                  <option value=\"archived\">Archived</option>\n                </SelectTrigger>\n              </Select>\n              <Select>\n                <SelectTrigger\n                  value={filters.type}\n                  onValueChange={value =>\n                    setFilters(prev => ({ ...prev, type: value as NotificationType | 'all' }))\n                  }\n                >\n                  <option value=\"all\">All Types</option>\n                  <option value=\"pain_reminder\">Pain Reminders</option>\n                  <option value=\"medication_alert\">Medication Alerts</option>\n                  <option value=\"appointment_reminder\">Appointment Reminders</option>\n                  <option value=\"goal_achievement\">Goal Achievements</option>\n                  <option value=\"progress_checkin\">Progress Check-ins</option>\n                  <option value=\"system_update\">System Updates</option>\n                  <option value=\"custom\">Custom</option>\n                </SelectTrigger>\n              </Select>\n            </div>\n\n            {/* Bulk Actions */}\n            {showBulkActions && (\n          <div className=\"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n            <span className=\"text-sm text-blue-700\">\n              {selectedNotifications.size} notification{selectedNotifications.size !== 1 ? 's' : ''}{' '}\n              selected\n            </span>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleBulkMarkAsRead}>\n              <CheckCheck className=\"h-4 w-4 mr-1\" />\n              Mark as Read\n            </Button>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleBulkArchive}>\n              <Archive className=\"h-4 w-4 mr-1\" />\n              Archive\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleBulkDelete}\n              className=\"text-red-600 hover:text-red-700\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-1\" />\n              Delete\n            </Button>\n          </div>\n            )}\n\n            {/* Select All */}\n            {filteredNotifications.length > 0 && (\n          <div className=\"flex items-center space-x-2\">\n            <input\n              type=\"checkbox\"\n              checked={\n                selectedNotifications.size === filteredNotifications.length &&\n                filteredNotifications.length > 0\n              }\n              onChange={e => handleSelectAll(e.target.checked)}\n            />\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">Select all</span>\n          </div>\n            )}\n\n            {/* Notifications List */}\n            <div className=\"space-y-3\">\n              {filteredNotifications.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                  <BellOff className=\"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600\" />\n                  <p>No notifications found</p>\n                  <p className=\"text-sm\">Try adjusting your filters or check back later</p>\n                </div>\n              ) : (\n                filteredNotifications.map(notification => (\n                  <div key={notification.id} className=\"flex items-start space-x-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedNotifications.has(notification.id)}\n                      onChange={e => handleSelectNotification(notification.id, e.target.checked)}\n                      className=\"mt-4\"\n                    />\n                    <div className=\"flex-1\">\n                      <NotificationItem\n                        notification={notification}\n                        onMarkAsRead={handleMarkAsRead}\n                        onMarkAsUnread={handleMarkAsUnread}\n                        onDismiss={handleDismiss}\n                        onArchive={handleArchive}\n                        onDelete={handleDelete}\n                      />\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","export type NotificationType =\n  | 'pain_reminder'\n  | 'medication_alert'\n  | 'appointment_reminder'\n  | 'goal_achievement'\n  | 'progress_checkin'\n  | 'data_backup'\n  | 'system_update'\n  | 'custom';\n\nexport type NotificationPriority = 'low' | 'medium' | 'high' | 'urgent';\n\nexport type NotificationStatus = 'pending' | 'sent' | 'read' | 'dismissed' | 'archived';\n\nexport type DeliveryMethod = 'browser' | 'in_app' | 'email' | 'sms';\n\nexport interface NotificationTrigger {\n  type: 'time_based' | 'event_based' | 'pattern_based';\n  schedule?: {\n    frequency: 'once' | 'daily' | 'weekly' | 'monthly';\n    time?: string; // HH:MM format\n    daysOfWeek?: number[]; // 0-6, Sunday = 0\n    dayOfMonth?: number;\n  };\n  conditions?: {\n    painThreshold?: number;\n    medicationDue?: boolean;\n    appointmentWithinHours?: number;\n    goalProgress?: number;\n  };\n}\n\nexport interface NotificationTemplate {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message: string;\n  actionUrl?: string;\n  actionLabel?: string;\n  priority: NotificationPriority;\n  category: string;\n  isSystemGenerated: boolean;\n}\n\nexport interface Notification {\n  id: string;\n  userId: string;\n  type: NotificationType;\n  title: string;\n  message: string;\n  priority: NotificationPriority;\n  status: NotificationStatus;\n  deliveryMethods: DeliveryMethod[];\n  trigger?: NotificationTrigger;\n  scheduledFor?: string; // ISO date string\n  sentAt?: string; // ISO date string\n  readAt?: string; // ISO date string\n  dismissedAt?: string; // ISO date string\n  expiresAt?: string; // ISO date string\n  actionUrl?: string;\n  actionLabel?: string;\n  metadata?: Record<string, unknown>;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface NotificationPreferences {\n  enabled: boolean;\n  deliveryMethods: {\n    browser: boolean;\n    in_app: boolean;\n    email: boolean;\n    sms: boolean;\n  };\n  categories: {\n    pain_reminders: boolean;\n    medication_alerts: boolean;\n    appointment_reminders: boolean;\n    goal_achievements: boolean;\n    progress_checkins: boolean;\n    system_updates: boolean;\n    custom: boolean;\n  };\n  quietHours: {\n    enabled: boolean;\n    start: string; // HH:MM\n    end: string; // HH:MM\n  };\n  frequencyLimits: {\n    maxPerDay: number;\n    maxPerHour: number;\n  };\n}\n\nexport interface NotificationSchedule {\n  id: string;\n  name: string;\n  description: string;\n  type: NotificationType;\n  trigger: NotificationTrigger;\n  template: NotificationTemplate;\n  isActive: boolean;\n  lastTriggered?: string;\n  nextTrigger?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\n// Default notification templates\nexport const DEFAULT_NOTIFICATION_TEMPLATES: NotificationTemplate[] = [\n  {\n    id: 'pain_reminder',\n    type: 'pain_reminder',\n    title: 'Daily Check-in',\n    message:\n      \"How are you holding up today? Take a quick moment to log your pain and how you're coping  it helps the app give kinder, more useful insights.\",\n    actionLabel: 'Check In',\n    actionUrl: '/track',\n    priority: 'medium',\n    category: 'health',\n    isSystemGenerated: true,\n  },\n  {\n    id: 'medication_reminder',\n    type: 'medication_alert',\n    title: 'Medication Time',\n    message:\n      \"It's time to take your {{medication_name}}. Remember to track how it's working for you.\",\n    actionLabel: 'Log Medication',\n    actionUrl: '/medications',\n    priority: 'high',\n    category: 'medication',\n    isSystemGenerated: true,\n  },\n  {\n    id: 'appointment_reminder',\n    type: 'appointment_reminder',\n    title: 'Upcoming Appointment',\n    message:\n      \"You have an appointment with {{provider_name}} in {{hours_until}} hours. Don't forget to prepare any questions.\",\n    actionLabel: 'View Details',\n    actionUrl: '/appointments',\n    priority: 'high',\n    category: 'appointments',\n    isSystemGenerated: true,\n  },\n  {\n    id: 'goal_achievement',\n    type: 'goal_achievement',\n    title: 'Goal Achievement! ',\n    message:\n      \"Congratulations! You've reached your goal of {{goal_description}}. You're doing amazing work.\",\n    actionLabel: 'View Progress',\n    actionUrl: '/goals',\n    priority: 'medium',\n    category: 'goals',\n    isSystemGenerated: true,\n  },\n  {\n    id: 'weekly_progress',\n    type: 'progress_checkin',\n    title: 'Weekly Check-in',\n    message:\n      \"It's been a week  a quick moment to reflect on your pain and wellbeing can surface useful patterns. How has this week been for you?\",\n    actionLabel: 'Review Week',\n    actionUrl: '/analytics',\n    priority: 'low',\n    category: 'progress',\n    isSystemGenerated: true,\n  },\n  {\n    id: 'data_backup',\n    type: 'data_backup',\n    title: 'Data Backup Reminder',\n    message:\n      \"It's been {{days_since_backup}} days since your last data backup. Keep your health data safe.\",\n    actionLabel: 'Backup Data',\n    actionUrl: '/settings/backup',\n    priority: 'low',\n    category: 'system',\n    isSystemGenerated: true,\n  },\n];\n\n// Default notification preferences\nexport const DEFAULT_NOTIFICATION_PREFERENCES: NotificationPreferences = {\n  enabled: true,\n  deliveryMethods: {\n    browser: true,\n    in_app: true,\n    email: false,\n    sms: false,\n  },\n  categories: {\n    pain_reminders: true,\n    medication_alerts: true,\n    appointment_reminders: true,\n    goal_achievements: true,\n    progress_checkins: true,\n    system_updates: false,\n    custom: true,\n  },\n  quietHours: {\n    enabled: false,\n    start: '22:00',\n    end: '08:00',\n  },\n  frequencyLimits: {\n    maxPerDay: 10,\n    maxPerHour: 3,\n  },\n};\n","import React, { useState, useEffect } from 'react';\r\nimport { secureStorage } from '../../lib/storage/secureStorage';\r\nimport { DEFAULT_NOTIFICATION_PREFERENCES, NotificationPreferences } from '../../types/notifications';\r\nimport { Switch } from '../ui/switch';\r\n\r\nconst STORAGE_KEY = 'pain-tracker:notification-preferences';\r\n\r\n/** Deeply merge stored prefs with defaults to handle missing nested properties */\r\nfunction loadPrefs(): NotificationPreferences {\r\n  const stored = secureStorage.safeJSON<Partial<NotificationPreferences>>(STORAGE_KEY, {});\r\n  return {\r\n    ...DEFAULT_NOTIFICATION_PREFERENCES,\r\n    ...stored,\r\n    deliveryMethods: {\r\n      ...DEFAULT_NOTIFICATION_PREFERENCES.deliveryMethods,\r\n      ...(stored.deliveryMethods ?? {}),\r\n    },\r\n    categories: {\r\n      ...DEFAULT_NOTIFICATION_PREFERENCES.categories,\r\n      ...(stored.categories ?? {}),\r\n    },\r\n    quietHours: {\r\n      ...DEFAULT_NOTIFICATION_PREFERENCES.quietHours,\r\n      ...(stored.quietHours ?? {}),\r\n    },\r\n    frequencyLimits: {\r\n      ...DEFAULT_NOTIFICATION_PREFERENCES.frequencyLimits,\r\n      ...(stored.frequencyLimits ?? {}),\r\n    },\r\n  };\r\n}\r\n\r\nexport default function NotificationPreferencesPanel() {\r\n  const [prefs, setPrefs] = useState<NotificationPreferences>(loadPrefs);\r\n\r\n  useEffect(() => {\r\n    secureStorage.set(STORAGE_KEY, prefs);\r\n  }, [prefs]);\r\n\r\n  return (\r\n    <div className=\"rounded-xl p-5 bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\">\r\n      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Notification Preferences</h4>\r\n      <div className=\"space-y-4\">\r\n        <label className=\"flex items-center justify-between\">\r\n          <span className=\"text-sm font-medium text-gray-700 dark:text-slate-200\">Enable notifications</span>\r\n          <Switch checked={prefs.enabled} onCheckedChange={checked => setPrefs({ ...prefs, enabled: checked })} />\r\n        </label>\r\n\r\n        <div className=\"grid grid-cols-1 gap-3 pt-2 border-t border-gray-200 dark:border-white/5\">\r\n          <label className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">Browser notifications</span>\r\n            <Switch\r\n              checked={prefs.deliveryMethods.browser}\r\n              onCheckedChange={checked => setPrefs({ ...prefs, deliveryMethods: { ...prefs.deliveryMethods, browser: checked } })}\r\n            />\r\n          </label>\r\n          <label className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">In-app notifications</span>\r\n            <Switch\r\n              checked={prefs.deliveryMethods.in_app}\r\n              onCheckedChange={checked => setPrefs({ ...prefs, deliveryMethods: { ...prefs.deliveryMethods, in_app: checked } })}\r\n            />\r\n          </label>\r\n          <label className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">Email</span>\r\n            <Switch\r\n              checked={prefs.deliveryMethods.email}\r\n              onCheckedChange={checked => setPrefs({ ...prefs, deliveryMethods: { ...prefs.deliveryMethods, email: checked } })}\r\n            />\r\n          </label>\r\n          <label className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">SMS</span>\r\n            <Switch\r\n              checked={prefs.deliveryMethods.sms}\r\n              onCheckedChange={checked => setPrefs({ ...prefs, deliveryMethods: { ...prefs.deliveryMethods, sms: checked } })}\r\n            />\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { secureStorage } from '../../lib/storage/secureStorage';\r\n\r\nfunction downloadJSON(filename: string, data: string) {\r\n  try {\r\n    if (typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function') {\r\n      const blob = new Blob([data], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = filename;\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n      return;\r\n    }\r\n\r\n    // Fallback: create a data URL (useful for test environments without createObjectURL)\r\n    const dataUrl = `data:text/json;charset=utf-8,${encodeURIComponent(data)}`;\r\n    const a = document.createElement('a');\r\n    a.href = dataUrl;\r\n    a.download = filename;\r\n    a.click();\r\n  } catch {\r\n    // Swallow errors - downloads may not be available in test environments\r\n  }\r\n}\r\n\r\nexport default function BackupSettings() {\r\n  const [lastExport, setLastExport] = useState<string | null>(null);\r\n  const [importError, setImportError] = useState<string | null>(null);\r\n  const [importResult, setImportResult] = useState<string | null>(null);\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      const keys = secureStorage.keys();\r\n      const payload: Record<string, unknown> = {};\r\n      for (const key of keys) {\r\n        payload[key] = secureStorage.get(key);\r\n      }\r\n\r\n      const data = JSON.stringify({ exportedAt: new Date().toISOString(), data: payload }, null, 2);\r\n      downloadJSON(`pain-tracker-backup-${new Date().toISOString()}.json`, data);\r\n      setLastExport(new Date().toISOString());\r\n      setImportError(null);\r\n      setImportResult('Export completed');\r\n    } catch {\r\n      setImportError('Failed to export backup');\r\n    }\r\n  };\r\n\r\n  const handleImport = async (file: File | null) => {\r\n    setImportError(null);\r\n    setImportResult(null);\r\n    if (!file) return;\r\n    try {\r\n      const text = await file.text();\r\n      const parsed = JSON.parse(text);\r\n      if (!parsed || typeof parsed !== 'object' || !parsed.data) {\r\n        setImportError('Invalid backup file');\r\n        return;\r\n      }\r\n      const data = parsed.data as Record<string, unknown>;\r\n      Object.keys(data).forEach(k => secureStorage.set(k, data[k]));\r\n      setImportResult('Import successful');\r\n    } catch {\r\n      setImportError('Failed to import backup');\r\n    }\r\n  };\r\n\r\n  const handleFileInput = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0] ?? null;\r\n    await handleImport(file);\r\n    if (e.target) e.target.value = '';\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-xl p-5 bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\">\r\n      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Local Backup</h4>\r\n      <div className=\"space-y-4\">\r\n        <p className=\"text-sm text-gray-600 dark:text-slate-400\">\r\n          Create a local backup of your data or import an existing backup JSON file. Be cautious\r\n          when importing backups; this may overwrite local data.\r\n        </p>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          <button \r\n            onClick={handleExport}\r\n            className=\"px-4 py-2 rounded-lg text-sm font-medium transition-all bg-purple-100 dark:bg-purple-500/15 border border-purple-300 dark:border-purple-500/30 text-purple-600 dark:text-purple-400 hover:bg-purple-200 dark:hover:bg-purple-500/25\"\r\n          >\r\n            Export backup\r\n          </button>\r\n          <label className=\"cursor-pointer\">\r\n            <input type=\"file\" accept=\"application/json\" onChange={handleFileInput} className=\"hidden\" />\r\n            <span className=\"inline-block px-4 py-2 rounded-lg text-sm font-medium transition-all cursor-pointer bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-white/10 text-gray-600 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-white/10\">\r\n              Import backup\r\n            </span>\r\n          </label>\r\n        </div>\r\n\r\n        {lastExport && (\r\n          <div className=\"text-xs text-gray-500 dark:text-slate-500\">Last export: {new Date(lastExport).toLocaleString()}</div>\r\n        )}\r\n        {importError && (\r\n          <div className=\"text-xs text-red-600 dark:text-red-400\">{importError}</div>\r\n        )}\r\n        {importResult && (\r\n          <div className=\"text-xs text-emerald-600 dark:text-emerald-400\">{importResult}</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { exportToCSV, exportToJSON, exportToPDF, downloadData } from '../../utils/pain-tracker/export';\r\nimport type { PainEntry } from '../../types';\r\nimport { usePainTrackerStore } from '../../stores/pain-tracker-store';\r\n\r\nexport default function ExportSettings() {\r\n  const entries = usePainTrackerStore(state => state.entries);\r\n  const [format, setFormat] = useState<'json' | 'csv' | 'pdf'>('json');\r\n\r\n  const handleExport = async () => {\r\n    if (format === 'json') {\r\n      const data = exportToJSON(entries as PainEntry[]);\r\n      downloadData(data, `pain-tracker-export-${new Date().toISOString()}.json`, 'application/json');\r\n    } else if (format === 'csv') {\r\n      const data = exportToCSV(entries as PainEntry[]);\r\n      downloadData(data, `pain-tracker-export-${new Date().toISOString()}.csv`, 'text/csv');\r\n    } else if (format === 'pdf') {\r\n      const dataUri = await exportToPDF(entries as PainEntry[]);\r\n      downloadData(dataUri, `pain-tracker-report-${new Date().toISOString()}.pdf`, 'application/pdf');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-xl p-5 bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\">\r\n      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Export & Sharing</h4>\r\n      <div className=\"space-y-4\">\r\n        <p className=\"text-sm text-gray-600 dark:text-slate-400\">Export your data for sharing with healthcare providers.</p>\r\n        \r\n        <div className=\"flex items-center gap-4\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input \r\n              type=\"radio\" \r\n              name=\"format\" \r\n              checked={format === 'json'} \r\n              onChange={() => setFormat('json')}\r\n              className=\"text-cyan-500 focus:ring-cyan-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n            />\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">JSON</span>\r\n          </label>\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input \r\n              type=\"radio\" \r\n              name=\"format\" \r\n              checked={format === 'csv'} \r\n              onChange={() => setFormat('csv')}\r\n              className=\"text-cyan-500 focus:ring-cyan-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n            />\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">CSV</span>\r\n          </label>\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input \r\n              type=\"radio\" \r\n              name=\"format\" \r\n              checked={format === 'pdf'} \r\n              onChange={() => setFormat('pdf')}\r\n              className=\"text-cyan-500 focus:ring-cyan-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n            />\r\n            <span className=\"text-sm text-gray-600 dark:text-slate-300\">PDF</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3 pt-2\">\r\n          <button \r\n            onClick={handleExport}\r\n            className=\"px-4 py-2 rounded-lg text-sm font-medium text-white transition-all duration-200 bg-gradient-to-r from-cyan-500 to-sky-500 shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50\"\r\n          >\r\n            Export now\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { secureStorage } from '../../lib/storage/secureStorage';\r\nimport {\r\n  PRIVACY_SETTINGS_STORAGE_KEY,\r\n  readPrivacySettings,\r\n  writePrivacySettings,\r\n} from '../../utils/privacySettings';\r\n\r\nexport default function PrivacySettings() {\r\n  const [sharing, setSharing] = useState<boolean>(() => readPrivacySettings().dataSharing);\r\n  const [analytics, setAnalytics] = useState<boolean>(() => readPrivacySettings().analyticsConsent);\r\n  const [retention, setRetention] = useState<number>(() => readPrivacySettings().retentionDays);\r\n  const [weatherAutoCapture, setWeatherAutoCapture] = useState<boolean>(() => readPrivacySettings().weatherAutoCapture);\r\n\r\n  useEffect(() => {\r\n    writePrivacySettings({\r\n      dataSharing: sharing,\r\n      analyticsConsent: analytics,\r\n      retentionDays: retention,\r\n      weatherAutoCapture,\r\n    });\r\n  }, [sharing, analytics, retention, weatherAutoCapture]);\r\n\r\n  return (\r\n    <div className=\"rounded-xl p-5 bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\">\r\n      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Privacy & Data Controls</h4>\r\n      <div className=\"space-y-4\">\r\n        <label className=\"flex items-center justify-between gap-4\">\r\n          <div>\r\n            <div className=\"font-medium text-gray-700 dark:text-slate-200\">Share de-identified data</div>\r\n            <div className=\"text-sm text-gray-500 dark:text-slate-400\">Enable sharing of aggregated, de-identified data for research</div>\r\n          </div>\r\n          <input \r\n            type=\"checkbox\" \r\n            checked={sharing} \r\n            onChange={e => setSharing(e.target.checked)}\r\n            className=\"h-5 w-5 rounded border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-emerald-500 focus:ring-emerald-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n          />\r\n        </label>\r\n\r\n        <label className=\"flex items-center justify-between gap-4\">\r\n          <div>\r\n            <div className=\"font-medium text-gray-700 dark:text-slate-200\">Analytics & Telemetry</div>\r\n            <div className=\"text-sm text-gray-500 dark:text-slate-400\">Allow us to collect anonymous usage statistics to improve features</div>\r\n          </div>\r\n          <input \r\n            type=\"checkbox\" \r\n            checked={analytics} \r\n            onChange={e => setAnalytics(e.target.checked)}\r\n            className=\"h-5 w-5 rounded border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-emerald-500 focus:ring-emerald-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n          />\r\n        </label>\r\n\r\n        <label className=\"flex items-center justify-between gap-4\">\r\n          <div>\r\n            <div className=\"font-medium text-gray-700 dark:text-slate-200\">Auto-capture local weather</div>\r\n            <div className=\"text-sm text-gray-500 dark:text-slate-400\">\r\n              If enabled, the app may ask for location access to fetch current weather from OpenMeteo. Only a short summary (e.g.,\r\n              12C, cloudy, 65% humidity) is stored with the entry  coordinates are not saved.\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={weatherAutoCapture}\r\n            onChange={e => setWeatherAutoCapture(e.target.checked)}\r\n            className=\"h-5 w-5 rounded border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-emerald-500 focus:ring-emerald-500/50 focus:ring-offset-white dark:focus:ring-offset-slate-900\"\r\n          />\r\n        </label>\r\n\r\n        <div>\r\n          <div className=\"font-medium text-gray-700 dark:text-slate-200\">Data retention (days)</div>\r\n          <div className=\"text-sm text-gray-500 dark:text-slate-400 mb-2\">Control how long your data is retained before automatic deletion</div>\r\n          <select \r\n            value={String(retention)} \r\n            onChange={e => setRetention(Number(e.target.value))} \r\n            className=\"px-3 py-2 rounded-lg text-sm font-medium transition-all bg-gray-100 dark:bg-slate-700/80 border border-gray-300 dark:border-white/10 text-gray-900 dark:text-slate-200\"\r\n          >\r\n            <option value=\"30\">30 days</option>\r\n            <option value=\"90\">90 days</option>\r\n            <option value=\"365\">365 days</option>\r\n            <option value=\"0\">Keep indefinitely</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3 pt-2\">\r\n          <button \r\n            onClick={() => secureStorage.remove(PRIVACY_SETTINGS_STORAGE_KEY)}\r\n            className=\"px-4 py-2 rounded-lg text-sm font-medium transition-all bg-red-100 dark:bg-red-500/15 border border-red-300 dark:border-red-500/30 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-500/25\"\r\n          >\r\n            Reset preferences\r\n          </button>\r\n          <button \r\n            onClick={() =>\r\n              writePrivacySettings({\r\n                dataSharing: sharing,\r\n                analyticsConsent: analytics,\r\n                retentionDays: retention,\r\n                weatherAutoCapture,\r\n              })\r\n            }\r\n            className=\"px-4 py-2 rounded-lg text-sm font-medium transition-all bg-green-100 dark:bg-green-500/15 border border-green-300 dark:border-green-500/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-500/25\"\r\n          >\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { AccessibilitySettingsPanel } from '../components/accessibility/AccessibilitySettings';\r\nimport AlertsSettings from '../components/AlertsSettings';\r\nimport { NotificationManagement } from '../components/notifications/NotificationManagement';\r\nimport NotificationPreferencesPanel from '../components/settings/NotificationPreferencesPanel';\r\nimport BackupSettings from '../components/settings/BackupSettings';\r\nimport ExportSettings from '../components/settings/ExportSettings';\r\nimport PrivacySettings from '../components/settings/PrivacySettings';\r\nimport { Settings, Bell, Shield, Download, Eye } from 'lucide-react';\r\n\r\nexport default function SettingsPage() {\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Page Header */}\r\n      <header className=\"space-y-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div \r\n            className=\"p-3 rounded-xl bg-purple-100 dark:bg-purple-500/20 border border-purple-200 dark:border-purple-500/30\"\r\n          >\r\n            <Settings className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Settings</h2>\r\n            <p className=\"text-sm text-gray-600 dark:text-slate-400\">\r\n              Customize your experience and protect your information\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <p className=\"text-gray-600 dark:text-slate-500 max-w-2xl leading-relaxed\">\r\n          Adjust how Pain Tracker looks, notifies you, and protects your information. You stay in\r\n          control, and you can change these settings at any time.\r\n        </p>\r\n      </header>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        {/* Left Column */}\r\n        <section aria-labelledby=\"settings-accessibility\" className=\"space-y-6\">\r\n          {/* Accessibility Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Eye className=\"h-4 w-4 text-sky-600 dark:text-sky-400\" />\r\n              <h3\r\n                id=\"settings-accessibility\"\r\n                className=\"text-sm font-semibold text-gray-700 dark:text-slate-300 uppercase tracking-wider\"\r\n              >\r\n                Accessibility &amp; Comfort\r\n              </h3>\r\n            </div>\r\n            <AccessibilitySettingsPanel />\r\n          </div>\r\n\r\n          {/* Notifications Section */}\r\n          <section aria-labelledby=\"settings-notifications\" className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Bell className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\r\n              <h3\r\n                id=\"settings-notifications\"\r\n                className=\"text-sm font-semibold text-gray-700 dark:text-slate-300 uppercase tracking-wider\"\r\n              >\r\n                Notifications &amp; Alerts\r\n              </h3>\r\n            </div>\r\n            <NotificationPreferencesPanel />\r\n            <div\r\n              className=\"rounded-xl overflow-hidden bg-white dark:bg-slate-800/90 border border-gray-200 dark:border-white/10 shadow-sm dark:shadow-lg\"\r\n            >\r\n              <div className=\"p-4 border-b border-gray-200 dark:border-white/5\">\r\n                <h4 className=\"font-semibold text-gray-900 dark:text-white\">Manage Notifications</h4>\r\n              </div>\r\n              <div className=\"p-4\">\r\n                <NotificationManagement />\r\n              </div>\r\n            </div>\r\n            <AlertsSettings variant=\"inline\" />\r\n          </section>\r\n\r\n          {/* Privacy Section */}\r\n          <section aria-labelledby=\"settings-privacy\" className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Shield className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\r\n              <h3\r\n                id=\"settings-privacy\"\r\n                className=\"text-sm font-semibold text-gray-700 dark:text-slate-300 uppercase tracking-wider\"\r\n              >\r\n                Privacy &amp; Data\r\n              </h3>\r\n            </div>\r\n            <PrivacySettings />\r\n          </section>\r\n        </section>\r\n\r\n        {/* Right Column */}\r\n        <section\r\n          aria-labelledby=\"settings-backup-export\"\r\n          className=\"space-y-6\"\r\n        >\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Download className=\"h-4 w-4 text-cyan-600 dark:text-cyan-400\" />\r\n              <h3\r\n                id=\"settings-backup-export\"\r\n                className=\"text-sm font-semibold text-gray-700 dark:text-slate-300 uppercase tracking-wider\"\r\n              >\r\n                Backup &amp; Export\r\n              </h3>\r\n            </div>\r\n            <ExportSettings />\r\n            <BackupSettings />\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"file":"SettingsPage-BCfUVgfl.js"}