{"version":3,"file":"InteractiveBodyMap-CkiP8R44.js","sources":["../../src/components/body-mapping/mapping.ts","../../src/components/body-mapping/InteractiveBodyMap.tsx"],"sourcesContent":["/**\r\n * Mapping utilities for converting between body-region IDs and stored location names.\r\n *\r\n * Note: This file is intentionally separate from `index.ts` to avoid circular imports\r\n * when used by `InteractiveBodyMap`.\r\n */\r\n\r\nexport const REGION_TO_LOCATION_MAP: Record<string, string> = {\r\n  head: 'head',\r\n  neck: 'neck',\r\n  'left-shoulder': 'shoulders',\r\n  'right-shoulder': 'shoulders',\r\n  'left-upper-arm': 'arms',\r\n  'right-upper-arm': 'arms',\r\n  'left-elbow': 'elbows',\r\n  'right-elbow': 'elbows',\r\n  'left-forearm': 'arms',\r\n  'right-forearm': 'arms',\r\n  'left-hand': 'hands',\r\n  'right-hand': 'hands',\r\n  chest: 'chest',\r\n  'upper-back': 'upper back',\r\n  abdomen: 'abdomen',\r\n  'lower-back': 'lower back',\r\n  'left-hip': 'hips',\r\n  'right-hip': 'hips',\r\n  'left-thigh-outer': 'outer left leg',\r\n  'left-thigh-inner': 'inner left leg',\r\n  'right-thigh-outer': 'outer right leg',\r\n  'right-thigh-inner': 'inner right leg',\r\n  'left-knee-outer': 'knees',\r\n  'left-knee-inner': 'knees',\r\n  'right-knee-outer': 'knees',\r\n  'right-knee-inner': 'knees',\r\n  'left-shin-outer': 'left leg',\r\n  'left-shin-inner': 'left leg',\r\n  'right-shin-outer': 'right leg',\r\n  'right-shin-inner': 'right leg',\r\n  'left-calf-outer': 'left leg',\r\n  'left-calf-inner': 'left leg',\r\n  'right-calf-outer': 'right leg',\r\n  'right-calf-inner': 'right leg',\r\n  'left-ankle': 'ankles',\r\n  'right-ankle': 'ankles',\r\n  'left-foot-lateral': 'left foot',\r\n  'left-foot-medial': 'left foot',\r\n  'right-foot-lateral': 'right foot',\r\n  'right-foot-medial': 'right foot',\r\n  'left-toes-lateral': 'left toes',\r\n  'left-toes-medial': 'left toes',\r\n  'right-toes-lateral': 'right toes',\r\n  'right-toes-medial': 'right toes',\r\n};\r\n\r\n/**\r\n * Convert region IDs to unique stored location names.\r\n */\r\nexport function regionsToLocations(regionIds: string[]): string[] {\r\n  const locations = new Set<string>();\r\n  regionIds.forEach(id => {\r\n    const location = REGION_TO_LOCATION_MAP[id];\r\n    if (location) {\r\n      locations.add(location);\r\n    }\r\n  });\r\n  return Array.from(locations);\r\n}\r\n\r\n/**\r\n * Convert stored location names to region IDs (returns all matching regions).\r\n */\r\nexport function locationsToRegions(locations: string[]): string[] {\r\n  const regions: string[] = [];\r\n  locations.forEach(location => {\r\n    Object.entries(REGION_TO_LOCATION_MAP).forEach(([regionId, loc]) => {\r\n      if (loc === location && !regions.includes(regionId)) {\r\n        regions.push(regionId);\r\n      }\r\n    });\r\n  });\r\n  return regions;\r\n}\r\n","import { useState, useRef, useMemo, useCallback } from 'react';\r\nimport { RotateCcw, Info, Maximize2, ZoomIn, ZoomOut, Download, User, Eye, HelpCircle } from 'lucide-react';\r\nimport { formatNumber } from '../../utils/formatting';\r\nimport type { PainEntry } from '../../types';\r\nimport { trackUsageEvent, incrementSessionAction } from '../../utils/usage-tracking';\r\nimport { cn } from '../../design-system/utils';\r\nimport { locationsToRegions } from './mapping';\r\n\r\ninterface BodyRegion {\r\n  id: string;\r\n  name: string;\r\n  frontPath?: string;\r\n  backPath?: string;\r\n  center: { x: number; y: number };\r\n  category: 'upper' | 'core' | 'lower' | 'extremities';\r\n}\r\n\r\ninterface InteractiveBodyMapProps {\r\n  entries?: PainEntry[];\r\n  selectedRegions?: string[];\r\n  onRegionSelect?: (regions: string[]) => void;\r\n  mode?: 'selection' | 'heatmap';\r\n  className?: string;\r\n  height?: number;\r\n  /** Compact mode for embedding in forms */\r\n  compact?: boolean;\r\n  /** Show accessibility features (list view toggle, keyboard hints) */\r\n  showAccessibilityFeatures?: boolean;\r\n  /** Callback when user requests list view */\r\n  onRequestListView?: () => void;\r\n  /** Label for form association */\r\n  'aria-labelledby'?: string;\r\n  /** Description for form association */\r\n  'aria-describedby'?: string;\r\n}\r\n\r\n// Anatomically accurate body regions with improved SVG paths\r\nconst BODY_REGIONS: BodyRegion[] = [\r\n  // HEAD & NECK\r\n  {\r\n    id: 'head',\r\n    name: 'Head',\r\n    frontPath:\r\n      'M150 35 C165 35, 175 45, 175 60 C175 70, 172 78, 165 85 C162 88, 158 90, 153 92 L147 92 C142 90, 138 88, 135 85 C128 78, 125 70, 125 60 C125 45, 135 35, 150 35 Z',\r\n    backPath:\r\n      'M150 35 C165 35, 175 45, 175 60 C175 70, 172 78, 165 85 C162 88, 158 90, 153 92 L147 92 C142 90, 138 88, 135 85 C128 78, 125 70, 125 60 C125 45, 135 35, 150 35 Z',\r\n    center: { x: 150, y: 63 },\r\n    category: 'upper',\r\n  },\r\n  {\r\n    id: 'neck',\r\n    name: 'Neck',\r\n    frontPath: 'M142 92 L158 92 L160 110 L140 110 Z',\r\n    backPath: 'M142 92 L158 92 L160 110 L140 110 Z',\r\n    center: { x: 150, y: 101 },\r\n    category: 'upper',\r\n  },\r\n\r\n  // SHOULDERS & ARMS\r\n  {\r\n    id: 'left-shoulder',\r\n    name: 'Left Shoulder',\r\n    frontPath: 'M85 115 C95 105, 115 105, 125 110 L130 125 C125 135, 110 140, 95 135 L85 120 Z',\r\n    center: { x: 107, y: 120 },\r\n    category: 'upper',\r\n  },\r\n  {\r\n    id: 'right-shoulder',\r\n    name: 'Right Shoulder',\r\n    frontPath: 'M175 110 C185 105, 205 105, 215 115 L215 120 L205 135 C190 140, 175 135, 170 125 Z',\r\n    center: { x: 193, y: 120 },\r\n    category: 'upper',\r\n  },\r\n  {\r\n    id: 'left-upper-arm',\r\n    name: 'Left Upper Arm',\r\n    frontPath: 'M85 135 L105 140 L107 200 L87 205 Z',\r\n    center: { x: 96, y: 170 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'right-upper-arm',\r\n    name: 'Right Upper Arm',\r\n    frontPath: 'M195 140 L215 135 L213 205 L193 200 Z',\r\n    center: { x: 204, y: 170 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'left-elbow',\r\n    name: 'Left Elbow',\r\n    frontPath: 'M87 205 L107 200 L108 220 L88 225 Z',\r\n    center: { x: 97, y: 212 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'right-elbow',\r\n    name: 'Right Elbow',\r\n    frontPath: 'M193 200 L213 205 L212 225 L192 220 Z',\r\n    center: { x: 203, y: 212 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'left-forearm',\r\n    name: 'Left Forearm',\r\n    frontPath: 'M88 225 L108 220 L110 285 L90 290 Z',\r\n    center: { x: 99, y: 255 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'right-forearm',\r\n    name: 'Right Forearm',\r\n    frontPath: 'M192 220 L212 225 L210 290 L190 285 Z',\r\n    center: { x: 201, y: 255 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'left-hand',\r\n    name: 'Left Hand',\r\n    frontPath: 'M90 290 L110 285 L112 308 L92 312 Z',\r\n    center: { x: 101, y: 298 },\r\n    category: 'extremities',\r\n  },\r\n  {\r\n    id: 'right-hand',\r\n    name: 'Right Hand',\r\n    frontPath: 'M190 285 L210 290 L208 312 L188 308 Z',\r\n    center: { x: 199, y: 298 },\r\n    category: 'extremities',\r\n  },\r\n\r\n  // TORSO\r\n  {\r\n    id: 'chest',\r\n    name: 'Chest',\r\n    frontPath: 'M130 110 L170 110 L180 145 L178 180 L122 180 L120 145 Z',\r\n    center: { x: 150, y: 145 },\r\n    category: 'core',\r\n  },\r\n  {\r\n    id: 'upper-back',\r\n    name: 'Upper Back',\r\n    backPath: 'M130 110 L170 110 L178 145 L180 180 L120 180 L122 145 Z',\r\n    center: { x: 150, y: 145 },\r\n    category: 'core',\r\n  },\r\n  {\r\n    id: 'abdomen',\r\n    name: 'Abdomen',\r\n    frontPath: 'M122 180 L178 180 L175 235 L125 235 Z',\r\n    center: { x: 150, y: 207 },\r\n    category: 'core',\r\n  },\r\n  {\r\n    id: 'lower-back',\r\n    name: 'Lower Back',\r\n    backPath: 'M120 180 L180 180 L178 235 L122 235 Z',\r\n    center: { x: 150, y: 207 },\r\n    category: 'core',\r\n  },\r\n\r\n  // HIPS & PELVIS\r\n  {\r\n    id: 'left-hip',\r\n    name: 'Left Hip',\r\n    frontPath: 'M125 235 L145 235 L148 275 L128 275 Z',\r\n    backPath: 'M125 235 L145 235 L148 275 L128 275 Z',\r\n    center: { x: 136, y: 255 },\r\n    category: 'core',\r\n  },\r\n  {\r\n    id: 'right-hip',\r\n    name: 'Right Hip',\r\n    frontPath: 'M155 235 L175 235 L172 275 L152 275 Z',\r\n    backPath: 'M155 235 L175 235 L172 275 L152 275 Z',\r\n    center: { x: 164, y: 255 },\r\n    category: 'core',\r\n  },\r\n\r\n  // LEGS - Enhanced for nerve pain tracking\r\n  {\r\n    id: 'left-thigh-outer',\r\n    name: 'Left Outer Thigh',\r\n    frontPath: 'M128 275 L137 275 L136 365 L127 365 Z',\r\n    backPath: 'M128 275 L137 275 L136 365 L127 365 Z',\r\n    center: { x: 132, y: 320 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-thigh-inner',\r\n    name: 'Left Inner Thigh',\r\n    frontPath: 'M137 275 L148 275 L147 365 L136 365 Z',\r\n    backPath: 'M137 275 L148 275 L147 365 L136 365 Z',\r\n    center: { x: 142, y: 320 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-thigh-inner',\r\n    name: 'Right Inner Thigh',\r\n    frontPath: 'M152 275 L163 275 L164 365 L153 365 Z',\r\n    backPath: 'M152 275 L163 275 L164 365 L153 365 Z',\r\n    center: { x: 158, y: 320 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-thigh-outer',\r\n    name: 'Right Outer Thigh',\r\n    frontPath: 'M163 275 L172 275 L173 365 L164 365 Z',\r\n    backPath: 'M163 275 L172 275 L173 365 L164 365 Z',\r\n    center: { x: 168, y: 320 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-knee-outer',\r\n    name: 'Left Outer Knee',\r\n    frontPath: 'M127 365 L137 365 L137 385 L127 385 Z',\r\n    backPath: 'M127 365 L137 365 L137 385 L127 385 Z',\r\n    center: { x: 132, y: 375 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-knee-inner',\r\n    name: 'Left Inner Knee',\r\n    frontPath: 'M137 365 L147 365 L147 385 L137 385 Z',\r\n    backPath: 'M137 365 L147 365 L147 385 L137 385 Z',\r\n    center: { x: 142, y: 375 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-knee-inner',\r\n    name: 'Right Inner Knee',\r\n    frontPath: 'M153 365 L163 365 L163 385 L153 385 Z',\r\n    backPath: 'M153 365 L163 365 L163 385 L153 385 Z',\r\n    center: { x: 158, y: 375 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-knee-outer',\r\n    name: 'Right Outer Knee',\r\n    frontPath: 'M163 365 L173 365 L173 385 L163 385 Z',\r\n    backPath: 'M163 365 L173 365 L173 385 L163 385 Z',\r\n    center: { x: 168, y: 375 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-shin-outer',\r\n    name: 'Left Outer Shin',\r\n    frontPath: 'M127 385 L137 385 L136 425 L126 425 Z',\r\n    center: { x: 131, y: 405 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-shin-inner',\r\n    name: 'Left Inner Shin',\r\n    frontPath: 'M137 385 L147 385 L146 425 L136 425 Z',\r\n    center: { x: 141, y: 405 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-shin-inner',\r\n    name: 'Right Inner Shin',\r\n    frontPath: 'M153 385 L163 385 L164 425 L154 425 Z',\r\n    center: { x: 159, y: 405 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-shin-outer',\r\n    name: 'Right Outer Shin',\r\n    frontPath: 'M163 385 L173 385 L174 425 L164 425 Z',\r\n    center: { x: 169, y: 405 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-calf-outer',\r\n    name: 'Left Outer Calf',\r\n    backPath: 'M127 385 L137 385 L136 465 L125 465 Z',\r\n    center: { x: 131, y: 425 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-calf-inner',\r\n    name: 'Left Inner Calf',\r\n    backPath: 'M137 385 L147 385 L145 465 L136 465 Z',\r\n    center: { x: 141, y: 425 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-calf-inner',\r\n    name: 'Right Inner Calf',\r\n    backPath: 'M153 385 L163 385 L164 465 L155 465 Z',\r\n    center: { x: 159, y: 425 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-calf-outer',\r\n    name: 'Right Outer Calf',\r\n    backPath: 'M163 385 L173 385 L175 465 L164 465 Z',\r\n    center: { x: 169, y: 425 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-ankle',\r\n    name: 'Left Ankle',\r\n    frontPath: 'M125 465 L145 465 L144 478 L124 478 Z',\r\n    backPath: 'M125 465 L145 465 L144 478 L124 478 Z',\r\n    center: { x: 134, y: 471 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-ankle',\r\n    name: 'Right Ankle',\r\n    frontPath: 'M155 465 L175 465 L176 478 L156 478 Z',\r\n    backPath: 'M155 465 L175 465 L176 478 L156 478 Z',\r\n    center: { x: 166, y: 471 },\r\n    category: 'lower',\r\n  },\r\n  // FEET - Divided into medial (inner) and lateral (outer) for nerve pain\r\n  {\r\n    id: 'left-foot-lateral',\r\n    name: 'Left Foot (Outer/Lateral)',\r\n    frontPath: 'M116 478 L134 478 L135 495 L116 495 Z',\r\n    backPath: 'M116 478 L134 478 L135 495 L116 495 Z',\r\n    center: { x: 125, y: 486 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-foot-medial',\r\n    name: 'Left Foot (Inner/Medial)',\r\n    frontPath: 'M134 478 L152 478 L152 495 L135 495 Z',\r\n    backPath: 'M134 478 L152 478 L152 495 L135 495 Z',\r\n    center: { x: 143, y: 486 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-foot-medial',\r\n    name: 'Right Foot (Inner/Medial)',\r\n    frontPath: 'M148 478 L166 478 L165 495 L148 495 Z',\r\n    backPath: 'M148 478 L166 478 L165 495 L148 495 Z',\r\n    center: { x: 157, y: 486 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-foot-lateral',\r\n    name: 'Right Foot (Outer/Lateral)',\r\n    frontPath: 'M166 478 L184 478 L184 495 L165 495 Z',\r\n    backPath: 'M166 478 L184 478 L184 495 L165 495 Z',\r\n    center: { x: 175, y: 486 },\r\n    category: 'lower',\r\n  },\r\n  // TOES - Divided into halves for detailed nerve pain tracking\r\n  {\r\n    id: 'left-toes-lateral',\r\n    name: 'Left Toes (Outer)',\r\n    frontPath: 'M114 495 L130 495 L128 508 L112 508 Z',\r\n    backPath: 'M114 495 L130 495 L128 508 L112 508 Z',\r\n    center: { x: 121, y: 501 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'left-toes-medial',\r\n    name: 'Left Toes (Inner)',\r\n    frontPath: 'M130 495 L148 495 L146 508 L128 508 Z',\r\n    backPath: 'M130 495 L148 495 L146 508 L128 508 Z',\r\n    center: { x: 138, y: 501 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-toes-medial',\r\n    name: 'Right Toes (Inner)',\r\n    frontPath: 'M152 495 L170 495 L172 508 L154 508 Z',\r\n    backPath: 'M152 495 L170 495 L172 508 L154 508 Z',\r\n    center: { x: 162, y: 501 },\r\n    category: 'lower',\r\n  },\r\n  {\r\n    id: 'right-toes-lateral',\r\n    name: 'Right Toes (Outer)',\r\n    frontPath: 'M170 495 L186 495 L188 508 L172 508 Z',\r\n    backPath: 'M170 495 L186 495 L188 508 L172 508 Z',\r\n    center: { x: 179, y: 501 },\r\n    category: 'lower',\r\n  },\r\n];\r\n\r\n// Color classes mapping for body region categories - defined outside component to avoid recreation\r\nconst CATEGORY_COLOR_CLASSES: Record<string, { bg: string; border: string; text: string }> = {\r\n  purple: {\r\n    bg: 'bg-purple-50 dark:bg-purple-900/20',\r\n    border: 'border-purple-200 dark:border-purple-800',\r\n    text: 'text-purple-700 dark:text-purple-400',\r\n  },\r\n  blue: {\r\n    bg: 'bg-blue-50 dark:bg-blue-900/20',\r\n    border: 'border-blue-200 dark:border-blue-800',\r\n    text: 'text-blue-700 dark:text-blue-400',\r\n  },\r\n  green: {\r\n    bg: 'bg-green-50 dark:bg-green-900/20',\r\n    border: 'border-green-200 dark:border-green-800',\r\n    text: 'text-green-700 dark:text-green-400',\r\n  },\r\n  orange: {\r\n    bg: 'bg-orange-50 dark:bg-orange-900/20',\r\n    border: 'border-orange-200 dark:border-orange-800',\r\n    text: 'text-orange-700 dark:text-orange-400',\r\n  },\r\n};\r\n\r\nexport function InteractiveBodyMap({\r\n  entries = [],\r\n  selectedRegions = [],\r\n  onRegionSelect,\r\n  mode = 'selection',\r\n  className = '',\r\n  height = 600,\r\n  compact = false,\r\n  showAccessibilityFeatures = true,\r\n  onRequestListView,\r\n  'aria-labelledby': ariaLabelledBy,\r\n  'aria-describedby': ariaDescribedBy,\r\n}: InteractiveBodyMapProps) {\r\n  const [hoveredRegion, setHoveredRegion] = useState<string | null>(null);\r\n  const [focusedRegion, setFocusedRegion] = useState<string | null>(null);\r\n  const [showFront, setShowFront] = useState(true);\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showKeyboardHelp, setShowKeyboardHelp] = useState(false);\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Calculate pain intensity for each region based on entries.\r\n  // Important: this must be computed synchronously so the UI updates immediately after a new entry.\r\n  const regionPainMap = useMemo(() => {\r\n    if (mode !== 'heatmap' || entries.length === 0) {\r\n      return new Map<string, { avg: number; max: number; count: number }>();\r\n    }\r\n\r\n    const painMap = new Map<string, { total: number; max: number; count: number }>();\r\n\r\n    for (const entry of entries) {\r\n      const locations = entry.baselineData?.locations;\r\n      if (!locations || locations.length === 0) continue;\r\n\r\n      for (const location of locations) {\r\n        const regionIds = normalizeLocationToRegionIds(location);\r\n        for (const regionId of regionIds) {\r\n          if (!BODY_REGIONS.some(r => r.id === regionId)) continue;\r\n          if (!painMap.has(regionId)) {\r\n            painMap.set(regionId, { total: 0, max: 0, count: 0 });\r\n          }\r\n          const data = painMap.get(regionId)!;\r\n          data.total += entry.baselineData.pain;\r\n          data.max = Math.max(data.max, entry.baselineData.pain);\r\n          data.count += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    const result = new Map<string, { avg: number; max: number; count: number }>();\r\n    painMap.forEach((data, regionId) => {\r\n      result.set(regionId, {\r\n        avg: data.total / data.count,\r\n        max: data.max,\r\n        count: data.count,\r\n      });\r\n    });\r\n    return result;\r\n  }, [entries, mode]);\r\n\r\n  const handleRegionClick = useCallback((regionId: string) => {\r\n    if (mode === 'selection' && onRegionSelect) {\r\n      const isDeselecting = selectedRegions.includes(regionId);\r\n      const newSelection = isDeselecting\r\n        ? selectedRegions.filter(id => id !== regionId)\r\n        : [...selectedRegions, regionId];\r\n      onRegionSelect(newSelection);\r\n\r\n      // Track body map interaction\r\n      trackUsageEvent('body_map_region_clicked', 'body_mapping', {\r\n        region: regionId,\r\n        action: isDeselecting ? 'deselected' : 'selected',\r\n        totalSelected: newSelection.length,\r\n      });\r\n      incrementSessionAction();\r\n    }\r\n  }, [mode, onRegionSelect, selectedRegions]);\r\n\r\n  const getRegionColor = (regionId: string): string => {\r\n    if (mode === 'selection') {\r\n      if (selectedRegions.includes(regionId)) {\r\n        return '#ef4444'; // Red for selected\r\n      } else if (hoveredRegion === regionId) {\r\n        return '#60a5fa'; // Blue for hover\r\n      } else {\r\n        return '#d1d5db'; // Gray for unselected (higher contrast)\r\n      }\r\n    } else if (mode === 'heatmap') {\r\n      const painData = regionPainMap.get(regionId);\r\n      if (!painData || painData.avg === 0) return '#f3f4f6';\r\n\r\n      // Enhanced color gradient based on average pain\r\n      const intensity = painData.avg / 10;\r\n      if (intensity < 0.25) return '#86efac'; // Light green (0-2.5)\r\n      if (intensity < 0.4) return '#4ade80'; // Green (2.5-4)\r\n      if (intensity < 0.6) return '#fbbf24'; // Yellow (4-6)\r\n      if (intensity < 0.75) return '#fb923c'; // Orange (6-7.5)\r\n      return '#ef4444'; // Red (7.5-10)\r\n    }\r\n\r\n    return '#e5e7eb';\r\n  };\r\n\r\n  const getRegionOpacity = (regionId: string): number => {\r\n    if (mode === 'heatmap') {\r\n      const painData = regionPainMap.get(regionId);\r\n      if (!painData) return 0.2;\r\n      // Opacity based on frequency + intensity\r\n      const frequencyFactor = Math.min(painData.count / 10, 1); // More entries = more opaque\r\n      const intensityFactor = painData.avg / 10;\r\n      return 0.3 + frequencyFactor * 0.3 + intensityFactor * 0.4;\r\n    }\r\n    return hoveredRegion === regionId ? 0.95 : 0.85;\r\n  };\r\n\r\n  const getPainDataForRegion = (regionId: string) => {\r\n    return regionPainMap.get(regionId) || { avg: 0, max: 0, count: 0 };\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement && containerRef.current) {\r\n      containerRef.current.requestFullscreen();\r\n      setIsFullscreen(true);\r\n    } else if (document.fullscreenElement) {\r\n      document.exitFullscreen();\r\n      setIsFullscreen(false);\r\n    }\r\n  };\r\n\r\n  const handleZoomIn = () => setZoomLevel(prev => Math.min(prev + 0.2, 3));\r\n  const handleZoomOut = () => setZoomLevel(prev => Math.max(prev - 0.2, 0.5));\r\n\r\n  const exportAsPNG = () => {\r\n    if (!svgRef.current) return;\r\n\r\n    const svgData = new XMLSerializer().serializeToString(svgRef.current);\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      canvas.width = 300 * 2; // 2x for better quality\r\n      canvas.height = 530 * 2;\r\n      ctx?.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n      const pngFile = canvas.toDataURL('image/png');\r\n      const downloadLink = document.createElement('a');\r\n      downloadLink.download = `pain-map-${new Date().toISOString().split('T')[0]}.png`;\r\n      downloadLink.href = pngFile;\r\n      downloadLink.click();\r\n    };\r\n\r\n    img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));\r\n  };\r\n\r\n  const visibleRegions = BODY_REGIONS.filter(region => {\r\n    if (showFront) {\r\n      return region.frontPath !== undefined;\r\n    } else {\r\n      return region.backPath !== undefined;\r\n    }\r\n  });\r\n\r\n  // Keyboard navigation handler\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\r\n    if (!visibleRegions.length) return;\r\n\r\n    const currentIndex = focusedRegion \r\n      ? visibleRegions.findIndex(r => r.id === focusedRegion)\r\n      : -1;\r\n\r\n    switch (e.key) {\r\n      case 'ArrowRight':\r\n      case 'ArrowDown': {\r\n        e.preventDefault();\r\n        const nextIndex = (currentIndex + 1) % visibleRegions.length;\r\n        setFocusedRegion(visibleRegions[nextIndex].id);\r\n        setHoveredRegion(visibleRegions[nextIndex].id);\r\n        break;\r\n      }\r\n      case 'ArrowLeft':\r\n      case 'ArrowUp': {\r\n        e.preventDefault();\r\n        const prevIndex = currentIndex <= 0 ? visibleRegions.length - 1 : currentIndex - 1;\r\n        setFocusedRegion(visibleRegions[prevIndex].id);\r\n        setHoveredRegion(visibleRegions[prevIndex].id);\r\n        break;\r\n      }\r\n      case 'Enter':\r\n      case ' ':\r\n        e.preventDefault();\r\n        if (focusedRegion) {\r\n          handleRegionClick(focusedRegion);\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        setFocusedRegion(null);\r\n        setHoveredRegion(null);\r\n        break;\r\n      case '?':\r\n        setShowKeyboardHelp(prev => !prev);\r\n        break;\r\n      case 'f':\r\n        if (e.ctrlKey || e.metaKey) return; // Don't interfere with browser search\r\n        setShowFront(prev => !prev);\r\n        break;\r\n    }\r\n  }, [focusedRegion, visibleRegions, handleRegionClick]);\r\n\r\n  const selectedCount = selectedRegions.length;\r\n  const affectedRegionsCount = mode === 'heatmap' ? regionPainMap.size : 0;\r\n\r\n  // Generate live region announcement\r\n  const getLiveAnnouncement = () => {\r\n    if (hoveredRegion) {\r\n      const region = BODY_REGIONS.find(r => r.id === hoveredRegion);\r\n      const isSelected = selectedRegions.includes(hoveredRegion);\r\n      return `${region?.name}. ${isSelected ? 'Selected.' : 'Not selected.'} Press Enter to toggle.`;\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className={cn(\r\n        'interactive-body-map',\r\n        className,\r\n        isFullscreen && 'fixed inset-0 z-50 bg-white',\r\n        compact && 'p-2'\r\n      )}\r\n      role=\"application\"\r\n      aria-label=\"Interactive body map for selecting pain locations\"\r\n      aria-labelledby={ariaLabelledBy}\r\n      aria-describedby={ariaDescribedBy}\r\n      tabIndex={0}\r\n      onKeyDown={handleKeyDown}\r\n      onBlur={() => setFocusedRegion(null)}\r\n    >\r\n      {/* Live region for screen readers */}\r\n      <div \r\n        role=\"status\" \r\n        aria-live=\"polite\" \r\n        aria-atomic=\"true\" \r\n        className=\"sr-only\"\r\n      >\r\n        {getLiveAnnouncement()}\r\n      </div>\r\n\r\n      {/* Keyboard help modal */}\r\n      {showKeyboardHelp && showAccessibilityFeatures && (\r\n        <div className=\"absolute inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md shadow-xl\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h4 className=\"font-semibold text-lg\">Keyboard Navigation</h4>\r\n              <button \r\n                onClick={() => setShowKeyboardHelp(false)}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n                aria-label=\"Close help\"\r\n              >\r\n                √ó\r\n              </button>\r\n            </div>\r\n            <ul className=\"space-y-2 text-sm\">\r\n              <li><kbd className=\"px-2 py-1 bg-gray-100 rounded\">‚Üë‚Üì‚Üê‚Üí</kbd> Navigate regions</li>\r\n              <li><kbd className=\"px-2 py-1 bg-gray-100 rounded\">Enter</kbd> or <kbd className=\"px-2 py-1 bg-gray-100 rounded\">Space</kbd> Toggle selection</li>\r\n              <li><kbd className=\"px-2 py-1 bg-gray-100 rounded\">F</kbd> Flip front/back view</li>\r\n              <li><kbd className=\"px-2 py-1 bg-gray-100 rounded\">Esc</kbd> Clear focus</li>\r\n              <li><kbd className=\"px-2 py-1 bg-gray-100 rounded\">?</kbd> Toggle this help</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Header Controls */}\r\n      {!compact && (\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 p-3 sm:p-4 rounded-lg border border-blue-200 dark:border-gray-600\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg flex-shrink-0\">\r\n            <User className=\"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 text-sm sm:text-base\">\r\n              {mode === 'selection' ? 'Select Pain Locations' : 'Pain Heat Map'}\r\n            </h3>\r\n            <p className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\r\n              {mode === 'selection'\r\n                ? `${selectedCount} region${selectedCount !== 1 ? 's' : ''} selected`\r\n                : `${affectedRegionsCount} region${affectedRegionsCount !== 1 ? 's' : ''} with recorded pain`}\r\n            </p>\r\n            {mode === 'selection' && (\r\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                Tip: click/tap regions to toggle. Selected areas highlight in red.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-center gap-2 w-full sm:w-auto\">\r\n          {/* Accessibility: List view toggle */}\r\n          {showAccessibilityFeatures && onRequestListView && (\r\n            <button\r\n              onClick={onRequestListView}\r\n              className=\"flex items-center justify-center space-x-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm flex-1 sm:flex-none min-h-[44px]\"\r\n              aria-label=\"Switch to accessible list view\"\r\n            >\r\n              <Eye className=\"h-4 w-4\" />\r\n              <span className=\"sm:inline\">List</span>\r\n            </button>\r\n          )}\r\n\r\n          {/* Keyboard help button */}\r\n          {showAccessibilityFeatures && (\r\n            <button\r\n              onClick={() => setShowKeyboardHelp(true)}\r\n              className=\"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center\"\r\n              aria-label=\"Show keyboard shortcuts\"\r\n              title=\"Keyboard shortcuts (?)\"\r\n            >\r\n              <HelpCircle className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\r\n            </button>\r\n          )}\r\n\r\n          {/* Zoom Controls */}\r\n          <div className=\"flex items-center bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 px-2 py-1 min-h-[44px]\">\r\n            <button\r\n              onClick={handleZoomOut}\r\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\r\n              title=\"Zoom Out\"\r\n              aria-label=\"Zoom out\"\r\n            >\r\n              <ZoomOut className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\r\n            </button>\r\n            <span className=\"text-xs text-gray-600 dark:text-gray-400 px-1 sm:px-2 min-w-[2.5rem] sm:min-w-[3rem] text-center\" aria-live=\"polite\">\r\n              {Math.round(zoomLevel * 100)}%\r\n            </span>\r\n            <button\r\n              onClick={handleZoomIn}\r\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\r\n              title=\"Zoom In\"\r\n              aria-label=\"Zoom in\"\r\n            >\r\n              <ZoomIn className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* View Toggle */}\r\n          <button\r\n            onClick={() => setShowFront(!showFront)}\r\n            className=\"flex items-center justify-center space-x-1 sm:space-x-2 px-3 sm:px-4 py-2 bg-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:bg-gray-900 transition-colors flex-1 sm:flex-none min-h-[44px]\"\r\n          >\r\n            <RotateCcw className=\"h-4 w-4\" />\r\n            <span className=\"text-sm font-medium\">{showFront ? 'Front' : 'Back'}</span>\r\n          </button>\r\n\r\n          {/* Export and Fullscreen - Hidden on small portrait screens */}\r\n          <div className=\"hidden xs:flex items-center gap-2\">\r\n            {/* Export Button */}\r\n            <button\r\n              onClick={exportAsPNG}\r\n              className=\"p-2 bg-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:bg-gray-900 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center\"\r\n              title=\"Export as PNG\"\r\n              aria-label=\"Export as PNG\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n            </button>\r\n\r\n            {/* Fullscreen Toggle */}\r\n            <button\r\n              onClick={toggleFullscreen}\r\n              className=\"p-2 bg-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:bg-gray-900 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center\"\r\n              title=\"Toggle Fullscreen\"\r\n              aria-label=\"Toggle fullscreen\"\r\n            >\r\n              <Maximize2 className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      )}\r\n\r\n      {/* Compact header for form embedding */}\r\n      {compact && (\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n            {selectedCount} location{selectedCount !== 1 ? 's' : ''} selected\r\n          </span>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <button\r\n              onClick={() => setShowFront(!showFront)}\r\n              className=\"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\r\n              aria-label={`Switch to ${showFront ? 'back' : 'front'} view`}\r\n            >\r\n              {showFront ? 'Front' : 'Back'}\r\n            </button>\r\n            {onRequestListView && (\r\n              <button\r\n                onClick={onRequestListView}\r\n                className=\"text-xs px-2 py-1 text-blue-600 hover:underline\"\r\n                aria-label=\"Switch to list view\"\r\n              >\r\n                List view\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Body Map SVG */}\r\n      <div className=\"relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-3 sm:p-6 shadow-lg overflow-hidden\">\r\n        {/* Background Grid Pattern */}\r\n        <div className=\"absolute inset-0 opacity-5\">\r\n          <svg width=\"100%\" height=\"100%\">\r\n            <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"gray\" strokeWidth=\"0.5\" />\r\n            </pattern>\r\n            <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <svg\r\n          ref={svgRef}\r\n          viewBox=\"0 0 300 530\"\r\n          className=\"w-full mx-auto transition-transform duration-300 portrait:max-h-[60vh]\"\r\n          style={{\r\n            maxHeight: compact ? '400px' : `${height}px`,\r\n            maxWidth: compact ? '420px' : '520px',\r\n            transform: `scale(${zoomLevel})`,\r\n            transformOrigin: 'center',\r\n          }}\r\n        >\r\n          {/* Background */}\r\n          <rect x=\"0\" y=\"0\" width=\"300\" height=\"530\" fill=\"transparent\" rx=\"15\" />\r\n\r\n          {/* Body Outline Shadow */}\r\n          <ellipse cx=\"150\" cy=\"510\" rx=\"40\" ry=\"8\" fill=\"#000000\" opacity=\"0.1\" />\r\n\r\n          {/* Body Regions */}\r\n          {visibleRegions.map(region => {\r\n            const path = showFront ? region.frontPath : region.backPath;\r\n            if (!path) return null;\r\n\r\n            const painData = getPainDataForRegion(region.id);\r\n            const isActive =\r\n              mode === 'selection' ? selectedRegions.includes(region.id) : painData.avg > 0;\r\n\r\n            return (\r\n              <g key={region.id}>\r\n                {/* Glow effect for selected/affected regions */}\r\n                {isActive && (\r\n                  <path\r\n                    d={path}\r\n                    fill=\"none\"\r\n                    stroke={mode === 'selection' ? '#ef4444' : '#fbbf24'}\r\n                    strokeWidth=\"3\"\r\n                    opacity=\"0.4\"\r\n                    className=\"animate-pulse\"\r\n                    filter=\"blur(4px)\"\r\n                  />\r\n                )}\r\n\r\n                {/* Main region */}\r\n                <path\r\n                  d={path}\r\n                  fill={getRegionColor(region.id)}\r\n                  stroke={hoveredRegion === region.id ? '#111827' : '#4b5563'}\r\n                  strokeWidth={hoveredRegion === region.id ? '2.25' : '1.25'}\r\n                  opacity={getRegionOpacity(region.id)}\r\n                  className=\"cursor-pointer transition-all duration-200 hover:brightness-110\"\r\n                  onClick={() => handleRegionClick(region.id)}\r\n                  onMouseEnter={() => setHoveredRegion(region.id)}\r\n                  onMouseLeave={() => setHoveredRegion(null)}\r\n                />\r\n\r\n                {/* Pain level indicator for heatmap */}\r\n                {mode === 'heatmap' && painData.avg > 0 && (\r\n                  <text\r\n                    x={region.center.x}\r\n                    y={region.center.y}\r\n                    textAnchor=\"middle\"\r\n                    dominantBaseline=\"central\"\r\n                    className=\"text-xs font-bold pointer-events-none select-none\"\r\n                    fill=\"#ffffff\"\r\n                    stroke=\"#000000\"\r\n                    strokeWidth=\"0.5\"\r\n                  >\r\n                    {formatNumber(painData.avg, 1)}\r\n                  </text>\r\n                )}\r\n              </g>\r\n            );\r\n          })}\r\n\r\n          {/* View Label */}\r\n          <text x=\"150\" y=\"20\" textAnchor=\"middle\" className=\"text-sm font-semibold\" fill=\"#4b5563\">\r\n            {showFront ? 'FRONT VIEW' : 'BACK VIEW'}\r\n          </text>\r\n        </svg>\r\n\r\n        {/* Hover Tooltip */}\r\n        {hoveredRegion && (\r\n          <div className=\"absolute top-8 right-8 bg-gray-900 dark:bg-gray-100 text-white px-4 py-3 rounded-lg shadow-xl pointer-events-none z-10 min-w-[200px]\">\r\n            <div className=\"font-semibold text-base mb-1\">\r\n              {BODY_REGIONS.find(r => r.id === hoveredRegion)?.name}\r\n            </div>\r\n            {mode === 'heatmap' &&\r\n              (() => {\r\n                const painData = getPainDataForRegion(hoveredRegion);\r\n                return painData.avg > 0 ? (\r\n                  <div className=\"text-sm space-y-1\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300 dark:text-gray-600\">Avg Pain:</span>\r\n                      <span className=\"font-medium\">{formatNumber(painData.avg, 1)}/10</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300 dark:text-gray-600\">Max Pain:</span>\r\n                      <span className=\"font-medium\">{painData.max}/10</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300 dark:text-gray-600\">Entries:</span>\r\n                      <span className=\"font-medium\">{painData.count}</span>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-sm text-gray-400 dark:text-gray-500\">No pain recorded</div>\r\n                );\r\n              })()}\r\n            {mode === 'selection' && (\r\n              <div className=\"text-sm text-gray-300 dark:text-gray-600\">\r\n                Click to {selectedRegions.includes(hoveredRegion) ? 'deselect' : 'select'}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Legend & Statistics */}\r\n      <div className=\"mt-6 space-y-4\">\r\n        {/* Heatmap Legend */}\r\n        {mode === 'heatmap' && (\r\n          <div className=\"bg-gradient-to-r from-green-50 via-yellow-50 to-red-50 rounded-lg p-4 border border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">\r\n                Pain Intensity Scale\r\n              </span>\r\n              <Info className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex-1\">\r\n                <div className=\"h-8 rounded-lg bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 shadow-inner\"></div>\r\n                <div className=\"flex justify-between text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                  <span>0</span>\r\n                  <span>2.5</span>\r\n                  <span>5</span>\r\n                  <span>7.5</span>\r\n                  <span>10</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-3 gap-3 mt-4 text-xs\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-3 h-3 rounded-full bg-green-400\"></div>\r\n                <span className=\"text-gray-600 dark:text-gray-400\">Mild (0-4)</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-3 h-3 rounded-full bg-yellow-400\"></div>\r\n                <span className=\"text-gray-600 dark:text-gray-400\">Moderate (4-7)</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-3 h-3 rounded-full bg-red-500\"></div>\r\n                <span className=\"text-gray-600 dark:text-gray-400\">Severe (7-10)</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Selection Mode: Selected Regions */}\r\n        {mode === 'selection' && selectedRegions.length > 0 && (\r\n          <div className=\"bg-blue-50 rounded-lg p-4 border-2 border-blue-200\">\r\n            <div className=\"text-sm font-semibold text-blue-900 mb-3\">\r\n              Selected Locations ({selectedRegions.length})\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {selectedRegions.map(regionId => {\r\n                const region = BODY_REGIONS.find(r => r.id === regionId);\r\n                const category = region?.category;\r\n                const categoryColors = {\r\n                  upper: 'bg-purple-100 text-purple-800 border-purple-300',\r\n                  core: 'bg-blue-100 text-blue-800 border-blue-300',\r\n                  lower: 'bg-green-100 text-green-800 border-green-300',\r\n                  extremities: 'bg-orange-100 text-orange-800 border-orange-300',\r\n                };\r\n\r\n                return (\r\n                  <span\r\n                    key={regionId}\r\n                    className={`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border ${categoryColors[category || 'core']}`}\r\n                  >\r\n                    {region?.name}\r\n                    <button\r\n                      onClick={() => handleRegionClick(regionId)}\r\n                      className=\"ml-2 hover:scale-125 transition-transform\"\r\n                      title=\"Remove\"\r\n                    >\r\n                      √ó\r\n                    </button>\r\n                  </span>\r\n                );\r\n              })}\r\n            </div>\r\n            <button\r\n              onClick={() => onRegionSelect?.([])}\r\n              className=\"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium\"\r\n            >\r\n              Clear All\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Statistics Panel for Heatmap */}\r\n        {mode === 'heatmap' && affectedRegionsCount > 0 && (\r\n          <div className=\"grid grid-cols-1 xs:grid-cols-3 gap-3 sm:gap-4\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 border border-gray-200 dark:border-gray-700 shadow-sm\">\r\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1\">\r\n                Affected Regions\r\n              </div>\r\n              <div className=\"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100\">\r\n                {affectedRegionsCount}\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 border border-gray-200 dark:border-gray-700 shadow-sm\">\r\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1\">\r\n                Highest Pain\r\n              </div>\r\n              <div className=\"text-xl sm:text-2xl font-bold text-red-600\">\r\n                {Math.max(...Array.from(regionPainMap.values()).map(d => d.max), 0)}/10\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 border border-gray-200 dark:border-gray-700 shadow-sm\">\r\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1\">\r\n                Avg Pain\r\n              </div>\r\n              <div className=\"text-xl sm:text-2xl font-bold text-orange-600\">\r\n                {formatNumber(\r\n                  Array.from(regionPainMap.values()).reduce((sum, d) => sum + d.avg, 0) /\r\n                    (affectedRegionsCount || 1),\r\n                  1\r\n                )}\r\n                /10\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Body Region Categories */}\r\n        <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 sm:p-4 border border-gray-200 dark:border-gray-700\">\r\n          <div className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n            Body Region Categories\r\n          </div>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3\">\r\n            {[\r\n              { name: 'Upper Body', category: 'upper', color: 'purple', icon: 'üß†' },\r\n              { name: 'Core/Torso', category: 'core', color: 'blue', icon: 'ü´Ä' },\r\n              { name: 'Lower Body', category: 'lower', color: 'green', icon: 'ü¶µ' },\r\n              { name: 'Arms/Hands', category: 'extremities', color: 'orange', icon: 'üí™' },\r\n            ].map(({ name, category, color, icon }) => {\r\n              const count =\r\n                mode === 'selection'\r\n                  ? selectedRegions.filter(\r\n                      id => BODY_REGIONS.find(r => r.id === id)?.category === category\r\n                    ).length\r\n                  : Array.from(regionPainMap.entries()).filter(\r\n                      ([id]) => BODY_REGIONS.find(r => r.id === id)?.category === category\r\n                    ).length;\r\n\r\n              const classes = CATEGORY_COLOR_CLASSES[color] || CATEGORY_COLOR_CLASSES.blue;\r\n\r\n              return (\r\n                <div\r\n                  key={category}\r\n                  className={`${classes.bg} border ${classes.border} rounded-md p-2 text-center`}\r\n                >\r\n                  <div className=\"text-xl sm:text-2xl mb-1\">{icon}</div>\r\n                  <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate\">{name}</div>\r\n                  <div className={`text-sm font-bold ${classes.text} mt-1`}>{count}</div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper function to normalize location strings to region IDs\r\nfunction normalizeLocationToRegionIds(location: string): string[] {\r\n  const lower = location.trim().toLowerCase().replace(/\\s+/g, ' ');\r\n\r\n  // Handle QuickLogStepper-style tags like \"Shoulder (L)\"\r\n  const sideMatch = lower.match(/^(.*)\\s*\\((l|r)\\)$/);\r\n  if (sideMatch) {\r\n    const base = sideMatch[1].trim();\r\n    const side = sideMatch[2];\r\n    if (base === 'shoulder') return [side === 'l' ? 'left-shoulder' : 'right-shoulder'];\r\n    if (base === 'hip') return [side === 'l' ? 'left-hip' : 'right-hip'];\r\n    if (base === 'knee') return [side === 'l' ? 'left-knee-outer' : 'right-knee-outer'];\r\n  }\r\n\r\n  // Map common location names to region IDs\r\n  const locationMap: Record<string, string> = {\r\n    head: 'head',\r\n    neck: 'neck',\r\n    shoulder: 'left-shoulder', // Default to left, could be enhanced\r\n    'left shoulder': 'left-shoulder',\r\n    'right shoulder': 'right-shoulder',\r\n    arm: 'left-upper-arm',\r\n    'left arm': 'left-upper-arm',\r\n    'right arm': 'right-upper-arm',\r\n    elbow: 'left-elbow',\r\n    'left elbow': 'left-elbow',\r\n    'right elbow': 'right-elbow',\r\n    forearm: 'left-forearm',\r\n    'left forearm': 'left-forearm',\r\n    'right forearm': 'right-forearm',\r\n    hand: 'left-hand',\r\n    'left hand': 'left-hand',\r\n    'right hand': 'right-hand',\r\n    chest: 'chest',\r\n    back: 'upper-back',\r\n    'upper back': 'upper-back',\r\n    'lower back': 'lower-back',\r\n    abdomen: 'abdomen',\r\n    stomach: 'abdomen',\r\n    hip: 'left-hip',\r\n    'left hip': 'left-hip',\r\n    'right hip': 'right-hip',\r\n    // Thigh regions (inner/outer)\r\n    thigh: 'left-thigh-outer',\r\n    'left thigh': 'left-thigh-outer',\r\n    'right thigh': 'right-thigh-outer',\r\n    'left outer thigh': 'left-thigh-outer',\r\n    'left inner thigh': 'left-thigh-inner',\r\n    'right outer thigh': 'right-thigh-outer',\r\n    'right inner thigh': 'right-thigh-inner',\r\n    'left lateral thigh': 'left-thigh-outer',\r\n    'left medial thigh': 'left-thigh-inner',\r\n    'right lateral thigh': 'right-thigh-outer',\r\n    'right medial thigh': 'right-thigh-inner',\r\n    // Knee regions (inner/outer)\r\n    knee: 'left-knee-outer',\r\n    'left knee': 'left-knee-outer',\r\n    'right knee': 'right-knee-outer',\r\n    'left outer knee': 'left-knee-outer',\r\n    'left inner knee': 'left-knee-inner',\r\n    'right outer knee': 'right-knee-outer',\r\n    'right inner knee': 'right-knee-inner',\r\n    'left lateral knee': 'left-knee-outer',\r\n    'left medial knee': 'left-knee-inner',\r\n    'right lateral knee': 'right-knee-outer',\r\n    'right medial knee': 'right-knee-inner',\r\n    // Shin regions (front view)\r\n    shin: 'left-shin-outer',\r\n    'left shin': 'left-shin-outer',\r\n    'right shin': 'right-shin-outer',\r\n    'left outer shin': 'left-shin-outer',\r\n    'left inner shin': 'left-shin-inner',\r\n    'right outer shin': 'right-shin-outer',\r\n    'right inner shin': 'right-shin-inner',\r\n    // Calf regions (back view)\r\n    leg: 'left-calf-outer',\r\n    calf: 'left-calf-outer',\r\n    'left calf': 'left-calf-outer',\r\n    'right calf': 'right-calf-outer',\r\n    'left outer calf': 'left-calf-outer',\r\n    'left inner calf': 'left-calf-inner',\r\n    'right outer calf': 'right-calf-outer',\r\n    'right inner calf': 'right-calf-inner',\r\n    // Ankle\r\n    ankle: 'left-ankle',\r\n    'left ankle': 'left-ankle',\r\n    'right ankle': 'right-ankle',\r\n    // Foot regions (medial/lateral)\r\n    foot: 'left-foot-lateral',\r\n    'left foot': 'left-foot-lateral',\r\n    'right foot': 'right-foot-lateral',\r\n    'left outer foot': 'left-foot-lateral',\r\n    'left inner foot': 'left-foot-medial',\r\n    'right outer foot': 'right-foot-lateral',\r\n    'right inner foot': 'right-foot-medial',\r\n    'left lateral foot': 'left-foot-lateral',\r\n    'left medial foot': 'left-foot-medial',\r\n    'right lateral foot': 'right-foot-lateral',\r\n    'right medial foot': 'right-foot-medial',\r\n    // Toe regions (medial/lateral halves)\r\n    toes: 'left-toes-lateral',\r\n    'left toes': 'left-toes-lateral',\r\n    'right toes': 'right-toes-lateral',\r\n    'left outer toes': 'left-toes-lateral',\r\n    'left inner toes': 'left-toes-medial',\r\n    'right outer toes': 'right-toes-lateral',\r\n    'right inner toes': 'right-toes-medial',\r\n    'left lateral toes': 'left-toes-lateral',\r\n    'left medial toes': 'left-toes-medial',\r\n    'right lateral toes': 'right-toes-lateral',\r\n    'right medial toes': 'right-toes-medial',\r\n    // Individual toe references (map to halves)\r\n    'left big toe': 'left-toes-medial',\r\n    'left great toe': 'left-toes-medial',\r\n    'left little toe': 'left-toes-lateral',\r\n    'left pinky toe': 'left-toes-lateral',\r\n    'right big toe': 'right-toes-medial',\r\n    'right great toe': 'right-toes-medial',\r\n    'right little toe': 'right-toes-lateral',\r\n    'right pinky toe': 'right-toes-lateral',\r\n  };\r\n\r\n  const direct = locationMap[lower];\r\n  if (direct) return [direct];\r\n\r\n  // Fallback: map canonical stored categories (e.g., \"shoulders\", \"hips\") to all matching regions.\r\n  // This keeps heatmap rendering consistent with the selection/list view mapping utilities.\r\n  const categoryRegionIds = locationsToRegions([lower]);\r\n  return categoryRegionIds;\r\n}\r\n\r\n"],"names":["REGION_TO_LOCATION_MAP","head","neck","chest","abdomen","BODY_REGIONS","id","name","frontPath","backPath","center","x","y","category","CATEGORY_COLOR_CLASSES","purple","bg","border","text","blue","green","orange","InteractiveBodyMap","entries","selectedRegions","onRegionSelect","mode","className","height","compact","showAccessibilityFeatures","onRequestListView","ariaLabelledBy","ariaDescribedBy","hoveredRegion","setHoveredRegion","useState","focusedRegion","setFocusedRegion","showFront","setShowFront","zoomLevel","setZoomLevel","isFullscreen","setIsFullscreen","showKeyboardHelp","setShowKeyboardHelp","svgRef","useRef","containerRef","regionPainMap","useMemo","length","Map","painMap","entry","locations","baselineData","location","regionIds","normalizeLocationToRegionIds","regionId","some","r","has","set","total","max","count","data","get","pain","Math","result","forEach","avg","handleRegionClick","useCallback","isDeselecting","includes","newSelection","filter","trackUsageEvent","region","action","totalSelected","getRegionColor","painData","intensity","getRegionOpacity","min","getPainDataForRegion","visibleRegions","handleKeyDown","e","currentIndex","findIndex","key","preventDefault","nextIndex","prevIndex","prev","ctrlKey","metaKey","selectedCount","affectedRegionsCount","size","jsxDEV","ref","cn","role","tabIndex","onKeyDown","onBlur","children","find","isSelected","getLiveAnnouncement","fileName","lineNumber","columnNumber","this","onClick","User","Eye","title","HelpCircle","ZoomOut","round","ZoomIn","RotateCcw","current","svgData","XMLSerializer","serializeToString","canvas","document","createElement","ctx","getContext","img","Image","onload","width","drawImage","pngFile","toDataURL","downloadLink","download","Date","toISOString","split","href","click","src","btoa","unescape","encodeURIComponent","Download","fullscreenElement","requestFullscreen","exitFullscreen","Maximize2","patternUnits","d","fill","stroke","strokeWidth","viewBox","style","maxHeight","maxWidth","transform","transformOrigin","rx","cx","cy","ry","opacity","map","path","isActive","onMouseEnter","onMouseLeave","textAnchor","dominantBaseline","formatNumber","Info","upper","core","lower","extremities","Array","from","values","reduce","sum","color","icon","classes","trim","toLowerCase","replace","sideMatch","match","base","side","direct","shoulder","arm","elbow","forearm","hand","back","stomach","hip","thigh","knee","shin","leg","calf","ankle","foot","toes","categoryRegionIds","regions","Object","loc","push","locationsToRegions"],"mappings":"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"}