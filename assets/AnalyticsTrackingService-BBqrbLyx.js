function e(e,t){if("undefined"!=typeof window&&"function"==typeof window.gtag)try{const n=Object.fromEntries(Object.entries(t).filter(([,e])=>void 0!==e));window.gtag?.("event",e,n)}catch(n){}}function t(t){e("crisis_detected",{severity_level:t})}function n(t){e("crisis_event",{severity:t.severity,trigger_count:t.triggerTypes.length,trigger_types:t.triggerTypes.join(","),auto_emergency_mode:t.autoActivatedEmergencyMode,duration_bucket:void 0!==t.durationSeconds?o(t.durationSeconds):void 0,resolution_method:t.resolutionMethod})}function o(e){return e<60?"brief":e<300?"short":e<900?"moderate":"extended"}function i(){e("session_start",{platform:r(),is_pwa:d()})}function r(){if("undefined"==typeof navigator)return"unknown";const e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":/windows/.test(e)?"windows":/mac/.test(e)?"mac":"other"}function d(){if("undefined"==typeof window)return!1;const e=window.navigator,t="object"==typeof e&&null!==e&&"standalone"in e?e.standalone:void 0;return window.matchMedia("(display-mode: standalone)").matches||!0===t}export{t as trackCrisisDetected,n as trackCrisisEvent,i as trackSessionStart};
