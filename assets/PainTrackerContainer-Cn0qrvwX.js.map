{"version":3,"mappings":"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","names":["quickLogCopy","painSliderLabel","base","states","flare","medical","plain","withTerms","painSliderHint","locationsLabel","stable","locationsHint","bodyMapToggle","notesLabel","warmth","neutral","warm","notesPlaceholder","continueButton","saveButton","keyboardHint","panicModeCopy","inhale","hold","exhale","pause","srText","emptyStates","headline","subtext","cta","secondaryCta","DEFAULT_AFFIRMATIONS","BREATHING_PATTERN","PanicMode","isActive","onClose","affirmations","showRedactionToggle","breathingPhase","setBreathingPhase","useState","currentAffirmation","setCurrentAffirmation","isRedacted","setIsRedacted","cycleCount","setCycleCount","activationTime","Date","now","trackTimeToCalm","useTone","greetingText","useAdaptiveCopy","crisisPromptText","crisisHotlineText","closeButtonText","inhaleText","holdText","exhaleText","pauseText","handleClose","timeElapsed","triggerHaptic","pattern","navigator","patterns","light","medium","heavy","vibrate","useEffect","phases","phase","duration","currentPhaseIndex","advancePhase","length","prev","setTimeout","timer","clearTimeout","interval","setInterval","clearInterval","getBreathingInstruction","jsxDEV","className","role","children","onClick","cn","X","fileName","lineNumber","columnNumber","this","id","getBreathingScale","Heart","href","detectCrisis","entries","opts","lookbackDays","thresholdRatio","minAbsoluteIncrease","detected","baseline","lastValue","windowStart","values","filter","e","timestamp","getTime","map","intensity","source","reduce","a","b","computeBaseline","lastEntry","diff","Math","round","Number","EPSILON","ratio","CrisisModal","isOpen","Button","variant","window","open","CrisisBanner","usePainTrackerStore","state","enabled","s","crisisDetectionEnabled","show","setShow","modalOpen","setModalOpen","showWhy","setShowWhy","crisisConfig","useMemo","lastResult","setLastResult","res","trackCrisisDetected","_","hipaaComplianceService","logAuditEvent","actionType","userId","userRole","resourceType","resourceId","outcome","details","catch","Fragment","v","ModernAppLayout","onNavigate","currentView","stats","sidebarOpen","setSidebarOpen","panicModeActive","setPanicModeActive","mode","setMode","useTheme","navigation","name","icon","LayoutDashboard","badge","color","Plus","History","User","TrendingUp","Calendar","FileText","bottomNavigation","Settings","HelpCircle","Menu","type","title","style","background","boxShadow","Activity","border","avgPain","toFixed","Sparkles","streak","size","Bell","Sun","Moon","Shield","item","Icon","colorMap","sky","bg","text","glow","emerald","violet","rose","amber","cyan","indigo","colors","onMouseEnter","currentTarget","borderColor","onMouseLeave","ChevronRight","borderTop","Zap","tabIndex","Wind","MetricCard","value","tooltip","delta","sparkline","severity","unit","compact","direction","TrendingDown","Minus","getDeltaIcon","label","width","height","viewBox","preserveAspectRatio","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","val","i","x","max","min","join","backgroundColor","level","InsightChip","statement","confidence","rationale","onDismiss","showPopover","setShowPopover","getConfidenceDots","Array","from","Info","RecommendedActions","onLogNow","onViewCalendar","onViewAnalytics","onExport","actions","recommendations","latest","hoursSinceLastEntry","Infinity","push","priority","subtitle","floor","action","estimatedTime","last7Days","recentEntries","painValues","baselineData","pain","mean","sum","p","variance","pow","sqrt","Lightbulb","primaryAction","find","secondaryActions","tertiaryActions","Clock","ClinicalDashboard","onOpenSettings","onOpenHelp","analytics","daysTracked","variability","entriesThisWeek","topLocations","topSymptoms","insights","sorted","sort","sevenDaysAgo","recent","previous","date","prevAvgPain","slice","uniqueDays","Set","toDateString","abs","entry","locationCount","isArray","locations","symptomCount","symptoms","locationCounts","Map","symptomCounts","location","set","get","symptom","count","backgroundImage","opacity","toLocaleDateString","weekday","month","day","hours","days","getTimeSinceLastEntry","when","toLocaleString","hour","minute","String","insight","parseFreeformList","normalized","split","trim","Boolean","seen","result","key","toLowerCase","has","add","PAIN_LABELS","LOCATION_TAGS","SYMPTOM_TAGS","QuickLogOneScreen","initialData","onComplete","onCancel","setPain","setLocations","setSymptoms","notes","setNotes","voiceMode","setVoiceMode","sleep","setSleep","sleepSet","setSleepSet","activityLevel","setActivityLevel","activityLevelSet","setActivityLevelSet","medicationAdherence","setMedicationAdherence","activitiesText","setActivitiesText","dietTriggersText","setDietTriggersText","activities","triggers","painLabel","painHint","saveBtn","isSupported","voiceSupported","isListening","transcript","startListening","stopListening","resetTranscript","voiceError","clearVoiceError","setIsSupported","setIsListening","setTranscript","setVoiceError","recognitionRef","useRef","lastTranscriptRef","speechWindow","SpeechRecognitionCtor","webkitSpeechRecognition","SpeechRecognition","recognition","continuous","interimResults","onresult","event","resultsArray","results","finalResults","isFinal","combinedTranscript","r","current","onerror","friendlyMessage","error","network","onend","stop","useCallback","start","useQuickVoiceNotes","audioRecorder","isRecording","setIsRecording","audioUrl","setAudioUrl","audioBlob","setAudioBlob","setError","recorderRef","chunksRef","supported","mediaDevices","getUserMedia","MediaRecorder","URL","revokeObjectURL","async","stream","audio","recorder","ondataavailable","data","onstop","getTracks","forEach","t","blob","Blob","mimeType","createObjectURL","err","clear","useAudioNoteRecorder","toggleTag","tag","list","setter","includes","handlePainChange","connectionStatus","onLine","saveDisabledReason","handleSave","ChevronLeft","Mic","MicOff","disabled","htmlFor","onChange","target","onKeyDown","preventDefault","Check","step","placeholder","inputMode","autoComplete","autoCorrect","autoCapitalize","enterKeyHint","maxLength","controls","src","download","toISOString","replace","WEATHER_CODE_MAP","condition","isRaining","fetchWeatherData","lat","lon","url","resp","fetch","ok","json","weatherCode","weather_code","code","temperature","temperature_2m","pressure","pressure_msl","humidity","relative_humidity_2m","PRIVACY_SETTINGS_STORAGE_KEY","DEFAULT_PRIVACY_SETTINGS","dataSharing","analyticsConsent","retentionDays","weatherAutoCapture","readPrivacySettings","raw","secureStorage","safeJSON","retentionCandidate","isFinite","writePrivacySettings","updates","maybeCaptureWeatherForNewEntry","geolocation","pos","Promise","resolve","reject","getCurrentPosition","timeout","weather","coords","latitude","longitude","summary","parts","formatWeatherSummaryForEntry","NoDataIllustration","xmlns","cx","cy","y","rx","transform","d","x1","y1","x2","y2","TrackingIllustration","row","col","isHighlighted","strokeDasharray","EmptyState","description","secondaryAction","illustration","EmptyStatePanel","onStartWalkthrough","loadSampleData","loadChronicPainTestData","noLogsHeadline","noLogsSubtext","noLogsCTA","secondaryCTA","Card","hover","padding","CardContent","PlayCircle","leftIcon","Database","PainTrackerIcon","brand","primary","secondary","accent","BrandedLoadingScreen","message","progress","showProgress","animatedProgress","setAnimatedProgress","document","styleSheet","createElement","textContent","head","appendChild","PremiumAnalyticsDashboard","lazy","import","__VITE_PRELOAD__","then","default","m","CalendarView","BodyMapPage","FibromyalgiaTracker","DailyCheckin","SettingsPage","__vitePreload","HelpAndSupportPage","ReportsPage","HistoryPage","OnboardingFlow","Walkthrough","initialView","ui","addEntry","setShowOnboarding","setShowWalkthrough","updateEntry","toast","useToast","walkthroughSteps","setWalkthroughSteps","setCurrentView","editingEntryId","setEditingEntryId","isMounted","steps","hasSeenOnboarding","hasEntries","handleStartWalkthrough","defaultPrevented","metaKey","ctrlKey","altKey","HTMLElement","isContentEditable","tagName","isEditableTarget","addEventListener","removeEventListener","handleAddEntry","entryData","options","qualityOfLife","sleepQuality","moodImpact","validatePainEntry","storeApi","beforeCount","getState","created","captured","success","stayOnSave","totalEntries","ViewLoadingFallback","entryToAdd","functionalImpact","limitedActivities","assistanceNeeded","mobilityAids","medications","changes","effectiveness","treatments","planned","socialImpact","workImpact","missedWork","modifiedDuties","workLimitations","comparison","worseningSince","newLimitations","Suspense","fallback","onEditEntry","onDone","showOnboarding","setupWithSampleData","info","onSkip","showWalkthrough"],"ignoreList":[],"sources":["../../src/content/microcopy.ts","../../src/components/accessibility/PanicMode.tsx","../../src/utils/pain-tracker/crisis.ts","../../src/components/crisis/CrisisModal.tsx","../../src/components/crisis/CrisisBanner.tsx","../../src/components/layouts/ModernAppLayout.tsx","../../src/design-system/fused-v2/MetricCard.tsx","../../src/design-system/fused-v2/InsightChip.tsx","../../src/design-system/fused-v2/RecommendedActions.tsx","../../src/design-system/fused-v2/ClinicalDashboard.tsx","../../src/utils/parseFreeformList.ts","../../src/design-system/fused-v2/QuickLogOneScreen.tsx","../../src/services/weather.js","../../src/utils/privacySettings.ts","../../src/services/weatherAutoCapture.ts","../../src/components/empty-state/NoDataIllustration.tsx","../../src/components/empty-state/EmptyState.tsx","../../src/components/widgets/EmptyStatePanel.tsx","../../src/components/branding/BrandedLogo.tsx","../../src/components/branding/BrandedLoadingScreen.tsx","../../src/containers/PainTrackerContainer.tsx"],"sourcesContent":["/**\r\n * @fileoverview Comprehensive Microcopy Dictionary\r\n *\r\n * All user-facing copy with adaptive variations for patient state,\r\n * warmth level, and medical terminology preferences.\r\n *\r\n * Voice Pillars:\r\n * 1. Calm, competent, human\r\n * 2. Actionable empathy\r\n * 3. Empowering evidence\r\n * 4. Plain language, precise edges\r\n */\r\n\r\nimport type { AdaptiveCopy, ReflectionPrompt } from '../types/tone';\r\n\r\n/**\r\n * HOME / DASHBOARD\r\n */\r\nexport const homeCopy = {\r\n  /** Quick log CTA */\r\n  quickLogCTA: {\r\n    base: 'Log pain (quick)',\r\n    states: {\r\n      stable: 'Log pain (quick)',\r\n      rising: 'Check in (quick)',\r\n      flare: 'Log pain',\r\n      recovery: 'Check in (quick)',\r\n    },\r\n    mobile: 'Log pain',\r\n  } as AdaptiveCopy,\r\n\r\n  /** After log confirmation */\r\n  logConfirmation: {\r\n    base: \"Saved. I'll watch the trendyou can carry on.\",\r\n    states: {\r\n      stable: \"Saved. I'll watch the trend.\",\r\n      rising: \"Saved. I'll watch the pattern.\",\r\n      flare: \"Saved. You're safe here.\",\r\n      recovery: \"Saved. You're tracking well.\",\r\n    },\r\n    warmth: {\r\n      neutral: 'Saved. Tracking your pattern.',\r\n      warm: \"Saved. I'll watch the trendyou can carry on.\",\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Panic mode CTA */\r\n  panicModeCTA: {\r\n    base: 'Need a moment? Breathing guide',\r\n    states: {\r\n      stable: 'Calm breathing',\r\n      rising: 'Need a moment?',\r\n      flare: 'Breathe with me',\r\n      recovery: 'Calm breathing',\r\n    },\r\n    srText: 'Activate calm breathing mode',\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * QUICK LOG STEPPER\r\n */\r\nexport const quickLogCopy = {\r\n  /** Step 1: Pain slider */\r\n  painSliderLabel: {\r\n    base: 'Pain intensity (010)',\r\n    states: {\r\n      flare: 'Pain level',\r\n    },\r\n    medical: {\r\n      plain: 'Pain intensity',\r\n      withTerms: 'Pain intensity (numeric rating scale)',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  painSliderHint: {\r\n    base: 'Use slider or enter number directly',\r\n    states: {\r\n      flare: 'Pick your number',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Step 2: Locations */\r\n  locationsLabel: {\r\n    base: 'Where does it hurt?',\r\n    states: {\r\n      stable: 'Affected areas',\r\n      flare: 'Location',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  locationsHint: {\r\n    base: 'Choose all that apply',\r\n    states: {\r\n      flare: 'Tap all areas',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  bodyMapToggle: {\r\n    base: 'Or choose from a list',\r\n    states: {\r\n      flare: 'Use list instead',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Step 3: Notes */\r\n  notesLabel: {\r\n    base: 'Anything worth noting?',\r\n    states: {\r\n      stable: 'Notes (optional)',\r\n      flare: 'Notes',\r\n    },\r\n    warmth: {\r\n      neutral: 'Additional notes',\r\n      warm: 'Anything worth noting?',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  notesPlaceholder: {\r\n    base: 'What triggered it? What helped?',\r\n    states: {\r\n      stable: 'Triggers, relief strategies, context...',\r\n      flare: 'What happened?',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Navigation */\r\n  continueButton: {\r\n    base: 'Continue',\r\n    states: {\r\n      flare: 'Next',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  saveButton: {\r\n    base: 'Save entry',\r\n    states: {\r\n      stable: 'Save and finish',\r\n      flare: 'Save',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  keyboardHint: {\r\n    base: 'Press Enter to continue',\r\n    states: {\r\n      flare: 'Enter = next',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * PANIC MODE\r\n */\r\nexport const panicModeCopy = {\r\n  /** Entry */\r\n  greeting: {\r\n    base: \"You're safe. We'll go step by step.\",\r\n    warmth: {\r\n      neutral: 'Flare mode. Follow the guide.',\r\n      warm: \"You're safe. We'll go step by step.\",\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Breathing instructions */\r\n  breathingPhases: {\r\n    inhale: {\r\n      base: 'Inhale 4',\r\n      states: {\r\n        flare: 'In 4',\r\n      },\r\n    },\r\n    hold: {\r\n      base: 'Hold 4',\r\n      states: {\r\n        flare: 'Hold 4',\r\n      },\r\n    },\r\n    exhale: {\r\n      base: 'Exhale 6',\r\n      states: {\r\n        flare: 'Out 6',\r\n      },\r\n    },\r\n    pause: {\r\n      base: 'Pause 2',\r\n      states: {\r\n        flare: 'Rest 2',\r\n      },\r\n    },\r\n  },\r\n\r\n  /** Affirmations (rotate) */\r\n  affirmations: [\r\n    'This will pass.',\r\n    \"You've managed this before.\",\r\n    'One breath at a time.',\r\n    \"You're doing what helps.\",\r\n    'Your body is working to calm.',\r\n    'This is temporary.',\r\n    \"You're safe right now.\",\r\n    'Each breath helps.',\r\n  ],\r\n\r\n  /** Crisis resources */\r\n  crisisPrompt: {\r\n    base: 'Need immediate support?',\r\n    states: {\r\n      flare: 'Need help now?',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  crisisHotline: {\r\n    base: '988 Suicide & Crisis Lifeline',\r\n    srText: 'Call 988 for immediate crisis support',\r\n  } as AdaptiveCopy,\r\n\r\n  /** Close */\r\n  closeButton: {\r\n    base: \"I'm feeling better\",\r\n    states: {\r\n      flare: 'Done',\r\n    },\r\n    warmth: {\r\n      neutral: 'Exit',\r\n      warm: \"I'm feeling better\",\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  cycleCounter: {\r\n    base: (count: number) => `${count} breathing round${count !== 1 ? 's' : ''} complete`,\r\n    states: {\r\n      flare: (count: number) => `${count} done`,\r\n    },\r\n  },\r\n};\r\n\r\n/**\r\n * ANALYTICS / INSIGHTS\r\n */\r\nexport const analyticsCopy = {\r\n  /** Progress summary */\r\n  progressSummary: (avgPrev: number, avgCurr: number, days: number) =>\r\n    ({\r\n      base: `Last ${days} days: average pain ${avgPrev.toFixed(1)}  ${avgCurr.toFixed(1)}.`,\r\n      states: {\r\n        stable: `${days}-day average: ${avgPrev.toFixed(1)}  ${avgCurr.toFixed(1)}`,\r\n      },\r\n      medical: {\r\n        plain: `Average pain: ${avgPrev.toFixed(1)}  ${avgCurr.toFixed(1)} (${days} days)`,\r\n        withTerms: `Mean pain intensity: ${avgPrev.toFixed(1)}  ${avgCurr.toFixed(1)} (${days}-day trend)`,\r\n      },\r\n    }) as AdaptiveCopy,\r\n\r\n  /** Likely factors */\r\n  factorsHeading: {\r\n    base: 'Likely contributors:',\r\n    states: {\r\n      stable: 'Patterns noticed:',\r\n    },\r\n    medical: {\r\n      plain: 'Likely contributors',\r\n      withTerms: 'Contributing factors (observational)',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Confidence badge */\r\n  confidence: {\r\n    high: 'high confidence',\r\n    medium: 'moderate confidence',\r\n    low: 'early pattern',\r\n  },\r\n\r\n  /** Suggested action */\r\n  suggestedActionPrefix: {\r\n    base: 'Worth trying:',\r\n    states: {\r\n      stable: 'Next step:',\r\n      rising: 'Consider:',\r\n    },\r\n    warmth: {\r\n      neutral: 'Suggested action:',\r\n      warm: 'Worth trying:',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Chart toggle */\r\n  chartToggle: {\r\n    base: 'View as table',\r\n    states: {\r\n      stable: 'Switch to data table',\r\n    },\r\n    srText: 'Toggle between chart and accessible data table',\r\n  } as AdaptiveCopy,\r\n\r\n  tableToggle: {\r\n    base: 'View as chart',\r\n    states: {\r\n      stable: 'Switch to visual chart',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * EMPTY STATES\r\n */\r\nexport const emptyStates = {\r\n  /** No pain logs yet */\r\n  noLogs: {\r\n    headline: { base: 'Two days of logs unlock patterns.' } as AdaptiveCopy,\r\n    subtext: { base: 'Start with today10 seconds.' } as AdaptiveCopy,\r\n    cta: { base: 'Log first entry' } as AdaptiveCopy,\r\n    secondaryCta: { base: 'Learn how tracking helps' } as AdaptiveCopy,\r\n  },\r\n\r\n  /** No trends yet */\r\n  noTrends: {\r\n    headline: { base: 'Not enough data for trends yet.' } as AdaptiveCopy,\r\n    subtext: { base: 'Three entries will show your first pattern.' } as AdaptiveCopy,\r\n    cta: { base: 'Add another log' } as AdaptiveCopy,\r\n  },\r\n\r\n  /** No reflections */\r\n  noReflections: {\r\n    headline: { base: 'Reflections help spot what works.' } as AdaptiveCopy,\r\n    subtext: { base: 'Name one thing that helped, even a small one.' } as AdaptiveCopy,\r\n    cta: { base: 'Start first reflection' } as AdaptiveCopy,\r\n  },\r\n\r\n  /** No messages */\r\n  noMessages: {\r\n    headline: { base: 'No messages yet.' } as AdaptiveCopy,\r\n    subtext: { base: 'You can share a 7-day summary anytime.' } as AdaptiveCopy,\r\n    cta: { base: 'Compose message' } as AdaptiveCopy,\r\n  },\r\n};\r\n\r\n/**\r\n * DAILY REFLECTION (MMP-style)\r\n */\r\nexport const reflectionCopy = {\r\n  /** Prompt */\r\n  prompt: {\r\n    question: 'Name one thing that helped today.',\r\n    suggestions: [\r\n      'warm shower',\r\n      'paced tasks',\r\n      'called a friend',\r\n      'rested early',\r\n      'gentle walk',\r\n      'breathing break',\r\n      'distraction',\r\n      'medication',\r\n    ],\r\n    acknowledgment: \"Noted. We'll look for patterns that repeat.\",\r\n    followUp: \"Tomorrow, we'll check if this helps again.\",\r\n  } as ReflectionPrompt,\r\n\r\n  /** Flare reflection */\r\n  flarePrompt: {\r\n    question: 'What eased the flare (even a little)?',\r\n    suggestions: [\r\n      'breathing',\r\n      'pacing',\r\n      'medication',\r\n      'heat',\r\n      'cold',\r\n      'rest',\r\n      'distraction',\r\n      'position change',\r\n    ],\r\n    acknowledgment: 'Flare eased. Noted.',\r\n  } as ReflectionPrompt,\r\n};\r\n\r\n/**\r\n * EDUCATION / COACH\r\n */\r\nexport const educationCopy = {\r\n  /** Pacing module */\r\n  pacing: {\r\n    title: \"Pacing: why 'just enough' beats 'all or nothing'\",\r\n    lead: 'Pushing through often triggers flares. Stopping at 80% lets you sustain activity longer.',\r\n    action: \"Try 'stop at 80%' for three days. I'll ask how it went.\",\r\n    cta: 'Start pacing trial',\r\n  },\r\n\r\n  /** Sleep module */\r\n  sleep: {\r\n    title: 'Sleep and pain: the feedback loop',\r\n    lead: 'After <6h sleep, pain tends to rise +1.2 next day (high confidence in your data).',\r\n    action: 'Try moving bedtime 15 minutes earlier.',\r\n    cta: 'Set sleep goal',\r\n  },\r\n\r\n  /** Breathing module */\r\n  breathing: {\r\n    title: 'Breathwork for pain: 4-4-6-2 pattern',\r\n    lead: 'Extended exhale activates your calming system. Three rounds can reduce pain spikes.',\r\n    action: 'Try 3-minute breathwork during prodromes.',\r\n    cta: 'Practice now',\r\n  },\r\n};\r\n\r\n/**\r\n * NOTIFICATIONS\r\n */\r\nexport const notificationCopy = {\r\n  /** Log reminder */\r\n  logReminder: {\r\n    base: 'Time to log? Takes 10 seconds.',\r\n    states: {\r\n      stable: 'Quick check-in?',\r\n      rising: 'Check in on your pain?',\r\n    },\r\n    warmth: {\r\n      neutral: 'Daily log available',\r\n      warm: 'Time to log? Takes 10 seconds.',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Insight ready */\r\n  insightReady: {\r\n    base: 'New pattern spotted in your data.',\r\n    states: {\r\n      stable: 'Insight ready: 14-day trend',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Message reply */\r\n  messageReply: {\r\n    base: 'Provider replied to your message.',\r\n    states: {\r\n      stable: 'New message from your care team',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * ERRORS (non-blocking, reassuring)\r\n */\r\nexport const errorCopy = {\r\n  /** Sync failed */\r\n  syncFailed: {\r\n    base: \"Didn't send yet. Your log is safe hereretry.\",\r\n    states: {\r\n      flare: 'Not sent. Data safe. Retry?',\r\n    },\r\n    warmth: {\r\n      neutral: 'Sync failed. Data saved locally. Retry available.',\r\n      warm: \"Didn't send yet. Your log is safe hereretry.\",\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Export failed */\r\n  exportFailed: {\r\n    base: \"Export didn't complete. Try again?\",\r\n    states: {\r\n      stable: 'Export error. Your data is safe. Retry?',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Generic error */\r\n  genericError: {\r\n    base: 'Something went wrong. Your data is safe.',\r\n    states: {\r\n      flare: 'Error. Data safe.',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Retry button */\r\n  retryButton: {\r\n    base: 'Retry',\r\n    states: {\r\n      flare: 'Try again',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * OFFLINE\r\n */\r\nexport const offlineCopy = {\r\n  /** Offline banner */\r\n  offlineBanner: {\r\n    base: 'Offline. Logs saved on your device.',\r\n    states: {\r\n      stable: 'Working offlineeverything saved locally',\r\n      flare: 'Offline mode. Data safe.',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Sync pending */\r\n  syncPending: {\r\n    base: \"I'll sync when you're back online.\",\r\n    states: {\r\n      stable: 'Will sync when connection returns',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * EXPORT / SHARE\r\n */\r\nexport const exportCopy = {\r\n  /** Preview prompt */\r\n  previewPrompt: {\r\n    base: \"Preview what's shared. You're in control.\",\r\n    states: {\r\n      stable: 'Review before sharing',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** Clinician summary intro */\r\n  clinicianSummaryIntro: {\r\n    base: 'Ready to share with your clinician?',\r\n    states: {\r\n      stable: 'Share 7-day summary with provider?',\r\n    },\r\n    warmth: {\r\n      neutral: 'Clinical summary ready for export',\r\n      warm: 'Ready to share with your clinician?',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** PDF export */\r\n  pdfExportCTA: {\r\n    base: 'Download PDF',\r\n    states: {\r\n      stable: 'Export as PDF',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  /** WorkSafe BC export */\r\n  wcbExportCTA: {\r\n    base: 'Export for WorkSafe BC',\r\n    states: {\r\n      stable: 'Generate WCB report',\r\n    },\r\n    medical: {\r\n      plain: 'WorkSafe BC report',\r\n      withTerms: 'WorkSafe BC claim documentation',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * SETTINGS / PREFERENCES\r\n */\r\nexport const settingsCopy = {\r\n  /** Tone warmth */\r\n  toneWarmthLabel: {\r\n    base: 'Tone warmth',\r\n    medical: {\r\n      plain: 'App tone',\r\n      withTerms: 'Communication style preference',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  toneWarmthOptions: {\r\n    neutral: 'Neutral (direct and brief)',\r\n    warm: 'Warm (encouraging and personal)',\r\n  },\r\n\r\n  /** Coach intensity */\r\n  coachIntensityLabel: {\r\n    base: 'Coaching prompts',\r\n  } as AdaptiveCopy,\r\n\r\n  coachIntensityOptions: {\r\n    minimal: 'Minimal (only when I ask)',\r\n    guided: 'Guided (suggest next steps)',\r\n  },\r\n\r\n  /** Lightness */\r\n  lightnessLabel: {\r\n    base: 'Allow light tone in stable states',\r\n  } as AdaptiveCopy,\r\n\r\n  lightnessHint: {\r\n    base: 'Pop-culture GIFs, casual language (never during flares)',\r\n  } as AdaptiveCopy,\r\n\r\n  /** Medical terms */\r\n  medicalTermsLabel: {\r\n    base: 'Medical terminology',\r\n  } as AdaptiveCopy,\r\n\r\n  medicalTermsHint: {\r\n    base: 'Include clinical terms with plain-language definitions',\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * CLINICIAN-FACING COPY\r\n */\r\nexport const clinicianCopy = {\r\n  /** Patient summary (concise) */\r\n  summaryTemplate: (data: {\r\n    days: number;\r\n    painAvg: number;\r\n    painChange: number;\r\n    variability: 'low' | 'medium' | 'high';\r\n    flareCount: number;\r\n    sleepChange?: number;\r\n    adherence: number;\r\n    adherenceChange: number;\r\n    newSymptoms?: string[];\r\n  }) => {\r\n    const variabilitySymbol =\r\n      data.variability === 'low' ? '' : data.variability === 'high' ? '' : '';\r\n    const painChangeSymbol = data.painChange > 0 ? '' : data.painChange < 0 ? '' : '';\r\n\r\n    let summary = `${data.days}-day: pain avg ${data.painAvg.toFixed(1)} (${painChangeSymbol}${Math.abs(data.painChange).toFixed(1)}), `;\r\n    summary += `variability ${variabilitySymbol}, `;\r\n    summary += `flares ${data.flareCount}. `;\r\n\r\n    if (data.sleepChange) {\r\n      summary += `Sleep ${data.sleepChange > 0 ? '+' : ''}${Math.round(data.sleepChange)}m. `;\r\n    }\r\n\r\n    summary += `Adherence ${data.adherence}% (${data.adherenceChange > 0 ? '+' : ''}${data.adherenceChange}%). `;\r\n\r\n    if (data.newSymptoms && data.newSymptoms.length > 0) {\r\n      summary += `New: ${data.newSymptoms.join(', ')}.`;\r\n    }\r\n\r\n    return summary;\r\n  },\r\n\r\n  /** Smart-insert note (EHR-safe) */\r\n  smartInsertTemplate: (data: {\r\n    days: number;\r\n    painAvg: number;\r\n    painChange: number;\r\n    variability: string;\r\n    flareCount: number;\r\n    contributors?: string[];\r\n    plan?: string;\r\n  }) => {\r\n    let note = `Patient-reported outcomes (${data.days}d): `;\r\n    note += `Pain ${data.painAvg.toFixed(1)} avg (${data.painChange > 0 ? '' : ''}${Math.abs(data.painChange).toFixed(1)}); `;\r\n    note += `variability ${data.variability}. `;\r\n    note += `${data.flareCount} flare${data.flareCount !== 1 ? 's' : ''}`;\r\n\r\n    if (data.contributors && data.contributors.length > 0) {\r\n      note += `. Likely contributors: ${data.contributors.join(', ')}`;\r\n    }\r\n\r\n    if (data.plan) {\r\n      note += `. Plan: ${data.plan}`;\r\n    }\r\n\r\n    note += '.';\r\n\r\n    return note;\r\n  },\r\n\r\n  /** Orders/Plan */\r\n  planTemplates: {\r\n    pacing: 'Pacing template A applied. Review in 2 weeks.',\r\n    breathing: 'Breathwork trial: 3-min sessions during prodromes. Monitor effectiveness.',\r\n    sleep: 'Sleep hygiene intervention. Target: +30m/night. Reassess 14d.',\r\n  },\r\n};\r\n\r\n/**\r\n * ACCESSIBILITY\r\n */\r\nexport const a11yCopy = {\r\n  /** Skip link */\r\n  skipToMain: {\r\n    base: 'Skip to main content',\r\n  } as AdaptiveCopy,\r\n\r\n  /** Screen reader helpers */\r\n  loadingStatus: {\r\n    base: 'Loading your data...',\r\n    states: {\r\n      flare: 'Loading...',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  savingStatus: {\r\n    base: 'Saving entry...',\r\n    states: {\r\n      flare: 'Saving...',\r\n    },\r\n  } as AdaptiveCopy,\r\n\r\n  savedStatus: {\r\n    base: 'Entry saved successfully',\r\n    states: {\r\n      flare: 'Saved',\r\n    },\r\n  } as AdaptiveCopy,\r\n};\r\n\r\n/**\r\n * MEASUREMENTS (for A/B testing)\r\n */\r\nexport const measurementCopy = {\r\n  /** Test variations */\r\n  reflectionVariants: {\r\n    control: 'What helped today?',\r\n    variant: 'One thing worth keeping?',\r\n  },\r\n\r\n  insightFramingVariants: {\r\n    control: 'Likely contributors:',\r\n    variant: 'Patterns we noticed:',\r\n  },\r\n\r\n  nudgeTimingVariants: {\r\n    control: '5pm reminder',\r\n    variant: '3 hours since last activity',\r\n  },\r\n};\r\n","import React, { useEffect, useState } from 'react';\nimport { X, Heart } from 'lucide-react';\nimport { cn } from '../../design-system/utils';\nimport { useAdaptiveCopy, useTone } from '../../contexts/useTone';\nimport { panicModeCopy } from '../../content/microcopy';\n\n/**\n * Panic Mode Component - Trauma-Informed Crisis Support\n *\n * WCAG 2.2 AAA: Provides low-stimulus, calming interface during pain flares or emotional crises\n * Target: <2 second activation time from anywhere in app\n *\n * Features:\n * - Breathing guide with visual pulse\n * - Haptic feedback (if supported)\n * - Gentle language and affirmations\n * - Low-contrast, calm color palette\n * - Large tap targets (56px)\n * - Option to redact/hide sensitive data\n * - Quick exit to safety resources\n */\n\nexport interface PanicModeProps {\n  /** Whether Panic Mode is active */\n  isActive: boolean;\n  /** Callback when user closes Panic Mode */\n  onClose: () => void;\n  /** Optional custom affirmations */\n  affirmations?: string[];\n  /** Show redaction toggle for privacy */\n  showRedactionToggle?: boolean;\n}\n\n// Use affirmations from microcopy instead of hardcoded\nconst DEFAULT_AFFIRMATIONS = panicModeCopy.affirmations;\n\nconst BREATHING_PATTERN = {\n  inhale: 4000, // 4 seconds\n  hold: 4000, // 4 seconds\n  exhale: 6000, // 6 seconds\n  pause: 2000, // 2 seconds\n};\n\nexport function PanicMode({\n  isActive,\n  onClose,\n  affirmations = DEFAULT_AFFIRMATIONS,\n  showRedactionToggle = false,\n}: PanicModeProps) {\n  const [breathingPhase, setBreathingPhase] = useState<'inhale' | 'hold' | 'exhale' | 'pause'>(\n    'inhale'\n  );\n  const [currentAffirmation, setCurrentAffirmation] = useState(0);\n  const [isRedacted, setIsRedacted] = useState(false);\n  const [cycleCount, setCycleCount] = useState(0);\n  const [activationTime] = useState(Date.now());\n\n  // Adaptive copy\n  const { trackTimeToCalm } = useTone();\n  const greetingText = useAdaptiveCopy(panicModeCopy.greeting);\n  const crisisPromptText = useAdaptiveCopy(panicModeCopy.crisisPrompt);\n  const crisisHotlineText = useAdaptiveCopy(panicModeCopy.crisisHotline);\n  const closeButtonText = useAdaptiveCopy(panicModeCopy.closeButton);\n  const inhaleText = useAdaptiveCopy(panicModeCopy.breathingPhases.inhale);\n  const holdText = useAdaptiveCopy(panicModeCopy.breathingPhases.hold);\n  const exhaleText = useAdaptiveCopy(panicModeCopy.breathingPhases.exhale);\n  const pauseText = useAdaptiveCopy(panicModeCopy.breathingPhases.pause);\n\n  // Add close handler that tracks time to calm\n  const handleClose = () => {\n    const timeElapsed = (Date.now() - activationTime) / 1000; // seconds\n    trackTimeToCalm(timeElapsed);\n    onClose();\n  };\n\n  // Haptic feedback helper (if browser supports it)\n  const triggerHaptic = (pattern: 'light' | 'medium' | 'heavy') => {\n    if ('vibrate' in navigator) {\n      const patterns = {\n        light: [10],\n        medium: [20],\n        heavy: [30, 10, 30],\n      };\n      navigator.vibrate(patterns[pattern]);\n    }\n  };\n\n  // Breathing cycle management\n  useEffect(() => {\n    if (!isActive) return;\n\n    const phases: Array<{ phase: typeof breathingPhase; duration: number }> = [\n      { phase: 'inhale', duration: BREATHING_PATTERN.inhale },\n      { phase: 'hold', duration: BREATHING_PATTERN.hold },\n      { phase: 'exhale', duration: BREATHING_PATTERN.exhale },\n      { phase: 'pause', duration: BREATHING_PATTERN.pause },\n    ];\n\n    let currentPhaseIndex = 0;\n\n    const advancePhase = () => {\n      currentPhaseIndex = (currentPhaseIndex + 1) % phases.length;\n      const { phase, duration } = phases[currentPhaseIndex];\n\n      setBreathingPhase(phase);\n\n      // Haptic feedback on phase change\n      if (phase === 'inhale') {\n        triggerHaptic('light');\n        setCycleCount(prev => prev + 1);\n      } else if (phase === 'exhale') {\n        triggerHaptic('medium');\n      }\n\n      return setTimeout(advancePhase, duration);\n    };\n\n    const timer = setTimeout(advancePhase, phases[0].duration);\n\n    return () => clearTimeout(timer);\n  }, [isActive, breathingPhase]);\n\n  // Rotate affirmations every 10 seconds\n  useEffect(() => {\n    if (!isActive) return;\n\n    const interval = setInterval(() => {\n      setCurrentAffirmation(prev => (prev + 1) % affirmations.length);\n    }, 10000);\n\n    return () => clearInterval(interval);\n  }, [isActive, affirmations.length]);\n\n  // Reset state when activated\n  useEffect(() => {\n    if (isActive) {\n      setBreathingPhase('inhale');\n      setCurrentAffirmation(0);\n      setCycleCount(0);\n      triggerHaptic('heavy');\n    }\n  }, [isActive]);\n\n  if (!isActive) return null;\n\n  const getBreathingInstruction = () => {\n    switch (breathingPhase) {\n      case 'inhale':\n        return inhaleText;\n      case 'hold':\n        return holdText;\n      case 'exhale':\n        return exhaleText;\n      case 'pause':\n        return pauseText;\n    }\n  };\n\n  const getBreathingScale = () => {\n    switch (breathingPhase) {\n      case 'inhale':\n        return 'scale-150';\n      case 'hold':\n        return 'scale-150';\n      case 'exhale':\n        return 'scale-100';\n      case 'pause':\n        return 'scale-100';\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-[9999] bg-gradient-to-br from-blue-950 via-indigo-950 to-purple-950 flex items-center justify-center p-4 animate-in fade-in duration-500\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"panic-mode-title\"\n      aria-describedby=\"panic-mode-description\"\n    >\n      {/* Close Button - Large, easy to tap */}\n      <button\n        onClick={handleClose}\n        className={cn(\n          'absolute top-6 right-6 z-10',\n          'w-14 h-14 min-w-[56px] min-h-[56px]',\n          'bg-white/10 hover:bg-white/20 rounded-full',\n          'flex items-center justify-center',\n          'text-white/60 hover:text-white/90',\n          'transition-all duration-300',\n          'focus:outline-none focus:ring-4 focus:ring-white/30',\n          'backdrop-blur-sm'\n        )}\n        aria-label={closeButtonText}\n      >\n        <X className=\"w-6 h-6\" />\n      </button>\n\n      {/* Redaction Toggle (Optional) */}\n      {showRedactionToggle && (\n        <button\n          onClick={() => setIsRedacted(!isRedacted)}\n          className={cn(\n            'absolute top-6 left-6 z-10',\n            'px-4 py-2 min-h-[44px]',\n            'bg-white/10 hover:bg-white/20 rounded-full',\n            'text-white/60 hover:text-white/90 text-sm',\n            'transition-all duration-300',\n            'focus:outline-none focus:ring-4 focus:ring-white/30',\n            'backdrop-blur-sm'\n          )}\n          aria-label={isRedacted ? 'Show content' : 'Hide sensitive content'}\n          aria-pressed={isRedacted}\n        >\n          {isRedacted ? ' Show' : ' Hide'}\n        </button>\n      )}\n\n      {/* Main Content */}\n      <div className=\"max-w-2xl w-full text-center space-y-8\">\n        {/* Title */}\n        <div>\n          <h1\n            id=\"panic-mode-title\"\n            className=\"text-4xl md:text-5xl font-bold text-white mb-3 animate-in fade-in slide-in-from-bottom-4 duration-700\"\n          >\n            {greetingText}\n          </h1>\n          <p\n            id=\"panic-mode-description\"\n            className=\"text-xl text-white/70 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-100\"\n          >\n            {affirmations[currentAffirmation]}\n          </p>\n        </div>\n\n        {/* Breathing Circle */}\n        <div className=\"flex items-center justify-center py-12\">\n          <div\n            className={cn(\n              'relative w-64 h-64 rounded-full',\n              'bg-gradient-to-br from-blue-400/30 to-purple-400/30',\n              'backdrop-blur-xl border-4 border-white/20',\n              'flex items-center justify-center',\n              'transition-transform duration-[4000ms] ease-in-out',\n              getBreathingScale()\n            )}\n            role=\"img\"\n            aria-label={`Breathing guide: ${getBreathingInstruction()}`}\n            aria-live=\"polite\"\n          >\n            {/* Inner glow */}\n            <div className=\"absolute inset-4 rounded-full bg-gradient-to-br from-blue-300/20 to-purple-300/20 blur-xl\" />\n\n            {/* Center icon */}\n            <Heart className=\"w-16 h-16 text-white/50 animate-pulse\" aria-hidden=\"true\" />\n          </div>\n        </div>\n\n        {/* Breathing Instructions */}\n        <div\n          className=\"text-2xl md:text-3xl font-medium text-white animate-in fade-in duration-500\"\n          aria-live=\"assertive\"\n          aria-atomic=\"true\"\n        >\n          {getBreathingInstruction()}\n        </div>\n\n        {/* Progress Indicator */}\n        <div className=\"text-sm text-white/50\">\n          {cycleCount} breathing {cycleCount === 1 ? 'cycle' : 'cycles'} completed\n        </div>\n\n        {/* Helper Text */}\n        <div className=\"text-sm text-white/40 max-w-md mx-auto space-y-2\">\n          <p>Follow the expanding and contracting circle</p>\n          <p>Take your time. There's no rush.</p>\n          <p className=\"text-xs mt-4\">Press the  button when you're ready to return</p>\n        </div>\n\n        {/* Emergency Resources (Optional) */}\n        <div className=\"pt-8 border-t border-white/10\">\n          <p className=\"text-xs text-white/40 mb-3\">{crisisPromptText}</p>\n          <div className=\"flex flex-wrap gap-3 justify-center\">\n            <a\n              href=\"tel:988\"\n              className={cn(\n                'px-6 py-3 min-h-[48px]',\n                'bg-white/10 hover:bg-white/20 rounded-full',\n                'text-white/80 hover:text-white text-sm font-medium',\n                'transition-all duration-300',\n                'focus:outline-none focus:ring-4 focus:ring-white/30'\n              )}\n            >\n              {crisisHotlineText}\n            </a>\n            <button\n              onClick={handleClose}\n              className={cn(\n                'px-6 py-3 min-h-[48px]',\n                'bg-white/10 hover:bg-white/20 rounded-full',\n                'text-white/80 hover:text-white text-sm font-medium',\n                'transition-all duration-300',\n                'focus:outline-none focus:ring-4 focus:ring-white/30'\n              )}\n            >\n              {closeButtonText}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { PainEntry } from '../../types';\r\n\r\nexport interface CrisisDetectionResult {\r\n  detected: boolean;\r\n  baseline: number;\r\n  lastValue: number | null;\r\n  ratio?: number;\r\n  diff?: number;\r\n}\r\n\r\n/**\r\n * Compute a simple baseline (mean) over the last N days (defaults to 7 days).\r\n * Falls back to the overall mean when there is insufficient history.\r\n */\r\nexport function computeBaseline(entries: PainEntry[], lookbackDays = 7): number {\r\n  if (!entries || entries.length === 0) return 0;\r\n\r\n  const now = Date.now();\r\n  const windowStart = now - lookbackDays * 24 * 60 * 60 * 1000;\r\n  const values = entries\r\n    .filter(e => new Date(e.timestamp).getTime() >= windowStart)\r\n    .map(e => typeof e.intensity === 'number' ? e.intensity : 0);\r\n\r\n  const source = values.length ? values : entries.map(e => (typeof e.intensity === 'number' ? e.intensity : 0));\r\n  if (source.length === 0) return 0;\r\n\r\n  const sum = source.reduce((a, b) => a + b, 0);\r\n  return sum / source.length;\r\n}\r\n\r\n/**\r\n * Detect crisis based on simple ratio + absolute delta rules.\r\n * - Triggers when last value >= baseline * thresholdRatio (default 1.2)\r\n * - And when (lastValue - baseline) >= minAbsoluteIncrease (default 2 points)\r\n * - Returns metadata for UI and auditing.\r\n *\r\n * This algorithm is intentionally simple and local-only. Any networked escalation\r\n * must be approved by product and human review.\r\n */\r\nexport function detectCrisis(entries: PainEntry[], opts?: { lookbackDays?: number; thresholdRatio?: number; minAbsoluteIncrease?: number; }): CrisisDetectionResult {\r\n  const { lookbackDays = 7, thresholdRatio = 1.2, minAbsoluteIncrease = 2 } = opts || {};\r\n  if (!entries || entries.length === 0) return { detected: false, baseline: 0, lastValue: null };\r\n\r\n  const baseline = computeBaseline(entries, lookbackDays);\r\n  const lastEntry = entries[entries.length - 1];\r\n  const lastValue = typeof lastEntry.intensity === 'number' ? lastEntry.intensity : 0;\r\n\r\n  if (baseline <= 0) {\r\n    // If no meaningful baseline, require absolute threshold only\r\n    const diff = lastValue - baseline;\r\n    const detected = diff >= minAbsoluteIncrease && lastValue >= minAbsoluteIncrease;\r\n    return { detected, baseline, lastValue, diff: Math.round((diff + Number.EPSILON) * 10) / 10 };\r\n  }\r\n\r\n  const ratio = lastValue / baseline;\r\n  const diff = lastValue - baseline;\r\n  const detected = ratio >= thresholdRatio && diff >= minAbsoluteIncrease;\r\n\r\n  return {\r\n    detected,\r\n    baseline: Math.round((baseline + Number.EPSILON) * 10) / 10,\r\n    lastValue,\r\n    ratio: Math.round((ratio + Number.EPSILON) * 100) / 100,\r\n    diff: Math.round((diff + Number.EPSILON) * 10) / 10,\r\n  };\r\n}\r\n\r\nexport default {\r\n  computeBaseline,\r\n  detectCrisis,\r\n};\r\n","import React from 'react';\r\nimport { Button } from '../../design-system';\r\n\r\ninterface CrisisModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function CrisisModal({ isOpen, onClose }: CrisisModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/60\" onClick={onClose} />\r\n      <div className=\"z-10 w-full max-w-xl bg-background rounded-xl p-6 shadow-2xl\">\r\n        <h2 className=\"text-lg font-semibold mb-2\">Need help now?</h2>\r\n        <p className=\"text-sm text-muted-foreground mb-4\">If you are in immediate danger or need urgent medical help, call your local emergency services. If you need to speak to someone right away, here are crisis hotline numbers you can call.</p>\r\n\r\n        <ul className=\"list-disc pl-5 mb-4 text-sm\">\r\n          <li>Emergency services: 911</li>\r\n          <li>Canada (24/7): 1-833-456-4566</li>\r\n          <li>US (24/7): 988</li>\r\n        </ul>\r\n\r\n        <div className=\"flex gap-2 justify-end\">\r\n          <Button variant=\"ghost\" onClick={onClose}>Close</Button>\r\n          <Button onClick={() => { window.open('https://www.who.int', '_blank'); }}>Find local resources</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CrisisModal;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Button } from '../../design-system';\r\nimport { usePainTrackerStore } from '../../stores/pain-tracker-store';\r\nimport { detectCrisis } from '../../utils/pain-tracker/crisis';\r\nimport { trackCrisisDetected } from '../../services/AnalyticsTrackingService';\r\nimport { hipaaComplianceService } from '../../services/HIPAACompliance';\r\nimport CrisisModal from './CrisisModal';\r\n\r\nexport function CrisisBanner() {\r\n  const entries = usePainTrackerStore(state => state.entries);\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const enabled = usePainTrackerStore((s) => (s as any).crisisDetectionEnabled ?? true);\r\n  const [show, setShow] = useState(false);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [showWhy, setShowWhy] = useState(false);\r\n\r\n  const crisisConfig = useMemo(\r\n    () => ({ lookbackDays: 7, thresholdRatio: 1.2, minAbsoluteIncrease: 2 }),\r\n    []\r\n  );\r\n  const [lastResult, setLastResult] = useState<ReturnType<typeof detectCrisis> | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const res = detectCrisis(entries as any, crisisConfig);\r\n    if (res.detected) {\r\n      setShow(true);\r\n      setLastResult(res);\r\n      // Analytics + coarse audit (no PHI)\r\n      try { trackCrisisDetected('severe'); } catch (_) { /* noop */ }\r\n      void hipaaComplianceService.logAuditEvent({\r\n        actionType: 'access',\r\n        userId: 'local',\r\n        userRole: 'self',\r\n        resourceType: 'crisis_alert',\r\n        resourceId: 'local',\r\n        outcome: 'warning',\r\n        details: { baseline: res.baseline, lastValue: res.lastValue },\r\n      }).catch(() => {});\r\n    } else {\r\n      setShow(false);\r\n      setShowWhy(false);\r\n      setLastResult(null);\r\n    }\r\n  }, [entries, enabled, crisisConfig]);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-16 left-0 right-0 z-50 flex items-center justify-center px-4\">\r\n      <div className=\"max-w-screen-2xl w-full\">\r\n        <div className=\"flex items-center justify-between gap-4 bg-red-600 text-white rounded-xl p-3 shadow-lg\">\r\n          <div>\r\n            <strong>High pain alert</strong>\r\n            <div className=\"text-sm opacity-90\">We detected a recent, significant increase in pain.</div>\r\n            {lastResult && (\r\n              <div className=\"text-xs opacity-90 mt-1\">\r\n                Baseline (last {crisisConfig.lookbackDays} days avg): {lastResult.baseline}  Latest: {lastResult.lastValue}\r\n                {typeof lastResult.diff === 'number'\r\n                  ? `  Change: ${lastResult.diff >= 0 ? '+' : ''}${lastResult.diff}`\r\n                  : ''}\r\n              </div>\r\n            )}\r\n            {showWhy && (\r\n              <div className=\"text-xs opacity-90 mt-2 max-w-[70ch]\">\r\n                This alert is calculated locally from your recent entries.\r\n                {lastResult?.baseline && lastResult.baseline > 0 ? (\r\n                  <> We alert when the latest value is at least {crisisConfig.thresholdRatio}x your baseline and at least {crisisConfig.minAbsoluteIncrease} points higher.</>\r\n                ) : (\r\n                  <> If there isn\u0019t enough history to form a baseline, we require an absolute increase of at least {crisisConfig.minAbsoluteIncrease} points.</>\r\n                )}\r\n                {' '}This is a heads-up, not a diagnosis.\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              className=\"text-white\"\r\n              onClick={() => setShowWhy(v => !v)}\r\n              aria-expanded={showWhy}\r\n            >\r\n              Why?\r\n            </Button>\r\n            <Button variant=\"ghost\" className=\"text-white\" onClick={() => setModalOpen(true)}>Get help</Button>\r\n            <Button onClick={() => setShow(false)}>Dismiss</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <CrisisModal isOpen={modalOpen} onClose={() => setModalOpen(false)} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CrisisBanner;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  LayoutDashboard,\r\n  Plus,\r\n  User,\r\n  TrendingUp,\r\n  Settings,\r\n  Heart,\r\n  Menu,\r\n  X,\r\n  Moon,\r\n  Sun,\r\n  Shield,\r\n  Sparkles,\r\n  Activity,\r\n  Calendar,\r\n  FileText,\r\n  History,\r\n  HelpCircle,\r\n  Bell,\r\n  Wind,\r\n  Zap,\r\n  ChevronRight,\r\n} from 'lucide-react';\r\nimport { cn } from '../../design-system/utils';\r\nimport { Button, useTheme } from '../../design-system';\r\nimport { PanicMode } from '../accessibility/PanicMode';\r\nimport CrisisBanner from '../crisis/CrisisBanner';\r\n\r\ninterface ModernAppLayoutProps {\r\n  children: React.ReactNode;\r\n  onNavigate?: (view: string) => void;\r\n  currentView?: string;\r\n  stats?: {\r\n    totalEntries: number;\r\n    avgPain: number;\r\n    streak: number;\r\n  };\r\n}\r\n\r\nexport function ModernAppLayout({\r\n  children,\r\n  onNavigate,\r\n  currentView = 'dashboard',\r\n  stats,\r\n}: ModernAppLayoutProps) {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [panicModeActive, setPanicModeActive] = useState(false);\r\n  const { mode, setMode } = useTheme();\r\n\r\n  const navigation = [\r\n    { id: 'dashboard', name: 'Dashboard', icon: LayoutDashboard, badge: null, color: 'sky' },\r\n    { id: 'new-entry', name: 'New Entry', icon: Plus, badge: null, color: 'emerald' },\r\n    { id: 'history', name: 'History', icon: History, badge: null, color: 'sky' },\r\n    { id: 'body-map', name: 'Body Map', icon: User, badge: null, color: 'violet' },\r\n    { id: 'fibromyalgia', name: 'Fibromyalgia Hub', icon: Heart, badge: 'New', color: 'rose' },\r\n    { id: 'analytics', name: 'Analytics', icon: TrendingUp, badge: 'Pro', color: 'amber' },\r\n    { id: 'calendar', name: 'Calendar', icon: Calendar, badge: null, color: 'cyan' },\r\n    { id: 'reports', name: 'Reports', icon: FileText, badge: null, color: 'indigo' },\r\n  ];\r\n\r\n  const bottomNavigation = [\r\n    { id: 'settings', name: 'Settings', icon: Settings },\r\n    { id: 'help', name: 'Help', icon: HelpCircle },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground\">\r\n      {/* Ambient background effects */}\r\n      <div className=\"fixed inset-0 pointer-events-none overflow-hidden\">\r\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-sky-500/5 rounded-full blur-3xl\" />\r\n        <div className=\"absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl\" />\r\n        <div className=\"absolute top-1/2 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl\" />\r\n      </div>\r\n\r\n      {/* Skip to Main Content Link - Accessibility */}\r\n      <a\r\n        href=\"#main-content\"\r\n        className=\"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[9999] focus:px-6 focus:py-3 focus:bg-sky-500 focus:text-white focus:rounded-xl focus:shadow-lg focus:ring-2 focus:ring-sky-400 focus:ring-offset-2 focus:ring-offset-background focus:outline-none\"\r\n      >\r\n        Skip to main content\r\n      </a>\r\n\r\n      {/* Premium Glass Header */}\r\n      <header className=\"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-xl border-b border-border/30\">\r\n        <div className=\"mx-auto max-w-screen-2xl px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex h-16 items-center justify-between\">\r\n            {/* Logo & Brand */}\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                onClick={() => setSidebarOpen(!sidebarOpen)}\r\n                className=\"lg:hidden p-2.5 rounded-xl text-muted-foreground hover:text-foreground hover:bg-muted/60 transition-all duration-200\"\r\n                aria-label={sidebarOpen ? 'Close navigation menu' : 'Open navigation menu'}\r\n                aria-expanded={sidebarOpen}\r\n                aria-controls=\"mobile-navigation-menu\"\r\n                data-testid=\"nav-toggle\"\r\n              >\r\n                {sidebarOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setSidebarOpen(false);\r\n                  onNavigate?.('dashboard');\r\n                }}\r\n                className=\"flex items-center gap-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:ring-offset-2 focus:ring-offset-background\"\r\n                aria-label=\"Go to dashboard\"\r\n                title=\"Go to dashboard\"\r\n              >\r\n                <div\r\n                  className=\"p-2.5 rounded-xl\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%)',\r\n                    boxShadow: '0 8px 20px rgba(14, 165, 233, 0.3)',\r\n                  }}\r\n                >\r\n                  <Activity className=\"h-5 w-5 text-white\" />\r\n                </div>\r\n                <div className=\"hidden sm:block text-left\">\r\n                  <h1 className=\"text-lg font-bold bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-transparent\">\r\n                    Pain Tracker Pro\r\n                  </h1>\r\n                  <p className=\"text-[11px] text-muted-foreground\">Pain management insights</p>\r\n                </div>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Quick Stats - Premium Glass Cards */}\r\n            {stats && (\r\n              <div className=\"hidden md:flex items-center gap-3\">\r\n                <div \r\n                  className=\"flex items-center gap-2 px-4 py-2 rounded-xl\"\r\n                  style={{\r\n                    background: 'rgba(56, 189, 248, 0.1)',\r\n                    border: '1px solid rgba(56, 189, 248, 0.2)',\r\n                  }}\r\n                >\r\n                  <Activity className=\"h-4 w-4 text-sky-400\" />\r\n                  <span className=\"text-sm font-semibold text-sky-300\">\r\n                    {stats.avgPain.toFixed(1)} <span className=\"text-sky-400/70 font-normal\">avg</span>\r\n                  </span>\r\n                </div>\r\n                <div \r\n                  className=\"flex items-center gap-2 px-4 py-2 rounded-xl\"\r\n                  style={{\r\n                    background: 'rgba(168, 85, 247, 0.1)',\r\n                    border: '1px solid rgba(168, 85, 247, 0.2)',\r\n                  }}\r\n                >\r\n                  <Sparkles className=\"h-4 w-4 text-purple-400\" />\r\n                  <span className=\"text-sm font-semibold text-purple-300\">\r\n                    {stats.streak} <span className=\"text-purple-400/70 font-normal\">day streak</span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button\r\n                size=\"sm\"\r\n                className=\"hidden sm:inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white font-medium transition-all duration-300 hover:scale-105\"\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%)',\r\n                  boxShadow: '0 4px 15px rgba(14, 165, 233, 0.3)',\r\n                }}\r\n                onClick={() => onNavigate?.('daily-checkin')}\r\n                aria-label=\"Daily check-in (guided)\"\r\n                title=\"Daily check-in (guided)\"\r\n              >\r\n                <Heart className=\"h-4 w-4\" />\r\n                Check-in\r\n              </Button>\r\n\r\n              <button \r\n                className=\"p-2.5 rounded-xl text-muted-foreground hover:text-foreground hover:bg-muted/60 transition-all duration-200\"\r\n                onClick={() => {}}\r\n                aria-label=\"Notifications\"\r\n                title=\"Notifications\"\r\n              >\r\n                <Bell className=\"h-4 w-4\" />\r\n              </button>\r\n\r\n              <button\r\n                className=\"p-2.5 rounded-xl text-muted-foreground hover:text-foreground hover:bg-muted/60 transition-all duration-200\"\r\n                onClick={() => setMode(mode === 'dark' ? 'light' : 'dark')}\r\n                aria-label={`Switch to ${mode === 'dark' ? 'light' : 'dark'} mode`}\r\n                title={`Switch to ${mode === 'dark' ? 'light' : 'dark'} mode`}\r\n              >\r\n                {mode === 'dark' ? <Sun className=\"h-4 w-4\" /> : <Moon className=\"h-4 w-4\" />}\r\n              </button>\r\n\r\n              <div \r\n                className=\"p-2.5 rounded-xl cursor-pointer transition-all duration-300 hover:scale-105\"\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #10b981 0%, #34d399 100%)',\r\n                  boxShadow: '0 4px 15px rgba(16, 185, 129, 0.3)',\r\n                }}\r\n              >\r\n                <Shield className=\"h-4 w-4 text-white\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Sidebar - Desktop - Premium Dark Theme */}\r\n      <aside className=\"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-40 lg:block lg:w-72 lg:pt-16\">\r\n        <div className=\"h-full px-4 py-6 bg-background/95 backdrop-blur-xl border-r border-border/20\">\r\n          <nav className=\"space-y-1.5\">\r\n            {navigation.map(item => {\r\n              const Icon = item.icon;\r\n              const isActive = currentView === item.id;\r\n              \r\n              const colorMap: Record<string, { bg: string; border: string; text: string; glow: string }> = {\r\n                sky: { bg: 'rgba(56, 189, 248, 0.15)', border: 'rgba(56, 189, 248, 0.3)', text: '#38bdf8', glow: 'rgba(56, 189, 248, 0.2)' },\r\n                emerald: { bg: 'rgba(52, 211, 153, 0.15)', border: 'rgba(52, 211, 153, 0.3)', text: '#34d399', glow: 'rgba(52, 211, 153, 0.2)' },\r\n                violet: { bg: 'rgba(139, 92, 246, 0.15)', border: 'rgba(139, 92, 246, 0.3)', text: '#8b5cf6', glow: 'rgba(139, 92, 246, 0.2)' },\r\n                rose: { bg: 'rgba(244, 63, 94, 0.15)', border: 'rgba(244, 63, 94, 0.3)', text: '#f43f5e', glow: 'rgba(244, 63, 94, 0.2)' },\r\n                amber: { bg: 'rgba(245, 158, 11, 0.15)', border: 'rgba(245, 158, 11, 0.3)', text: '#f59e0b', glow: 'rgba(245, 158, 11, 0.2)' },\r\n                cyan: { bg: 'rgba(34, 211, 238, 0.15)', border: 'rgba(34, 211, 238, 0.3)', text: '#22d3ee', glow: 'rgba(34, 211, 238, 0.2)' },\r\n                indigo: { bg: 'rgba(99, 102, 241, 0.15)', border: 'rgba(99, 102, 241, 0.3)', text: '#6366f1', glow: 'rgba(99, 102, 241, 0.2)' },\r\n              };\r\n              \r\n              const colors = colorMap[item.color] || colorMap.sky;\r\n\r\n              return (\r\n                <button\r\n                  key={item.id}\r\n                  onClick={() => onNavigate?.(item.id)}\r\n                  data-nav-target={item.id}\r\n                  className={cn(\r\n                    'group flex w-full items-center justify-between rounded-xl px-4 py-3 text-sm font-medium transition-all duration-300',\r\n                    isActive ? '' : 'text-slate-400 hover:text-white'\r\n                  )}\r\n                  style={isActive ? {\r\n                    background: colors.bg,\r\n                    border: `1px solid ${colors.border}`,\r\n                    boxShadow: `0 4px 20px ${colors.glow}`,\r\n                    color: colors.text,\r\n                  } : {\r\n                    background: 'transparent',\r\n                    border: '1px solid transparent',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    if (!isActive) {\r\n                      e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\r\n                      e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n                    }\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    if (!isActive) {\r\n                      e.currentTarget.style.background = 'transparent';\r\n                      e.currentTarget.style.borderColor = 'transparent';\r\n                    }\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center gap-3 min-w-0 flex-1\">\r\n                    <div \r\n                      className={cn(\r\n                        'p-2 rounded-lg transition-all duration-300 flex-shrink-0',\r\n                        isActive ? '' : 'group-hover:scale-110'\r\n                      )}\r\n                      style={isActive ? {\r\n                        background: colors.bg,\r\n                      } : {\r\n                        background: 'rgba(255, 255, 255, 0.05)',\r\n                      }}\r\n                    >\r\n                      <Icon\r\n                        className=\"h-4 w-4\"\r\n                        style={{ color: isActive ? colors.text : 'currentColor' }}\r\n                      />\r\n                    </div>\r\n                    <span className=\"truncate\">{item.name}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                    {item.badge && (\r\n                      <span \r\n                        className=\"px-2 py-0.5 rounded-full text-[10px] font-semibold whitespace-nowrap\"\r\n                        style={{\r\n                          background: item.badge === 'New' ? 'rgba(52, 211, 153, 0.2)' : 'rgba(168, 85, 247, 0.2)',\r\n                          color: item.badge === 'New' ? '#34d399' : '#a855f7',\r\n                          border: item.badge === 'New' ? '1px solid rgba(52, 211, 153, 0.3)' : '1px solid rgba(168, 85, 247, 0.3)',\r\n                        }}\r\n                      >\r\n                        {item.badge}\r\n                      </span>\r\n                    )}\r\n                    {isActive && <ChevronRight className=\"h-4 w-4 opacity-50\" />}\r\n                  </div>\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n\r\n          <div className=\"mt-8 pt-8\" style={{ borderTop: '1px solid rgba(255, 255, 255, 0.05)' }}>\r\n            <nav className=\"space-y-1\">\r\n              {bottomNavigation.map(item => {\r\n                const Icon = item.icon;\r\n                const isActive = currentView === item.id;\r\n\r\n                return (\r\n                  <button\r\n                    key={item.id}\r\n                    onClick={() => onNavigate?.(item.id)}\r\n                    className={cn(\r\n                      'group flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200',\r\n                      isActive\r\n                        ? 'bg-white/10 text-white'\r\n                        : 'text-slate-500 hover:bg-white/5 hover:text-slate-300'\r\n                    )}\r\n                  >\r\n                    <Icon className=\"h-4 w-4\" />\r\n                    <span>{item.name}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </nav>\r\n          </div>\r\n\r\n          {/* Quick Add Button - Premium Gradient */}\r\n          <div className=\"mt-8\">\r\n            <button\r\n              onClick={() => onNavigate?.('new-entry')}\r\n              className=\"group w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-xl text-white font-medium transition-all duration-300 hover:scale-[1.02]\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%)',\r\n                boxShadow: '0 8px 25px rgba(14, 165, 233, 0.3)',\r\n              }}\r\n            >\r\n              <Zap className=\"h-4 w-4 transition-transform group-hover:scale-110\" />\r\n              Quick Entry\r\n            </button>\r\n          </div>\r\n\r\n          {/* Pro Upgrade Banner */}\r\n          <div \r\n            className=\"mt-6 p-4 rounded-xl\"\r\n            style={{\r\n              background: 'linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)',\r\n              border: '1px solid rgba(168, 85, 247, 0.2)',\r\n            }}\r\n          >\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Sparkles className=\"h-4 w-4 text-purple-400\" />\r\n              <span className=\"text-sm font-semibold text-purple-300\">Upgrade to Pro</span>\r\n            </div>\r\n            <p className=\"text-xs text-slate-400 mb-3\">Unlock automated insights, advanced analytics & more</p>\r\n            <button \r\n              className=\"w-full py-2 rounded-lg text-xs font-medium text-purple-300 transition-colors hover:bg-purple-500/20\"\r\n              style={{ border: '1px solid rgba(168, 85, 247, 0.3)' }}\r\n            >\r\n              Learn More\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar - Premium Dark */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-40 lg:hidden\">\r\n          <div\r\n            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm\"\r\n            onClick={() => setSidebarOpen(false)}\r\n            aria-hidden=\"true\"\r\n          />\r\n          <aside \r\n            id=\"mobile-navigation-menu\"\r\n            className=\"fixed inset-y-0 left-0 w-72 shadow-2xl\"\r\n            style={{\r\n              background: 'linear-gradient(180deg, #0f172a 0%, #020617 100%)',\r\n            }}\r\n            role=\"navigation\"\r\n            aria-label=\"Mobile navigation menu\"\r\n          >\r\n            <div className=\"h-full px-4 py-6 pt-20 flex flex-col\">\r\n              <nav className=\"space-y-1.5 flex-1\">\r\n                {navigation.map(item => {\r\n                  const Icon = item.icon;\r\n                  const isActive = currentView === item.id;\r\n                  \r\n                  const colorMap: Record<string, { bg: string; border: string; text: string }> = {\r\n                    sky: { bg: 'rgba(56, 189, 248, 0.15)', border: 'rgba(56, 189, 248, 0.3)', text: '#38bdf8' },\r\n                    emerald: { bg: 'rgba(52, 211, 153, 0.15)', border: 'rgba(52, 211, 153, 0.3)', text: '#34d399' },\r\n                    violet: { bg: 'rgba(139, 92, 246, 0.15)', border: 'rgba(139, 92, 246, 0.3)', text: '#8b5cf6' },\r\n                    rose: { bg: 'rgba(244, 63, 94, 0.15)', border: 'rgba(244, 63, 94, 0.3)', text: '#f43f5e' },\r\n                    amber: { bg: 'rgba(245, 158, 11, 0.15)', border: 'rgba(245, 158, 11, 0.3)', text: '#f59e0b' },\r\n                    cyan: { bg: 'rgba(34, 211, 238, 0.15)', border: 'rgba(34, 211, 238, 0.3)', text: '#22d3ee' },\r\n                    indigo: { bg: 'rgba(99, 102, 241, 0.15)', border: 'rgba(99, 102, 241, 0.3)', text: '#6366f1' },\r\n                  };\r\n                  \r\n                  const colors = colorMap[item.color] || colorMap.sky;\r\n\r\n                  return (\r\n                    <button\r\n                      key={item.id}\r\n                      onClick={() => {\r\n                        onNavigate?.(item.id);\r\n                        setSidebarOpen(false);\r\n                      }}\r\n                      data-nav-target={item.id}\r\n                      className={cn(\r\n                        'group flex w-full items-center justify-between rounded-xl px-4 py-3 text-sm font-medium transition-all',\r\n                        isActive ? '' : 'text-slate-400'\r\n                      )}\r\n                      style={isActive ? {\r\n                        background: colors.bg,\r\n                        border: `1px solid ${colors.border}`,\r\n                        color: colors.text,\r\n                      } : {}}\r\n                    >\r\n                      <div className=\"flex items-center gap-3 min-w-0 flex-1\">\r\n                        <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n                        <span className=\"truncate\">{item.name}</span>\r\n                      </div>\r\n                      {item.badge && (\r\n                        <span \r\n                          className=\"px-2 py-0.5 rounded-full text-[10px] font-semibold flex-shrink-0\"\r\n                          style={{\r\n                            background: item.badge === 'New' ? 'rgba(52, 211, 153, 0.2)' : 'rgba(168, 85, 247, 0.2)',\r\n                            color: item.badge === 'New' ? '#34d399' : '#a855f7',\r\n                          }}\r\n                        >\r\n                          {item.badge}\r\n                        </span>\r\n                      )}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </nav>\r\n\r\n              {/* Bottom Navigation (Settings, Help) in Mobile Menu */}\r\n              <div className=\"mt-4 pt-4\" style={{ borderTop: '1px solid rgba(255, 255, 255, 0.1)' }}>\r\n                <nav className=\"space-y-1\">\r\n                  {bottomNavigation.map(item => {\r\n                    const Icon = item.icon;\r\n                    const isActive = currentView === item.id;\r\n\r\n                    return (\r\n                      <button\r\n                        key={item.id}\r\n                        onClick={() => {\r\n                          onNavigate?.(item.id);\r\n                          setSidebarOpen(false);\r\n                        }}\r\n                        data-nav-target={item.id}\r\n                        className={cn(\r\n                          'group flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all',\r\n                          isActive\r\n                            ? 'bg-white/10 text-white'\r\n                            : 'text-slate-400 hover:bg-white/5 hover:text-slate-300'\r\n                        )}\r\n                      >\r\n                        <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n                        <span>{item.name}</span>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </nav>\r\n              </div>\r\n            </div>\r\n          </aside>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Content */}\r\n      <CrisisBanner />\r\n      <main id=\"main-content\" className=\"lg:pl-72 pt-16 relative\" tabIndex={-1}>\r\n        <div className=\"mx-auto max-w-screen-2xl px-4 sm:px-6 lg:px-8 py-8\">{children}</div>\r\n      </main>\r\n\r\n      {/* Floating Action Button - Mobile - Premium */}\r\n      <button\r\n        onClick={() => onNavigate?.('new-entry')}\r\n        className=\"lg:hidden fixed bottom-6 right-6 z-50 p-4 rounded-2xl transition-all duration-300 hover:scale-110\"\r\n        style={{\r\n          background: 'linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%)',\r\n          boxShadow: '0 8px 30px rgba(14, 165, 233, 0.4), 0 0 40px rgba(139, 92, 246, 0.2)',\r\n        }}\r\n        aria-label=\"Quick pain entry\"\r\n      >\r\n        <Plus className=\"h-6 w-6 text-white\" />\r\n      </button>\r\n\r\n      {/* Panic Mode Button - Floating, High Priority */}\r\n      <button\r\n        onClick={() => setPanicModeActive(true)}\r\n        className={cn(\r\n          'fixed bottom-24 right-6 z-50',\r\n          'lg:bottom-8 lg:right-8',\r\n          'w-14 h-14 min-w-[56px] min-h-[56px]',\r\n          'rounded-2xl',\r\n          'flex items-center justify-center',\r\n          'text-white',\r\n          'transition-all duration-300',\r\n          'hover:scale-110',\r\n          'focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-slate-900'\r\n        )}\r\n        style={{\r\n          background: 'linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)',\r\n          boxShadow: '0 8px 30px rgba(139, 92, 246, 0.4)',\r\n        }}\r\n        aria-label=\"Activate calm breathing mode\"\r\n        title=\"Need a moment? Click for breathing guide\"\r\n      >\r\n        <Wind className=\"h-6 w-6 animate-pulse\" />\r\n      </button>\r\n\r\n      {/* Panic Mode Overlay */}\r\n      <PanicMode\r\n        isActive={panicModeActive}\r\n        onClose={() => setPanicModeActive(false)}\r\n        showRedactionToggle={false}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ModernAppLayout;\r\n","import React from 'react';\r\nimport { TrendingUp, TrendingDown, Minus } from 'lucide-react';\r\nimport { cn } from '../utils';\r\nimport '../tokens/fused-v2.css';\r\n\r\ninterface MetricCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  tooltip?: string;\r\n  delta?: {\r\n    value: number;\r\n    direction: 'up' | 'down' | 'neutral';\r\n    label?: string;\r\n  };\r\n  sparkline?: number[];\r\n  severity?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10;\r\n  unit?: string;\r\n  className?: string;\r\n  compact?: boolean;\r\n}\r\n\r\nexport function MetricCard({\r\n  title,\r\n  value,\r\n  tooltip,\r\n  delta,\r\n  sparkline,\r\n  severity,\r\n  unit,\r\n  className,\r\n  compact = false,\r\n}: MetricCardProps) {\r\n  const getSeverityColor = (level: number) => {\r\n    return `var(--severity-${level})`;\r\n  };\r\n\r\n  const getDeltaIcon = () => {\r\n    if (!delta) return null;\r\n\r\n    switch (delta.direction) {\r\n      case 'up':\r\n        return <TrendingUp className=\"w-4 h-4\" />;\r\n      case 'down':\r\n        return <TrendingDown className=\"w-4 h-4\" />;\r\n      default:\r\n        return <Minus className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getDeltaColor = () => {\r\n    if (!delta) return 'text-ink-400';\r\n\r\n    // For pain metrics, down is good\r\n    if (delta.direction === 'down') return 'text-good-500';\r\n    if (delta.direction === 'up') return 'text-bad-500';\r\n    return 'text-ink-400';\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'surface-card transition-all duration-[var(--duration-fast)]',\r\n        'hover:surface-elevated hover:shadow-[var(--elevation-2)]',\r\n        compact && 'p-4',\r\n        className\r\n      )}\r\n      title={tooltip}\r\n    >\r\n      {/* Title */}\r\n      <div className=\"text-small text-ink-300 mb-2\">{title}</div>\r\n\r\n      {/* Value */}\r\n      <div className=\"flex items-baseline gap-2 mb-1\">\r\n        <span className={cn(compact ? 'text-h2' : 'text-display', 'text-mono text-ink-50')}>\r\n          {value}\r\n        </span>\r\n        {unit && <span className=\"text-small text-ink-400\">{unit}</span>}\r\n      </div>\r\n\r\n      {/* Delta */}\r\n      {delta && (\r\n        <div className={cn('flex items-center gap-1 text-small', getDeltaColor())}>\r\n          {getDeltaIcon()}\r\n          <span className=\"text-mono\">\r\n            {delta.value > 0 ? '+' : ''}\r\n            {delta.value.toFixed(1)}\r\n          </span>\r\n          {delta.label && <span className=\"text-ink-400\">{delta.label}</span>}\r\n        </div>\r\n      )}\r\n\r\n      {/* Sparkline (simple SVG) */}\r\n      {sparkline && sparkline.length > 1 && (\r\n        <div className=\"mt-3 h-8\">\r\n          <svg\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            viewBox=\"0 0 100 32\"\r\n            preserveAspectRatio=\"none\"\r\n            className=\"overflow-visible\"\r\n          >\r\n            <polyline\r\n              fill=\"none\"\r\n              stroke=\"var(--primary-500)\"\r\n              strokeWidth=\"1.5\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              points={sparkline\r\n                .map((val, i) => {\r\n                  const x = (i / (sparkline.length - 1)) * 100;\r\n                  const max = Math.max(...sparkline);\r\n                  const min = Math.min(...sparkline);\r\n                  const range = max - min || 1;\r\n                  const y = 32 - ((val - min) / range) * 28;\r\n                  return `${x},${y}`;\r\n                })\r\n                .join(' ')}\r\n            />\r\n          </svg>\r\n        </div>\r\n      )}\r\n\r\n      {/* Severity Bar */}\r\n      {severity !== undefined && (\r\n        <div className=\"mt-3 h-1 bg-surface-700 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full transition-all duration-[var(--duration-normal)]\"\r\n            style={{\r\n              width: `${(severity / 10) * 100}%`,\r\n              backgroundColor: getSeverityColor(severity),\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\nimport { Info, X } from 'lucide-react';\nimport { cn } from '../utils';\nimport '../tokens/fused-v2.css';\n\ninterface InsightChipProps {\n  statement: string;\n  confidence: 1 | 2 | 3; // 1-3 dots\n  rationale: string;\n  onDismiss?: () => void;\n  className?: string;\n}\n\nexport function InsightChip({\n  statement,\n  confidence,\n  rationale,\n  onDismiss,\n  className,\n}: InsightChipProps) {\n  const [showPopover, setShowPopover] = useState(false);\n\n  const getConfidenceDots = () => {\n    return Array.from({ length: 3 }, (_, i) => (\n      <div\n        key={i}\n        className={cn(\n          'w-1.5 h-1.5 rounded-full transition-colors',\n          i < confidence ? 'bg-primary-500' : 'bg-surface-600'\n        )}\n      />\n    ));\n  };\n\n  return (\n    <div className={cn('relative inline-block', className)}>\n      <div\n        className={cn(\n          'flex items-center gap-2 px-3 py-2 rounded-[var(--radius-md)]',\n          'bg-surface-700 border border-surface-600',\n          'text-small text-ink-100',\n          'transition-all duration-[var(--duration-fast)]',\n          'hover:bg-surface-600 hover:border-primary-500/30'\n        )}\n      >\n        {/* Statement */}\n        <span className=\"flex-1\">{statement}</span>\n\n        {/* Confidence Dots */}\n        <div className=\"flex items-center gap-0.5\">{getConfidenceDots()}</div>\n\n        {/* Info Button */}\n        <button\n          onClick={() => setShowPopover(!showPopover)}\n          className={cn(\n            'p-1 rounded hover:bg-surface-500 transition-colors',\n            'focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary-500'\n          )}\n          aria-label=\"Show insight details\"\n        >\n          <Info className=\"w-3.5 h-3.5 text-ink-400\" />\n        </button>\n\n        {/* Dismiss Button */}\n        {onDismiss && (\n          <button\n            onClick={onDismiss}\n            className={cn(\n              'p-1 rounded hover:bg-surface-500 transition-colors',\n              'focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary-500'\n            )}\n            aria-label=\"Dismiss insight\"\n          >\n            <X className=\"w-3.5 h-3.5 text-ink-400\" />\n          </button>\n        )}\n      </div>\n\n      {/* Popover */}\n      {showPopover && (\n        <>\n          {/* Backdrop */}\n          <div\n            className=\"fixed inset-0 z-[var(--z-popover)]\"\n            onClick={() => setShowPopover(false)}\n          />\n\n          {/* Popover Content */}\n          <div\n            className={cn(\n              'absolute left-0 top-full mt-2 z-[calc(var(--z-popover)+1)]',\n              'w-80 max-w-[90vw]',\n              'bg-surface-700 border border-surface-500 rounded-[var(--radius-xl)]',\n              'shadow-[var(--elevation-3)] p-4',\n              'animate-in fade-in-0 slide-in-from-top-2 duration-[var(--duration-fast)]'\n            )}\n          >\n            <div className=\"flex items-start justify-between gap-3 mb-3\">\n              <h4 className=\"text-body-medium text-ink-50\">Why this insight?</h4>\n              <button\n                onClick={() => setShowPopover(false)}\n                className=\"p-1 rounded hover:bg-surface-600 transition-colors\"\n                aria-label=\"Close\"\n              >\n                <X className=\"w-4 h-4 text-ink-400\" />\n              </button>\n            </div>\n\n            <p className=\"text-small text-ink-200 leading-relaxed mb-3\">{rationale}</p>\n\n            {/* Confidence Explanation */}\n            <div className=\"flex items-center gap-2 text-tiny text-ink-400\">\n              <span>Confidence:</span>\n              <div className=\"flex items-center gap-1\">{getConfidenceDots()}</div>\n              <span>{confidence === 3 ? 'High' : confidence === 2 ? 'Medium' : 'Low'}</span>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useMemo } from 'react';\nimport { Activity, TrendingUp, FileText, Lightbulb, Calendar, Clock } from 'lucide-react';\nimport type { LucideIcon } from 'lucide-react';\nimport type { PainEntry } from '../../types';\nimport { cn } from '../utils';\n\ninterface RecommendedAction {\n  id: string;\n  priority: 'primary' | 'secondary' | 'tertiary';\n  icon: LucideIcon;\n  title: string;\n  subtitle: string;\n  action: () => void;\n  badge?: string;\n  estimatedTime?: string;\n}\n\ninterface RecommendedActionsProps {\n  entries: PainEntry[];\n  onLogNow: () => void;\n  onViewCalendar: () => void;\n  onViewAnalytics: () => void;\n  onExport: () => void;\n}\n\nexport function RecommendedActions({\n  entries,\n  onLogNow,\n  onViewCalendar,\n  onViewAnalytics,\n  onExport,\n}: RecommendedActionsProps) {\n  const actions = useMemo(() => {\n    const recommendations: RecommendedAction[] = [];\n\n    // Check time since last entry\n    const lastEntry =\n      entries.length > 0\n        ? entries.reduce((latest, e) =>\n            new Date(e.timestamp) > new Date(latest.timestamp) ? e : latest\n          )\n        : null;\n\n    const hoursSinceLastEntry = lastEntry\n      ? (Date.now() - new Date(lastEntry.timestamp).getTime()) / (1000 * 60 * 60)\n      : Infinity;\n\n    // PRIMARY: Log pain (if >4h since last entry or no entries)\n    if (hoursSinceLastEntry > 4 || entries.length === 0) {\n      recommendations.push({\n        id: 'log-pain',\n        priority: 'primary',\n        icon: Activity,\n        title: 'Quick log pain',\n        subtitle: lastEntry\n          ? `Last entry: ${Math.floor(hoursSinceLastEntry)}h ago`\n          : 'Pain + location (fastest)',\n        action: onLogNow,\n        badge: 'Quick log',\n        estimatedTime: '~1 min',\n      });\n    }\n\n    // SECONDARY: Review trends (if 7+ entries)\n    if (entries.length >= 7) {\n      const last7Days = entries.filter(e => {\n        const date = new Date(e.timestamp);\n        const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n        return date >= sevenDaysAgo;\n      });\n\n      if (last7Days.length >= 5) {\n        recommendations.push({\n          id: 'review-trends',\n          priority: 'secondary',\n          icon: TrendingUp,\n          title: 'Review weekly trends',\n          subtitle: `${last7Days.length} entries logged this week`,\n          action: onViewAnalytics,\n          estimatedTime: '2 min',\n        });\n      }\n    }\n\n    // SECONDARY: View calendar (if 3+ entries)\n    if (entries.length >= 3) {\n      recommendations.push({\n        id: 'view-calendar',\n        priority: 'secondary',\n        icon: Calendar,\n        title: 'View calendar',\n        subtitle: 'See your pain patterns at a glance',\n        action: onViewCalendar,\n        estimatedTime: '1 min',\n      });\n    }\n\n    // TERTIARY: Export report (if 7+ entries in last 7 days)\n    const recentEntries = entries.filter(e => {\n      const date = new Date(e.timestamp);\n      const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n      return date >= sevenDaysAgo;\n    });\n\n    if (recentEntries.length >= 7) {\n      recommendations.push({\n        id: 'export-report',\n        priority: 'tertiary',\n        icon: FileText,\n        title: 'Share report with provider',\n        subtitle: '7 days of data ready to export',\n        action: onExport,\n        badge: 'Ready',\n        estimatedTime: '30s',\n      });\n    }\n\n    // TERTIARY: Learn about patterns (if high variability)\n    if (entries.length >= 7) {\n      const painValues = recentEntries.map(e => e.baselineData.pain);\n      const mean = painValues.reduce((sum, p) => sum + p, 0) / painValues.length;\n      const variance =\n        painValues.reduce((sum, p) => sum + Math.pow(p - mean, 2), 0) / painValues.length;\n      const stdDev = Math.sqrt(variance);\n\n      if (stdDev > 2) {\n        recommendations.push({\n          id: 'learn-patterns',\n          priority: 'tertiary',\n          icon: Lightbulb,\n          title: 'Explore flare triggers',\n          subtitle: 'High pain variability detected',\n          action: onViewAnalytics,\n          badge: 'Insight',\n          estimatedTime: '3 min',\n        });\n      }\n    }\n\n    return recommendations;\n  }, [entries, onLogNow, onViewCalendar, onViewAnalytics, onExport]);\n\n  if (actions.length === 0) {\n    return null;\n  }\n\n  const primaryAction = actions.find(a => a.priority === 'primary');\n  const secondaryActions = actions.filter(a => a.priority === 'secondary');\n  const tertiaryActions = actions.filter(a => a.priority === 'tertiary');\n\n  return (\n    <div className=\"surface-card\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-body-medium text-ink-100\">Recommended for You</h2>\n        <div className=\"flex items-center gap-1.5 text-ink-500\">\n          <Clock className=\"w-3.5 h-3.5\" />\n          <span className=\"text-tiny\">Updated just now</span>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        {/* Primary Action - Always prominent */}\n        {primaryAction && (\n          <button\n            onClick={primaryAction.action}\n            className={cn(\n              'w-full flex items-center justify-between p-4 rounded-[var(--radius-md)]',\n              'bg-primary-500 hover:bg-primary-400',\n              'transition-all duration-[var(--duration-fast)]',\n              'text-left group',\n              'hover:scale-[1.01] active:scale-[0.99]'\n            )}\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-ink-900/20 rounded-[var(--radius-sm)] group-hover:bg-ink-900/30 transition-colors\">\n                <primaryAction.icon className=\"w-5 h-5 text-ink-900\" />\n              </div>\n              <div>\n                <div className=\"text-body-medium text-ink-900 mb-0.5\">{primaryAction.title}</div>\n                <div className=\"text-tiny text-ink-800\">\n                  {primaryAction.subtitle}\n                  {primaryAction.estimatedTime && `  ${primaryAction.estimatedTime}`}\n                </div>\n              </div>\n            </div>\n            {primaryAction.badge && (\n              <div className=\"text-tiny text-mono bg-ink-900/20 px-2.5 py-1 rounded-full text-ink-900 font-medium\">\n                {primaryAction.badge}\n              </div>\n            )}\n          </button>\n        )}\n\n        {/* Secondary Actions - Medium prominence */}\n        {secondaryActions.map(action => (\n          <button\n            key={action.id}\n            onClick={action.action}\n            className={cn(\n              'w-full flex items-center justify-between p-3 rounded-[var(--radius-md)]',\n              'bg-surface-700 hover:bg-surface-600 border border-surface-600',\n              'transition-all duration-[var(--duration-fast)]',\n              'text-left group',\n              'hover:border-surface-500'\n            )}\n          >\n            <div className=\"flex items-center gap-3\">\n              <action.icon className=\"w-4 h-4 text-ink-400 group-hover:text-ink-300 transition-colors\" />\n              <div>\n                <span className=\"text-small text-ink-200 group-hover:text-ink-100 transition-colors\">\n                  {action.title}\n                </span>\n                <div className=\"text-tiny text-ink-400 mt-0.5\">\n                  {action.subtitle}\n                  {action.estimatedTime && `  ${action.estimatedTime}`}\n                </div>\n              </div>\n            </div>\n            {action.badge && (\n              <div className=\"text-tiny text-mono bg-surface-600 px-2 py-0.5 rounded text-ink-400 border border-surface-500\">\n                {action.badge}\n              </div>\n            )}\n          </button>\n        ))}\n\n        {/* Tertiary Actions - Subtle */}\n        {tertiaryActions.map(action => (\n          <button\n            key={action.id}\n            onClick={action.action}\n            className={cn(\n              'w-full flex items-center justify-between p-2.5 rounded-[var(--radius-sm)]',\n              'hover:bg-surface-800/50',\n              'transition-colors duration-[var(--duration-fast)]',\n              'text-left group'\n            )}\n          >\n            <div className=\"flex items-center gap-2.5\">\n              <action.icon className=\"w-3.5 h-3.5 text-ink-500 group-hover:text-ink-400 transition-colors\" />\n              <div>\n                <span className=\"text-small text-ink-300 group-hover:text-ink-200 transition-colors\">\n                  {action.title}\n                </span>\n                <div className=\"text-tiny text-ink-500 mt-0.5\">{action.subtitle}</div>\n              </div>\n            </div>\n            {action.badge && (\n              <div className=\"text-tiny text-mono px-2 py-0.5 rounded text-ink-500\">\n                {action.badge}\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React, { useMemo } from 'react';\r\nimport { Zap, Clock, TrendingUp } from 'lucide-react';\r\nimport { MetricCard } from './MetricCard';\r\nimport { InsightChip } from './InsightChip';\r\nimport { RecommendedActions } from './RecommendedActions';\r\nimport type { PainEntry } from '../../types';\r\nimport '../tokens/fused-v2.css';\r\n\r\ninterface ClinicalDashboardProps {\r\n  entries: PainEntry[];\r\n  onLogNow: () => void;\r\n  onViewCalendar: () => void;\r\n  onViewAnalytics?: () => void;\r\n  onExport: () => void;\r\n  onOpenSettings?: () => void;\r\n  onOpenHelp?: () => void;\r\n}\r\n\r\nexport function ClinicalDashboard({\r\n  entries,\r\n  onLogNow,\r\n  onViewCalendar,\r\n  onViewAnalytics,\r\n  onExport,\r\n  onOpenSettings,\r\n  onOpenHelp,\r\n}: ClinicalDashboardProps) {\r\n  const analytics = useMemo(() => {\r\n    if (entries.length === 0) {\r\n      return {\r\n        avgPain: 0,\r\n        delta: 0,\r\n        sparkline: [],\r\n        daysTracked: 0,\r\n        variability: 0,\r\n        lastEntry: null,\r\n        entriesThisWeek: 0,\r\n        recentEntries: [] as Array<{ id: PainEntry['id']; timestamp: string; pain: number; locationCount: number; symptomCount: number }>,\r\n        topLocations: [] as Array<{ label: string; count: number }>,\r\n        topSymptoms: [] as Array<{ label: string; count: number }>,\r\n        insights: [],\r\n      };\r\n    }\r\n\r\n    const sorted = [...entries].sort(\r\n      (a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\r\n    );\r\n\r\n    // Last 7 days\r\n    const now = new Date();\r\n    const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n    const recent = sorted.filter(e => new Date(e.timestamp) >= sevenDaysAgo);\r\n    const previous = sorted.filter(e => {\r\n      const date = new Date(e.timestamp);\r\n      const fourteenDaysAgo = new Date(now.getTime() - 14 * 24 * 60 * 60 * 1000);\r\n      return date >= fourteenDaysAgo && date < sevenDaysAgo;\r\n    });\r\n\r\n    const avgPain =\r\n      recent.length > 0\r\n        ? recent.reduce((sum, e) => sum + e.baselineData.pain, 0) / recent.length\r\n        : 0;\r\n\r\n    const prevAvgPain =\r\n      previous.length > 0\r\n        ? previous.reduce((sum, e) => sum + e.baselineData.pain, 0) / previous.length\r\n        : avgPain;\r\n\r\n    const delta = avgPain - prevAvgPain;\r\n\r\n    // Sparkline (last 7 values)\r\n    const sparkline = recent.slice(-7).map(e => e.baselineData.pain);\r\n\r\n    // Variability (rolling SD)\r\n    const mean = avgPain;\r\n    const variance =\r\n      recent.length > 1\r\n        ? recent.reduce((sum, e) => sum + Math.pow(e.baselineData.pain - mean, 2), 0) /\r\n          recent.length\r\n        : 0;\r\n    const variability = Math.sqrt(variance);\r\n\r\n    // Days tracked\r\n    const uniqueDays = new Set(recent.map(e => new Date(e.timestamp).toDateString())).size;\r\n\r\n    // Generate insights\r\n    const insights = [];\r\n\r\n    if (delta < -0.5) {\r\n      insights.push({\r\n        statement: `Pain trending down ${Math.abs(delta).toFixed(1)} points vs last week`,\r\n        confidence: delta < -1 ? 3 : 2,\r\n        rationale: `Your 7-day average is ${avgPain.toFixed(1)}, compared to ${prevAvgPain.toFixed(1)} the previous week. This represents a ${Math.abs((delta / prevAvgPain) * 100).toFixed(0)}% improvement.`,\r\n      });\r\n    }\r\n\r\n    if (variability > 2) {\r\n      insights.push({\r\n        statement: `High pain variability detected (SD: ${variability.toFixed(1)})`,\r\n        confidence: 2,\r\n        rationale: `Your pain levels vary significantly day-to-day. This could indicate external triggers or inconsistent management. Consider tracking context factors.`,\r\n      });\r\n    }\r\n\r\n    if (uniqueDays >= 6) {\r\n      insights.push({\r\n        statement: `Excellent tracking consistency (${uniqueDays}/7 days)`,\r\n        confidence: 3,\r\n        rationale: `You've logged pain on ${uniqueDays} out of the last 7 days. Consistent tracking helps identify patterns and measure treatment effectiveness.`,\r\n      });\r\n    }\r\n\r\n    // Recent entries (last 5) and lightweight 7-day highlights.\r\n    const recentEntries = [...sorted]\r\n      .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())\r\n      .slice(0, 5)\r\n      .map(entry => ({\r\n        id: entry.id,\r\n        timestamp: entry.timestamp,\r\n        pain: entry.baselineData.pain,\r\n        locationCount: Array.isArray(entry.baselineData.locations) ? entry.baselineData.locations.length : 0,\r\n        symptomCount: Array.isArray(entry.baselineData.symptoms) ? entry.baselineData.symptoms.length : 0,\r\n      }));\r\n\r\n    const locationCounts = new Map<string, number>();\r\n    const symptomCounts = new Map<string, number>();\r\n\r\n    for (const entry of recent) {\r\n      for (const location of entry.baselineData.locations ?? []) {\r\n        locationCounts.set(location, (locationCounts.get(location) ?? 0) + 1);\r\n      }\r\n      for (const symptom of entry.baselineData.symptoms ?? []) {\r\n        symptomCounts.set(symptom, (symptomCounts.get(symptom) ?? 0) + 1);\r\n      }\r\n    }\r\n\r\n    const topLocations = [...locationCounts.entries()]\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([label, count]) => ({ label, count }));\r\n\r\n    const topSymptoms = [...symptomCounts.entries()]\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([label, count]) => ({ label, count }));\r\n\r\n    return {\r\n      avgPain,\r\n      delta,\r\n      sparkline,\r\n      daysTracked: uniqueDays,\r\n      variability,\r\n      lastEntry: sorted[sorted.length - 1],\r\n      entriesThisWeek: recent.length,\r\n      recentEntries,\r\n      topLocations,\r\n      topSymptoms,\r\n      insights: insights as Array<{ statement: string; confidence: 1 | 2 | 3; rationale: string }>,\r\n    };\r\n  }, [entries]);\r\n\r\n  const getTimeSinceLastEntry = () => {\r\n    if (!analytics.lastEntry) return 'Never';\r\n\r\n    const diff = Date.now() - new Date(analytics.lastEntry.timestamp).getTime();\r\n    const hours = Math.floor(diff / (1000 * 60 * 60));\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days}d ago`;\r\n    if (hours > 0) return `${hours}h ago`;\r\n    return 'Just now';\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"max-w-7xl mx-auto space-y-6\">\r\n        {/* Header */}\r\n        <div className=\"surface-card relative overflow-hidden\">\r\n          <div\r\n            aria-hidden\r\n            className=\"absolute top-0 left-0 right-0 h-px\"\r\n            style={{\r\n              backgroundImage:\r\n                'linear-gradient(90deg, transparent, var(--primary-500), transparent)',\r\n              opacity: 0.6,\r\n            }}\r\n          />\r\n          <div aria-hidden className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n            <div\r\n              className=\"absolute -top-28 -right-28 h-64 w-64 rounded-full\"\r\n              style={{\r\n                backgroundColor: 'var(--primary-500)',\r\n                opacity: 0.08,\r\n                filter: 'blur(48px)',\r\n              }}\r\n            />\r\n            <div\r\n              className=\"absolute -bottom-28 -left-28 h-64 w-64 rounded-full\"\r\n              style={{\r\n                backgroundColor: 'var(--good-500)',\r\n                opacity: 0.06,\r\n                filter: 'blur(56px)',\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"relative flex items-start justify-between gap-4 flex-wrap\">\r\n            <div>\r\n              <h1 className=\"text-display text-ink-50 mb-1\">Today</h1>\r\n              <p className=\"text-small text-ink-400\">\r\n                {new Date().toLocaleDateString('en-US', {\r\n                  weekday: 'long',\r\n                  month: 'long',\r\n                  day: 'numeric',\r\n                })}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center gap-3 flex-wrap justify-end\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Clock className=\"w-4 h-4 text-ink-500\" />\r\n                <span className=\"text-small text-ink-400\">\r\n                  Last entry: {getTimeSinceLastEntry()}\r\n                </span>\r\n              </div>\r\n\r\n              {onViewAnalytics && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onViewAnalytics}\r\n                  className=\"inline-flex items-center gap-1.5 rounded-full bg-surface-700 text-ink-100 px-3 py-1.5 text-xs font-medium border border-surface-600 hover:bg-surface-600 transition-colors\"\r\n                >\r\n                  <TrendingUp className=\"w-3 h-3\" />\r\n                  View analytics\r\n                </button>\r\n              )}\r\n\r\n              {(onOpenSettings || onOpenHelp) && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  {onOpenHelp && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={onOpenHelp}\r\n                      className=\"px-3 py-1.5 rounded-full text-xs font-medium bg-surface-700 text-ink-100 border border-surface-600 hover:bg-surface-600 transition-colors\"\r\n                    >\r\n                      Need help?\r\n                    </button>\r\n                  )}\r\n                  {onOpenSettings && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={onOpenSettings}\r\n                      className=\"px-3 py-1.5 rounded-full text-xs font-medium bg-surface-700 text-ink-100 border border-surface-600 hover:bg-surface-600 transition-colors\"\r\n                    >\r\n                      Adjust settings\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recommended Actions - AI-driven priority feed */}\r\n        <RecommendedActions\r\n          entries={entries}\r\n          onLogNow={onLogNow}\r\n          onViewCalendar={onViewCalendar}\r\n          onViewAnalytics={onViewAnalytics || (() => {})}\r\n          onExport={onExport}\r\n        />\r\n\r\n        {/* KPI Metrics */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <MetricCard\r\n            title=\"Avg Pain (7d)\"\r\n            value={analytics.avgPain.toFixed(1)}\r\n            unit=\"/10\"\r\n            delta={{\r\n              value: -analytics.delta,\r\n              direction: analytics.delta < -0.3 ? 'down' : analytics.delta > 0.3 ? 'up' : 'neutral',\r\n              label: 'vs last week',\r\n            }}\r\n            sparkline={analytics.sparkline}\r\n            severity={Math.round(analytics.avgPain) as 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10}\r\n          />\r\n\r\n          <MetricCard\r\n            title=\"Tracking Streak\"\r\n            value={analytics.daysTracked}\r\n            unit=\"days\"\r\n            tooltip=\"Tracking streak = the number of unique days you logged at least one entry in the last 7 days.\"\r\n            delta={{\r\n              value: analytics.daysTracked >= 5 ? 1 : -1,\r\n              direction: analytics.daysTracked >= 5 ? 'up' : 'down',\r\n              label: 'this week',\r\n            }}\r\n          />\r\n\r\n          <MetricCard\r\n            title=\"Variability Index\"\r\n            value={analytics.variability.toFixed(1)}\r\n            tooltip=\"Variability measures how much your pain fluctuates over the last 7 days (rolling standard deviation). Lower = steadier pain; higher = more unpredictable flares.\"\r\n            delta={{\r\n              value: 0,\r\n              direction: 'neutral',\r\n              label: 'rolling SD',\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Recent activity + 7-day highlights */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n          <div className=\"surface-card lg:col-span-2\">\r\n            <div className=\"flex items-center justify-between gap-3 mb-4 flex-wrap\">\r\n              <div>\r\n                <h2 className=\"text-body-medium text-ink-100\">Recent entries</h2>\r\n                <p className=\"text-small text-ink-400\">A quick glance at your latest check-ins.</p>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                onClick={onViewCalendar}\r\n                className=\"inline-flex items-center gap-1.5 rounded-full bg-surface-700 text-ink-100 px-3 py-1.5 text-xs font-medium border border-surface-600 hover:bg-surface-600 transition-colors\"\r\n              >\r\n                View calendar\r\n              </button>\r\n            </div>\r\n\r\n            {analytics.recentEntries.length === 0 ? (\r\n              <p className=\"text-small text-ink-400\">No entries yet.</p>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {analytics.recentEntries.map(entry => {\r\n                  const when = (() => {\r\n                    try {\r\n                      return new Date(entry.timestamp).toLocaleString(undefined, {\r\n                        weekday: 'short',\r\n                        month: 'short',\r\n                        day: 'numeric',\r\n                        hour: 'numeric',\r\n                        minute: '2-digit',\r\n                      });\r\n                    } catch {\r\n                      return 'Recently';\r\n                    }\r\n                  })();\r\n\r\n                  return (\r\n                    <div\r\n                      key={String(entry.id)}\r\n                      className=\"flex items-center justify-between gap-3 rounded-xl bg-surface-800/60 border border-surface-700 px-4 py-3\"\r\n                    >\r\n                      <div className=\"min-w-0\">\r\n                        <div className=\"text-small text-ink-200 truncate\">{when}</div>\r\n                        <div className=\"text-xs text-ink-500\">\r\n                          {entry.locationCount > 0 ? `${entry.locationCount} location${entry.locationCount === 1 ? '' : 's'}` : 'No locations'}\r\n                          {'  '}\r\n                          {entry.symptomCount > 0 ? `${entry.symptomCount} symptom${entry.symptomCount === 1 ? '' : 's'}` : 'No symptoms'}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-baseline gap-1 rounded-full bg-surface-700 px-3 py-1 border border-surface-600\">\r\n                        <span className=\"text-body-medium text-ink-50\">{entry.pain}</span>\r\n                        <span className=\"text-xs text-ink-500\">/10</span>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"surface-card\">\r\n            <h2 className=\"text-body-medium text-ink-200 mb-3\">7-day highlights</h2>\r\n            <div className=\"text-small text-ink-300 space-y-3\">\r\n              <div className=\"flex items-center justify-between gap-3\">\r\n                <span className=\"text-ink-400\">Entries</span>\r\n                <span className=\"text-ink-100 font-medium\">{analytics.entriesThisWeek}</span>\r\n              </div>\r\n\r\n              <div>\r\n                <p className=\"text-ink-400 mb-2\">Top locations</p>\r\n                {analytics.topLocations.length === 0 ? (\r\n                  <p className=\"text-small text-ink-500\">None tagged yet.</p>\r\n                ) : (\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {analytics.topLocations.map(item => (\r\n                      <span\r\n                        key={item.label}\r\n                        className=\"inline-flex items-center gap-2 rounded-full bg-surface-700 border border-surface-600 px-3 py-1 text-xs text-ink-200\"\r\n                      >\r\n                        <span className=\"truncate max-w-[10rem]\">{item.label}</span>\r\n                        <span className=\"text-ink-500\">{item.count}</span>\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <p className=\"text-ink-400 mb-2\">Top symptoms</p>\r\n                {analytics.topSymptoms.length === 0 ? (\r\n                  <p className=\"text-small text-ink-500\">None tagged yet.</p>\r\n                ) : (\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {analytics.topSymptoms.map(item => (\r\n                      <span\r\n                        key={item.label}\r\n                        className=\"inline-flex items-center gap-2 rounded-full bg-surface-700 border border-surface-600 px-3 py-1 text-xs text-ink-200\"\r\n                      >\r\n                        <span className=\"truncate max-w-[10rem]\">{item.label}</span>\r\n                        <span className=\"text-ink-500\">{item.count}</span>\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Insights */}\r\n        {analytics.insights.length > 0 && (\r\n          <div className=\"surface-card\">\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n              <Zap className=\"w-5 h-5 text-primary-500\" />\r\n              <h2 className=\"text-body-medium text-ink-100\">Insights</h2>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {analytics.insights.map((insight, i) => (\r\n                <InsightChip\r\n                  key={i}\r\n                  statement={insight.statement}\r\n                  confidence={insight.confidence}\r\n                  rationale={insight.rationale}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Next Steps */}\r\n        <div className=\"surface-card\">\r\n          <h2 className=\"text-body-medium text-ink-200 mb-3\">Next Steps</h2>\r\n          <div className=\"text-small text-ink-300 space-y-2\">\r\n            <p> Continue daily tracking for pattern detection</p>\r\n            <p> Review calendar for weekly trends</p>\r\n            <p> Share 7-day report with provider before next visit</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export function parseFreeformList(text: string): string[] {\r\n  const normalized = text\r\n    .split(/[,\\n]/g)\r\n    .map(item => item.trim())\r\n    .filter(Boolean);\r\n\r\n  // De-dupe while preserving order\r\n  const seen = new Set<string>();\r\n  const result: string[] = [];\r\n  for (const item of normalized) {\r\n    const key = item.toLowerCase();\r\n    if (seen.has(key)) continue;\r\n    seen.add(key);\r\n    result.push(item);\r\n  }\r\n  return result;\r\n}\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { ChevronLeft, Check, Mic, MicOff } from 'lucide-react';\r\nimport { cn } from '../utils';\r\nimport { useAdaptiveCopy } from '../../contexts/useTone';\r\nimport { quickLogCopy } from '../../content/microcopy';\r\nimport { parseFreeformList } from '../../utils/parseFreeformList';\r\nimport type {\r\n  SpeechRecognition,\r\n  SpeechRecognitionConstructor,\r\n  SpeechRecognitionErrorEvent,\r\n  SpeechRecognitionEvent,\r\n} from '../../types/speech';\r\nimport '../tokens/fused-v2.css';\r\n\r\ntype MedicationAdherence = 'as_prescribed' | 'partial' | 'missed' | 'not_applicable';\r\n\r\nexport type QuickLogOneScreenData = {\r\n  pain: number;\r\n  locations: string[];\r\n  symptoms: string[];\r\n  notes: string;\r\n  sleep?: number;\r\n  activityLevel?: number;\r\n  medicationAdherence?: MedicationAdherence;\r\n  activities?: string[];\r\n  triggers?: string[];\r\n};\r\n\r\ninterface QuickLogOneScreenProps {\r\n  mode?: 'new' | 'edit';\r\n  initialData?: Partial<QuickLogOneScreenData>;\r\n  onComplete: (data: QuickLogOneScreenData) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst PAIN_LABELS = [\r\n  'No pain',\r\n  'Very mild',\r\n  'Mild',\r\n  'Uncomfortable',\r\n  'Moderate',\r\n  'Distracting',\r\n  'Distressing',\r\n  'Intense',\r\n  'Very intense',\r\n  'Severe',\r\n  'Unbearable',\r\n];\r\n\r\nconst LOCATION_TAGS = [\r\n  'Lower back',\r\n  'Upper back',\r\n  'Neck',\r\n  'Shoulder (L)',\r\n  'Shoulder (R)',\r\n  'Hip (L)',\r\n  'Hip (R)',\r\n  'Knee (L)',\r\n  'Knee (R)',\r\n  'Head',\r\n  'Abdomen',\r\n];\r\n\r\nconst SYMPTOM_TAGS = [\r\n  'Aching',\r\n  'Sharp',\r\n  'Burning',\r\n  'Throbbing',\r\n  'Stabbing',\r\n  'Tingling',\r\n  'Numbness',\r\n  'Stiffness',\r\n  'Weakness',\r\n];\r\n\r\ntype SpeechRecognitionWindow = Window & {\r\n  webkitSpeechRecognition?: SpeechRecognitionConstructor;\r\n  SpeechRecognition?: SpeechRecognitionConstructor;\r\n};\r\n\r\nfunction useQuickVoiceNotes() {\r\n  const [isSupported, setIsSupported] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [voiceError, setVoiceError] = useState<string | null>(null);\r\n  const recognitionRef = useRef<SpeechRecognition | null>(null);\r\n  const lastTranscriptRef = useRef('');\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const speechWindow = window as unknown as SpeechRecognitionWindow;\r\n    const SpeechRecognitionCtor =\r\n      speechWindow.webkitSpeechRecognition || speechWindow.SpeechRecognition;\r\n\r\n    if (SpeechRecognitionCtor) {\r\n      setIsSupported(true);\r\n      const recognition = new SpeechRecognitionCtor();\r\n      recognition.continuous = true;\r\n      recognition.interimResults = true;\r\n      recognition.onresult = (event: SpeechRecognitionEvent) => {\r\n        const resultsArray = Array.from(event.results);\r\n        const finalResults = resultsArray.filter(result => result.isFinal);\r\n        const relevantResults = finalResults.length > 0 ? finalResults : resultsArray;\r\n\r\n        const combinedTranscript = relevantResults\r\n          .map(result => result[0])\r\n          .map(r => r?.transcript ?? '')\r\n          .join('')\r\n          .trim();\r\n\r\n        if (combinedTranscript === lastTranscriptRef.current) return;\r\n        lastTranscriptRef.current = combinedTranscript;\r\n        setTranscript(combinedTranscript);\r\n      };\r\n      recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\r\n        setIsListening(false);\r\n        const errorMap: Record<string, string> = {\r\n          'not-allowed': 'Microphone permissions were denied.',\r\n          network: 'Speech service not reachable right now.',\r\n          'no-speech': 'No speech detected. Try again when ready.',\r\n        };\r\n        const friendlyMessage =\r\n          (event?.error && errorMap[event.error]) ||\r\n          'Voice input stopped. Please verify microphone permissions.';\r\n        console.warn('Voice recognition error', event);\r\n        setVoiceError(friendlyMessage);\r\n      };\r\n      recognition.onend = () => setIsListening(false);\r\n      recognitionRef.current = recognition;\r\n    }\r\n\r\n    return () => {\r\n      recognitionRef.current?.stop();\r\n      recognitionRef.current = null;\r\n    };\r\n  }, []);\r\n\r\n  const startListening = useCallback(() => {\r\n    if (recognitionRef.current && !isListening) {\r\n      setTranscript('');\r\n      setVoiceError(null);\r\n      lastTranscriptRef.current = '';\r\n      try {\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n      } catch (error) {\r\n        console.warn('Voice recognition failed to start', error);\r\n        setVoiceError('Unable to start voice input. Please check microphone permissions.');\r\n        setIsListening(false);\r\n      }\r\n    }\r\n  }, [isListening]);\r\n\r\n  const stopListening = useCallback(() => {\r\n    if (recognitionRef.current && isListening) {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    }\r\n  }, [isListening]);\r\n\r\n  const resetTranscript = useCallback(() => setTranscript(''), []);\r\n  const clearVoiceError = useCallback(() => setVoiceError(null), []);\r\n\r\n  return {\r\n    isSupported,\r\n    isListening,\r\n    transcript,\r\n    startListening,\r\n    stopListening,\r\n    resetTranscript,\r\n    voiceError,\r\n    clearVoiceError,\r\n  };\r\n}\r\n\r\nfunction useAudioNoteRecorder() {\r\n  const [isSupported, setIsSupported] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [audioUrl, setAudioUrl] = useState<string | null>(null);\r\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const recorderRef = useRef<MediaRecorder | null>(null);\r\n  const chunksRef = useRef<BlobPart[]>([]);\r\n\r\n  useEffect(() => {\r\n    const supported =\r\n      typeof window !== 'undefined' &&\r\n      typeof navigator !== 'undefined' &&\r\n      !!navigator.mediaDevices?.getUserMedia &&\r\n      typeof MediaRecorder !== 'undefined';\r\n    setIsSupported(supported);\r\n\r\n    return () => {\r\n      if (audioUrl) URL.revokeObjectURL(audioUrl);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const stop = useCallback(() => {\r\n    if (!recorderRef.current) return;\r\n    try {\r\n      recorderRef.current.stop();\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }, []);\r\n\r\n  const start = useCallback(async () => {\r\n    if (!isSupported || isRecording) return;\r\n\r\n    try {\r\n      setError(null);\r\n      chunksRef.current = [];\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new MediaRecorder(stream);\r\n      recorderRef.current = recorder;\r\n\r\n      recorder.ondataavailable = event => {\r\n        if (event.data && event.data.size > 0) chunksRef.current.push(event.data);\r\n      };\r\n\r\n      recorder.onerror = () => {\r\n        setError('Audio recording failed. Please try again.');\r\n        setIsRecording(false);\r\n      };\r\n\r\n      recorder.onstop = () => {\r\n        setIsRecording(false);\r\n        try {\r\n          stream.getTracks().forEach(t => t.stop());\r\n        } catch {\r\n          // ignore\r\n        }\r\n\r\n        const blob = new Blob(chunksRef.current, { type: recorder.mimeType || 'audio/webm' });\r\n        setAudioBlob(blob);\r\n        if (audioUrl) URL.revokeObjectURL(audioUrl);\r\n        setAudioUrl(URL.createObjectURL(blob));\r\n      };\r\n\r\n      recorder.start();\r\n      setIsRecording(true);\r\n    } catch (err) {\r\n      console.warn('Audio note recording failed', err);\r\n      setError('Microphone permission is required to record a voice note.');\r\n      setIsRecording(false);\r\n    }\r\n  }, [audioUrl, isRecording, isSupported]);\r\n\r\n  const clear = useCallback(() => {\r\n    if (audioUrl) URL.revokeObjectURL(audioUrl);\r\n    setAudioUrl(null);\r\n    setAudioBlob(null);\r\n    setError(null);\r\n    chunksRef.current = [];\r\n  }, [audioUrl]);\r\n\r\n  return {\r\n    isSupported,\r\n    isRecording,\r\n    audioUrl,\r\n    audioBlob,\r\n    error,\r\n    start,\r\n    stop,\r\n    clear,\r\n  };\r\n}\r\n\r\nexport function QuickLogOneScreen({ initialData, onComplete, onCancel }: QuickLogOneScreenProps) {\r\n  const [pain, setPain] = useState(5);\r\n  const [locations, setLocations] = useState<string[]>([]);\r\n  const [symptoms, setSymptoms] = useState<string[]>([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [voiceMode, setVoiceMode] = useState(false);\r\n\r\n  const [sleep, setSleep] = useState(5);\r\n  const [sleepSet, setSleepSet] = useState(false);\r\n  const [activityLevel, setActivityLevel] = useState(5);\r\n  const [activityLevelSet, setActivityLevelSet] = useState(false);\r\n  const [medicationAdherence, setMedicationAdherence] = useState<MedicationAdherence | null>(null);\r\n  const [activitiesText, setActivitiesText] = useState('');\r\n  const [dietTriggersText, setDietTriggersText] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (!initialData) return;\r\n\r\n    if (typeof initialData.pain === 'number') setPain(initialData.pain);\r\n    if (Array.isArray(initialData.locations)) setLocations(initialData.locations);\r\n    if (Array.isArray(initialData.symptoms)) setSymptoms(initialData.symptoms);\r\n    if (typeof initialData.notes === 'string') setNotes(initialData.notes);\r\n\r\n    if (typeof initialData.sleep === 'number') {\r\n      setSleep(initialData.sleep);\r\n      setSleepSet(true);\r\n    } else {\r\n      setSleepSet(false);\r\n    }\r\n\r\n    if (typeof initialData.activityLevel === 'number') {\r\n      setActivityLevel(initialData.activityLevel);\r\n      setActivityLevelSet(true);\r\n    } else {\r\n      setActivityLevelSet(false);\r\n    }\r\n\r\n    if (typeof initialData.medicationAdherence === 'string') {\r\n      setMedicationAdherence(initialData.medicationAdherence);\r\n    } else {\r\n      setMedicationAdherence(null);\r\n    }\r\n\r\n    if (Array.isArray(initialData.activities) && initialData.activities.length > 0) {\r\n      setActivitiesText(initialData.activities.join(', '));\r\n    } else {\r\n      setActivitiesText('');\r\n    }\r\n\r\n    if (Array.isArray(initialData.triggers) && initialData.triggers.length > 0) {\r\n      setDietTriggersText(initialData.triggers.join(', '));\r\n    } else {\r\n      setDietTriggersText('');\r\n    }\r\n  }, [initialData]);\r\n\r\n  // Adaptive copy based on patient state\r\n  const painLabel = useAdaptiveCopy(quickLogCopy.painSliderLabel);\r\n  const painHint = useAdaptiveCopy(quickLogCopy.painSliderHint);\r\n  const locationsLabel = useAdaptiveCopy(quickLogCopy.locationsLabel);\r\n  const locationsHint = useAdaptiveCopy(quickLogCopy.locationsHint);\r\n  const notesLabel = useAdaptiveCopy(quickLogCopy.notesLabel);\r\n  const notesPlaceholder = useAdaptiveCopy(quickLogCopy.notesPlaceholder);\r\n  const saveBtn = useAdaptiveCopy(quickLogCopy.saveButton);\r\n\r\n  const {\r\n    isSupported: voiceSupported,\r\n    isListening,\r\n    transcript,\r\n    startListening,\r\n    stopListening,\r\n    resetTranscript,\r\n    voiceError,\r\n    clearVoiceError,\r\n  } = useQuickVoiceNotes();\r\n\r\n  const audioRecorder = useAudioNoteRecorder();\r\n\r\n  const toggleTag = (tag: string, list: string[], setter: (val: string[]) => void) => {\r\n    if (list.includes(tag)) {\r\n      setter(list.filter(t => t !== tag));\r\n    } else {\r\n      setter([...list, tag]);\r\n    }\r\n  };\r\n\r\n  const handlePainChange = (value: number) => setPain(value);\r\n\r\n  const hasNavigator = typeof navigator !== 'undefined';\r\n  const isOffline = hasNavigator && navigator.onLine === false;\r\n  const connectionStatus = isOffline\r\n    ? 'Offline: works only if your browser provides local speech.'\r\n    : 'Uses your device speech service. May rely on your browser/OS (not guaranteed offline).';\r\n\r\n  useEffect(() => {\r\n    if (!voiceMode && isListening) stopListening();\r\n    if (!voiceMode) clearVoiceError();\r\n  }, [clearVoiceError, isListening, stopListening, voiceMode]);\r\n\r\n  const handleInsertTranscript = () => {\r\n    if (!transcript) return;\r\n    setNotes(prev => (prev ? `${prev}\\n${transcript}` : transcript));\r\n    resetTranscript();\r\n  };\r\n\r\n  const saveDisabledReason = useMemo(() => {\r\n    // Keep Quick Log forgiving: allow saving even without tags/notes.\r\n    // (Pain is always present.)\r\n    return null as string | null;\r\n  }, []);\r\n\r\n  const handleSave = useCallback(() => {\r\n    const activities = parseFreeformList(activitiesText);\r\n    const triggers = parseFreeformList(dietTriggersText);\r\n\r\n    onComplete({\r\n      pain,\r\n      locations,\r\n      symptoms,\r\n      notes,\r\n      sleep: sleepSet ? sleep : undefined,\r\n      activityLevel: activityLevelSet ? activityLevel : undefined,\r\n      medicationAdherence: medicationAdherence ?? undefined,\r\n      activities: activities.length > 0 ? activities : undefined,\r\n      triggers: triggers.length > 0 ? triggers : undefined,\r\n    });\r\n  }, [activitiesText, activityLevel, activityLevelSet, dietTriggersText, locations, medicationAdherence, notes, onComplete, pain, sleep, sleepSet, symptoms]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-surface-900 text-ink-100 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"sticky top-0 z-10 bg-surface-900/95 backdrop-blur-sm border-b border-surface-800\">\r\n        <div className=\"max-w-2xl mx-auto px-4 py-4 flex items-center justify-between\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className={cn(\r\n              'flex items-center gap-2 px-3 py-2 rounded-[var(--radius-md)]',\r\n              'text-small text-ink-300 hover:text-ink-100 hover:bg-surface-800',\r\n              'transition-colors duration-[var(--duration-fast)]'\r\n            )}\r\n          >\r\n            <ChevronLeft className=\"w-4 h-4\" />\r\n            Cancel\r\n          </button>\r\n          <div className=\"text-small text-ink-400 text-mono\">Quick Log</div>\r\n          <div className=\"w-[88px]\" />\r\n        </div>\r\n\r\n        <div className=\"px-4 pb-4\">\r\n          <div className=\"max-w-2xl mx-auto bg-surface-800 border border-surface-700 rounded-[var(--radius-lg)] p-4 flex flex-col gap-3 md:flex-row md:items-start md:justify-between\">\r\n            <div className=\"flex gap-3 items-start\">\r\n              {voiceSupported ? (\r\n                <Mic className=\"w-5 h-5 text-primary-400 mt-0.5\" aria-hidden=\"true\" />\r\n              ) : (\r\n                <MicOff className=\"w-5 h-5 text-ink-500 mt-0.5\" aria-hidden=\"true\" />\r\n              )}\r\n              <div>\r\n                <div className=\"text-body-medium text-ink-100\">Voice Mode</div>\r\n                <p className=\"text-small text-ink-400\">\r\n                  {voiceSupported\r\n                    ? connectionStatus\r\n                    : \"Voice mode isn't available in this browser. You can still use your operating system's built-in dictation features.\"}\r\n                </p>\r\n                {voiceError && (\r\n                  <p className=\"text-small text-danger-400\" role=\"alert\">\r\n                    {voiceError}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-tiny text-ink-500\">\r\n                {voiceMode ? 'On' : 'Off'}  {voiceSupported ? 'Device speech engine' : 'Unavailable'}\r\n              </span>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setVoiceMode(prev => !prev)}\r\n                disabled={!voiceSupported}\r\n                aria-pressed={voiceMode}\r\n                className={cn(\r\n                  'px-4 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                  'border border-surface-600 transition-colors duration-[var(--duration-fast)]',\r\n                  voiceMode\r\n                    ? 'bg-primary-500 text-ink-900 border-primary-500'\r\n                    : 'bg-surface-900 text-ink-200 hover:border-primary-500/60',\r\n                  !voiceSupported && 'opacity-60 cursor-not-allowed'\r\n                )}\r\n              >\r\n                {voiceMode ? 'Disable' : 'Enable'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-y-auto p-6\">\r\n        <div className=\"max-w-2xl mx-auto space-y-10\">\r\n          {/* Pain */}\r\n          <section className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-h2 text-ink-50 mb-2\">{painLabel}</h2>\r\n              <p className=\"text-small text-ink-400\">{painHint}</p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-center gap-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handlePainChange(Math.max(0, pain - 1))}\r\n                aria-label=\"Decrease pain level\"\r\n                className={cn(\r\n                  'flex items-center justify-center',\r\n                  'w-14 h-14 min-w-[56px] min-h-[56px]',\r\n                  'rounded-[var(--radius-md)]',\r\n                  'bg-surface-700 hover:bg-surface-600 border border-surface-600',\r\n                  'text-ink-200 hover:text-ink-100',\r\n                  'transition-colors duration-[var(--duration-fast)]',\r\n                  'text-h2 font-medium',\r\n                  'disabled:opacity-50 disabled:cursor-not-allowed'\r\n                )}\r\n                disabled={pain === 0}\r\n              >\r\n                \r\n              </button>\r\n\r\n              <div\r\n                className={cn(\r\n                  'p-8 rounded-[var(--radius-xl)] text-center flex-1',\r\n                  'bg-surface-800 border border-surface-700'\r\n                )}\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n              >\r\n                <div className=\"text-display text-mono mb-2 text-6xl font-bold text-primary-400\">\r\n                  {pain}\r\n                </div>\r\n                <div className=\"text-body-medium text-ink-100\">{PAIN_LABELS[pain]}</div>\r\n              </div>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handlePainChange(Math.min(10, pain + 1))}\r\n                aria-label=\"Increase pain level\"\r\n                className={cn(\r\n                  'flex items-center justify-center',\r\n                  'w-14 h-14 min-w-[56px] min-h-[56px]',\r\n                  'rounded-[var(--radius-md)]',\r\n                  'bg-surface-700 hover:bg-surface-600 border border-surface-600',\r\n                  'text-ink-200 hover:text-ink-100',\r\n                  'transition-colors duration-[var(--duration-fast)]',\r\n                  'text-h2 font-medium',\r\n                  'disabled:opacity-50 disabled:cursor-not-allowed'\r\n                )}\r\n                disabled={pain === 10}\r\n              >\r\n                +\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"pain-slider\" className=\"sr-only\">\r\n                Pain intensity slider. Use arrow keys or swipe to adjust.\r\n              </label>\r\n              <input\r\n                id=\"pain-slider\"\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"10\"\r\n                value={pain}\r\n                onChange={e => handlePainChange(Number(e.target.value))}\r\n                onKeyDown={e => {\r\n                  if (e.key === 'ArrowUp' || e.key === 'ArrowRight') {\r\n                    e.preventDefault();\r\n                    handlePainChange(Math.min(10, pain + 1));\r\n                  } else if (e.key === 'ArrowDown' || e.key === 'ArrowLeft') {\r\n                    e.preventDefault();\r\n                    handlePainChange(Math.max(0, pain - 1));\r\n                  }\r\n                }}\r\n                aria-label=\"Pain intensity\"\r\n                aria-valuemin={0}\r\n                aria-valuemax={10}\r\n                aria-valuenow={pain}\r\n                aria-valuetext={`${pain} of 10, ${PAIN_LABELS[pain]}`}\r\n                className=\"w-full h-12 cursor-pointer appearance-none bg-transparent\r\n                  [&::-webkit-slider-track]:h-2 [&::-webkit-slider-track]:bg-[color:var(--surface-600)]\r\n                  [&::-webkit-slider-track]:rounded-full\r\n                  [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6\r\n                  [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:rounded-full\r\n                  [&::-webkit-slider-thumb]:bg-[color:var(--primary-500)] [&::-webkit-slider-thumb]:shadow-lg\r\n                  [&::-moz-range-track]:h-2 [&::-moz-range-track]:bg-[color:var(--surface-600)]\r\n                  [&::-moz-range-track]:rounded-full\r\n                  [&::-moz-range-thumb]:w-6 [&::-moz-range-thumb]:h-6\r\n                  [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-[color:var(--primary-500)]\r\n                  [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:shadow-lg\r\n                  focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900\"\r\n              />\r\n\r\n              <div className=\"flex justify-between text-tiny text-ink-400 text-mono px-1\">\r\n                {Array.from({ length: 11 }, (_, i) => (\r\n                  <button\r\n                    type=\"button\"\r\n                    key={i}\r\n                    onClick={() => handlePainChange(i)}\r\n                    aria-label={`Set pain level to ${i}, ${PAIN_LABELS[i]}`}\r\n                    className={cn(\r\n                      'w-10 h-10 min-w-[40px] min-h-[40px] rounded flex items-center justify-center',\r\n                      'hover:bg-surface-700 transition-colors',\r\n                      'focus:outline-none focus:ring-2 focus:ring-primary-500',\r\n                      i === pain && 'bg-primary-500 text-ink-900 font-bold'\r\n                    )}\r\n                  >\r\n                    {i}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Locations & Symptoms */}\r\n          <section className=\"space-y-8\">\r\n            <div>\r\n              <h2 className=\"text-h2 text-ink-50 mb-2\">{locationsLabel}</h2>\r\n              <p className=\"text-small text-ink-400\">{locationsHint}</p>\r\n            </div>\r\n\r\n            <div aria-live=\"polite\" aria-atomic=\"true\" className=\"sr-only\">\r\n              {locations.length > 0\r\n                ? `${locations.length} location${locations.length > 1 ? 's' : ''} selected: ${locations.join(', ')}`\r\n                : 'No locations selected'}\r\n            </div>\r\n\r\n            <fieldset>\r\n              <legend className=\"sr-only\">Pain locations</legend>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {LOCATION_TAGS.map(tag => (\r\n                  <button\r\n                    type=\"button\"\r\n                    key={tag}\r\n                    onClick={() => toggleTag(tag, locations, setLocations)}\r\n                    role=\"checkbox\"\r\n                    aria-checked={locations.includes(tag)}\r\n                    aria-label={`${tag} location`}\r\n                    className={cn(\r\n                      'px-4 py-3 min-w-[56px] min-h-[56px] rounded-[var(--radius-full)] text-small',\r\n                      'border-2 transition-all duration-[var(--duration-fast)]',\r\n                      'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900',\r\n                      locations.includes(tag)\r\n                        ? 'bg-primary-500 border-primary-500 text-ink-900 font-medium'\r\n                        : 'bg-surface-800 border-surface-600 text-ink-200 hover:border-primary-500/50'\r\n                    )}\r\n                  >\r\n                    {locations.includes(tag) && (\r\n                      <Check className=\"w-3 h-3 inline mr-1\" aria-hidden=\"true\" />\r\n                    )}\r\n                    {tag}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </fieldset>\r\n\r\n            <div>\r\n              <h3 className=\"text-body-medium text-ink-200 mb-3\">What does it feel like?</h3>\r\n              <div aria-live=\"polite\" aria-atomic=\"true\" className=\"sr-only\">\r\n                {symptoms.length > 0\r\n                  ? `${symptoms.length} symptom${symptoms.length > 1 ? 's' : ''} selected: ${symptoms.join(', ')}`\r\n                  : 'No symptoms selected'}\r\n              </div>\r\n\r\n              <fieldset>\r\n                <legend className=\"sr-only\">Pain symptoms</legend>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {SYMPTOM_TAGS.map(tag => (\r\n                    <button\r\n                      type=\"button\"\r\n                      key={tag}\r\n                      onClick={() => toggleTag(tag, symptoms, setSymptoms)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={symptoms.includes(tag)}\r\n                      aria-label={`${tag} symptom`}\r\n                      className={cn(\r\n                        'px-4 py-3 min-w-[56px] min-h-[56px] rounded-[var(--radius-full)] text-small',\r\n                        'border-2 transition-all duration-[var(--duration-fast)]',\r\n                        'focus:outline-none focus:ring-2 focus:ring-warn-500 focus:ring-offset-2 focus:ring-offset-surface-900',\r\n                        symptoms.includes(tag)\r\n                          ? 'bg-warn-500 border-warn-500 text-ink-900 font-medium'\r\n                          : 'bg-surface-800 border-surface-600 text-ink-200 hover:border-warn-500/50'\r\n                      )}\r\n                    >\r\n                      {symptoms.includes(tag) && (\r\n                        <Check className=\"w-3 h-3 inline mr-1\" aria-hidden=\"true\" />\r\n                      )}\r\n                      {tag}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </fieldset>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Optional Signals */}\r\n          <section className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-h2 text-ink-50 mb-2\">Optional signals</h2>\r\n              <p className=\"text-small text-ink-400\">These help correlations (sleep, activity, food).</p>\r\n            </div>\r\n\r\n            <div className=\"surface-card border border-surface-700 bg-surface-800/70 space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"sleep-quality\" className=\"block text-body-medium text-ink-200 mb-1\">\r\n                  Sleep quality\r\n                </label>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <input\r\n                    id=\"sleep-quality\"\r\n                    type=\"range\"\r\n                    min={0}\r\n                    max={10}\r\n                    step={1}\r\n                    value={sleep}\r\n                    onChange={e => {\r\n                      setSleep(Number(e.target.value));\r\n                      setSleepSet(true);\r\n                    }}\r\n                    className=\"w-full\"\r\n                    aria-label=\"Sleep quality from 0 to 10\"\r\n                  />\r\n                  <span className=\"text-small text-ink-300 w-16 text-right\" aria-live=\"polite\">\r\n                    {sleepSet ? sleep : ''}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-tiny text-ink-500 mt-1\">0 = very poor, 10 = excellent</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"activity-level\" className=\"block text-body-medium text-ink-200 mb-1\">\r\n                  Activity level\r\n                </label>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <input\r\n                    id=\"activity-level\"\r\n                    type=\"range\"\r\n                    min={0}\r\n                    max={10}\r\n                    step={1}\r\n                    value={activityLevel}\r\n                    onChange={e => {\r\n                      setActivityLevel(Number(e.target.value));\r\n                      setActivityLevelSet(true);\r\n                    }}\r\n                    className=\"w-full\"\r\n                    aria-label=\"Activity level from 0 to 10\"\r\n                  />\r\n                  <span className=\"text-small text-ink-300 w-16 text-right\" aria-live=\"polite\">\r\n                    {activityLevelSet ? activityLevel : ''}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-tiny text-ink-500 mt-1\">0 = none, 10 = very active</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"med-adherence\" className=\"block text-body-medium text-ink-200 mb-2\">\r\n                  Medication adherence\r\n                </label>\r\n                <select\r\n                  id=\"med-adherence\"\r\n                  value={medicationAdherence ?? ''}\r\n                  onChange={e =>\r\n                    setMedicationAdherence((e.target.value || null) as MedicationAdherence | null)\r\n                  }\r\n                  className={cn(\r\n                    'w-full p-3 rounded-[var(--radius-md)]',\r\n                    'bg-surface-900 border border-surface-600',\r\n                    'text-body text-ink-100',\r\n                    'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900 focus:border-transparent'\r\n                  )}\r\n                >\r\n                  <option value=\"\">Not logged</option>\r\n                  <option value=\"as_prescribed\">Taken as prescribed</option>\r\n                  <option value=\"partial\">Partially taken</option>\r\n                  <option value=\"missed\">Missed</option>\r\n                  <option value=\"not_applicable\">Not applicable</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"activities\" className=\"block text-body-medium text-ink-200 mb-2\">\r\n                  Activities/exercise (comma or new line)\r\n                </label>\r\n                <textarea\r\n                  id=\"activities\"\r\n                  value={activitiesText}\r\n                  onChange={e => setActivitiesText(e.target.value)}\r\n                  placeholder=\"e.g., physio, walk, stretching\"\r\n                  className={cn(\r\n                    'w-full h-24 p-3 rounded-[var(--radius-md)]',\r\n                    'bg-surface-900 border border-surface-600',\r\n                    'text-body text-ink-100 placeholder:text-ink-500',\r\n                    'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900 focus:border-transparent',\r\n                    'transition-all duration-[var(--duration-fast)] resize-none'\r\n                  )}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"diet-triggers\" className=\"block text-body-medium text-ink-200 mb-2\">\r\n                  Food/diet triggers (comma or new line)\r\n                </label>\r\n                <textarea\r\n                  id=\"diet-triggers\"\r\n                  value={dietTriggersText}\r\n                  onChange={e => setDietTriggersText(e.target.value)}\r\n                  placeholder=\"e.g., caffeine, spicy food, skipped meal\"\r\n                  className={cn(\r\n                    'w-full h-24 p-3 rounded-[var(--radius-md)]',\r\n                    'bg-surface-900 border border-surface-600',\r\n                    'text-body text-ink-100 placeholder:text-ink-500',\r\n                    'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900 focus:border-transparent',\r\n                    'transition-all duration-[var(--duration-fast)] resize-none'\r\n                  )}\r\n                />\r\n                <p className=\"text-tiny text-ink-500 mt-1\">Saved as triggers for analytics.</p>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Notes + Voice */}\r\n          <section className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-h2 text-ink-50 mb-2\">{notesLabel}</h2>\r\n              <p className=\"text-small text-ink-400\">Dictation works with your phone keyboard too.</p>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"pain-notes\" className=\"block text-body-medium text-ink-200 mb-2\">\r\n                Additional Notes\r\n              </label>\r\n              <textarea\r\n                id=\"pain-notes\"\r\n                value={notes}\r\n                onChange={e => setNotes(e.target.value)}\r\n                placeholder={notesPlaceholder}\r\n                inputMode=\"text\"\r\n                autoComplete=\"on\"\r\n                autoCorrect=\"on\"\r\n                autoCapitalize=\"sentences\"\r\n                enterKeyHint=\"done\"\r\n                aria-label=\"Additional notes about pain\"\r\n                aria-describedby=\"notes-hint notes-remaining\"\r\n                maxLength={500}\r\n                className={cn(\r\n                  'w-full h-36 p-4 rounded-[var(--radius-xl)]',\r\n                  'bg-surface-800 border border-surface-600',\r\n                  'text-body text-ink-100 placeholder:text-ink-500',\r\n                  'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900 focus:border-transparent',\r\n                  'transition-all duration-[var(--duration-fast)]',\r\n                  'resize-none'\r\n                )}\r\n              />\r\n              <div className=\"flex justify-between items-center mt-2\">\r\n                <span id=\"notes-hint\" className=\"text-small text-ink-400\">\r\n                  {notes.length === 0\r\n                    ? 'No notes yet'\r\n                    : `${notes.length} character${notes.length === 1 ? '' : 's'}`}\r\n                </span>\r\n                <span\r\n                  id=\"notes-remaining\"\r\n                  className=\"text-small text-ink-500\"\r\n                  aria-live=\"polite\"\r\n                  aria-atomic=\"true\"\r\n                >\r\n                  {500 - notes.length} remaining\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {voiceMode && voiceSupported && (\r\n              <div className=\"surface-card border border-surface-700 bg-surface-800/70\">\r\n                <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                  <div>\r\n                    <div className=\"text-body-medium text-ink-100\">Voice mode (speech-to-text)</div>\r\n                    <p className=\"text-small text-ink-400\">\r\n                      Uses your device speech service. {connectionStatus}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={isListening ? stopListening : startListening}\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                      'border border-surface-600 transition-colors duration-[var(--duration-fast)] flex items-center gap-2',\r\n                      isListening\r\n                        ? 'bg-danger-500 text-ink-900 border-danger-500'\r\n                        : 'bg-primary-500 text-ink-900 border-primary-500'\r\n                    )}\r\n                    aria-pressed={isListening}\r\n                    aria-label={isListening ? 'Stop voice input' : 'Start voice input'}\r\n                  >\r\n                    {isListening ? <MicOff className=\"w-4 h-4\" /> : <Mic className=\"w-4 h-4\" />}\r\n                    {isListening ? 'Stop' : 'Start'}\r\n                  </button>\r\n                </div>\r\n\r\n                {transcript && (\r\n                  <div className=\"mt-3 p-3 rounded-[var(--radius-md)] bg-surface-900 border border-surface-700\">\r\n                    <div className=\"text-small text-ink-300 mb-1\">Heard</div>\r\n                    <p className=\"text-body text-ink-100 mb-3\" aria-live=\"polite\">\r\n                      {transcript}\r\n                    </p>\r\n                    <div className=\"flex gap-2 flex-wrap\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={handleInsertTranscript}\r\n                        className={cn(\r\n                          'px-3 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                          'bg-primary-500 text-ink-900 hover:bg-primary-400 transition-colors'\r\n                        )}\r\n                      >\r\n                        Insert into notes\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={resetTranscript}\r\n                        className={cn(\r\n                          'px-3 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                          'bg-surface-900 text-ink-200 border border-surface-600 hover:border-primary-500/60 transition-colors'\r\n                        )}\r\n                      >\r\n                        Clear\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"surface-card border border-surface-700 bg-surface-800/70\">\r\n              <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                <div>\r\n                  <div className=\"text-body-medium text-ink-100\">Voice note (audio)</div>\r\n                  <p className=\"text-small text-ink-400\">\r\n                    Records audio on your device. This note is not saved into the entry yet  download if you want to keep it.\r\n                  </p>\r\n                  {audioRecorder.error && (\r\n                    <p className=\"text-small text-danger-400\" role=\"alert\">\r\n                      {audioRecorder.error}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={audioRecorder.isRecording ? audioRecorder.stop : audioRecorder.start}\r\n                    disabled={!audioRecorder.isSupported}\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                      'border border-surface-600 transition-colors duration-[var(--duration-fast)] flex items-center gap-2',\r\n                      audioRecorder.isRecording\r\n                        ? 'bg-danger-500 text-ink-900 border-danger-500'\r\n                        : 'bg-primary-500 text-ink-900 border-primary-500',\r\n                      !audioRecorder.isSupported && 'opacity-60 cursor-not-allowed'\r\n                    )}\r\n                    aria-pressed={audioRecorder.isRecording}\r\n                    aria-label={audioRecorder.isRecording ? 'Stop audio recording' : 'Start audio recording'}\r\n                  >\r\n                    {audioRecorder.isRecording ? <MicOff className=\"w-4 h-4\" /> : <Mic className=\"w-4 h-4\" />}\r\n                    {audioRecorder.isRecording ? 'Stop' : 'Record'}\r\n                  </button>\r\n                  {audioRecorder.audioUrl && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={audioRecorder.clear}\r\n                      className={cn(\r\n                        'px-4 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                        'bg-surface-900 text-ink-200 border border-surface-600 hover:border-primary-500/60 transition-colors'\r\n                      )}\r\n                    >\r\n                      Clear\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {!audioRecorder.isSupported && (\r\n                <p className=\"mt-3 text-small text-ink-400\">\r\n                  Audio recording isn\u0019t supported in this browser. You can still use dictation or Voice Mode.\r\n                </p>\r\n              )}\r\n\r\n              {audioRecorder.audioUrl && (\r\n                <div className=\"mt-4 space-y-3\">\r\n                  <audio controls src={audioRecorder.audioUrl} className=\"w-full\" />\r\n                  <div className=\"flex gap-2 flex-wrap\">\r\n                    <a\r\n                      href={audioRecorder.audioUrl}\r\n                      download={`pain-voice-note-${new Date().toISOString().slice(0, 19).replace(/[:T]/g, '-')}.webm`}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-[var(--radius-md)] text-small font-medium',\r\n                        'bg-primary-500 text-ink-900 hover:bg-primary-400 transition-colors inline-flex items-center'\r\n                      )}\r\n                    >\r\n                      Download voice note\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"sticky bottom-0 left-0 right-0 p-4 border-t border-surface-700 bg-surface-900/95 backdrop-blur-sm z-10\">\r\n        <div className=\"max-w-2xl mx-auto flex gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className={cn(\r\n              'px-6 py-4 rounded-[var(--radius-xl)]',\r\n              'min-h-[56px] min-w-[56px]',\r\n              'bg-surface-800 hover:bg-surface-700',\r\n              'text-body-medium text-ink-200 font-medium',\r\n              'transition-colors duration-[var(--duration-fast)]',\r\n              'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900'\r\n            )}\r\n          >\r\n            Cancel\r\n          </button>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleSave}\r\n            aria-disabled={!!saveDisabledReason}\r\n            className={cn(\r\n              'flex-1 px-6 py-4 rounded-[var(--radius-xl)]',\r\n              'min-h-[56px]',\r\n              'bg-primary-500 hover:bg-primary-400',\r\n              'text-body-medium text-ink-900 font-semibold',\r\n              'transition-colors duration-[var(--duration-fast)]',\r\n              'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900'\r\n            )}\r\n          >\r\n            {saveBtn}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QuickLogOneScreen;\r\n","// Lightweight weather service to fetch weather data from Open-Meteo (free, no API key required)\r\n// WMO Weather interpretation codes mapping\r\n// See: https://open-meteo.com/en/docs#weathervariables\r\nconst WEATHER_CODE_MAP = {\r\n    0: { condition: 'clear', isRaining: false },\r\n    1: { condition: 'mostly clear', isRaining: false },\r\n    2: { condition: 'partly cloudy', isRaining: false },\r\n    3: { condition: 'overcast', isRaining: false },\r\n    45: { condition: 'foggy', isRaining: false },\r\n    48: { condition: 'foggy', isRaining: false },\r\n    51: { condition: 'light drizzle', isRaining: true },\r\n    53: { condition: 'drizzle', isRaining: true },\r\n    55: { condition: 'heavy drizzle', isRaining: true },\r\n    56: { condition: 'freezing drizzle', isRaining: true },\r\n    57: { condition: 'freezing drizzle', isRaining: true },\r\n    61: { condition: 'light rain', isRaining: true },\r\n    63: { condition: 'rain', isRaining: true },\r\n    65: { condition: 'heavy rain', isRaining: true },\r\n    66: { condition: 'freezing rain', isRaining: true },\r\n    67: { condition: 'freezing rain', isRaining: true },\r\n    71: { condition: 'light snow', isRaining: false },\r\n    73: { condition: 'snow', isRaining: false },\r\n    75: { condition: 'heavy snow', isRaining: false },\r\n    77: { condition: 'snow grains', isRaining: false },\r\n    80: { condition: 'light showers', isRaining: true },\r\n    81: { condition: 'showers', isRaining: true },\r\n    82: { condition: 'heavy showers', isRaining: true },\r\n    85: { condition: 'light snow showers', isRaining: false },\r\n    86: { condition: 'snow showers', isRaining: false },\r\n    95: { condition: 'thunderstorm', isRaining: true },\r\n    96: { condition: 'thunderstorm with hail', isRaining: true },\r\n    99: { condition: 'thunderstorm with heavy hail', isRaining: true },\r\n};\r\nfunction interpretWeatherCode(code) {\r\n    if (code === null)\r\n        return { condition: null, isRaining: false };\r\n    return WEATHER_CODE_MAP[code] ?? { condition: 'unknown', isRaining: false };\r\n}\r\n/**\r\n * Fetch comprehensive weather data for a location\r\n * Uses Open-Meteo's free API (no key required)\r\n */\r\nexport async function fetchWeatherData(lat, lon) {\r\n    try {\r\n        // Request current weather data including temperature, humidity, pressure, and weather code\r\n        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,weather_code,pressure_msl&timezone=auto`;\r\n        const resp = await fetch(url);\r\n        if (!resp.ok)\r\n            return null;\r\n        const data = await resp.json();\r\n        const current = data?.current;\r\n        if (!current)\r\n            return null;\r\n        const weatherCode = current.weather_code ?? null;\r\n        const { condition, isRaining } = interpretWeatherCode(weatherCode);\r\n        return {\r\n            temperature: current.temperature_2m ?? null,\r\n            condition,\r\n            pressure: current.pressure_msl ?? null,\r\n            humidity: current.relative_humidity_2m ?? null,\r\n            isRaining,\r\n            weatherCode,\r\n        };\r\n    }\r\n    catch (e) {\r\n        console.debug('weather: fetch failed', e);\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Legacy function - fetch only barometric pressure\r\n * @deprecated Use fetchWeatherData instead for full weather info\r\n */\r\nexport async function fetchBarometricPressure(lat, lon) {\r\n    const weather = await fetchWeatherData(lat, lon);\r\n    return weather?.pressure ?? null;\r\n}\r\n/**\r\n * Format weather data into a human-readable summary\r\n */\r\nexport function formatWeatherSummary(weather) {\r\n    const parts = [];\r\n    if (weather.temperature !== null) {\r\n        parts.push(`${Math.round(weather.temperature)}C`);\r\n    }\r\n    if (weather.condition) {\r\n        parts.push(weather.condition);\r\n    }\r\n    if (weather.humidity !== null) {\r\n        parts.push(`${weather.humidity}% humidity`);\r\n    }\r\n    return parts.join(', ') || 'Weather data unavailable';\r\n}\r\n","import { secureStorage } from '../lib/storage/secureStorage';\r\n\r\nexport const PRIVACY_SETTINGS_STORAGE_KEY = 'pain-tracker:privacy-settings';\r\n\r\nexport type PrivacySettings = {\r\n  dataSharing: boolean;\r\n  analyticsConsent: boolean;\r\n  retentionDays: number;\r\n  weatherAutoCapture: boolean;\r\n};\r\n\r\nconst DEFAULT_PRIVACY_SETTINGS: PrivacySettings = {\r\n  dataSharing: false,\r\n  analyticsConsent: true,\r\n  retentionDays: 365,\r\n  weatherAutoCapture: false,\r\n};\r\n\r\nexport function readPrivacySettings(): PrivacySettings {\r\n  const raw = secureStorage.safeJSON<Record<string, unknown>>(\r\n    PRIVACY_SETTINGS_STORAGE_KEY,\r\n    DEFAULT_PRIVACY_SETTINGS\r\n  );\r\n\r\n  const dataSharing = typeof raw.dataSharing === 'boolean' ? raw.dataSharing : DEFAULT_PRIVACY_SETTINGS.dataSharing;\r\n  const analyticsConsent =\r\n    typeof raw.analyticsConsent === 'boolean' ? raw.analyticsConsent : DEFAULT_PRIVACY_SETTINGS.analyticsConsent;\r\n\r\n  const retentionCandidate = raw.retentionDays;\r\n  const retentionDays =\r\n    typeof retentionCandidate === 'number'\r\n      ? retentionCandidate\r\n      : typeof retentionCandidate === 'string'\r\n        ? Number(retentionCandidate)\r\n        : DEFAULT_PRIVACY_SETTINGS.retentionDays;\r\n\r\n  const weatherAutoCapture =\r\n    typeof raw.weatherAutoCapture === 'boolean'\r\n      ? raw.weatherAutoCapture\r\n      : DEFAULT_PRIVACY_SETTINGS.weatherAutoCapture;\r\n\r\n  return {\r\n    dataSharing,\r\n    analyticsConsent,\r\n    retentionDays: Number.isFinite(retentionDays) ? retentionDays : DEFAULT_PRIVACY_SETTINGS.retentionDays,\r\n    weatherAutoCapture,\r\n  };\r\n}\r\n\r\nexport function writePrivacySettings(updates: Partial<PrivacySettings>): void {\r\n  const current = readPrivacySettings();\r\n  secureStorage.set(PRIVACY_SETTINGS_STORAGE_KEY, { ...current, ...updates });\r\n}\r\n","import { fetchWeatherData } from './weather';\r\nimport type { WeatherData } from './weather';\r\nimport { readPrivacySettings } from '../utils/privacySettings';\r\n\r\nexport type CapturedWeather = {\r\n  summary: string;\r\n  weather: WeatherData;\r\n};\r\n\r\nexport function formatWeatherSummaryForEntry(weather: WeatherData): string {\r\n  const parts: string[] = [];\r\n\r\n  if (weather.temperature !== null) {\r\n    parts.push(`${Math.round(weather.temperature)}C`);\r\n  }\r\n\r\n  if (weather.condition) {\r\n    parts.push(weather.condition);\r\n  }\r\n\r\n  if (weather.isRaining) {\r\n    parts.push('');\r\n  }\r\n\r\n  if (weather.humidity !== null) {\r\n    parts.push(`${weather.humidity}% humidity`);\r\n  }\r\n\r\n  return parts.join(', ');\r\n}\r\n\r\nexport async function maybeCaptureWeatherForNewEntry(): Promise<CapturedWeather | null> {\r\n  const { weatherAutoCapture } = readPrivacySettings();\r\n  if (!weatherAutoCapture) return null;\r\n\r\n  if (typeof navigator === 'undefined') return null;\r\n  if (!('geolocation' in navigator) || !navigator.geolocation) return null;\r\n\r\n  try {\r\n    const pos = await new Promise<GeolocationPosition>((resolve, reject) =>\r\n      navigator.geolocation.getCurrentPosition(resolve, reject, { timeout: 5000 })\r\n    );\r\n\r\n    const weather = await fetchWeatherData(pos.coords.latitude, pos.coords.longitude);\r\n    if (!weather) return null;\r\n\r\n    const summary = formatWeatherSummaryForEntry(weather);\r\n    if (!summary) return null;\r\n\r\n    return { summary, weather };\r\n  } catch {\r\n    // Best-effort only; never block entry creation\r\n    return null;\r\n  }\r\n}\r\n","/**\n * NoDataIllustration - SVG illustration for empty states\n */\n\nexport function NoDataIllustration() {\n  return (\n    <div className=\"flex justify-center\">\n      <svg\n        width=\"200\"\n        height=\"160\"\n        viewBox=\"0 0 200 160\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"text-muted-foreground\"\n      >\n        {/* Background elements */}\n        <circle cx=\"100\" cy=\"80\" r=\"60\" fill=\"currentColor\" opacity=\"0.1\" />\n\n        {/* Chart bars */}\n        <rect x=\"60\" y=\"100\" width=\"8\" height=\"20\" rx=\"4\" fill=\"currentColor\" opacity=\"0.3\" />\n        <rect x=\"72\" y=\"90\" width=\"8\" height=\"30\" rx=\"4\" fill=\"currentColor\" opacity=\"0.4\" />\n        <rect x=\"84\" y=\"85\" width=\"8\" height=\"35\" rx=\"4\" fill=\"currentColor\" opacity=\"0.5\" />\n        <rect x=\"96\" y=\"95\" width=\"8\" height=\"25\" rx=\"4\" fill=\"currentColor\" opacity=\"0.4\" />\n        <rect x=\"108\" y=\"105\" width=\"8\" height=\"15\" rx=\"4\" fill=\"currentColor\" opacity=\"0.3\" />\n        <rect x=\"120\" y=\"80\" width=\"8\" height=\"40\" rx=\"4\" fill=\"currentColor\" opacity=\"0.5\" />\n        <rect x=\"132\" y=\"88\" width=\"8\" height=\"32\" rx=\"4\" fill=\"currentColor\" opacity=\"0.4\" />\n\n        {/* Floating elements */}\n        <circle cx=\"70\" cy=\"50\" r=\"3\" fill=\"currentColor\" opacity=\"0.3\" />\n        <circle cx=\"130\" cy=\"45\" r=\"2\" fill=\"currentColor\" opacity=\"0.4\" />\n        <circle cx=\"150\" cy=\"65\" r=\"2.5\" fill=\"currentColor\" opacity=\"0.3\" />\n\n        {/* Activity icon in center */}\n        <g transform=\"translate(85, 65)\">\n          <path\n            d=\"M2 12L7 7L13 13L22 2\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            opacity=\"0.6\"\n          />\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.3\" />\n        </g>\n\n        {/* Decorative lines */}\n        <line\n          x1=\"40\"\n          y1=\"130\"\n          x2=\"160\"\n          y2=\"130\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1\"\n          opacity=\"0.2\"\n        />\n        <line\n          x1=\"50\"\n          y1=\"135\"\n          x2=\"150\"\n          y2=\"135\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1\"\n          opacity=\"0.1\"\n        />\n      </svg>\n    </div>\n  );\n}\n\nexport function TrackingIllustration() {\n  return (\n    <div className=\"flex justify-center\">\n      <svg\n        width=\"200\"\n        height=\"160\"\n        viewBox=\"0 0 200 160\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"text-primary\"\n      >\n        {/* Background circle */}\n        <circle cx=\"100\" cy=\"80\" r=\"70\" fill=\"currentColor\" opacity=\"0.1\" />\n\n        {/* Calendar grid */}\n        <rect\n          x=\"70\"\n          y=\"50\"\n          width=\"60\"\n          height=\"45\"\n          rx=\"4\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          opacity=\"0.4\"\n        />\n\n        {/* Calendar days */}\n        {[0, 1, 2, 3, 4].map(row =>\n          [0, 1, 2, 3, 4, 5].map(col => {\n            // Use deterministic pattern instead of Math.random() to avoid collapse vectors\n            const isHighlighted = (row + col) % 3 === 0 || (row === 2 && col === 3);\n            return (\n              <rect\n                key={`${row}-${col}`}\n                x={75 + col * 8}\n                y={57 + row * 7}\n                width=\"6\"\n                height=\"5\"\n                rx=\"1\"\n                fill=\"currentColor\"\n                opacity={isHighlighted ? 0.6 : 0.2}\n              />\n            );\n          })\n        )}\n\n        {/* Heart/health icon */}\n        <g transform=\"translate(85, 105)\">\n          <path\n            d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"\n            fill=\"currentColor\"\n            opacity=\"0.6\"\n          />\n        </g>\n\n        {/* Progress indicators */}\n        <circle cx=\"45\" cy=\"80\" r=\"8\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.3\" />\n        <circle\n          cx=\"45\"\n          cy=\"80\"\n          r=\"8\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeDasharray=\"15,10\"\n          opacity=\"0.6\"\n          transform=\"rotate(-90 45 80)\"\n        />\n\n        <circle cx=\"155\" cy=\"80\" r=\"8\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.3\" />\n        <circle\n          cx=\"155\"\n          cy=\"80\"\n          r=\"8\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeDasharray=\"20,5\"\n          opacity=\"0.6\"\n          transform=\"rotate(-90 155 80)\"\n        />\n      </svg>\n    </div>\n  );\n}\n","/**\n * EmptyState - Enhanced empty state component with illustrations and clear CTAs\n */\n\nimport { ReactNode } from 'react';\nimport { Button } from '../../design-system';\nimport { NoDataIllustration } from './NoDataIllustration';\n\ninterface EmptyStateProps {\n  title: string;\n  description: string;\n  primaryAction?: {\n    label: string;\n    onClick: () => void;\n    icon?: ReactNode;\n  };\n  secondaryAction?: {\n    label: string;\n    onClick: () => void;\n  };\n  illustration?: ReactNode;\n  className?: string;\n}\n\nexport function EmptyState({\n  title,\n  description,\n  primaryAction,\n  secondaryAction,\n  illustration,\n  className = '',\n}: EmptyStateProps) {\n  return (\n    <div className={`text-center py-12 px-6 ${className}`}>\n      <div className=\"max-w-md mx-auto\">\n        {/* Illustration */}\n        <div className=\"mb-8\">{illustration || <NoDataIllustration />}</div>\n\n        {/* Content */}\n        <div className=\"mb-8\">\n          <h3 className=\"text-xl font-semibold text-foreground mb-3\">{title}</h3>\n          <p className=\"text-muted-foreground leading-relaxed\">{description}</p>\n        </div>\n\n        {/* Actions */}\n        {(primaryAction || secondaryAction) && (\n          <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n            {primaryAction && (\n              <Button onClick={primaryAction.onClick} className=\"flex items-center space-x-2\">\n                {primaryAction.icon}\n                <span>{primaryAction.label}</span>\n              </Button>\n            )}\n\n            {secondaryAction && (\n              <Button variant=\"outline\" onClick={secondaryAction.onClick}>\n                {secondaryAction.label}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { PlayCircle, Database } from 'lucide-react';\r\nimport { EmptyState, TrackingIllustration } from '../empty-state';\r\nimport { Button, Card, CardContent } from '../../design-system';\r\nimport { usePainTrackerStore } from '../../stores/pain-tracker-store';\r\nimport { useAdaptiveCopy } from '../../contexts/useTone';\r\nimport { emptyStates } from '../../content/microcopy';\r\n\r\ninterface EmptyStatePanelProps {\r\n  onStartWalkthrough: () => void;\r\n}\r\n\r\nexport function EmptyStatePanel({ onStartWalkthrough }: EmptyStatePanelProps) {\r\n  const { loadSampleData, loadChronicPainTestData } = usePainTrackerStore();\r\n\r\n  // Adaptive tone copy\r\n  const noLogsHeadline = useAdaptiveCopy(emptyStates.noLogs.headline);\r\n  const noLogsSubtext = useAdaptiveCopy(emptyStates.noLogs.subtext);\r\n  const noLogsCTA = useAdaptiveCopy(emptyStates.noLogs.cta);\r\n  const secondaryCTA = useAdaptiveCopy(emptyStates.noLogs.secondaryCta);\r\n\r\n  const handleLoadSampleData = () => {\r\n    loadSampleData();\r\n  };\r\n\r\n  const handleLoadChronicPainData = () => {\r\n    loadChronicPainTestData();\r\n  };\r\n\r\n  return (\r\n    <Card variant=\"gradient\" hover=\"lift\" padding=\"none\" className=\"relative overflow-hidden\">\r\n      <CardContent className=\"p-6 sm:p-8\">\r\n        <EmptyState\r\n          title={noLogsHeadline}\r\n          description={noLogsSubtext}\r\n          className=\"py-10 sm:py-12 px-0\"\r\n          primaryAction={{\r\n            label: noLogsCTA,\r\n            onClick: onStartWalkthrough,\r\n            icon: <PlayCircle className=\"h-4 w-4\" />,\r\n          }}\r\n          secondaryAction={{\r\n            label: secondaryCTA,\r\n            onClick: handleLoadSampleData,\r\n          }}\r\n          illustration={<TrackingIllustration />}\r\n        />\r\n        {/* Dev/Testing option for 12-month chronic pain data */}\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleLoadChronicPainData}\r\n            className=\"w-full justify-start gap-2 text-muted-foreground hover:text-foreground\"\r\n            leftIcon={<Database className=\"h-4 w-4\" />}\r\n          >\r\n            Load 12-month chronic pain test data (~400 entries)\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { brand } from '../../design-system/brand';\n\ninterface BrandedLogoProps {\n  variant?: 'primary' | 'wordmark' | 'icon' | 'iconWhite';\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n}\n\nconst sizeMap = {\n  sm: { width: 120, height: 28 },\n  md: { width: 200, height: 48 },\n  lg: { width: 280, height: 64 },\n  xl: { width: 400, height: 96 },\n};\n\nconst iconSizeMap = {\n  sm: { width: 24, height: 24 },\n  md: { width: 48, height: 48 },\n  lg: { width: 64, height: 64 },\n  xl: { width: 96, height: 96 },\n};\n\nexport function BrandedLogo({\n  variant = 'primary',\n  size = 'md',\n  className = '',\n}: BrandedLogoProps) {\n  const isIcon = variant === 'icon' || variant === 'iconWhite';\n  const dimensions = isIcon ? iconSizeMap[size] : sizeMap[size];\n\n  const logoSrc = (() => {\n    switch (variant) {\n      case 'wordmark':\n        return brand.logos.wordmark;\n      case 'icon':\n        return brand.logos.icon;\n      case 'iconWhite':\n        return brand.logos.iconWhite;\n      default:\n        return brand.logos.primary;\n    }\n  })();\n\n  return (\n    <img\n      src={logoSrc}\n      alt=\"Pain Tracker Pro\"\n      width={dimensions.width}\n      height={dimensions.height}\n      className={`${className}`}\n      style={{\n        width: dimensions.width,\n        height: dimensions.height,\n        objectFit: 'contain',\n      }}\n    />\n  );\n}\n\n// Inline SVG Logo Component for better performance and customization\nexport function InlineBrandedLogo({\n  size = 'md',\n  className = '',\n  primaryColor = brand.colors.primary[500],\n  secondaryColor = brand.colors.secondary[500],\n}: {\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n  primaryColor?: string;\n  secondaryColor?: string;\n}) {\n  const dimensions = sizeMap[size];\n\n  return (\n    <svg\n      width={dimensions.width}\n      height={dimensions.height}\n      viewBox=\"0 0 200 48\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      {/* Background Circle */}\n      <circle cx=\"24\" cy=\"24\" r=\"20\" fill={primaryColor} stroke=\"#ffffff\" strokeWidth=\"2\" />\n\n      {/* Medical Cross */}\n      <rect x=\"20\" y=\"12\" width=\"8\" height=\"24\" rx=\"2\" fill=\"white\" />\n      <rect x=\"12\" y=\"20\" width=\"24\" height=\"8\" rx=\"2\" fill=\"white\" />\n\n      {/* Analytics Pulse Line */}\n      <path\n        d=\"M6 30 Q12 24 18 30 T30 26 Q36 22 42 26\"\n        stroke={secondaryColor}\n        strokeWidth=\"3\"\n        fill=\"none\"\n        strokeLinecap=\"round\"\n      />\n\n      {/* Brand Text */}\n      <text\n        x=\"52\"\n        y=\"20\"\n        fontFamily={brand.typography.fonts.sans.join(', ')}\n        fontSize=\"18\"\n        fontWeight=\"700\"\n        fill=\"#0f172a\"\n      >\n        Pain Tracker\n      </text>\n      <text\n        x=\"52\"\n        y=\"34\"\n        fontFamily={brand.typography.fonts.sans.join(', ')}\n        fontSize=\"11\"\n        fontWeight=\"500\"\n        fill=\"#64748b\"\n      >\n        PRIVACY-FIRST PAIN TRACKING\n      </text>\n\n      {/* Pro Badge */}\n      <rect x=\"174\" y=\"8\" width=\"24\" height=\"12\" rx=\"6\" fill=\"#a855f7\" />\n      <text\n        x=\"186\"\n        y=\"17\"\n        fontFamily={brand.typography.fonts.sans.join(', ')}\n        fontSize=\"8\"\n        fontWeight=\"600\"\n        fill=\"white\"\n        textAnchor=\"middle\"\n      >\n        PRO\n      </text>\n    </svg>\n  );\n}\n\n// Simple Icon Component\nexport function PainTrackerIcon({\n  size = 24,\n  className = '',\n  color = brand.colors.primary[500],\n}: {\n  size?: number;\n  className?: string;\n  color?: string;\n}) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 48 48\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      {/* Background Circle */}\n      <circle cx=\"24\" cy=\"24\" r=\"22\" fill={color} />\n\n      {/* Medical Cross */}\n      <rect x=\"19\" y=\"10\" width=\"10\" height=\"28\" rx=\"3\" fill=\"white\" />\n      <rect x=\"10\" y=\"19\" width=\"28\" height=\"10\" rx=\"3\" fill=\"white\" />\n\n      {/* Analytics Wave */}\n      <path\n        d=\"M8 32 Q12 26 16 32 T24 28 Q28 24 32 28 T40 30\"\n        stroke={brand.colors.secondary[500]}\n        strokeWidth=\"4\"\n        fill=\"none\"\n        strokeLinecap=\"round\"\n      />\n\n      {/* AI Indicator */}\n      <circle cx=\"36\" cy=\"12\" r=\"3\" fill={brand.colors.accent[500]} />\n    </svg>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { PainTrackerIcon } from './BrandedLogo';\n\ninterface BrandedLoadingScreenProps {\n  message?: string;\n  progress?: number;\n  showProgress?: boolean;\n  className?: string;\n}\n\nexport function BrandedLoadingScreen({\n  message = 'Loading Pain Tracker Pro...',\n  progress,\n  showProgress = false,\n  className = '',\n}: BrandedLoadingScreenProps) {\n  const [animatedProgress, setAnimatedProgress] = useState(0);\n\n  useEffect(() => {\n    if (progress !== undefined) {\n      const timer = setTimeout(() => {\n        setAnimatedProgress(progress);\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [progress]);\n\n  return (\n    <div\n      className={`min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 ${className}`}\n    >\n      <div className=\"text-center space-y-8\">\n        {/* Animated Logo */}\n        <div className=\"relative\">\n          <div className=\"animate-pulse\">\n            <PainTrackerIcon size={96} className=\"mx-auto\" />\n          </div>\n\n          {/* Ripple Effect */}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-24 h-24 rounded-full border-4 border-blue-200 animate-ping opacity-75\"></div>\n          </div>\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-32 h-32 rounded-full border-2 border-green-200 animate-ping opacity-50 animation-delay-150\"></div>\n          </div>\n        </div>\n\n        {/* Brand Name */}\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-bold text-slate-900 dark:text-slate-100\">\n            Pain Tracker\n            <span className=\"inline-flex items-center ml-2 px-2 py-1 rounded-full text-xs bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold\">\n              PRO\n            </span>\n          </h1>\n          <p className=\"text-slate-600 dark:text-slate-400 font-medium\">\n            Privacy-First Pain Tracking\n          </p>\n        </div>\n\n        {/* Loading Message */}\n        <div className=\"space-y-4\">\n          <p className=\"text-slate-700 dark:text-slate-300 font-medium\">{message}</p>\n\n          {/* Progress Bar */}\n          {showProgress && (\n            <div className=\"w-64 mx-auto\">\n              <div className=\"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2\">\n                <span>Loading...</span>\n                <span>{Math.round(animatedProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 overflow-hidden\">\n                <div\n                  className=\"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500 ease-out\"\n                  style={{ width: `${animatedProgress}%` }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Loading Dots Animation */}\n          {!showProgress && (\n            <div className=\"flex items-center justify-center space-x-2\">\n              <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-bounce animation-delay-100\"></div>\n              <div className=\"w-2 h-2 bg-purple-500 rounded-full animate-bounce animation-delay-200\"></div>\n            </div>\n          )}\n        </div>\n\n        {/* Feature Highlights */}\n        <div className=\"grid grid-cols-3 gap-4 text-xs text-slate-600 dark:text-slate-400 max-w-md mx-auto\">\n          <div className=\"text-center space-y-1\">\n            <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto\">\n              <svg className=\"w-4 h-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <span>FHIR Compliant</span>\n          </div>\n          <div className=\"text-center space-y-1\">\n            <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\n              <svg className=\"w-4 h-4 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z\" />\n              </svg>\n            </div>\n            <span>AI Analytics</span>\n          </div>\n          <div className=\"text-center space-y-1\">\n            <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mx-auto\">\n              <svg className=\"w-4 h-4 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path d=\"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z\" />\n              </svg>\n            </div>\n            <span>Offline Ready</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Minimal loading spinner for inline use\nexport function BrandedSpinner({\n  size = 'md',\n  className = '',\n}: {\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}) {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12',\n  };\n\n  return (\n    <div className={`relative ${sizeClasses[size]} ${className}`}>\n      <div\n        className={`${sizeClasses[size]} rounded-full border-2 border-slate-200 dark:border-slate-700 animate-spin`}\n      >\n        <div className={`${sizeClasses[size]} rounded-full border-t-2 border-blue-600`}></div>\n      </div>\n    </div>\n  );\n}\n\n// Success screen after loading\nexport function BrandedSuccessScreen({ onContinue }: { onContinue: () => void }) {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50\">\n      <div className=\"text-center space-y-8 max-w-md mx-auto px-4\">\n        {/* Success Icon */}\n        <div className=\"relative\">\n          <div className=\"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto\">\n            <svg className=\"w-12 h-12 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path\n                fillRule=\"evenodd\"\n                d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          </div>\n\n          {/* Success Ripple */}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-24 h-24 rounded-full border-4 border-green-300 animate-ping opacity-75\"></div>\n          </div>\n        </div>\n\n        {/* Success Message */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">Ready to Go!</h2>\n          <p className=\"text-slate-600 dark:text-slate-400\">\n            Pain Tracker Pro is loaded and ready to help you manage your pain with AI-powered\n            insights.\n          </p>\n        </div>\n\n        {/* Continue Button */}\n        <button\n          onClick={onContinue}\n          className=\"px-8 py-3 bg-gradient-to-r from-blue-600 to-green-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-green-700 transition-all duration-300 transform hover:scale-105\"\n        >\n          Start Tracking Pain\n        </button>\n      </div>\n    </div>\n  );\n}\n\n// CSS for animation delays\nconst styles = `\n.animation-delay-100 {\n  animation-delay: 0.1s;\n}\n.animation-delay-150 {\n  animation-delay: 0.15s;\n}\n.animation-delay-200 {\n  animation-delay: 0.2s;\n}\n`;\n\n// Inject styles\nif (typeof document !== 'undefined') {\n  const styleSheet = document.createElement('style');\n  styleSheet.textContent = styles;\n  document.head.appendChild(styleSheet);\n}\n","import { useEffect, useState, lazy, Suspense } from 'react';\r\nimport { secureStorage } from '../lib/storage/secureStorage';\r\nimport type { PainEntry } from '../types';\r\nimport type { WalkthroughStep } from '../components/tutorials/Walkthrough';\r\nimport { usePainTrackerStore } from '../stores/pain-tracker-store';\r\nimport { ModernAppLayout } from '../components/layouts/ModernAppLayout';\r\nimport { ClinicalDashboard } from '../design-system/fused-v2';\r\nimport QuickLogOneScreen from '../design-system/fused-v2/QuickLogOneScreen';\r\nimport { useToast } from '../components/feedback';\r\nimport { maybeCaptureWeatherForNewEntry } from '../services/weatherAutoCapture';\r\nimport { EmptyStatePanel } from '../components/widgets/EmptyStatePanel';\r\nimport { BrandedLoadingScreen } from '../components/branding/BrandedLoadingScreen';\r\n\r\n// Lazy load heavy components for faster initial load (mobile optimization)\r\nconst PremiumAnalyticsDashboard = lazy(() =>\r\n  import('../components/analytics/PremiumAnalyticsDashboard').then(m => ({ default: m.PremiumAnalyticsDashboard }))\r\n);\r\nconst CalendarView = lazy(() =>\r\n  import('../components/calendar/CalendarView').then(m => ({ default: m.CalendarView }))\r\n);\r\nconst BodyMapPage = lazy(() =>\r\n  import('../components/body-mapping/BodyMapPage').then(m => ({ default: m.BodyMapPage }))\r\n);\r\nconst FibromyalgiaTracker = lazy(() =>\r\n  import('../components/fibromyalgia/FibromyalgiaTracker').then(m => ({ default: m.FibromyalgiaTracker }))\r\n);\r\nconst DailyCheckin = lazy(() =>\r\n  import('../components/checkin/DailyCheckin').then(m => ({ default: m.default }))\r\n);\r\nconst SettingsPage = lazy(() =>\r\n  import('../pages/SettingsPage').then(m => ({ default: m.default }))\r\n);\r\nconst HelpAndSupportPage = lazy(() =>\r\n  import('../pages/HelpAndSupportPage').then(m => ({ default: m.default }))\r\n);\r\nconst ReportsPage = lazy(() =>\r\n  import('../components/reports').then(m => ({ default: m.ReportsPage }))\r\n);\r\nconst HistoryPage = lazy(() =>\r\n  import('../components/history/HistoryPage').then(m => ({ default: m.HistoryPage }))\r\n);\r\n\r\n// Lazy load onboarding and tutorial components (Phase 2 optimization)\r\nconst OnboardingFlow = lazy(() =>\r\n  import('../components/onboarding').then(m => ({ default: m.OnboardingFlow }))\r\n);\r\nconst Walkthrough = lazy(() =>\r\n  import('../components/tutorials').then(m => ({ default: m.Walkthrough }))\r\n);\r\n\r\nexport function PainTrackerContainer({ initialView }: { initialView?: string } = {}) {\r\n  const { entries, ui, addEntry, setShowOnboarding, setShowWalkthrough, setError, loadSampleData } =\r\n    usePainTrackerStore();\r\n  const updateEntry = usePainTrackerStore(s => s.updateEntry);\r\n\r\n  const toast = useToast();\r\n  const [walkthroughSteps, setWalkthroughSteps] = useState<WalkthroughStep[]>([]);\r\n  const [currentView, setCurrentView] = useState<string>(initialView ?? 'dashboard');\r\n  const [editingEntryId, setEditingEntryId] = useState<PainEntry['id'] | null>(null);\r\n\r\n  // Load walkthrough steps dynamically to avoid circular dependency\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (typeof window !== 'undefined') {\r\n      import('../data/sampleData').then(({ walkthroughSteps: steps }) => {\r\n        if (isMounted) setWalkthroughSteps(steps);\r\n      });\r\n    }\r\n    return () => { isMounted = false; };\r\n  }, []);\r\n\r\n  // Check for first-time user\r\n  useEffect(() => {\r\n    try {\r\n      const hasSeenOnboarding = secureStorage.get<string>('pain-tracker-onboarding-completed');\r\n      const hasEntries = entries.length > 0;\r\n\r\n      if (!hasSeenOnboarding && !hasEntries) {\r\n        setShowOnboarding(true);\r\n      }\r\n    } catch (err) {\r\n      console.warn('Unable to check onboarding status:', err);\r\n    }\r\n  }, [entries.length, setShowOnboarding]);\r\n\r\n  const handleOnboardingComplete = (setupWithSampleData: boolean) => {\r\n    try {\r\n      secureStorage.set('pain-tracker-onboarding-completed', 'true');\r\n    } catch (err) {\r\n      console.warn('Unable to save onboarding status:', err);\r\n    }\r\n\r\n    setShowOnboarding(false);\r\n\r\n    if (setupWithSampleData) {\r\n      loadSampleData();\r\n      toast.success(\r\n        'Sample data loaded!',\r\n        'Explore the features with example pain entries. You can clear this data anytime.'\r\n      );\r\n    } else {\r\n      toast.info('Welcome to Pain Tracker!', 'Start by recording your first pain entry above.');\r\n    }\r\n  };\r\n\r\n  const handleOnboardingSkip = () => {\r\n    try {\r\n      secureStorage.set('pain-tracker-onboarding-completed', 'true');\r\n    } catch (err) {\r\n      console.warn('Unable to save onboarding status:', err);\r\n    }\r\n\r\n    setShowOnboarding(false);\r\n    toast.info('Onboarding skipped', 'You can always access help from the help menu.');\r\n  };\r\n\r\n  const handleStartWalkthrough = () => {\r\n    setShowWalkthrough(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const isEditableTarget = (target: EventTarget | null) => {\r\n      if (!target || !(target instanceof HTMLElement)) return false;\r\n      if (target.isContentEditable) return true;\r\n      const tag = target.tagName.toLowerCase();\r\n      return tag === 'input' || tag === 'textarea' || tag === 'select';\r\n    };\r\n\r\n    const onKeyDown = (event: KeyboardEvent) => {\r\n      if (event.defaultPrevented) return;\r\n      if (event.metaKey || event.ctrlKey || event.altKey) return;\r\n      if (isEditableTarget(event.target)) return;\r\n\r\n      const key = event.key.toLowerCase();\r\n      if (key === 'n') {\r\n        event.preventDefault();\r\n        setCurrentView('new-entry');\r\n      }\r\n      if (key === 'c') {\r\n        event.preventDefault();\r\n        setCurrentView('calendar');\r\n      }\r\n      if (key === 'h') {\r\n        event.preventDefault();\r\n        setCurrentView('history');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, []);\r\n\r\n  const handleWalkthroughComplete = () => {\r\n    setShowWalkthrough(false);\r\n    toast.success('Tutorial completed!', \"You're all set to start tracking your pain effectively.\");\r\n  };\r\n\r\n  const handleWalkthroughSkip = () => {\r\n    setShowWalkthrough(false);\r\n  };\r\n\r\n  const validatePainEntry = (entry: Omit<PainEntry, 'id' | 'timestamp'>): boolean => {\r\n    if (!entry.baselineData) return false;\r\n\r\n    const { pain } = entry.baselineData;\r\n    if (typeof pain !== 'number' || pain < 0 || pain > 10) return false;\r\n\r\n    if (entry.qualityOfLife) {\r\n      const { sleepQuality, moodImpact } = entry.qualityOfLife;\r\n      if (\r\n        typeof sleepQuality !== 'number' ||\r\n        sleepQuality < 0 ||\r\n        sleepQuality > 10 ||\r\n        typeof moodImpact !== 'number' ||\r\n        moodImpact < 0 ||\r\n        moodImpact > 10\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleAddEntry = (\r\n    entryData: Omit<PainEntry, 'id' | 'timestamp'>,\r\n    options?: { stayOnSave?: boolean }\r\n  ) => {\r\n    try {\r\n      if (!validatePainEntry(entryData)) {\r\n        setError('Invalid pain entry data. Please check your input values.');\r\n        toast.error('Invalid Entry', 'Please check your input values and try again.');\r\n        return;\r\n      }\r\n\r\n      const storeApi = usePainTrackerStore as unknown as {\r\n        getState?: () => { entries?: PainEntry[] };\r\n      };\r\n\r\n      const beforeCount = storeApi.getState?.()?.entries?.length ?? entries.length;\r\n      addEntry(entryData);\r\n\r\n      // Best-effort: enrich the just-saved entry with local weather (opt-in).\r\n      // This must never block saving the entry.\r\n      const created = storeApi.getState?.()?.entries?.[beforeCount];\r\n      if (created) {\r\n        void (async () => {\r\n          const captured = await maybeCaptureWeatherForNewEntry();\r\n          if (!captured) return;\r\n          updateEntry(created.id, { weather: captured.summary });\r\n        })();\r\n      }\r\n      setError(null);\r\n      toast.success(\r\n        'Entry saved',\r\n        \"Your update is safely stored. You can explore your dashboard or analytics whenever you're ready.\"\r\n      );\r\n      // Navigate back to dashboard after saving unless caller requested staying on the save view\r\n      if (!options?.stayOnSave) {\r\n        setCurrentView('dashboard');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to add pain entry. Please try again.');\r\n      toast.error('Save Failed', 'Unable to add pain entry. Please try again.');\r\n      console.error('Error adding pain entry:', err);\r\n    }\r\n  };\r\n\r\n  // Calculate stats for header\r\n  const stats = {\r\n    totalEntries: entries.length,\r\n    avgPain:\r\n      entries.length > 0\r\n        ? entries.reduce((sum, e) => sum + e.baselineData.pain, 0) / entries.length\r\n        : 0,\r\n    streak: entries.length > 0 ? Math.min(entries.length, 7) : 0, // Simplified streak calc\r\n  };\r\n\r\n  // Loading component for lazy-loaded views\r\n  const ViewLoadingFallback = () => (\r\n    <BrandedLoadingScreen message=\"Loading...\" />\r\n  );\r\n\r\n  const renderView = () => {\r\n    switch (currentView) {\r\n      case 'dashboard':\r\n        return entries.length > 0 ? (\r\n          <ClinicalDashboard\r\n            entries={entries}\r\n            onLogNow={() => setCurrentView('new-entry')}\r\n            onViewCalendar={() => setCurrentView('calendar')}\r\n            onViewAnalytics={() => setCurrentView('analytics')}\r\n            onExport={() => {\r\n              setCurrentView('reports');\r\n            }}\r\n            onOpenSettings={() => setCurrentView('settings')}\r\n            onOpenHelp={() => setCurrentView('help')}\r\n          />\r\n        ) : (\r\n          <EmptyStatePanel onStartWalkthrough={handleStartWalkthrough} />\r\n        );\r\n\r\n      case 'new-entry':\r\n        return (\r\n          <QuickLogOneScreen\r\n            onComplete={data => {\r\n              const entryToAdd: Omit<PainEntry, 'id' | 'timestamp'> = {\r\n                baselineData: {\r\n                  pain: data.pain,\r\n                  locations: data.locations,\r\n                  symptoms: data.symptoms,\r\n                },\r\n                notes: data.notes,\r\n                functionalImpact: {\r\n                  limitedActivities: [],\r\n                  assistanceNeeded: [],\r\n                  mobilityAids: [],\r\n                },\r\n                medications: {\r\n                  current: [],\r\n                  changes: '',\r\n                  effectiveness: '',\r\n                },\r\n                treatments: {\r\n                  recent: [],\r\n                  effectiveness: '',\r\n                  planned: [],\r\n                },\r\n                qualityOfLife: {\r\n                  sleepQuality: typeof data.sleep === 'number' ? data.sleep : 0,\r\n                  moodImpact: 0,\r\n                  socialImpact: [],\r\n                },\r\n                workImpact: {\r\n                  missedWork: 0,\r\n                  modifiedDuties: [],\r\n                  workLimitations: [],\r\n                },\r\n                comparison: {\r\n                  worseningSince: '',\r\n                  newLimitations: [],\r\n                },\r\n\r\n                // Optional analytics-rich fields\r\n                intensity: data.pain,\r\n                location: data.locations?.[0],\r\n                activityLevel: data.activityLevel,\r\n                activities: data.activities,\r\n                triggers: data.triggers,\r\n                medicationAdherence: data.medicationAdherence,\r\n                sleep: data.sleep,\r\n              };\r\n\r\n              handleAddEntry(entryToAdd);\r\n            }}\r\n            onCancel={() => setCurrentView('dashboard')}\r\n          />\r\n        );\r\n\r\n      case 'history':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <HistoryPage\r\n              entries={entries}\r\n              onEditEntry={id => {\r\n                setEditingEntryId(id);\r\n                setCurrentView('edit-entry');\r\n              }}\r\n            />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'edit-entry': {\r\n        const entry = entries.find(e => e.id === editingEntryId);\r\n        if (!entry) {\r\n          toast.error('Entry not found', 'Unable to edit that entry right now.');\r\n          setEditingEntryId(null);\r\n          setCurrentView('history');\r\n          return null;\r\n        }\r\n\r\n        return (\r\n          <QuickLogOneScreen\r\n            mode=\"edit\"\r\n            initialData={{\r\n              pain: entry.baselineData.pain,\r\n              locations: entry.baselineData.locations ?? [],\r\n              symptoms: entry.baselineData.symptoms ?? [],\r\n              notes: entry.notes ?? '',\r\n              sleep: entry.sleep,\r\n              activityLevel: entry.activityLevel,\r\n              medicationAdherence: entry.medicationAdherence,\r\n              activities: entry.activities,\r\n              triggers: entry.triggers,\r\n            }}\r\n            onComplete={data => {\r\n              try {\r\n                const updates: Partial<PainEntry> = {\r\n                  baselineData: {\r\n                    ...entry.baselineData,\r\n                    pain: data.pain,\r\n                    locations: data.locations,\r\n                    symptoms: data.symptoms,\r\n                  },\r\n                  notes: data.notes,\r\n                  intensity: data.pain,\r\n                  location: data.locations?.[0],\r\n                };\r\n\r\n                if (typeof data.sleep === 'number') {\r\n                  updates.sleep = data.sleep;\r\n                  updates.qualityOfLife = {\r\n                    ...entry.qualityOfLife,\r\n                    sleepQuality: data.sleep,\r\n                  };\r\n                }\r\n\r\n                if (typeof data.activityLevel === 'number') {\r\n                  updates.activityLevel = data.activityLevel;\r\n                }\r\n\r\n                if (data.medicationAdherence) {\r\n                  updates.medicationAdherence = data.medicationAdherence;\r\n                }\r\n\r\n                if (data.activities) {\r\n                  updates.activities = data.activities;\r\n                }\r\n\r\n                if (data.triggers) {\r\n                  updates.triggers = data.triggers;\r\n                }\r\n\r\n                updateEntry(entry.id, updates);\r\n                toast.success('Entry updated', 'Your changes are saved locally.');\r\n                setCurrentView('history');\r\n              } catch (err) {\r\n                console.error('Error updating pain entry:', err);\r\n                toast.error('Update failed', 'Unable to update that entry. Please try again.');\r\n              }\r\n            }}\r\n            onCancel={() => {\r\n              setEditingEntryId(null);\r\n              setCurrentView('history');\r\n            }}\r\n          />\r\n        );\r\n      }\r\n\r\n      case 'daily-checkin':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <DailyCheckin\r\n              entries={entries}\r\n              onComplete={(entry: Omit<PainEntry, 'id' | 'timestamp'>) => {\r\n                // Save but stay on the check-in so the component can surface insights\r\n                handleAddEntry(entry, { stayOnSave: true });\r\n              }}\r\n              onCancel={() => setCurrentView('dashboard')}\r\n              onDone={() => setCurrentView('dashboard')}\r\n            />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'analytics':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <PremiumAnalyticsDashboard entries={entries} />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'body-map':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <BodyMapPage />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'fibromyalgia':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <FibromyalgiaTracker />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'calendar':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <CalendarView entries={entries} />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'reports':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <ReportsPage entries={entries} />\r\n          </Suspense>\r\n        );\r\n\r\n      case 'settings':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <SettingsPage />\r\n          </Suspense>\r\n        );\r\n      case 'help':\r\n        return (\r\n          <Suspense fallback={<ViewLoadingFallback />}>\r\n            <HelpAndSupportPage />\r\n          </Suspense>\r\n        );\r\n\r\n      default:\r\n        return entries.length > 0 ? (\r\n          <ClinicalDashboard\r\n            entries={entries}\r\n            onLogNow={() => setCurrentView('new-entry')}\r\n            onViewCalendar={() => setCurrentView('calendar')}\r\n            onViewAnalytics={() => setCurrentView('analytics')}\r\n            onExport={() => {\r\n              setCurrentView('reports');\r\n            }}\r\n            onOpenSettings={() => setCurrentView('settings')}\r\n            onOpenHelp={() => setCurrentView('help')}\r\n          />\r\n        ) : (\r\n          <EmptyStatePanel onStartWalkthrough={handleStartWalkthrough} />\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ModernAppLayout currentView={currentView} onNavigate={setCurrentView} stats={stats}>\r\n        {renderView()}\r\n      </ModernAppLayout>\r\n\r\n      {/* Onboarding Flow - Lazy loaded only when needed */}\r\n      {ui.showOnboarding && (\r\n        <Suspense fallback={null}>\r\n          <OnboardingFlow onComplete={handleOnboardingComplete} onSkip={handleOnboardingSkip} />\r\n        </Suspense>\r\n      )}\r\n\r\n      {/* Interactive Walkthrough - Lazy loaded only when needed */}\r\n      {ui.showWalkthrough && (\r\n        <Suspense fallback={null}>\r\n          <Walkthrough\r\n            steps={walkthroughSteps}\r\n            isActive={ui.showWalkthrough}\r\n            onComplete={handleWalkthroughComplete}\r\n            onSkip={handleWalkthroughSkip}\r\n          />\r\n        </Suspense>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"file":"PainTrackerContainer-Cn0qrvwX.js"}