import{r as e,j as s}from"./react-vendor-CM2d6bHp.js";import{a as t,c as r,g as i,w as n,x as a}from"./index-B7vNx0HN.js";import{q as c}from"./PainTrackerContainer-CPTQDEPp.js";import{u as o,v as m,w as l,x as u}from"./icons-vendor-DZ-9b690.js";import"./chart-vendor-C6dKBweC.js";import"./state-vendor-gOFTyJpA.js";import"./pdf-vendor-zZbfvrDE.js";import"./date-vendor-Bi3xipBn.js";import"./i18n-vendor-C-xkjauL.js";import"./AnalyticsTrackingService-BBqrbLyx.js";const d=["No pain","Very mild","Mild","Uncomfortable","Moderate","Distracting","Distressing","Intense","Very intense","Severe","Unbearable"],p=["Lower back","Upper back","Neck","Wrist (L)","Wrist (R)","Shoulder (L)","Shoulder (R)","Hip (L)","Hip (R)","Knee (L)","Knee (R)","Ankle (L)","Ankle (R)","Foot (L)","Foot (R)","Hand (L)","Hand (R)","Head","Abdomen","Cervical spine","Thoracic spine","Lumbar spine"],k=["Aching","Sharp","Dull ache","Burning","Throbbing","Stabbing","Tingling","Numbness","Stiffness","Weakness","Cramping","Electric shock"];function f({onComplete:i,onCancel:n}){const[a,f]=e.useState(1),[h,b]=e.useState(5),[N,x]=e.useState([]),[g,y]=e.useState([]),[v,D]=e.useState(""),[j,C]=e.useState(!1),E=t(c.painSliderLabel),S=t(c.painSliderHint),w=t(c.locationsLabel),P=t(c.locationsHint);t(c.bodyMapToggle);const U=t(c.notesLabel),V=t(c.notesPlaceholder),L=t(c.continueButton),Q=t(c.saveButton),M=t(c.keyboardHint),{isSupported:$,isListening:A,transcript:I,startListening:T,stopListening:R,resetTranscript:F,voiceError:z,clearVoiceError:q}=function(){const[s,t]=e.useState(!1),[r,i]=e.useState(!1),[n,a]=e.useState(""),[c,o]=e.useState(null),m=e.useRef(null),l=e.useRef("");e.useEffect(()=>{if("undefined"==typeof window)return;const e=window,s=e.webkitSpeechRecognition||e.SpeechRecognition;if(s){t(!0);const e=new s;e.continuous=!0,e.interimResults=!0,e.onresult=e=>{const s=Array.from(e.results),t=s.filter(e=>e.isFinal),r=(t.length>0?t:s).map(e=>e[0]).map(e=>e?.transcript??"").join("").trim();r!==l.current&&(l.current=r,a(r))},e.onerror=e=>{i(!1);const s=e?.error&&{"not-allowed":"Microphone permissions were denied.",network:"Speech service not reachable right now.","no-speech":"No speech detected. Try again when ready."}[e.error]||"Voice input stopped. Please verify microphone permissions.";o(s)},e.onend=()=>i(!1),m.current=e}return()=>{m.current?.stop(),m.current=null}},[]);const u=e.useCallback(()=>{if(m.current&&!r){a(""),o(null),l.current="";try{m.current.start(),i(!0)}catch(e){o("Unable to start voice input. Please check microphone permissions."),i(!1)}}},[r]),d=e.useCallback(()=>{m.current&&r&&(m.current.stop(),i(!1))},[r]),p=e.useCallback(()=>a(""),[]),k=e.useCallback(()=>o(null),[]);return{isSupported:s,isListening:r,transcript:n,startListening:u,stopListening:d,resetTranscript:p,voiceError:c,clearVoiceError:k}}(),H=e=>{b(e)},O=(e,s,t)=>{s.includes(e)?t(s.filter(s=>s!==e)):t([...s,e])},W=e.useCallback(()=>{if(a<3)f(a+1);else{if(0===N.length)return;i({pain:h,locations:N,symptoms:g,notes:v})}},[a,h,N,g,v,i]),B="undefined"!=typeof navigator&&!1===navigator.onLine?"Offline: only works if your browser/OS provides local speech.":"Uses your device speech service. Offline support varies by browser/OS.",K=$?"Voice Mode requires a browser with Web Speech API support (SpeechRecognition). Offline capability varies by browser/OS.":"Voice Mode requires a browser with Web Speech API support (SpeechRecognition).",Y=3===a,_=Y&&0===N.length?"Select at least one location to save.":null,G=`${N.length} location${1===N.length?"":"s"} selected · ${g.length} symptom${1===g.length?"":"s"} selected`;e.useEffect(()=>{!j&&A&&R(),j||q()},[A,j,R,q]);return e.useEffect(()=>{const e=e=>{if("Enter"===e.key&&!e.shiftKey){if("TEXTAREA"===document.activeElement?.tagName)return;e.preventDefault(),W()}"Escape"===e.key&&(e.preventDefault(),a>1?f(a-1):n())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,W,n]),s.jsxDEV("div",{className:"min-h-screen bg-surface-900 flex flex-col",children:[s.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-surface-700",children:[s.jsxDEV("button",{onClick:()=>{a>1?f(a-1):n()},className:r("flex items-center gap-2 px-3 py-2 rounded-[var(--radius-md)]","text-small text-ink-300 hover:text-ink-100 hover:bg-surface-800","transition-colors duration-[var(--duration-fast)]"),children:[s.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:309,columnNumber:11},this),1===a?"Cancel":"Back"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:301,columnNumber:9},this),s.jsxDEV("div",{className:"flex items-center gap-2",children:[1,2,3].map(e=>s.jsxDEV("div",{className:r("w-2 h-2 rounded-full transition-all duration-[var(--duration-normal)]",e===a&&"w-6 bg-primary-500",e<a&&"bg-good-500",e>a&&"bg-surface-600")},e,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:315,columnNumber:13},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:313,columnNumber:9},this),s.jsxDEV("div",{className:"text-small text-ink-400 text-mono w-16 text-right",children:[a,"/3"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:327,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:300,columnNumber:7},this),s.jsxDEV("div",{className:"p-4 pb-0",children:s.jsxDEV("div",{className:"max-w-2xl mx-auto bg-surface-800 border border-surface-700 rounded-[var(--radius-lg)] p-4 flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[s.jsxDEV("div",{className:"flex gap-3 items-start",children:[$?s.jsxDEV(m,{className:"w-5 h-5 text-primary-400 mt-0.5","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:334,columnNumber:15},this):s.jsxDEV(l,{className:"w-5 h-5 text-ink-500 mt-0.5","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:336,columnNumber:15},this),s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"text-body-medium text-ink-100",title:K,children:"Voice Mode"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:339,columnNumber:15},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:$?B:"Voice mode isn't available in this browser. You can still use your operating system's built-in dictation features."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:342,columnNumber:15},this),z&&s.jsxDEV("p",{className:"text-small text-danger-400",role:"alert",children:z},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:348,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:338,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:332,columnNumber:11},this),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-tiny text-ink-500",title:K,children:[j?"On":"Off"," ·"," ",$?"Speech (browser-dependent)":"Unavailable in this browser"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:355,columnNumber:13},this),s.jsxDEV("button",{type:"button",onClick:()=>C(e=>!e),disabled:!$,"aria-pressed":j,className:r("px-4 py-2 rounded-[var(--radius-md)] text-small font-medium","border border-surface-600 transition-colors duration-[var(--duration-fast)]",j?"bg-primary-500 text-ink-900 border-primary-500":"bg-surface-900 text-ink-200 hover:border-primary-500/60",!$&&"opacity-60 cursor-not-allowed"),children:j?"Disable voice mode":"Enable voice mode"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:359,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:354,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:331,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:330,columnNumber:7},this),s.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:[1===a&&s.jsxDEV("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxDEV("div",{className:"surface-card",children:[s.jsxDEV("div",{className:"text-small text-ink-300",children:"Quick log"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:384,columnNumber:15},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:"Captures pain level and at least one location. Symptoms and notes are optional. This is the fastest way to log."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:385,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:383,columnNumber:13},this),s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-h2 text-ink-50 mb-2",children:E},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:392,columnNumber:15},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:S},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:393,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:391,columnNumber:13},this),s.jsxDEV("div",{className:"flex items-center justify-center gap-4 mb-6",children:[s.jsxDEV("button",{onClick:()=>H(Math.max(0,h-1)),"aria-label":"Decrease pain level",className:r("flex items-center justify-center","w-12 h-12 min-w-[48px] min-h-[48px]","rounded-[var(--radius-md)]","bg-surface-700 hover:bg-surface-600 border border-surface-600","text-ink-200 hover:text-ink-100","transition-colors duration-[var(--duration-fast)]","text-h2 font-medium","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:0===h,children:"−"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:398,columnNumber:15},this),s.jsxDEV("input",{type:"number",min:"0",max:"10",value:h,onChange:e=>{const s=Math.max(0,Math.min(10,Number(e.target.value)));H(s)},"aria-label":"Pain level numeric entry",className:r("w-24 h-16 text-center","text-4xl font-bold text-mono","bg-surface-800 border-2 border-surface-600","text-ink-50 rounded-[var(--radius-md)]","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none")},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:416,columnNumber:15},this),s.jsxDEV("button",{onClick:()=>H(Math.min(10,h+1)),"aria-label":"Increase pain level",className:r("flex items-center justify-center","w-12 h-12 min-w-[48px] min-h-[48px]","rounded-[var(--radius-md)]","bg-surface-700 hover:bg-surface-600 border border-surface-600","text-ink-200 hover:text-ink-100","transition-colors duration-[var(--duration-fast)]","text-h2 font-medium","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:10===h,children:"+"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:436,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:397,columnNumber:13},this),s.jsxDEV("div",{className:r("p-8 rounded-[var(--radius-xl)] text-center","transition-all duration-[var(--duration-normal)]"),style:{backgroundColor:(X=h,`hsl(220, ${20+5*X}%, ${95-6*X}%)`),color:h>5?"var(--ink-50)":"var(--ink-900)"},role:"status","aria-live":"polite",children:[s.jsxDEV("div",{className:"text-display text-mono mb-2 text-6xl font-bold",children:h},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:468,columnNumber:15},this),s.jsxDEV("div",{className:"text-body-medium",children:d[h]},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:469,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:456,columnNumber:13},this),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV("label",{htmlFor:"pain-slider",className:"sr-only",children:"Pain intensity slider. Use arrow keys or swipe to adjust."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:474,columnNumber:15},this),s.jsxDEV("input",{id:"pain-slider",type:"range",min:"0",max:"10",value:h,onChange:e=>H(Number(e.target.value)),onKeyDown:e=>{"ArrowUp"===e.key||"ArrowRight"===e.key?(e.preventDefault(),H(Math.min(10,h+1))):"ArrowDown"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),H(Math.max(0,h-1)))},"aria-label":"Pain intensity","aria-valuemin":0,"aria-valuemax":10,"aria-valuenow":h,"aria-valuetext":`${h} of 10, ${d[h]}`,"aria-describedby":"pain-slider-help",className:"w-full h-12 cursor-pointer appearance-none bg-transparent\r\n                  [&::-webkit-slider-track]:h-2 [&::-webkit-slider-track]:bg-gray-300 \r\n                  [&::-webkit-slider-track]:rounded-full\r\n                  [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 \r\n                  [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:rounded-full \r\n                  [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:shadow-lg\r\n                  [&::-moz-range-track]:h-2 [&::-moz-range-track]:bg-gray-300 \r\n                  [&::-moz-range-track]:rounded-full\r\n                  [&::-moz-range-thumb]:w-6 [&::-moz-range-thumb]:h-6 \r\n                  [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-600 \r\n                  [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:shadow-lg\r\n                  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:477,columnNumber:15},this),s.jsxDEV("div",{id:"pain-slider-help",className:"sr-only",children:"Use arrow keys to adjust pain level, or click the plus and minus buttons above for precise control."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:512,columnNumber:15},this),s.jsxDEV("div",{className:"flex justify-between text-tiny text-ink-400 text-mono px-1",children:Array.from({length:11},(e,t)=>s.jsxDEV("button",{onClick:()=>H(t),"aria-label":`Set pain level to ${t}, ${d[t]}`,className:r("w-8 h-8 min-w-[32px] min-h-[32px] rounded flex items-center justify-center","hover:bg-surface-700 transition-colors","focus:outline-none focus:ring-2 focus:ring-primary-500",t===h&&"bg-primary-500 text-ink-900 font-bold"),children:t},t,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:520,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:518,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:473,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:382,columnNumber:11},this),2===a&&s.jsxDEV("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-h2 text-ink-50 mb-2",children:w},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:542,columnNumber:15},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:P},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:543,columnNumber:15},this),0===N.length&&s.jsxDEV("p",{className:"text-small text-warn-400 mt-2",role:"note",children:"At least one location is required to save."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:545,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:541,columnNumber:13},this),s.jsxDEV("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:N.length>0?`${N.length} location${N.length>1?"s":""} selected: ${N.join(", ")}`:"No locations selected"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:552,columnNumber:13},this),s.jsxDEV("fieldset",{children:[s.jsxDEV("legend",{className:"sr-only",children:"Pain locations"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:560,columnNumber:15},this),s.jsxDEV("div",{className:"flex flex-wrap gap-2",children:p.map(e=>s.jsxDEV("button",{onClick:()=>O(e,N,x),role:"checkbox","aria-checked":N.includes(e),"aria-label":`${e} location`,className:r("px-4 py-2 min-w-[48px] min-h-[48px] rounded-[var(--radius-full)] text-small","border-2 transition-all duration-[var(--duration-fast)]","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900",N.includes(e)?"bg-primary-500 border-primary-500 text-ink-900 font-medium":"bg-surface-800 border-surface-600 text-ink-200 hover:border-primary-500/50"),children:[N.includes(e)&&s.jsxDEV(u,{className:"w-3 h-3 inline mr-1","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:579,columnNumber:23},this),e]},e,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:563,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:561,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:559,columnNumber:13},this),s.jsxDEV("div",{className:"mt-8",children:[s.jsxDEV("h3",{className:"text-body-medium text-ink-200 mb-3",children:"What does it feel like?"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:589,columnNumber:15},this),s.jsxDEV("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:g.length>0?`${g.length} symptom${g.length>1?"s":""} selected: ${g.join(", ")}`:"No symptoms selected"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:592,columnNumber:15},this),s.jsxDEV("fieldset",{children:[s.jsxDEV("legend",{className:"sr-only",children:"Pain symptoms"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:599,columnNumber:17},this),s.jsxDEV("div",{className:"flex flex-wrap gap-2",children:k.map(e=>s.jsxDEV("button",{onClick:()=>O(e,g,y),role:"checkbox","aria-checked":g.includes(e),"aria-label":`${e} symptom`,className:r("px-4 py-2 min-w-[48px] min-h-[48px] rounded-[var(--radius-full)] text-small","border-2 transition-all duration-[var(--duration-fast)]","focus:outline-none focus:ring-2 focus:ring-warn-500 focus:ring-offset-2 focus:ring-offset-surface-900",g.includes(e)?"bg-warn-500 border-warn-500 text-ink-900 font-medium":"bg-surface-800 border-surface-600 text-ink-200 hover:border-warn-500/50"),children:[g.includes(e)&&s.jsxDEV(u,{className:"w-3 h-3 inline mr-1","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:618,columnNumber:25},this),e]},e,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:602,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:600,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:598,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:588,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:540,columnNumber:11},this),3===a&&s.jsxDEV("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-h2 text-ink-50 mb-2",children:U},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:632,columnNumber:15},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:"Context helps identify patterns"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:633,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:631,columnNumber:13},this),s.jsxDEV("div",{children:[s.jsxDEV("label",{htmlFor:"pain-notes",className:"block text-body-medium text-ink-200 mb-2",children:"Additional Notes"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:637,columnNumber:15},this),s.jsxDEV("textarea",{id:"pain-notes",value:v,onChange:e=>D(e.target.value),placeholder:V,inputMode:"text",autoComplete:"on",autoCorrect:"on",autoCapitalize:"sentences",enterKeyHint:"done","aria-label":"Additional notes about pain","aria-describedby":"notes-hint notes-remaining",maxLength:500,className:r("w-full h-32 p-4 rounded-[var(--radius-xl)]","bg-surface-800 border border-surface-600","text-body text-ink-100 placeholder:text-ink-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900 focus:border-transparent","transition-all duration-[var(--duration-fast)]","resize-none")},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:640,columnNumber:15},this),s.jsxDEV("div",{className:"flex justify-between items-center mt-2",children:[s.jsxDEV("span",{id:"notes-hint",className:"text-small text-ink-400",children:0===v.length?"No notes yet":`${v.length} character${1===v.length?"":"s"}`},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:663,columnNumber:17},this),s.jsxDEV("span",{id:"notes-remaining",className:"text-small text-ink-500","aria-live":"polite","aria-atomic":"true",children:[500-v.length," remaining"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:668,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:662,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:636,columnNumber:13},this),j&&$&&s.jsxDEV("div",{className:"surface-card border border-surface-700 bg-surface-800/70",children:[s.jsxDEV("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"text-body-medium text-ink-100",children:"Voice dictation"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:683,columnNumber:21},this),s.jsxDEV("p",{className:"text-small text-ink-400",children:["Dictates using your device speech service. ",B]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:684,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:682,columnNumber:19},this),s.jsxDEV("button",{type:"button",onClick:A?R:T,className:r("px-4 py-2 rounded-[var(--radius-md)] text-small font-medium","border border-surface-600 transition-colors duration-[var(--duration-fast)] flex items-center gap-2",A?"bg-danger-500 text-ink-900 border-danger-500":"bg-primary-500 text-ink-900 border-primary-500"),"aria-pressed":A,"aria-label":A?"Stop voice dictation":"Start voice dictation",children:[A?s.jsxDEV(l,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:701,columnNumber:36},this):s.jsxDEV(m,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:701,columnNumber:69},this),A?"Stop dictation":"Start dictation"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:688,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:681,columnNumber:17},this),I&&s.jsxDEV("div",{className:"mt-3 p-3 rounded-[var(--radius-md)] bg-surface-900 border border-surface-700",children:[s.jsxDEV("div",{className:"text-small text-ink-300 mb-1",children:"Heard"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:708,columnNumber:21},this),s.jsxDEV("p",{className:"text-body text-ink-100 mb-3","aria-live":"polite",children:I},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:709,columnNumber:21},this),s.jsxDEV("div",{className:"flex gap-2 flex-wrap",children:[s.jsxDEV("button",{type:"button",onClick:()=>{I&&(D(e=>e?`${e}\n${I}`:I),F())},className:r("px-3 py-2 rounded-[var(--radius-md)] text-small font-medium","bg-primary-500 text-ink-900 hover:bg-primary-400 transition-colors"),children:"Insert into notes"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:713,columnNumber:23},this),s.jsxDEV("button",{type:"button",onClick:F,className:r("px-3 py-2 rounded-[var(--radius-md)] text-small font-medium","bg-surface-900 text-ink-200 border border-surface-600 hover:border-primary-500/60 transition-colors"),children:"Clear"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:723,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:712,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:707,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:680,columnNumber:15},this),s.jsxDEV("div",{className:"surface-card",children:[s.jsxDEV("div",{className:"text-small text-ink-400 mb-3",children:"Summary"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:741,columnNumber:15},this),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-ink-300",children:"Pain level:"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:744,columnNumber:19},this),s.jsxDEV("span",{className:"text-mono text-ink-50 font-medium",children:[h,"/10"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:745,columnNumber:19},this),s.jsxDEV("span",{className:"text-ink-400",children:["(",d[h],")"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:746,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:743,columnNumber:17},this),N.length>0&&s.jsxDEV("div",{className:"flex items-start gap-2",children:[s.jsxDEV("span",{className:"text-ink-300",children:"Locations:"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:750,columnNumber:21},this),s.jsxDEV("span",{className:"text-ink-50",children:N.join(", ")},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:751,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:749,columnNumber:19},this),g.length>0&&s.jsxDEV("div",{className:"flex items-start gap-2",children:[s.jsxDEV("span",{className:"text-ink-300",children:"Symptoms:"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:756,columnNumber:21},this),s.jsxDEV("span",{className:"text-ink-50",children:g.join(", ")},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:757,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:755,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:742,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:740,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:630,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:380,columnNumber:7},this),s.jsxDEV("div",{className:"sticky bottom-0 left-0 right-0 p-4 border-t border-surface-700 bg-surface-900/95 backdrop-blur-sm z-10",children:[s.jsxDEV("div",{className:"max-w-2xl mx-auto",children:[Y&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:r("mb-2 text-small",N.length>0?"text-ink-400":"text-warn-400"),"aria-live":"polite",children:G},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:771,columnNumber:15},this),_&&s.jsxDEV("p",{className:"text-small text-warn-400 mb-3",role:"alert",children:_},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:778,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:770,columnNumber:13},this),s.jsxDEV("div",{className:"flex gap-3",children:[a>1&&s.jsxDEV("button",{onClick:()=>f(a-1),className:r("px-6 py-4 rounded-[var(--radius-xl)]","min-h-[56px] min-w-[56px]","bg-surface-800 hover:bg-surface-700","text-body-medium text-ink-200 font-medium","transition-colors duration-[var(--duration-fast)]","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900","flex-shrink-0"),"aria-label":"Go back to previous step",children:"Back"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:787,columnNumber:15},this),s.jsxDEV("button",{onClick:W,disabled:Y&&!!_,className:r("flex-1 py-4 rounded-[var(--radius-xl)]","min-h-[56px]","bg-primary-500 hover:bg-primary-400","text-body-medium text-ink-900 font-medium","transition-colors duration-[var(--duration-fast)]","shadow-[var(--elevation-2)]","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-900",Y&&!!_&&"opacity-60 cursor-not-allowed"),"aria-label":3===a?"Save pain entry":`Continue to step ${a+1}`,children:3===a?Q:L},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:803,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:785,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:768,columnNumber:9},this),s.jsxDEV("div",{className:"max-w-2xl mx-auto mt-2 text-center",children:s.jsxDEV("p",{className:"text-xs text-ink-500",children:[M,a>1&&s.jsxDEV(s.Fragment,{children:[" ","or ",s.jsxDEV("kbd",{className:"px-2 py-1 bg-surface-800 rounded text-ink-400",children:"Esc"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:829,columnNumber:20},this)," to go back"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:827,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:824,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:823,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:767,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/design-system/fused-v2/QuickLogStepper.tsx",lineNumber:298,columnNumber:5},this);var X}function h(e,s,t){return Math.max(s,Math.min(t,e))}function b(e){const s=e.trim();return s?s.charAt(0).toUpperCase()+s.slice(1):s}function N(e,s){const t=Date.now()-24*s*60*60*1e3;return e.filter(e=>{const s=new Date(e.timestamp).getTime();return Number.isFinite(s)&&s>=t})}function x(e){const{newEntry:s,allEntries:t}=e,r=[],i=N(t,30).filter(e=>e.id!==s.id),n=s.baselineData.pain,a=(s.baselineData.locations??[]).filter(Boolean);if(a.length){const e=function(e){const s=new Map;for(const n of e)for(const e of n.baselineData.locations??[])e&&s.set(e,(s.get(e)??0)+1);const t=[...s.entries()].sort((e,s)=>s[1]-e[1]);if(!t.length)return null;const[r,i]=t[0];return{location:r,count:i}}(i);e&&a.includes(e.location)&&e?r.push({id:"location-consistency",title:"This matches a recent pattern",description:`${b(e.location)} shows up often in your recent entries. Noting what was happening around flare-ups can help spot workable adjustments over time.`,confidence:h(Math.round(e.count/Math.max(1,i.length)*100),40,90)}):e&&r.push({id:"location-context",title:"Location trend to watch",description:`${b(e.location)} is one of your more common recent locations. If today's pain feels different, consider adding a quick note about activity, posture, sleep, or medication timing.`,confidence:h(Math.round(e.count/Math.max(1,i.length)*100),35,85)})}const c=N(t,7),o=(m=c).length?m.reduce((e,s)=>e+(s.baselineData?.pain??0),0)/m.length:null;var m;if(null!==o&&Number.isFinite(n)){const e=n-o;Math.abs(e)>=1&&r.push({id:"pain-vs-recent",title:e>0?"A higher-pain moment today":"A gentler moment today",description:e>0?`Today is about ${e.toFixed(1)} points higher than your recent 7-day average. If you can, jot a short context note (activity, stress, sleep, meds) so patterns are easier to trust later.`:`Today is about ${Math.abs(e).toFixed(1)} points lower than your recent 7-day average. If anything helped (rest, pacing, stretching, heat/ice), it can be worth noting for future flares.`,confidence:h(Math.round(c.length/10*100),35,80)})}const l=s.notes??"";return l&&function(e){const s=e.toLowerCase();return s.includes("desk")||s.includes("computer")||s.includes("laptop")||s.includes("typing")||s.includes("sitting")||s.includes("chair")||s.includes("ergonomic")}(l)&&r.push({id:"desk-work",title:"Desk-work signal",description:"You mentioned desk or sitting work. If it fits your day, small ergonomic tweaks (chair height, monitor position, micro-breaks) can be useful to test and track over time.",confidence:55}),r.push({id:"data-quality",title:"Make patterns easier to trust",description:"If you want stronger trigger detection, consider tracking a few context factors consistently (activity level, meds taken and timing, sleep quality, stress). Even quick yes/no notes help.",confidence:60}),r.slice(0,4)}function g({onComplete:t,onCancel:r,entries:c,onDone:o}){const[m,l]=e.useState(5),[u,d]=e.useState(6),[p,k]=e.useState(null),[h,b]=e.useState(!1),N=e.useRef(!0),g=e.useRef(null),y=i();e.useEffect(()=>{if(!h||!g.current)return;n.saveFocusAndMoveTo(g.current);const e=n.createFocusTrap(g.current);a("Insights are available. Dialog opened.","polite");const s=e=>{"Escape"===e.key&&(e.preventDefault(),b(!1),k(null),n.restoreFocus(),a("Insights dismissed","polite"))};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),e()}},[h]),e.useEffect(()=>()=>{N.current=!1},[]),e.useEffect(()=>{try{if("1"===new URLSearchParams(window.location.search).get("test_show_insights")){k([{id:"test-immediate-1",title:"Immediate test insight",description:"Canned insight shown for E2E tests.",confidence:80}].slice(0,5)),b(!0),a("Insights are available. Dialog opened.","polite")}}catch{}},[]);return s.jsxDEV("div",{className:"min-h-screen bg-background p-4",children:s.jsxDEV("div",{className:"max-w-3xl mx-auto",children:[s.jsxDEV("div",{className:"mb-4",children:[s.jsxDEV("h1",{className:"text-2xl font-semibold",children:"Daily Check-in"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:197,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground mt-2",children:"How are you holding up today? This quick check-in helps the app give kinder, more useful insights."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:198,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:196,columnNumber:9},this),s.jsxDEV("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[s.jsxDEV("label",{className:"text-sm text-foreground",children:"Mood (0-10)"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:205,columnNumber:11},this),s.jsxDEV("input",{type:"range",min:0,max:10,value:m,onChange:e=>l(Number(e.target.value)),"aria-label":"Mood"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:206,columnNumber:11},this),s.jsxDEV("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxDEV("span",{children:["Mood: ",m]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:215,columnNumber:13},this),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("label",{className:"text-sm",children:"Sleep quality (0-10)"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:217,columnNumber:15},this),s.jsxDEV("input",{type:"range",min:0,max:10,value:u,onChange:e=>d(Number(e.target.value)),className:"w-40","aria-label":"Sleep quality"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:218,columnNumber:15},this),s.jsxDEV("span",{className:"ml-2",children:u},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:216,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:214,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:204,columnNumber:9},this),s.jsxDEV(f,{onComplete:async e=>{const s={baselineData:{pain:e.pain,locations:e.locations,symptoms:e.symptoms},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:u,moodImpact:m,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:e.notes};try{t(s)}catch(r){return void y.error("Save failed","Your check-in could not be saved.")}(async()=>{try{if("1"===new URLSearchParams(window.location.search).get("test_insights")){const e=[{id:"test-1",title:"Test insight",description:"This is a test insight.",confidence:90}];if(!N.current){if(e.length>0){const s=e[0];y.info(s.title,s.description??"A new insight is ready in your app.")}return}if(k(e.slice(0,5)),b(!0),e.length>0){const s=e[0];y.success(s.title,s.description??"We found something you might find helpful.")}return}}catch{}try{const e={...s,id:Date.now(),timestamp:(new Date).toISOString()},t=x({newEntry:e,allEntries:[...c||[],e]});if(!N.current){if(t&&t.length>0){const e=t[0];y.info(e.title,e.description??"A new insight is ready in your app.")}return}const r=t.slice(0,5);if(k(r),b(!0),t&&t.length>0){const e=t[0];y.success(e.title,e.description??"We found something you might find helpful.")}}catch(r){}})()},onCancel:r},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:233,columnNumber:9},this),p&&h&&s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"presentation","aria-hidden":!h,children:[s.jsxDEV("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true",onClick:()=>{b(!1),k(null),n.restoreFocus(),a("Insights dismissed","polite")}},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:243,columnNumber:13},this),s.jsxDEV("div",{ref:g,role:"dialog","aria-modal":"true","aria-labelledby":"insights-title","aria-describedby":"insights-desc",className:"relative z-10 w-full max-w-2xl mx-4 bg-panel rounded-lg shadow-lg p-6 focus:outline-none",children:[s.jsxDEV("h3",{id:"insights-title",className:"text-lg font-semibold",children:"Thoughtful follow-up"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:263,columnNumber:15},this),s.jsxDEV("p",{id:"insights-desc",className:"text-sm text-muted-foreground mt-1",children:"Here are a few insights based on your recent check-in."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:266,columnNumber:15},this),s.jsxDEV("ul",{className:"mt-3 space-y-2",children:p.map(e=>s.jsxDEV("li",{className:"p-2 bg-background rounded",children:[s.jsxDEV("strong",{children:e.title},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:273,columnNumber:21},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:e.description},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:274,columnNumber:21},this)]},e.id,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:272,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:270,columnNumber:15},this),s.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[s.jsxDEV("button",{type:"button",className:"btn btn-secondary",onClick:()=>{b(!1),k(null),n.restoreFocus(),a("Insights dismissed","polite")},children:"Dismiss"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:280,columnNumber:17},this),s.jsxDEV("button",{type:"button",className:"btn btn-primary",onClick:()=>{b(!1),k(null),n.restoreFocus(),a("Insights accepted. Returning to dashboard.","polite"),"function"==typeof o&&o()},children:"Done"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:293,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:279,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:255,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:195,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/checkin/DailyCheckin.tsx",lineNumber:194,columnNumber:5},this)}export{g as default};
