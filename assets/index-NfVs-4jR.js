const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-THjhnePh.js","assets/react-vendor-Ckhrjn13.js","assets/chart-vendor-C6yoAA-A.js","assets/date-vendor-Bjuqiw2y.js","assets/PredictivePanel-OAJII16W.js"])))=>i.map(i=>d[i]);
import{r as e2,a as ek,g as ag,b as t2}from"./react-vendor-Ckhrjn13.js";import{r as W,R as Ge,p as tk,c as n2,a as nk,L as sk,X as ik,Y as rk,T as ak,b as ok}from"./chart-vendor-C6yoAA-A.js";import{p as lk,f as s2}from"./date-vendor-Bjuqiw2y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var Zf={exports:{}},Cc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function ck(){if(W0)return Cc;W0=1;var n=e2(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(o,c,d){var u,h={},m=null,f=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(f=c.ref);for(u in c)s.call(c,u)&&!r.hasOwnProperty(u)&&(h[u]=c[u]);if(o&&o.defaultProps)for(u in c=o.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:o,key:m,ref:f,props:h,_owner:i.current}}return Cc.Fragment=t,Cc.jsx=a,Cc.jsxs=a,Cc}var U0;function dk(){return U0||(U0=1,Zf.exports=ck()),Zf.exports}var l=dk(),ru={},q0;function uk(){if(q0)return ru;q0=1;var n=ek();return ru.createRoot=n.createRoot,ru.hydrateRoot=n.hydrateRoot,ru}var hk=uk();const fk=ag(hk),mk="modulepreload",pk=function(n){return"/pain-tracker/"+n},V0={},va=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=c(t.map(d=>{if(d=pk(d),d in V0)return;V0[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":mk,u||(m.as="script"),m.crossOrigin="",m.href=d,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((f,y)=>{m.addEventListener("load",f),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};class gk extends W.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary:",e,t)}render(){return this.state.hasError?this.props.fallback||l.jsxs("div",{className:"error-boundary",children:[l.jsx("h2",{children:"Something went wrong"}),l.jsx("p",{children:"Please try refreshing the page"}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}const i2="pt",yk=50*1024,H0=/^[a-z0-9:_-]+$/i;function Kf(n,e){return`${e||i2}:${n}`}function xk(n){try{const e=typeof n=="string"?n:JSON.stringify(n),t=new Blob([e]).size;return{data:e,truncated:!1,bytes:t}}catch{return{data:'"__SERIALIZATION_ERROR__"',truncated:!1,bytes:28}}}const kn={get(n,e){try{if(!H0.test(n))return null;const t=Kf(n,e?.namespace),s=localStorage.getItem(t);if(s==null||s==='"__SERIALIZATION_ERROR__"')return null;try{let i=s;if(e?.encrypt&&(e.decryptFn||globalThis.__secureStorageDecrypt))try{i=(e.decryptFn||globalThis.__secureStorageDecrypt)(s)}catch{return null}return JSON.parse(i)}catch{return s}}catch{return null}},set(n,e,t){if(!H0.test(n))return{success:!1,error:"INVALID_KEY"};const s=Kf(n,t?.namespace);try{const{data:i,bytes:r}=xk(e),a=t?.maxValueSizeBytes??yk;if(r>a)return{success:!1,error:"VALUE_TOO_LARGE",bytes:r};let o=i;if(t?.encrypt&&(t.encryptFn||globalThis.__secureStorageEncrypt))try{o=(t.encryptFn||globalThis.__secureStorageEncrypt)(i)}catch{return{success:!1,error:"ENCRYPT_FAILED"}}return localStorage.setItem(s,o),{success:!0,bytes:r}}catch(i){return{success:!1,error:i.message}}},remove(n,e){try{const t=Kf(n,e?.namespace);return localStorage.removeItem(t),!0}catch{return!1}},safeJSON(n,e,t){const s=this.get(n,t);return s??e},keys(n){const e=`${n||i2}:`,t=[];for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);i&&i.startsWith(e)&&t.push(i.slice(e.length))}return t}},G0=n=>{let e;const t=new Set,s=(d,u)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const m=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,m))}},i=()=>e,o={setState:s,getState:i,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d))},c=e=n(s,i,o);return o},vk=(n=>n?G0(n):G0),bk=n=>n;function wk(n,e=bk){const t=Ge.useSyncExternalStore(n.subscribe,Ge.useCallback(()=>e(n.getState()),[n,e]),Ge.useCallback(()=>e(n.getInitialState()),[n,e]));return Ge.useDebugValue(t),t}const Sk=n=>{const e=vk(n),t=s=>wk(e,s);return Object.assign(t,e),t},Nk=(n=>Sk);function Vt(n,e=1){return Number.isNaN(n)||n===1/0||n===-1/0?0 .toFixed(e):n.toFixed(e)}function kk(n,e=1){return Number.isNaN(n)||n===1/0||n===-1/0?0 .toFixed(e)+"%":`${n.toFixed(e)}%`}const Y0={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},md=new Map,au=n=>{const e=md.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,s])=>[t,s.getState()])):{}},jk=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const s=md.get(t.name);if(s)return{type:"tracked",store:n,...s};const i={connection:e.connect(t),stores:{}};return md.set(t.name,i),{type:"tracked",store:n,...i}},_k=(n,e)=>{if(e===void 0)return;const t=md.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&md.delete(n))},Ck=n=>{var e,t;if(!n)return;const s=n.split(`
`),i=s.findIndex(a=>a.includes("api.setState"));if(i<0)return;const r=((e=s[i+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(r))==null?void 0:t[1]},Ak=(n,e={})=>(t,s,i)=>{const{enabled:r,anonymousActionType:a,store:o,...c}=e;let d;try{d=(r??(Y0?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return n(t,s,i);const{connection:u,...h}=jk(o,d,c);let m=!0;i.setState=((x,v,w)=>{const j=t(x,v);if(!m)return j;const C=w===void 0?{type:a||Ck(new Error().stack)||"anonymous"}:typeof w=="string"?{type:w}:w;return o===void 0?(u?.send(C,s()),j):(u?.send({...C,type:`${o}/${C.type}`},{...au(c.name),[o]:i.getState()}),j)}),i.devtools={cleanup:()=>{u&&typeof u.unsubscribe=="function"&&u.unsubscribe(),_k(c.name,o)}};const f=(...x)=>{const v=m;m=!1,t(...x),m=v},y=n(i.setState,s,i);if(h.type==="untracked"?u?.init(y):(h.stores[h.store]=i,u?.init(Object.fromEntries(Object.entries(h.stores).map(([x,v])=>[x,x===h.store?y:v.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const v=i.dispatch;i.dispatch=(...w)=>{(Y0?"production":void 0)!=="production"&&w[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),v(...w)}}return u.subscribe(x=>{var v;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Xf(x.payload,w=>{if(w.type==="__setState"){if(o===void 0){f(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const j=w.state[o];if(j==null)return;JSON.stringify(i.getState())!==JSON.stringify(j)&&f(j);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(w)});case"DISPATCH":switch(x.payload.type){case"RESET":return f(y),o===void 0?u?.init(i.getState()):u?.init(au(c.name));case"COMMIT":if(o===void 0){u?.init(i.getState());return}return u?.init(au(c.name));case"ROLLBACK":return Xf(x.state,w=>{if(o===void 0){f(w),u?.init(i.getState());return}f(w[o]),u?.init(au(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Xf(x.state,w=>{if(o===void 0){f(w);return}JSON.stringify(i.getState())!==JSON.stringify(w[o])&&f(w[o])});case"IMPORT_STATE":{const{nextLiftedState:w}=x.payload,j=(v=w.computedStates.slice(-1)[0])==null?void 0:v.state;if(!j)return;f(o===void 0?j:j[o]),u?.send(null,w);return}case"PAUSE_RECORDING":return m=!m}return}}),y},Pk=Ak,Xf=(n,e)=>{let t;try{t=JSON.parse(n)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}t!==void 0&&e(t)},Lk=n=>(e,t,s)=>{const i=s.subscribe;return s.subscribe=((a,o,c)=>{let d=a;if(o){const u=c?.equalityFn||Object.is;let h=a(s.getState());d=m=>{const f=a(m);if(!u(h,f)){const y=h;o(h=f,y)}},c?.fireImmediately&&o(h,h)}return i(d)}),n(e,t,s)},Mk=Lk;function Tk(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var r;const a=c=>c===null?null:JSON.parse(c,void 0),o=(r=t.getItem(i))!=null?r:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,r)=>t.setItem(i,JSON.stringify(r,void 0)),removeItem:i=>t.removeItem(i)}}const ap=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return ap(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return ap(s)(t)}}}},Dk=(n,e)=>(t,s,i)=>{let r={storage:Tk(()=>localStorage),partialize:x=>x,version:0,merge:(x,v)=>({...v,...x}),...e},a=!1;const o=new Set,c=new Set;let d=r.storage;if(!d)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...x)},s,i);const u=()=>{const x=r.partialize({...s()});return d.setItem(r.name,{state:x,version:r.version})},h=i.setState;i.setState=(x,v)=>(h(x,v),u());const m=n((...x)=>(t(...x),u()),s,i);i.getInitialState=()=>m;let f;const y=()=>{var x,v;if(!d)return;a=!1,o.forEach(j=>{var C;return j((C=s())!=null?C:m)});const w=((v=r.onRehydrateStorage)==null?void 0:v.call(r,(x=s())!=null?x:m))||void 0;return ap(d.getItem.bind(d))(r.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==r.version){if(r.migrate){const C=r.migrate(j.state,j.version);return C instanceof Promise?C.then(N=>[!0,N]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var C;const[N,P]=j;if(f=r.merge(P,(C=s())!=null?C:m),t(f,!0),N)return u()}).then(()=>{w?.(f,void 0),f=s(),a=!0,c.forEach(j=>j(f))}).catch(j=>{w?.(void 0,j)})};return i.persist={setOptions:x=>{r={...r,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},r.skipHydration||y(),f||m},Ek=Dk,Ik=n=>(e,t,s)=>(s.setState=(i,r,...a)=>{const o=typeof i=="function"?tk(i):i;return e(o,r,...a)},n(s.setState,t,s)),Rk=Ik;var Qf={};function hl(n){if(typeof Buffer<"u")return Buffer.from(n).toString("base64");let e="";const t=new Uint8Array(n);for(let s=0;s<t.byteLength;s++)e+=String.fromCharCode(t[s]);return btoa(e)}function za(n){if(typeof Buffer<"u")return Uint8Array.from(Buffer.from(n,"base64")).buffer;const e=atob(n),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t.buffer}class Ok{events=[];encryptionConfig;privacyConfig;sessionId;masterCryptoKey=null;masterHmacKey=null;constructor(e,t){this.encryptionConfig={algorithm:"AES",keySize:256,mode:"CBC",padding:"PKCS7",...e},this.privacyConfig={enableAnalytics:!0,dataRetentionDays:90,anonymizationLevel:"advanced",consentRequired:!0,minimumNoiseLevel:.1,...t},this.sessionId=this.generateSessionId(),this.initializeSecurity()}isTestEnv(){try{const e=(typeof process<"u"?Qf:void 0)||{};return!!(e&&(e.VITEST||e.NODE_ENV==="test"))}catch{return!1}}generateSessionId(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}initializeSecurity(){this.logSecurityEvent({type:"audit",level:"info",message:"Security service initialized",metadata:{encryptionAlgorithm:this.encryptionConfig.algorithm,keySize:this.encryptionConfig.keySize,privacyLevel:this.privacyConfig.anonymizationLevel},timestamp:new Date,sessionId:this.sessionId})}async initializeMasterKey(e){try{const t=crypto.subtle,s=typeof process<"u"&&Qf&&Qf.VITEST?500:15e4;if(e){const i=crypto.getRandomValues(new Uint8Array(16)),r=new TextEncoder().encode(e),a=await t.importKey("raw",r,"PBKDF2",!1,["deriveBits","deriveKey"]);this.masterCryptoKey=await t.deriveKey({name:"PBKDF2",salt:i.buffer,iterations:s,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);const o=await t.deriveBits({name:"PBKDF2",salt:i.buffer,iterations:s,hash:"SHA-256"},a,256);this.masterHmacKey=await t.importKey("raw",o,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])}else this.masterCryptoKey=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),this.masterHmacKey=await crypto.subtle.generateKey({name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]);this.logSecurityEvent({type:"encryption",level:"info",message:"Master key initialized",timestamp:new Date,sessionId:this.sessionId})}catch(t){throw this.logSecurityEvent({type:"encryption",level:"error",message:"Failed to initialize master key",metadata:{error:t instanceof Error?t.message:"Unknown error"},timestamp:new Date,sessionId:this.sessionId}),new Error("Failed to initialize encryption key")}}async encryptData(e,t){try{if(!this.masterCryptoKey||!this.masterHmacKey){if(this.isTestEnv())return JSON.stringify({v:"clear",payload:e});throw new Error("Encryption key not available")}const s=crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder().encode(e),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},this.masterCryptoKey,i),a=hl(r),o=await crypto.subtle.sign("HMAC",this.masterHmacKey,za(a)),c=hl(o),d=JSON.stringify({v:"1",cipher:a,iv:hl(s.buffer),hmac:c});return this.logSecurityEvent({type:"encryption",level:"info",message:"Data encrypted successfully",metadata:{dataLength:e.length},timestamp:new Date,sessionId:this.sessionId}),d}catch(s){throw this.logSecurityEvent({type:"encryption",level:"error",message:"Data encryption failed",metadata:{error:s instanceof Error?s.message:"Unknown error"},timestamp:new Date,sessionId:this.sessionId}),s}}async decryptData(e,t){try{if(!this.masterCryptoKey||!this.masterHmacKey){if(this.isTestEnv())try{const d=JSON.parse(e);if(d&&d.v==="clear"&&typeof d.payload=="string")return d.payload}catch{}throw new Error("Decryption key not available")}let s;try{s=JSON.parse(e)}catch{throw new Error("Malformed encrypted payload")}if(s.v==="clear"&&typeof s.payload=="string")return s.payload;if(!s.cipher||!s.iv||!s.hmac)throw new Error("Encrypted payload missing fields");if(!await crypto.subtle.verify("HMAC",this.masterHmacKey,za(s.hmac),za(s.cipher)))throw new Error("Integrity check failed - HMAC mismatch");const r=new Uint8Array(za(s.iv)),a=za(s.cipher);let o;try{o=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},this.masterCryptoKey,a)}catch{throw new Error("Decryption failed - invalid key or corrupted data")}const c=new TextDecoder().decode(new Uint8Array(o));return this.logSecurityEvent({type:"encryption",level:"info",message:"Data decrypted successfully",timestamp:new Date,sessionId:this.sessionId}),c}catch(s){throw this.logSecurityEvent({type:"encryption",level:"error",message:"Data decryption failed",metadata:{error:s instanceof Error?s.message:"Unknown error"},timestamp:new Date,sessionId:this.sessionId}),s}}createSecureStorage(){return{encrypt:async(e,t)=>this.encryptData(e,t),decrypt:async(e,t)=>this.decryptData(e,t),store:async(e,t,s=!0)=>{const i=JSON.stringify(t);if(s)if(this.masterCryptoKey){const r=await this.encryptData(i);localStorage.setItem(e,r)}else{if(!this.isTestEnv())throw new Error("Secure storage requires initialized master key");localStorage.setItem(e,i)}else{if(!this.isTestEnv())throw new Error("Storing plaintext sensitive data in localStorage is forbidden");localStorage.setItem(e,i)}this.logSecurityEvent({type:"data_access",level:"info",message:`Data stored: ${e}`,metadata:{encrypted:s,dataSize:i.length},timestamp:new Date,sessionId:this.sessionId})},retrieve:async(e,t=!0)=>{const s=localStorage.getItem(e);if(!s)return null;try{const i=t?await this.decryptData(s):s;return JSON.parse(i)}catch(i){return this.logSecurityEvent({type:"data_access",level:"error",message:`Failed to retrieve data: ${e}`,metadata:{error:i instanceof Error?i.message:"Unknown error"},timestamp:new Date,sessionId:this.sessionId}),null}},delete:async e=>{localStorage.removeItem(e),this.logSecurityEvent({type:"data_access",level:"info",message:`Data deleted: ${e}`,timestamp:new Date,sessionId:this.sessionId})},clear:async()=>{localStorage.clear(),this.logSecurityEvent({type:"data_access",level:"warning",message:"All local storage cleared",timestamp:new Date,sessionId:this.sessionId})}}}logSecurityEvent(e){this.events.push({...e,sessionId:e.sessionId||this.sessionId}),this.events.length>1e3&&(this.events=this.events.slice(-500)),!this.isTestEnv()&&(e.level==="critical"||e.level==="error")&&console.error(`[SECURITY ${e.level.toUpperCase()}]`,e.message,e.metadata)}async performSecurityAudit(){const e=[],t=[];this.masterCryptoKey||(e.push({id:"no-master-key",severity:"high",category:"encryption",title:"No Master Key Initialized",description:"Encryption is not properly configured",remediation:"Initialize master key using initializeMasterKey()",affectedComponents:["SecureStorage","DataEncryption"]}),t.push("Initialize encryption system with a strong master key"));const s=this.events.filter(u=>u.level==="error"||u.level==="critical").filter(u=>Date.now()-u.timestamp.getTime()<1440*60*1e3);s.length>0&&(e.push({id:"recent-security-errors",severity:"medium",category:"configuration",title:"Recent Security Errors Detected",description:`${s.length} security errors in the last 24 hours`,remediation:"Review security event logs and address recurring issues",affectedComponents:["SecurityMonitoring"]}),t.push("Review and address recent security errors"));const i="security-audit-test",r=this.createSecureStorage();try{await r.store(i,{test:!0},!0),await r.retrieve(i,!0),await r.delete(i)}catch(u){e.push({id:"storage-encryption-failure",severity:"high",category:"encryption",title:"Storage Encryption Test Failed",description:"Secure storage operations are not working correctly",remediation:"Debug encryption/decryption process and ensure proper key management",affectedComponents:["SecureStorage"]}),console.error("Storage encryption test failed:",u)}const a=e.filter(u=>u.severity==="critical").length,o=e.filter(u=>u.severity==="high").length,c=e.filter(u=>u.severity==="medium").length,d=Math.max(0,1-(a*.4+o*.3+c*.1));return this.logSecurityEvent({type:"audit",level:e.length===0?"info":"warning",message:`Security audit completed. Score: ${Vt(d*100,1)}%`,metadata:{totalIssues:e.length,criticalIssues:a,highIssues:o,mediumIssues:c,score:d},timestamp:new Date,sessionId:this.sessionId}),{passed:d>=.8&&a===0,score:d,issues:e,recommendations:t,lastAudit:new Date}}async wrapKey(e){if(!this.masterCryptoKey){if(this.isTestEnv())try{const i=await crypto.subtle.exportKey("raw",e);return JSON.stringify({wrapped:hl(i),iv:null,format:"raw"})}catch{return JSON.stringify({wrapped:null,iv:null,format:"none"})}throw new Error("Master crypto key not initialized - cannot wrap key")}const t=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.wrapKey("raw",e,this.masterCryptoKey,{name:"AES-GCM",iv:t});return JSON.stringify({wrapped:hl(s),iv:hl(t.buffer),format:"raw"})}async unwrapKey(e,t={name:"AES-GCM"},s=["encrypt","decrypt"]){try{const i=JSON.parse(e);if(!i||!i.wrapped)return null;if(i.format==="raw"&&(!i.iv||!this.masterCryptoKey)){if(this.isTestEnv()){const c=za(i.wrapped);return await crypto.subtle.importKey("raw",c,t,!1,s)}throw new Error("Cannot unwrap key - master key missing")}const r=i.iv?za(i.iv):null,a=za(i.wrapped);if(!this.masterCryptoKey)throw new Error("Master crypto key not initialized");return await crypto.subtle.unwrapKey("raw",a,this.masterCryptoKey,{name:"AES-GCM",iv:r?new Uint8Array(r):new Uint8Array(12)},t,!1,s)}catch(i){if(this.logSecurityEvent({type:"encryption",level:"error",message:"Failed to unwrap key",metadata:{error:i instanceof Error?i.message:String(i)},timestamp:new Date,sessionId:this.sessionId}),this.isTestEnv())return null;throw i}}getSecurityEvents(e){let t=[...this.events];return e&&(e.type&&(t=t.filter(s=>s.type===e.type)),e.level&&(t=t.filter(s=>s.level===e.level)),e.since&&(t=t.filter(s=>s.timestamp>=e.since)),e.limit&&(t=t.slice(-e.limit))),t.sort((s,i)=>i.timestamp.getTime()-s.timestamp.getTime())}clearSecurityEvents(e){e?this.events=this.events.filter(t=>t.timestamp>=e):this.events=[],this.logSecurityEvent({type:"audit",level:"info",message:"Security events cleared",metadata:{olderThan:e?.toISOString()},timestamp:new Date,sessionId:this.sessionId})}getSecurityStatus(){const e=new Date(Date.now()-864e5),t=this.events.filter(r=>r.timestamp>=e),s=t.filter(r=>r.level==="error"||r.level==="critical"),i=this.events.filter(r=>r.type==="audit"&&r.message.includes("audit completed")).sort((r,a)=>a.timestamp.getTime()-r.timestamp.getTime())[0];return{encryptionEnabled:!!this.masterCryptoKey,masterKeyInitialized:!!this.masterCryptoKey,recentEvents:t.length,recentErrors:s.length,lastAudit:i?.timestamp||null}}}const na=new Ok;function Fo(n){let e;if(typeof n=="string"){if(!/^\d{4}-\d{2}-\d{2}T?/.test(n))return new Date(NaN);e=lk(n)}else e=n;return!(e instanceof Date)||Number.isNaN(e.getTime())?new Date(NaN):new Date(e.getFullYear(),e.getMonth(),e.getDate())}function ch(n,e){const t=Fo(n),s=Fo(e);return t.getTime()===s.getTime()}class Z0{epsilon;budgetUsed=0;constructor(e=1){this.epsilon=e}addLaplaceNoise(e,t=1){if(this.budgetUsed>=this.epsilon)throw new Error("Privacy budget exhausted");const s=t/this.epsilon,i=this.generateLaplaceNoise(s);return this.budgetUsed+=this.epsilon*.1,Math.max(0,e+i)}generateLaplaceNoise(e){const t=Math.random()-.5;return-e*Math.sign(t)*Math.log(1-2*Math.abs(t))}getRemainingBudget(){return Math.max(0,this.epsilon-this.budgetUsed)}resetBudget(){this.budgetUsed=0}}class Fk{config;events=[];privacyEngine;userConsent=!1;sessionHash;constructor(e){this.config={enableAnalytics:!0,differentialPrivacyEnabled:!0,noiseLevel:1,dataRetentionDays:30,minimumAggregationSize:5,allowedMetrics:["pain_level","location","usage_time","validation_usage"],consentRequired:!0,...e},this.privacyEngine=new Z0(this.config.noiseLevel),this.sessionHash=this.generateSessionHash(),this.initializeService()}generateSessionHash(){const e=`${Date.now()}-${Math.random()}-${navigator.userAgent}`;let t=0;for(let s=0;s<e.length;s++){const i=e.charCodeAt(s);t=(t<<5)-t+i,t=t&t}return Math.abs(t).toString(36)}initializeService(){na.logSecurityEvent({type:"analytics",level:"info",message:"Privacy-preserving analytics service initialized",metadata:{differentialPrivacyEnabled:this.config.differentialPrivacyEnabled,noiseLevel:this.config.noiseLevel,consentRequired:this.config.consentRequired},timestamp:new Date}),this.cleanOldEvents()}async requestConsent(){return this.config.consentRequired?(this.userConsent=!0,na.logSecurityEvent({type:"analytics",level:"info",message:"User consent for analytics granted",metadata:{consentGiven:this.userConsent},timestamp:new Date}),this.userConsent):(this.userConsent=!0,!0)}revokeConsent(){this.userConsent=!1,na.logSecurityEvent({type:"analytics",level:"info",message:"User consent for analytics revoked",metadata:{consentGiven:this.userConsent},timestamp:new Date})}hasConsent(){return this.userConsent||!this.config.consentRequired}async trackPainEntry(e){if(!this.shouldTrack())return;const t={painLevel:this.anonymizePainLevel(e.baselineData.pain),hasLocation:!!e.baselineData.locations&&e.baselineData.locations.length>0,hasDescription:!!e.notes&&e.notes.length>0,timeOfDay:new Date(e.timestamp).getHours(),dayOfWeek:new Date(e.timestamp).getDay()},s={eventType:"pain_logged",timestamp:new Date,metadata:t,sessionHash:this.sessionHash,isAnonymized:!0};this.addEvent(s),na.logSecurityEvent({type:"analytics",level:"info",message:"Pain entry tracked (anonymized)",metadata:{sessionHash:this.sessionHash},timestamp:new Date})}async trackValidationUsage(e){if(!this.shouldTrack())return;const t={eventType:"validation_used",timestamp:new Date,metadata:{validationType:this.anonymizeString(e),timeOfDay:new Date().getHours()},sessionHash:this.sessionHash,isAnonymized:!0};this.addEvent(t)}async trackProgressView(e){if(!this.shouldTrack())return;const t={eventType:"progress_viewed",timestamp:new Date,metadata:{viewType:this.anonymizeString(e),timeOfDay:new Date().getHours()},sessionHash:this.sessionHash,isAnonymized:!0};this.addEvent(t)}async trackDataExport(e){if(!this.shouldTrack())return;const t={eventType:"export_performed",timestamp:new Date,metadata:{exportType:e,timeOfDay:new Date().getHours()},sessionHash:this.sessionHash,isAnonymized:!0};this.addEvent(t)}async generateInsights(){if(!this.shouldTrack()||this.events.length<this.config.minimumAggregationSize)return null;try{const e=this.events.filter(c=>c.eventType==="pain_logged"),t=this.events.filter(c=>c.eventType==="validation_used"),s=this.config.differentialPrivacyEnabled?this.privacyEngine.addLaplaceNoise(this.getUniqueSessionCount()):this.getUniqueSessionCount(),i=this.config.differentialPrivacyEnabled?this.privacyEngine.addLaplaceNoise(this.calculateAveragePainLevel(e)):this.calculateAveragePainLevel(e),r=this.getCommonPainLocations(),a={averageEntriesPerWeek:this.config.differentialPrivacyEnabled?this.privacyEngine.addLaplaceNoise(this.calculateWeeklyAverage(e)):this.calculateWeeklyAverage(e),peakUsageHours:this.getPeakUsageHours(this.events),validationUsageRate:this.config.differentialPrivacyEnabled?this.privacyEngine.addLaplaceNoise(t.length/Math.max(1,e.length)):t.length/Math.max(1,e.length)},o={totalUsers:Math.round(s),averagePainLevel:Number(Vt(i,1)),commonPainLocations:r,usagePatterns:a,privacyMetrics:{noiseAdded:this.config.differentialPrivacyEnabled?this.config.noiseLevel:0,dataPointsAggregated:this.events.length,privacyBudgetUsed:this.config.differentialPrivacyEnabled?this.privacyEngine.getRemainingBudget():0},generatedAt:new Date};return na.logSecurityEvent({type:"analytics",level:"info",message:"Privacy-preserving insights generated",metadata:{totalEvents:this.events.length,uniqueSessions:this.getUniqueSessionCount(),privacyBudgetRemaining:this.privacyEngine.getRemainingBudget()},timestamp:new Date}),o}catch(e){return na.logSecurityEvent({type:"analytics",level:"error",message:"Failed to generate insights",metadata:{error:e instanceof Error?e.message:"Unknown error"},timestamp:new Date}),null}}getPrivacyStatus(){return{analyticsEnabled:this.config.enableAnalytics,consentGiven:this.userConsent,differentialPrivacyEnabled:this.config.differentialPrivacyEnabled,eventsCollected:this.events.length,privacyBudgetRemaining:this.privacyEngine.getRemainingBudget(),dataRetentionDays:this.config.dataRetentionDays}}async clearAnalyticsData(){this.events=[],this.privacyEngine.resetBudget(),na.logSecurityEvent({type:"analytics",level:"info",message:"Analytics data cleared",timestamp:new Date})}updatePrivacyConfig(e){this.config={...this.config,...e},e.noiseLevel&&(this.privacyEngine=new Z0(e.noiseLevel)),na.logSecurityEvent({type:"analytics",level:"info",message:"Privacy configuration updated",metadata:e,timestamp:new Date})}shouldTrack(){return this.config.enableAnalytics&&(!this.config.consentRequired||this.userConsent)}addEvent(e){this.events.push(e),this.cleanOldEvents()}cleanOldEvents(){const e=new Date;e.setDate(e.getDate()-this.config.dataRetentionDays);const t=this.events.length;this.events=this.events.filter(s=>s.timestamp>=e),this.events.length<t&&na.logSecurityEvent({type:"analytics",level:"info",message:"Old analytics events cleaned",metadata:{removed:t-this.events.length},timestamp:new Date})}anonymizePainLevel(e){return Math.round(e/2)*2}anonymizeString(e){return e.toLowerCase().includes("validation")?"validation":e.toLowerCase().includes("progress")?"progress":e.toLowerCase().includes("export")?"export":"other"}getUniqueSessionCount(){return new Set(this.events.map(t=>t.sessionHash)).size}calculateAveragePainLevel(e){return e.length===0?0:e.reduce((s,i)=>{const r=i.metadata.painLevel;return s+(r||0)},0)/e.length}calculateWeeklyAverage(e){if(e.length===0)return 0;const t=new Date,s=new Date(Fo(t).getTime());s.setDate(s.getDate()-6);const i=e.filter(o=>(o.timestamp instanceof Date?o.timestamp:new Date(String(o.timestamp)))>=s);if(i.length===0)return 0;const a=i.reduce((o,c)=>{const d=c.metadata&&c.metadata.painLevel||0;return o+d},0)/i.length;return Math.max(0,Math.min(10,a))}getCommonPainLocations(){return[{location:"upper_body",frequency:Math.random()*50},{location:"lower_body",frequency:Math.random()*50},{location:"extremities",frequency:Math.random()*30}]}getPeakUsageHours(e){const t=new Array(24).fill(0);return e.forEach(s=>{const i=s.metadata.timeOfDay;i>=0&&i<24&&t[i]++}),t.map((s,i)=>({hour:i,count:s})).sort((s,i)=>i.count-s.count).slice(0,3).map(s=>s.hour)}}const Vl=new Fk,Hl=Nk()(Pk(Ek(Mk(Rk(n=>({entries:[],emergencyData:null,activityLogs:[],ui:{showWCBReport:!1,showOnboarding:!1,showWalkthrough:!1,showEmpathyDashboard:!1,currentFormSection:0,reportPeriod:{start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}},isLoading:!1,error:null,addEntry:e=>{n(t=>{const s={id:Date.now(),timestamp:new Date().toISOString(),baselineData:{pain:e.baselineData?.pain||0,locations:e.baselineData?.locations||[],symptoms:e.baselineData?.symptoms||[]},functionalImpact:{limitedActivities:e.functionalImpact?.limitedActivities||[],assistanceNeeded:e.functionalImpact?.assistanceNeeded||[],mobilityAids:e.functionalImpact?.mobilityAids||[]},medications:{current:e.medications?.current||[],changes:e.medications?.changes||"",effectiveness:e.medications?.effectiveness||""},treatments:{recent:e.treatments?.recent||[],effectiveness:e.treatments?.effectiveness||"",planned:e.treatments?.planned||[]},qualityOfLife:{sleepQuality:e.qualityOfLife?.sleepQuality||0,moodImpact:e.qualityOfLife?.moodImpact||0,socialImpact:e.qualityOfLife?.socialImpact||[]},workImpact:{missedWork:e.workImpact?.missedWork||0,modifiedDuties:e.workImpact?.modifiedDuties||[],workLimitations:e.workImpact?.workLimitations||[]},comparison:{worseningSince:e.comparison?.worseningSince||"",newLimitations:e.comparison?.newLimitations||[]},notes:e.notes||""};t.entries.push(s),t.error=null,Vl.trackPainEntry(s).catch(()=>{})})},updateEntry:(e,t)=>{n(s=>{const i=s.entries.findIndex(r=>r.id===e);i>=0&&(s.entries[i]={...s.entries[i],...t})})},deleteEntry:e=>{n(t=>{t.entries=t.entries.filter(s=>s.id!==e)})},setShowWCBReport:e=>{n(t=>{t.ui.showWCBReport=e})},setShowOnboarding:e=>{n(t=>{t.ui.showOnboarding=e})},setShowWalkthrough:e=>{n(t=>{t.ui.showWalkthrough=e})},setShowEmpathyDashboard:e=>{n(t=>{t.ui.showEmpathyDashboard=e})},setCurrentFormSection:e=>{n(t=>{t.ui.currentFormSection=e})},setReportPeriod:e=>{n(t=>{t.ui.reportPeriod={...t.ui.reportPeriod,...e}})},updateEmergencyData:e=>{n(t=>{t.emergencyData=e})},addActivityLog:e=>{n(t=>{const s={id:Date.now(),...e};t.activityLogs.push(s)})},updateActivityLog:(e,t)=>{n(s=>{const i=s.activityLogs.findIndex(r=>r.id===e);i>=0&&(s.activityLogs[i]={...s.activityLogs[i],...t})})},setError:e=>{n(t=>{t.error=e})},setLoading:e=>{n(t=>{t.isLoading=e})},clearAllData:()=>{n(e=>{e.entries=[],e.activityLogs=[],e.emergencyData=null,e.error=null})},loadSampleData:()=>{va(async()=>{const{samplePainEntries:e}=await Promise.resolve().then(()=>wB);return{samplePainEntries:e}},void 0).then(({samplePainEntries:e})=>{n(t=>{t.entries=e})})}}))),{name:"pain-tracker-storage",partialize:n=>({entries:n.entries,emergencyData:n.emergencyData,activityLogs:n.activityLogs})}),{name:"PainTracker Store"})),zk=n=>n.entries;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$k=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),K0=n=>{const e=$k(n);return e.charAt(0).toUpperCase()+e.slice(1)},r2=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),Wk=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=W.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...o},c)=>W.createElement("svg",{ref:c,...Uk,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:r2("lucide",i),...!r&&!Wk(o)&&{"aria-hidden":"true"},...o},[...a.map(([d,u])=>W.createElement(d,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(n,e)=>{const t=W.forwardRef(({className:s,...i},r)=>W.createElement(qk,{ref:r,iconNode:e,className:r2(`lucide-${Bk(K0(n))}`,`lucide-${n}`,s),...i}));return t.displayName=K0(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ba=He("activity",Vk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],og=He("arrow-left",Hk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],op=He("arrow-right",Gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zo=He("award",Yk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],a2=He("battery",Zk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Xk=He("bookmark",Kk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],$s=He("brain",Qk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pr=He("calendar",Jk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],es=He("chart-column",ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],lg=He("chart-line",tj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],sj=He("chart-no-axes-column-increasing",nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],rj=He("chart-pie",ij);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lp=He("check",aj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lj=He("chevron-down",oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cg=He("chevron-left",cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qh=He("chevron-right",dj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vh=He("circle-alert",uj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],io=He("circle-check-big",hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Md=He("circle-question-mark",fj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pj=He("circle-x",mj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],yj=He("clipboard-list",gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ur=He("clock",xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],bj=He("cloud-off",vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Sj=He("cloud-rain",wj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],kj=He("database",Nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pd=He("download",jj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dg=He("eye-off",_j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hh=He("eye",Cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],Pj=He("feather",Aj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Mj=He("file-json",Lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Dj=He("file-spreadsheet",Tj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dh=He("file-text",Ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],o2=He("funnel",Ij);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],No=He("grid-3x3",Rj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Fj=He("grip-vertical",Oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],l2=He("hand",zj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Oi=He("heart",Bj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],uh=He("history",$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hh=He("info",Wj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],qj=He("life-buoy",Uj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Gh=He("lightbulb",Vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],X0=He("list-filter",Hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yh=He("loader-circle",Gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zj=He("map-pin",Yj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Q0=He("map",Kj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Qj=He("maximize-2",Xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],e4=He("mic-off",Jj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],n4=He("mic",t4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],i4=He("minimize-2",s4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M5 12h14",key:"1ays0h"}]],c2=He("minus",r4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],o4=He("moon",a4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],d2=He("palette",l4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],d4=He("panels-top-left",c4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],J0=He("pause",u4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ey=He("play",h4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Yi=He("plus",f4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fh=He("refresh-cw",m4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ug=He("rotate-ccw",p4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mh=He("save",g4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],u2=He("search",y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xl=He("settings",x4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gl=He("shield",v4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],h2=He("smartphone",b4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Do=He("sparkles",w4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],N4=He("square-pen",S4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Td=He("star",k4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],hg=He("sun",j4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_s=He("target",_4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],A4=He("trash-2",C4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ph=He("trending-down",P4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fn=He("trending-up",L4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wa=He("triangle-alert",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],f2=He("type",T4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],E4=He("user",D4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],m2=He("volume-2",I4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ti=He("x",R4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Dd=He("zap",O4),fl=n=>typeof window<"u"?`/pain-tracker/${n}`.replace(/\/+/g,"/"):n.startsWith("/")?n:`/${n}`,tt={colors:{primary:{500:"#0ea5e9",600:"#0284c7",700:"#0369a1"},secondary:{500:"#22c55e",700:"#15803d"},accent:{400:"#c084fc",500:"#a855f7",700:"#7c3aed"},pain:{none:"#10b981",mild:"#84cc16",moderate:"#eab308",severe:"#f59e0b",extreme:"#ef4444"},status:{success:"#22c55e",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"},neutral:{0:"#ffffff",500:"#64748b",600:"#475569"}},typography:{fonts:{sans:["Inter","-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","sans-serif"],mono:["Fira Code","Monaco","Consolas","Liberation Mono","Courier New","monospace"],display:["Cal Sans","Inter","system-ui","sans-serif"]}},logos:{primary:fl("logos/pain-tracker-logo.svg"),wordmark:fl("logos/pain-tracker-wordmark.svg"),icon:fl("logos/pain-tracker-icon.svg"),iconWhite:fl("logos/pain-tracker-icon-white.svg"),appIcon:fl("icons/app-icon-512.png"),favicon:fl("icons/favicon.ico")},visual:{borderRadius:{md:"0.5rem"},shadows:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}},motion:{duration:{fast:"150ms",normal:"300ms",slow:"500ms"},easing:{ease:"cubic-bezier(0.4, 0, 0.2, 1)"}}},Va={":root":{"--color-primary":tt.colors.primary[500],"--color-primary-foreground":tt.colors.neutral[0],"--color-secondary":tt.colors.secondary[500],"--color-secondary-foreground":tt.colors.neutral[0],"--color-accent":tt.colors.accent[500],"--color-accent-foreground":tt.colors.neutral[0],"--color-pain-none":tt.colors.pain.none,"--color-pain-mild":tt.colors.pain.mild,"--color-pain-moderate":tt.colors.pain.moderate,"--color-pain-severe":tt.colors.pain.severe,"--color-pain-extreme":tt.colors.pain.extreme,"--font-sans":tt.typography.fonts.sans.join(", "),"--font-mono":tt.typography.fonts.mono.join(", "),"--font-display":tt.typography.fonts.display.join(", "),"--radius":tt.visual.borderRadius.md,"--shadow-sm":tt.visual.shadows.sm,"--shadow-md":tt.visual.shadows.md,"--shadow-lg":tt.visual.shadows.lg,"--duration-fast":tt.motion.duration.fast,"--duration-normal":tt.motion.duration.normal,"--duration-slow":tt.motion.duration.slow,"--easing":tt.motion.easing.ease}};function p2({size:n=24,className:e="",color:t=tt.colors.primary[500]}){return l.jsxs("svg",{width:n,height:n,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[l.jsx("circle",{cx:"24",cy:"24",r:"22",fill:t}),l.jsx("rect",{x:"19",y:"10",width:"10",height:"28",rx:"3",fill:"white"}),l.jsx("rect",{x:"10",y:"19",width:"28",height:"10",rx:"3",fill:"white"}),l.jsx("path",{d:"M8 32 Q12 26 16 32 T24 28 Q28 24 32 28 T40 30",stroke:tt.colors.secondary[500],strokeWidth:"4",fill:"none",strokeLinecap:"round"}),l.jsx("circle",{cx:"36",cy:"12",r:"3",fill:tt.colors.accent[500]})]})}function F4({entries:n}){return n.length===0?l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"History"}),l.jsx("p",{className:"text-gray-500",children:"No entries yet"})]}):l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"History"}),l.jsx("div",{className:"space-y-4",children:[...n].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).map(e=>l.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"font-semibold",children:["Pain Level: ",e.baselineData.pain]}),l.jsx("span",{className:"text-gray-500",children:s2(new Date(e.timestamp),"MMM d, yyyy HH:mm")})]}),(e.baselineData.locations?.length??0)>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Locations: "}),e.baselineData.locations?.join(", ")]}),(e.baselineData.symptoms?.length??0)>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms: "}),e.baselineData.symptoms?.join(", ")]}),e.notes&&l.jsxs("div",{className:"text-gray-700",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Notes: "}),e.notes]})]},e.id))})]})}const qe={primary:{400:"#60a5fa",600:"#2563eb"},accent:{400:"#e879f9",600:"#c026d3"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},success:{50:"#f0fdf4",500:"#22c55e",700:"#15803d"},warning:{50:"#fffbeb",500:"#f59e0b",700:"#b45309"},error:{500:"#ef4444",700:"#b91c1c"},info:{50:"#ecfeff",500:"#06b6d4",700:"#0e7490"}},ty=n=>n==="high-contrast"?{background:"#000000",foreground:"#ffffff",card:"#000000",cardForeground:"#ffffff",popover:"#000000",popoverForeground:"#ffffff",primary:"#ffff00",primaryForeground:"#000000",secondary:"#ffffff",secondaryForeground:"#000000",muted:"#333333",mutedForeground:"#ffffff",accent:"#00ffff",accentForeground:"#000000",destructive:"#ff0000",destructiveForeground:"#ffffff",success:qe.success[500],successForeground:qe.success[50],warning:qe.warning[500],warningForeground:qe.warning[50],info:qe.info[500],infoForeground:qe.info[50],border:"#ffffff",input:"#ffffff",ring:"#ffff00"}:n==="colorblind"?{background:qe.neutral[50],foreground:qe.neutral[900],card:qe.neutral[50],cardForeground:qe.neutral[900],popover:qe.neutral[50],popoverForeground:qe.neutral[900],primary:qe.neutral[800],primaryForeground:qe.neutral[50],secondary:qe.neutral[600],secondaryForeground:qe.neutral[50],muted:qe.neutral[100],mutedForeground:qe.neutral[700],accent:qe.neutral[500],accentForeground:qe.neutral[50],destructive:qe.neutral[900],destructiveForeground:qe.neutral[50],success:qe.success[500],successForeground:qe.success[50],warning:qe.warning[500],warningForeground:qe.warning[50],info:qe.info[500],infoForeground:qe.info[50],border:qe.neutral[300],input:qe.neutral[200],ring:qe.neutral[800]}:n==="dark"?{background:qe.neutral[900],foreground:qe.neutral[50],card:qe.neutral[800],cardForeground:qe.neutral[100],popover:qe.neutral[800],popoverForeground:qe.neutral[100],primary:qe.primary[400],primaryForeground:qe.neutral[900],secondary:qe.neutral[700],secondaryForeground:qe.neutral[100],muted:qe.neutral[700],mutedForeground:qe.neutral[400],accent:qe.accent[400],accentForeground:qe.neutral[900],destructive:qe.error[500],destructiveForeground:"#ffffff",success:qe.success[500],successForeground:qe.success[50],warning:qe.warning[500],warningForeground:qe.warning[50],info:qe.info[500],infoForeground:qe.info[50],border:qe.neutral[700],input:qe.neutral[700],ring:qe.primary[400]}:{background:qe.neutral[50],foreground:qe.neutral[900],card:qe.neutral[50],cardForeground:qe.neutral[900],popover:qe.neutral[50],popoverForeground:qe.neutral[900],primary:qe.primary[600],primaryForeground:qe.neutral[50],secondary:qe.neutral[100],secondaryForeground:qe.neutral[900],muted:qe.neutral[100],mutedForeground:qe.neutral[700],accent:qe.accent[600],accentForeground:qe.neutral[50],destructive:qe.error[700],destructiveForeground:"#ffffff",success:qe.success[700],successForeground:qe.success[50],warning:qe.warning[700],warningForeground:qe.warning[50],info:qe.info[700],infoForeground:qe.info[50],border:qe.neutral[200],input:qe.neutral[200],ring:qe.primary[600]},g2=W.createContext(void 0),z4=()=>{const n=W.useContext(g2);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},B4=({children:n,defaultMode:e="light"})=>{const[t,s]=W.useState(()=>{if(typeof window<"u")try{const h=kn.get("pain-tracker-theme");if(h==="light"||h==="dark"||h==="high-contrast")return h;if(window.matchMedia&&window.matchMedia("(prefers-contrast: high)").matches)return"high-contrast";if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch(h){console.warn("Failed to access localStorage for theme preference:",h)}return e}),[i,r]=W.useState(()=>typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1),a=ty(t),o=W.useCallback(h=>{const m=ty(h),f=document.documentElement;Object.entries(m).forEach(([x,v])=>{f.style.setProperty(`--color-${x}`,v)});const y=x=>{if(!x)return"0 0 0";const v=x.replace("#","").trim();if(v.length!==6)return"0 0 0";const w=parseInt(v.substring(0,2),16),j=parseInt(v.substring(2,4),16),C=parseInt(v.substring(4,6),16);return`${w} ${j} ${C}`};f.style.setProperty("--chart-series-1",y(m.primary??tt.colors.primary[500])),f.style.setProperty("--chart-series-2",y(m.secondary??tt.colors.secondary[500])),f.style.setProperty("--chart-series-3",y(m.accent??tt.colors.accent[500])),f.style.setProperty("--chart-series-4",y(m.warning??tt.colors.status.warning)),f.style.setProperty("--chart-series-5",y(m.info??tt.colors.status.info)),f.style.setProperty("--chart-series-6",y(m.destructive??tt.colors.status.error)),f.style.setProperty("--color-pain-none",y(m.success??tt.colors.pain.none)),f.style.setProperty("--color-pain-mild",y(m.success??tt.colors.pain.mild)),f.style.setProperty("--color-pain-moderate",y(m.warning??tt.colors.pain.moderate)),f.style.setProperty("--color-pain-severe",y(m.warning??tt.colors.pain.severe)),f.style.setProperty("--color-pain-extreme",y(m.destructive??tt.colors.pain.extreme)),f.setAttribute("data-theme",h)},[]),c=W.useCallback(h=>{s(h);try{kn.set("pain-tracker-theme",h)}catch(m){console.warn("Failed to save theme preference to localStorage:",m)}o(h)},[o]),d=W.useCallback(()=>{c(t==="light"?"dark":t==="dark"?"high-contrast":"light")},[t,c]);W.useEffect(()=>{const h=[{query:"(prefers-color-scheme: dark)",handler:f=>{try{!kn.get("pain-tracker-theme")&&t!=="high-contrast"&&c(f.matches?"dark":"light")}catch(y){console.warn("Failed to access localStorage for system theme detection:",y)}}},{query:"(prefers-contrast: high)",handler:f=>{try{!kn.get("pain-tracker-theme")&&f.matches&&c("high-contrast")}catch(y){console.warn("Failed to handle high contrast preference:",y)}}},{query:"(prefers-reduced-motion: reduce)",handler:f=>{r(f.matches)}}],m=[];return h.forEach(({query:f,handler:y})=>{const x=window.matchMedia(f);x.addEventListener?(x.addEventListener("change",y),m.push(()=>x.removeEventListener("change",y))):(x.addListener(y),m.push(()=>x.removeListener(y)))}),()=>{m.forEach(f=>f())}},[t,c]),W.useEffect(()=>{o(t)},[t,o]);const u={mode:t,toggleMode:d,colors:a,setMode:c,isHighContrast:t==="high-contrast",hasReducedMotion:i};return l.jsx(g2.Provider,{value:u,children:n})},ny=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,sy=n2,Zh=(n,e)=>t=>{var s;if(e?.variants==null)return sy(n,t?.class,t?.className);const{variants:i,defaultVariants:r}=e,a=Object.keys(i).map(d=>{const u=t?.[d],h=r?.[d];if(u===null)return null;const m=ny(u)||ny(h);return i[d][m]}),o=t&&Object.entries(t).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(y=>{let[x,v]=y;return Array.isArray(v)?v.includes({...r,...o}[x]):{...r,...o}[x]===v})?[...d,h,m]:d},[]);return sy(n,a,c,t?.class,t?.className)},fg="-",$4=n=>{const e=U4(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const o=a.split(fg);return o[0]===""&&o.length!==1&&o.shift(),y2(o,e)||W4(a)},getConflictingClassGroupIds:(a,o)=>{const c=t[a]||[];return o&&s[a]?[...c,...s[a]]:c}}},y2=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?y2(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const r=n.join(fg);return e.validators.find(({validator:a})=>a(r))?.classGroupId},iy=/^\[(.+)\]$/,W4=n=>{if(iy.test(n)){const e=iy.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},U4=n=>{const{theme:e,classGroups:t}=n,s={nextPart:new Map,validators:[]};for(const i in t)cp(t[i],s,i,e);return s},cp=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?e:ry(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(q4(i)){cp(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([r,a])=>{cp(a,ry(e,r),t,s)})})},ry=(n,e)=>{let t=n;return e.split(fg).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},q4=n=>n.isThemeGetter,V4=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(r,a)=>{t.set(r,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return i(r,a),a},set(r,a){t.has(r)?t.set(r,a):i(r,a)}}},dp="!",up=":",H4=up.length,G4=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=i=>{const r=[];let a=0,o=0,c=0,d;for(let y=0;y<i.length;y++){let x=i[y];if(a===0&&o===0){if(x===up){r.push(i.slice(c,y)),c=y+H4;continue}if(x==="/"){d=y;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const u=r.length===0?i:i.substring(c),h=Y4(u),m=h!==u,f=d&&d>c?d-c:void 0;return{modifiers:r,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const i=e+up,r=s;s=a=>a.startsWith(i)?r(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const i=s;s=r=>t({className:r,parseClassName:i})}return s},Y4=n=>n.endsWith(dp)?n.substring(0,n.length-1):n.startsWith(dp)?n.substring(1):n,Z4=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let r=[];return s.forEach(a=>{a[0]==="["||e[a]?(i.push(...r.sort(),a),r=[]):r.push(a)}),i.push(...r.sort()),i}},K4=n=>({cache:V4(n.cacheSize),parseClassName:G4(n),sortModifiers:Z4(n),...$4(n)}),X4=/\s+/,Q4=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:r}=e,a=[],o=n.trim().split(X4);let c="";for(let d=o.length-1;d>=0;d-=1){const u=o[d],{isExternal:h,modifiers:m,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:x}=t(u);if(h){c=u+(c.length>0?" "+c:c);continue}let v=!!x,w=s(v?y.substring(0,x):y);if(!w){if(!v){c=u+(c.length>0?" "+c:c);continue}if(w=s(y),!w){c=u+(c.length>0?" "+c:c);continue}v=!1}const j=r(m).join(":"),C=f?j+dp:j,N=C+w;if(a.includes(N))continue;a.push(N);const P=i(w,v);for(let L=0;L<P.length;++L){const M=P[L];a.push(C+M)}c=u+(c.length>0?" "+c:c)}return c};function J4(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=x2(e))&&(s&&(s+=" "),s+=t);return s}const x2=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=x2(n[s]))&&(t&&(t+=" "),t+=e);return t};function e_(n,...e){let t,s,i,r=a;function a(c){const d=e.reduce((u,h)=>h(u),n());return t=K4(d),s=t.cache.get,i=t.cache.set,r=o,o(c)}function o(c){const d=s(c);if(d)return d;const u=Q4(c,t);return i(c,u),u}return function(){return r(J4.apply(null,arguments))}}const ds=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},v2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,b2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,t_=/^\d+\/\d+$/,n_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,r_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,a_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ml=n=>t_.test(n),zt=n=>!!n&&!Number.isNaN(Number(n)),Ba=n=>!!n&&Number.isInteger(Number(n)),Jf=n=>n.endsWith("%")&&zt(n.slice(0,-1)),sa=n=>n_.test(n),o_=()=>!0,l_=n=>s_.test(n)&&!i_.test(n),w2=()=>!1,c_=n=>r_.test(n),d_=n=>a_.test(n),u_=n=>!st(n)&&!it(n),h_=n=>Ql(n,k2,w2),st=n=>v2.test(n),ko=n=>Ql(n,j2,l_),em=n=>Ql(n,y_,zt),ay=n=>Ql(n,S2,w2),f_=n=>Ql(n,N2,d_),ou=n=>Ql(n,_2,c_),it=n=>b2.test(n),Ac=n=>Jl(n,j2),m_=n=>Jl(n,x_),oy=n=>Jl(n,S2),p_=n=>Jl(n,k2),g_=n=>Jl(n,N2),lu=n=>Jl(n,_2,!0),Ql=(n,e,t)=>{const s=v2.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},Jl=(n,e,t=!1)=>{const s=b2.exec(n);return s?s[1]?e(s[1]):t:!1},S2=n=>n==="position"||n==="percentage",N2=n=>n==="image"||n==="url",k2=n=>n==="length"||n==="size"||n==="bg-size",j2=n=>n==="length",y_=n=>n==="number",x_=n=>n==="family-name",_2=n=>n==="shadow",v_=()=>{const n=ds("color"),e=ds("font"),t=ds("text"),s=ds("font-weight"),i=ds("tracking"),r=ds("leading"),a=ds("breakpoint"),o=ds("container"),c=ds("spacing"),d=ds("radius"),u=ds("shadow"),h=ds("inset-shadow"),m=ds("text-shadow"),f=ds("drop-shadow"),y=ds("blur"),x=ds("perspective"),v=ds("aspect"),w=ds("ease"),j=ds("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...N(),it,st],L=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],T=()=>[it,st,c],k=()=>[ml,"full","auto",...T()],z=()=>[Ba,"none","subgrid",it,st],_=()=>["auto",{span:["full",Ba,it,st]},Ba,it,st],E=()=>[Ba,"auto",it,st],$=()=>["auto","min","max","fr",it,st],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],se=()=>["auto",...T()],oe=()=>[ml,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],F=()=>[n,it,st],he=()=>[...N(),oy,ay,{position:[it,st]}],ke=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",p_,h_,{size:[it,st]}],D=()=>[Jf,Ac,ko],V=()=>["","none","full",d,it,st],Z=()=>["",zt,Ac,ko],ne=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[zt,Jf,oy,ay],xe=()=>["","none",y,it,st],me=()=>["none",zt,it,st],Ne=()=>["none",zt,it,st],Me=()=>[zt,it,st],Ie=()=>[ml,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[sa],breakpoint:[sa],color:[o_],container:[sa],"drop-shadow":[sa],ease:["in","out","in-out"],font:[u_],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[sa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[sa],shadow:[sa],spacing:["px",zt],text:[sa],"text-shadow":[sa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ml,st,it,v]}],container:["container"],columns:[{columns:[zt,st,it,o]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Ba,"auto",it,st]}],basis:[{basis:[ml,"full","auto",o,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[zt,ml,"auto","initial","none",st]}],grow:[{grow:["",zt,it,st]}],shrink:[{shrink:["",zt,it,st]}],order:[{order:[Ba,"first","last","none",it,st]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:_()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:_()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:se()}],mx:[{mx:se()}],my:[{my:se()}],ms:[{ms:se()}],me:[{me:se()}],mt:[{mt:se()}],mr:[{mr:se()}],mb:[{mb:se()}],ml:[{ml:se()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[o,"screen",...oe()]}],"min-w":[{"min-w":[o,"screen","none",...oe()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",t,Ac,ko]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,it,em]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jf,st]}],"font-family":[{font:[m_,st,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,it,st]}],"line-clamp":[{"line-clamp":[zt,"none",it,em]}],leading:[{leading:[r,...T()]}],"list-image":[{"list-image":["none",it,st]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",it,st]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[zt,"from-font","auto",it,ko]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[zt,"auto",it,st]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it,st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it,st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:he()}],"bg-repeat":[{bg:ke()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ba,it,st],radial:["",it,st],conic:[Ba,it,st]},g_,f_]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:D()}],"gradient-via-pos":[{via:D()}],"gradient-to-pos":[{to:D()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[zt,it,st]}],"outline-w":[{outline:["",zt,Ac,ko]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,lu,ou]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,lu,ou]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[zt,ko]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",m,lu,ou]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[zt,it,st]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[zt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[it,st]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[zt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:he()}],"mask-repeat":[{mask:ke()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",it,st]}],filter:[{filter:["","none",it,st]}],blur:[{blur:xe()}],brightness:[{brightness:[zt,it,st]}],contrast:[{contrast:[zt,it,st]}],"drop-shadow":[{"drop-shadow":["","none",f,lu,ou]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",zt,it,st]}],"hue-rotate":[{"hue-rotate":[zt,it,st]}],invert:[{invert:["",zt,it,st]}],saturate:[{saturate:[zt,it,st]}],sepia:[{sepia:["",zt,it,st]}],"backdrop-filter":[{"backdrop-filter":["","none",it,st]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[zt,it,st]}],"backdrop-contrast":[{"backdrop-contrast":[zt,it,st]}],"backdrop-grayscale":[{"backdrop-grayscale":["",zt,it,st]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[zt,it,st]}],"backdrop-invert":[{"backdrop-invert":["",zt,it,st]}],"backdrop-opacity":[{"backdrop-opacity":[zt,it,st]}],"backdrop-saturate":[{"backdrop-saturate":[zt,it,st]}],"backdrop-sepia":[{"backdrop-sepia":["",zt,it,st]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",it,st]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[zt,"initial",it,st]}],ease:[{ease:["linear","initial",w,it,st]}],delay:[{delay:[zt,it,st]}],animate:[{animate:["none",j,it,st]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,it,st]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:Me()}],"skew-x":[{"skew-x":Me()}],"skew-y":[{"skew-y":Me()}],transform:[{transform:[it,st,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it,st]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it,st]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[zt,Ac,ko,em]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},b_=e_(v_);function w_(){const[n,e]=Ge.useState(!1);return W.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)");e(t.matches);const s=i=>{e(i.matches)};return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[]),n}function Ye(...n){return b_(n2(n))}const S_=Zh("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background active:scale-[0.98] select-none touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md active:bg-primary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md active:bg-destructive/80",outline:"border border-input hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md active:bg-accent/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/50",link:"underline-offset-4 hover:underline text-primary shadow-none hover:shadow-none active:text-primary/80",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow-md active:bg-success/80",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow-md active:bg-warning/80",gradient:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl active:from-primary/80 active:to-accent/80"},size:{xs:"h-8 px-2 text-xs rounded-md min-h-[32px] min-w-[32px]",sm:"h-9 px-3 text-xs rounded-md min-h-[36px] min-w-[36px]",default:"h-12 py-2 px-4 min-h-[44px] min-w-[44px]",lg:"h-12 px-6 text-base rounded-lg min-h-[48px] min-w-[48px]",xl:"h-16 px-8 text-lg rounded-xl min-h-[56px] min-w-[56px]",icon:"h-12 w-12 min-h-[44px] min-w-[44px]","icon-sm":"h-9 w-9 min-h-[36px] min-w-[36px]","icon-lg":"h-14 w-14 min-h-[48px] min-w-[48px]"},shape:{default:"",square:"rounded-none",pill:"rounded-full",circle:"rounded-full"}},defaultVariants:{variant:"default",size:"default",shape:"default"}}),Je=Ge.forwardRef(({className:n,variant:e,size:t,shape:s,type:i="button",loading:r=!1,leftIcon:a,rightIcon:o,fullWidth:c=!1,hapticFeedback:d=!0,longPress:u=!1,onLongPress:h,longPressDelay:m=500,ripple:f=!0,disabled:y,onClick:x,onTouchStart:v,onTouchEnd:w,onMouseDown:j,onMouseUp:C,children:N,...P},L)=>{const M=y||r,T=Ge.useRef(),[k,z]=Ge.useState(!1),[_,E]=Ge.useState(!1),[$,I]=Ge.useState([]),J=Ge.useCallback(()=>{d&&"vibrate"in navigator&&navigator.vibrate(50)},[d]),se=Ge.useCallback(ue=>{M||(z(!0),v?.(ue),u&&h&&(T.current=setTimeout(()=>{E(!0),J(),h()},m)))},[M,u,h,m,v,J]),oe=Ge.useCallback(ue=>{z(!1),E(!1),w?.(ue),T.current&&clearTimeout(T.current)},[w]),F=Ge.useCallback(ue=>{M||(z(!0),j?.(ue),u&&h&&(T.current=setTimeout(()=>{E(!0),h()},m)))},[M,u,h,m,j]),he=Ge.useCallback(ue=>{z(!1),E(!1),C?.(ue),T.current&&clearTimeout(T.current)},[C]),ke=Ge.useCallback(ue=>{if(!(M||_)){if(f){const D=ue.currentTarget.getBoundingClientRect(),V=ue.clientX-D.left,Z=ue.clientY-D.top,ne=Date.now();I(ae=>[...ae,{x:V,y:Z,id:ne}]),setTimeout(()=>{I(ae=>ae.filter(ce=>ce.id!==ne))},600)}J(),x?.(ue)}},[M,_,f,J,x]);return Ge.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),l.jsxs("button",{className:Ye(S_({variant:e,size:t,shape:s,className:n}),c&&"w-full",r&&"cursor-wait",k&&"scale-95",_&&"ring-2 ring-primary ring-opacity-50",f&&"relative overflow-hidden","touch-manipulation select-none"),ref:L,type:i,disabled:M,"aria-disabled":M,"aria-pressed":k,onClick:ke,onTouchStart:se,onTouchEnd:oe,onMouseDown:F,onMouseUp:he,...P,children:[f&&$.map(ue=>l.jsx("span",{className:"absolute bg-white/30 rounded-full pointer-events-none animate-ripple",style:{left:ue.x,top:ue.y,width:"20px",height:"20px",transform:"translate(-50%, -50%)"}},ue.id)),r&&l.jsx(Yh,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),!r&&a&&l.jsx("span",{className:"mr-2 flex-shrink-0","aria-hidden":"true",children:a}),l.jsx("span",{className:Ye("flex items-center justify-center",r&&"opacity-70"),children:N}),!r&&o&&l.jsx("span",{className:"ml-2 flex-shrink-0","aria-hidden":"true",children:o})]})});Je.displayName="Button";const N_=Zh("rounded-lg border bg-card text-card-foreground shadow-md transition-all duration-200",{variants:{variant:{default:"border-border",elevated:"shadow-2xl hover:shadow-2xl/80",outlined:"border-2 shadow-none",filled:"bg-muted/50 border-muted",ghost:"border-transparent shadow-none bg-transparent",gradient:"bg-gradient-to-br from-card to-muted/50 border-muted/50",accented:"border-2 border-primary/40 shadow-2xl hover:shadow-2xl/80"},padding:{none:"p-0",sm:"p-3",default:"p-6",lg:"p-8",xl:"p-10"},hover:{none:"",lift:"hover:-translate-y-1.5 hover:shadow-2xl/70",glow:"hover:shadow-2xl hover:shadow-primary/15",scale:"hover:scale-[1.02] hover:shadow-lg"}},defaultVariants:{variant:"default",padding:"default",hover:"none"}}),We=Ge.forwardRef(({className:n,variant:e,padding:t,hover:s,...i},r)=>l.jsxs("div",{ref:r,className:Ye(N_({variant:e,padding:t,hover:s,className:n})),...i,children:["severity"in i&&i.severity?l.jsx("div",{"aria-hidden":!0,className:Ye("absolute -top-2 -left-2 h-2 w-12 rounded-b-md"),style:{backgroundColor:i.severity==="low"?"rgb(var(--color-pain-none))":i.severity==="medium"?"rgb(var(--color-pain-mild))":i.severity==="high"?"rgb(var(--color-pain-severe))":"rgb(var(--color-pain-extreme))"}}):null,i.children]}));We.displayName="Card";const bt=Ge.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Ye("flex items-center justify-between space-x-3 pb-4",n),...e}));bt.displayName="CardHeader";const wt=Ge.forwardRef(({className:n,...e},t)=>l.jsx("h2",{ref:t,className:Ye("text-2xl font-semibold leading-none tracking-tight",n),...e}));wt.displayName="CardTitle";const ur=Ge.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:Ye("text-sm text-muted-foreground",n),...e}));ur.displayName="CardDescription";const Ve=Ge.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Ye("pt-0",n),...e}));Ve.displayName="CardContent";const k_=Ge.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Ye("flex items-center pt-4",n),...e}));k_.displayName="CardFooter";const j_=Ge.forwardRef(({className:n,...e},t)=>l.jsx(We,{ref:t,className:Ye("cursor-pointer hover:shadow-md transition-shadow",n),...e}));j_.displayName="CardAction";const __=Ge.forwardRef(({className:n,children:e,...t},s)=>l.jsx(We,{ref:s,variant:"elevated",className:Ye("text-center",n),...t,children:e}));__.displayName="CardStats";function Al({children:n,className:e,variant:t="default",hoverable:s=!1,animated:i=!1,glowColor:r,...a}){const o={default:"bg-card border border-border shadow-md",glass:"backdrop-blur-xl bg-card/50 border border-white/20 dark:border-gray-800/50 shadow-xl",gradient:"bg-gradient-to-br from-card via-card/95 to-primary/5 border border-border/50 shadow-lg",elevated:"bg-card border border-border shadow-2xl shadow-black/10",glow:Ye("bg-card border border-border shadow-xl",r==="primary"&&"shadow-blue-500/20 border-blue-500/30",r==="success"&&"shadow-emerald-500/20 border-emerald-500/30",r==="warning"&&"shadow-amber-500/20 border-amber-500/30",r==="danger"&&"shadow-red-500/20 border-red-500/30")},c=s?"transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02] cursor-pointer":"",d=i?"animate-[fadeInUp_0.5s_ease-out]":"";return l.jsx("div",{className:Ye("rounded-lg p-6",o[t],c,d,e),...a,children:n})}function Uc({children:n,className:e,icon:t,badge:s,...i}){return l.jsxs("div",{className:Ye("flex items-center justify-between mb-4",e),...i,children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[t&&l.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg bg-primary/10 text-primary",children:t}),l.jsx("div",{className:"flex-1",children:n})]}),s&&l.jsx("div",{children:s})]})}function qc({children:n,className:e,gradient:t=!1,...s}){return l.jsx("h3",{className:Ye("text-lg font-semibold tracking-tight",t&&"bg-gradient-to-r from-foreground to-primary/90 bg-clip-text text-transparent",!t&&"text-foreground",e),...s,children:n})}function Vc({children:n,className:e,...t}){return l.jsx("div",{className:Ye("space-y-4",e),...t,children:n})}function C_({title:n,value:e,change:t,icon:s,trend:i="neutral",variant:r="default"}){const a={default:"bg-primary/10 text-primary",success:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",warning:"bg-amber-500/10 text-amber-600 dark:text-amber-400",danger:"bg-red-500/10 text-red-600 dark:text-red-400"},o={up:"text-emerald-600 dark:text-emerald-400",down:"text-red-600 dark:text-red-400",neutral:"text-muted-foreground"};return l.jsx(Al,{variant:"glass",hoverable:!0,animated:!0,className:"group",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:n}),l.jsx("p",{className:"text-3xl font-bold text-foreground transition-transform group-hover:scale-110",children:e}),t&&l.jsxs("p",{className:Ye("text-xs font-medium",o[i]),children:[t.value>0?"+":"",t.value,"% ",t.label]})]}),s&&l.jsx("div",{className:Ye("flex items-center justify-center w-16 h-16 rounded-full transition-transform group-hover:scale-110 group-hover:rotate-6",a[r]),children:s})]})})}const Hi=Ge.forwardRef(({className:n,type:e,label:t,error:s,helperText:i,startIcon:r,endIcon:a,fullWidth:o=!1,variant:c="default",mobileOptimized:d=!0,inputMode:u,autoComplete:h,autoCapitalize:m,autoCorrect:f,spellCheck:y,id:x,required:v,disabled:w,...j},C)=>{const[N,P]=Ge.useState(!1),[L]=Ge.useState(x||`input-${Math.random().toString(36).substr(2,9)}`),[M,T]=Ge.useState(e);Ge.useEffect(()=>{T(e==="password"&&N?"text":e)},[e,N]);const k=()=>{P(!N)},_=(()=>{if(!d)return{};const $={style:{fontSize:"16px"},"data-mobile-optimized":"true"};return u?$.inputMode=u:e==="number"?$.inputMode="decimal":e==="email"?$.inputMode="email":e==="tel"?$.inputMode="tel":e==="url"&&($.inputMode="url"),h&&($.autoComplete=h),m&&($.autoCapitalize=m),f!==void 0&&($.autoCorrect=f),y!==void 0&&($.spellCheck=y),$})(),E=Ye("flex h-12 w-full rounded-md border border-gray-300 bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-offset-1 focus-visible:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",c==="filled"&&"bg-muted/50 border-muted",c==="outlined"&&"border-2",s&&"border-red-500 focus:ring-red-500 focus-visible:ring-red-500",r&&"pl-12",(a||e==="password")&&"pr-12",o&&"w-full",d&&"mobile-keyboard-optimized touch-manipulation");return l.jsxs("div",{className:Ye("space-y-2",o&&"w-full",d&&"mobile-form-spacing"),children:[t&&l.jsxs("label",{htmlFor:L,className:Ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s&&"text-destructive"),children:[t,v&&l.jsx("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),l.jsxs("div",{className:"relative",children:[r&&l.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground z-10",children:r}),l.jsx("input",{id:L,type:M,className:Ye(E,n),ref:C,disabled:w,"aria-invalid":s?"true":"false","aria-describedby":s?`${L}-error`:i?`${L}-helper`:void 0,..._,...j}),e==="password"&&l.jsx("button",{type:"button",onClick:k,className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors z-10 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":N?"Hide password":"Show password",tabIndex:-1,children:N?l.jsx(dg,{className:"h-5 w-5"}):l.jsx(Hh,{className:"h-5 w-5"})}),a&&e!=="password"&&l.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground z-10",children:a})]}),s&&l.jsx("p",{id:`${L}-error`,className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:s}),i&&!s&&l.jsx("p",{id:`${L}-helper`,className:"text-sm text-muted-foreground",children:i})]})});Hi.displayName="Input";const A_=({className:n})=>{const{mode:e,toggleMode:t}=z4();return l.jsx(Je,{variant:"ghost",size:"icon",onClick:t,className:n,"aria-label":`Switch to ${e==="light"?"dark":"light"} mode`,title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?l.jsx(o4,{className:"h-5 w-5"}):l.jsx(hg,{className:"h-5 w-5"})})},P_={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};function Kh({isOpen:n,onClose:e,title:t,children:s,size:i="md",className:r,showCloseButton:a=!0,closeOnBackdropClick:o=!0,closeOnEscape:c=!0,footer:d,headerClassName:u,contentClassName:h,footerClassName:m}){const f=W.useRef(null);if(W.useEffect(()=>{const x=v=>{v.key==="Escape"&&c&&e()};return n&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[n,e,c]),W.useEffect(()=>{n&&f.current&&f.current.focus()},[n]),!n)return null;const y=x=>{x.target===x.currentTarget&&o&&e()};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":t?"modal-title":void 0,"aria-describedby":s?"modal-description":void 0,children:l.jsx("div",{ref:f,className:Ye("w-full bg-background rounded-lg shadow-xl animate-in zoom-in-95 duration-200",P_[i],r),tabIndex:-1,role:"document",children:l.jsxs(We,{className:"border-0 shadow-none",children:[(t||a)&&l.jsxs(bt,{className:Ye("flex flex-row items-center justify-between space-y-0 pb-4",u),children:[t&&l.jsx(wt,{id:"modal-title",className:"text-lg font-semibold",children:t}),a&&l.jsx(Je,{variant:"ghost",size:"sm",onClick:e,className:"h-8 w-8 p-0 hover:bg-muted","aria-label":"Close modal",children:l.jsx(ti,{className:"h-4 w-4"})})]}),l.jsx(Ve,{className:Ye("pt-0",h),id:"modal-description",children:s}),d&&l.jsx("div",{className:Ye("flex justify-end space-x-2 pt-4 border-t px-6 pb-6",m),children:d})]})})})}function L_({children:n,type:e="fade",duration:t=300,className:s,onTransitionEnd:i}){const[r,a]=W.useState(!1),[o,c]=W.useState(!1);W.useEffect(()=>{const m=setTimeout(()=>{a(!0)},10);return()=>clearTimeout(m)},[]),W.useEffect(()=>{if(r&&i){const m=setTimeout(i,t);return()=>clearTimeout(m)}},[r,t,i]);const u={fade:{enter:"opacity-0",enterActive:"opacity-100",exit:"opacity-100",exitActive:"opacity-0"},slide:{enter:"opacity-0 translate-x-8",enterActive:"opacity-100 translate-x-0",exit:"opacity-100 translate-x-0",exitActive:"opacity-0 -translate-x-8"},scale:{enter:"opacity-0 scale-95",enterActive:"opacity-100 scale-100",exit:"opacity-100 scale-100",exitActive:"opacity-0 scale-95"},slideUp:{enter:"opacity-0 translate-y-8",enterActive:"opacity-100 translate-y-0",exit:"opacity-100 translate-y-0",exitActive:"opacity-0 -translate-y-8"},slideDown:{enter:"opacity-0 -translate-y-8",enterActive:"opacity-100 translate-y-0",exit:"opacity-100 translate-y-0",exitActive:"opacity-0 translate-y-8"},none:{enter:"",enterActive:"",exit:"",exitActive:""}}[e],h=o?u.exitActive:r?u.enterActive:u.enter;return l.jsx("div",{className:Ye("transition-all",h,s),style:{transitionDuration:`${t}ms`},children:n})}function Ku({children:n,delay:e=50,className:t}){return l.jsx("div",{className:Ye("stagger-children",t),style:{"--stagger-delay":`${e}ms`},children:n})}const M_=Zh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",info:"border-transparent bg-info text-info-foreground hover:bg-info/80"},size:{sm:"px-2 py-0.5 text-xs",default:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"default"}}),ts=Ge.forwardRef(({className:n,variant:e,size:t,removable:s=!1,onRemove:i,children:r,...a},o)=>l.jsx("div",{ref:o,className:Ye(M_({variant:e,size:t}),n),...a,children:l.jsxs("span",{className:"flex items-center",children:[r,s&&i&&l.jsx("button",{onClick:i,className:"ml-1 rounded-full hover:bg-black/10 p-0.5 -mr-1","aria-label":"Remove",children:l.jsx(ti,{className:"h-3 w-3"})})]})}));ts.displayName="Badge";const T_=Zh("animate-spin",{variants:{size:{xs:"h-3 w-3",sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},variant:{default:"text-muted-foreground",primary:"text-primary",secondary:"text-secondary",destructive:"text-destructive",success:"text-success",warning:"text-warning"}},defaultVariants:{size:"default",variant:"default"}}),mg=Ge.forwardRef(({className:n,size:e,variant:t,text:s,fullScreen:i=!1,overlay:r=!1,...a},o)=>{const c=l.jsxs("div",{ref:o,className:Ye("flex flex-col items-center justify-center gap-2",i&&"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r&&"absolute inset-0 z-10 bg-background/50 backdrop-blur-sm rounded-lg",n),...a,children:[l.jsx(Yh,{className:Ye(T_({size:e,variant:t}))}),s&&l.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:s})]});return i||r?c:l.jsx("div",{className:"flex items-center justify-center p-4",children:c})});mg.displayName="Loading";const D_=Ge.forwardRef(({className:n,...e},t)=>l.jsxs("div",{ref:t,className:Ye("flex space-x-1",n),...e,children:[l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.3s]"}),l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.15s]"}),l.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"})]}));D_.displayName="LoadingDots";const E_=Ge.forwardRef(({className:n,lines:e=1,height:t="h-4",...s},i)=>l.jsx("div",{ref:i,className:Ye("space-y-2",n),...s,children:Array.from({length:e}).map((r,a)=>l.jsx("div",{className:Ye("bg-muted animate-pulse rounded",t,a===e-1&&e>1?"w-3/4":"w-full")},a))}));E_.displayName="LoadingSkeleton";W.createContext(void 0);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ed(n){return n+.5|0}const Ha=(n,e,t)=>Math.max(Math.min(n,t),e);function Hc(n){return Ha(Ed(n*2.55),0,255)}function Ja(n){return Ha(Ed(n*255),0,255)}function fa(n){return Ha(Ed(n/2.55)/100,0,1)}function ly(n){return Ha(Ed(n*100),0,100)}const qi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hp=[..."0123456789ABCDEF"],I_=n=>hp[n&15],R_=n=>hp[(n&240)>>4]+hp[n&15],cu=n=>(n&240)>>4===(n&15),O_=n=>cu(n.r)&&cu(n.g)&&cu(n.b)&&cu(n.a);function F_(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&qi[n[1]]*17,g:255&qi[n[2]]*17,b:255&qi[n[3]]*17,a:e===5?qi[n[4]]*17:255}:(e===7||e===9)&&(t={r:qi[n[1]]<<4|qi[n[2]],g:qi[n[3]]<<4|qi[n[4]],b:qi[n[5]]<<4|qi[n[6]],a:e===9?qi[n[7]]<<4|qi[n[8]]:255})),t}const z_=(n,e)=>n<255?e(n):"";function B_(n){var e=O_(n)?I_:R_;return n?"#"+e(n.r)+e(n.g)+e(n.b)+z_(n.a,e):void 0}const $_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function C2(n,e,t){const s=e*Math.min(t,1-t),i=(r,a=(r+n/30)%12)=>t-s*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function W_(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function U_(n,e,t){const s=C2(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function q_(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function pg(n){const t=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(t,s,i),a=Math.min(t,s,i),o=(r+a)/2;let c,d,u;return r!==a&&(u=r-a,d=o>.5?u/(2-r-a):u/(r+a),c=q_(t,s,i,u,r),c=c*60+.5),[c|0,d||0,o]}function gg(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(Ja)}function yg(n,e,t){return gg(C2,n,e,t)}function V_(n,e,t){return gg(U_,n,e,t)}function H_(n,e,t){return gg(W_,n,e,t)}function A2(n){return(n%360+360)%360}function G_(n){const e=$_.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Hc(+e[5]):Ja(+e[5]));const i=A2(+e[2]),r=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?s=V_(i,r,a):e[1]==="hsv"?s=H_(i,r,a):s=yg(i,r,a),{r:s[0],g:s[1],b:s[2],a:t}}function Y_(n,e){var t=pg(n);t[0]=A2(t[0]+e),t=yg(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Z_(n){if(!n)return;const e=pg(n),t=e[0],s=ly(e[1]),i=ly(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${fa(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const cy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function K_(){const n={},e=Object.keys(dy),t=Object.keys(cy);let s,i,r,a,o;for(s=0;s<e.length;s++){for(a=o=e[s],i=0;i<t.length;i++)r=t[i],o=o.replace(r,cy[r]);r=parseInt(dy[a],16),n[o]=[r>>16&255,r>>8&255,r&255]}return n}let du;function X_(n){du||(du=K_(),du.transparent=[0,0,0,0]);const e=du[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Q_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function J_(n){const e=Q_.exec(n);let t=255,s,i,r;if(e){if(e[7]!==s){const a=+e[7];t=e[8]?Hc(a):Ha(a*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Hc(s):Ha(s,0,255)),i=255&(e[4]?Hc(i):Ha(i,0,255)),r=255&(e[6]?Hc(r):Ha(r,0,255)),{r:s,g:i,b:r,a:t}}}function e3(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${fa(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const tm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,pl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function t3(n,e,t){const s=pl(fa(n.r)),i=pl(fa(n.g)),r=pl(fa(n.b));return{r:Ja(tm(s+t*(pl(fa(e.r))-s))),g:Ja(tm(i+t*(pl(fa(e.g))-i))),b:Ja(tm(r+t*(pl(fa(e.b))-r))),a:n.a+t*(e.a-n.a)}}function uu(n,e,t){if(n){let s=pg(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=yg(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function P2(n,e){return n&&Object.assign(e||{},n)}function uy(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ja(n[3]))):(e=P2(n,{r:0,g:0,b:0,a:1}),e.a=Ja(e.a)),e}function n3(n){return n.charAt(0)==="r"?J_(n):G_(n)}class gd{constructor(e){if(e instanceof gd)return e;const t=typeof e;let s;t==="object"?s=uy(e):t==="string"&&(s=F_(e)||X_(e)||n3(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=P2(this._rgb);return e&&(e.a=fa(e.a)),e}set rgb(e){this._rgb=uy(e)}rgbString(){return this._valid?e3(this._rgb):void 0}hexString(){return this._valid?B_(this._rgb):void 0}hslString(){return this._valid?Z_(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let r;const a=t===r?.5:t,o=2*a-1,c=s.a-i.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;r=1-d,s.r=255&d*s.r+r*i.r+.5,s.g=255&d*s.g+r*i.g+.5,s.b=255&d*s.b+r*i.b+.5,s.a=a*s.a+(1-a)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=t3(this._rgb,e._rgb,t)),this}clone(){return new gd(this.rgb)}alpha(e){return this._rgb.a=Ja(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Ed(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uu(this._rgb,2,e),this}darken(e){return uu(this._rgb,2,-e),this}saturate(e){return uu(this._rgb,1,e),this}desaturate(e){return uu(this._rgb,1,-e),this}rotate(e){return Y_(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ia(){}const s3=(()=>{let n=0;return()=>n++})();function Wt(n){return n==null}function jn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ut(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ei(n,e){return zn(n)?n:e}function jt(n,e){return typeof n>"u"?e:n}const i3=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,L2=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function kt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function $t(n,e,t,s){let i,r,a;if(jn(n))for(r=n.length,i=0;i<r;i++)e.call(t,n[i],i);else if(Ut(n))for(a=Object.keys(n),r=a.length,i=0;i<r;i++)e.call(t,n[a[i]],a[i])}function gh(n,e){let t,s,i,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function yh(n){if(jn(n))return n.map(yh);if(Ut(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=yh(n[t[i]]);return e}return n}function M2(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function r3(n,e,t,s){if(!M2(n))return;const i=e[n],r=t[n];Ut(i)&&Ut(r)?yd(i,r,s):e[n]=yh(r)}function yd(n,e,t){const s=jn(e)?e:[e],i=s.length;if(!Ut(n))return n;t=t||{};const r=t.merger||r3;let a;for(let o=0;o<i;++o){if(a=s[o],!Ut(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)r(c[d],n,a,t)}return n}function Xc(n,e){return yd(n,e,{merger:a3})}function a3(n,e,t){if(!M2(n))return;const s=e[n],i=t[n];Ut(s)&&Ut(i)?Xc(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=yh(i))}const hy={"":n=>n,x:n=>n.x,y:n=>n.y};function o3(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function l3(n){const e=o3(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function eo(n,e){return(hy[e]||(hy[e]=l3(e)))(n)}function xg(n){return n.charAt(0).toUpperCase()+n.slice(1)}const xd=n=>typeof n<"u",to=n=>typeof n=="function",fy=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function c3(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Qt=Math.PI,bn=2*Qt,d3=bn+Qt,xh=Number.POSITIVE_INFINITY,u3=Qt/180,Zn=Qt/2,jo=Qt/4,my=Qt*2/3,Ga=Math.log10,Zi=Math.sign;function Eo(n,e,t){return Math.abs(n-e)<t}function py(n){const e=Math.round(n);n=Eo(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Ga(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function h3(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function f3(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Yl(n){return!f3(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function m3(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function T2(n,e,t){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function mr(n){return n*(Qt/180)}function vg(n){return n*(180/Qt)}function gy(n){if(!zn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function D2(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let r=Math.atan2(s,t);return r<-.5*Qt&&(r+=bn),{angle:r,distance:i}}function fp(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function p3(n,e){return(n-e+d3)%bn-Qt}function zs(n){return(n%bn+bn)%bn}function vd(n,e,t,s){const i=zs(n),r=zs(e),a=zs(t),o=zs(r-i),c=zs(a-i),d=zs(i-r),u=zs(i-a);return i===r||i===a||s&&r===a||o>c&&d<u}function vs(n,e,t){return Math.max(e,Math.min(t,n))}function g3(n){return vs(n,-32768,32767)}function ga(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function bg(n,e,t){t=t||(a=>n[a]<e);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,t(r)?i=r:s=r;return{lo:i,hi:s}}const ya=(n,e,t,s)=>bg(n,t,s?i=>{const r=n[i][e];return r<t||r===t&&n[i+1][e]===t}:i=>n[i][e]<t),y3=(n,e,t)=>bg(n,t,s=>n[s][e]>=t);function x3(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const E2=["push","pop","shift","splice","unshift"];function v3(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),E2.forEach(t=>{const s="_onData"+xg(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const a=i.apply(this,r);return n._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...r)}),a}})})}function yy(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(E2.forEach(r=>{delete n[r]}),delete n._chartjs)}function I2(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const R2=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function O2(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,R2.call(window,()=>{s=!1,n.apply(e,t)}))}}function b3(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const wg=n=>n==="start"?"left":n==="end"?"right":"center",Os=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,w3=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function F2(n,e,t){const s=e.length;let i=0,r=s;if(n._sorted){const{iScale:a,vScale:o,_parsed:c}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=a.axis,{min:h,max:m,minDefined:f,maxDefined:y}=a.getUserBounds();if(f){if(i=Math.min(ya(c,u,h).lo,t?s:ya(e,u,a.getPixelForValue(h)).lo),d){const x=c.slice(0,i+1).reverse().findIndex(v=>!Wt(v[o.axis]));i-=Math.max(0,x)}i=vs(i,0,s-1)}if(y){let x=Math.max(ya(c,a.axis,m,!0).hi+1,t?0:ya(e,u,a.getPixelForValue(m),!0).hi+1);if(d){const v=c.slice(x-1).findIndex(w=>!Wt(w[o.axis]));x+=Math.max(0,v)}r=vs(x,i,s)-i}else r=s-i}return{start:i,count:r}}function z2(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),r}const hu=n=>n===0||n===1,xy=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*bn/t)),vy=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*bn/t)+1,Qc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Zn)+1,easeOutSine:n=>Math.sin(n*Zn),easeInOutSine:n=>-.5*(Math.cos(Qt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>hu(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>hu(n)?n:xy(n,.075,.3),easeOutElastic:n=>hu(n)?n:vy(n,.075,.3),easeInOutElastic(n){return hu(n)?n:n<.5?.5*xy(n*2,.1125,.45):.5+.5*vy(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Qc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Qc.easeInBounce(n*2)*.5:Qc.easeOutBounce(n*2-1)*.5+.5};function Sg(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function by(n){return Sg(n)?n:new gd(n)}function nm(n){return Sg(n)?n:new gd(n).saturate(.5).darken(.1).hexString()}const S3=["x","y","borderWidth","radius","tension"],N3=["color","borderColor","backgroundColor"];function k3(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:N3},numbers:{type:"number",properties:S3}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function j3(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wy=new Map;function _3(n,e){e=e||{};const t=n+JSON.stringify(e);let s=wy.get(t);return s||(s=new Intl.NumberFormat(n,e),wy.set(t,s)),s}function Id(n,e,t){return _3(e,t).format(n)}const B2={values(n){return jn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),r=C3(n,t)}const a=Ga(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),Id(n,s,c)},logarithmic(n,e,t){if(n===0)return"0";const s=t[e].significand||n/Math.pow(10,Math.floor(Ga(n)));return[1,2,3,5,10,15].includes(s)||e>.8*t.length?B2.numeric.call(this,n,e,t):""}};function C3(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Xh={formatters:B2};function A3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Bo=Object.create(null),mp=Object.create(null);function Jc(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const r=t[s];n=n[r]||(n[r]=Object.create(null))}return n}function sm(n,e,t){return typeof e=="string"?yd(Jc(n,e),t):yd(Jc(n,""),e)}class P3{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>nm(i.backgroundColor),this.hoverBorderColor=(s,i)=>nm(i.borderColor),this.hoverColor=(s,i)=>nm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return sm(this,e,t)}get(e){return Jc(this,e)}describe(e,t){return sm(mp,e,t)}override(e,t){return sm(Bo,e,t)}route(e,t,s,i){const r=Jc(this,e),a=Jc(this,s),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[o],d=a[i];return Ut(c)?Object.assign({},d,c):jt(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(t=>t(this))}}var _n=new P3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k3,j3,A3]);function L3(n){return!n||Wt(n.size)||Wt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function vh(n,e,t,s,i){let r=e[i];return r||(r=e[i]=n.measureText(i).width,t.push(i)),r>s&&(s=r),s}function M3(n,e,t,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},r=s.garbageCollect=[],s.font=e),n.save(),n.font=e;let a=0;const o=t.length;let c,d,u,h,m;for(c=0;c<o;c++)if(h=t[c],h!=null&&!jn(h))a=vh(n,i,r,a,h);else if(jn(h))for(d=0,u=h.length;d<u;d++)m=h[d],m!=null&&!jn(m)&&(a=vh(n,i,r,a,m));n.restore();const f=r.length/2;if(f>t.length){for(c=0;c<f;c++)delete i[r[c]];r.splice(0,f)}return a}function _o(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function Sy(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function pp(n,e,t,s){$2(n,e,t,s,null)}function $2(n,e,t,s,i){let r,a,o,c,d,u,h,m;const f=e.pointStyle,y=e.rotation,x=e.radius;let v=(y||0)*u3;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(v),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),f){default:i?n.ellipse(t,s,i/2,x,0,0,bn):n.arc(t,s,x,0,bn),n.closePath();break;case"triangle":u=i?i/2:x,n.moveTo(t+Math.sin(v)*u,s-Math.cos(v)*x),v+=my,n.lineTo(t+Math.sin(v)*u,s-Math.cos(v)*x),v+=my,n.lineTo(t+Math.sin(v)*u,s-Math.cos(v)*x),n.closePath();break;case"rectRounded":d=x*.516,c=x-d,a=Math.cos(v+jo)*c,h=Math.cos(v+jo)*(i?i/2-d:c),o=Math.sin(v+jo)*c,m=Math.sin(v+jo)*(i?i/2-d:c),n.arc(t-h,s-o,d,v-Qt,v-Zn),n.arc(t+m,s-a,d,v-Zn,v),n.arc(t+h,s+o,d,v,v+Zn),n.arc(t-m,s+a,d,v+Zn,v+Qt),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*x,u=i?i/2:c,n.rect(t-u,s-c,2*u,2*c);break}v+=jo;case"rectRot":h=Math.cos(v)*(i?i/2:x),a=Math.cos(v)*x,o=Math.sin(v)*x,m=Math.sin(v)*(i?i/2:x),n.moveTo(t-h,s-o),n.lineTo(t+m,s-a),n.lineTo(t+h,s+o),n.lineTo(t-m,s+a),n.closePath();break;case"crossRot":v+=jo;case"cross":h=Math.cos(v)*(i?i/2:x),a=Math.cos(v)*x,o=Math.sin(v)*x,m=Math.sin(v)*(i?i/2:x),n.moveTo(t-h,s-o),n.lineTo(t+h,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a);break;case"star":h=Math.cos(v)*(i?i/2:x),a=Math.cos(v)*x,o=Math.sin(v)*x,m=Math.sin(v)*(i?i/2:x),n.moveTo(t-h,s-o),n.lineTo(t+h,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a),v+=jo,h=Math.cos(v)*(i?i/2:x),a=Math.cos(v)*x,o=Math.sin(v)*x,m=Math.sin(v)*(i?i/2:x),n.moveTo(t-h,s-o),n.lineTo(t+h,s+o),n.moveTo(t+m,s-a),n.lineTo(t-m,s+a);break;case"line":a=i?i/2:Math.cos(v)*x,o=Math.sin(v)*x,n.moveTo(t-a,s-o),n.lineTo(t+a,s+o);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(v)*(i?i/2:x),s+Math.sin(v)*x);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function zr(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Qh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Jh(n){n.restore()}function T3(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function D3(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function E3(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Wt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function I3(n,e,t,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),a=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,c=t-r.actualBoundingBoxAscent,d=t+r.actualBoundingBoxDescent,u=i.strikethrough?(c+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,u),n.lineTo(o,u),n.stroke()}}function R3(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function $o(n,e,t,s,i,r={}){const a=jn(e)?e:[e],o=r.strokeWidth>0&&r.strokeColor!=="";let c,d;for(n.save(),n.font=i.string,E3(n,r),c=0;c<a.length;++c)d=a[c],r.backdrop&&R3(n,r.backdrop),o&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Wt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,t,s,r.maxWidth)),n.fillText(d,t,s,r.maxWidth),I3(n,t,s,d,r),s+=Number(i.lineHeight);n.restore()}function bd(n,e){const{x:t,y:s,w:i,h:r,radius:a}=e;n.arc(t+a.topLeft,s+a.topLeft,a.topLeft,1.5*Qt,Qt,!0),n.lineTo(t,s+r-a.bottomLeft),n.arc(t+a.bottomLeft,s+r-a.bottomLeft,a.bottomLeft,Qt,Zn,!0),n.lineTo(t+i-a.bottomRight,s+r),n.arc(t+i-a.bottomRight,s+r-a.bottomRight,a.bottomRight,Zn,0,!0),n.lineTo(t+i,s+a.topRight),n.arc(t+i-a.topRight,s+a.topRight,a.topRight,0,-Zn,!0),n.lineTo(t+a.topLeft,s)}const O3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,F3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function z3(n,e){const t=(""+n).match(O3);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const B3=n=>+n||0;function Ng(n,e){const t={},s=Ut(e),i=s?Object.keys(e):e,r=Ut(n)?s?a=>jt(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of i)t[a]=B3(r(a));return t}function W2(n){return Ng(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Io(n){return Ng(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ws(n){const e=W2(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function fs(n,e){n=n||{},e=e||_n.font;let t=jt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=jt(n.style,e.style);s&&!(""+s).match(F3)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:jt(n.family,e.family),lineHeight:z3(jt(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:jt(n.weight,e.weight),string:""};return i.string=L3(i),i}function Gc(n,e,t,s){let i,r,a;for(i=0,r=n.length;i<r;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function $3(n,e,t){const{min:s,max:i}=n,r=L2(e,(i-s)/2),a=(o,c)=>t&&o===0?0:o+c;return{min:a(s,-Math.abs(r)),max:a(i,r)}}function ro(n,e){return Object.assign(Object.create(n),e)}function kg(n,e=[""],t,s,i=()=>n[0]){const r=t||n;typeof s>"u"&&(s=H2("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:o=>kg([o,...n],e,r,s)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete n[0][c],!0},get(o,c){return q2(o,c,()=>Z3(c,e,n,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,c){return ky(o).includes(c)},ownKeys(o){return ky(o)},set(o,c,d){const u=o._storage||(o._storage=i());return o[c]=u[c]=d,delete o._keys,!0}})}function Zl(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:U2(n,s),setContext:r=>Zl(n,r,t,s),override:r=>Zl(n.override(r),e,t,s)};return new Proxy(i,{deleteProperty(r,a){return delete r[a],delete n[a],!0},get(r,a,o){return q2(r,a,()=>U3(r,a,o))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(r,a,o){return n[a]=o,delete r[a],!0}})}function U2(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:to(t)?t:()=>t,isIndexable:to(s)?s:()=>s}}const W3=(n,e)=>n?n+xg(e):e,jg=(n,e)=>Ut(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function q2(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function U3(n,e,t){const{_proxy:s,_context:i,_subProxy:r,_descriptors:a}=n;let o=s[e];return to(o)&&a.isScriptable(e)&&(o=q3(e,o,n,t)),jn(o)&&o.length&&(o=V3(e,o,n,a.isIndexable)),jg(e,o)&&(o=Zl(o,i,r&&r[e],a)),o}function q3(n,e,t,s){const{_proxy:i,_context:r,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let c=e(r,a||s);return o.delete(n),jg(n,c)&&(c=_g(i._scopes,i,n,c)),c}function V3(n,e,t,s){const{_proxy:i,_context:r,_subProxy:a,_descriptors:o}=t;if(typeof r.index<"u"&&s(n))return e[r.index%e.length];if(Ut(e[0])){const c=e,d=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=_g(d,i,n,u);e.push(Zl(h,r,a&&a[n],o))}}return e}function V2(n,e,t){return to(n)?n(e,t):n}const H3=(n,e)=>n===!0?e:typeof n=="string"?eo(e,n):void 0;function G3(n,e,t,s,i){for(const r of e){const a=H3(t,r);if(a){n.add(a);const o=V2(a._fallback,t,i);if(typeof o<"u"&&o!==t&&o!==s)return o}else if(a===!1&&typeof s<"u"&&t!==s)return null}return!1}function _g(n,e,t,s){const i=e._rootScopes,r=V2(e._fallback,t,s),a=[...n,...i],o=new Set;o.add(s);let c=Ny(o,a,t,r||t,s);return c===null||typeof r<"u"&&r!==t&&(c=Ny(o,a,r,c,s),c===null)?!1:kg(Array.from(o),[""],i,r,()=>Y3(e,t,s))}function Ny(n,e,t,s,i){for(;t;)t=G3(n,e,t,s,i);return t}function Y3(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return jn(i)&&Ut(t)?t:i||{}}function Z3(n,e,t,s){let i;for(const r of e)if(i=H2(W3(r,n),t),typeof i<"u")return jg(n,i)?_g(t,s,n,i):i}function H2(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function ky(n){let e=n._keys;return e||(e=n._keys=K3(n._scopes)),e}function K3(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function G2(n,e,t,s){const{iScale:i}=n,{key:r="r"}=this._parsing,a=new Array(s);let o,c,d,u;for(o=0,c=s;o<c;++o)d=o+t,u=e[d],a[o]={r:i.parse(eo(u,r),d)};return a}const X3=Number.EPSILON||1e-14,Kl=(n,e)=>e<n.length&&!n[e].skip&&n[e],Y2=n=>n==="x"?"y":"x";function Q3(n,e,t,s){const i=n.skip?e:n,r=e,a=t.skip?e:t,o=fp(r,i),c=fp(a,r);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,m=s*u;return{previous:{x:r.x-h*(a.x-i.x),y:r.y-h*(a.y-i.y)},next:{x:r.x+m*(a.x-i.x),y:r.y+m*(a.y-i.y)}}}function J3(n,e,t){const s=n.length;let i,r,a,o,c,d=Kl(n,0);for(let u=0;u<s-1;++u)if(c=d,d=Kl(n,u+1),!(!c||!d)){if(Eo(e[u],0,X3)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],r=t[u+1]/e[u],o=Math.pow(i,2)+Math.pow(r,2),!(o<=9)&&(a=3/Math.sqrt(o),t[u]=i*a*e[u],t[u+1]=r*a*e[u])}}function eC(n,e,t="x"){const s=Y2(t),i=n.length;let r,a,o,c=Kl(n,0);for(let d=0;d<i;++d){if(a=o,o=c,c=Kl(n,d+1),!o)continue;const u=o[t],h=o[s];a&&(r=(u-a[t])/3,o[`cp1${t}`]=u-r,o[`cp1${s}`]=h-r*e[d]),c&&(r=(c[t]-u)/3,o[`cp2${t}`]=u+r,o[`cp2${s}`]=h+r*e[d])}}function tC(n,e="x"){const t=Y2(e),s=n.length,i=Array(s).fill(0),r=Array(s);let a,o,c,d=Kl(n,0);for(a=0;a<s;++a)if(o=c,c=d,d=Kl(n,a+1),!!c){if(d){const u=d[e]-c[e];i[a]=u!==0?(d[t]-c[t])/u:0}r[a]=o?d?Zi(i[a-1])!==Zi(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}J3(n,i,r),eC(n,r,e)}function fu(n,e,t){return Math.max(Math.min(n,t),e)}function nC(n,e){let t,s,i,r,a,o=zr(n[0],e);for(t=0,s=n.length;t<s;++t)a=r,r=o,o=t<s-1&&zr(n[t+1],e),r&&(i=n[t],a&&(i.cp1x=fu(i.cp1x,e.left,e.right),i.cp1y=fu(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=fu(i.cp2x,e.left,e.right),i.cp2y=fu(i.cp2y,e.top,e.bottom)))}function sC(n,e,t,s,i){let r,a,o,c;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")tC(n,i);else{let d=s?n[n.length-1]:n[0];for(r=0,a=n.length;r<a;++r)o=n[r],c=Q3(d,o,n[Math.min(r+1,a-(s?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&nC(n,t)}function Cg(){return typeof window<"u"&&typeof document<"u"}function Ag(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bh(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const ef=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function iC(n,e){return ef(n).getPropertyValue(e)}const rC=["top","right","bottom","left"];function Ro(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=rC[i];s[r]=parseFloat(n[e+"-"+r+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const aC=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function oC(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:r}=s;let a=!1,o,c;if(aC(i,r,n.target))o=i,c=r;else{const d=e.getBoundingClientRect();o=s.clientX-d.left,c=s.clientY-d.top,a=!0}return{x:o,y:c,box:a}}function Fr(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=ef(t),r=i.boxSizing==="border-box",a=Ro(i,"padding"),o=Ro(i,"border","width"),{x:c,y:d,box:u}=oC(n,t),h=a.left+(u&&o.left),m=a.top+(u&&o.top);let{width:f,height:y}=e;return r&&(f-=a.width+o.width,y-=a.height+o.height),{x:Math.round((c-h)/f*t.width/s),y:Math.round((d-m)/y*t.height/s)}}function lC(n,e,t){let s,i;if(e===void 0||t===void 0){const r=n&&Ag(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const a=r.getBoundingClientRect(),o=ef(r),c=Ro(o,"border","width"),d=Ro(o,"padding");e=a.width-d.width-c.width,t=a.height-d.height-c.height,s=bh(o.maxWidth,r,"clientWidth"),i=bh(o.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:s||xh,maxHeight:i||xh}}const mu=n=>Math.round(n*10)/10;function cC(n,e,t,s){const i=ef(n),r=Ro(i,"margin"),a=bh(i.maxWidth,n,"clientWidth")||xh,o=bh(i.maxHeight,n,"clientHeight")||xh,c=lC(n,e,t);let{width:d,height:u}=c;if(i.boxSizing==="content-box"){const m=Ro(i,"border","width"),f=Ro(i,"padding");d-=f.width+m.width,u-=f.height+m.height}return d=Math.max(0,d-r.width),u=Math.max(0,s?d/s:u-r.height),d=mu(Math.min(d,a,c.maxWidth)),u=mu(Math.min(u,o,c.maxHeight)),d&&!u&&(u=mu(d/2)),(e!==void 0||t!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=mu(Math.floor(u*s))),{width:d,height:u}}function jy(n,e,t){const s=e||1,i=Math.floor(n.height*s),r=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||a.height!==i||a.width!==r?(n.currentDevicePixelRatio=s,a.height=i,a.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const dC=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Cg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function _y(n,e){const t=iC(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Po(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function uC(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function hC(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},a=Po(n,i,t),o=Po(i,r,t),c=Po(r,e,t),d=Po(a,o,t),u=Po(o,c,t);return Po(d,u,t)}const fC=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},mC=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Ol(n,e,t){return n?fC(e,t):mC()}function Z2(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function K2(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function X2(n){return n==="angle"?{between:vd,compare:p3,normalize:zs}:{between:ga,compare:(e,t)=>e-t,normalize:e=>e}}function Cy({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function pC(n,e,t){const{property:s,start:i,end:r}=t,{between:a,normalize:o}=X2(s),c=e.length;let{start:d,end:u,loop:h}=n,m,f;if(h){for(d+=c,u+=c,m=0,f=c;m<f&&a(o(e[d%c][s]),i,r);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:n.style}}function Q2(n,e,t){if(!t)return[n];const{property:s,start:i,end:r}=t,a=e.length,{compare:o,between:c,normalize:d}=X2(s),{start:u,end:h,loop:m,style:f}=pC(n,e,t),y=[];let x=!1,v=null,w,j,C;const N=()=>c(i,C,w)&&o(i,C)!==0,P=()=>o(r,w)===0||c(r,C,w),L=()=>x||N(),M=()=>!x||P();for(let T=u,k=u;T<=h;++T)j=e[T%a],!j.skip&&(w=d(j[s]),w!==C&&(x=c(w,i,r),v===null&&L()&&(v=o(w,i)===0?T:k),v!==null&&M()&&(y.push(Cy({start:v,end:T,loop:m,count:a,style:f})),v=null),k=T,C=w));return v!==null&&y.push(Cy({start:v,end:h,loop:m,count:a,style:f})),y}function J2(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const r=Q2(s[i],n.points,e);r.length&&t.push(...r)}return t}function gC(n,e,t,s){let i=0,r=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&n[r%e].skip;)r--;return r%=e,{start:i,end:r}}function yC(n,e,t,s){const i=n.length,r=[];let a=e,o=n[e],c;for(c=e+1;c<=t;++c){const d=n[c%i];d.skip||d.stop?o.skip||(s=!1,r.push({start:e%i,end:(c-1)%i,loop:s}),e=a=d.stop?c:null):(a=c,o.skip&&(e=c)),o=d}return a!==null&&r.push({start:e%i,end:a%i,loop:s}),r}function xC(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const r=!!n._loop,{start:a,end:o}=gC(t,i,r,s);if(s===!0)return Ay(n,[{start:a,end:o,loop:r}],t,e);const c=o<a?o+i:o,d=!!n._fullLoop&&a===0&&o===i-1;return Ay(n,yC(t,a,c,d),t,e)}function Ay(n,e,t,s){return!s||!s.setContext||!t?e:vC(n,e,t,s)}function vC(n,e,t,s){const i=n._chart.getContext(),r=Py(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,c=t.length,d=[];let u=r,h=e[0].start,m=h;function f(y,x,v,w){const j=o?-1:1;if(y!==x){for(y+=c;t[y%c].skip;)y-=j;for(;t[x%c].skip;)x+=j;y%c!==x%c&&(d.push({start:y%c,end:x%c,loop:v,style:w}),u=w,h=x%c)}}for(const y of e){h=o?h:y.start;let x=t[h%c],v;for(m=h+1;m<=y.end;m++){const w=t[m%c];v=Py(s.setContext(ro(i,{type:"segment",p0:x,p1:w,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:a}))),bC(v,u)&&f(h,m-1,y.loop,u),x=w,u=v}h<m-1&&f(h,m-1,y.loop,u)}return d}function Py(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function bC(n,e){if(!e)return!1;const t=[],s=function(i,r){return Sg(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function pu(n,e,t){return n.options.clip?n[t]:e[t]}function wC(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:pu(t,e,"left"),right:pu(t,e,"right"),top:pu(s,e,"top"),bottom:pu(s,e,"bottom")}:e}function ew(n,e){const t=e._clip;if(t.disabled)return!1;const s=wC(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class SC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const r=t.listeners[i],a=t.duration;r.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(s-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=R2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let a=r.length-1,o=!1,c;for(;a>=0;--a)c=r[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ca=new SC;const Ly="transparent",NC={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=by(n||Ly),i=s.valid&&by(e||Ly);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class kC{constructor(e,t,s,i){const r=t[s];i=Gc([e.to,i,r,e.from]);const a=Gc([e.from,r,i]);this._active=!0,this._fn=e.fn||NC[e.type||typeof a],this._easing=Qc[e.easing]||Qc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,a=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Gc([e.to,t,i,e.from]),this._from=Gc([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,r=this._from,a=this._loop,o=this._to;let c;if(this._active=r!==o&&(a||t<s),!this._active){this._target[i]=o,this._notify(!0);return}if(t<0){this._target[i]=r;return}c=t/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class tw{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ut(e))return;const t=Object.keys(_n.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Ut(r))return;const a={};for(const o of t)a[o]=r[o];(jn(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!s.has(o))&&s.set(o,a)})})}_animateOptions(e,t){const s=t.options,i=_C(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&jC(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,t){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[d];let h=r[d];const m=s.get(d);if(h)if(m&&h.active()){h.update(m,u,o);continue}else h.cancel();if(!m||!m.duration){e[d]=u;continue}r[d]=h=new kC(m,e,d,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return ca.add(this._chart,s),!0}}function jC(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function _C(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function My(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function CC(n,e,t){if(t===!1)return!1;const s=My(n,t),i=My(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function AC(n){let e,t,s,i;return Ut(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function nw(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)t.push(s[i].index);return t}function Ty(n,e,t,s={}){const i=n.keys,r=s.mode==="single";let a,o,c,d;if(e===null)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(c=+i[a],c===t){if(u=!0,s.all)continue;break}d=n.values[c],zn(d)&&(r||e===0||Zi(e)===Zi(d))&&(e+=d)}return!u&&!s.all?0:e}function PC(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],o[c]={[i]:u,[r]:n[u]};return o}function im(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function LC(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function MC(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function TC(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function Dy(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function Ey(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:r,vScale:a,index:o}=s,c=r.axis,d=a.axis,u=LC(r,a,s),h=e.length;let m;for(let f=0;f<h;++f){const y=e[f],{[c]:x,[d]:v}=y,w=y._stacks||(y._stacks={});m=w[d]=TC(i,u,x),m[o]=v,m._top=Dy(m,a,!0,s.type),m._bottom=Dy(m,a,!1,s.type);const j=m._visualValues||(m._visualValues={});j[o]=v}}function rm(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function DC(n,e){return ro(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function EC(n,e,t){return ro(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Pc(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][t]===void 0)return;delete r[s][t],r[s]._visualValues!==void 0&&r[s]._visualValues[t]!==void 0&&delete r[s]._visualValues[t]}}}const am=n=>n==="reset"||n==="none",Iy=(n,e)=>e?n:Object.assign({},n),IC=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:nw(t,!0),values:null};class ao{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=im(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Pc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(h,m,f,y)=>h==="x"?m:h==="r"?y:f,r=t.xAxisID=jt(s.xAxisID,rm(e,"x")),a=t.yAxisID=jt(s.yAxisID,rm(e,"y")),o=t.rAxisID=jt(s.rAxisID,rm(e,"r")),c=t.indexAxis,d=t.iAxisID=i(c,r,a,o),u=t.vAxisID=i(c,a,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yy(this._data,this),e._stacked&&Pc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Ut(t)){const i=this._cachedMeta;this._data=PC(t,i)}else if(s!==t){if(s){yy(s,this);const i=this._cachedMeta;Pc(i),i._parsed=[]}t&&Object.isExtensible(t)&&v3(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=im(t.vScale,t),t.stack!==s.stack&&(i=!0,Pc(t),t.stack=s.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Ey(this,t._parsed),t._stacked=im(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:a}=s,o=r.axis;let c=e===0&&t===i.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,m;if(this._parsing===!1)s._parsed=i,s._sorted=!0,m=i;else{jn(i[e])?m=this.parseArrayData(s,i,e,t):Ut(i[e])?m=this.parseObjectData(s,i,e,t):m=this.parsePrimitiveData(s,i,e,t);const f=()=>h[o]===null||d&&h[o]<d[o];for(u=0;u<t;++u)s._parsed[u+e]=h=m[u],c&&(f()&&(c=!1),d=h);s._sorted=c}a&&Ey(this,m)}parsePrimitiveData(e,t,s,i){const{iScale:r,vScale:a}=e,o=r.axis,c=a.axis,d=r.getLabels(),u=r===a,h=new Array(i);let m,f,y;for(m=0,f=i;m<f;++m)y=m+s,h[m]={[o]:u||r.parse(d[y],y),[c]:a.parse(t[y],y)};return h}parseArrayData(e,t,s,i){const{xScale:r,yScale:a}=e,o=new Array(i);let c,d,u,h;for(c=0,d=i;c<d;++c)u=c+s,h=t[u],o[c]={x:r.parse(h[0],u),y:a.parse(h[1],u)};return o}parseObjectData(e,t,s,i){const{xScale:r,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let u,h,m,f;for(u=0,h=i;u<h;++u)m=u+s,f=t[m],d[u]={x:r.parse(eo(f,o),m),y:a.parse(eo(f,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,r=this._cachedMeta,a=t[e.axis],o={keys:nw(i,!0),values:t._stacks[e.axis]._visualValues};return Ty(o,a,r.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const r=s[t.axis];let a=r===null?NaN:r;const o=i&&s._stacks[t.axis];i&&o&&(i.values=o,a=Ty(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,a=i.length,o=this._getOtherScale(e),c=IC(t,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=MC(o);let m,f;function y(){f=i[m];const x=f[o.axis];return!zn(f[e.axis])||u>x||h<x}for(m=0;m<a&&!(!y()&&(this.updateRangeFromParsed(d,e,f,c),r));++m);if(r){for(m=a-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(d,e,f,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,r,a;for(i=0,r=t.length;i<r;++i)a=t[i][e.axis],zn(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=AC(jt(this.options.clip,CC(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],r=t.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,o,c),u=o;u<o+c;++u){const h=i[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,r))}for(u=0;u<a.length;++u)a[u].draw(e,r)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=EC(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=DC(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",r=this._cachedDataOpts,a=e+"-"+t,o=r[a],c=this.enableOptionSharing&&xd(s);if(o)return Iy(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),f=Object.keys(_n.elements[e]),y=()=>this.getContext(s,i,t),x=d.resolveNamedOptions(m,f,y,h);return x.$shared&&(x.$shared=c,r[a]=Object.freeze(Iy(x,c))),x}_resolveAnimations(e,t,s){const i=this.chart,r=this._cachedDataOpts,a=`animation-${t}`,o=r[a];if(o)return o;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,s,t))}const d=new tw(i,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||am(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(s),a=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,s),{sharedOptions:r,includeOptions:a}}updateElement(e,t,s,i){am(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!am(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const i=s.length,r=t.length,a=Math.min(r,i);a&&this.parse(0,a),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,s=!0){const i=this._cachedMeta,r=i.data,a=e+t;let o;const c=d=>{for(d.length+=t,o=d.length-1;o>=a;o--)d[o]=d[o-t]};for(c(r),o=e;o<a;++o)r[o]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&Pc(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function RC(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let s=[];for(let i=0,r=t.length;i<r;i++)s=s.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=I2(s.sort((i,r)=>i-r))}return n._cache.$bar}function OC(n){const e=n.iScale,t=RC(e,n.type);let s=e._length,i,r,a,o;const c=()=>{a===32767||a===-32768||(xd(o)&&(s=Math.min(s,Math.abs(a-o)||s)),o=a)};for(i=0,r=t.length;i<r;++i)a=e.getPixelForValue(t[i]),c();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)a=e.getPixelForTick(i),c();return s}function FC(n,e,t,s){const i=t.barThickness;let r,a;return Wt(i)?(r=e.min*t.categoryPercentage,a=t.barPercentage):(r=i*s,a=1),{chunk:r/s,ratio:a,start:e.pixels[n]-r/2}}function zC(n,e,t,s){const i=e.pixels,r=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const c=t.categoryPercentage;a===null&&(a=r-(o===null?e.end-e.start:o-r)),o===null&&(o=r+r-a);const d=r-(r-Math.min(a,o))/2*c;return{chunk:Math.abs(o-a)/2*c/s,ratio:t.barPercentage,start:d}}function BC(n,e,t,s){const i=t.parse(n[0],s),r=t.parse(n[1],s),a=Math.min(i,r),o=Math.max(i,r);let c=a,d=o;Math.abs(a)>Math.abs(o)&&(c=o,d=a),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:i,end:r,min:a,max:o}}function sw(n,e,t,s){return jn(n)?BC(n,e,t,s):e[t.axis]=t.parse(n,s),e}function Ry(n,e,t,s){const i=n.iScale,r=n.vScale,a=i.getLabels(),o=i===r,c=[];let d,u,h,m;for(d=t,u=t+s;d<u;++d)m=e[d],h={},h[i.axis]=o||i.parse(a[d],d),c.push(sw(m,h,r,d));return c}function om(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function $C(n,e,t){return n!==0?Zi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function WC(n){let e,t,s,i,r;return n.horizontal?(e=n.base>n.x,t="left",s="right"):(e=n.base<n.y,t="bottom",s="top"),e?(i="end",r="start"):(i="start",r="end"),{start:t,end:s,reverse:e,top:i,bottom:r}}function UC(n,e,t,s){let i=e.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:c,top:d,bottom:u}=WC(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===s?i=d:(t._bottom||0)===s?i=u:(r[Oy(u,a,o,c)]=!0,i=d)),r[Oy(i,a,o,c)]=!0,n.borderSkipped=r}function Oy(n,e,t,s){return s?(n=qC(n,e,t),n=Fy(n,t,e)):n=Fy(n,e,t),n}function qC(n,e,t){return n===e?t:n===t?e:n}function Fy(n,e,t){return n==="start"?e:n==="end"?t:n}function VC(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class iw extends ao{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,i){return Ry(e,t,s,i)}parseArrayData(e,t,s,i){return Ry(e,t,s,i)}parseObjectData(e,t,s,i){const{iScale:r,vScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?o:c,u=a.axis==="x"?o:c,h=[];let m,f,y,x;for(m=s,f=s+i;m<f;++m)x=t[m],y={},y[r.axis]=r.parse(eo(x,d),m),h.push(sw(eo(x,u),y,a,m));return h}updateRangeFromParsed(e,t,s,i){super.updateRangeFromParsed(e,t,s,i);const r=s._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:i}=t,r=this.getParsed(e),a=r._custom,o=om(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,i){const r=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(t,i);for(let f=t;f<t+s;f++){const y=this.getParsed(f),x=r||Wt(y[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),w=(y._stacks||{})[o.axis],j={horizontal:d,base:x.base,enableBorderRadius:!w||om(y._custom)||a===w._top||a===w._bottom,x:d?x.head:v.center,y:d?v.center:x.head,height:d?v.size:Math.abs(x.size),width:d?Math.abs(x.size):v.size};m&&(j.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const C=j.options||e[f].options;UC(j,C,w,a),VC(j,C,u.ratio),this.updateElement(e[f],f,j,i)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),c=o&&o[s.axis],d=u=>{const h=u._parsed.find(f=>f[s.axis]===c),m=h&&h[u.vScale.axis];if(Wt(m)||isNaN(m))return!0};for(const u of i)if(!(t!==void 0&&d(u))&&((r===!1||a.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[jt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const i=this._getStacks(e,s),r=t!==void 0?i.indexOf(t):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,i=[];let r,a;for(r=0,a=t.data.length;r<a;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const o=e.barThickness;return{min:o||OC(t),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:i},options:{base:r,minBarLength:a}}=this,o=r||0,c=this.getParsed(e),d=c._custom,u=om(d);let h=c[t.axis],m=0,f=s?this.applyStack(t,c,s):h,y,x;f!==h&&(m=f-h,f=h),u&&(h=d.barStart,f=d.barEnd-d.barStart,h!==0&&Zi(h)!==Zi(d.barEnd)&&(m=0),m+=h);const v=!Wt(r)&&!u?r:m;let w=t.getPixelForValue(v);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(m+f):y=w,x=y-w,Math.abs(x)<a){x=$C(x,t,o)*a,h===o&&(w-=x/2);const j=t.getPixelForDecimal(0),C=t.getPixelForDecimal(1),N=Math.min(j,C),P=Math.max(j,C);w=Math.max(Math.min(w,P),N),y=w+x,s&&!u&&(c._stacks[t.axis]._visualValues[i]=t.getValueForPixel(y)-t.getValueForPixel(w))}if(w===t.getPixelForValue(o)){const j=Zi(x)*t.getLineWidthForValue(o)/2;w+=j,x-=j}return{size:x,base:w,head:y,center:y+x/2}}_calculateBarIndexPixels(e,t){const s=t.scale,i=this.options,r=i.skipNull,a=jt(i.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(t.grouped){const u=r?this._getStackCount(e):t.stackCount,h=i.barThickness==="flex"?zC(e,t,i,u*d):FC(e,t,i,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(jt(m,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+f;o=h.start+h.chunk*y+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else o=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,t.min*t.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[t.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class HC extends ao{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,i){const r=super.parsePrimitiveData(e,t,s,i);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+s).radius;return r}parseArrayData(e,t,s,i){const r=super.parseArrayData(e,t,s,i);for(let a=0;a<r.length;a++){const o=t[s+a];r[a]._custom=jt(o[2],this.resolveDataElementOptions(a+s).radius)}return r}parseObjectData(e,t,s,i){const r=super.parseObjectData(e,t,s,i);for(let a=0;a<r.length;a++){const o=t[s+a];r[a]._custom=jt(o&&o.r&&+o.r,this.resolveDataElementOptions(a+s).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y),d=a._custom;return{label:s[e]||"",value:"("+o+", "+c+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,i),u=a.axis,h=o.axis;for(let m=t;m<t+s;m++){const f=e[m],y=!r&&this.getParsed(m),x={},v=x[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(y[u]),w=x[h]=r?o.getBasePixel():o.getPixelForValue(y[h]);x.skip=isNaN(v)||isNaN(w),d&&(x.options=c||this.resolveDataElementOptions(m,f.active?"active":i),r&&(x.options.radius=0)),this.updateElement(f,m,x,i)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return t!=="active"&&(i.radius=0),i.radius+=jt(s&&s._custom,r),i}}function GC(n,e,t){let s=1,i=1,r=0,a=0;if(e<bn){const o=n,c=o+e,d=Math.cos(o),u=Math.sin(o),h=Math.cos(c),m=Math.sin(c),f=(C,N,P)=>vd(C,o,c,!0)?1:Math.max(N,N*t,P,P*t),y=(C,N,P)=>vd(C,o,c,!0)?-1:Math.min(N,N*t,P,P*t),x=f(0,d,h),v=f(Zn,u,m),w=y(Qt,d,h),j=y(Qt+Zn,u,m);s=(x-w)/2,i=(v-j)/2,r=-(x+w)/2,a=-(v+j)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:a}}class tf extends ao{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=c=>+s[c];if(Ut(s[e])){const{key:c="value"}=this._parsing;r=d=>+eo(s[d],c)}let a,o;for(a=e,o=e+t;a<o;++a)i._parsed[a]=r(a)}}_getRotation(){return mr(this.options.rotation-90)}_getCircumference(){return mr(this.options.circumference)}_getRotationExtents(){let e=bn,t=-bn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),a=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,r=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(i3(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:y,offsetY:x}=GC(h,u,c),v=(s.width-a)/m,w=(s.height-a)/f,j=Math.max(Math.min(v,w)/2,0),C=L2(this.options.radius,j),N=Math.max(C*c,0),P=(C-N)/this._getVisibleDatasetWeightTotal();this.offsetX=y*C,this.offsetY=x*C,i.total=this.calculateTotal(),this.outerRadius=C-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/bn)}updateElements(e,t,s,i){const r=i==="reset",a=this.chart,o=a.chartArea,d=a.options.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,m=r&&d.animateScale,f=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:x,includeOptions:v}=this._getSharedOptions(t,i);let w=this._getRotation(),j;for(j=0;j<t;++j)w+=this._circumference(j,r);for(j=t;j<t+s;++j){const C=this._circumference(j,r),N=e[j],P={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+C,circumference:C,outerRadius:y,innerRadius:f};v&&(P.options=x||this.resolveDataElementOptions(j,N.active?"active":i)),w+=C,this.updateElement(N,j,P,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?bn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Id(t._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,r,a,o,c;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){a=s.getDatasetMeta(i),e=a.data,o=a.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)c=o.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(jt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class rw extends ao{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=t,a=this.chart._animationsDisabled;let{start:o,count:c}=F2(t,i,a);this._drawStart=o,this._drawCount=c,z2(t)&&(o=0,c=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},e),this.updateElements(i,o,c,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i),m=a.axis,f=o.axis,{spanGaps:y,segment:x}=this.options,v=Yl(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||i==="none",j=t+s,C=e.length;let N=t>0&&this.getParsed(t-1);for(let P=0;P<C;++P){const L=e[P],M=w?L:{};if(P<t||P>=j){M.skip=!0;continue}const T=this.getParsed(P),k=Wt(T[f]),z=M[m]=a.getPixelForValue(T[m],P),_=M[f]=r||k?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,T,c):T[f],P);M.skip=isNaN(z)||isNaN(_)||k,M.stop=P>0&&Math.abs(T[m]-N[m])>v,x&&(M.parsed=T,M.raw=d.data[P]),h&&(M.options=u||this.resolveDataElementOptions(P,L.active?"active":i)),w||this.updateElement(L,P,M,i),N=T}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class aw extends ao{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Id(t._parsed[e].r,s.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,s,i){return G2.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),a=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),o=(r-a)/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,s,i){const r=i==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,m=d.getIndexAngle(0)-.5*Qt;let f=m,y;const x=360/this.countVisibleElements();for(y=0;y<t;++y)f+=this._computeAngle(y,i,x);for(y=t;y<t+s;y++){const v=e[y];let w=f,j=f+this._computeAngle(y,i,x),C=a.getDataVisibility(y)?d.getDistanceFromCenterForValue(this.getParsed(y).r):0;f=j,r&&(c.animateScale&&(C=0),c.animateRotate&&(w=j=m));const N={x:u,y:h,innerRadius:0,outerRadius:C,startAngle:w,endAngle:j,options:this.resolveDataElementOptions(y,v.active?"active":i)};this.updateElement(v,y,N,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?mr(this.resolveDataElementOptions(e,t).angle||s):0}}class YC extends tf{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class ow extends ao{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,i){return G2.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta,s=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(s.points=i,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:a};this.updateElement(s,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,s,i){const r=this._cachedMeta.rScale,a=i==="reset";for(let o=t;o<t+s;o++){const c=e[o],d=this.resolveDataElementOptions(o,c.active?"active":i),u=r.getPointPositionForValue(o,this.getParsed(o).r),h=a?r.xCenter:u.x,m=a?r.yCenter:u.y,f={x:h,y:m,angle:u.angle,skip:isNaN(h)||isNaN(m),options:d};this.updateElement(c,o,f,i)}}}class ZC extends ao{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y);return{label:s[e]||"",value:"("+o+", "+c+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:a}=F2(t,s,i);if(this._drawStart=r,this._drawCount=a,z2(t)&&(r=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=s;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(t,i),h=this.getSharedOptions(u),m=this.includeOptions(i,h),f=a.axis,y=o.axis,{spanGaps:x,segment:v}=this.options,w=Yl(x)?x:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||r||i==="none";let C=t>0&&this.getParsed(t-1);for(let N=t;N<t+s;++N){const P=e[N],L=this.getParsed(N),M=j?P:{},T=Wt(L[y]),k=M[f]=a.getPixelForValue(L[f],N),z=M[y]=r||T?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,L,c):L[y],N);M.skip=isNaN(k)||isNaN(z)||T,M.stop=N>0&&Math.abs(L[f]-C[f])>w,v&&(M.parsed=L,M.raw=d.data[N]),m&&(M.options=h||this.resolveDataElementOptions(N,P.active?"active":i)),j||this.updateElement(P,N,M,i),C=L}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let c=t.length-1;c>=0;--c)o=Math.max(o,t[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,a)/2}}var KC=Object.freeze({__proto__:null,BarController:iw,BubbleController:HC,DoughnutController:tf,LineController:rw,PieController:YC,PolarAreaController:aw,RadarController:ow,ScatterController:ZC});function Co(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Pg{static override(e){Object.assign(Pg.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Co()}parse(){return Co()}format(){return Co()}add(){return Co()}diff(){return Co()}startOf(){return Co()}endOf(){return Co()}}var XC={_date:Pg};function QC(n,e,t,s){const{controller:i,data:r,_sorted:a}=n,o=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&r.length){const d=o._reversePixels?y3:ya;if(s){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const m=d(r,e,t-h),f=d(r,e,t+h);return{lo:m.lo,hi:f.hi}}}}else{const u=d(r,e,t);if(c){const{vScale:h}=i._cachedMeta,{_parsed:m}=n,f=m.slice(0,u.lo+1).reverse().findIndex(x=>!Wt(x[h.axis]));u.lo-=Math.max(0,f);const y=m.slice(u.hi).findIndex(x=>!Wt(x[h.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:r.length-1}}function nf(n,e,t,s,i){const r=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,c=r.length;o<c;++o){const{index:d,data:u}=r[o],{lo:h,hi:m}=QC(r[o],e,a,i);for(let f=h;f<=m;++f){const y=u[f];y.skip||s(y,d,f)}}}function JC(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,a=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function lm(n,e,t,s,i){const r=[];return!i&&!n.isPointInArea(e)||nf(n,t,e,function(o,c,d){!i&&!zr(o,n.chartArea,0)||o.inRange(e.x,e.y,s)&&r.push({element:o,datasetIndex:c,index:d})},!0),r}function eA(n,e,t,s){let i=[];function r(a,o,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],s),{angle:h}=D2(a,{x:e.x,y:e.y});vd(h,d,u)&&i.push({element:a,datasetIndex:o,index:c})}return nf(n,t,e,r),i}function tA(n,e,t,s,i,r){let a=[];const o=JC(t);let c=Number.POSITIVE_INFINITY;function d(u,h,m){const f=u.inRange(e.x,e.y,i);if(s&&!f)return;const y=u.getCenterPoint(i);if(!(!!r||n.isPointInArea(y))&&!f)return;const v=o(e,y);v<c?(a=[{element:u,datasetIndex:h,index:m}],c=v):v===c&&a.push({element:u,datasetIndex:h,index:m})}return nf(n,t,e,d),a}function cm(n,e,t,s,i,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!s?eA(n,e,t,i):tA(n,e,t,s,i,r)}function zy(n,e,t,s,i){const r=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return nf(n,t,e,(c,d,u)=>{c[a]&&c[a](e[t],i)&&(r.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,i))}),s&&!o?[]:r}var nA={modes:{index(n,e,t,s){const i=Fr(e,n),r=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?lm(n,i,r,s,a):cm(n,i,r,!1,s,a),c=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(n,e,t,s){const i=Fr(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?lm(n,i,r,s,a):cm(n,i,r,!1,s,a);if(o.length>0){const c=o[0].datasetIndex,d=n.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(n,e,t,s){const i=Fr(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return lm(n,i,r,s,a)},nearest(n,e,t,s){const i=Fr(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return cm(n,i,r,t.intersect,s,a)},x(n,e,t,s){const i=Fr(e,n);return zy(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=Fr(e,n);return zy(n,i,"y",t.intersect,s)}}};const lw=["left","top","right","bottom"];function Lc(n,e){return n.filter(t=>t.pos===e)}function By(n,e){return n.filter(t=>lw.indexOf(t.pos)===-1&&t.box.axis===e)}function Mc(n,e){return n.sort((t,s)=>{const i=e?s:t,r=e?t:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function sA(n){const e=[];let t,s,i,r,a,o;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:r,options:{stack:a,stackWeight:o=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&r+a,stackWeight:o});return e}function iA(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:r}=t;if(!s||!lw.includes(i))continue;const a=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}function rA(n,e){const t=iA(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,a,o;for(r=0,a=n.length;r<a;++r){o=n[r];const{fullSize:c}=o.box,d=t[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*s:c&&e.availableWidth,o.height=i):(o.width=s,o.height=u?u*i:c&&e.availableHeight)}return t}function aA(n){const e=sA(n),t=Mc(e.filter(d=>d.box.fullSize),!0),s=Mc(Lc(e,"left"),!0),i=Mc(Lc(e,"right")),r=Mc(Lc(e,"top"),!0),a=Mc(Lc(e,"bottom")),o=By(e,"x"),c=By(e,"y");return{fullSize:t,leftAndTop:s.concat(r),rightAndBottom:i.concat(c).concat(a).concat(o),chartArea:Lc(e,"chartArea"),vertical:s.concat(i).concat(c),horizontal:r.concat(a).concat(o)}}function $y(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function cw(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function oA(n,e,t,s){const{pos:i,box:r}=t,a=n.maxPadding;if(!Ut(i)){t.size&&(n[i]-=t.size);const h=s[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?r.height:r.width),t.size=h.size/h.count,n[i]+=t.size}r.getPadding&&cw(a,r.getPadding());const o=Math.max(0,e.outerWidth-$y(a,n,"left","right")),c=Math.max(0,e.outerHeight-$y(a,n,"top","bottom")),d=o!==n.w,u=c!==n.h;return n.w=o,n.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function lA(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function cA(n,e){const t=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{r[a]=Math.max(e[a],t[a])}),r}return s(n?["left","right"]:["top","bottom"])}function Yc(n,e,t,s){const i=[];let r,a,o,c,d,u;for(r=0,a=n.length,d=0;r<a;++r){o=n[r],c=o.box,c.update(o.width||e.w,o.height||e.h,cA(o.horizontal,e));const{same:h,other:m}=oA(e,t,o,s);d|=h&&i.length,u=u||m,c.fullSize||i.push(o)}return d&&Yc(i,e,t,s)||u}function gu(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function Wy(n,e,t,s){const i=t.padding;let{x:r,y:a}=e;for(const o of n){const c=o.box,d=s[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const h=e.w*u,m=d.size||c.height;xd(d.start)&&(a=d.start),c.fullSize?gu(c,i.left,a,t.outerWidth-i.right-i.left,m):gu(c,e.left+d.placed,a,h,m),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,m=d.size||c.width;xd(d.start)&&(r=d.start),c.fullSize?gu(c,r,i.top,m,t.outerHeight-i.bottom-i.top):gu(c,r,e.top+d.placed,m,h),d.start=r,d.placed+=h,r=c.right}}e.x=r,e.y=a}var Bs={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=Ws(n.options.layout.padding),r=Math.max(e-i.width,0),a=Math.max(t-i.height,0),o=aA(n.boxes),c=o.vertical,d=o.horizontal;$t(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/u,hBoxMaxHeight:a/2}),m=Object.assign({},i);cw(m,Ws(s));const f=Object.assign({maxPadding:m,w:r,h:a,x:i.left,y:i.top},i),y=rA(c.concat(d),h);Yc(o.fullSize,f,h,y),Yc(c,f,h,y),Yc(d,f,h,y)&&Yc(c,f,h,y),lA(f),Wy(o.leftAndTop,f,h,y),f.x+=f.w,f.y+=f.h,Wy(o.rightAndBottom,f,h,y),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},$t(o.chartArea,x=>{const v=x.box;Object.assign(v,n.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class dw{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class dA extends dw{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Xu="$chartjs",uA={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uy=n=>n===null||n==="";function hA(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[Xu]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Uy(i)){const r=_y(n,"width");r!==void 0&&(n.width=r)}if(Uy(s))if(n.style.height==="")n.height=n.width/(e||2);else{const r=_y(n,"height");r!==void 0&&(n.height=r)}return n}const uw=dC?{passive:!0}:!1;function fA(n,e,t){n&&n.addEventListener(e,t,uw)}function mA(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,uw)}function pA(n,e){const t=uA[n.type]||n.type,{x:s,y:i}=Fr(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function wh(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function gA(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||wh(o.addedNodes,s),a=a&&!wh(o.removedNodes,s);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function yA(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||wh(o.removedNodes,s),a=a&&!wh(o.addedNodes,s);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const wd=new Map;let qy=0;function hw(){const n=window.devicePixelRatio;n!==qy&&(qy=n,wd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function xA(n,e){wd.size||window.addEventListener("resize",hw),wd.set(n,e)}function vA(n){wd.delete(n),wd.size||window.removeEventListener("resize",hw)}function bA(n,e,t){const s=n.canvas,i=s&&Ag(s);if(!i)return;const r=O2((o,c)=>{const d=i.clientWidth;t(o,c),d<i.clientWidth&&t()},window),a=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||r(d,u)});return a.observe(i),xA(n,r),a}function dm(n,e,t){t&&t.disconnect(),e==="resize"&&vA(n)}function wA(n,e,t){const s=n.canvas,i=O2(r=>{n.ctx!==null&&t(pA(r,n))},n);return fA(s,e,i),i}class SA extends dw{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(hA(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Xu])return!1;const s=t[Xu].initial;["height","width"].forEach(r=>{const a=s[r];Wt(a)?t.removeAttribute(r):t.setAttribute(r,a)});const i=s.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[Xu],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),a={attach:gA,detach:yA,resize:bA}[t]||wA;i[t]=a(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:dm,detach:dm,resize:dm}[t]||mA)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return cC(e,t,s,i)}isAttached(e){const t=e&&Ag(e);return!!(t&&t.isConnected)}}function NA(n){return!Cg()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?dA:SA}let Na=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Yl(this.x)&&Yl(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function kA(n,e){const t=n.options.ticks,s=jA(n),i=Math.min(t.maxTicksLimit||s,s),r=t.major.enabled?CA(e):[],a=r.length,o=r[0],c=r[a-1],d=[];if(a>i)return AA(e,d,r,a/i),d;const u=_A(r,e,i);if(a>0){let h,m;const f=a>1?Math.round((c-o)/(a-1)):null;for(yu(e,d,u,Wt(f)?0:o-f,o),h=0,m=a-1;h<m;h++)yu(e,d,u,r[h],r[h+1]);return yu(e,d,u,c,Wt(f)?e.length:c+f),d}return yu(e,d,u),d}function jA(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function _A(n,e,t){const s=PA(n),i=e.length/t;if(!s)return Math.max(i,1);const r=h3(s);for(let a=0,o=r.length-1;a<o;a++){const c=r[a];if(c>i)return c}return Math.max(i,1)}function CA(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function AA(n,e,t,s){let i=0,r=t[0],a;for(s=Math.ceil(s),a=0;a<n.length;a++)a===r&&(e.push(n[a]),i++,r=t[i*s])}function yu(n,e,t,s,i){const r=jt(s,0),a=Math.min(jt(i,n.length),n.length);let o=0,c,d,u;for(t=Math.ceil(t),i&&(c=i-s,t=c/Math.floor(c/t)),u=r;u<0;)o++,u=Math.round(r+o*t);for(d=Math.max(r,0);d<a;d++)d===u&&(e.push(n[d]),o++,u=Math.round(r+o*t))}function PA(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const LA=n=>n==="left"?"right":n==="right"?"left":n,Vy=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Hy=(n,e)=>Math.min(e||n,n);function Gy(n,e){const t=[],s=n.length/e,i=n.length;let r=0;for(;r<i;r+=s)t.push(n[Math.floor(r)]);return t}function MA(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),r=n._startPixel,a=n._endPixel,o=1e-6;let c=n.getPixelForTick(i),d;if(!(t&&(s===1?d=Math.max(c-r,a-c):e===0?d=(n.getPixelForTick(1)-c)/2:d=(c-n.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<r-o||c>a+o)))return c}function TA(n,e){$t(n,t=>{const s=t.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[s[r]];s.splice(0,i)}})}function Tc(n){return n.drawTicks?n.tickLength:0}function Yy(n,e){if(!n.display)return 0;const t=fs(n.font,e),s=Ws(n.padding);return(jn(n.text)?n.text.length:1)*t.lineHeight+s.height}function DA(n,e){return ro(n,{scale:e,type:"scale"})}function EA(n,e,t){return ro(n,{tick:t,index:e,type:"tick"})}function IA(n,e,t){let s=wg(n);return(t&&e!=="right"||!t&&e==="right")&&(s=LA(s)),s}function RA(n,e,t,s){const{top:i,left:r,bottom:a,right:o,chart:c}=n,{chartArea:d,scales:u}=c;let h=0,m,f,y;const x=a-i,v=o-r;if(n.isHorizontal()){if(f=Os(s,r,o),Ut(t)){const w=Object.keys(t)[0],j=t[w];y=u[w].getPixelForValue(j)+x-e}else t==="center"?y=(d.bottom+d.top)/2+x-e:y=Vy(n,t,e);m=o-r}else{if(Ut(t)){const w=Object.keys(t)[0],j=t[w];f=u[w].getPixelForValue(j)-v+e}else t==="center"?f=(d.left+d.right)/2-v+e:f=Vy(n,t,e);y=Os(s,a,i),h=t==="left"?-Zn:Zn}return{titleX:f,titleY:y,maxWidth:m,rotation:h}}class Go extends Na{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=Ei(e,Number.POSITIVE_INFINITY),t=Ei(t,Number.NEGATIVE_INFINITY),s=Ei(s,Number.POSITIVE_INFINITY),i=Ei(i,Number.NEGATIVE_INFINITY),{min:Ei(e,s),max:Ei(t,i),minDefined:zn(e),maxDefined:zn(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),a;if(i&&r)return{min:t,max:s};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)a=o[c].controller.getMinMax(this,e),i||(t=Math.min(t,a.min)),r||(s=Math.max(s,a.max));return t=r&&t>s?s:t,s=i&&t>s?t:s,{min:Ei(t,Ei(s,t)),max:Ei(s,Ei(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kt(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$3(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?Gy(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=kA(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kt(this.options.afterUpdate,[this])}beforeSetDimensions(){kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=kt(t.callback,[r.value,s,e],this)}afterTickToLabelConversion(){kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Hy(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let a=i,o,c,d;if(!this._isVisible()||!t.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,f=vs(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/s:f/(s-1),h+6>o&&(o=f/(s-(e.offset?.5:1)),c=this.maxHeight-Tc(e.grid)-t.padding-Yy(e.title,this.chart.options.font),d=Math.sqrt(h*h+m*m),a=vg(Math.min(Math.asin(vs((u.highest.height+6)/o,-1,1)),Math.asin(vs(c/d,-1,1))-Math.asin(vs(m/d,-1,1)))),a=Math.max(i,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=Yy(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=Tc(r)+c):(e.height=this.maxHeight,e.width=Tc(r)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:m}=this._getLabelSizes(),f=s.padding*2,y=mr(this.labelRotation),x=Math.cos(y),v=Math.sin(y);if(o){const w=s.mirror?0:v*h.width+x*m.height;e.height=Math.min(this.maxHeight,e.height+w+f)}else{const w=s.mirror?0:x*h.width+v*m.height;e.width=Math.min(this.maxWidth,e.width+w+f)}this._calculatePadding(d,u,v,x)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:r,padding:a},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,f=0;c?d?(m=i*e.width,f=s*t.height):(m=s*e.height,f=i*t.width):r==="start"?f=t.width:r==="end"?m=e.width:r!=="inner"&&(m=e.width/2,f=t.width/2),this.paddingLeft=Math.max((m-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+a)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=t.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Wt(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Gy(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:r}=this,a=[],o=[],c=Math.floor(t/Hy(t,s));let d=0,u=0,h,m,f,y,x,v,w,j,C,N,P;for(h=0;h<t;h+=c){if(y=e[h].label,x=this._resolveTickFontOptions(h),i.font=v=x.string,w=r[v]=r[v]||{data:{},gc:[]},j=x.lineHeight,C=N=0,!Wt(y)&&!jn(y))C=vh(i,w.data,w.gc,C,y),N=j;else if(jn(y))for(m=0,f=y.length;m<f;++m)P=y[m],!Wt(P)&&!jn(P)&&(C=vh(i,w.data,w.gc,C,P),N+=j);a.push(C),o.push(N),d=Math.max(C,d),u=Math.max(N,u)}TA(r,t);const L=a.indexOf(d),M=o.indexOf(u),T=k=>({width:a[k]||0,height:o[k]||0});return{first:T(0),last:T(t-1),widest:T(L),highest:T(M),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return g3(this._alignToPixels?_o(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=EA(this.getContext(),e,s))}return this.$context||(this.$context=DA(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=mr(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,o=r?r.widest.width+a:0,c=r?r.highest.height+a:0;return this.isHorizontal()?c*s>o*i?o/s:c/i:c*i<o*s?c/s:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:r,position:a,border:o}=i,c=r.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Tc(r),f=[],y=o.setContext(this.getContext()),x=y.display?y.width:0,v=x/2,w=function(se){return _o(s,se,x)};let j,C,N,P,L,M,T,k,z,_,E,$;if(a==="top")j=w(this.bottom),M=this.bottom-m,k=j-v,_=w(e.top)+v,$=e.bottom;else if(a==="bottom")j=w(this.top),_=e.top,$=w(e.bottom)-v,M=j+v,k=this.top+m;else if(a==="left")j=w(this.right),L=this.right-m,T=j-v,z=w(e.left)+v,E=e.right;else if(a==="right")j=w(this.left),z=e.left,E=w(e.right)-v,L=j+v,T=this.left+m;else if(t==="x"){if(a==="center")j=w((e.top+e.bottom)/2+.5);else if(Ut(a)){const se=Object.keys(a)[0],oe=a[se];j=w(this.chart.scales[se].getPixelForValue(oe))}_=e.top,$=e.bottom,M=j+v,k=M+m}else if(t==="y"){if(a==="center")j=w((e.left+e.right)/2);else if(Ut(a)){const se=Object.keys(a)[0],oe=a[se];j=w(this.chart.scales[se].getPixelForValue(oe))}L=j-v,T=L-m,z=e.left,E=e.right}const I=jt(i.ticks.maxTicksLimit,h),J=Math.max(1,Math.ceil(h/I));for(C=0;C<h;C+=J){const se=this.getContext(C),oe=r.setContext(se),F=o.setContext(se),he=oe.lineWidth,ke=oe.color,ue=F.dash||[],D=F.dashOffset,V=oe.tickWidth,Z=oe.tickColor,ne=oe.tickBorderDash||[],ae=oe.tickBorderDashOffset;N=MA(this,C,c),N!==void 0&&(P=_o(s,N,he),d?L=T=z=E=P:M=k=_=$=P,f.push({tx1:L,ty1:M,tx2:T,ty2:k,x1:z,y1:_,x2:E,y2:$,width:he,color:ke,borderDash:ue,borderDashOffset:D,tickWidth:V,tickColor:Z,tickBorderDash:ne,tickBorderDashOffset:ae}))}return this._ticksLength=h,this._borderValue=j,f}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:r}=s,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=r,m=Tc(s.grid),f=m+u,y=h?-u:f,x=-mr(this.labelRotation),v=[];let w,j,C,N,P,L,M,T,k,z,_,E,$="middle";if(i==="top")L=this.bottom-y,M=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+y,M=this._getXAxisLabelAlignment();else if(i==="left"){const J=this._getYAxisLabelAlignment(m);M=J.textAlign,P=J.x}else if(i==="right"){const J=this._getYAxisLabelAlignment(m);M=J.textAlign,P=J.x}else if(t==="x"){if(i==="center")L=(e.top+e.bottom)/2+f;else if(Ut(i)){const J=Object.keys(i)[0],se=i[J];L=this.chart.scales[J].getPixelForValue(se)+f}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-f;else if(Ut(i)){const J=Object.keys(i)[0],se=i[J];P=this.chart.scales[J].getPixelForValue(se)}M=this._getYAxisLabelAlignment(m).textAlign}t==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const I=this._getLabelSizes();for(w=0,j=o.length;w<j;++w){C=o[w],N=C.label;const J=r.setContext(this.getContext(w));T=this.getPixelForTick(w)+r.labelOffset,k=this._resolveTickFontOptions(w),z=k.lineHeight,_=jn(N)?N.length:1;const se=_/2,oe=J.color,F=J.textStrokeColor,he=J.textStrokeWidth;let ke=M;a?(P=T,M==="inner"&&(w===j-1?ke=this.options.reverse?"left":"right":w===0?ke=this.options.reverse?"right":"left":ke="center"),i==="top"?d==="near"||x!==0?E=-_*z+z/2:d==="center"?E=-I.highest.height/2-se*z+z:E=-I.highest.height+z/2:d==="near"||x!==0?E=z/2:d==="center"?E=I.highest.height/2-se*z:E=I.highest.height-_*z,h&&(E*=-1),x!==0&&!J.showLabelBackdrop&&(P+=z/2*Math.sin(x))):(L=T,E=(1-_)*z/2);let ue;if(J.showLabelBackdrop){const D=Ws(J.backdropPadding),V=I.heights[w],Z=I.widths[w];let ne=E-D.top,ae=0-D.left;switch($){case"middle":ne-=V/2;break;case"bottom":ne-=V;break}switch(M){case"center":ae-=Z/2;break;case"right":ae-=Z;break;case"inner":w===j-1?ae-=Z:w>0&&(ae-=Z/2);break}ue={left:ae,top:ne,width:Z+D.width,height:V+D.height,color:J.backdropColor}}v.push({label:N,font:k,textOffset:E,options:{rotation:x,color:oe,strokeColor:F,strokeWidth:he,textAlign:ke,textBaseline:$,translation:[P,L],backdrop:ue}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-mr(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,a=this._getLabelSizes(),o=e+r,c=a.widest.width;let d,u;return t==="left"?i?(u=this.right+r,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):t==="right"?i?(u=this.left+r,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:r,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,r,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const o=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(t.display)for(r=0,a=i.length;r<a;++r){const c=i[r];t.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),a=s.display?r.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,m;this.isHorizontal()?(d=_o(e,this.left,a)-a/2,u=_o(e,this.right,o)+o/2,h=m=c):(h=_o(e,this.top,a)-a/2,m=_o(e,this.bottom,o)+o/2,d=u=c),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Qh(s,i);const r=this.getLabelItems(e);for(const a of r){const o=a.options,c=a.font,d=a.label,u=a.textOffset;$o(s,d,0,u,c,o)}i&&Jh(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const r=fs(s.font),a=Ws(s.padding),o=s.align;let c=r.lineHeight/2;t==="bottom"||t==="center"||Ut(t)?(c+=a.bottom,jn(s.text)&&(c+=r.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:m}=RA(this,c,t,o);$o(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:m,textAlign:IA(o,t,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=jt(e.grid&&e.grid.z,-1),i=jt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Go.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,a;for(r=0,a=t.length;r<a;++r){const o=t[r];o[s]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return fs(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xu{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;zA(t)&&(s=this.register(t));const i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,OA(e,a,s),this.override&&_n.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in _n[i]&&(delete _n[i][s],this.override&&delete Bo[s])}}function OA(n,e,t){const s=yd(Object.create(null),[t?_n.get(t):{},_n.get(e),n.defaults]);_n.set(e,s),n.defaultRoutes&&FA(e,n.defaultRoutes),n.descriptors&&_n.describe(e,n.descriptors)}function FA(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),r=[n].concat(s).join("."),a=e[t].split("."),o=a.pop(),c=a.join(".");_n.route(r,i,c,o)})}function zA(n){return"id"in n&&"defaults"in n}class BA{constructor(){this.controllers=new xu(ao,"datasets",!0),this.elements=new xu(Na,"elements"),this.plugins=new xu(Object,"plugins"),this.scales=new xu(Go,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):$t(i,a=>{const o=s||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,s){const i=xg(e);kt(s["before"+i],[],s),t[e](s),kt(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Rr=new BA;class $A{constructor(){this._init=[]}notify(e,t,s,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,t,s);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,s,i){i=i||{};for(const r of e){const a=r.plugin,o=a[s],c=[t,i,r.options];if(kt(o,c,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=jt(s.options&&s.options.plugins,{}),r=WA(s);return i===!1&&!t?[]:qA(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(r,a)=>r.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function WA(n){const e={},t=[],s=Object.keys(Rr.plugins.items);for(let r=0;r<s.length;r++)t.push(Rr.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const a=i[r];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function UA(n,e){return!e&&n===!1?null:n===!0?{}:n}function qA(n,{plugins:e,localIds:t},s,i){const r=[],a=n.getContext();for(const o of e){const c=o.id,d=UA(s[c],i);d!==null&&r.push({plugin:o,options:VA(n.config,{plugin:o,local:t[c]},d,a)})}return r}function VA(n,{plugin:e,local:t},s,i){const r=n.pluginScopeKeys(e),a=n.getOptionScopes(s,r);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gp(n,e){const t=_n.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function HA(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function GA(n,e){return n===e?"_index_":"_value_"}function Zy(n){if(n==="x"||n==="y"||n==="r")return n}function YA(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function yp(n,...e){if(Zy(n))return n;for(const t of e){const s=t.axis||YA(t.position)||n.length>1&&Zy(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Ky(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function ZA(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return Ky(n,"x",t[0])||Ky(n,"y",t[0])}return{}}function KA(n,e){const t=Bo[n.type]||{scales:{}},s=e.scales||{},i=gp(n.type,e),r=Object.create(null);return Object.keys(s).forEach(a=>{const o=s[a];if(!Ut(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=yp(a,o,ZA(a,n),_n.scales[o.type]),d=GA(c,i),u=t.scales||{};r[a]=Xc(Object.create(null),[{axis:c},o,u[c],u[d]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,c=a.indexAxis||gp(o,e),u=(Bo[o]||{}).scales||{};Object.keys(u).forEach(h=>{const m=HA(h,c),f=a[m+"AxisID"]||m;r[f]=r[f]||Object.create(null),Xc(r[f],[{axis:m},s[f],u[h]])})}),Object.keys(r).forEach(a=>{const o=r[a];Xc(o,[_n.scales[o.type],_n.scale])}),r}function fw(n){const e=n.options||(n.options={});e.plugins=jt(e.plugins,{}),e.scales=KA(n,e)}function mw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function XA(n){return n=n||{},n.data=mw(n.data),fw(n),n}const Xy=new Map,pw=new Set;function vu(n,e){let t=Xy.get(n);return t||(t=e(),Xy.set(n,t),pw.add(t)),t}const Dc=(n,e,t)=>{const s=eo(e,t);s!==void 0&&n.add(s)};class QA{constructor(e){this._config=XA(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=mw(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fw(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return vu(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return vu(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return vu(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:r}=this,a=this._cachedScopes(e,s),o=a.get(t);if(o)return o;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>Dc(c,e,h))),u.forEach(h=>Dc(c,i,h)),u.forEach(h=>Dc(c,Bo[r]||{},h)),u.forEach(h=>Dc(c,_n,h)),u.forEach(h=>Dc(c,mp,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),pw.has(t)&&a.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Bo[t]||{},_n.datasets[t]||{},{type:t},_n,mp]}resolveNamedOptions(e,t,s,i=[""]){const r={$shared:!0},{resolver:a,subPrefixes:o}=Qy(this._resolverCache,e,i);let c=a;if(e6(a,t)){r.$shared=!1,s=to(s)?s():s;const d=this.createResolver(e,s,o);c=Zl(a,s,d)}for(const d of t)r[d]=c[d];return r}createResolver(e,t,s=[""],i){const{resolver:r}=Qy(this._resolverCache,e,s);return Ut(t)?Zl(r,t,void 0,i):r}}function Qy(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let r=s.get(i);return r||(r={resolver:kg(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},s.set(i,r)),r}const JA=n=>Ut(n)&&Object.getOwnPropertyNames(n).some(e=>to(n[e]));function e6(n,e){const{isScriptable:t,isIndexable:s}=U2(n);for(const i of e){const r=t(i),a=s(i),o=(a||r)&&n[i];if(r&&(to(o)||JA(o))||a&&jn(o))return!0}return!1}var t6="4.5.0";const n6=["top","bottom","left","right","chartArea"];function Jy(n,e){return n==="top"||n==="bottom"||n6.indexOf(n)===-1&&e==="x"}function ex(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function tx(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),kt(t&&t.onComplete,[n],e)}function s6(n){const e=n.chart,t=e.options.animation;kt(t&&t.onProgress,[n],e)}function gw(n){return Cg()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Qu={},nx=n=>{const e=gw(n);return Object.values(Qu).filter(t=>t.canvas===e).pop()};function i6(n,e,t){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=e){const a=n[i];delete n[i],(t>0||r>e)&&(n[r+t]=a)}}}function r6(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}let Fl=class{static defaults=_n;static instances=Qu;static overrides=Bo;static registry=Rr;static version=t6;static getChart=nx;static register(...e){Rr.add(...e),sx()}static unregister(...e){Rr.remove(...e),sx()}constructor(e,t){const s=this.config=new QA(t),i=gw(e),r=nx(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||NA(i)),this.platform.updateConfig(s);const o=this.platform.acquireContext(i,a.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=s3(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $A,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=b3(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Qu[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ca.listen(this,"complete",tx),ca.listen(this,"progress",s6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:r}=this;return Wt(e)?t&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Sy(this.canvas,this.ctx),this}stop(){return ca.stop(this),this}resize(e,t){ca.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,r),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,jy(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),kt(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};$t(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((a,o)=>(a[o]=!1,a),{});let r=[];t&&(r=r.concat(Object.keys(t).map(a=>{const o=t[a],c=yp(a,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),$t(r,a=>{const o=a.options,c=o.id,d=yp(c,o),u=jt(o.type,a.dtype);(o.position===void 0||Jy(o.position,d)!==Jy(a.dposition))&&(o.position=a.dposition),i[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const m=Rr.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(o,e)}),$t(i,(a,o)=>{a||delete s[o]}),$t(s,a=>{Bs.configure(this,a,a.options),Bs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(ex("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const r=t[s];let a=this.getDatasetMeta(s);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=o,a.indexAxis=r.indexAxis||gp(o,this.options),a.order=r.order||0,a.index=s,a.label=""+r.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=Rr.getController(o),{datasetElementType:d,dataElementType:u}=_n.datasets[o];Object.assign(c,{dataElementType:Rr.getElement(u),datasetElementType:d&&Rr.getElement(d)}),a.controller=new c(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){$t(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),m=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(m),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),i||$t(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ex("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){$t(this.scales,e=>{Bs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!fy(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of t){const a=s==="_removeElements"?-r:r;i6(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=r=>new Set(e.filter(a=>a[0]===r).map((a,o)=>o+","+a.splice(1).join(","))),i=s(0);for(let r=1;r<t;r++)if(!fy(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bs.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],$t(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,to(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ca.has(this)?this.attached&&!ca.running(this)&&ca.start(this):(this.draw(),tx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,r;for(i=0,r=t.length;i<r;++i){const a=t[i];(!e||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=ew(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Qh(t,i),e.controller.draw(),i&&Jh(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return zr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const r=nA.modes[t];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=ro(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);xd(t)?(r.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),a.update(r,{visible:s}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ca.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Sy(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Qu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(r,a)=>{t.addEventListener(this,r,a),e[r]=a},i=(r,a,o)=>{r.offsetX=a,r.offsetY=o,this._eventHandler(r)};$t(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},r=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),s("resize",r),s("detach",a)};a=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){$t(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},$t(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let r,a,o,c;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:a})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[a],index:a}});!gh(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,r=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=r(t,e),o=s?e:r(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:r}=this,a=t,o=this._getActiveElements(e,i,s,a),c=c3(e),d=r6(e,this._lastEvent,s,c);s&&(this._lastEvent=null,kt(r.onHover,[e,o,this],this),c&&kt(r.onClick,[e,o,this],this));const u=!gh(o,i);return(u||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=d,u}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}};function sx(){return $t(Fl.instances,n=>n._plugins.invalidate())}function a6(n,e,t){const{startAngle:s,x:i,y:r,outerRadius:a,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/a,zs(s-t));if(n.beginPath(),n.arc(i,r,a-d/2,s+h/2,t-h/2),o>0){const m=Math.min(d/o,zs(s-t));n.arc(i,r,o+d/2,t-m/2,s+m/2,!0)}else{const m=Math.min(d/2,a*zs(s-t));if(u==="round")n.arc(i,r,m,t-Qt/2,s+Qt/2,!0);else if(u==="bevel"){const f=2*m*m,y=-f*Math.cos(t+Qt/2)+i,x=-f*Math.sin(t+Qt/2)+r,v=f*Math.cos(s+Qt/2)+i,w=f*Math.sin(s+Qt/2)+r;n.lineTo(y,x),n.lineTo(v,w)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function o6(n,e,t){const{startAngle:s,pixelMargin:i,x:r,y:a,outerRadius:o,innerRadius:c}=e;let d=i/o;n.beginPath(),n.arc(r,a,o,s-d,t+d),c>i?(d=i/c,n.arc(r,a,c,t+d,s-d,!0)):n.arc(r,a,i,t+Zn,s-Zn),n.closePath(),n.clip()}function l6(n){return Ng(n,["outerStart","outerEnd","innerStart","innerEnd"])}function c6(n,e,t,s){const i=l6(n.options.borderRadius),r=(t-e)/2,a=Math.min(r,s*e/2),o=c=>{const d=(t-Math.min(r,c))*s/2;return vs(c,0,Math.min(r,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:vs(i.innerStart,0,a),innerEnd:vs(i.innerEnd,0,a)}}function gl(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function Sh(n,e,t,s,i,r){const{x:a,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+s+t-d,0),m=u>0?u+s+t+d:0;let f=0;const y=i-c;if(s){const J=u>0?u-s:0,se=h>0?h-s:0,oe=(J+se)/2,F=oe!==0?y*oe/(oe+s):y;f=(y-F)/2}const x=Math.max(.001,y*h-t/Qt)/h,v=(y-x)/2,w=c+v+f,j=i-v-f,{outerStart:C,outerEnd:N,innerStart:P,innerEnd:L}=c6(e,m,h,j-w),M=h-C,T=h-N,k=w+C/M,z=j-N/T,_=m+P,E=m+L,$=w+P/_,I=j-L/E;if(n.beginPath(),r){const J=(k+z)/2;if(n.arc(a,o,h,k,J),n.arc(a,o,h,J,z),N>0){const he=gl(T,z,a,o);n.arc(he.x,he.y,N,z,j+Zn)}const se=gl(E,j,a,o);if(n.lineTo(se.x,se.y),L>0){const he=gl(E,I,a,o);n.arc(he.x,he.y,L,j+Zn,I+Math.PI)}const oe=(j-L/m+(w+P/m))/2;if(n.arc(a,o,m,j-L/m,oe,!0),n.arc(a,o,m,oe,w+P/m,!0),P>0){const he=gl(_,$,a,o);n.arc(he.x,he.y,P,$+Math.PI,w-Zn)}const F=gl(M,w,a,o);if(n.lineTo(F.x,F.y),C>0){const he=gl(M,k,a,o);n.arc(he.x,he.y,C,w-Zn,k)}}else{n.moveTo(a,o);const J=Math.cos(k)*h+a,se=Math.sin(k)*h+o;n.lineTo(J,se);const oe=Math.cos(z)*h+a,F=Math.sin(z)*h+o;n.lineTo(oe,F)}n.closePath()}function d6(n,e,t,s,i){const{fullCircles:r,startAngle:a,circumference:o}=e;let c=e.endAngle;if(r){Sh(n,e,t,s,c,i);for(let d=0;d<r;++d)n.fill();isNaN(o)||(c=a+(o%bn||bn))}return Sh(n,e,t,s,c,i),n.fill(),c}function u6(n,e,t,s,i){const{fullCircles:r,startAngle:a,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:f}=c,y=c.borderAlign==="inner";if(!d)return;n.setLineDash(h||[]),n.lineDashOffset=m,y?(n.lineWidth=d*2,n.lineJoin=u||"round"):(n.lineWidth=d,n.lineJoin=u||"bevel");let x=e.endAngle;if(r){Sh(n,e,t,s,x,i);for(let v=0;v<r;++v)n.stroke();isNaN(o)||(x=a+(o%bn||bn))}y&&o6(n,e,x),c.selfJoin&&x-a>=Qt&&f===0&&u!=="miter"&&a6(n,e,x),r||(Sh(n,e,t,s,x,i),n.stroke())}class h6 extends Na{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.getProps(["x","y"],s),{angle:r,distance:a}=D2(i,{x:e,y:t}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,f=jt(h,c-o),y=vd(r,o,c)&&o!==c,x=f>=bn||y,v=ga(a,d+m,u+m);return x&&v}getCenterPoint(e){const{x:t,y:s,startAngle:i,endAngle:r,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(i+r)/2,h=(a+o+d+c)/2;return{x:t+Math.cos(u)*h,y:s+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>bn?Math.floor(s/bn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const c=1-Math.sin(Math.min(Qt,s||0)),d=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,d6(e,this,d,r,a),u6(e,this,d,r,a),e.restore()}}function yw(n,e,t=e){n.lineCap=jt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(jt(t.borderDash,e.borderDash)),n.lineDashOffset=jt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=jt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=jt(t.borderWidth,e.borderWidth),n.strokeStyle=jt(t.borderColor,e.borderColor)}function f6(n,e,t){n.lineTo(t.x,t.y)}function m6(n){return n.stepped?T3:n.tension||n.cubicInterpolationMode==="monotone"?D3:f6}function xw(n,e,t={}){const s=n.length,{start:i=0,end:r=s-1}=t,{start:a,end:o}=e,c=Math.max(i,a),d=Math.min(r,o),u=i<a&&r<a||i>o&&r>o;return{count:s,start:c,loop:e.loop,ilen:d<c&&!u?s+d-c:d-c}}function p6(n,e,t,s){const{points:i,options:r}=e,{count:a,start:o,loop:c,ilen:d}=xw(i,t,s),u=m6(r);let{move:h=!0,reverse:m}=s||{},f,y,x;for(f=0;f<=d;++f)y=i[(o+(m?d-f:f))%a],!y.skip&&(h?(n.moveTo(y.x,y.y),h=!1):u(n,x,y,m,r.stepped),x=y);return c&&(y=i[(o+(m?d:0))%a],u(n,x,y,m,r.stepped)),!!c}function g6(n,e,t,s){const i=e.points,{count:r,start:a,ilen:o}=xw(i,t,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,m,f,y,x,v,w;const j=N=>(a+(d?o-N:N))%r,C=()=>{x!==v&&(n.lineTo(u,v),n.lineTo(u,x),n.lineTo(u,w))};for(c&&(f=i[j(0)],n.moveTo(f.x,f.y)),m=0;m<=o;++m){if(f=i[j(m)],f.skip)continue;const N=f.x,P=f.y,L=N|0;L===y?(P<x?x=P:P>v&&(v=P),u=(h*u+N)/++h):(C(),n.lineTo(N,P),y=L,h=0,x=v=P),w=P}C()}function xp(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?g6:p6}function y6(n){return n.stepped?uC:n.tension||n.cubicInterpolationMode==="monotone"?hC:Po}function x6(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),yw(n,e.options),n.stroke(i)}function v6(n,e,t,s){const{segments:i,options:r}=e,a=xp(e);for(const o of i)yw(n,r,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const b6=typeof Path2D=="function";function w6(n,e,t,s){b6&&!e.options.segment?x6(n,e,t,s):v6(n,e,t,s)}class sf extends Na{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;sC(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xC(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],r=this.points,a=J2(this,{property:t,start:i,end:i});if(!a.length)return;const o=[],c=y6(s);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:m}=a[d],f=r[h],y=r[m];if(f===y){o.push(f);continue}const x=Math.abs((i-f[t])/(y[t]-f[t])),v=c(f,y,x,s.stepped);v[t]=e[t],o.push(v)}return o.length===1?o[0]:o}pathSegment(e,t,s){return xp(this)(e,this,t,s)}path(e,t,s){const i=this.segments,r=xp(this);let a=this._loop;t=t||0,s=s||this.points.length-t;for(const o of i)a&=r(e,this,o,{start:t,end:t+s-1});return!!a}draw(e,t,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),w6(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ix(n,e,t,s){const i=n.options,{[t]:r}=n.getProps([t],s);return Math.abs(e-r)<i.radius+i.hitRadius}class S6 extends Na{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(t-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return ix(this,e,"x",t)}inYRange(e,t){return ix(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!zr(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,pp(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function vw(n,e){const{x:t,y:s,base:i,width:r,height:a}=n.getProps(["x","y","base","width","height"],e);let o,c,d,u,h;return n.horizontal?(h=a/2,o=Math.min(t,i),c=Math.max(t,i),d=s-h,u=s+h):(h=r/2,o=t-h,c=t+h,d=Math.min(s,i),u=Math.max(s,i)),{left:o,top:d,right:c,bottom:u}}function Ya(n,e,t,s){return n?0:vs(e,t,s)}function N6(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,r=W2(s);return{t:Ya(i.top,r.top,0,t),r:Ya(i.right,r.right,0,e),b:Ya(i.bottom,r.bottom,0,t),l:Ya(i.left,r.left,0,e)}}function k6(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=Io(i),a=Math.min(e,t),o=n.borderSkipped,c=s||Ut(i);return{topLeft:Ya(!c||o.top||o.left,r.topLeft,0,a),topRight:Ya(!c||o.top||o.right,r.topRight,0,a),bottomLeft:Ya(!c||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Ya(!c||o.bottom||o.right,r.bottomRight,0,a)}}function j6(n){const e=vw(n),t=e.right-e.left,s=e.bottom-e.top,i=N6(n,t/2,s/2),r=k6(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function um(n,e,t,s){const i=e===null,r=t===null,o=n&&!(i&&r)&&vw(n,s);return o&&(i||ga(e,o.left,o.right))&&(r||ga(t,o.top,o.bottom))}function _6(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function C6(n,e){n.rect(e.x,e.y,e.w,e.h)}function hm(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-s,a=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+a,radius:n.radius}}class A6 extends Na{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:a}=j6(this),o=_6(a.radius)?bd:C6;e.save(),(a.w!==r.w||a.h!==r.h)&&(e.beginPath(),o(e,hm(a,t,r)),e.clip(),o(e,hm(r,-t,a)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),o(e,hm(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return um(this,e,t,s)}inXRange(e,t){return um(this,e,null,t)}inYRange(e,t){return um(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var P6=Object.freeze({__proto__:null,ArcElement:h6,BarElement:A6,LineElement:sf,PointElement:S6});const vp=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],rx=vp.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function bw(n){return vp[n%vp.length]}function ww(n){return rx[n%rx.length]}function L6(n,e){return n.borderColor=bw(e),n.backgroundColor=ww(e),++e}function M6(n,e){return n.backgroundColor=n.data.map(()=>bw(e++)),e}function T6(n,e){return n.backgroundColor=n.data.map(()=>ww(e++)),e}function D6(n){let e=0;return(t,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof tf?e=M6(t,e):i instanceof aw?e=T6(t,e):i&&(e=L6(t,e))}}function ax(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function E6(n){return n&&(n.borderColor||n.backgroundColor)}function I6(){return _n.borderColor!=="rgba(0,0,0,0.1)"||_n.backgroundColor!=="rgba(0,0,0,0.1)"}var R6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,a=ax(s)||E6(i)||r&&ax(r)||I6();if(!t.forceOverride&&a)return;const o=D6(n);s.forEach(o)}};function O6(n,e,t,s,i){const r=i.samples||s;if(r>=t)return n.slice(e,e+t);const a=[],o=(t-2)/(r-2);let c=0;const d=e+t-1;let u=e,h,m,f,y,x;for(a[c++]=n[u],h=0;h<r-2;h++){let v=0,w=0,j;const C=Math.floor((h+1)*o)+1+e,N=Math.min(Math.floor((h+2)*o)+1,t)+e,P=N-C;for(j=C;j<N;j++)v+=n[j].x,w+=n[j].y;v/=P,w/=P;const L=Math.floor(h*o)+1+e,M=Math.min(Math.floor((h+1)*o)+1,t)+e,{x:T,y:k}=n[u];for(f=y=-1,j=L;j<M;j++)y=.5*Math.abs((T-v)*(n[j].y-k)-(T-n[j].x)*(w-k)),y>f&&(f=y,m=n[j],x=j);a[c++]=m,u=x}return a[c++]=n[d],a}function F6(n,e,t,s){let i=0,r=0,a,o,c,d,u,h,m,f,y,x;const v=[],w=e+t-1,j=n[e].x,N=n[w].x-j;for(a=e;a<e+t;++a){o=n[a],c=(o.x-j)/N*s,d=o.y;const P=c|0;if(P===u)d<y?(y=d,h=a):d>x&&(x=d,m=a),i=(r*i+o.x)/++r;else{const L=a-1;if(!Wt(h)&&!Wt(m)){const M=Math.min(h,m),T=Math.max(h,m);M!==f&&M!==L&&v.push({...n[M],x:i}),T!==f&&T!==L&&v.push({...n[T],x:i})}a>0&&L!==f&&v.push(n[L]),v.push(o),u=P,r=0,y=x=d,h=m=f=a}}return v}function Sw(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ox(n){n.data.datasets.forEach(e=>{Sw(e)})}function z6(n,e){const t=e.length;let s=0,i;const{iScale:r}=n,{min:a,max:o,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(s=vs(ya(e,r.axis,a).lo,0,t-1)),d?i=vs(ya(e,r.axis,o).hi+1,s,t)-s:i=t-s,{start:s,count:i}}var B6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){ox(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:a,indexAxis:o}=i,c=n.getDatasetMeta(r),d=a||i.data;if(Gc([o,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:m}=z6(c,d);const f=t.threshold||4*s;if(m<=f){Sw(i);return}Wt(a)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(t.algorithm){case"lttb":y=O6(d,h,m,s,t);break;case"min-max":y=F6(d,h,m,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=y})},destroy(n){ox(n)}};function $6(n,e,t){const s=n.segments,i=n.points,r=e.points,a=[];for(const o of s){let{start:c,end:d}=o;d=rf(c,d,i);const u=bp(t,i[c],i[d],o.loop);if(!e.segments){a.push({source:o,target:u,start:i[c],end:i[d]});continue}const h=J2(e,u);for(const m of h){const f=bp(t,r[m.start],r[m.end],m.loop),y=Q2(o,i,f);for(const x of y)a.push({source:x,target:m,start:{[t]:lx(u,f,"start",Math.max)},end:{[t]:lx(u,f,"end",Math.min)}})}}return a}function bp(n,e,t,s){if(s)return;let i=e[n],r=t[n];return n==="angle"&&(i=zs(i),r=zs(r)),{property:n,start:i,end:r}}function W6(n,e){const{x:t=null,y:s=null}=n||{},i=e.points,r=[];return e.segments.forEach(({start:a,end:o})=>{o=rf(a,o,i);const c=i[a],d=i[o];s!==null?(r.push({x:c.x,y:s}),r.push({x:d.x,y:s})):t!==null&&(r.push({x:t,y:c.y}),r.push({x:t,y:d.y}))}),r}function rf(n,e,t){for(;e>n;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function lx(n,e,t,s){return n&&e?s(n[t],e[t]):n?n[t]:e?e[t]:0}function Nw(n,e){let t=[],s=!1;return jn(n)?(s=!0,t=n):t=W6(n,e),t.length?new sf({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function cx(n){return n&&n.fill!==!1}function U6(n,e,t){let i=n[e].fill;const r=[e];let a;if(!t)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!zn(i))return i;if(a=n[i],!a)return!1;if(a.visible)return i;r.push(i),i=a.fill}return!1}function q6(n,e,t){const s=Y6(n);if(Ut(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return zn(i)&&Math.floor(i)===i?V6(s[0],e,i,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function V6(n,e,t,s){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=s?!1:t}function H6(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ut(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function G6(n,e,t){let s;return n==="start"?s=t:n==="end"?s=e.options.reverse?e.min:e.max:Ut(n)?s=n.value:s=e.getBaseValue(),s}function Y6(n){const e=n.options,t=e.fill;let s=jt(t&&t.target,t);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Z6(n){const{scale:e,index:t,line:s}=n,i=[],r=s.segments,a=s.points,o=K6(e,t);o.push(Nw({x:null,y:e.bottom},s));for(let c=0;c<r.length;c++){const d=r[c];for(let u=d.start;u<=d.end;u++)X6(i,a[u],o)}return new sf({points:i,options:{}})}function K6(n,e){const t=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function X6(n,e,t){const s=[];for(let i=0;i<t.length;i++){const r=t[i],{first:a,last:o,point:c}=Q6(r,e,"x");if(!(!c||a&&o)){if(a)s.unshift(c);else if(n.push(c),!o)break}}n.push(...s)}function Q6(n,e,t){const s=n.interpolate(e,t);if(!s)return{};const i=s[t],r=n.segments,a=n.points;let o=!1,c=!1;for(let d=0;d<r.length;d++){const u=r[d],h=a[u.start][t],m=a[u.end][t];if(ga(i,h,m)){o=i===h,c=i===m;break}}return{first:o,last:c,point:s}}class kw{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:i,y:r,radius:a}=this;return t=t||{start:0,end:bn},e.arc(i,r,a,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function J6(n){const{chart:e,fill:t,line:s}=n;if(zn(t))return eP(e,t);if(t==="stack")return Z6(n);if(t==="shape")return!0;const i=tP(n);return i instanceof kw?i:Nw(i,s)}function eP(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function tP(n){return(n.scale||{}).getPointPositionForValue?sP(n):nP(n)}function nP(n){const{scale:e={},fill:t}=n,s=H6(t,e);if(zn(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function sP(n){const{scale:e,fill:t}=n,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,a=G6(t,e,r),o=[];if(s.grid.circular){const c=e.getPointPositionForValue(0,r);return new kw({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<i;++c)o.push(e.getPointPositionForValue(c,a));return o}function fm(n,e,t){const s=J6(e),{chart:i,index:r,line:a,scale:o,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:m=h,below:f=h}=u||{},y=i.getDatasetMeta(r),x=ew(i,y);s&&a.points.length&&(Qh(n,t),iP(n,{line:a,target:s,above:m,below:f,area:t,scale:o,axis:c,clip:x}),Jh(n))}function iP(n,e){const{line:t,target:s,above:i,below:r,area:a,scale:o,clip:c}=e,d=t._loop?"angle":e.axis;n.save();let u=r;r!==i&&(d==="x"?(dx(n,s,a.top),mm(n,{line:t,target:s,color:i,scale:o,property:d,clip:c}),n.restore(),n.save(),dx(n,s,a.bottom)):d==="y"&&(ux(n,s,a.left),mm(n,{line:t,target:s,color:r,scale:o,property:d,clip:c}),n.restore(),n.save(),ux(n,s,a.right),u=i)),mm(n,{line:t,target:s,color:u,scale:o,property:d,clip:c}),n.restore()}function dx(n,e,t){const{segments:s,points:i}=e;let r=!0,a=!1;n.beginPath();for(const o of s){const{start:c,end:d}=o,u=i[c],h=i[rf(c,d,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function ux(n,e,t){const{segments:s,points:i}=e;let r=!0,a=!1;n.beginPath();for(const o of s){const{start:c,end:d}=o,u=i[c],h=i[rf(c,d,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(t,h.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function mm(n,e){const{line:t,target:s,property:i,color:r,scale:a,clip:o}=e,c=$6(t,s,i);for(const{source:d,target:u,start:h,end:m}of c){const{style:{backgroundColor:f=r}={}}=d,y=s!==!0;n.save(),n.fillStyle=f,rP(n,a,o,y&&bp(i,h,m)),n.beginPath();const x=!!t.pathSegment(n,d);let v;if(y){x?n.closePath():hx(n,s,m,i);const w=!!s.pathSegment(n,u,{move:x,reverse:!0});v=x&&w,v||hx(n,s,h,i)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function rP(n,e,t,s){const i=e.chart.chartArea,{property:r,start:a,end:o}=s||{};if(r==="x"||r==="y"){let c,d,u,h;r==="x"?(c=a,d=i.top,u=o,h=i.bottom):(c=i.left,d=a,u=i.right,h=o),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),d=Math.max(d,t.top),h=Math.min(h,t.bottom)),n.rect(c,d,u-c,h-d),n.clip()}}function hx(n,e,t,s){const i=e.interpolate(t,s);i&&n.lineTo(i.x,i.y)}var aP={id:"filler",afterDatasetsUpdate(n,e,t){const s=(n.data.datasets||[]).length,i=[];let r,a,o,c;for(a=0;a<s;++a)r=n.getDatasetMeta(a),o=r.dataset,c=null,o&&o.options&&o instanceof sf&&(c={visible:n.isDatasetVisible(a),index:a,fill:q6(o,a,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=c,i.push(c);for(a=0;a<s;++a)c=i[a],!(!c||c.fill===!1)&&(c.fill=U6(i,a,t.propagate))},beforeDraw(n,e,t){const s=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(r,o.axis),s&&o.fill&&fm(n.ctx,o,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;cx(r)&&fm(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const s=e.meta.$filler;!cx(s)||t.drawTime!=="beforeDatasetDraw"||fm(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fx=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},oP=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class mx extends Na{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=kt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=fs(s.font),r=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=fx(s,r);let d,u;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,r,o,c)+10):(u=this.maxHeight,d=this._fitCols(a,i,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:r,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+o;let h=e;r.textAlign="left",r.textBaseline="middle";let m=-1,f=-u;return this.legendItems.forEach((y,x)=>{const v=s+t/2+r.measureText(y.text).width;(x===0||d[d.length-1]+v+2*o>a)&&(h+=u,d[d.length-(x>0?0:1)]=0,f+=u,m++),c[x]={left:0,top:f,row:m,width:v,height:i},d[d.length-1]+=v+o}),h}_fitCols(e,t,s,i){const{ctx:r,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=o,m=0,f=0,y=0,x=0;return this.legendItems.forEach((v,w)=>{const{itemWidth:j,itemHeight:C}=lP(s,t,r,v,i);w>0&&f+C+2*o>u&&(h+=m+o,d.push({width:m,height:f}),y+=m+o,x++,m=f=0),c[w]={left:y,top:f,col:x,width:j,height:C},m=Math.max(m,j),f+=C+o}),h+=m,d.push({width:m,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:r}}=this,a=Ol(r,this.left,this.width);if(this.isHorizontal()){let o=0,c=Os(s,this.left+i,this.right-this.lineWidths[o]);for(const d of t)o!==d.row&&(o=d.row,c=Os(s,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+e+i,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+i}else{let o=0,c=Os(s,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const d of t)d.col!==o&&(o=d.col,c=Os(s,this.top+e+i,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+i,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Qh(e,this),this._draw(),Jh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:r,labels:a}=e,o=_n.color,c=Ol(e.rtl,this.left,this.width),d=fs(a.font),{padding:u}=a,h=d.size,m=h/2;let f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:y,boxHeight:x,itemHeight:v}=fx(a,h),w=function(L,M,T){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;i.save();const k=jt(T.lineWidth,1);if(i.fillStyle=jt(T.fillStyle,o),i.lineCap=jt(T.lineCap,"butt"),i.lineDashOffset=jt(T.lineDashOffset,0),i.lineJoin=jt(T.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=jt(T.strokeStyle,o),i.setLineDash(jt(T.lineDash,[])),a.usePointStyle){const z={radius:x*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:k},_=c.xPlus(L,y/2),E=M+m;$2(i,z,_,E,a.pointStyleWidth&&y)}else{const z=M+Math.max((h-x)/2,0),_=c.leftForLtr(L,y),E=Io(T.borderRadius);i.beginPath(),Object.values(E).some($=>$!==0)?bd(i,{x:_,y:z,w:y,h:x,radius:E}):i.rect(_,z,y,x),i.fill(),k!==0&&i.stroke()}i.restore()},j=function(L,M,T){$o(i,T.text,L,M+v/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},C=this.isHorizontal(),N=this._computeTitleHeight();C?f={x:Os(r,this.left+u,this.right-s[0]),y:this.top+u+N,line:0}:f={x:this.left+u,y:Os(r,this.top+N+u,this.bottom-t[0].height),line:0},Z2(this.ctx,e.textDirection);const P=v+u;this.legendItems.forEach((L,M)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const T=i.measureText(L.text).width,k=c.textAlign(L.textAlign||(L.textAlign=a.textAlign)),z=y+m+T;let _=f.x,E=f.y;c.setWidth(this.width),C?M>0&&_+z+u>this.right&&(E=f.y+=P,f.line++,_=f.x=Os(r,this.left+u,this.right-s[f.line])):M>0&&E+P>this.bottom&&(_=f.x=_+t[f.line].width+u,f.line++,E=f.y=Os(r,this.top+N+u,this.bottom-t[f.line].height));const $=c.x(_);if(w($,E,L),_=w3(k,_+y+m,C?_+z:this.right,e.rtl),j(c.x(_),E,L),C)f.x+=z+u;else if(typeof L.text!="string"){const I=d.lineHeight;f.y+=jw(L,I)+u}else f.y+=P}),K2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=fs(t.font),i=Ws(t.padding);if(!t.display)return;const r=Ol(e.rtl,this.left,this.width),a=this.ctx,o=t.position,c=s.size/2,d=i.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=Os(e.align,h,this.right-m);else{const y=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);u=d+Os(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const f=Os(o,h,h+m);a.textAlign=r.textAlign(wg(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=s.string,$o(a,t.text,f,u,s)}_computeTitleHeight(){const e=this.options.title,t=fs(e.font),s=Ws(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,r;if(ga(e,this.left,this.right)&&ga(t,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],ga(e,i.left,i.left+i.width)&&ga(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!uP(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=oP(i,s);i&&!r&&kt(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&kt(t.onHover,[e,s,this],this)}else s&&kt(t.onClick,[e,s,this],this)}}function lP(n,e,t,s,i){const r=cP(s,n,e,t),a=dP(i,s,e.lineHeight);return{itemWidth:r,itemHeight:a}}function cP(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,a)=>r.length>a.length?r:a)),e+t.size/2+s.measureText(i).width}function dP(n,e,t){let s=n;return typeof e.text!="string"&&(s=jw(e,t)),s}function jw(n,e){const t=n.text?n.text.length:0;return e*t}function uP(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var hP={id:"legend",_element:mx,start(n,e,t){const s=n.legend=new mx({ctx:n.ctx,options:t,chart:n});Bs.configure(n,s,t),Bs.addBox(n,s)},stop(n){Bs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;Bs.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:r,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=Ws(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Lg extends Na{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=jn(s.text)?s.text.length:1;this._padding=Ws(s.padding);const r=i*fs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:r,options:a}=this,o=a.align;let c=0,d,u,h;return this.isHorizontal()?(u=Os(o,s,r),h=t+e,d=r-s):(a.position==="left"?(u=s+e,h=Os(o,i,t),c=Qt*-.5):(u=r-e,h=Os(o,t,i),c=Qt*.5),d=i-t),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=fs(t.font),r=s.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(r);$o(e,t.text,0,0,s,{color:t.color,maxWidth:c,rotation:d,textAlign:wg(t.align),textBaseline:"middle",translation:[a,o]})}}function fP(n,e){const t=new Lg({ctx:n.ctx,options:e,chart:n});Bs.configure(n,t,e),Bs.addBox(n,t),n.titleBlock=t}var mP={id:"title",_element:Lg,start(n,e,t){fP(n,t)},stop(n){const e=n.titleBlock;Bs.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;Bs.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bu=new WeakMap;var pP={id:"subtitle",start(n,e,t){const s=new Lg({ctx:n.ctx,options:t,chart:n});Bs.configure(n,s,t),Bs.addBox(n,s),bu.set(n,s)},stop(n){Bs.removeBox(n,bu.get(n)),bu.delete(n)},beforeUpdate(n,e,t){const s=bu.get(n);Bs.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zc={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,r=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();s.add(c.x),i+=c.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((o,c)=>o+c)/s.size,y:i/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,a,o;for(r=0,a=n.length;r<a;++r){const c=n[r].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=fp(e,d);u<i&&(i=u,o=c)}}if(o){const c=o.tooltipPosition();t=c.x,s=c.y}return{x:t,y:s}}};function Er(n,e){return e&&(jn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function da(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function gP(n,e){const{element:t,datasetIndex:s,index:i}=e,r=n.getDatasetMeta(s).controller,{label:a,value:o}=r.getLabelAndValue(i);return{chart:n,label:a,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:o,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function px(n,e){const t=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:a,boxHeight:o}=e,c=fs(e.bodyFont),d=fs(e.titleFont),u=fs(e.footerFont),h=r.length,m=i.length,f=s.length,y=Ws(e.padding);let x=y.height,v=0,w=s.reduce((N,P)=>N+P.before.length+P.lines.length+P.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const N=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;x+=f*N+(w-f)*c.lineHeight+(w-1)*e.bodySpacing}m&&(x+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let j=0;const C=function(N){v=Math.max(v,t.measureText(N).width+j)};return t.save(),t.font=d.string,$t(n.title,C),t.font=c.string,$t(n.beforeBody.concat(n.afterBody),C),j=e.displayColors?a+2+e.boxPadding:0,$t(s,N=>{$t(N.before,C),$t(N.lines,C),$t(N.after,C)}),j=0,t.font=u.string,$t(n.footer,C),t.restore(),v+=y.width,{width:v,height:x}}function yP(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function xP(n,e,t,s){const{x:i,width:r}=s,a=t.caretSize+t.caretPadding;if(n==="left"&&i+r+a>e.width||n==="right"&&i-r-a<0)return!0}function vP(n,e,t,s){const{x:i,width:r}=t,{width:a,chartArea:{left:o,right:c}}=n;let d="center";return s==="center"?d=i<=(o+c)/2?"left":"right":i<=r/2?d="left":i>=a-r/2&&(d="right"),xP(d,n,e,t)&&(d="center"),d}function gx(n,e,t){const s=t.yAlign||e.yAlign||yP(n,t);return{xAlign:t.xAlign||e.xAlign||vP(n,e,t,s),yAlign:s}}function bP(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function wP(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function yx(n,e,t,s){const{caretSize:i,caretPadding:r,cornerRadius:a}=n,{xAlign:o,yAlign:c}=t,d=i+r,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:f}=Io(a);let y=bP(e,o);const x=wP(e,c,d);return c==="center"?o==="left"?y+=d:o==="right"&&(y-=d):o==="left"?y-=Math.max(u,m)+i:o==="right"&&(y+=Math.max(h,f)+i),{x:vs(y,0,s.width-e.width),y:vs(x,0,s.height-e.height)}}function wu(n,e,t){const s=Ws(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function xx(n){return Er([],da(n))}function SP(n,e,t){return ro(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function vx(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const _w={beforeTitle:ia,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:ia,beforeBody:ia,beforeLabel:ia,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Wt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ia,afterBody:ia,beforeFooter:ia,footer:ia,afterFooter:ia};function pi(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?_w[e].call(t,s):i}let bx=class extends Na{static positioners=Zc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,r=new tw(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=SP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=pi(s,"beforeTitle",this,e),r=pi(s,"title",this,e),a=pi(s,"afterTitle",this,e);let o=[];return o=Er(o,da(i)),o=Er(o,da(r)),o=Er(o,da(a)),o}getBeforeBody(e,t){return xx(pi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return $t(e,r=>{const a={before:[],lines:[],after:[]},o=vx(s,r);Er(a.before,da(pi(o,"beforeLabel",this,r))),Er(a.lines,pi(o,"label",this,r)),Er(a.after,da(pi(o,"afterLabel",this,r))),i.push(a)}),i}getAfterBody(e,t){return xx(pi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=pi(s,"beforeFooter",this,e),r=pi(s,"footer",this,e),a=pi(s,"afterFooter",this,e);let o=[];return o=Er(o,da(i)),o=Er(o,da(r)),o=Er(o,da(a)),o}_createItems(e){const t=this._active,s=this.chart.data,i=[],r=[],a=[];let o=[],c,d;for(c=0,d=t.length;c<d;++c)o.push(gP(this.chart,t[c]));return e.filter&&(o=o.filter((u,h,m)=>e.filter(u,h,m,s))),e.itemSort&&(o=o.sort((u,h)=>e.itemSort(u,h,s))),$t(o,u=>{const h=vx(e.callbacks,u);i.push(pi(h,"labelColor",this,u)),r.push(pi(h,"labelPointStyle",this,u)),a.push(pi(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let r,a=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const o=Zc[s.position].call(this,i,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=px(this,s),d=Object.assign({},o,c),u=gx(this.chart,s,d),h=yx(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const r=this.getCaretPosition(e,s,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:r}=this,{caretSize:a,cornerRadius:o}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Io(o),{x:m,y:f}=e,{width:y,height:x}=t;let v,w,j,C,N,P;return r==="center"?(N=f+x/2,i==="left"?(v=m,w=v-a,C=N+a,P=N-a):(v=m+y,w=v+a,C=N-a,P=N+a),j=v):(i==="left"?w=m+Math.max(c,u)+a:i==="right"?w=m+y-Math.max(d,h)-a:w=this.caretX,r==="top"?(C=f,N=C-a,v=w-a,j=w+a):(C=f+x,N=C+a,v=w+a,j=w-a),P=C),{x1:v,x2:w,x3:j,y1:C,y2:N,y3:P}}drawTitle(e,t,s){const i=this.title,r=i.length;let a,o,c;if(r){const d=Ol(s.rtl,this.x,this.width);for(e.x=wu(this,s.titleAlign,s),t.textAlign=d.textAlign(s.titleAlign),t.textBaseline="middle",a=fs(s.titleFont),o=s.titleSpacing,t.fillStyle=s.titleColor,t.font=a.string,c=0;c<r;++c)t.fillText(i[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===r&&(e.y+=s.titleMarginBottom-o)}}_drawColorBox(e,t,s,i,r){const a=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=r,u=fs(r.bodyFont),h=wu(this,"left",r),m=i.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,y=t.y+f;if(r.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=i.leftForLtr(m,d)+d/2,w=y+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,pp(e,x,v,w),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,pp(e,x,v,w)}else{e.lineWidth=Ut(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const x=i.leftForLtr(m,d),v=i.leftForLtr(i.xPlus(m,1),d-2),w=Io(a.borderRadius);Object.values(w).some(j=>j!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,bd(e,{x,y,w:d,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),bd(e,{x:v,y:y+1,w:d-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,y,d,c),e.strokeRect(x,y,d,c),e.fillStyle=a.backgroundColor,e.fillRect(v,y+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:r,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=fs(s.bodyFont);let m=h.lineHeight,f=0;const y=Ol(s.rtl,this.x,this.width),x=function(T){t.fillText(T,y.x(e.x+f),e.y+m/2),e.y+=m+r},v=y.textAlign(a);let w,j,C,N,P,L,M;for(t.textAlign=a,t.textBaseline="middle",t.font=h.string,e.x=wu(this,v,s),t.fillStyle=s.bodyColor,$t(this.beforeBody,x),f=o&&v!=="right"?a==="center"?d/2+u:d+2+u:0,N=0,L=i.length;N<L;++N){for(w=i[N],j=this.labelTextColors[N],t.fillStyle=j,$t(w.before,x),C=w.lines,o&&C.length&&(this._drawColorBox(t,e,N,y,s),m=Math.max(h.lineHeight,c)),P=0,M=C.length;P<M;++P)x(C[P]),m=h.lineHeight;$t(w.after,x)}f=0,m=h.lineHeight,$t(this.afterBody,x),e.y-=r}drawFooter(e,t,s){const i=this.footer,r=i.length;let a,o;if(r){const c=Ol(s.rtl,this.x,this.width);for(e.x=wu(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=c.textAlign(s.footerAlign),t.textBaseline="middle",a=fs(s.footerFont),t.fillStyle=s.footerColor,t.font=a.string,o=0;o<r;++o)t.fillText(i[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:r,yAlign:a}=this,{x:o,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:m,bottomLeft:f,bottomRight:y}=Io(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+h,c),a==="top"&&this.drawCaret(e,t,s,i),t.lineTo(o+d-m,c),t.quadraticCurveTo(o+d,c,o+d,c+m),a==="center"&&r==="right"&&this.drawCaret(e,t,s,i),t.lineTo(o+d,c+u-y),t.quadraticCurveTo(o+d,c+u,o+d-y,c+u),a==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(o+f,c+u),t.quadraticCurveTo(o,c+u,o,c+u-f),a==="center"&&r==="left"&&this.drawCaret(e,t,s,i),t.lineTo(o,c+h),t.quadraticCurveTo(o,c,o+h,c),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const a=Zc[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=px(this,e),c=Object.assign({},a,this._size),d=gx(t,e,c),u=yx(e,c,d,t);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=Ws(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,t),Z2(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),K2(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),r=!gh(s,i),a=this._positionChanged(i,t);(r||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,s),o=this._positionChanged(a,e),c=t||!gh(a,r)||o;return c&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:s,caretY:i,options:r}=this,a=Zc[r.position].call(this,e,t);return a!==!1&&(s!==a.x||i!==a.y)}};var NP={id:"tooltip",_element:bx,positioners:Zc,afterInit(n,e,t){t&&(n.tooltip=new bx({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_w},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},kP=Object.freeze({__proto__:null,Colors:R6,Decimation:B6,Filler:aP,Legend:hP,SubTitle:pP,Title:mP,Tooltip:NP});const jP=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function _P(n,e,t,s){const i=n.indexOf(e);if(i===-1)return jP(n,e,t,s);const r=n.lastIndexOf(e);return i!==r?t:i}const CP=(n,e)=>n===null?null:vs(Math.round(n),0,e);function wx(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class AP extends Go{static id="category";static defaults={ticks:{callback:wx}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:r}of t)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Wt(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:_P(s,e,jt(t,e),this._addedLabels),CP(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return wx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function PP(n,e){const t=[],{bounds:i,step:r,min:a,max:o,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:m}=n,f=r||1,y=u-1,{min:x,max:v}=e,w=!Wt(a),j=!Wt(o),C=!Wt(d),N=(v-x)/(h+1);let P=py((v-x)/y/f)*f,L,M,T,k;if(P<1e-14&&!w&&!j)return[{value:x},{value:v}];k=Math.ceil(v/P)-Math.floor(x/P),k>y&&(P=py(k*P/y/f)*f),Wt(c)||(L=Math.pow(10,c),P=Math.ceil(P*L)/L),i==="ticks"?(M=Math.floor(x/P)*P,T=Math.ceil(v/P)*P):(M=x,T=v),w&&j&&r&&m3((o-a)/r,P/1e3)?(k=Math.round(Math.min((o-a)/P,u)),P=(o-a)/k,M=a,T=o):C?(M=w?a:M,T=j?o:T,k=d-1,P=(T-M)/k):(k=(T-M)/P,Eo(k,Math.round(k),P/1e3)?k=Math.round(k):k=Math.ceil(k));const z=Math.max(gy(P),gy(M));L=Math.pow(10,Wt(c)?z:c),M=Math.round(M*L)/L,T=Math.round(T*L)/L;let _=0;for(w&&(m&&M!==a?(t.push({value:a}),M<a&&_++,Eo(Math.round((M+_*P)*L)/L,a,Sx(a,N,n))&&_++):M<a&&_++);_<k;++_){const E=Math.round((M+_*P)*L)/L;if(j&&E>o)break;t.push({value:E})}return j&&m&&T!==o?t.length&&Eo(t[t.length-1].value,o,Sx(o,N,n))?t[t.length-1].value=o:t.push({value:o}):(!j||T===o)&&t.push({value:T}),t}function Sx(n,e,{horizontal:t,minRotation:s}){const i=mr(s),r=(t?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+n).length;return Math.min(e/r,a)}class Nh extends Go{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const a=c=>i=t?i:c,o=c=>r=s?r:c;if(e){const c=Zi(i),d=Zi(r);c<0&&d<0?o(0):c>0&&d>0&&a(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);o(r+c),e||a(i-c)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,a=PP(i,r);return e.bounds==="ticks"&&T2(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Id(e,this.chart.options.locale,this.options.ticks.format)}}class LP extends Nh{static id="linear";static defaults={ticks:{callback:Xh.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zn(e)?e:0,this.max=zn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=mr(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Sd=n=>Math.floor(Ga(n)),Ao=(n,e)=>Math.pow(10,Sd(n)+e);function Nx(n){return n/Math.pow(10,Sd(n))===1}function kx(n,e,t){const s=Math.pow(10,t),i=Math.floor(n/s);return Math.ceil(e/s)-i}function MP(n,e){const t=e-n;let s=Sd(t);for(;kx(n,e,s)>10;)s++;for(;kx(n,e,s)<10;)s--;return Math.min(s,Sd(n))}function TP(n,{min:e,max:t}){e=Ei(n.min,e);const s=[],i=Sd(e);let r=MP(e,t),a=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),c=i>r?Math.pow(10,i):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,r)),m=Ei(n.min,Math.round((c+u+h*Math.pow(10,r))*a)/a);for(;m<t;)s.push({value:m,major:Nx(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,a=r>=0?1:a),m=Math.round((c+u+h*Math.pow(10,r))*a)/a;const f=Ei(n.max,m);return s.push({value:f,major:Nx(f),significand:h}),s}class DP extends Go{static id="logarithmic";static defaults={ticks:{callback:Xh.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=Nh.prototype.parse.apply(this,[e,t]);if(s===0){this._zero=!0;return}return zn(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zn(e)?Math.max(0,e):null,this.max=zn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zn(this._userMin)&&(this.min=e===Ao(this.min,0)?Ao(this.min,-1):Ao(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,i=this.max;const r=o=>s=e?s:o,a=o=>i=t?i:o;s===i&&(s<=0?(r(1),a(10)):(r(Ao(s,-1)),a(Ao(i,1)))),s<=0&&r(Ao(i,-1)),i<=0&&a(Ao(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},s=TP(t,this);return e.bounds==="ticks"&&T2(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":Id(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ga(e),this._valueRange=Ga(this.max)-Ga(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ga(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wp(n){const e=n.ticks;if(e.display&&n.display){const t=Ws(e.backdropPadding);return jt(e.font&&e.font.size,_n.font.size)+t.height}return 0}function EP(n,e,t){return t=jn(t)?t:[t],{w:M3(n,e.string,t),h:t.length*e.lineHeight}}function jx(n,e,t,s,i){return n===s||n===i?{start:e-t/2,end:e+t/2}:n<s||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function IP(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),s=[],i=[],r=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?Qt/r:0;for(let c=0;c<r;c++){const d=a.setContext(n.getPointLabelContext(c));i[c]=d.padding;const u=n.getPointPosition(c,n.drawingArea+i[c],o),h=fs(d.font),m=EP(n.ctx,h,n._pointLabels[c]);s[c]=m;const f=zs(n.getIndexAngle(c)+o),y=Math.round(vg(f)),x=jx(y,u.x,m.w,0,180),v=jx(y,u.y,m.h,90,270);RP(t,e,f,x,v)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=zP(n,s,i)}function RP(n,e,t,s,i){const r=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,c=0;s.start<e.l?(o=(e.l-s.start)/r,n.l=Math.min(n.l,e.l-o)):s.end>e.r&&(o=(s.end-e.r)/r,n.r=Math.max(n.r,e.r+o)),i.start<e.t?(c=(e.t-i.start)/a,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/a,n.b=Math.max(n.b,e.b+c))}function OP(n,e,t){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:a,size:o}=t,c=n.getPointPosition(e,s+i+a,r),d=Math.round(vg(zs(c.angle+Zn))),u=WP(c.y,o.h,d),h=BP(d),m=$P(c.x,o.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:m,top:u,right:m+o.w,bottom:u+o.h}}function FP(n,e){if(!e)return!0;const{left:t,top:s,right:i,bottom:r}=n;return!(zr({x:t,y:s},e)||zr({x:t,y:r},e)||zr({x:i,y:s},e)||zr({x:i,y:r},e))}function zP(n,e,t){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:a,display:o}=r.pointLabels,c={extra:wp(r)/2,additionalAngle:a?Qt/i:0};let d;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];const h=OP(n,u,c);s.push(h),o==="auto"&&(h.visible=FP(h,d),h.visible&&(d=h))}return s}function BP(n){return n===0||n===180?"center":n<180?"left":"right"}function $P(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function WP(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function UP(n,e,t){const{left:s,top:i,right:r,bottom:a}=t,{backdropColor:o}=e;if(!Wt(o)){const c=Io(e.borderRadius),d=Ws(e.backdropPadding);n.fillStyle=o;const u=s-d.left,h=i-d.top,m=r-s+d.width,f=a-i+d.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),bd(n,{x:u,y:h,w:m,h:f,radius:c}),n.fill()):n.fillRect(u,h,m,f)}}function qP(n,e){const{ctx:t,options:{pointLabels:s}}=n;for(let i=e-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const a=s.setContext(n.getPointLabelContext(i));UP(t,a,r);const o=fs(a.font),{x:c,y:d,textAlign:u}=r;$o(t,n._pointLabels[i],c,d+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function Cw(n,e,t,s){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,bn);else{let r=n.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let a=1;a<s;a++)r=n.getPointPosition(a,e),i.lineTo(r.x,r.y)}}function VP(n,e,t,s,i){const r=n.ctx,a=e.circular,{color:o,lineWidth:c}=e;!a&&!s||!o||!c||t<0||(r.save(),r.strokeStyle=o,r.lineWidth=c,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),Cw(n,t,a,s),r.closePath(),r.stroke(),r.restore())}function HP(n,e,t){return ro(n,{label:t,index:e,type:"pointLabel"})}class GP extends Nh{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ws(wp(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=zn(e)&&!isNaN(e)?e:0,this.max=zn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wp(this.options))}generateTickLabels(e){Nh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,s)=>{const i=kt(this.options.pointLabels.callback,[t,s],this);return i||i===0?i:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?IP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,i))}getIndexAngle(e){const t=bn/(this._pointLabels.length||1),s=this.options.startAngle||0;return zs(e*t+mr(s))}getDistanceFromCenterForValue(e){if(Wt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Wt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return HP(this.getContext(),e,s)}}getPointPosition(e,t,s=0){const i=this.getIndexAngle(e)-Zn+s;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Cw(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:i,border:r}=t,a=this._pointLabels.length;let o,c,d;if(t.pointLabels.display&&qP(this,a),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(h),f=i.setContext(m),y=r.setContext(m);VP(this,f,c,a,y)}}),s.display){for(e.save(),o=a-1;o>=0;o--){const u=s.setContext(this.getPointLabelContext(o)),{color:h,lineWidth:m}=u;!m||!h||(e.lineWidth=m,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const d=s.setContext(this.getContext(c)),u=fs(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const h=Ws(d.backdropPadding);e.fillRect(-a/2-h.left,-r-u.size/2-h.top,a+h.width,u.size+h.height)}$o(e,o.label,0,-r,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const af={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xi=Object.keys(af);function _x(n,e){return n-e}function Cx(n,e){if(Wt(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let a=e;return typeof s=="function"&&(a=s(a)),zn(a)||(a=typeof s=="string"?t.parse(a,s):t.parse(a)),a===null?null:(i&&(a=i==="week"&&(Yl(r)||r===!0)?t.startOf(a,"isoWeek",r):t.startOf(a,i)),+a)}function Ax(n,e,t,s){const i=xi.length;for(let r=xi.indexOf(n);r<i-1;++r){const a=af[xi[r]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=s)return xi[r]}return xi[i-1]}function YP(n,e,t,s,i){for(let r=xi.length-1;r>=xi.indexOf(t);r--){const a=xi[r];if(af[a].common&&n._adapter.diff(i,s,a)>=e-1)return a}return xi[t?xi.indexOf(t):0]}function ZP(n){for(let e=xi.indexOf(n)+1,t=xi.length;e<t;++e)if(af[xi[e]].common)return xi[e]}function Px(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=bg(t,e),r=t[s]>=e?t[s]:t[i];n[r]=!0}}function KP(n,e,t,s){const i=n._adapter,r=+i.startOf(e[0].value,s),a=e[e.length-1].value;let o,c;for(o=r;o<=a;o=+i.add(o,1,s))c=t[o],c>=0&&(e[c].major=!0);return e}function Lx(n,e,t){const s=[],i={},r=e.length;let a,o;for(a=0;a<r;++a)o=e[a],i[o]=a,s.push({value:o,major:!1});return r===0||!t?s:KP(n,s,i,t)}class Sp extends Go{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new XC._date(e.adapters.date);i.init(t),Xc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Cx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=zn(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),r=zn(r)&&!isNaN(r)?r:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,a=this.max,o=x3(i,r,a);return this._unit=t.unit||(s.autoSkip?Ax(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):YP(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:ZP(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),Lx(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=vs(t,0,a),s=vs(s,0,a),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,r=i.time,a=r.unit||Ax(r.minUnit,t,s,this._getLabelCapacity(t)),o=jt(i.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,d=Yl(c)||c===!0,u={};let h=t,m,f;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(s,t,a)>1e5*o)throw new Error(t+" and "+s+" are too far apart with stepSize of "+o+" "+a);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=h,f=0;m<s;m=+e.add(m,o,a),f++)Px(u,m,y);return(m===s||i.bounds==="ticks"||f===1)&&Px(u,m,y),Object.keys(u).sort(_x).map(x=>+x)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,a=t||i[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,s,i){const r=this.options,a=r.ticks.callback;if(a)return kt(a,[e,t,s],this);const o=r.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],h=d&&o[d],m=s[t],f=d&&h&&m&&m.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=mr(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:s*r+o*a,h:s*a+o*r}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,r=this._tickFormatFunction(e,0,Lx(this,[e],this._majorUnit),i),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(Cx(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return I2(e.sort(_x))}}function Su(n,e,t){let s=0,i=n.length-1,r,a,o,c;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=ya(n,"pos",e)),{pos:r,time:o}=n[s],{pos:a,time:c}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=ya(n,"time",e)),{time:r,pos:o}=n[s],{time:a,pos:c}=n[i]);const d=a-r;return d?o+(c-o)*(e-r)/d:o}class XP extends Sp{static id="timeseries";static defaults=Sp.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Su(t,this.min),this._tableRange=Su(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],r=[];let a,o,c,d,u;for(a=0,o=e.length;a<o;++a)d=e[a],d>=t&&d<=s&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(a=0,o=i.length;a<o;++a)u=i[a+1],c=i[a-1],d=i[a],Math.round((u+c)/2)!==d&&r.push({time:d,pos:a/(o-1)});return r}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Su(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Su(this._table,s*this._tableRange+this._minPos,!0)}}var QP=Object.freeze({__proto__:null,CategoryScale:AP,LinearScale:LP,LogarithmicScale:DP,RadialLinearScale:GP,TimeScale:Sp,TimeSeriesScale:XP});const JP=[KC,P6,kP,QP];var pm={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var Mx;function eL(){return Mx||(Mx=1,(function(n){(function(e,t,s,i){var r=["","webkit","Moz","MS","ms","o"],a=t.createElement("div"),o="function",c=Math.round,d=Math.abs,u=Date.now;function h(U,Y,re){return setTimeout(C(U,re),Y)}function m(U,Y,re){return Array.isArray(U)?(f(U,re[Y],re),!0):!1}function f(U,Y,re){var we;if(U)if(U.forEach)U.forEach(Y,re);else if(U.length!==i)for(we=0;we<U.length;)Y.call(re,U[we],we,U),we++;else for(we in U)U.hasOwnProperty(we)&&Y.call(re,U[we],we,U)}function y(U,Y,re){var we="DEPRECATED METHOD: "+Y+`
`+re+` AT 
`;return function(){var Oe=new Error("get-stack-trace"),Xe=Oe&&Oe.stack?Oe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Rt=e.console&&(e.console.warn||e.console.log);return Rt&&Rt.call(e.console,we,Xe),U.apply(this,arguments)}}var x;typeof Object.assign!="function"?x=function(Y){if(Y===i||Y===null)throw new TypeError("Cannot convert undefined or null to object");for(var re=Object(Y),we=1;we<arguments.length;we++){var Oe=arguments[we];if(Oe!==i&&Oe!==null)for(var Xe in Oe)Oe.hasOwnProperty(Xe)&&(re[Xe]=Oe[Xe])}return re}:x=Object.assign;var v=y(function(Y,re,we){for(var Oe=Object.keys(re),Xe=0;Xe<Oe.length;)(!we||we&&Y[Oe[Xe]]===i)&&(Y[Oe[Xe]]=re[Oe[Xe]]),Xe++;return Y},"extend","Use `assign`."),w=y(function(Y,re){return v(Y,re,!0)},"merge","Use `assign`.");function j(U,Y,re){var we=Y.prototype,Oe;Oe=U.prototype=Object.create(we),Oe.constructor=U,Oe._super=we,re&&x(Oe,re)}function C(U,Y){return function(){return U.apply(Y,arguments)}}function N(U,Y){return typeof U==o?U.apply(Y&&Y[0]||i,Y):U}function P(U,Y){return U===i?Y:U}function L(U,Y,re){f(z(Y),function(we){U.addEventListener(we,re,!1)})}function M(U,Y,re){f(z(Y),function(we){U.removeEventListener(we,re,!1)})}function T(U,Y){for(;U;){if(U==Y)return!0;U=U.parentNode}return!1}function k(U,Y){return U.indexOf(Y)>-1}function z(U){return U.trim().split(/\s+/g)}function _(U,Y,re){if(U.indexOf&&!re)return U.indexOf(Y);for(var we=0;we<U.length;){if(re&&U[we][re]==Y||!re&&U[we]===Y)return we;we++}return-1}function E(U){return Array.prototype.slice.call(U,0)}function $(U,Y,re){for(var we=[],Oe=[],Xe=0;Xe<U.length;){var Rt=U[Xe][Y];_(Oe,Rt)<0&&we.push(U[Xe]),Oe[Xe]=Rt,Xe++}return we=we.sort(function(gn,Sn){return gn[Y]>Sn[Y]}),we}function I(U,Y){for(var re,we,Oe=Y[0].toUpperCase()+Y.slice(1),Xe=0;Xe<r.length;){if(re=r[Xe],we=re?re+Oe:Y,we in U)return we;Xe++}return i}var J=1;function se(){return J++}function oe(U){var Y=U.ownerDocument||U;return Y.defaultView||Y.parentWindow||e}var F=/mobile|tablet|ip(ad|hone|od)|android/i,he="ontouchstart"in e,ke=I(e,"PointerEvent")!==i,ue=he&&F.test(navigator.userAgent),D="touch",V="pen",Z="mouse",ne="kinect",ae=25,ce=1,xe=2,me=4,Ne=8,Me=1,Ie=2,$e=4,Se=8,te=16,St=Ie|$e,xt=Se|te,mt=St|xt,ze=["x","y"],ee=["clientX","clientY"];function ie(U,Y){var re=this;this.manager=U,this.callback=Y,this.element=U.element,this.target=U.options.inputTarget,this.domHandler=function(we){N(U.options.enable,[U])&&re.handler(we)},this.init()}ie.prototype={handler:function(){},init:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(oe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(oe(this.element),this.evWin,this.domHandler)}};function ye(U){var Y,re=U.options.inputClass;return re?Y=re:ke?Y=Nt:ue?Y=si:he?Y=En:Y=Dt,new Y(U,Ce)}function Ce(U,Y,re){var we=re.pointers.length,Oe=re.changedPointers.length,Xe=Y&ce&&we-Oe===0,Rt=Y&(me|Ne)&&we-Oe===0;re.isFirst=!!Xe,re.isFinal=!!Rt,Xe&&(U.session={}),re.eventType=Y,Te(U,re),U.emit("hammer.input",re),U.recognize(re),U.session.prevInput=re}function Te(U,Y){var re=U.session,we=Y.pointers,Oe=we.length;re.firstInput||(re.firstInput=lt(Y)),Oe>1&&!re.firstMultiple?re.firstMultiple=lt(Y):Oe===1&&(re.firstMultiple=!1);var Xe=re.firstInput,Rt=re.firstMultiple,wn=Rt?Rt.center:Xe.center,gn=Y.center=Ze(we);Y.timeStamp=u(),Y.deltaTime=Y.timeStamp-Xe.timeStamp,Y.angle=Zt(wn,gn),Y.distance=Qe(wn,gn),je(re,Y),Y.offsetDirection=pt(Y.deltaX,Y.deltaY);var Sn=Ke(Y.deltaTime,Y.deltaX,Y.deltaY);Y.overallVelocityX=Sn.x,Y.overallVelocityY=Sn.y,Y.overallVelocity=d(Sn.x)>d(Sn.y)?Sn.x:Sn.y,Y.scale=Rt?nt(Rt.pointers,we):1,Y.rotation=Rt?Bt(Rt.pointers,we):0,Y.maxPointers=re.prevInput?Y.pointers.length>re.prevInput.maxPointers?Y.pointers.length:re.prevInput.maxPointers:Y.pointers.length,Fe(re,Y);var di=U.element;T(Y.srcEvent.target,di)&&(di=Y.srcEvent.target),Y.target=di}function je(U,Y){var re=Y.center,we=U.offsetDelta||{},Oe=U.prevDelta||{},Xe=U.prevInput||{};(Y.eventType===ce||Xe.eventType===me)&&(Oe=U.prevDelta={x:Xe.deltaX||0,y:Xe.deltaY||0},we=U.offsetDelta={x:re.x,y:re.y}),Y.deltaX=Oe.x+(re.x-we.x),Y.deltaY=Oe.y+(re.y-we.y)}function Fe(U,Y){var re=U.lastInterval||Y,we=Y.timeStamp-re.timeStamp,Oe,Xe,Rt,wn;if(Y.eventType!=Ne&&(we>ae||re.velocity===i)){var gn=Y.deltaX-re.deltaX,Sn=Y.deltaY-re.deltaY,di=Ke(we,gn,Sn);Xe=di.x,Rt=di.y,Oe=d(di.x)>d(di.y)?di.x:di.y,wn=pt(gn,Sn),U.lastInterval=Y}else Oe=re.velocity,Xe=re.velocityX,Rt=re.velocityY,wn=re.direction;Y.velocity=Oe,Y.velocityX=Xe,Y.velocityY=Rt,Y.direction=wn}function lt(U){for(var Y=[],re=0;re<U.pointers.length;)Y[re]={clientX:c(U.pointers[re].clientX),clientY:c(U.pointers[re].clientY)},re++;return{timeStamp:u(),pointers:Y,center:Ze(Y),deltaX:U.deltaX,deltaY:U.deltaY}}function Ze(U){var Y=U.length;if(Y===1)return{x:c(U[0].clientX),y:c(U[0].clientY)};for(var re=0,we=0,Oe=0;Oe<Y;)re+=U[Oe].clientX,we+=U[Oe].clientY,Oe++;return{x:c(re/Y),y:c(we/Y)}}function Ke(U,Y,re){return{x:Y/U||0,y:re/U||0}}function pt(U,Y){return U===Y?Me:d(U)>=d(Y)?U<0?Ie:$e:Y<0?Se:te}function Qe(U,Y,re){re||(re=ze);var we=Y[re[0]]-U[re[0]],Oe=Y[re[1]]-U[re[1]];return Math.sqrt(we*we+Oe*Oe)}function Zt(U,Y,re){re||(re=ze);var we=Y[re[0]]-U[re[0]],Oe=Y[re[1]]-U[re[1]];return Math.atan2(Oe,we)*180/Math.PI}function Bt(U,Y){return Zt(Y[1],Y[0],ee)+Zt(U[1],U[0],ee)}function nt(U,Y){return Qe(Y[0],Y[1],ee)/Qe(U[0],U[1],ee)}var _t={mousedown:ce,mousemove:xe,mouseup:me},Kt="mousedown",gt="mousemove mouseup";function Dt(){this.evEl=Kt,this.evWin=gt,this.pressed=!1,ie.apply(this,arguments)}j(Dt,ie,{handler:function(Y){var re=_t[Y.type];re&ce&&Y.button===0&&(this.pressed=!0),re&xe&&Y.which!==1&&(re=me),this.pressed&&(re&me&&(this.pressed=!1),this.callback(this.manager,re,{pointers:[Y],changedPointers:[Y],pointerType:Z,srcEvent:Y}))}});var Lt={pointerdown:ce,pointermove:xe,pointerup:me,pointercancel:Ne,pointerout:Ne},An={2:D,3:V,4:Z,5:ne},Dn="pointerdown",en="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Dn="MSPointerDown",en="MSPointerMove MSPointerUp MSPointerCancel");function Nt(){this.evEl=Dn,this.evWin=en,ie.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}j(Nt,ie,{handler:function(Y){var re=this.store,we=!1,Oe=Y.type.toLowerCase().replace("ms",""),Xe=Lt[Oe],Rt=An[Y.pointerType]||Y.pointerType,wn=Rt==D,gn=_(re,Y.pointerId,"pointerId");Xe&ce&&(Y.button===0||wn)?gn<0&&(re.push(Y),gn=re.length-1):Xe&(me|Ne)&&(we=!0),!(gn<0)&&(re[gn]=Y,this.callback(this.manager,Xe,{pointers:re,changedPointers:[Y],pointerType:Rt,srcEvent:Y}),we&&re.splice(gn,1))}});var Xt={touchstart:ce,touchmove:xe,touchend:me,touchcancel:Ne},Vr="touchstart",ps="touchstart touchmove touchend touchcancel";function Fi(){this.evTarget=Vr,this.evWin=ps,this.started=!1,ie.apply(this,arguments)}j(Fi,ie,{handler:function(Y){var re=Xt[Y.type];if(re===ce&&(this.started=!0),!!this.started){var we=zi.call(this,Y,re);re&(me|Ne)&&we[0].length-we[1].length===0&&(this.started=!1),this.callback(this.manager,re,{pointers:we[0],changedPointers:we[1],pointerType:D,srcEvent:Y})}}});function zi(U,Y){var re=E(U.touches),we=E(U.changedTouches);return Y&(me|Ne)&&(re=$(re.concat(we),"identifier")),[re,we]}var vt={touchstart:ce,touchmove:xe,touchend:me,touchcancel:Ne},Qi="touchstart touchmove touchend touchcancel";function si(){this.evTarget=Qi,this.targetIds={},ie.apply(this,arguments)}j(si,ie,{handler:function(Y){var re=vt[Y.type],we=ii.call(this,Y,re);we&&this.callback(this.manager,re,{pointers:we[0],changedPointers:we[1],pointerType:D,srcEvent:Y})}});function ii(U,Y){var re=E(U.touches),we=this.targetIds;if(Y&(ce|xe)&&re.length===1)return we[re[0].identifier]=!0,[re,re];var Oe,Xe,Rt=E(U.changedTouches),wn=[],gn=this.target;if(Xe=re.filter(function(Sn){return T(Sn.target,gn)}),Y===ce)for(Oe=0;Oe<Xe.length;)we[Xe[Oe].identifier]=!0,Oe++;for(Oe=0;Oe<Rt.length;)we[Rt[Oe].identifier]&&wn.push(Rt[Oe]),Y&(me|Ne)&&delete we[Rt[Oe].identifier],Oe++;if(wn.length)return[$(Xe.concat(wn),"identifier"),wn]}var ri=2500,mn=25;function En(){ie.apply(this,arguments);var U=C(this.handler,this);this.touch=new si(this.manager,U),this.mouse=new Dt(this.manager,U),this.primaryTouch=null,this.lastTouches=[]}j(En,ie,{handler:function(Y,re,we){var Oe=we.pointerType==D,Xe=we.pointerType==Z;if(!(Xe&&we.sourceCapabilities&&we.sourceCapabilities.firesTouchEvents)){if(Oe)is.call(this,re,we);else if(Xe&&wr.call(this,we))return;this.callback(Y,re,we)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function is(U,Y){U&ce?(this.primaryTouch=Y.changedPointers[0].identifier,br.call(this,Y)):U&(me|Ne)&&br.call(this,Y)}function br(U){var Y=U.changedPointers[0];if(Y.identifier===this.primaryTouch){var re={x:Y.clientX,y:Y.clientY};this.lastTouches.push(re);var we=this.lastTouches,Oe=function(){var Xe=we.indexOf(re);Xe>-1&&we.splice(Xe,1)};setTimeout(Oe,ri)}}function wr(U){for(var Y=U.srcEvent.clientX,re=U.srcEvent.clientY,we=0;we<this.lastTouches.length;we++){var Oe=this.lastTouches[we],Xe=Math.abs(Y-Oe.x),Rt=Math.abs(re-Oe.y);if(Xe<=mn&&Rt<=mn)return!0}return!1}var ai=I(a.style,"touchAction"),Si=ai!==i,oi="compute",li="auto",Cs="manipulation",qs="none",As="pan-x",Ni="pan-y",Ji=sc();function Sr(U,Y){this.manager=U,this.set(Y)}Sr.prototype={set:function(U){U==oi&&(U=this.compute()),Si&&this.manager.element.style&&Ji[U]&&(this.manager.element.style[ai]=U),this.actions=U.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var U=[];return f(this.manager.recognizers,function(Y){N(Y.options.enable,[Y])&&(U=U.concat(Y.getTouchAction()))}),ka(U.join(" "))},preventDefaults:function(U){var Y=U.srcEvent,re=U.offsetDirection;if(this.manager.session.prevented){Y.preventDefault();return}var we=this.actions,Oe=k(we,qs)&&!Ji[qs],Xe=k(we,Ni)&&!Ji[Ni],Rt=k(we,As)&&!Ji[As];if(Oe){var wn=U.pointers.length===1,gn=U.distance<2,Sn=U.deltaTime<250;if(wn&&gn&&Sn)return}if(!(Rt&&Xe)&&(Oe||Xe&&re&St||Rt&&re&xt))return this.preventSrc(Y)},preventSrc:function(U){this.manager.session.prevented=!0,U.preventDefault()}};function ka(U){if(k(U,qs))return qs;var Y=k(U,As),re=k(U,Ni);return Y&&re?qs:Y||re?Y?As:Ni:k(U,Cs)?Cs:li}function sc(){if(!Si)return!1;var U={},Y=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(re){U[re]=Y?e.CSS.supports("touch-action",re):!0}),U}var Nr=1,bs=2,er=4,Bn=8,Vs=Bn,kr=16,Ps=32;function ci(U){this.options=x({},this.defaults,U||{}),this.id=se(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Nr,this.simultaneous={},this.requireFail=[]}ci.prototype={defaults:{},set:function(U){return x(this.options,U),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(U){if(m(U,"recognizeWith",this))return this;var Y=this.simultaneous;return U=tr(U,this),Y[U.id]||(Y[U.id]=U,U.recognizeWith(this)),this},dropRecognizeWith:function(U){return m(U,"dropRecognizeWith",this)?this:(U=tr(U,this),delete this.simultaneous[U.id],this)},requireFailure:function(U){if(m(U,"requireFailure",this))return this;var Y=this.requireFail;return U=tr(U,this),_(Y,U)===-1&&(Y.push(U),U.requireFailure(this)),this},dropRequireFailure:function(U){if(m(U,"dropRequireFailure",this))return this;U=tr(U,this);var Y=_(this.requireFail,U);return Y>-1&&this.requireFail.splice(Y,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(U){return!!this.simultaneous[U.id]},emit:function(U){var Y=this,re=this.state;function we(Oe){Y.manager.emit(Oe,U)}re<Bn&&we(Y.options.event+co(re)),we(Y.options.event),U.additionalEvent&&we(U.additionalEvent),re>=Bn&&we(Y.options.event+co(re))},tryEmit:function(U){if(this.canEmit())return this.emit(U);this.state=Ps},canEmit:function(){for(var U=0;U<this.requireFail.length;){if(!(this.requireFail[U].state&(Ps|Nr)))return!1;U++}return!0},recognize:function(U){var Y=x({},U);if(!N(this.options.enable,[this,Y])){this.reset(),this.state=Ps;return}this.state&(Vs|kr|Ps)&&(this.state=Nr),this.state=this.process(Y),this.state&(bs|er|Bn|kr)&&this.tryEmit(Y)},process:function(U){},getTouchAction:function(){},reset:function(){}};function co(U){return U&kr?"cancel":U&Bn?"end":U&er?"move":U&bs?"start":""}function uo(U){return U==te?"down":U==Se?"up":U==Ie?"left":U==$e?"right":""}function tr(U,Y){var re=Y.manager;return re?re.get(U):U}function Hs(){ci.apply(this,arguments)}j(Hs,ci,{defaults:{pointers:1},attrTest:function(U){var Y=this.options.pointers;return Y===0||U.pointers.length===Y},process:function(U){var Y=this.state,re=U.eventType,we=Y&(bs|er),Oe=this.attrTest(U);return we&&(re&Ne||!Oe)?Y|kr:we||Oe?re&me?Y|Bn:Y&bs?Y|er:bs:Ps}});function pn(){Hs.apply(this,arguments),this.pX=null,this.pY=null}j(pn,Hs,{defaults:{event:"pan",threshold:10,pointers:1,direction:mt},getTouchAction:function(){var U=this.options.direction,Y=[];return U&St&&Y.push(Ni),U&xt&&Y.push(As),Y},directionTest:function(U){var Y=this.options,re=!0,we=U.distance,Oe=U.direction,Xe=U.deltaX,Rt=U.deltaY;return Oe&Y.direction||(Y.direction&St?(Oe=Xe===0?Me:Xe<0?Ie:$e,re=Xe!=this.pX,we=Math.abs(U.deltaX)):(Oe=Rt===0?Me:Rt<0?Se:te,re=Rt!=this.pY,we=Math.abs(U.deltaY))),U.direction=Oe,re&&we>Y.threshold&&Oe&Y.direction},attrTest:function(U){return Hs.prototype.attrTest.call(this,U)&&(this.state&bs||!(this.state&bs)&&this.directionTest(U))},emit:function(U){this.pX=U.deltaX,this.pY=U.deltaY;var Y=uo(U.direction);Y&&(U.additionalEvent=this.options.event+Y),this._super.emit.call(this,U)}});function ja(){Hs.apply(this,arguments)}j(ja,Hs,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qs]},attrTest:function(U){return this._super.attrTest.call(this,U)&&(Math.abs(U.scale-1)>this.options.threshold||this.state&bs)},emit:function(U){if(U.scale!==1){var Y=U.scale<1?"in":"out";U.additionalEvent=this.options.event+Y}this._super.emit.call(this,U)}});function _a(){ci.apply(this,arguments),this._timer=null,this._input=null}j(_a,ci,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[li]},process:function(U){var Y=this.options,re=U.pointers.length===Y.pointers,we=U.distance<Y.threshold,Oe=U.deltaTime>Y.time;if(this._input=U,!we||!re||U.eventType&(me|Ne)&&!Oe)this.reset();else if(U.eventType&ce)this.reset(),this._timer=h(function(){this.state=Vs,this.tryEmit()},Y.time,this);else if(U.eventType&me)return Vs;return Ps},reset:function(){clearTimeout(this._timer)},emit:function(U){this.state===Vs&&(U&&U.eventType&me?this.manager.emit(this.options.event+"up",U):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function ki(){Hs.apply(this,arguments)}j(ki,Hs,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qs]},attrTest:function(U){return this._super.attrTest.call(this,U)&&(Math.abs(U.rotation)>this.options.threshold||this.state&bs)}});function nr(){Hs.apply(this,arguments)}j(nr,Hs,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:St|xt,pointers:1},getTouchAction:function(){return pn.prototype.getTouchAction.call(this)},attrTest:function(U){var Y=this.options.direction,re;return Y&(St|xt)?re=U.overallVelocity:Y&St?re=U.overallVelocityX:Y&xt&&(re=U.overallVelocityY),this._super.attrTest.call(this,U)&&Y&U.offsetDirection&&U.distance>this.options.threshold&&U.maxPointers==this.options.pointers&&d(re)>this.options.velocity&&U.eventType&me},emit:function(U){var Y=uo(U.offsetDirection);Y&&this.manager.emit(this.options.event+Y,U),this.manager.emit(this.options.event,U)}});function Ls(){ci.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}j(Ls,ci,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Cs]},process:function(U){var Y=this.options,re=U.pointers.length===Y.pointers,we=U.distance<Y.threshold,Oe=U.deltaTime<Y.time;if(this.reset(),U.eventType&ce&&this.count===0)return this.failTimeout();if(we&&Oe&&re){if(U.eventType!=me)return this.failTimeout();var Xe=this.pTime?U.timeStamp-this.pTime<Y.interval:!0,Rt=!this.pCenter||Qe(this.pCenter,U.center)<Y.posThreshold;this.pTime=U.timeStamp,this.pCenter=U.center,!Rt||!Xe?this.count=1:this.count+=1,this._input=U;var wn=this.count%Y.taps;if(wn===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Vs,this.tryEmit()},Y.interval,this),bs):Vs}return Ps},failTimeout:function(){return this._timer=h(function(){this.state=Ps},this.options.interval,this),Ps},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vs&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ms(U,Y){return Y=Y||{},Y.recognizers=P(Y.recognizers,Ms.defaults.preset),new ho(U,Y)}Ms.VERSION="2.0.7",Ms.defaults={domEvents:!1,touchAction:oi,enable:!0,inputTarget:null,inputClass:null,preset:[[ki,{enable:!1}],[ja,{enable:!1},["rotate"]],[nr,{direction:St}],[pn,{direction:St},["swipe"]],[Ls],[Ls,{event:"doubletap",taps:2},["tap"]],[_a]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pn=1,Ca=2;function ho(U,Y){this.options=x({},Ms.defaults,Y||{}),this.options.inputTarget=this.options.inputTarget||U,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=U,this.input=ye(this),this.touchAction=new Sr(this,this.options.touchAction),Qo(this,!0),f(this.options.recognizers,function(re){var we=this.add(new re[0](re[1]));re[2]&&we.recognizeWith(re[2]),re[3]&&we.requireFailure(re[3])},this)}ho.prototype={set:function(U){return x(this.options,U),U.touchAction&&this.touchAction.update(),U.inputTarget&&(this.input.destroy(),this.input.target=U.inputTarget,this.input.init()),this},stop:function(U){this.session.stopped=U?Ca:Pn},recognize:function(U){var Y=this.session;if(!Y.stopped){this.touchAction.preventDefaults(U);var re,we=this.recognizers,Oe=Y.curRecognizer;(!Oe||Oe&&Oe.state&Vs)&&(Oe=Y.curRecognizer=null);for(var Xe=0;Xe<we.length;)re=we[Xe],Y.stopped!==Ca&&(!Oe||re==Oe||re.canRecognizeWith(Oe))?re.recognize(U):re.reset(),!Oe&&re.state&(bs|er|Bn)&&(Oe=Y.curRecognizer=re),Xe++}},get:function(U){if(U instanceof ci)return U;for(var Y=this.recognizers,re=0;re<Y.length;re++)if(Y[re].options.event==U)return Y[re];return null},add:function(U){if(m(U,"add",this))return this;var Y=this.get(U.options.event);return Y&&this.remove(Y),this.recognizers.push(U),U.manager=this,this.touchAction.update(),U},remove:function(U){if(m(U,"remove",this))return this;if(U=this.get(U),U){var Y=this.recognizers,re=_(Y,U);re!==-1&&(Y.splice(re,1),this.touchAction.update())}return this},on:function(U,Y){if(U!==i&&Y!==i){var re=this.handlers;return f(z(U),function(we){re[we]=re[we]||[],re[we].push(Y)}),this}},off:function(U,Y){if(U!==i){var re=this.handlers;return f(z(U),function(we){Y?re[we]&&re[we].splice(_(re[we],Y),1):delete re[we]}),this}},emit:function(U,Y){this.options.domEvents&&ic(U,Y);var re=this.handlers[U]&&this.handlers[U].slice();if(!(!re||!re.length)){Y.type=U,Y.preventDefault=function(){Y.srcEvent.preventDefault()};for(var we=0;we<re.length;)re[we](Y),we++}},destroy:function(){this.element&&Qo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Qo(U,Y){var re=U.element;if(re.style){var we;f(U.options.cssProps,function(Oe,Xe){we=I(re.style,Xe),Y?(U.oldCssProps[we]=re.style[we],re.style[we]=Oe):re.style[we]=U.oldCssProps[we]||""}),Y||(U.oldCssProps={})}}function ic(U,Y){var re=t.createEvent("Event");re.initEvent(U,!0,!0),re.gesture=Y,Y.target.dispatchEvent(re)}x(Ms,{INPUT_START:ce,INPUT_MOVE:xe,INPUT_END:me,INPUT_CANCEL:Ne,STATE_POSSIBLE:Nr,STATE_BEGAN:bs,STATE_CHANGED:er,STATE_ENDED:Bn,STATE_RECOGNIZED:Vs,STATE_CANCELLED:kr,STATE_FAILED:Ps,DIRECTION_NONE:Me,DIRECTION_LEFT:Ie,DIRECTION_RIGHT:$e,DIRECTION_UP:Se,DIRECTION_DOWN:te,DIRECTION_HORIZONTAL:St,DIRECTION_VERTICAL:xt,DIRECTION_ALL:mt,Manager:ho,Input:ie,TouchAction:Sr,TouchInput:si,MouseInput:Dt,PointerEventInput:Nt,TouchMouseInput:En,SingleTouchInput:Fi,Recognizer:ci,AttrRecognizer:Hs,Tap:Ls,Pan:pn,Swipe:nr,Pinch:ja,Rotate:ki,Press:_a,on:L,off:M,each:f,merge:w,extend:v,assign:x,inherit:j,bindFn:C,prefixed:I});var Bi=typeof e<"u"?e:typeof self<"u"?self:{};Bi.Hammer=Ms,n.exports?n.exports=Ms:e[s]=Ms})(window,document,"Hammer")})(pm)),pm.exports}var tL=eL();const ed=ag(tL);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const Nd=n=>n&&n.enabled&&n.modifierKey,Aw=(n,e)=>n&&e[n+"Key"],Mg=(n,e)=>n&&!e[n+"Key"];function no(n,e,t){return n===void 0?!0:typeof n=="string"?n.indexOf(e)!==-1:typeof n=="function"?n({chart:t}).indexOf(e)!==-1:!1}function gm(n,e){return typeof n=="function"&&(n=n({chart:e})),typeof n=="string"?{x:n.indexOf("x")!==-1,y:n.indexOf("y")!==-1}:{x:!1,y:!1}}function nL(n,e){let t;return function(){return clearTimeout(t),t=setTimeout(n,e),e}}function sL({x:n,y:e},t){const s=t.scales,i=Object.keys(s);for(let r=0;r<i.length;r++){const a=s[i[r]];if(e>=a.top&&e<=a.bottom&&n>=a.left&&n<=a.right)return a}return null}function Pw(n,e,t){const{mode:s="xy",scaleMode:i,overScaleMode:r}=n||{},a=sL(e,t),o=gm(s,t),c=gm(i,t);if(r){const u=gm(r,t);for(const h of["x","y"])u[h]&&(c[h]=o[h],o[h]=!1)}if(a&&c[a.axis])return[a];const d=[];return $t(t.scales,function(u){o[u.axis]&&d.push(u)}),d}const Np=new WeakMap;function Mn(n){let e=Np.get(n);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},Np.set(n,e)),e}function iL(n){Np.delete(n)}function Lw(n,e,t,s){const i=Math.max(0,Math.min(1,(n-e)/t||0)),r=1-i;return{min:s*i,max:s*r}}function Mw(n,e){const t=n.isHorizontal()?e.x:e.y;return n.getValueForPixel(t)}function Tw(n,e,t){const s=n.max-n.min,i=s*(e-1),r=Mw(n,t);return Lw(r,n.min,s,i)}function rL(n,e,t){const s=Mw(n,t);if(s===void 0)return{min:n.min,max:n.max};const i=Math.log10(n.min),r=Math.log10(n.max),a=Math.log10(s),o=r-i,c=o*(e-1),d=Lw(a,i,o,c);return{min:Math.pow(10,i+d.min),max:Math.pow(10,r-d.max)}}function aL(n,e){return e&&(e[n.id]||e[n.axis])||{}}function Tx(n,e,t,s,i){let r=t[s];if(r==="original"){const a=n.originalScaleLimits[e.id][s];r=jt(a.options,a.scale)}return jt(r,i)}function oL(n,e,t){const s=n.getValueForPixel(e),i=n.getValueForPixel(t);return{min:Math.min(s,i),max:Math.max(s,i)}}function lL(n,{min:e,max:t,minLimit:s,maxLimit:i},r){const a=(n-t+e)/2;e-=a,t+=a;const o=r.min.options??r.min.scale,c=r.max.options??r.max.scale,d=n/1e6;return Eo(e,o,d)&&(e=o),Eo(t,c,d)&&(t=c),e<s?(e=s,t=Math.min(s+n,i)):t>i&&(t=i,e=Math.max(i-n,s)),{min:e,max:t}}function Yo(n,{min:e,max:t},s,i=!1){const r=Mn(n.chart),{options:a}=n,o=aL(n,s),{minRange:c=0}=o,d=Tx(r,n,o,"min",-1/0),u=Tx(r,n,o,"max",1/0);if(i==="pan"&&(e<d||t>u))return!0;const h=n.max-n.min,m=i?Math.max(t-e,c):h;if(i&&m===c&&h<=c)return!0;const f=lL(m,{min:e,max:t,minLimit:d,maxLimit:u},r.originalScaleLimits[n.id]);return a.min=f.min,a.max=f.max,r.updatedScaleLimits[n.id]=f,n.parse(f.min)!==n.min||n.parse(f.max)!==n.max}function cL(n,e,t,s){const i=Tw(n,e,t),r={min:n.min+i.min,max:n.max-i.max};return Yo(n,r,s,!0)}function dL(n,e,t,s){const i=rL(n,e,t);return Yo(n,i,s,!0)}function uL(n,e,t,s){Yo(n,oL(n,e,t),s,!0)}const Dx=n=>n===0||isNaN(n)?0:n<0?Math.min(Math.round(n),-1):Math.max(Math.round(n),1);function hL(n){const t=n.getLabels().length-1;n.min>0&&(n.min-=1),n.max<t&&(n.max+=1)}function fL(n,e,t,s){const i=Tw(n,e,t);n.min===n.max&&e<1&&hL(n);const r={min:n.min+Dx(i.min),max:n.max-Dx(i.max)};return Yo(n,r,s,!0)}function mL(n){return n.isHorizontal()?n.width:n.height}function pL(n,e,t){const i=n.getLabels().length-1;let{min:r,max:a}=n;const o=Math.max(a-r,1),c=Math.round(mL(n)/Math.max(o,10)),d=Math.round(Math.abs(e/c));let u;return e<-c?(a=Math.min(a+d,i),r=o===1?a:a-o,u=a===i):e>c&&(r=Math.max(0,r-d),a=o===1?r:r+o,u=r===0),Yo(n,{min:r,max:a},t)||u}const gL={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function Dw(n,e,t,s=!1){const{min:i,max:r,options:a}=n,o=a.time&&a.time.round,c=gL[o]||0,d=n.getValueForPixel(n.getPixelForValue(i+c)-e),u=n.getValueForPixel(n.getPixelForValue(r+c)-e);return isNaN(d)||isNaN(u)?!0:Yo(n,{min:d,max:u},t,s?"pan":!1)}function Ex(n,e,t){return Dw(n,e,t,!0)}const kp={category:fL,default:cL,logarithmic:dL},jp={default:uL},_p={category:pL,default:Dw,logarithmic:Ex,timeseries:Ex};function yL(n,e,t){const{id:s,options:{min:i,max:r}}=n;if(!e[s]||!t[s])return!0;const a=t[s];return a.min!==i||a.max!==r}function Ix(n,e){$t(n,(t,s)=>{e[s]||delete n[s]})}function ec(n,e){const{scales:t}=n,{originalScaleLimits:s,updatedScaleLimits:i}=e;return $t(t,function(r){yL(r,s,i)&&(s[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),Ix(s,t),Ix(i,t),s}function Rx(n,e,t,s){const i=kp[n.type]||kp.default;kt(i,[n,e,t,s])}function Ox(n,e,t,s){const i=jp[n.type]||jp.default;kt(i,[n,e,t,s])}function xL(n){const e=n.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Tg(n,e,t="none",s="api"){const{x:i=1,y:r=1,focalPoint:a=xL(n)}=typeof e=="number"?{x:e,y:e}:e,o=Mn(n),{options:{limits:c,zoom:d}}=o;ec(n,o);const u=i!==1,h=r!==1,m=Pw(d,a,n);$t(m||n.scales,function(f){f.isHorizontal()&&u?Rx(f,i,a,c):!f.isHorizontal()&&h&&Rx(f,r,a,c)}),n.update(t),kt(d.onZoom,[{chart:n,trigger:s}])}function Ew(n,e,t,s="none",i="api"){const r=Mn(n),{options:{limits:a,zoom:o}}=r,{mode:c="xy"}=o;ec(n,r);const d=no(c,"x",n),u=no(c,"y",n);$t(n.scales,function(h){h.isHorizontal()&&d?Ox(h,e.x,t.x,a):!h.isHorizontal()&&u&&Ox(h,e.y,t.y,a)}),n.update(s),kt(o.onZoom,[{chart:n,trigger:i}])}function vL(n,e,t,s="none",i="api"){const r=Mn(n);ec(n,r);const a=n.scales[e];Yo(a,t,void 0,!0),n.update(s),kt(r.options.zoom?.onZoom,[{chart:n,trigger:i}])}function bL(n,e="default"){const t=Mn(n),s=ec(n,t);$t(n.scales,function(i){const r=i.options;s[i.id]?(r.min=s[i.id].min.options,r.max=s[i.id].max.options):(delete r.min,delete r.max),delete t.updatedScaleLimits[i.id]}),n.update(e),kt(t.options.zoom.onZoomComplete,[{chart:n}])}function wL(n,e){const t=n.originalScaleLimits[e];if(!t)return;const{min:s,max:i}=t;return jt(i.options,i.scale)-jt(s.options,s.scale)}function SL(n){const e=Mn(n);let t=1,s=1;return $t(n.scales,function(i){const r=wL(e,i.id);if(r){const a=Math.round(r/(i.max-i.min)*100)/100;t=Math.min(t,a),s=Math.max(s,a)}}),t<1?t:s}function Fx(n,e,t,s){const{panDelta:i}=s,r=i[n.id]||0;Zi(r)===Zi(e)&&(e+=r);const a=_p[n.type]||_p.default;kt(a,[n,e,t])?i[n.id]=0:i[n.id]=e}function Iw(n,e,t,s="none"){const{x:i=0,y:r=0}=typeof e=="number"?{x:e,y:e}:e,a=Mn(n),{options:{pan:o,limits:c}}=a,{onPan:d}=o||{};ec(n,a);const u=i!==0,h=r!==0;$t(t||n.scales,function(m){m.isHorizontal()&&u?Fx(m,i,c,a):!m.isHorizontal()&&h&&Fx(m,r,c,a)}),n.update(s),kt(d,[{chart:n}])}function Rw(n){const e=Mn(n);ec(n,e);const t={};for(const s of Object.keys(n.scales)){const{min:i,max:r}=e.originalScaleLimits[s]||{min:{},max:{}};t[s]={min:i.scale,max:r.scale}}return t}function NL(n){const e=Mn(n),t={};for(const s of Object.keys(n.scales))t[s]=e.updatedScaleLimits[s];return t}function kL(n){const e=Rw(n);for(const t of Object.keys(n.scales)){const{min:s,max:i}=e[t];if(s!==void 0&&n.scales[t].min!==s||i!==void 0&&n.scales[t].max!==i)return!0}return!1}function zx(n){const e=Mn(n);return e.panning||e.dragging}const Bx=(n,e,t)=>Math.min(t,Math.max(e,n));function yi(n,e){const{handlers:t}=Mn(n),s=t[e];s&&s.target&&(s.target.removeEventListener(e,s),delete t[e])}function td(n,e,t,s){const{handlers:i,options:r}=Mn(n),a=i[t];if(a&&a.target===e)return;yi(n,t),i[t]=c=>s(n,c,r),i[t].target=e;const o=t==="wheel"?!1:void 0;e.addEventListener(t,i[t],{passive:o})}function jL(n,e){const t=Mn(n);t.dragStart&&(t.dragging=!0,t.dragEnd=e,n.update("none"))}function _L(n,e){const t=Mn(n);!t.dragStart||e.key!=="Escape"||(yi(n,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,n.update("none"))}function Cp(n,e){if(n.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}return Fr(n,e)}function Ow(n,e,t){const{onZoomStart:s,onZoomRejected:i}=t;if(s){const r=Cp(e,n);if(kt(s,[{chart:n,event:e,point:r}])===!1)return kt(i,[{chart:n,event:e}]),!1}}function CL(n,e){if(n.legend){const r=Fr(e,n);if(zr(r,n.legend))return}const t=Mn(n),{pan:s,zoom:i={}}=t.options;if(e.button!==0||Aw(Nd(s),e)||Mg(Nd(i.drag),e))return kt(i.onZoomRejected,[{chart:n,event:e}]);Ow(n,e,i)!==!1&&(t.dragStart=e,td(n,n.canvas.ownerDocument,"mousemove",jL),td(n,window.document,"keydown",_L))}function AL({begin:n,end:e},t){let s=e.x-n.x,i=e.y-n.y;const r=Math.abs(s/i);r>t?s=Math.sign(s)*Math.abs(i*t):r<t&&(i=Math.sign(i)*Math.abs(s/t)),e.x=n.x+s,e.y=n.y+i}function $x(n,e,t,{min:s,max:i,prop:r}){n[s]=Bx(Math.min(t.begin[r],t.end[r]),e[s],e[i]),n[i]=Bx(Math.max(t.begin[r],t.end[r]),e[s],e[i])}function PL(n,e,t){const s={begin:Cp(e.dragStart,n),end:Cp(e.dragEnd,n)};if(t){const i=n.chartArea.width/n.chartArea.height;AL(s,i)}return s}function Fw(n,e,t,s){const i=no(e,"x",n),r=no(e,"y",n),{top:a,left:o,right:c,bottom:d,width:u,height:h}=n.chartArea,m={top:a,left:o,right:c,bottom:d},f=PL(n,t,s&&i&&r);i&&$x(m,n.chartArea,f,{min:"left",max:"right",prop:"x"}),r&&$x(m,n.chartArea,f,{min:"top",max:"bottom",prop:"y"});const y=m.right-m.left,x=m.bottom-m.top;return{...m,width:y,height:x,zoomX:i&&y?1+(u-y)/u:1,zoomY:r&&x?1+(h-x)/h:1}}function LL(n,e){const t=Mn(n);if(!t.dragStart)return;yi(n,"mousemove");const{mode:s,onZoomComplete:i,drag:{threshold:r=0,maintainAspectRatio:a}}=t.options.zoom,o=Fw(n,s,{dragStart:t.dragStart,dragEnd:e},a),c=no(s,"x",n)?o.width:0,d=no(s,"y",n)?o.height:0,u=Math.sqrt(c*c+d*d);if(t.dragStart=t.dragEnd=null,u<=r){t.dragging=!1,n.update("none");return}Ew(n,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,kt(i,[{chart:n}])}function ML(n,e,t){if(Mg(Nd(t.wheel),e)){kt(t.onZoomRejected,[{chart:n,event:e}]);return}if(Ow(n,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function TL(n,e){const{handlers:{onZoomComplete:t},options:{zoom:s}}=Mn(n);if(!ML(n,e,s))return;const i=e.target.getBoundingClientRect(),r=s.wheel.speed,a=e.deltaY>=0?2-1/(1-r):1+r,o={x:a,y:a,focalPoint:{x:e.clientX-i.left,y:e.clientY-i.top}};Tg(n,o,"zoom","wheel"),kt(t,[{chart:n}])}function DL(n,e,t,s){t&&(Mn(n).handlers[e]=nL(()=>kt(t,[{chart:n}]),s))}function EL(n,e){const t=n.canvas,{wheel:s,drag:i,onZoomComplete:r}=e.zoom;s.enabled?(td(n,t,"wheel",TL),DL(n,"onZoomComplete",r,250)):yi(n,"wheel"),i.enabled?(td(n,t,"mousedown",CL),td(n,t.ownerDocument,"mouseup",LL)):(yi(n,"mousedown"),yi(n,"mousemove"),yi(n,"mouseup"),yi(n,"keydown"))}function IL(n){yi(n,"mousedown"),yi(n,"mousemove"),yi(n,"mouseup"),yi(n,"wheel"),yi(n,"click"),yi(n,"keydown")}function RL(n,e){return function(t,s){const{pan:i,zoom:r={}}=e.options;if(!i||!i.enabled)return!1;const a=s&&s.srcEvent;return a&&!e.panning&&s.pointerType==="mouse"&&(Mg(Nd(i),a)||Aw(Nd(r.drag),a))?(kt(i.onPanRejected,[{chart:n,event:s}]),!1):!0}}function OL(n,e){const t=Math.abs(n.clientX-e.clientX),s=Math.abs(n.clientY-e.clientY),i=t/s;let r,a;return i>.3&&i<1.7?r=a=!0:t>s?r=!0:a=!0,{x:r,y:a}}function zw(n,e,t){if(e.scale){const{center:s,pointers:i}=t,r=1/e.scale*t.scale,a=t.target.getBoundingClientRect(),o=OL(i[0],i[1]),c=e.options.zoom.mode,d={x:o.x&&no(c,"x",n)?r:1,y:o.y&&no(c,"y",n)?r:1,focalPoint:{x:s.x-a.left,y:s.y-a.top}};Tg(n,d,"zoom","pinch"),e.scale=t.scale}}function FL(n,e,t){if(e.options.zoom.pinch.enabled){const s=Fr(t,n);kt(e.options.zoom.onZoomStart,[{chart:n,event:t,point:s}])===!1?(e.scale=null,kt(e.options.zoom.onZoomRejected,[{chart:n,event:t}])):e.scale=1}}function zL(n,e,t){e.scale&&(zw(n,e,t),e.scale=null,kt(e.options.zoom.onZoomComplete,[{chart:n}]))}function Bw(n,e,t){const s=e.delta;s&&(e.panning=!0,Iw(n,{x:t.deltaX-s.x,y:t.deltaY-s.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function BL(n,e,t){const{enabled:s,onPanStart:i,onPanRejected:r}=e.options.pan;if(!s)return;const a=t.target.getBoundingClientRect(),o={x:t.center.x-a.left,y:t.center.y-a.top};if(kt(i,[{chart:n,event:t,point:o}])===!1)return kt(r,[{chart:n,event:t}]);e.panScales=Pw(e.options.pan,o,n),e.delta={x:0,y:0},Bw(n,e,t)}function $L(n,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,kt(e.options.pan.onPanComplete,[{chart:n}]))}const Ap=new WeakMap;function Wx(n,e){const t=Mn(n),s=n.canvas,{pan:i,zoom:r}=e,a=new ed.Manager(s);r&&r.pinch.enabled&&(a.add(new ed.Pinch),a.on("pinchstart",o=>FL(n,t,o)),a.on("pinch",o=>zw(n,t,o)),a.on("pinchend",o=>zL(n,t,o))),i&&i.enabled&&(a.add(new ed.Pan({threshold:i.threshold,enable:RL(n,t)})),a.on("panstart",o=>BL(n,t,o)),a.on("panmove",o=>Bw(n,t,o)),a.on("panend",()=>$L(n,t))),Ap.set(n,a)}function Ux(n){const e=Ap.get(n);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Ap.delete(n))}function WL(n,e){const{pan:t,zoom:s}=n,{pan:i,zoom:r}=e;return s?.zoom?.pinch?.enabled!==r?.zoom?.pinch?.enabled||t?.enabled!==i?.enabled||t?.threshold!==i?.threshold}var UL="2.2.0";function Nu(n,e,t){const s=t.zoom.drag,{dragStart:i,dragEnd:r}=Mn(n);if(s.drawTime!==e||!r)return;const{left:a,top:o,width:c,height:d}=Fw(n,t.zoom.mode,{dragStart:i,dragEnd:r},s.maintainAspectRatio),u=n.ctx;u.save(),u.beginPath(),u.fillStyle=s.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(a,o,c,d),s.borderWidth>0&&(u.lineWidth=s.borderWidth,u.strokeStyle=s.borderColor||"rgba(225,225,225)",u.strokeRect(a,o,c,d)),u.restore()}var qL={id:"zoom",version:UL,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(n,e,t){const s=Mn(n);s.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),ed&&Wx(n,t),n.pan=(i,r,a)=>Iw(n,i,r,a),n.zoom=(i,r)=>Tg(n,i,r),n.zoomRect=(i,r,a)=>Ew(n,i,r,a),n.zoomScale=(i,r,a)=>vL(n,i,r,a),n.resetZoom=i=>bL(n,i),n.getZoomLevel=()=>SL(n),n.getInitialScaleBounds=()=>Rw(n),n.getZoomedScaleBounds=()=>NL(n),n.isZoomedOrPanned=()=>kL(n),n.isZoomingOrPanning=()=>zx(n)},beforeEvent(n,{event:e}){if(zx(n))return!1;if(e.type==="click"||e.type==="mouseup"){const t=Mn(n);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(n,e,t){const s=Mn(n),i=s.options;s.options=t,WL(i,t)&&(Ux(n),Wx(n,t)),EL(n,t)},beforeDatasetsDraw(n,e,t){Nu(n,"beforeDatasetsDraw",t)},afterDatasetsDraw(n,e,t){Nu(n,"afterDatasetsDraw",t)},beforeDraw(n,e,t){Nu(n,"beforeDraw",t)},afterDraw(n,e,t){Nu(n,"afterDraw",t)},stop:function(n){IL(n),ed&&Ux(n),iL(n)},panFunctions:_p,zoomFunctions:kp,zoomRectFunctions:jp};const $w="label";function qx(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function VL(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function Ww(n,e){n.labels=e}function Uw(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$w;const s=[];n.datasets=e.map(i=>{const r=n.datasets.find(a=>a[t]===i[t]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function HL(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$w;const t={labels:[],datasets:[]};return Ww(t,n.labels),Uw(t,n.datasets,e),t}function GL(n,e){const{height:t=150,width:s=300,redraw:i=!1,datasetIdKey:r,type:a,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=n,f=W.useRef(null),y=W.useRef(null),x=()=>{f.current&&(y.current=new Fl(f.current,{type:a,data:HL(o,r),options:c&&{...c},plugins:d}),qx(e,y.current))},v=()=>{qx(e,null),y.current&&(y.current.destroy(),y.current=null)};return W.useEffect(()=>{!i&&y.current&&c&&VL(y.current,c)},[i,c]),W.useEffect(()=>{!i&&y.current&&Ww(y.current.config.data,o.labels)},[i,o.labels]),W.useEffect(()=>{!i&&y.current&&o.datasets&&Uw(y.current.config.data,o.datasets,r)},[i,o.datasets]),W.useEffect(()=>{y.current&&(i?(v(),setTimeout(x)):y.current.update(h))},[i,c,o.labels,o.datasets,h]),W.useEffect(()=>{y.current&&(v(),setTimeout(x))},[a]),W.useEffect(()=>(x(),()=>v()),[]),Ge.createElement("canvas",{ref:f,role:"img",height:t,width:s,...m},u)}const YL=W.forwardRef(GL);function of(n,e){return Fl.register(e),W.forwardRef((t,s)=>Ge.createElement(YL,{...t,ref:s,type:n}))}const ZL=of("line",rw),KL=of("bar",iw),XL=of("radar",ow),QL=of("doughnut",tf),xn=n=>{if(typeof window<"u"&&typeof document<"u")try{const e=getComputedStyle(document.documentElement).getPropertyValue(`--${n}`).trim();if(e)return e}catch(e){console.warn("colorVar computedStyle failed",e)}try{if(Va&&Va[":root"]&&Object.prototype.hasOwnProperty.call(Va[":root"],`--${n}`))return Va[":root"][`--${n}`]}catch{}return tt.colors.neutral?.[500]};function ym(n,e){if(!n)return"";const t=n.trim().replace("#","");if(t.length===3){const s=parseInt(t[0]+t[0],16),i=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16);return`rgba(${s}, ${i}, ${r}, ${e})`}if(t.length===6){const s=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return`rgba(${s}, ${i}, ${r}, ${e})`}return""}const kh=(n,e)=>{const t=typeof e=="string"?parseFloat(e):e;if(typeof window<"u"&&typeof document<"u")try{const i=getComputedStyle(document.documentElement).getPropertyValue(`--${n}`).trim();if(i){if(i.startsWith("#")){const a=ym(i,Number.isFinite(t)?t:1);if(a)return a}const r=i.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(r){const a=r[1],o=r[2],c=r[3];return`rgba(${a}, ${o}, ${c}, ${Number.isFinite(t)?t:1})`}}}catch(i){console.warn("colorVarAlpha computedStyle failed",i)}try{if(Va&&Va[":root"]&&Object.prototype.hasOwnProperty.call(Va[":root"],`--${n}`)){const i=Va[":root"][`--${n}`];if(i&&i.startsWith("#")){const a=ym(i,Number.isFinite(t)?t:1);if(a)return a}const r=(i||"").match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(r){const a=r[1],o=r[2],c=r[3];return`rgba(${a}, ${o}, ${c}, ${Number.isFinite(t)?t:1})`}}}catch{}const s=tt.colors.neutral?.[500];if(s.startsWith("#")){const i=ym(s,Number.isFinite(t)?t:1);if(i)return i}return s},Vx=typeof window<"u"&&window?.document?.documentElement||null;function JL(n){try{if(!Vx)return null;const e=getComputedStyle(Vx).getPropertyValue(n).trim();if(!e)return null;if(e.startsWith("#"))return e;const s=e.replace(/,/g," ").replace(/\s+/g," ").trim().split(" ");if(s.length===3&&s.every(i=>/^\d+$/.test(i))){const[i,r,a]=s.map(Number);return`rgb(${i} ${r} ${a})`}return e||null}catch{return null}}function Pp(n,e=1){if(!n)return`rgba(0,0,0,${e})`;const t=n.match(/^#([0-9a-fA-F]{6})$/);if(t){const i=t[1],r=parseInt(i.substr(0,2),16),a=parseInt(i.substr(2,2),16),o=parseInt(i.substr(4,2),16);return`rgba(${r}, ${a}, ${o}, ${e})`}const s=n.match(/(\d+)\s*(?:[, ])\s*(\d+)\s*(?:[, ])\s*(\d+)/)||n.match(/(\d+)\s+(\d+)\s+(\d+)/);if(s){const i=Number(s[1]),r=Number(s[2]),a=Number(s[3]);return`rgba(${i}, ${r}, ${a}, ${e})`}return`rgba(0,0,0,${e})`}function on(n,e,t=1){const s=JL(n);return s?Pp(s,t):e?Pp(e,t):`rgba(0,0,0,${t})`}const xm={pain:{none:on("--color-pain-none",tt.colors.pain.none),mild:on("--color-pain-mild",tt.colors.pain.mild),moderate:on("--color-pain-moderate",tt.colors.pain.moderate),severe:on("--color-pain-severe",tt.colors.pain.severe),extreme:on("--color-pain-extreme",tt.colors.pain.extreme)},treatment:{primary:on("--chart-series-2",tt.colors.secondary[500]),medication:on("--chart-series-3",tt.colors.accent[500]),therapy:on("--chart-series-1",tt.colors.primary[600]),lifestyle:on("--chart-series-6",tt.colors.neutral[600])},analytics:{trend:on("--chart-series-1",tt.colors.primary[500]),average:on("--chart-series-2",tt.colors.secondary[500]),prediction:on("--chart-series-3",tt.colors.accent[400]),baseline:on("--chart-series-6",tt.colors.neutral[500])},status:{normal:on("--chart-series-1",tt.colors.status.info),warning:on("--chart-series-4",tt.colors.status.warning),critical:on("--chart-series-6",tt.colors.status.error),success:on("--chart-series-2",tt.colors.status.success)},series:[on("--chart-series-1",tt.colors.primary[500]),on("--chart-series-2",tt.colors.secondary[500]),on("--chart-series-3",tt.colors.accent[500]),on("--chart-series-4",tt.colors.pain.severe),on("--chart-series-5",tt.colors.pain.moderate),on("--chart-series-6",tt.colors.neutral[600]),on("--chart-series-1",tt.colors.primary[700]),on("--chart-series-2",tt.colors.secondary[700]),on("--chart-series-3",tt.colors.accent[700]),on("--chart-series-6",tt.colors.pain.extreme)]},qw=(n,e="series")=>{const t=xm[e];return Array.isArray(t)?t[n%t.length]:typeof t=="object"?Object.values(t)[n%Object.values(t).length]:xm.series[n%xm.series.length]},Vw=(n,e=.2,t="series")=>{const s=qw(n,t);return s.startsWith("rgba")?s.replace(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([0-9.]+)\)/,`rgba($1, $2, $3, ${e})`):Pp(s,e)};Vw(0,.1,"analytics");typeof window<"u"&&Fl._registered!==!0&&(Fl.register(...JP,qL),Fl._registered=!0);function eM(n,e,t=0){const s={...n,...nM(n,t),borderWidth:n.borderWidth??2,tension:n.tension??.4,fill:sM(n,e)};return e==="line"&&tM(s,n),s}function tM(n,e){n.pointBackgroundColor=Hx(e.backgroundColor,n.backgroundColor),n.pointBorderColor=Hx(e.borderColor,n.borderColor)}function nM(n,e){const t=qw(e),s=Vw(e,.1);return{borderColor:n.borderColor??t,backgroundColor:n.backgroundColor??s}}function sM(n,e){return typeof n.fill=="boolean"?n.fill:e==="line"}function Hx(n,e){return Array.isArray(n)?n:e}function pa({data:n,type:e="line",title:t,summary:s,height:i=300,className:r,config:a={}}){const{responsive:o=!0,maintainAspectRatio:c=!1,showLegend:d=!0,showTitle:u=!0,scales:h,plugins:m}=a,f=Ge.useMemo(()=>({labels:n.labels,datasets:n.datasets.map((v,w)=>eM(v,e,w))}),[n,e]),y=Ge.useMemo(()=>({responsive:o,maintainAspectRatio:c,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,interaction:{mode:"index",intersect:!1,includeInvisible:!1},plugins:{legend:{display:d,labels:{color:xn("color-foreground"),padding:typeof window<"u"&&window.innerWidth<768?20:10,usePointStyle:!0,pointStyle:"circle"},position:typeof window<"u"&&window.innerWidth<768?"bottom":"top"},title:{display:u&&!!t,text:t,color:xn("color-foreground")},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:xn("color-card"),titleColor:xn("color-foreground"),bodyColor:xn("color-foreground"),borderColor:xn("color-border"),borderWidth:1,padding:12,titleFont:{size:typeof window<"u"&&window.innerWidth<768?14:12},bodyFont:{size:typeof window<"u"&&window.innerWidth<768?13:11},position:"nearest",yAlign:"bottom",callbacks:{label:function(v){return iM(v)}}},zoom:{pan:{enabled:!0,mode:"xy",threshold:10},zoom:{wheel:{enabled:!1},pinch:{enabled:!0},mode:"xy"}},...m},elements:{point:{radius:typeof window<"u"&&window.innerWidth<768?4:3,hoverRadius:typeof window<"u"&&window.innerWidth<768?8:6,borderWidth:2},line:{tension:.35},bar:{borderRadius:typeof window<"u"&&window.innerWidth<768?2:0}},animation:{duration:typeof window<"u"&&window.innerWidth<768?200:400,easing:"easeOutQuart"},scales:e!=="doughnut"&&e!=="radar"?{x:{ticks:{color:xn("color-foreground"),maxTicksLimit:typeof window<"u"&&window.innerWidth<768?5:10,font:{size:typeof window<"u"&&window.innerWidth<768?11:12}},grid:{color:xn("color-border")},pan:{enabled:!0},zoom:{wheel:{enabled:!1},pinch:{enabled:!0}}},y:{min:0,max:10,ticks:{color:xn("color-foreground"),font:{size:typeof window<"u"&&window.innerWidth<768?11:12}},grid:{color:xn("color-border")},title:{display:!0,text:"Pain Level"},pan:{enabled:!0},zoom:{wheel:{enabled:!1},pinch:{enabled:!0}}},y1:{position:"right",ticks:{color:xn("color-foreground"),font:{size:typeof window<"u"&&window.innerWidth<768?11:12}},grid:{display:!1},title:{display:!0,text:"Entries"},pan:{enabled:!0},zoom:{wheel:{enabled:!1},pinch:{enabled:!0}}},...h}:void 0}),[o,c,d,u,t,e,h]),x=s??(t?`${t} chart with ${n.datasets.length} dataset(s)`:"Chart data");return l.jsx(We,{className:Ye("w-full mobile-chart",r),children:l.jsx(Ve,{className:"p-4 md:p-6",children:l.jsxs("figure",{"aria-labelledby":t?"chart-title":void 0,children:[t&&l.jsx("figcaption",{id:"chart-title",className:"sr-only",children:t}),l.jsx("p",{className:"sr-only",id:"chart-summary",children:x}),l.jsxs("div",{"aria-describedby":"chart-summary",children:[e==="bar"&&l.jsx(KL,{data:f,options:y,height:i}),e==="doughnut"&&l.jsx(QL,{data:f,options:y,height:i}),e==="radar"&&l.jsx(XL,{data:f,options:y,height:i}),e==="line"&&l.jsx(ZL,{data:f,options:y,height:i})]})]})})})}function iM(n){try{const e=n.dataset,t=n.dataIndex,s=n.dataset.label||"",i=n.parsed?.y??n.parsed??n.raw??"";let r=`${s}: ${i}`;return e._meta&&e._meta[t]&&(r+=rM(e._meta[t])),r}catch{return n.dataset.label?`${n.dataset.label}: ${n.formattedValue}`:`${n.formattedValue}`}}function rM(n){let e="";typeof n.count=="number"&&(e+=` — ${n.count} entr${n.count===1?"y":"ies"}`);const t=[];return n.notes&&t.push(`${n.notes} notes`),n.meds&&t.push(`${n.meds} meds`),t.length&&(e+=` (${t.join(", ")})`),e}function Hw({entries:n}){return l.jsxs(We,{"data-walkthrough":"pain-history",children:[l.jsxs(bt,{children:[l.jsx(wt,{children:"Pain History"}),l.jsx(ur,{children:"Detailed view of all your pain entries and patterns"})]}),l.jsx(Ve,{children:l.jsx(F4,{entries:n})})]})}const aM={advancedAnalytics:!0,workSafeBCExport:!0,emergencyProtocols:!1,experimentalUI:!1};function Gw(n){return aM[n]}const vm={title:"Beta Software Notice",message:"You're running a beta version of Pain Tracker. Please backup your data regularly. This build is intended for testing and feedback. Report issues at the repository issues page.",supportUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues"},bm="pain-tracker:beta-dismissed";function Yw(n,e){if(e<=0)return[];const t=[];for(let s=0;s<n.length;s++){const i=Math.max(0,s-e+1),r=n.slice(i,s+1).filter(o=>typeof o=="number"&&!isNaN(o)),a=r.length?r.reduce((o,c)=>o+c,0)/r.length:0;t.push(a)}return t}function Zw(n,e){if(e<=0)return[];const t=[];for(let s=0;s<n.length;s++){const i=Math.max(0,s-e+1),r=n.slice(i,s+1).filter(c=>typeof c=="number"&&!isNaN(c));if(r.length===0){t.push(0);continue}const a=r.reduce((c,d)=>c+d,0)/r.length,o=r.reduce((c,d)=>c+Math.pow(d-a,2),0)/r.length;t.push(Math.sqrt(o))}return t}function oM(n,e=7,t=2.5){const s=[],i=Yw(n,e),r=Zw(n,e);for(let a=0;a<n.length;a++){const o=n[a],c=i[a]??0,d=r[a]??0;if(d===0)continue;Math.abs((o-c)/d)>=t&&s.push(a)}return s}function lM(n,e){const t={};return n.forEach(s=>{const i=new Date(s.timestamp).toISOString().split("T")[0];t[i]||(t[i]=[]),e==="pain"&&t[i].push(s.baselineData.pain)}),Object.entries(t).map(([s,i])=>({date:s,value:i.length>0?i.reduce((r,a)=>r+a,0)/i.length:null}))}function cM(n,e){const t=[],s=new Date;for(let i=e-1;i>=0;i--){const a=new Date(s.getTime()-i*24*60*60*1e3).toISOString().split("T")[0],o=n.filter(c=>new Date(c.timestamp).toISOString().split("T")[0]===a).length;t.push({date:a,value:o})}return t}function dM(n){const e=[{min:0,max:2,label:"Mild (0-2)",count:0},{min:3,max:5,label:"Moderate (3-5)",count:0},{min:6,max:8,label:"Severe (6-8)",count:0},{min:9,max:10,label:"Extreme (9-10)",count:0}];n.forEach(i=>{const r=i.baselineData.pain,a=e.find(o=>r>=o.min&&r<=o.max);a&&a.count++});const t=n.length,s=t>0?e.reduce((i,r)=>{const a=r.count/t;return i+a*a},0):0;return{variance:Math.sqrt(s),data:e.map(i=>({label:i.label,value:i.count,percentage:t>0?i.count/t*100:0}))}}function uM(n){const e={};n.forEach(s=>{const i=s.baselineData.pain;(s.baselineData.symptoms||[]).forEach(a=>{e[a]||(e[a]=[]),e[a].push(i)})});const t=Object.entries(e).map(([s,i])=>({symptom:s,avgPain:i.reduce((r,a)=>r+a,0)/i.length,count:i.length})).sort((s,i)=>i.avgPain-s.avgPain);return{strength:t.length>0?t[0].avgPain:0,data:t.slice(0,5)}}function hM(n){const e=n.filter(o=>o.qualityOfLife);if(e.length===0)return{average:0,change:0,trendData:[]};const t=e.reduce((o,c)=>o+(c.qualityOfLife?.sleepQuality||0),0)/e.length,s=e.reduce((o,c)=>o+(c.qualityOfLife?.moodImpact||0),0)/e.length,i=(t+s)/2,r=0,a=e.map(o=>({date:new Date(o.timestamp).toISOString().split("T")[0],sleep:o.qualityOfLife?.sleepQuality||0,mood:o.qualityOfLife?.moodImpact||0,average:((o.qualityOfLife?.sleepQuality||0)+(o.qualityOfLife?.moodImpact||0))/2}));return{average:i,change:r,trendData:a}}function Kw(n){if(n.length<2)return 0;const e=n.length,t=e*(e-1)/2,s=n.reduce((o,c)=>o+c,0),i=n.reduce((o,c,d)=>o+d*c,0),r=e*(e-1)*(2*e-1)/6;return(e*i-t*s)/(e*r-t*t)}function fM(n){const e={};n.forEach(s=>{const i=new Date(s.timestamp).getHours(),r=i<6?"night":i<12?"morning":i<18?"afternoon":"evening";e[r]||(e[r]={pains:[],count:0}),e[r].pains.push(s.baselineData.pain),e[r].count++});const t=Object.entries(e).map(([s,i])=>({time:s,avgPain:i.pains.reduce((r,a)=>r+a,0)/i.pains.length,count:i.count})).sort((s,i)=>i.avgPain-s.avgPain);return t.length>0&&t[0].count>=3?{timeOfDay:{time:t[0].time,avgPain:t[0].avgPain,confidence:Math.min(t[0].count/n.length*100,90)}}:{}}function mM(n){if(n.length<7)return{predictedAvg:0,confidence:0};const e=n.slice(-7),t=e.reduce((a,o)=>a+o.baselineData.pain,0)/e.length,s=Kw(e.map(a=>a.baselineData.pain)),i=Math.max(0,Math.min(10,t+s*7)),r=Math.min(e.length*10,85);return{predictedAvg:i,confidence:r}}function pM(n){const e={};n.forEach(r=>{const a=new Date(r.timestamp).toISOString().split("T")[0];e[a]||(e[a]={values:[],count:0,notes:0,meds:0}),e[a].values.push(r.baselineData.pain),e[a].count+=1,r.notes&&(e[a].notes+=1),r.medications&&r.medications.length>0&&(e[a].meds+=1)});const t=Object.entries(e).sort(([r],[a])=>r.localeCompare(a)),s=t.map(([r,a])=>({date:r,value:a.values.reduce((o,c)=>o+c,0)/a.values.length})),i=t.map(([r,a])=>({date:r,count:a.count,notes:a.notes,meds:a.meds}));return{dailyAverages:s,dailyMeta:i}}const ra={generateTrendData:lM,generateFrequencyData:cM,calculateIntensityDistribution:dM,calculateSymptomCorrelation:uM,calculateQOLImpact:hM,calculateTrend:Kw,detectPatterns:fM,generateForecast:mM,buildDailyAggregates:pM};function gM({entries:n,className:e}){const[t,s]=W.useState("month"),[i,r]=W.useState(!0),[a,o]=W.useState("line"),[c,d]=W.useState(!1),[u,h]=W.useState(!1),[m,f]=W.useState(!1),y=W.useMemo(()=>{if(n.length===0)return[];const F=new Date,ke={week:7,month:30,quarter:90,year:365}[t],ue=new Date(F.getTime()-ke*24*60*60*1e3),D=n.filter($e=>new Date($e.timestamp)>=ue),V=[],Z=D.length>0?D.reduce(($e,Se)=>$e+Se.baselineData.pain,0)/D.length:0,ne=n.filter($e=>{const Se=new Date($e.timestamp),te=new Date(ue.getTime()-ke*24*60*60*1e3);return Se>=te&&Se<ue}).reduce(($e,Se)=>$e+Se.baselineData.pain,0)/Math.max(n.filter($e=>{const Se=new Date($e.timestamp),te=new Date(ue.getTime()-ke*24*60*60*1e3);return Se>=te&&Se<ue}).length,1),ae=ne>0?(Z-ne)/ne*100:0;V.push({id:"pain-level",name:"Average Pain Level",value:Z,change:ae,trend:ae>5?"up":ae<-5?"down":"stable",category:"Pain Management",description:"Average pain intensity across all entries",chartData:v(D,"pain")});const ce=D.length>0?D.length/ke:0,xe=n.filter($e=>{const Se=new Date($e.timestamp),te=new Date(ue.getTime()-ke*24*60*60*1e3);return Se>=te&&Se<ue}).length/ke,me=xe>0?(ce-xe)/xe*100:0;V.push({id:"frequency",name:"Entry Frequency",value:ce,change:me,trend:me>10?"up":me<-10?"down":"stable",category:"Tracking Habits",description:"Average entries per day",chartData:w(D,ke)});const Ne=j(D);V.push({id:"intensity",name:"Pain Distribution",value:Ne.variance,change:0,trend:"stable",category:"Pain Patterns",description:"Variability in pain intensity levels",chartData:Ne.data});const Me=C(D);V.push({id:"symptoms",name:"Symptom Patterns",value:Me.strength,change:0,trend:"stable",category:"Symptom Analysis",description:"Correlation between symptoms and pain levels",chartData:Me.data});const Ie=N(D);return V.push({id:"quality-of-life",name:"Quality of Life",value:Ie.average,change:Ie.change,trend:Ie.change>5?"up":Ie.change<-5?"down":"stable",category:"Wellbeing",description:"Impact on daily quality of life",chartData:Ie.trendData}),V},[n,t]),x=W.useMemo(()=>{const F=[];if(n.length<7)return F;const ke=n.slice(-14).map(Z=>Z.baselineData.pain),ue=P(ke);Math.abs(ue)>.5&&F.push({type:"trend",title:ue>0?"Increasing Pain Trend":"Decreasing Pain Trend",description:`Your pain levels have been ${ue>0?"increasing":"decreasing"} over the past 2 weeks with a slope of ${Vt(ue,2)} points per day.`,confidence:Math.min(Math.abs(ue)*20,95),impact:Math.abs(ue)>1?"high":"medium",timeframe:"Next 7 days",recommendation:ue>0?"Consider reviewing your pain management strategies":"Great progress! Keep up your current approach"});const D=L(n);D.timeOfDay&&F.push({type:"pattern",title:"Time-based Pain Pattern",description:`Higher pain levels detected ${D.timeOfDay.time} (${Vt(D.timeOfDay.avgPain,1)}/10 avg)`,confidence:D.timeOfDay.confidence,impact:"medium",timeframe:"Daily pattern",recommendation:`Consider adjusting activities around ${D.timeOfDay.time}`});const V=M(n);return V.confidence>70&&F.push({type:"forecast",title:"Pain Level Forecast",description:`Projected average pain level for next week: ${Vt(V.predictedAvg,1)}/10`,confidence:V.confidence,impact:V.predictedAvg>7?"high":"medium",timeframe:"Next 7 days",recommendation:V.predictedAvg>7?"Consider proactive pain management":"Continue current strategies"}),F},[n]);function v(F,he){return ra.generateTrendData(F,he)}function w(F,he){return ra.generateFrequencyData(F,he)}function j(F){return ra.calculateIntensityDistribution(F)}function C(F){return ra.calculateSymptomCorrelation(F)}function N(F){return ra.calculateQOLImpact(F)}function P(F){return ra.calculateTrend(F)}function L(F){return ra.detectPatterns(F)}function M(F){return ra.generateForecast(F)}const{dailyAverages:T,dailyMeta:k}=Ge.useMemo(()=>ra.buildDailyAggregates(n),[n]),z=T.map(F=>F.value),_=Yw(z,7),E=Zw(z,7),$=oM(z,7,2.5);function I(F,he=1){const ke=Math.max(0,Math.min(10,Number(F||0)))/10,ue="#4b5563",D="#ef4444",V=ue.replace("#",""),Z=D.replace("#",""),ne=parseInt(V.slice(0,2),16),ae=parseInt(V.slice(2,4),16),ce=parseInt(V.slice(4,6),16),xe=parseInt(Z.slice(0,2),16),me=parseInt(Z.slice(2,4),16),Ne=parseInt(Z.slice(4,6),16),Me=Math.round(ne+(xe-ne)*ke),Ie=Math.round(ae+(me-ae)*ke),$e=Math.round(ce+(Ne-ce)*ke);return`rgba(${Me}, ${Ie}, ${$e}, ${he})`}function J(){try{const he=[["date","avg_pain","rolling7_avg","stddev7","is_anomaly"].join(",")];for(let Z=0;Z<T.length;Z++){const ne=T[Z],ae=[ne.date,(ne.value??"").toString(),(_[Z]??"").toString(),(E[Z]??"").toString(),$.includes(Z)?"1":"0"];he.push(ae.join(","))}const ke=he.join(`
`),ue=new Blob([ke],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(ue),V=document.createElement("a");V.href=D,V.download=`pain-analytics-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(V),V.click(),V.remove(),URL.revokeObjectURL(D)}catch(F){console.error("CSV export failed",F)}}const se=F=>{switch(F){case"up":return l.jsx(Fn,{className:"h-4 w-4 text-red-500"});case"down":return l.jsx(ph,{className:"h-4 w-4 text-green-500"});default:return l.jsx(ba,{className:"h-4 w-4 text-blue-500"})}},oe=F=>{switch(F){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}};return Gw("advancedAnalytics")?n.length===0?l.jsx(We,{className:Ye("w-full",e),children:l.jsx(Ve,{className:"flex items-center justify-center p-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx(es,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),l.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Data Available"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Start tracking your pain to unlock advanced analytics and insights."})]})})}):l.jsxs("div",{className:Ye("w-full space-y-6",e),children:[l.jsx(We,{children:l.jsx(bt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx($s,{className:"h-6 w-6 text-purple-600"}),l.jsx("span",{children:"Advanced Analytics Dashboard"})]}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Predictive insights and advanced visualizations for your pain journey"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative",children:[l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>h(!u),className:"w-32 justify-between",children:[t==="week"?"Past Week":t==="month"?"Past Month":t==="quarter"?"Past Quarter":"Past Year",l.jsx(pr,{className:"h-4 w-4 ml-2"})]}),u&&l.jsx("div",{className:"absolute top-full mt-1 w-32 bg-card border rounded-md shadow-lg z-10",children:[{value:"week",label:"Past Week"},{value:"month",label:"Past Month"},{value:"quarter",label:"Past Quarter"},{value:"year",label:"Past Year"}].map(({value:F,label:he})=>l.jsx("button",{onClick:()=>{s(F),h(!1)},className:"w-full px-3 py-2 text-left hover:bg-accent text-sm",children:he},F))})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>f(!m),className:"w-32 justify-between",children:[a==="line"?"Line Chart":"Bar Chart",l.jsx(es,{className:"h-4 w-4 ml-2"})]}),m&&l.jsx("div",{className:"absolute top-full mt-1 w-32 bg-card border rounded-md shadow-lg z-10",children:[{value:"line",label:"Line Chart"},{value:"bar",label:"Bar Chart"}].map(({value:F,label:he})=>l.jsx("button",{onClick:()=>{o(F),f(!1)},className:"w-full px-3 py-2 text-left hover:bg-accent text-sm",children:he},F))})]}),l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>r(!i),children:[i?l.jsx(dg,{className:"h-4 w-4"}):l.jsx(Hh,{className:"h-4 w-4"}),i?"Hide":"Show"," Predictions"]}),l.jsx(Je,{variant:"outline",size:"sm",onClick:()=>d(!c),children:c?l.jsx(i4,{className:"h-4 w-4"}):l.jsx(Qj,{className:"h-4 w-4"})}),l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>J(),children:[l.jsx(pd,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:y.map(F=>l.jsx(We,{className:"hover:shadow-md transition-shadow",children:l.jsxs(Ve,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:F.name}),se(F.trend)]}),l.jsxs("div",{className:"text-2xl font-bold mb-1",children:[Vt(F.value,(F.id==="frequency",1)),F.id==="frequency"?"/day":F.id==="pain-level"?"/10":""]}),F.change!==0&&l.jsxs("div",{className:Ye("text-xs flex items-center",F.change>0?"text-red-600":"text-green-600"),children:[F.change>0?l.jsx(Fn,{className:"h-3 w-3 mr-1"}):l.jsx(ph,{className:"h-3 w-3 mr-1"}),Vt(Math.abs(F.change),1),"% vs previous period"]}),l.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:F.description})]})},F.id))}),i&&x.length>0&&l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(Gh,{className:"h-5 w-5 text-yellow-500"}),l.jsx("span",{children:"Predictive Insights"})]})}),l.jsx(Ve,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map((F,he)=>l.jsxs("div",{className:Ye("p-4 rounded-lg border",oe(F.impact)),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx(ts,{variant:"outline",className:"text-xs capitalize",children:F.type}),l.jsxs("span",{className:"text-xs font-medium",children:[F.confidence,"% confidence"]})]}),l.jsx("h4",{className:"font-medium mb-2",children:F.title}),l.jsx("p",{className:"text-sm mb-3",children:F.description}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsxs("div",{children:["Timeframe: ",F.timeframe]}),F.recommendation&&l.jsxs("div",{className:"mt-2 p-2 bg-white/50 rounded text-xs",children:["💡 ",F.recommendation]})]})]},he))})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(We,{className:Ye(c&&"lg:col-span-2"),children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(lg,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Level Trends"})]})}),l.jsx(Ve,{children:T.length>0&&l.jsx(pa,{data:{labels:(function(){return T.length<=7?T.map((ke,ue)=>`Day ${ue+1}`):T.map(ke=>ke.date)})(),datasets:[{label:"Average Pain Level",data:T.map(F=>F.value),_meta:k,borderColor:z.map(F=>I(F,1)),backgroundColor:z.map(F=>I(F,.08)),fill:!1,tension:.35,pointBackgroundColor:T.map((F,he)=>$.includes(he)?"rgba(239,68,68,1)":I(F.value,1)),pointRadius:T.map((F,he)=>$.includes(he)?6:4),yAxisID:"y"},{label:"Entries",data:k.map(F=>F.count),borderColor:"rgba(75,85,99,0.95)",backgroundColor:"rgba(75,85,99,0.12)",borderWidth:1,tension:.2,type:"bar",yAxisID:"y1"},{label:"7-day rolling avg",data:_,borderColor:xn("color-accent"),backgroundColor:"transparent",borderDash:[6,4],tension:.25,pointRadius:0,fill:!1,yAxisID:"y"}]},type:"line",height:c?420:320})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(rj,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Intensity Distribution"})]})}),l.jsx(Ve,{children:y.find(F=>F.id==="intensity")?.chartData&&l.jsx(pa,{data:{labels:y.find(F=>F.id==="intensity").chartData.map(F=>F.label),datasets:[{label:"Entries",data:y.find(F=>F.id==="intensity").chartData.map(F=>F.value),backgroundColor:[xn("color-secondary"),xn("color-accent"),xn("color-warning"),xn("color-destructive")]}]},type:"doughnut",height:300})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(es,{className:"h-5 w-5"}),l.jsx("span",{children:"Symptom-Pain Correlation"})]})}),l.jsx(Ve,{children:y.find(F=>F.id==="symptoms")?.chartData&&l.jsx(pa,{data:{labels:y.find(F=>F.id==="symptoms").chartData.map(F=>F.symptom),datasets:[{label:"Average Pain Level",data:y.find(F=>F.id==="symptoms").chartData.map(F=>F.avgPain),backgroundColor:xn("color-primary")}]},type:"bar",height:300})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(Oi,{className:"h-5 w-5 text-pink-500"}),l.jsx("span",{children:"Quality of Life Impact"})]})}),l.jsx(Ve,{children:y.find(F=>F.id==="quality-of-life")?.chartData&&l.jsx(pa,{data:{labels:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.date),datasets:[{label:"Sleep Quality",data:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.sleep),borderColor:xn("color-secondary"),backgroundColor:kh("color-secondary",.1),tension:.4},{label:"Mood Impact",data:y.find(F=>F.id==="quality-of-life").chartData.map(F=>F.mood),borderColor:xn("color-accent"),backgroundColor:kh("color-accent",.1),tension:.4}]},type:"line",height:300})})]})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(pr,{className:"h-5 w-5"}),l.jsx("span",{children:"Entry Frequency Pattern"})]})}),l.jsx(Ve,{children:y.find(F=>F.id==="frequency")?.chartData&&l.jsx(pa,{data:{labels:y.find(F=>F.id==="frequency").chartData.map(F=>new Date(F.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),datasets:[{label:"Entries per Day",data:y.find(F=>F.id==="frequency").chartData.map(F=>F.value),backgroundColor:xn("color-primary"),borderColor:xn("color-primary"),borderWidth:2}]},type:"bar",height:250})})]})]}):null}function sn(n){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(n)}var gr=Uint8Array,Ri=Uint16Array,Dg=Int32Array,Eg=new gr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ig=new gr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gx=new gr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xw=function(n,e){for(var t=new Ri(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var i=new Dg(t[30]),s=1;s<30;++s)for(var r=t[s];r<t[s+1];++r)i[r]=r-t[s]<<5|s;return{b:t,r:i}},Qw=Xw(Eg,2),yM=Qw.b,Lp=Qw.r;yM[28]=258,Lp[258]=28;var xM=Xw(Ig,0),Yx=xM.r,Mp=new Ri(32768);for(var vn=0;vn<32768;++vn){var $a=(vn&43690)>>1|(vn&21845)<<1;$a=($a&52428)>>2|($a&13107)<<2,$a=($a&61680)>>4|($a&3855)<<4,Mp[vn]=(($a&65280)>>8|($a&255)<<8)>>1}var nd=(function(n,e,t){for(var s=n.length,i=0,r=new Ri(e);i<s;++i)n[i]&&++r[n[i]-1];var a=new Ri(e);for(i=1;i<e;++i)a[i]=a[i-1]+r[i-1]<<1;var o;if(t){o=new Ri(1<<e);var c=15-e;for(i=0;i<s;++i)if(n[i])for(var d=i<<4|n[i],u=e-n[i],h=a[n[i]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)o[Mp[h]>>c]=d}else for(o=new Ri(s),i=0;i<s;++i)n[i]&&(o[i]=Mp[a[n[i]-1]++]>>15-n[i]);return o}),Wo=new gr(288);for(var vn=0;vn<144;++vn)Wo[vn]=8;for(var vn=144;vn<256;++vn)Wo[vn]=9;for(var vn=256;vn<280;++vn)Wo[vn]=7;for(var vn=280;vn<288;++vn)Wo[vn]=8;var jh=new gr(32);for(var vn=0;vn<32;++vn)jh[vn]=5;var vM=nd(Wo,9,0),bM=nd(jh,5,0),Jw=function(n){return(n+7)/8|0},wM=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new gr(n.subarray(e,t))},aa=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Ec=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},wm=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var i=t.length,r=t.slice();if(!i)return{t:t5,l:0};if(i==1){var a=new gr(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(P,L){return P.f-L.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],d=0,u=1,h=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=i-1;)o=t[t[d].f<t[h].f?d++:h++],c=t[d!=u&&t[d].f<t[h].f?d++:h++],t[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var m=r[0].s,s=1;s<i;++s)r[s].s>m&&(m=r[s].s);var f=new Ri(m+1),y=Tp(t[u-1],f,0);if(y>e){var s=0,x=0,v=y-e,w=1<<v;for(r.sort(function(L,M){return f[M.s]-f[L.s]||L.f-M.f});s<i;++s){var j=r[s].s;if(f[j]>e)x+=w-(1<<y-f[j]),f[j]=e;else break}for(x>>=v;x>0;){var C=r[s].s;f[C]<e?x-=1<<e-f[C]++-1:++s}for(;s>=0&&x;--s){var N=r[s].s;f[N]==e&&(--f[N],++x)}y=e}return{t:new gr(f),l:y}},Tp=function(n,e,t){return n.s==-1?Math.max(Tp(n.l,e,t+1),Tp(n.r,e,t+1)):e[n.s]=t},Zx=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ri(++e),s=0,i=n[0],r=1,a=function(c){t[s++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++r;else{if(!i&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(i),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(i);r=1,i=n[o]}return{c:t.subarray(0,s),n:e}},Ic=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},e5=function(n,e,t){var s=t.length,i=Jw(e+2);n[i]=s&255,n[i+1]=s>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var r=0;r<s;++r)n[i+r+4]=t[r];return(i+4+s)*8},Kx=function(n,e,t,s,i,r,a,o,c,d,u){aa(e,u++,t),++i[256];for(var h=wm(i,15),m=h.t,f=h.l,y=wm(r,15),x=y.t,v=y.l,w=Zx(m),j=w.c,C=w.n,N=Zx(x),P=N.c,L=N.n,M=new Ri(19),T=0;T<j.length;++T)++M[j[T]&31];for(var T=0;T<P.length;++T)++M[P[T]&31];for(var k=wm(M,7),z=k.t,_=k.l,E=19;E>4&&!z[Gx[E-1]];--E);var $=d+5<<3,I=Ic(i,Wo)+Ic(r,jh)+a,J=Ic(i,m)+Ic(r,x)+a+14+3*E+Ic(M,z)+2*M[16]+3*M[17]+7*M[18];if(c>=0&&$<=I&&$<=J)return e5(e,u,n.subarray(c,c+d));var se,oe,F,he;if(aa(e,u,1+(J<I)),u+=2,J<I){se=nd(m,f,0),oe=m,F=nd(x,v,0),he=x;var ke=nd(z,_,0);aa(e,u,C-257),aa(e,u+5,L-1),aa(e,u+10,E-4),u+=14;for(var T=0;T<E;++T)aa(e,u+3*T,z[Gx[T]]);u+=3*E;for(var ue=[j,P],D=0;D<2;++D)for(var V=ue[D],T=0;T<V.length;++T){var Z=V[T]&31;aa(e,u,ke[Z]),u+=z[Z],Z>15&&(aa(e,u,V[T]>>5&127),u+=V[T]>>12)}}else se=vM,oe=Wo,F=bM,he=jh;for(var T=0;T<o;++T){var ne=s[T];if(ne>255){var Z=ne>>18&31;Ec(e,u,se[Z+257]),u+=oe[Z+257],Z>7&&(aa(e,u,ne>>23&31),u+=Eg[Z]);var ae=ne&31;Ec(e,u,F[ae]),u+=he[ae],ae>3&&(Ec(e,u,ne>>5&8191),u+=Ig[ae])}else Ec(e,u,se[ne]),u+=oe[ne]}return Ec(e,u,se[256]),u+oe[256]},SM=new Dg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),t5=new gr(0),NM=function(n,e,t,s,i,r){var a=r.z||n.length,o=new gr(s+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(s,o.length-i),d=r.l,u=(r.r||0)&7;if(e){u&&(c[0]=r.r>>3);for(var h=SM[e-1],m=h>>13,f=h&8191,y=(1<<t)-1,x=r.p||new Ri(32768),v=r.h||new Ri(y+1),w=Math.ceil(t/3),j=2*w,C=function(Se){return(n[Se]^n[Se+1]<<w^n[Se+2]<<j)&y},N=new Dg(25e3),P=new Ri(288),L=new Ri(32),M=0,T=0,k=r.i||0,z=0,_=r.w||0,E=0;k+2<a;++k){var $=C(k),I=k&32767,J=v[$];if(x[I]=J,v[$]=I,_<=k){var se=a-k;if((M>7e3||z>24576)&&(se>423||!d)){u=Kx(n,c,0,N,P,L,T,z,E,k-E,u),z=M=T=0,E=k;for(var oe=0;oe<286;++oe)P[oe]=0;for(var oe=0;oe<30;++oe)L[oe]=0}var F=2,he=0,ke=f,ue=I-J&32767;if(se>2&&$==C(k-ue))for(var D=Math.min(m,se)-1,V=Math.min(32767,k),Z=Math.min(258,se);ue<=V&&--ke&&I!=J;){if(n[k+F]==n[k+F-ue]){for(var ne=0;ne<Z&&n[k+ne]==n[k+ne-ue];++ne);if(ne>F){if(F=ne,he=ue,ne>D)break;for(var ae=Math.min(ue,ne-2),ce=0,oe=0;oe<ae;++oe){var xe=k-ue+oe&32767,me=x[xe],Ne=xe-me&32767;Ne>ce&&(ce=Ne,J=xe)}}}I=J,J=x[I],ue+=I-J&32767}if(he){N[z++]=268435456|Lp[F]<<18|Yx[he];var Me=Lp[F]&31,Ie=Yx[he]&31;T+=Eg[Me]+Ig[Ie],++P[257+Me],++L[Ie],_=k+F,++M}else N[z++]=n[k],++P[n[k]]}}for(k=Math.max(k,_);k<a;++k)N[z++]=n[k],++P[n[k]];u=Kx(n,c,d,N,P,L,T,z,E,k-E,u),d||(r.r=u&7|c[u/8|0]<<3,u-=7,r.h=v,r.p=x,r.i=k,r.w=_)}else{for(var k=r.w||0;k<a+d;k+=65535){var $e=k+65535;$e>=a&&(c[u/8|0]=d,$e=a),u=e5(c,u+1,n.subarray(k,$e))}r.i=a}return wM(o,0,s+Jw(u)+i)},n5=function(){var n=1,e=0;return{p:function(t){for(var s=n,i=e,r=t.length|0,a=0;a!=r;){for(var o=Math.min(a+2655,r);a<o;++a)i+=s+=t[a];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}n=s,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},kM=function(n,e,t,s,i){if(!i&&(i={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new gr(r.length+n.length);a.set(r),a.set(n,r.length),n=a,i.w=r.length}return NM(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,i)},s5=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},jM=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=n5();i.p(e.dictionary),s5(n,2,i.d())}};function Dp(n,e){e||(e={});var t=n5();t.p(n);var s=kM(n,e,e.dictionary?6:2,4);return jM(s,e),s5(s,s.length-4,t.d()),s}var _M=typeof TextDecoder<"u"&&new TextDecoder,CM=0;try{_M.decode(t5,{stream:!0}),CM=1}catch{}function AM(n){if(Array.isArray(n))return n}function PM(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,i,r,a,o=[],c=!0,d=!1;try{if(r=(t=t.call(n)).next,e!==0)for(;!(c=(s=r.call(t)).done)&&(o.push(s.value),o.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw i}}return o}}function Xx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function LM(n,e){if(n){if(typeof n=="string")return Xx(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xx(n,e):void 0}}function MM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qx(n,e){return AM(n)||PM(n,e)||LM(n,e)||MM()}function Jx(n,e="utf8"){return new TextDecoder(e).decode(n)}const TM=new TextEncoder;function DM(n){return TM.encode(n)}const EM=1024*8,IM=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Sm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Rg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=EM,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,r=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof Rg)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),s?this.lastWrittenByte=r:this.lastWrittenByte=0,this.buffer=e,this.length=r,this.byteLength=r,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,r),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,i=new Uint8Array(s);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Sm[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,r=this.buffer.slice(i,i+s);if(this.littleEndian===IM&&t!=="uint8"&&t!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+s));o.reverse();const c=new Sm[t](o.buffer);return this.offset+=s,c.reverse(),c}const a=new Sm[t](r);return this.offset+=s,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Jx(this.readBytes(e))}decodeText(e=1,t="utf8"){return Jx(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(DM(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function tc(n){let e=n.length;for(;--e>=0;)n[e]=0}const RM=3,OM=258,i5=29,FM=256,zM=FM+1+i5,r5=30,BM=512,$M=new Array((zM+2)*2);tc($M);const WM=new Array(r5*2);tc(WM);const UM=new Array(BM);tc(UM);const qM=new Array(OM-RM+1);tc(qM);const VM=new Array(i5);tc(VM);const HM=new Array(r5);tc(HM);const GM=(n,e,t,s)=>{let i=n&65535|0,r=n>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[s++]|0,r=r+i|0;while(--a);i%=65521,r%=65521}return i|r<<16|0};var Ep=GM;const YM=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},ZM=new Uint32Array(YM()),KM=(n,e,t,s)=>{const i=ZM,r=s+t;n^=-1;for(let a=s;a<r;a++)n=n>>>8^i[(n^e[a])&255];return n^-1};var Mr=KM,Ip={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},a5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const XM=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var QM=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)XM(t,s)&&(n[s]=t[s])}}return n},JM=n=>{let e=0;for(let s=0,i=n.length;s<i;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,i=0,r=n.length;s<r;s++){let a=n[s];t.set(a,i),i+=a.length}return t},o5={assign:QM,flattenChunks:JM};let l5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l5=!1}const kd=new Uint8Array(256);for(let n=0;n<256;n++)kd[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;kd[254]=kd[254]=1;var eT=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,i,r,a=n.length,o=0;for(i=0;i<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),r=0,i=0;r<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<a&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),i++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const tT=(n,e)=>{if(e<65534&&n.subarray&&l5)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var nT=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,i;const r=new Array(t*2);for(i=0,s=0;s<t;){let a=n[s++];if(a<128){r[i++]=a;continue}let o=kd[a];if(o>4){r[i++]=65533,s+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&s<t;)a=a<<6|n[s++]&63,o--;if(o>1){r[i++]=65533;continue}a<65536?r[i++]=a:(a-=65536,r[i++]=55296|a>>10&1023,r[i++]=56320|a&1023)}return tT(r,i)},sT=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+kd[n[t]]>e?t:e},Rp={string2buf:eT,buf2string:nT,utf8border:sT};function iT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rT=iT;const ku=16209,aT=16191;var oT=function(e,t){let s,i,r,a,o,c,d,u,h,m,f,y,x,v,w,j,C,N,P,L,M,T,k,z;const _=e.state;s=e.next_in,k=e.input,i=s+(e.avail_in-5),r=e.next_out,z=e.output,a=r-(t-e.avail_out),o=r+(e.avail_out-257),c=_.dmax,d=_.wsize,u=_.whave,h=_.wnext,m=_.window,f=_.hold,y=_.bits,x=_.lencode,v=_.distcode,w=(1<<_.lenbits)-1,j=(1<<_.distbits)-1;e:do{y<15&&(f+=k[s++]<<y,y+=8,f+=k[s++]<<y,y+=8),C=x[f&w];t:for(;;){if(N=C>>>24,f>>>=N,y-=N,N=C>>>16&255,N===0)z[r++]=C&65535;else if(N&16){P=C&65535,N&=15,N&&(y<N&&(f+=k[s++]<<y,y+=8),P+=f&(1<<N)-1,f>>>=N,y-=N),y<15&&(f+=k[s++]<<y,y+=8,f+=k[s++]<<y,y+=8),C=v[f&j];n:for(;;){if(N=C>>>24,f>>>=N,y-=N,N=C>>>16&255,N&16){if(L=C&65535,N&=15,y<N&&(f+=k[s++]<<y,y+=8,y<N&&(f+=k[s++]<<y,y+=8)),L+=f&(1<<N)-1,L>c){e.msg="invalid distance too far back",_.mode=ku;break e}if(f>>>=N,y-=N,N=r-a,L>N){if(N=L-N,N>u&&_.sane){e.msg="invalid distance too far back",_.mode=ku;break e}if(M=0,T=m,h===0){if(M+=d-N,N<P){P-=N;do z[r++]=m[M++];while(--N);M=r-L,T=z}}else if(h<N){if(M+=d+h-N,N-=h,N<P){P-=N;do z[r++]=m[M++];while(--N);if(M=0,h<P){N=h,P-=N;do z[r++]=m[M++];while(--N);M=r-L,T=z}}}else if(M+=h-N,N<P){P-=N;do z[r++]=m[M++];while(--N);M=r-L,T=z}for(;P>2;)z[r++]=T[M++],z[r++]=T[M++],z[r++]=T[M++],P-=3;P&&(z[r++]=T[M++],P>1&&(z[r++]=T[M++]))}else{M=r-L;do z[r++]=z[M++],z[r++]=z[M++],z[r++]=z[M++],P-=3;while(P>2);P&&(z[r++]=z[M++],P>1&&(z[r++]=z[M++]))}}else if((N&64)===0){C=v[(C&65535)+(f&(1<<N)-1)];continue n}else{e.msg="invalid distance code",_.mode=ku;break e}break}}else if((N&64)===0){C=x[(C&65535)+(f&(1<<N)-1)];continue t}else if(N&32){_.mode=aT;break e}else{e.msg="invalid literal/length code",_.mode=ku;break e}break}}while(s<i&&r<o);P=y>>3,s-=P,y-=P<<3,f&=(1<<y)-1,e.next_in=s,e.next_out=r,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=r<o?257+(o-r):257-(r-o),_.hold=f,_.bits=y};const yl=15,ev=852,tv=592,nv=0,Nm=1,sv=2,lT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),uT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),hT=(n,e,t,s,i,r,a,o)=>{const c=o.bits;let d=0,u=0,h=0,m=0,f=0,y=0,x=0,v=0,w=0,j=0,C,N,P,L,M,T=null,k;const z=new Uint16Array(yl+1),_=new Uint16Array(yl+1);let E=null,$,I,J;for(d=0;d<=yl;d++)z[d]=0;for(u=0;u<s;u++)z[e[t+u]]++;for(f=c,m=yl;m>=1&&z[m]===0;m--);if(f>m&&(f=m),m===0)return i[r++]=1<<24|64<<16|0,i[r++]=1<<24|64<<16|0,o.bits=1,0;for(h=1;h<m&&z[h]===0;h++);for(f<h&&(f=h),v=1,d=1;d<=yl;d++)if(v<<=1,v-=z[d],v<0)return-1;if(v>0&&(n===nv||m!==1))return-1;for(_[1]=0,d=1;d<yl;d++)_[d+1]=_[d]+z[d];for(u=0;u<s;u++)e[t+u]!==0&&(a[_[e[t+u]]++]=u);if(n===nv?(T=E=a,k=20):n===Nm?(T=lT,E=cT,k=257):(T=dT,E=uT,k=0),j=0,u=0,d=h,M=r,y=f,x=0,P=-1,w=1<<f,L=w-1,n===Nm&&w>ev||n===sv&&w>tv)return 1;for(;;){$=d-x,a[u]+1<k?(I=0,J=a[u]):a[u]>=k?(I=E[a[u]-k],J=T[a[u]-k]):(I=96,J=0),C=1<<d-x,N=1<<y,h=N;do N-=C,i[M+(j>>x)+N]=$<<24|I<<16|J|0;while(N!==0);for(C=1<<d-1;j&C;)C>>=1;if(C!==0?(j&=C-1,j+=C):j=0,u++,--z[d]===0){if(d===m)break;d=e[t+a[u]]}if(d>f&&(j&L)!==P){for(x===0&&(x=f),M+=h,y=d-x,v=1<<y;y+x<m&&(v-=z[y+x],!(v<=0));)y++,v<<=1;if(w+=1<<y,n===Nm&&w>ev||n===sv&&w>tv)return 1;P=j&L,i[P]=f<<24|y<<16|M-r|0}}return j!==0&&(i[M+j]=d-x<<24|64<<16|0),o.bits=f,0};var sd=hT;const fT=0,c5=1,d5=2,{Z_FINISH:iv,Z_BLOCK:mT,Z_TREES:ju,Z_OK:Uo,Z_STREAM_END:pT,Z_NEED_DICT:gT,Z_STREAM_ERROR:Ki,Z_DATA_ERROR:u5,Z_MEM_ERROR:h5,Z_BUF_ERROR:yT,Z_DEFLATED:rv}=a5,lf=16180,av=16181,ov=16182,lv=16183,cv=16184,dv=16185,uv=16186,hv=16187,fv=16188,mv=16189,_h=16190,oa=16191,km=16192,pv=16193,jm=16194,gv=16195,yv=16196,xv=16197,vv=16198,_u=16199,Cu=16200,bv=16201,wv=16202,Sv=16203,Nv=16204,kv=16205,_m=16206,jv=16207,_v=16208,Nn=16209,f5=16210,m5=16211,xT=852,vT=592,bT=15,wT=bT,Cv=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function ST(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Zo=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<lf||e.mode>m5?1:0},p5=n=>{if(Zo(n))return Ki;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=lf,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(xT),e.distcode=e.distdyn=new Int32Array(vT),e.sane=1,e.back=-1,Uo},g5=n=>{if(Zo(n))return Ki;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,p5(n)},y5=(n,e)=>{let t;if(Zo(n))return Ki;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ki:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,g5(n))},x5=(n,e)=>{if(!n)return Ki;const t=new ST;n.state=t,t.strm=n,t.window=null,t.mode=lf;const s=y5(n,e);return s!==Uo&&(n.state=null),s},NT=n=>x5(n,wT);let Av=!0,Cm,Am;const kT=n=>{if(Av){Cm=new Int32Array(512),Am=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(sd(c5,n.lens,0,288,Cm,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;sd(d5,n.lens,0,32,Am,0,n.work,{bits:5}),Av=!1}n.lencode=Cm,n.lenbits=9,n.distcode=Am,n.distbits=5},v5=(n,e,t,s)=>{let i;const r=n.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),s>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(i=r.wsize-r.wnext,i>s&&(i=s),r.window.set(e.subarray(t-s,t-s+i),r.wnext),s-=i,s?(r.window.set(e.subarray(t-s,t),0),r.wnext=s,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0},jT=(n,e)=>{let t,s,i,r,a,o,c,d,u,h,m,f,y,x,v=0,w,j,C,N,P,L,M,T;const k=new Uint8Array(4);let z,_;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Zo(n)||!n.output||!n.input&&n.avail_in!==0)return Ki;t=n.state,t.mode===oa&&(t.mode=km),a=n.next_out,i=n.output,c=n.avail_out,r=n.next_in,s=n.input,o=n.avail_in,d=t.hold,u=t.bits,h=o,m=c,T=Uo;e:for(;;)switch(t.mode){case lf:if(t.wrap===0){t.mode=km;break}for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=d&255,k[1]=d>>>8&255,t.check=Mr(t.check,k,2,0),d=0,u=0,t.mode=av;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){n.msg="incorrect header check",t.mode=Nn;break}if((d&15)!==rv){n.msg="unknown compression method",t.mode=Nn;break}if(d>>>=4,u-=4,M=(d&15)+8,t.wbits===0&&(t.wbits=M),M>15||M>t.wbits){n.msg="invalid window size",t.mode=Nn;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=d&512?mv:oa,d=0,u=0;break;case av:for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.flags=d,(t.flags&255)!==rv){n.msg="unknown compression method",t.mode=Nn;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Nn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(k[0]=d&255,k[1]=d>>>8&255,t.check=Mr(t.check,k,2,0)),d=0,u=0,t.mode=ov;case ov:for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(k[0]=d&255,k[1]=d>>>8&255,k[2]=d>>>16&255,k[3]=d>>>24&255,t.check=Mr(t.check,k,4,0)),d=0,u=0,t.mode=lv;case lv:for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(k[0]=d&255,k[1]=d>>>8&255,t.check=Mr(t.check,k,2,0)),d=0,u=0,t.mode=cv;case cv:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(k[0]=d&255,k[1]=d>>>8&255,t.check=Mr(t.check,k,2,0)),d=0,u=0}else t.head&&(t.head.extra=null);t.mode=dv;case dv:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(r,r+f),M)),t.flags&512&&t.wrap&4&&(t.check=Mr(t.check,s,f,r)),o-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=uv;case uv:if(t.flags&2048){if(o===0)break e;f=0;do M=s[r+f++],t.head&&M&&t.length<65536&&(t.head.name+=String.fromCharCode(M));while(M&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=Mr(t.check,s,f,r)),o-=f,r+=f,M)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=hv;case hv:if(t.flags&4096){if(o===0)break e;f=0;do M=s[r+f++],t.head&&M&&t.length<65536&&(t.head.comment+=String.fromCharCode(M));while(M&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=Mr(t.check,s,f,r)),o-=f,r+=f,M)break e}else t.head&&(t.head.comment=null);t.mode=fv;case fv:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&4&&d!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Nn;break}d=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=oa;break;case mv:for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}n.adler=t.check=Cv(d),d=0,u=0,t.mode=_h;case _h:if(t.havedict===0)return n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,gT;n.adler=t.check=1,t.mode=oa;case oa:if(e===mT||e===ju)break e;case km:if(t.last){d>>>=u&7,u-=u&7,t.mode=_m;break}for(;u<3;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}switch(t.last=d&1,d>>>=1,u-=1,d&3){case 0:t.mode=pv;break;case 1:if(kT(t),t.mode=_u,e===ju){d>>>=2,u-=2;break e}break;case 2:t.mode=yv;break;case 3:n.msg="invalid block type",t.mode=Nn}d>>>=2,u-=2;break;case pv:for(d>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Nn;break}if(t.length=d&65535,d=0,u=0,t.mode=jm,e===ju)break e;case jm:t.mode=gv;case gv:if(f=t.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;i.set(s.subarray(r,r+f),a),o-=f,r+=f,c-=f,a+=f,t.length-=f;break}t.mode=oa;break;case yv:for(;u<14;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.nlen=(d&31)+257,d>>>=5,u-=5,t.ndist=(d&31)+1,d>>>=5,u-=5,t.ncode=(d&15)+4,d>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Nn;break}t.have=0,t.mode=xv;case xv:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.lens[E[t.have++]]=d&7,d>>>=3,u-=3}for(;t.have<19;)t.lens[E[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,z={bits:t.lenbits},T=sd(fT,t.lens,0,19,t.lencode,0,t.work,z),t.lenbits=z.bits,T){n.msg="invalid code lengths set",t.mode=Nn;break}t.have=0,t.mode=vv;case vv:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[d&(1<<t.lenbits)-1],w=v>>>24,j=v>>>16&255,C=v&65535,!(w<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(C<16)d>>>=w,u-=w,t.lens[t.have++]=C;else{if(C===16){for(_=w+2;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(d>>>=w,u-=w,t.have===0){n.msg="invalid bit length repeat",t.mode=Nn;break}M=t.lens[t.have-1],f=3+(d&3),d>>>=2,u-=2}else if(C===17){for(_=w+3;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=w,u-=w,M=0,f=3+(d&7),d>>>=3,u-=3}else{for(_=w+7;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=w,u-=w,M=0,f=11+(d&127),d>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Nn;break}for(;f--;)t.lens[t.have++]=M}}if(t.mode===Nn)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Nn;break}if(t.lenbits=9,z={bits:t.lenbits},T=sd(c5,t.lens,0,t.nlen,t.lencode,0,t.work,z),t.lenbits=z.bits,T){n.msg="invalid literal/lengths set",t.mode=Nn;break}if(t.distbits=6,t.distcode=t.distdyn,z={bits:t.distbits},T=sd(d5,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,z),t.distbits=z.bits,T){n.msg="invalid distances set",t.mode=Nn;break}if(t.mode=_u,e===ju)break e;case _u:t.mode=Cu;case Cu:if(o>=6&&c>=258){n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,oT(n,m),a=n.next_out,i=n.output,c=n.avail_out,r=n.next_in,s=n.input,o=n.avail_in,d=t.hold,u=t.bits,t.mode===oa&&(t.back=-1);break}for(t.back=0;v=t.lencode[d&(1<<t.lenbits)-1],w=v>>>24,j=v>>>16&255,C=v&65535,!(w<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(j&&(j&240)===0){for(N=w,P=j,L=C;v=t.lencode[L+((d&(1<<N+P)-1)>>N)],w=v>>>24,j=v>>>16&255,C=v&65535,!(N+w<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=N,u-=N,t.back+=N}if(d>>>=w,u-=w,t.back+=w,t.length=C,j===0){t.mode=kv;break}if(j&32){t.back=-1,t.mode=oa;break}if(j&64){n.msg="invalid literal/length code",t.mode=Nn;break}t.extra=j&15,t.mode=bv;case bv:if(t.extra){for(_=t.extra;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=wv;case wv:for(;v=t.distcode[d&(1<<t.distbits)-1],w=v>>>24,j=v>>>16&255,C=v&65535,!(w<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if((j&240)===0){for(N=w,P=j,L=C;v=t.distcode[L+((d&(1<<N+P)-1)>>N)],w=v>>>24,j=v>>>16&255,C=v&65535,!(N+w<=u);){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}d>>>=N,u-=N,t.back+=N}if(d>>>=w,u-=w,t.back+=w,j&64){n.msg="invalid distance code",t.mode=Nn;break}t.offset=C,t.extra=j&15,t.mode=Sv;case Sv:if(t.extra){for(_=t.extra;u<_;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Nn;break}t.mode=Nv;case Nv:if(c===0)break e;if(f=m-c,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Nn;break}f>t.wnext?(f-=t.wnext,y=t.wsize-f):y=t.wnext-f,f>t.length&&(f=t.length),x=t.window}else x=i,y=a-t.offset,f=t.length;f>c&&(f=c),c-=f,t.length-=f;do i[a++]=x[y++];while(--f);t.length===0&&(t.mode=Cu);break;case kv:if(c===0)break e;i[a++]=t.length,c--,t.mode=Cu;break;case _m:if(t.wrap){for(;u<32;){if(o===0)break e;o--,d|=s[r++]<<u,u+=8}if(m-=c,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Mr(t.check,i,m,a-m):Ep(t.check,i,m,a-m)),m=c,t.wrap&4&&(t.flags?d:Cv(d))!==t.check){n.msg="incorrect data check",t.mode=Nn;break}d=0,u=0}t.mode=jv;case jv:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,d+=s[r++]<<u,u+=8}if(t.wrap&4&&d!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Nn;break}d=0,u=0}t.mode=_v;case _v:T=pT;break e;case Nn:T=u5;break e;case f5:return h5;case m5:default:return Ki}return n.next_out=a,n.avail_out=c,n.next_in=r,n.avail_in=o,t.hold=d,t.bits=u,(t.wsize||m!==n.avail_out&&t.mode<Nn&&(t.mode<_m||e!==iv))&&v5(n,n.output,n.next_out,m-n.avail_out),h-=n.avail_in,m-=n.avail_out,n.total_in+=h,n.total_out+=m,t.total+=m,t.wrap&4&&m&&(n.adler=t.check=t.flags?Mr(t.check,i,m,n.next_out-m):Ep(t.check,i,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===oa?128:0)+(t.mode===_u||t.mode===jm?256:0),(h===0&&m===0||e===iv)&&T===Uo&&(T=yT),T},_T=n=>{if(Zo(n))return Ki;let e=n.state;return e.window&&(e.window=null),n.state=null,Uo},CT=(n,e)=>{if(Zo(n))return Ki;const t=n.state;return(t.wrap&2)===0?Ki:(t.head=e,e.done=!1,Uo)},AT=(n,e)=>{const t=e.length;let s,i,r;return Zo(n)||(s=n.state,s.wrap!==0&&s.mode!==_h)?Ki:s.mode===_h&&(i=1,i=Ep(i,e,t,0),i!==s.check)?u5:(r=v5(n,e,t,t),r?(s.mode=f5,h5):(s.havedict=1,Uo))};var PT=g5,LT=y5,MT=p5,TT=NT,DT=x5,ET=jT,IT=_T,RT=CT,OT=AT,FT="pako inflate (from Nodeca project)",ma={inflateReset:PT,inflateReset2:LT,inflateResetKeep:MT,inflateInit:TT,inflateInit2:DT,inflate:ET,inflateEnd:IT,inflateGetHeader:RT,inflateSetDictionary:OT,inflateInfo:FT};function zT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var BT=zT;const b5=Object.prototype.toString,{Z_NO_FLUSH:$T,Z_FINISH:WT,Z_OK:jd,Z_STREAM_END:Pm,Z_NEED_DICT:Lm,Z_STREAM_ERROR:UT,Z_DATA_ERROR:Pv,Z_MEM_ERROR:qT}=a5;function Rd(n){this.options=o5.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rT,this.strm.avail_out=0;let t=ma.inflateInit2(this.strm,e.windowBits);if(t!==jd)throw new Error(Ip[t]);if(this.header=new BT,ma.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Rp.string2buf(e.dictionary):b5.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ma.inflateSetDictionary(this.strm,e.dictionary),t!==jd)))throw new Error(Ip[t])}Rd.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,i=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?WT:$T,b5.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),r=ma.inflate(t,a),r===Lm&&i&&(r=ma.inflateSetDictionary(t,i),r===jd?r=ma.inflate(t,a):r===Pv&&(r=Lm));t.avail_in>0&&r===Pm&&t.state.wrap>0&&n[t.next_in]!==0;)ma.inflateReset(t),r=ma.inflate(t,a);switch(r){case UT:case Pv:case Lm:case qT:return this.onEnd(r),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||r===Pm))if(this.options.to==="string"){let c=Rp.utf8border(t.output,t.next_out),d=t.next_out-c,u=Rp.buf2string(t.output,c);t.next_out=d,t.avail_out=s-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===jd&&o===0)){if(r===Pm)return r=ma.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Rd.prototype.onData=function(n){this.chunks.push(n)};Rd.prototype.onEnd=function(n){n===jd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o5.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function VT(n,e){const t=new Rd(e);if(t.push(n),t.err)throw t.msg||Ip[t.err];return t.result}var HT=Rd,GT=VT,YT={Inflate:HT,inflate:GT};const{Inflate:ZT,inflate:KT}=YT;var Lv=ZT,XT=KT;const w5=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;w5[n]=e}const Mv=4294967295;function QT(n,e,t){let s=n;for(let i=0;i<t;i++)s=w5[(s^e[i])&255]^s>>>8;return s}function JT(n,e){return(QT(Mv,n,e)^Mv)>>>0}function Tv(n,e,t){const s=n.readUint32(),i=JT(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${i}`)}function S5(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function N5(n,e,t,s){let i=0;for(;i<s;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-s]&255}function k5(n,e,t,s){let i=0;if(t.length===0)for(;i<s;i++)e[i]=n[i];else for(;i<s;i++)e[i]=n[i]+t[i]&255}function j5(n,e,t,s,i){let r=0;if(t.length===0){for(;r<i;r++)e[r]=n[r];for(;r<s;r++)e[r]=n[r]+(e[r-i]>>1)&255}else{for(;r<i;r++)e[r]=n[r]+(t[r]>>1)&255;for(;r<s;r++)e[r]=n[r]+(e[r-i]+t[r]>>1)&255}}function _5(n,e,t,s,i){let r=0;if(t.length===0){for(;r<i;r++)e[r]=n[r];for(;r<s;r++)e[r]=n[r]+e[r-i]&255}else{for(;r<i;r++)e[r]=n[r]+t[r]&255;for(;r<s;r++)e[r]=n[r]+eD(e[r-i],t[r],t[r-i])&255}}function eD(n,e,t){const s=n+e-t,i=Math.abs(s-n),r=Math.abs(s-e),a=Math.abs(s-t);return i<=r&&i<=a?n:r<=a?e:t}function tD(n,e,t,s,i,r){switch(n){case 0:S5(e,t,i);break;case 1:N5(e,t,i,r);break;case 2:k5(e,t,s,i);break;case 3:j5(e,t,s,i,r);break;case 4:_5(e,t,s,i,r);break;default:throw new Error(`Unsupported filter: ${n}`)}}const nD=new Uint16Array([255]),sD=new Uint8Array(nD.buffer),iD=sD[0]===255;function rD(n){const{data:e,width:t,height:s,channels:i,depth:r}=n,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(r/8)*i,c=new Uint8Array(s*t*o);let d=0;for(let u=0;u<7;u++){const h=a[u],m=Math.ceil((t-h.x)/h.xStep),f=Math.ceil((s-h.y)/h.yStep);if(m<=0||f<=0)continue;const y=m*o,x=new Uint8Array(y);for(let v=0;v<f;v++){const w=e[d++],j=e.subarray(d,d+y);d+=y;const C=new Uint8Array(y);tD(w,j,C,x,y,o),x.set(C);for(let N=0;N<m;N++){const P=h.x+N*h.xStep,L=h.y+v*h.yStep;if(!(P>=t||L>=s))for(let M=0;M<o;M++)c[(L*t+P)*o+M]=C[N*o+M]}}}if(r===16){const u=new Uint16Array(c.buffer);if(iD)for(let h=0;h<u.length;h++)u[h]=aD(u[h]);return u}else return c}function aD(n){return(n&255)<<8|n>>8&255}const oD=new Uint16Array([255]),lD=new Uint8Array(oD.buffer),cD=lD[0]===255,dD=new Uint8Array(0);function Dv(n){const{data:e,width:t,height:s,channels:i,depth:r}=n,a=Math.ceil(r/8)*i,o=Math.ceil(r/8*i*t),c=new Uint8Array(s*o);let d=dD,u=0,h,m;for(let f=0;f<s;f++){switch(h=e.subarray(u+1,u+1+o),m=c.subarray(f*o,(f+1)*o),e[u]){case 0:S5(h,m,o);break;case 1:N5(h,m,o,a);break;case 2:k5(h,m,d,o);break;case 3:j5(h,m,d,o,a);break;case 4:_5(h,m,d,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}d=m,u+=o+1}if(r===16){const f=new Uint16Array(c.buffer);if(cD)for(let y=0;y<f.length;y++)f[y]=uD(f[y]);return f}else return c}function uD(n){return(n&255)<<8|n>>8&255}const Ju=Uint8Array.of(137,80,78,71,13,10,26,10);function Ev(n){if(!hD(n.readBytes(Ju.length)))throw new Error("wrong PNG signature")}function hD(n){if(n.length<Ju.length)return!1;for(let e=0;e<Ju.length;e++)if(n[e]!==Ju[e])return!1;return!0}const fD="tEXt",mD=0,C5=new TextDecoder("latin1");function pD(n){if(yD(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const gD=/^[\u0000-\u00FF]*$/;function yD(n){if(!gD.test(n))throw new Error("invalid latin1 text")}function xD(n,e,t){const s=A5(e);n[s]=vD(e,t-s.length-1)}function A5(n){for(n.mark();n.readByte()!==mD;);const e=n.offset;n.reset();const t=C5.decode(n.readBytes(e-n.offset-1));return n.skip(1),pD(t),t}function vD(n,e){return C5.decode(n.readBytes(e))}const Di={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Mm={UNKNOWN:-1,DEFLATE:0},Iv={UNKNOWN:-1,ADAPTIVE:0},Tm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Au={NONE:0,BACKGROUND:1,PREVIOUS:2},Dm={SOURCE:0,OVER:1};class bD extends Rg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new Lv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Mm.UNKNOWN,this._filterMethod=Iv.UNKNOWN,this._interlaceMethod=Tm.UNKNOWN,this._colorType=Di.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ev(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Ev(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case fD:xD(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Tv(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Tv(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=wD(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case Di.GREYSCALE:s=1;break;case Di.TRUECOLOUR:s=3;break;case Di.INDEXED_COLOUR:s=1;break;case Di.GREYSCALE_ALPHA:s=2;break;case Di.TRUECOLOUR_ALPHA:s=4;break;case Di.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Mm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<t;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Di.GREYSCALE:case Di.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Di.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Di.UNKNOWN:case Di.GREYSCALE_ALPHA:case Di.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=A5(this),s=this.readUint8();if(s!==Mm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:XT(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=Dv({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(s,i,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case Au.NONE:break;case Au.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let r=0;r<this._png.width;r++){const a=(i*e.width+r)*this._png.channels;for(let o=0;o<this._png.channels;o++)s.data[a+o]=0}break;case Au.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,i=(r,a)=>{const o=((r+t.yOffset)*this._png.width+t.xOffset+a)*this._png.channels,c=(r*t.width+a)*this._png.channels;return{index:o,frameIndex:c}};switch(t.blendOp){case Dm.SOURCE:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:o,frameIndex:c}=i(r,a);for(let d=0;d<this._png.channels;d++)e.data[o+d]=t.data[c+d]}break;case Dm.OVER:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:o,frameIndex:c}=i(r,a);for(let d=0;d<this._png.channels;d++){const u=t.data[c+this._png.channels-1]/s,h=d%(this._png.channels-1)===0?1:t.data[c+d],m=Math.floor(u*h+(1-u)*e.data[o+d]);e.data[o+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Iv.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Tm.NO_INTERLACE)this._png.data=Dv({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Tm.ADAM7)this._png.data=rD({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Au.NONE,blendOp:Dm.SOURCE,data:e}),this._inflator=new Lv,this._writingDataChunks=!1}}function wD(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Rv;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Rv||(Rv={}));function SD(n,e){return new bD(n,e).decode()}var At=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Em(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var cn={log:Em,warn:function(n){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):Em.call(null,arguments))},error:function(n){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):Em(n))}};function Im(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Lo(s.response,e,t)},s.onerror=function(){cn.error("could not download file")},s.send()}function Ov(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Pu(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Lo=At.saveAs||((typeof window>"u"?"undefined":sn(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=At.URL||At.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Ov(i.href)?Im(n,e,t):Pu(i,i.target="_blank"):Pu(i)):(i.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){Pu(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Ov(n))Im(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){Pu(s)})}else navigator.msSaveOrOpenBlob((function(i,r){return r===void 0?r={autoBom:!1}:sn(r)!=="object"&&(cn.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Im(n,e,t);var i=n.type==="application/octet-stream",r=/constructor/i.test(At.HTMLElement)||At.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&r)&&(typeof FileReader>"u"?"undefined":sn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},o.readAsDataURL(n)}else{var c=At.URL||At.webkitURL,d=c.createObjectURL(n);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function P5(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<t.length;s++){var i=t[s].re,r=t[s].process,a=i.exec(n);a&&(e=r(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var eh=At.atob.bind(At),Fv=At.btoa.bind(At);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rm(n,e){var t=n[0],s=n[1],i=n[2],r=n[3];t=Ds(t,s,i,r,e[0],7,-680876936),r=Ds(r,t,s,i,e[1],12,-389564586),i=Ds(i,r,t,s,e[2],17,606105819),s=Ds(s,i,r,t,e[3],22,-1044525330),t=Ds(t,s,i,r,e[4],7,-176418897),r=Ds(r,t,s,i,e[5],12,1200080426),i=Ds(i,r,t,s,e[6],17,-1473231341),s=Ds(s,i,r,t,e[7],22,-45705983),t=Ds(t,s,i,r,e[8],7,1770035416),r=Ds(r,t,s,i,e[9],12,-1958414417),i=Ds(i,r,t,s,e[10],17,-42063),s=Ds(s,i,r,t,e[11],22,-1990404162),t=Ds(t,s,i,r,e[12],7,1804603682),r=Ds(r,t,s,i,e[13],12,-40341101),i=Ds(i,r,t,s,e[14],17,-1502002290),t=Es(t,s=Ds(s,i,r,t,e[15],22,1236535329),i,r,e[1],5,-165796510),r=Es(r,t,s,i,e[6],9,-1069501632),i=Es(i,r,t,s,e[11],14,643717713),s=Es(s,i,r,t,e[0],20,-373897302),t=Es(t,s,i,r,e[5],5,-701558691),r=Es(r,t,s,i,e[10],9,38016083),i=Es(i,r,t,s,e[15],14,-660478335),s=Es(s,i,r,t,e[4],20,-405537848),t=Es(t,s,i,r,e[9],5,568446438),r=Es(r,t,s,i,e[14],9,-1019803690),i=Es(i,r,t,s,e[3],14,-187363961),s=Es(s,i,r,t,e[8],20,1163531501),t=Es(t,s,i,r,e[13],5,-1444681467),r=Es(r,t,s,i,e[2],9,-51403784),i=Es(i,r,t,s,e[7],14,1735328473),t=Is(t,s=Es(s,i,r,t,e[12],20,-1926607734),i,r,e[5],4,-378558),r=Is(r,t,s,i,e[8],11,-2022574463),i=Is(i,r,t,s,e[11],16,1839030562),s=Is(s,i,r,t,e[14],23,-35309556),t=Is(t,s,i,r,e[1],4,-1530992060),r=Is(r,t,s,i,e[4],11,1272893353),i=Is(i,r,t,s,e[7],16,-155497632),s=Is(s,i,r,t,e[10],23,-1094730640),t=Is(t,s,i,r,e[13],4,681279174),r=Is(r,t,s,i,e[0],11,-358537222),i=Is(i,r,t,s,e[3],16,-722521979),s=Is(s,i,r,t,e[6],23,76029189),t=Is(t,s,i,r,e[9],4,-640364487),r=Is(r,t,s,i,e[12],11,-421815835),i=Is(i,r,t,s,e[15],16,530742520),t=Rs(t,s=Is(s,i,r,t,e[2],23,-995338651),i,r,e[0],6,-198630844),r=Rs(r,t,s,i,e[7],10,1126891415),i=Rs(i,r,t,s,e[14],15,-1416354905),s=Rs(s,i,r,t,e[5],21,-57434055),t=Rs(t,s,i,r,e[12],6,1700485571),r=Rs(r,t,s,i,e[3],10,-1894986606),i=Rs(i,r,t,s,e[10],15,-1051523),s=Rs(s,i,r,t,e[1],21,-2054922799),t=Rs(t,s,i,r,e[8],6,1873313359),r=Rs(r,t,s,i,e[15],10,-30611744),i=Rs(i,r,t,s,e[6],15,-1560198380),s=Rs(s,i,r,t,e[13],21,1309151649),t=Rs(t,s,i,r,e[4],6,-145523070),r=Rs(r,t,s,i,e[11],10,-1120210379),i=Rs(i,r,t,s,e[2],15,718787259),s=Rs(s,i,r,t,e[9],21,-343485551),n[0]=Za(t,n[0]),n[1]=Za(s,n[1]),n[2]=Za(i,n[2]),n[3]=Za(r,n[3])}function cf(n,e,t,s,i,r){return e=Za(Za(e,n),Za(s,r)),Za(e<<i|e>>>32-i,t)}function Ds(n,e,t,s,i,r,a){return cf(e&t|~e&s,n,e,i,r,a)}function Es(n,e,t,s,i,r,a){return cf(e&s|t&~s,n,e,i,r,a)}function Is(n,e,t,s,i,r,a){return cf(e^t^s,n,e,i,r,a)}function Rs(n,e,t,s,i,r,a){return cf(t^(e|~s),n,e,i,r,a)}function L5(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Rm(s,ND(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Rm(s,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Rm(s,i),s}function ND(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var zv="0123456789abcdef".split("");function kD(n){for(var e="",t=0;t<4;t++)e+=zv[n>>8*t+4&15]+zv[n>>8*t&15];return e}function jD(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Op(n){return L5(n).map(jD).join("")}var _D=(function(n){for(var e=0;e<n.length;e++)n[e]=kD(n[e]);return n.join("")})(L5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Za(n,e){if(_D){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Fp(n,e){var t,s,i,r;if(n!==t){for(var a=(i=n,r=1+(256/n.length|0),new Array(r+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+a.charCodeAt(c))%256,o[c]=o[d],o[d]=u}t=n,s=o}else o=s;var h=e.length,m=0,f=0,y="";for(c=0;c<h;c++)f=(f+(u=o[m=(m+1)%256]))%256,o[m]=o[f],o[f]=u,a=o[(o[m]+o[f])%256],y+=String.fromCharCode(e.charCodeAt(c)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Bv={print:4,modify:8,copy:16,"annot-forms":32};function jl(n,e,t,s){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(Bv.perm!==void 0)throw new Error("Invalid permission: "+o);i+=Bv[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var r=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,a),this.P=-(1+(255^i)),this.encryptionKey=Op(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Fp(this.encryptionKey,this.padding)}function _l(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var i=n.charCodeAt(s);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[s]}return e}function $v(n){if(sn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,i){if(i=i||!1,typeof t!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[s,!!i],r},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var r in e[t]){var a=e[t][r];try{a[0].apply(n,s)}catch(o){At.console&&cn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ch(n){if(!(this instanceof Ch))return new Ch(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function M5(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Mo(n,e,t,s,i){if(!(this instanceof Mo))return new Mo(n,e,t,s,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,M5.call(this,s,i)}function Pl(n,e,t,s,i){if(!(this instanceof Pl))return new Pl(n,e,t,s,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,M5.call(this,s,i)}function ut(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],r=arguments[3],a=[],o=1,c=16,d="S",u=null;sn(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,i=n.format||i,r=n.compress||n.compressPdf||r,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),d=n.defaultPathOperation||"S"),a=n.filters||(r===!0?["FlateEncode"]:a),s=s||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=$v;var y="1.3",x=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(b){y=b};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var w=f.__private__.getPageFormat=function(b){return v[b]};i=i||"a4";var j="compat",C="advanced",N=j;function P(){this.saveGraphicsState(),te(new vt(pt,0,0,-pt,0,ji()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),d="n",N=C}function L(){this.restoreGraphicsState(),d="S",N=j}var M=f.__private__.combineFontStyleAndFontWeight=function(b,O){if(b=="bold"&&O=="normal"||b=="bold"&&O==400||b=="normal"&&O=="italic"||b=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(b=O==400||O==="normal"?b==="italic"?"italic":"normal":O!=700&&O!=="bold"||b!=="normal"?(O==700?"bold":O)+""+b:"bold"),b};f.advancedAPI=function(b){var O=N===j;return O&&P.call(this),typeof b!="function"||(b(this),O&&L.call(this)),this},f.compatAPI=function(b){var O=N===C;return O&&L.call(this),typeof b!="function"||(b(this),O&&P.call(this)),this},f.isAdvancedAPI=function(){return N===C};var T,k=function(b){if(N!==C)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=f.roundToPrecision=f.__private__.roundToPrecision=function(b,O){var Q=e||O;if(isNaN(b)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(Q).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof c=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return z(b,c)}:c==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return z(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return z(b,16)};var _=f.f2=f.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return z(b,2)},E=f.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return z(b,3)},$=f.scale=f.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return N===j?b*pt:N===C?b:void 0},I=function(b){return $((function(O){return N===j?ji()-O:N===C?O:void 0})(b))};f.__private__.setPrecision=f.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var J,se="00000000000000000000000000000000",oe=f.__private__.getFileId=function(){return se},F=f.__private__.setFileId=function(b){return se=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Pn=new jl(u.userPermissions,u.userPassword,u.ownerPassword,se)),se};f.setFileId=function(b){return F(b),this},f.getFileId=function(){return oe()};var he=f.__private__.convertDateToPDFDate=function(b){var O=b.getTimezoneOffset(),Q=O<0?"+":"-",le=Math.floor(Math.abs(O/60)),pe=Math.abs(O%60),Pe=[Q,Z(le),"'",Z(pe),"'"].join("");return["D:",b.getFullYear(),Z(b.getMonth()+1),Z(b.getDate()),Z(b.getHours()),Z(b.getMinutes()),Z(b.getSeconds()),Pe].join("")},ke=f.__private__.convertPDFDateToDate=function(b){var O=parseInt(b.substr(2,4),10),Q=parseInt(b.substr(6,2),10)-1,le=parseInt(b.substr(8,2),10),pe=parseInt(b.substr(10,2),10),Pe=parseInt(b.substr(12,2),10),Re=parseInt(b.substr(14,2),10);return new Date(O,Q,le,pe,Pe,Re,0)},ue=f.__private__.setCreationDate=function(b){var O;if(b===void 0&&(b=new Date),b instanceof Date)O=he(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=b}return J=O},D=f.__private__.getCreationDate=function(b){var O=J;return b==="jsDate"&&(O=ke(J)),O};f.setCreationDate=function(b){return ue(b),this},f.getCreationDate=function(b){return D(b)};var V,Z=f.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},ne=f.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},ae=0,ce=[],xe=[],me=0,Ne=[],Me=[],Ie=!1,$e=xe;f.__private__.setCustomOutputDestination=function(b){Ie=!0,$e=b};var Se=function(b){Ie||($e=b)};f.__private__.resetCustomOutputDestination=function(){Ie=!1,$e=xe};var te=f.__private__.out=function(b){return b=b.toString(),me+=b.length+1,$e.push(b),$e},St=f.__private__.write=function(b){return te(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},xt=f.__private__.getArrayBuffer=function(b){for(var O=b.length,Q=new ArrayBuffer(O),le=new Uint8Array(Q);O--;)le[O]=b.charCodeAt(O);return Q},mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return mt};var ze=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(b){return ze=N===C?b/pt:b,this};var ee,ie=f.__private__.getFontSize=f.getFontSize=function(){return N===j?ze:ze*pt},ye=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(b){return ye=b,this},f.__private__.getR2L=f.getR2L=function(){return ye};var Ce,Te=f.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))ee=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');ee=b}else ee=parseInt(b,10)};f.__private__.getZoomMode=function(){return ee};var je,Fe=f.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');Ce=b};f.__private__.getPageMode=function(){return Ce};var lt=f.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');je=b};f.__private__.getLayoutMode=function(){return je},f.__private__.setDisplayMode=f.setDisplayMode=function(b,O,Q){return Te(b),lt(O),Fe(Q),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(b){if(Object.keys(Ze).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[b]},f.__private__.getDocumentProperties=function(){return Ze},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(b){for(var O in Ze)Ze.hasOwnProperty(O)&&b[O]&&(Ze[O]=b[O]);return this},f.__private__.setDocumentProperty=function(b,O){if(Object.keys(Ze).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[b]=O};var Ke,pt,Qe,Zt,Bt,nt={},_t={},Kt=[],gt={},Dt={},Lt={},An={},Dn=null,en=0,Nt=[],Xt=new $v(f),Vr=n.hotfixes||[],ps={},Fi={},zi=[],vt=function b(O,Q,le,pe,Pe,Re){if(!(this instanceof b))return new b(O,Q,le,pe,Pe,Re);isNaN(O)&&(O=1),isNaN(Q)&&(Q=0),isNaN(le)&&(le=0),isNaN(pe)&&(pe=1),isNaN(Pe)&&(Pe=0),isNaN(Re)&&(Re=0),this._matrix=[O,Q,le,pe,Pe,Re]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(b)},vt.prototype.multiply=function(b){var O=b.sx*this.sx+b.shy*this.shx,Q=b.sx*this.shy+b.shy*this.sy,le=b.shx*this.sx+b.sy*this.shx,pe=b.shx*this.shy+b.sy*this.sy,Pe=b.tx*this.sx+b.ty*this.shx+this.tx,Re=b.tx*this.shy+b.ty*this.sy+this.ty;return new vt(O,Q,le,pe,Pe,Re)},vt.prototype.decompose=function(){var b=this.sx,O=this.shy,Q=this.shx,le=this.sy,pe=this.tx,Pe=this.ty,Re=Math.sqrt(b*b+O*O),ot=(b/=Re)*Q+(O/=Re)*le;Q-=b*ot,le-=O*ot;var ht=Math.sqrt(Q*Q+le*le);return ot/=ht,b*(le/=ht)<O*(Q/=ht)&&(b=-b,O=-O,ot=-ot,Re=-Re),{scale:new vt(Re,0,0,ht,0,0),translate:new vt(1,0,0,1,pe,Pe),rotate:new vt(b,O,-O,b,0,0),skew:new vt(1,0,ot,1,0,0)}},vt.prototype.toString=function(b){return this.join(" ")},vt.prototype.inversed=function(){var b=this.sx,O=this.shy,Q=this.shx,le=this.sy,pe=this.tx,Pe=this.ty,Re=1/(b*le-O*Q),ot=le*Re,ht=-O*Re,Ct=-Q*Re,It=b*Re;return new vt(ot,ht,Ct,It,-ot*pe-Ct*Pe,-ht*pe-It*Pe)},vt.prototype.applyToPoint=function(b){var O=b.x*this.sx+b.y*this.shx+this.tx,Q=b.x*this.shy+b.y*this.sy+this.ty;return new go(O,Q)},vt.prototype.applyToRectangle=function(b){var O=this.applyToPoint(b),Q=this.applyToPoint(new go(b.x+b.w,b.y+b.h));return new cc(O.x,O.y,Q.x-O.x,Q.y-O.y)},vt.prototype.clone=function(){var b=this.sx,O=this.shy,Q=this.shx,le=this.sy,pe=this.tx,Pe=this.ty;return new vt(b,O,Q,le,pe,Pe)},f.Matrix=vt;var Qi=f.matrixMult=function(b,O){return O.multiply(b)},si=new vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=si;var ii=function(b,O){if(!Dt[b]){var Q=(O instanceof Mo?"Sh":"P")+(Object.keys(gt).length+1).toString(10);O.id=Q,Dt[b]=Q,gt[Q]=O,Xt.publish("addPattern",O)}};f.ShadingPattern=Mo,f.TilingPattern=Pl,f.addShadingPattern=function(b,O){return k("addShadingPattern()"),ii(b,O),this},f.beginTilingPattern=function(b){k("beginTilingPattern()"),dc(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},f.endTilingPattern=function(b,O){k("endTilingPattern()"),O.stream=Me[V].join(`
`),ii(b,O),Xt.publish("endTilingPattern",O),zi.pop().restore()};var ri,mn=f.__private__.newObject=function(){var b=En();return is(b,!0),b},En=f.__private__.newObjectDeferred=function(){return ae++,ce[ae]=function(){return me},ae},is=function(b,O){return O=typeof O=="boolean"&&O,ce[b]=me,O&&te(b+" 0 obj"),b},br=f.__private__.newAdditionalObject=function(){var b={objId:En(),content:""};return Ne.push(b),b},wr=En(),ai=En(),Si=f.__private__.decodeColorString=function(b){var O=b.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var Q=parseFloat(O[0]);O=[Q,Q,Q,"r"]}for(var le="#",pe=0;pe<3;pe++)le+=("0"+Math.floor(255*parseFloat(O[pe])).toString(16)).slice(-2);return le},oi=f.__private__.encodeColorString=function(b){var O;typeof b=="string"&&(b={ch1:b});var Q=b.ch1,le=b.ch2,pe=b.ch3,Pe=b.ch4,Re=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var ot=new P5(Q);if(ot.ok)Q=ot.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var ht=parseInt(Q.substr(1),16);Q=ht>>16&255,le=ht>>8&255,pe=255&ht}if(le===void 0||Pe===void 0&&Q===le&&le===pe)O=typeof Q=="string"?Q+" "+Re[0]:b.precision===2?_(Q/255)+" "+Re[0]:E(Q/255)+" "+Re[0];else if(Pe===void 0||sn(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",Re[1]].join(" ");O=typeof Q=="string"?[Q,le,pe,Re[1]].join(" "):b.precision===2?[_(Q/255),_(le/255),_(pe/255),Re[1]].join(" "):[E(Q/255),E(le/255),E(pe/255),Re[1]].join(" ")}else O=typeof Q=="string"?[Q,le,pe,Pe,Re[2]].join(" "):b.precision===2?[_(Q),_(le),_(pe),_(Pe),Re[2]].join(" "):[E(Q),E(le),E(pe),E(Pe),Re[2]].join(" ");return O},li=f.__private__.getFilters=function(){return a},Cs=f.__private__.putStream=function(b){var O=(b=b||{}).data||"",Q=b.filters||li(),le=b.alreadyAppliedFilters||[],pe=b.addLength1||!1,Pe=O.length,Re=b.objectId,ot=function(rs){return rs};if(u!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ot=Pn.encryptor(Re,0));var ht={};Q===!0&&(Q=["FlateEncode"]);var Ct=b.additionalKeyValues||[],It=(ht=ut.API.processDataByFilters!==void 0?ut.API.processDataByFilters(O,Q):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(ht.data.length!==0&&(Ct.push({key:"Length",value:ht.data.length}),pe===!0&&Ct.push({key:"Length1",value:Pe})),It.length!=0)if(It.split("/").length-1==1)Ct.push({key:"Filter",value:It});else{Ct.push({key:"Filter",value:"["+It+"]"});for(var Jt=0;Jt<Ct.length;Jt+=1)if(Ct[Jt].key==="DecodeParms"){for(var Ln=[],Kn=0;Kn<ht.reverseChain.split("/").length-1;Kn+=1)Ln.push("null");Ln.push(Ct[Jt].value),Ct[Jt].value="["+Ln.join(" ")+"]"}}te("<<");for(var rn=0;rn<Ct.length;rn++)te("/"+Ct[rn].key+" "+Ct[rn].value);te(">>"),ht.data.length!==0&&(te("stream"),te(ot(ht.data)),te("endstream"))},qs=f.__private__.putPage=function(b){var O=b.number,Q=b.data,le=b.objId,pe=b.contentsObjId;is(le,!0),te("<</Type /Page"),te("/Parent "+b.rootDictionaryObjId+" 0 R"),te("/Resources "+b.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(T(b.mediaBox.bottomLeftX))+" "+parseFloat(T(b.mediaBox.bottomLeftY))+" "+T(b.mediaBox.topRightX)+" "+T(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&te("/CropBox ["+T(b.cropBox.bottomLeftX)+" "+T(b.cropBox.bottomLeftY)+" "+T(b.cropBox.topRightX)+" "+T(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&te("/BleedBox ["+T(b.bleedBox.bottomLeftX)+" "+T(b.bleedBox.bottomLeftY)+" "+T(b.bleedBox.topRightX)+" "+T(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&te("/TrimBox ["+T(b.trimBox.bottomLeftX)+" "+T(b.trimBox.bottomLeftY)+" "+T(b.trimBox.topRightX)+" "+T(b.trimBox.topRightY)+"]"),b.artBox!==null&&te("/ArtBox ["+T(b.artBox.bottomLeftX)+" "+T(b.artBox.bottomLeftY)+" "+T(b.artBox.topRightX)+" "+T(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&te("/UserUnit "+b.userUnit),Xt.publish("putPage",{objId:le,pageContext:Nt[O],pageNumber:O,page:Q}),te("/Contents "+pe+" 0 R"),te(">>"),te("endobj");var Pe=Q.join(`
`);return N===C&&(Pe+=`
Q`),is(pe,!0),Cs({data:Pe,filters:li(),objectId:pe}),te("endobj"),le},As=f.__private__.putPages=function(){var b,O,Q=[];for(b=1;b<=en;b++)Nt[b].objId=En(),Nt[b].contentsObjId=En();for(b=1;b<=en;b++)Q.push(qs({number:b,data:Me[b],objId:Nt[b].objId,contentsObjId:Nt[b].contentsObjId,mediaBox:Nt[b].mediaBox,cropBox:Nt[b].cropBox,bleedBox:Nt[b].bleedBox,trimBox:Nt[b].trimBox,artBox:Nt[b].artBox,userUnit:Nt[b].userUnit,rootDictionaryObjId:wr,resourceDictionaryObjId:ai}));is(wr,!0),te("<</Type /Pages");var le="/Kids [";for(O=0;O<en;O++)le+=Q[O]+" 0 R ";te(le+"]"),te("/Count "+en),te(">>"),te("endobj"),Xt.publish("postPutPages")},Ni=function(b){Xt.publish("putFont",{font:b,out:te,newObject:mn,putStream:Cs}),b.isAlreadyPutted!==!0&&(b.objectNumber=mn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+_l(b.postScriptName)),te("/Subtype /Type1"),typeof b.encoding=="string"&&te("/Encoding /"+b.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Ji=function(b){b.objectNumber=mn();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[T(b.x),T(b.y),T(b.x+b.width),T(b.y+b.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var Q=b.pages[1].join(`
`);Cs({data:Q,additionalKeyValues:O,objectId:b.objectNumber}),te("endobj")},Sr=function(b,O){O||(O=21);var Q=mn(),le=(function(Re,ot){var ht,Ct=[],It=1/(ot-1);for(ht=0;ht<1;ht+=It)Ct.push(ht);if(Ct.push(1),Re[0].offset!=0){var Jt={offset:0,color:Re[0].color};Re.unshift(Jt)}if(Re[Re.length-1].offset!=1){var Ln={offset:1,color:Re[Re.length-1].color};Re.push(Ln)}for(var Kn="",rn=0,rs=0;rs<Ct.length;rs++){for(ht=Ct[rs];ht>Re[rn+1].offset;)rn++;var Xn=Re[rn].offset,ws=(ht-Xn)/(Re[rn+1].offset-Xn),Yr=Re[rn].color,Aa=Re[rn+1].color;Kn+=ne(Math.round((1-ws)*Yr[0]+ws*Aa[0]).toString(16))+ne(Math.round((1-ws)*Yr[1]+ws*Aa[1]).toString(16))+ne(Math.round((1-ws)*Yr[2]+ws*Aa[2]).toString(16))}return Kn.trim()})(b.colors,O),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+O+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cs({data:le,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),te("endobj"),b.objectNumber=mn(),te("<< /ShadingType "+b.type),te("/ColorSpace /DeviceRGB");var Pe="/Coords ["+T(parseFloat(b.coords[0]))+" "+T(parseFloat(b.coords[1]))+" ";b.type===2?Pe+=T(parseFloat(b.coords[2]))+" "+T(parseFloat(b.coords[3])):Pe+=T(parseFloat(b.coords[2]))+" "+T(parseFloat(b.coords[3]))+" "+T(parseFloat(b.coords[4]))+" "+T(parseFloat(b.coords[5])),te(Pe+="]"),b.matrix&&te("/Matrix ["+b.matrix.toString()+"]"),te("/Function "+Q+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},ka=function(b,O){var Q=En(),le=mn();O.push({resourcesOid:Q,objectOid:le}),b.objectNumber=le;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+b.boundingBox.map(T).join(" ")+"]"}),pe.push({key:"XStep",value:T(b.xStep)}),pe.push({key:"YStep",value:T(b.yStep)}),pe.push({key:"Resources",value:Q+" 0 R"}),b.matrix&&pe.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Cs({data:b.stream,additionalKeyValues:pe,objectId:b.objectNumber}),te("endobj")},sc=function(b){for(var O in b.objectNumber=mn(),te("<<"),b)switch(O){case"opacity":te("/ca "+_(b[O]));break;case"stroke-opacity":te("/CA "+_(b[O]))}te(">>"),te("endobj")},Nr=function(b){is(b.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var O in te("/Font <<"),nt)nt.hasOwnProperty(O)&&(h===!1||h===!0&&m.hasOwnProperty(O))&&te("/"+O+" "+nt[O].objectNumber+" 0 R");te(">>")})(),(function(){if(Object.keys(gt).length>0){for(var O in te("/Shading <<"),gt)gt.hasOwnProperty(O)&&gt[O]instanceof Mo&&gt[O].objectNumber>=0&&te("/"+O+" "+gt[O].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),te(">>")}})(),(function(O){if(Object.keys(gt).length>0){for(var Q in te("/Pattern <<"),gt)gt.hasOwnProperty(Q)&&gt[Q]instanceof f.TilingPattern&&gt[Q].objectNumber>=0&&gt[Q].objectNumber<O&&te("/"+Q+" "+gt[Q].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),te(">>")}})(b.objectOid),(function(){if(Object.keys(Lt).length>0){var O;for(O in te("/ExtGState <<"),Lt)Lt.hasOwnProperty(O)&&Lt[O].objectNumber>=0&&te("/"+O+" "+Lt[O].objectNumber+" 0 R");Xt.publish("putGStateDict"),te(">>")}})(),(function(){for(var O in te("/XObject <<"),ps)ps.hasOwnProperty(O)&&ps[O].objectNumber>=0&&te("/"+O+" "+ps[O].objectNumber+" 0 R");Xt.publish("putXobjectDict"),te(">>")})(),te(">>"),te("endobj")},bs=function(b){_t[b.fontName]=_t[b.fontName]||{},_t[b.fontName][b.fontStyle]=b.id},er=function(b,O,Q,le,pe){var Pe={id:"F"+(Object.keys(nt).length+1).toString(10),postScriptName:b,fontName:O,fontStyle:Q,encoding:le,isStandardFont:pe||!1,metadata:{}};return Xt.publish("addFont",{font:Pe,instance:this}),nt[Pe.id]=Pe,bs(Pe),Pe.id},Bn=f.__private__.pdfEscape=f.pdfEscape=function(b,O){return(function(Q,le){var pe,Pe,Re,ot,ht,Ct,It,Jt,Ln;if(Re=(le=le||{}).sourceEncoding||"Unicode",ht=le.outputEncoding,(le.autoencode||ht)&&nt[Ke].metadata&&nt[Ke].metadata[Re]&&nt[Ke].metadata[Re].encoding&&(ot=nt[Ke].metadata[Re].encoding,!ht&&nt[Ke].encoding&&(ht=nt[Ke].encoding),!ht&&ot.codePages&&(ht=ot.codePages[0]),typeof ht=="string"&&(ht=ot[ht]),ht)){for(It=!1,Ct=[],pe=0,Pe=Q.length;pe<Pe;pe++)(Jt=ht[Q.charCodeAt(pe)])?Ct.push(String.fromCharCode(Jt)):Ct.push(Q[pe]),Ct[pe].charCodeAt(0)>>8&&(It=!0);Q=Ct.join("")}for(pe=Q.length;It===void 0&&pe!==0;)Q.charCodeAt(pe-1)>>8&&(It=!0),pe--;if(!It)return Q;for(Ct=le.noBOM?[]:[254,255],pe=0,Pe=Q.length;pe<Pe;pe++){if((Ln=(Jt=Q.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ct.push(Ln),Ct.push(Jt-(Ln<<8))}return String.fromCharCode.apply(void 0,Ct)})(b,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vs=f.__private__.beginPage=function(b){Me[++en]=[],Nt[en]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},ci(en),Se(Me[V])},kr=function(b,O){var Q,le,pe;switch(t=O||t,typeof b=="string"&&(Q=w(b.toLowerCase()),Array.isArray(Q)&&(le=Q[0],pe=Q[1])),Array.isArray(b)&&(le=b[0]*pt,pe=b[1]*pt),isNaN(le)&&(le=i[0],pe=i[1]),(le>14400||pe>14400)&&(cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),pe=Math.min(14400,pe)),i=[le,pe],t.substr(0,1)){case"l":pe>le&&(i=[pe,le]);break;case"p":le>pe&&(i=[pe,le])}Vs(i),kf(rc),te(Jo),oc!==0&&te(oc+" J"),lc!==0&&te(lc+" j"),Xt.publish("addPage",{pageNumber:en})},Ps=function(b){b>0&&b<=en&&(Me.splice(b,1),Nt.splice(b,1),en--,V>en&&(V=en),this.setPage(V))},ci=function(b){b>0&&b<=en&&(V=b)},co=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Me.length-1},uo=function(b,O,Q){var le,pe=void 0;return Q=Q||{},b=b!==void 0?b:nt[Ke].fontName,O=O!==void 0?O:nt[Ke].fontStyle,le=b.toLowerCase(),_t[le]!==void 0&&_t[le][O]!==void 0?pe=_t[le][O]:_t[b]!==void 0&&_t[b][O]!==void 0?pe=_t[b][O]:Q.disableWarning===!1&&cn.warn("Unable to look up font label for font '"+b+"', '"+O+"'. Refer to getFontList() for available fonts."),pe||Q.noFallback||(pe=_t.times[O])==null&&(pe=_t.times.normal),pe},tr=f.__private__.putInfo=function(){var b=mn(),O=function(le){return le};for(var Q in u!==null&&(O=Pn.encryptor(b,0)),te("<<"),te("/Producer ("+Bn(O("jsPDF "+ut.version))+")"),Ze)Ze.hasOwnProperty(Q)&&Ze[Q]&&te("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+Bn(O(Ze[Q]))+")");te("/CreationDate ("+Bn(O(J))+")"),te(">>"),te("endobj")},Hs=f.__private__.putCatalog=function(b){var O=(b=b||{}).rootDictionaryObjId||wr;switch(mn(),te("<<"),te("/Type /Catalog"),te("/Pages "+O+" 0 R"),ee||(ee="fullwidth"),ee){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+ee;Q.substr(Q.length-1)==="%"&&(ee=parseInt(ee)/100),typeof ee=="number"&&te("/OpenAction [3 0 R /XYZ null null "+_(ee)+"]")}switch(je||(je="continuous"),je){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Ce&&te("/PageMode /"+Ce),Xt.publish("putCatalog"),te(">>"),te("endobj")},pn=f.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(ae+1)),te("/Root "+ae+" 0 R"),te("/Info "+(ae-1)+" 0 R"),u!==null&&te("/Encrypt "+Pn.oid+" 0 R"),te("/ID [ <"+se+"> <"+se+"> ]"),te(">>")},ja=f.__private__.putHeader=function(){te("%PDF-"+y),te("%ºß¬à")},_a=f.__private__.putXRef=function(){var b="0000000000";te("xref"),te("0 "+(ae+1)),te("0000000000 65535 f ");for(var O=1;O<=ae;O++)typeof ce[O]=="function"?te((b+ce[O]()).slice(-10)+" 00000 n "):ce[O]!==void 0?te((b+ce[O]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},ki=f.__private__.buildDocument=function(){var b;ae=0,me=0,xe=[],ce=[],Ne=[],wr=En(),ai=En(),Se(xe),Xt.publish("buildDocument"),ja(),As(),(function(){Xt.publish("putAdditionalObjects");for(var Q=0;Q<Ne.length;Q++){var le=Ne[Q];is(le.objId,!0),te(le.content),te("endobj")}Xt.publish("postPutAdditionalObjects")})(),b=[],(function(){for(var Q in nt)nt.hasOwnProperty(Q)&&(h===!1||h===!0&&m.hasOwnProperty(Q))&&Ni(nt[Q])})(),(function(){var Q;for(Q in Lt)Lt.hasOwnProperty(Q)&&sc(Lt[Q])})(),(function(){for(var Q in ps)ps.hasOwnProperty(Q)&&Ji(ps[Q])})(),(function(Q){var le;for(le in gt)gt.hasOwnProperty(le)&&(gt[le]instanceof Mo?Sr(gt[le]):gt[le]instanceof Pl&&ka(gt[le],Q))})(b),Xt.publish("putResources"),b.forEach(Nr),Nr({resourcesOid:ai,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources"),u!==null&&(Pn.oid=mn(),te("<<"),te("/Filter /Standard"),te("/V "+Pn.v),te("/R "+Pn.r),te("/U <"+Pn.toHexString(Pn.U)+">"),te("/O <"+Pn.toHexString(Pn.O)+">"),te("/P "+Pn.P),te(">>"),te("endobj")),tr(),Hs();var O=me;return _a(),pn(),te("startxref"),te(""+O),te("%%EOF"),Se(Me[V]),xe.join(`
`)},nr=f.__private__.getBlob=function(b){return new Blob([xt(b)],{type:"application/pdf"})},Ls=f.output=f.__private__.output=(ri=function(b,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",b){case void 0:return ki();case"save":f.save(O.filename);break;case"arraybuffer":return xt(ki());case"blob":return nr(ki());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(nr(ki()))||void 0;cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",le=ki();try{Q=Fv(le)}catch{Q=Fv(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+O.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(pe=O.pdfObjectUrl,Pe="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ot=At.open();return ot!==null&&ot.document.write(Re),ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Ct=At.open();if(Ct!==null){Ct.document.write(ht);var It=this;Ct.document.documentElement.querySelector("#pdfViewer").onload=function(){Ct.document.title=O.filename,Ct.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(It.output("bloburl"))}}return Ct}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Ln=At.open();if(Ln!==null&&(Ln.document.write(Jt),Ln.document.title=O.filename),Ln||typeof safari>"u")return Ln;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",O);default:return null}},ri.foo=function(){try{return ri.apply(this,arguments)}catch(Q){var b=Q.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var O="Error in function "+b.split(`
`)[0].split("<")[0]+": "+Q.message;if(!At.console)throw new Error(O);At.console.error(O,Q),At.alert&&alert(O)}},ri.foo.bar=ri,ri.foo),Ms=function(b){return Array.isArray(Vr)===!0&&Vr.indexOf(b)>-1};switch(s){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Ms("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);pt=s}var Pn=null;ue(),F();var Ca=f.__private__.getPageInfo=f.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[b].objId,pageNumber:b,pageContext:Nt[b]}},ho=f.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Nt)if(Nt[O].objId===b)break;return Ca(O)},Qo=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Nt[V].objId,pageNumber:V,pageContext:Nt[V]}};f.addPage=function(){return kr.apply(this,arguments),this},f.setPage=function(){return ci.apply(this,arguments),Se.call(this,Me[V]),this},f.insertPage=function(b){return this.addPage(),this.movePage(V,b),this},f.movePage=function(b,O){var Q,le;if(b>O){Q=Me[b],le=Nt[b];for(var pe=b;pe>O;pe--)Me[pe]=Me[pe-1],Nt[pe]=Nt[pe-1];Me[O]=Q,Nt[O]=le,this.setPage(O)}else if(b<O){Q=Me[b],le=Nt[b];for(var Pe=b;Pe<O;Pe++)Me[Pe]=Me[Pe+1],Nt[Pe]=Nt[Pe+1];Me[O]=Q,Nt[O]=le,this.setPage(O)}return this},f.deletePage=function(){return Ps.apply(this,arguments),this},f.__private__.text=f.text=function(b,O,Q,le,pe){var Pe,Re,ot,ht,Ct,It,Jt,Ln,Kn,rn=(le=le||{}).scope||this;if(typeof b=="number"&&typeof O=="number"&&(typeof Q=="string"||Array.isArray(Q))){var rs=Q;Q=O,O=b,b=rs}if(arguments[3]instanceof vt==0?(ot=arguments[4],ht=arguments[5],sn(Jt=arguments[3])==="object"&&Jt!==null||(typeof ot=="string"&&(ht=ot,ot=null),typeof Jt=="string"&&(ht=Jt,Jt=null),typeof Jt=="number"&&(ot=Jt,Jt=null),le={flags:Jt,angle:ot,align:ht})):(k("The transform parameter of text() with a Matrix value"),Kn=pe),isNaN(O)||isNaN(Q)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return rn;var Xn,ws="",Yr=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:fo,Aa=rn.internal.scaleFactor;function Mf(dn){return dn=dn.split("	").join(Array(le.TabLen||9).join(" ")),Bn(dn,Jt)}function Bd(dn){for(var un,Wn=dn.concat(),Un=[],Qr=Wn.length;Qr--;)typeof(un=Wn.shift())=="string"?Un.push(un):Array.isArray(dn)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?Un.push(un[0]):Un.push([un[0],un[1],un[2]]);return Un}function xo(dn,un){var Wn;if(typeof dn=="string")Wn=un(dn)[0];else if(Array.isArray(dn)){for(var Un,Qr,dl=dn.concat(),Lr=[],bc=dl.length;bc--;)typeof(Un=dl.shift())=="string"?Lr.push(un(Un)[0]):Array.isArray(Un)&&typeof Un[0]=="string"&&(Qr=un(Un[0],Un[1],Un[2]),Lr.push([Qr[0],Qr[1],Qr[2]]));Wn=Lr}return Wn}var sr=!1,fc=!0;if(typeof b=="string")sr=!0;else if(Array.isArray(b)){var sl=b.concat();Re=[];for(var Pa,gs=sl.length;gs--;)(typeof(Pa=sl.shift())!="string"||Array.isArray(Pa)&&typeof Pa[0]!="string")&&(fc=!1);sr=fc}if(sr===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Zr=ze/rn.internal.scaleFactor,Kr=Zr*(Yr-1);switch(le.baseline){case"bottom":Q-=Kr;break;case"top":Q+=Zr-Kr;break;case"hanging":Q+=Zr-2*Kr;break;case"middle":Q+=Zr/2-Kr}if((It=le.maxWidth||0)>0&&(typeof b=="string"?b=rn.splitTextToSize(b,It):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(dn,un){return dn.concat(rn.splitTextToSize(un,It))},[]))),Pe={text:b,x:O,y:Q,options:le,mutex:{pdfEscape:Bn,activeFontKey:Ke,fonts:nt,activeFontSize:ze}},Xt.publish("preProcessText",Pe),b=Pe.text,ot=(le=Pe.options).angle,Kn instanceof vt==0&&ot&&typeof ot=="number"){ot*=Math.PI/180,le.rotationDirection===0&&(ot=-ot),N===C&&(ot=-ot);var il=Math.cos(ot),mc=Math.sin(ot);Kn=new vt(il,mc,-mc,il,0,0)}else ot&&ot instanceof vt&&(Kn=ot);N!==C||Kn||(Kn=si),(Ct=le.charSpace||tl)!==void 0&&(ws+=T($(Ct))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ln=le.horizontalScale)!==void 0&&(ws+=T(100*Ln)+` Tz
`),le.lang;var Gs=-1,$d=le.renderingMode!==void 0?le.renderingMode:le.stroke,rl=rn.internal.getCurrentPageInfo().pageContext;switch($d){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var Wd=rl.usedRenderingMode!==void 0?rl.usedRenderingMode:-1;Gs!==-1?ws+=Gs+` Tr
`:Wd!==-1&&(ws+=`0 Tr
`),Gs!==-1&&(rl.usedRenderingMode=Gs),ht=le.align||"left";var as,$i=ze*Yr,pc=rn.internal.pageSize.getWidth(),gc=nt[Ke];Ct=le.charSpace||tl,It=le.maxWidth||0,Jt=Object.assign({autoencode:!0,noBOM:!0},le.flags);var La=[],al=function(dn){return rn.getStringUnitWidth(dn,{font:gc,charSpace:Ct,fontSize:ze,doKerning:!1})*ze/Aa};if(Object.prototype.toString.call(b)==="[object Array]"){var ui;Re=Bd(b),ht!=="left"&&(as=Re.map(al));var hi,vo=0;if(ht==="right"){O-=as[0],b=[],gs=Re.length;for(var _r=0;_r<gs;_r++)_r===0?(hi=Hr(O),ui=Gr(Q)):(hi=$(vo-as[_r]),ui=-$i),b.push([Re[_r],hi,ui]),vo=as[_r]}else if(ht==="center"){O-=as[0]/2,b=[],gs=Re.length;for(var Ma=0;Ma<gs;Ma++)Ma===0?(hi=Hr(O),ui=Gr(Q)):(hi=$((vo-as[Ma])/2),ui=-$i),b.push([Re[Ma],hi,ui]),vo=as[Ma]}else if(ht==="left"){b=[],gs=Re.length;for(var yc=0;yc<gs;yc++)b.push(Re[yc])}else if(ht==="justify"&&gc.encoding==="Identity-H"){b=[],gs=Re.length,It=It!==0?It:pc;for(var Ta=0,$n=0;$n<gs;$n++)if(ui=$n===0?Gr(Q):-$i,hi=$n===0?Hr(O):Ta,$n<gs-1){var Tf=$((It-as[$n])/(Re[$n].split(" ").length-1)),Cr=Re[$n].split(" ");b.push([Cr[0]+" ",hi,ui]),Ta=0;for(var Ar=1;Ar<Cr.length;Ar++){var ol=(al(Cr[Ar-1]+" "+Cr[Ar])-al(Cr[Ar]))*Aa+Tf;Ar==Cr.length-1?b.push([Cr[Ar],ol,0]):b.push([Cr[Ar]+" ",ol,0]),Ta-=ol}}else b.push([Re[$n],hi,ui]);b.push(["",Ta,0])}else{if(ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],gs=Re.length,It=It!==0?It:pc,$n=0;$n<gs;$n++)ui=$n===0?Gr(Q):-$i,hi=$n===0?Hr(O):0,$n<gs-1?La.push(T($((It-as[$n])/(Re[$n].split(" ").length-1)))):La.push(0),b.push([Re[$n],hi,ui])}}(typeof le.R2L=="boolean"?le.R2L:ye)===!0&&(b=xo(b,function(dn,un,Wn){return[dn.split("").reverse().join(""),un,Wn]})),Pe={text:b,x:O,y:Q,options:le,mutex:{pdfEscape:Bn,activeFontKey:Ke,fonts:nt,activeFontSize:ze}},Xt.publish("postProcessText",Pe),b=Pe.text,Xn=Pe.mutex.isHex||!1;var xc=nt[Ke].encoding;xc!=="WinAnsiEncoding"&&xc!=="StandardEncoding"||(b=xo(b,function(dn,un,Wn){return[Mf(dn),un,Wn]})),Re=Bd(b),b=[];for(var ll,cl,bo,wo=Array.isArray(Re[0])?1:0,Xr="",vc=function(dn,un,Wn){var Un="";return Wn instanceof vt?(Wn=typeof le.angle=="number"?Qi(Wn,new vt(1,0,0,1,dn,un)):Qi(new vt(1,0,0,1,dn,un),Wn),N===C&&(Wn=Qi(new vt(1,0,0,-1,0,0),Wn)),Un=Wn.join(" ")+` Tm
`):Un=T(dn)+" "+T(un)+` Td
`,Un},_i=0;_i<Re.length;_i++){switch(Xr="",wo){case 1:bo=(Xn?"<":"(")+Re[_i][0]+(Xn?">":")"),ll=parseFloat(Re[_i][1]),cl=parseFloat(Re[_i][2]);break;case 0:bo=(Xn?"<":"(")+Re[_i]+(Xn?">":")"),ll=Hr(O),cl=Gr(Q)}La!==void 0&&La[_i]!==void 0&&(Xr=La[_i]+` Tw
`),_i===0?b.push(Xr+vc(ll,cl,Kn)+bo):wo===0?b.push(Xr+bo):wo===1&&b.push(Xr+vc(ll,cl,Kn)+bo)}b=wo===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Pr=`BT
/`;return Pr+=Ke+" "+ze+` Tf
`,Pr+=T(ze*Yr)+` TL
`,Pr+=mo+`
`,Pr+=ws,Pr+=b,te(Pr+="ET"),m[Ke]=!0,rn};var ic=f.__private__.clip=f.clip=function(b){return te(b==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return ic("evenodd")},f.__private__.discardPath=f.discardPath=function(){return te("n"),this};var Bi=f.__private__.isValidStyle=function(b){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(O=!0),O};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(b){return Bi(b)&&(d=b),this};var U=f.__private__.getStyle=f.getStyle=function(b){var O=d;switch(b){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=b}return O},Y=f.close=function(){return te("h"),this};f.stroke=function(){return te("S"),this},f.fill=function(b){return re("f",b),this},f.fillEvenOdd=function(b){return re("f*",b),this},f.fillStroke=function(b){return re("B",b),this},f.fillStrokeEvenOdd=function(b){return re("B*",b),this};var re=function(b,O){sn(O)==="object"?Xe(O,b):te(b)},we=function(b){b===null||N===C&&b===void 0||(b=U(b),te(b))};function Oe(b,O,Q,le,pe){var Pe=new Pl(O||this.boundingBox,Q||this.xStep,le||this.yStep,this.gState,pe||this.matrix);Pe.stream=this.stream;var Re=b+"$$"+this.cloneIndex+++"$$";return ii(Re,Pe),Pe}var Xe=function(b,O){var Q=Dt[b.key],le=gt[Q];if(le instanceof Mo)te("q"),te(Rt(O)),le.gState&&f.setGState(le.gState),te(b.matrix.toString()+" cm"),te("/"+Q+" sh"),te("Q");else if(le instanceof Pl){var pe=new vt(1,0,0,-1,0,ji());b.matrix&&(pe=pe.multiply(b.matrix||si),Q=Oe.call(le,b.key,b.boundingBox,b.xStep,b.yStep,pe).id),te("q"),te("/Pattern cs"),te("/"+Q+" scn"),le.gState&&f.setGState(le.gState),te(O),te("Q")}},Rt=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},wn=f.moveTo=function(b,O){return te(T($(b))+" "+T(I(O))+" m"),this},gn=f.lineTo=function(b,O){return te(T($(b))+" "+T(I(O))+" l"),this},Sn=f.curveTo=function(b,O,Q,le,pe,Pe){return te([T($(b)),T(I(O)),T($(Q)),T(I(le)),T($(pe)),T(I(Pe)),"c"].join(" ")),this};f.__private__.line=f.line=function(b,O,Q,le,pe){if(isNaN(b)||isNaN(O)||isNaN(Q)||isNaN(le)||!Bi(pe))throw new Error("Invalid arguments passed to jsPDF.line");return N===j?this.lines([[Q-b,le-O]],b,O,[1,1],pe||"S"):this.lines([[Q-b,le-O]],b,O,[1,1]).stroke()},f.__private__.lines=f.lines=function(b,O,Q,le,pe,Pe){var Re,ot,ht,Ct,It,Jt,Ln,Kn,rn,rs,Xn,ws;if(typeof b=="number"&&(ws=Q,Q=O,O=b,b=ws),le=le||[1,1],Pe=Pe||!1,isNaN(O)||isNaN(Q)||!Array.isArray(b)||!Array.isArray(le)||!Bi(pe)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wn(O,Q),Re=le[0],ot=le[1],Ct=b.length,rs=O,Xn=Q,ht=0;ht<Ct;ht++)(It=b[ht]).length===2?(rs=It[0]*Re+rs,Xn=It[1]*ot+Xn,gn(rs,Xn)):(Jt=It[0]*Re+rs,Ln=It[1]*ot+Xn,Kn=It[2]*Re+rs,rn=It[3]*ot+Xn,rs=It[4]*Re+rs,Xn=It[5]*ot+Xn,Sn(Jt,Ln,Kn,rn,rs,Xn));return Pe&&Y(),we(pe),this},f.path=function(b){for(var O=0;O<b.length;O++){var Q=b[O],le=Q.c;switch(Q.op){case"m":wn(le[0],le[1]);break;case"l":gn(le[0],le[1]);break;case"c":Sn.apply(this,le);break;case"h":Y()}}return this},f.__private__.rect=f.rect=function(b,O,Q,le,pe){if(isNaN(b)||isNaN(O)||isNaN(Q)||isNaN(le)||!Bi(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return N===j&&(le=-le),te([T($(b)),T(I(O)),T($(Q)),T($(le)),"re"].join(" ")),we(pe),this},f.__private__.triangle=f.triangle=function(b,O,Q,le,pe,Pe,Re){if(isNaN(b)||isNaN(O)||isNaN(Q)||isNaN(le)||isNaN(pe)||isNaN(Pe)||!Bi(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-b,le-O],[pe-Q,Pe-le],[b-pe,O-Pe]],b,O,[1,1],Re,!0),this},f.__private__.roundedRect=f.roundedRect=function(b,O,Q,le,pe,Pe,Re){if(isNaN(b)||isNaN(O)||isNaN(Q)||isNaN(le)||isNaN(pe)||isNaN(Pe)||!Bi(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ot=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*Q),Pe=Math.min(Pe,.5*le),this.lines([[Q-2*pe,0],[pe*ot,0,pe,Pe-Pe*ot,pe,Pe],[0,le-2*Pe],[0,Pe*ot,-pe*ot,Pe,-pe,Pe],[2*pe-Q,0],[-pe*ot,0,-pe,-Pe*ot,-pe,-Pe],[0,2*Pe-le],[0,-Pe*ot,pe*ot,-Pe,pe,-Pe]],b+pe,O,[1,1],Re,!0),this},f.__private__.ellipse=f.ellipse=function(b,O,Q,le,pe){if(isNaN(b)||isNaN(O)||isNaN(Q)||isNaN(le)||!Bi(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*Q,Re=4/3*(Math.SQRT2-1)*le;return wn(b+Q,O),Sn(b+Q,O-Re,b+Pe,O-le,b,O-le),Sn(b-Pe,O-le,b-Q,O-Re,b-Q,O),Sn(b-Q,O+Re,b-Pe,O+le,b,O+le),Sn(b+Pe,O+le,b+Q,O+Re,b+Q,O),we(pe),this},f.__private__.circle=f.circle=function(b,O,Q,le){if(isNaN(b)||isNaN(O)||isNaN(Q)||!Bi(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,O,Q,Q,le)},f.setFont=function(b,O,Q){return Q&&(O=M(O,Q)),Ke=uo(b,O,{disableWarning:!1}),this};var di=f.__private__.getFont=f.getFont=function(){return nt[uo.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var b,O,Q={};for(b in _t)if(_t.hasOwnProperty(b))for(O in Q[b]=[],_t[b])_t[b].hasOwnProperty(O)&&Q[b].push(O);return Q},f.addFont=function(b,O,Q,le,pe){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(Q=M(Q,le)),er.call(this,b,O,Q,pe=pe||"Identity-H")};var fo,rc=n.lineWidth||.200025,Mt=f.__private__.getLineWidth=f.getLineWidth=function(){return rc},kf=f.__private__.setLineWidth=f.setLineWidth=function(b){return rc=b,te(T($(b))+" w"),this};f.__private__.setLineDash=ut.API.setLineDash=ut.API.setLineDashPattern=function(b,O){if(b=b||[],O=O||0,isNaN(O)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(Q){return T($(Q))}).join(" "),O=T($(O)),te("["+b+"] "+O+" d"),this};var jf=f.__private__.getLineHeight=f.getLineHeight=function(){return ze*fo};f.__private__.getLineHeight=f.getLineHeight=function(){return ze*fo};var _f=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(fo=b),this},Cf=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return fo};_f(n.lineHeight);var Hr=f.__private__.getHorizontalCoordinate=function(b){return $(b)},Gr=f.__private__.getVerticalCoordinate=function(b){return N===C?b:Nt[V].mediaBox.topRightY-Nt[V].mediaBox.bottomLeftY-$(b)},Af=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(b){return T(Hr(b))},Pf=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(b){return T(Gr(b))},Jo=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Si(Jo)},f.__private__.setStrokeColor=f.setDrawColor=function(b,O,Q,le){return Jo=oi({ch1:b,ch2:O,ch3:Q,ch4:le,pdfColorType:"draw",precision:2}),te(Jo),this};var ac=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Si(ac)},f.__private__.setFillColor=f.setFillColor=function(b,O,Q,le){return ac=oi({ch1:b,ch2:O,ch3:Q,ch4:le,pdfColorType:"fill",precision:2}),te(ac),this};var mo=n.textColor||"0 g",el=f.__private__.getTextColor=f.getTextColor=function(){return Si(mo)};f.__private__.setTextColor=f.setTextColor=function(b,O,Q,le){return mo=oi({ch1:b,ch2:O,ch3:Q,ch4:le,pdfColorType:"text",precision:3}),this};var tl=n.charSpace,Lf=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(tl||0)};f.__private__.setCharSpace=f.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tl=b,this};var oc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(b){var O=f.CapJoinStyles[b];if(O===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oc=O,te(O+" J"),this};var lc=0;f.__private__.setLineJoin=f.setLineJoin=function(b){var O=f.CapJoinStyles[b];if(O===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lc=O,te(O+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(T($(b))+" M"),this},f.GState=Ch,f.setGState=function(b){(b=typeof b=="string"?Lt[An[b]]:po(null,b)).equals(Dn)||(te("/"+b.id+" gs"),Dn=b)};var po=function(b,O){if(!b||!An[b]){var Q=!1;for(var le in Lt)if(Lt.hasOwnProperty(le)&&Lt[le].equals(O)){Q=!0;break}if(Q)O=Lt[le];else{var pe="GS"+(Object.keys(Lt).length+1).toString(10);Lt[pe]=O,O.id=pe}return b&&(An[b]=O.id),Xt.publish("addGState",O),O}};f.addGState=function(b,O){return po(b,O),this},f.saveGraphicsState=function(){return te("q"),Kt.push({key:Ke,size:ze,color:mo}),this},f.restoreGraphicsState=function(){te("Q");var b=Kt.pop();return Ke=b.key,ze=b.size,mo=b.color,Dn=null,this},f.setCurrentTransformationMatrix=function(b){return te(b.toString()+" cm"),this},f.comment=function(b){return te("#"+b),this};var go=function(b,O){var Q=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(Pe){isNaN(Pe)||(Q=parseFloat(Pe))}});var le=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Pe){isNaN(Pe)||(le=parseFloat(Pe))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Pe){pe=Pe.toString()}}),this},cc=function(b,O,Q,le){go.call(this,b,O),this.type="rect";var pe=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Re){isNaN(Re)||(pe=parseFloat(Re))}});var Pe=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(Re){isNaN(Re)||(Pe=parseFloat(Re))}}),this},nl=function(){this.page=en,this.currentPage=V,this.pages=Me.slice(0),this.pagesContext=Nt.slice(0),this.x=Qe,this.y=Zt,this.matrix=Bt,this.width=uc(V),this.height=ji(V),this.outputDestination=$e,this.id="",this.objectNumber=-1};nl.prototype.restore=function(){en=this.page,V=this.currentPage,Nt=this.pagesContext,Me=this.pages,Qe=this.x,Zt=this.y,Bt=this.matrix,hc(V,this.width),jr(V,this.height),$e=this.outputDestination};var dc=function(b,O,Q,le,pe){zi.push(new nl),en=V=0,Me=[],Qe=b,Zt=O,Bt=pe,Vs([Q,le])};for(var yo in f.beginFormObject=function(b,O,Q,le,pe){return dc(b,O,Q,le,pe),this},f.endFormObject=function(b){return(function(O){if(Fi[O])zi.pop().restore();else{var Q=new nl,le="Xo"+(Object.keys(ps).length+1).toString(10);Q.id=le,Fi[O]=le,ps[le]=Q,Xt.publish("addFormObject",Q),zi.pop().restore()}})(b),this},f.doFormObject=function(b,O){var Q=ps[Fi[b]];return te("q"),te(O.toString()+" cm"),te("/"+Q.id+" Do"),te("Q"),this},f.getFormObject=function(b){var O=ps[Fi[b]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},f.save=function(b,O){return b=b||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Lo(nr(ki()),b),typeof Lo.unload=="function"&&At.setTimeout&&setTimeout(Lo.unload,911),this):new Promise(function(Q,le){try{var pe=Lo(nr(ki()),b);typeof Lo.unload=="function"&&At.setTimeout&&setTimeout(Lo.unload,911),Q(pe)}catch(Pe){le(Pe.message)}})},ut.API)ut.API.hasOwnProperty(yo)&&(yo==="events"&&ut.API.events.length?(function(b,O){var Q,le,pe;for(pe=O.length-1;pe!==-1;pe--)Q=O[pe][0],le=O[pe][1],b.subscribe.apply(b,[Q].concat(typeof le=="function"?[le]:le))})(Xt,ut.API.events):f[yo]=ut.API[yo]);var uc=f.getPageWidth=function(b){return(Nt[b=b||V].mediaBox.topRightX-Nt[b].mediaBox.bottomLeftX)/pt},hc=f.setPageWidth=function(b,O){Nt[b].mediaBox.topRightX=O*pt+Nt[b].mediaBox.bottomLeftX},ji=f.getPageHeight=function(b){return(Nt[b=b||V].mediaBox.topRightY-Nt[b].mediaBox.bottomLeftY)/pt},jr=f.setPageHeight=function(b,O){Nt[b].mediaBox.topRightY=O*pt+Nt[b].mediaBox.bottomLeftY};return f.internal={pdfEscape:Bn,getStyle:U,getFont:di,getFontSize:ie,getCharSpace:Lf,getTextColor:el,getLineHeight:jf,getLineHeightFactor:Cf,getLineWidth:Mt,write:St,getHorizontalCoordinate:Hr,getVerticalCoordinate:Gr,getCoordinateString:Af,getVerticalCoordinateString:Pf,collections:{},newObject:mn,newAdditionalObject:br,newObjectDeferred:En,newObjectDeferredBegin:is,getFilters:li,putStream:Cs,events:Xt,scaleFactor:pt,pageSize:{getWidth:function(){return uc(V)},setWidth:function(b){hc(V,b)},getHeight:function(){return ji(V)},setHeight:function(b){jr(V,b)}},encryptionOptions:u,encryption:Pn,getEncryptor:function(b){return u!==null?Pn.encryptor(b,0):function(O){return O}},output:Ls,getNumberOfPages:co,pages:Me,out:te,f2:_,f3:E,getPageInfo:Ca,getPageInfoByObjId:ho,getCurrentPageInfo:Qo,getPDFVersion:x,Point:go,Rectangle:cc,Matrix:vt,hasHotfix:Ms},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return uc(V)},set:function(b){hc(V,b)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ji(V)},set:function(b){jr(V,b)},enumerable:!0,configurable:!0}),(function(b){for(var O=0,Q=mt.length;O<Q;O++){var le=er.call(this,b[O][0],b[O][1],b[O][2],mt[O][3],!0);h===!1&&(m[le]=!0);var pe=b[O][0].split("-");bs({id:le,fontName:pe[0],fontStyle:pe[1]||""})}Xt.publish("addFonts",{fonts:nt,dictionary:_t})}).call(f,mt),Ke="F1",kr(i,t),Xt.publish("initialized"),f}jl.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},jl.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jl.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},jl.prototype.processOwnerPassword=function(n,e){return Fp(Op(e).substr(0,5),n)},jl.prototype.encryptor=function(n,e){var t=Op(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Fp(t,s)}},Ch.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||sn(n)!==sn(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},ut.API={events:[]},ut.version="3.0.2";var On=ut.API,Og=1,Ko=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xl=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Tt=function(n){return n.toFixed(2)},Wa=function(n){return n.toFixed(5)};On.__acroform__={};var bi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Wv=function(n){return n*Og},Ir=function(n){var e=new D5,t=at.internal.getHeight(n)||0,s=at.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Tt(s)),Number(Tt(t))],e},CD=On.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},AD=On.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},PD=On.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Hn=On.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PD(n,e-1)},Gn=On.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return CD(n,e-1)},Yn=On.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AD(n,e-1)},LD=On.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,i=n[0],r=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=s(r+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=s(r)||0,[Number(Tt(c.lowerLeft_X)),Number(Tt(c.lowerLeft_Y)),Number(Tt(c.upperRight_X)),Number(Tt(c.upperRight_Y))]},MD=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=zp(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Tt(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=Ir(n);return r.scope=n.scope,r.stream=e.join(`
`),r}},zp=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(_){return _.split(`
`)}):i.map(function(_){return[_]});var r=t,a=at.internal.getHeight(n)||0;a=a<0?-a:a;var o=at.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(_,E,$){if(_+1<i.length){var I=E+" "+i[_+1][0];return Lu(I,n,$).width<=o-4}return!1};r++;e:for(;r>0;){e="",r--;var d,u,h=Lu("3",n,r).height,m=n.multiline?a-r:(a-h)/2,f=m+=2,y=0,x=0,v=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lu(e,n,r=12).width+", FieldWidth:"+o+`
`;break}for(var w="",j=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var N=!1;if(i[C].length!==1&&v!==i[C].length-1){if((h+2)*(j+2)+2>a)continue e;w+=i[C][v],N=!0,x=C,C--}else{w=(w+=i[C][v]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var P=parseInt(C),L=c(P,w,r),M=C>=i.length-1;if(L&&!M){w+=" ",v=0;continue}if(L||M){if(M)x=P;else if(n.multiline&&(h+2)*(j+2)+2>a)continue e}else{if(!n.multiline||(h+2)*(j+2)+2>a)continue e;x=P}}for(var T="",k=y;k<=x;k++){var z=i[k];if(n.multiline){if(k===x){T+=z[v]+" ",v=(v+1)%z.length;continue}if(k===y){T+=z[z.length-1]+" ";continue}}T+=z[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=Lu(T,n,r).width,n.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}e+=Tt(d)+" "+Tt(f)+` Td
`,e+="("+Ko(T)+`) Tj
`,e+=-Tt(d)+` 0 Td
`,f=-(r+2),u=0,y=N?x:x+1,j++,w=""}break}return s.text=e,s.fontSize=r,s},Lu=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},TD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},DD=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ED=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(yr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(TD)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Og=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new E5,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i];r.objId=void 0,r.hasAnnotation&&DD(r,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,i){var r=!s;for(var a in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(a)){var o=s[a],c=[],d=o.Rect;if(o.Rect&&(o.Rect=LD(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=at.createDefaultAppearanceStream(o),sn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=MD(o);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var f=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var y=f[a];typeof y=="function"&&(y=y.call(i,o)),h+="/"+a+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(i,o)),h+="/"+a+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}r&&(function(x,v){for(var w in x)if(x.hasOwnProperty(w)){var j=w,C=x[w];v.internal.newObjectDeferredBegin(C.objId,!0),sn(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete x[j]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},T5=On.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(a){return a};if(Array.isArray(n)){for(var i="[",r=0;r<n.length;r++)switch(r!==0&&(i+=" "),sn(n[r])){case"boolean":case"number":case"object":i+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),i+="("+Ko(s(n[r].toString()))+")"):i+=n[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Om=function(n,e,t){var s=function(i){return i};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Ko(s(n))+")"},Br=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Br.prototype.toString=function(){return this.objId+" 0 R"},Br.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Br.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],i=this[s];i&&(Array.isArray(i)?n.push({key:s,value:T5(i,this.objId,this.scope)}):i instanceof Br?(i.scope=this.scope,n.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:s,value:i}))}return n};var D5=function(){Br.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};bi(D5,Br);var E5=function(){Br.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ko(t(n))+")"}},set:function(t){n=t}})};bi(E5,Br);var yr=function n(){Br.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Hn(e,3)},set:function(w){w?this.F=Gn(e,3):this.F=Yn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(w){s=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(w){s[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(w){s[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(w){s[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(w){s[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Ah)return;r="FieldObject"+n.FieldNum++}var w=function(j){return j};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ko(w(r))+")"},set:function(w){r=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(w){r=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Og:d},set:function(w){d=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Ah||this instanceof Oo))return Om(h,this.objId,this.scope)},set:function(w){w=w.toString(),h=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof xs==0?Om(m,this.objId,this.scope):m},set:function(w){w=w.toString(),m=this instanceof xs==0?w.substr(0,1)==="("?xl(w.substr(1,w.length-2)):xl(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs==1?xl(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof xs==1?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof xs==0?Om(f,this.objId,this.scope):f},set:function(w){w=w.toString(),f=this instanceof xs==0?w.substr(0,1)==="("?xl(w.substr(1,w.length-2)):xl(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs==1?xl(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof xs==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(w){w=!!w,x=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(w){y=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,1)},set:function(w){w?this.Ff=Gn(this.Ff,1):this.Ff=Yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,2)},set:function(w){w?this.Ff=Gn(this.Ff,2):this.Ff=Yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,3)},set:function(w){w?this.Ff=Gn(this.Ff,3):this.Ff=Yn(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');v=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(v){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};bi(yr,Br);var zl=function(){yr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return T5(e,this.objId,this.scope)},set:function(t){var s,i;i=[],typeof(s=t)=="string"&&(i=(function(r,a,o){o||(o=1);for(var c,d=[];c=a.exec(r);)d.push(c[o]);return d})(s,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,18)},set:function(t){t?this.Ff=Gn(this.Ff,18):this.Ff=Yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Gn(this.Ff,19):this.Ff=Yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,20)},set:function(t){t?(this.Ff=Gn(this.Ff,20),e.sort()):this.Ff=Yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,22)},set:function(t){t?this.Ff=Gn(this.Ff,22):this.Ff=Yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,23)},set:function(t){t?this.Ff=Gn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,27)},set:function(t){t?this.Ff=Gn(this.Ff,27):this.Ff=Yn(this.Ff,27)}}),this.hasAppearanceStream=!1};bi(zl,yr);var Bl=function(){zl.call(this),this.fontName="helvetica",this.combo=!1};bi(Bl,zl);var $l=function(){Bl.call(this),this.combo=!0};bi($l,Bl);var th=function(){$l.call(this),this.edit=!0};bi(th,$l);var xs=function(){yr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,15)},set:function(t){t?this.Ff=Gn(this.Ff,15):this.Ff=Yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,16)},set:function(t){t?this.Ff=Gn(this.Ff,16):this.Ff=Yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,17)},set:function(t){t?this.Ff=Gn(this.Ff,17):this.Ff=Yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,26)},set:function(t){t?this.Ff=Gn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,i=[];for(s in i.push("<<"),e)i.push("/"+s+" ("+Ko(t(e[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){sn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};bi(xs,yr);var nh=function(){xs.call(this),this.pushButton=!0};bi(nh,xs);var Wl=function(){xs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};bi(Wl,xs);var Ah=function(){var n,e;yr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var r,a=[];for(r in a.push("<<"),s)a.push("/"+r+" ("+Ko(i(s[r]))+")");return a.push(">>"),a.join(`
`)},set:function(i){sn(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=at.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bi(Ah,yr),Wl.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Wl.prototype.createOption=function(n){var e=new Ah;return e.Parent=this,e.optionName=n,this.Kids.push(e),ID.call(this.scope,e),e};var sh=function(){xs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=at.CheckBox.createAppearanceStream()};bi(sh,xs);var Oo=function(){yr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,13)},set:function(e){e?this.Ff=Gn(this.Ff,13):this.Ff=Yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,21)},set:function(e){e?this.Ff=Gn(this.Ff,21):this.Ff=Yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,23)},set:function(e){e?this.Ff=Gn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,24)},set:function(e){e?this.Ff=Gn(this.Ff,24):this.Ff=Yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,25)},set:function(e){e?this.Ff=Gn(this.Ff,25):this.Ff=Yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,26)},set:function(e){e?this.Ff=Gn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bi(Oo,yr);var ih=function(){Oo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Hn(this.Ff,14)},set:function(n){n?this.Ff=Gn(this.Ff,14):this.Ff=Yn(this.Ff,14)}}),this.password=!0};bi(ih,Oo);var at={CheckBox:{createAppearanceStream:function(){return{N:{On:at.CheckBox.YesNormal},D:{On:at.CheckBox.YesPushDown,Off:at.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=zp(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Tt(at.internal.getWidth(n))+" "+Tt(at.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Tt(r.fontSize)+" Tf "+i),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ir(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=[],r=at.internal.getHeight(n),a=at.internal.getWidth(n),o=zp(n,n.caption);return i.push("1 g"),i.push("0 0 "+Tt(a)+" "+Tt(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Tt(a-1)+" "+Tt(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Tt(o.fontSize)+" Tf "+s),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Tt(at.internal.getWidth(n))+" "+Tt(at.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:at.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=at.RadioButton.Circle.YesNormal,e.D[n]=at.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ir(n);e.scope=n.scope;var t=[],s=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=at.internal.Bezier_C,r=Number((s*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Wa(at.internal.getWidth(n)/2)+" "+Wa(at.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=[],s=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*at.internal.Bezier_C).toFixed(5)),a=Number((s*at.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wa(at.internal.getWidth(n)/2)+" "+Wa(at.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Wa(at.internal.getWidth(n)/2)+" "+Wa(at.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),t.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),t.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),t.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=[],s=at.internal.getWidth(n)<=at.internal.getHeight(n)?at.internal.getWidth(n)/4:at.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*at.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wa(at.internal.getWidth(n)/2)+" "+Wa(at.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:at.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=at.RadioButton.Cross.YesNormal,e.D[n]=at.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ir(n);e.scope=n.scope;var t=[],s=at.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Tt(at.internal.getWidth(n)-2)+" "+Tt(at.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Tt(s.x1.x)+" "+Tt(s.x1.y)+" m"),t.push(Tt(s.x2.x)+" "+Tt(s.x2.y)+" l"),t.push(Tt(s.x4.x)+" "+Tt(s.x4.y)+" m"),t.push(Tt(s.x3.x)+" "+Tt(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=at.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Tt(at.internal.getWidth(n))+" "+Tt(at.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Tt(at.internal.getWidth(n)-2)+" "+Tt(at.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Tt(t.x1.x)+" "+Tt(t.x1.y)+" m"),s.push(Tt(t.x2.x)+" "+Tt(t.x2.y)+" l"),s.push(Tt(t.x4.x)+" "+Tt(t.x4.y)+" m"),s.push(Tt(t.x3.x)+" "+Tt(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Ir(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Tt(at.internal.getWidth(n))+" "+Tt(at.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};at.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=at.internal.getWidth(n),t=at.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},at.internal.getWidth=function(n){var e=0;return sn(n)==="object"&&(e=Wv(n.Rect[2])),e},at.internal.getHeight=function(n){var e=0;return sn(n)==="object"&&(e=Wv(n.Rect[3])),e};var ID=On.addField=function(n){if(ED(this,n),!(n instanceof yr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};On.AcroFormChoiceField=zl,On.AcroFormListBox=Bl,On.AcroFormComboBox=$l,On.AcroFormEditBox=th,On.AcroFormButton=xs,On.AcroFormPushButton=nh,On.AcroFormRadioButton=Wl,On.AcroFormCheckBox=sh,On.AcroFormTextField=Oo,On.AcroFormPasswordField=ih,On.AcroFormAppearance=at,On.AcroForm={ChoiceField:zl,ListBox:Bl,ComboBox:$l,EditBox:th,Button:xs,PushButton:nh,RadioButton:Wl,CheckBox:sh,TextField:Oo,PasswordField:ih,Appearance:at},ut.AcroForm={ChoiceField:zl,ListBox:Bl,ComboBox:$l,EditBox:th,Button:xs,PushButton:nh,RadioButton:Wl,CheckBox:sh,TextField:Oo,PasswordField:ih,Appearance:at};ut.AcroForm;function I5(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(_,E){var $,I,J,se,oe,F=t;if((E=E||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(L(_))for(oe in s)for(J=s[oe],$=0;$<J.length;$+=1){for(se=!0,I=0;I<J[$].length;I+=1)if(J[$][I]!==void 0&&J[$][I]!==_[I]){se=!1;break}if(se===!0){F=oe;break}}else for(oe in s)for(J=s[oe],$=0;$<J.length;$+=1){for(se=!0,I=0;I<J[$].length;I+=1)if(J[$][I]!==void 0&&J[$][I]!==_.charCodeAt(I)){se=!1;break}if(se===!0){F=oe;break}}return F===t&&E!==t&&(F=E),F},r=function _(E){for(var $=this.internal.write,I=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:E.width}),se.push({key:"Height",value:E.height}),E.colorSpace===w.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===w.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var oe="",F=0,he=E.transparency.length;F<he;F++)oe+=E.transparency[F]+" "+E.transparency[F]+" ";se.push({key:"Mask",value:"["+oe+"]"})}E.sMask!==void 0&&se.push({key:"SMask",value:E.objectId+1+" 0 R"});var ke=E.filter!==void 0?["/"+E.filter]:void 0;if(I({data:E.data,additionalKeyValues:se,alreadyAppliedFilters:ke,objectId:E.objectId}),$("endobj"),"sMask"in E&&E.sMask!==void 0){var ue=(E.predictor!=null?"/Predictor "+E.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+E.width,D={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:ue,data:E.sMask};"filter"in E&&(D.filter=E.filter),_.call(this,D)}if(E.colorSpace===w.INDEXED){var V=this.internal.newObject();I({data:T(new Uint8Array(E.palette)),objectId:V}),$("endobj")}},a=function(){var _=this.internal.collections[e+"images"];for(var E in _)r.call(this,_[E])},o=function(){var _,E=this.internal.collections[e+"images"],$=this.internal.write;for(var I in E)$("/I"+(_=E[I]).index,_.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var _=this.internal.collections[e+"images"];return c.call(this),_},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(_){return typeof n["process"+_.toUpperCase()]=="function"},m=function(_){return sn(_)==="object"&&_.nodeType===1},f=function(_,E){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var $=""+_.getAttribute("src");if($.indexOf("data:image/")===0)return eh(unescape($).split("base64,").pop());var I=n.loadFile($,!0);if(I!==void 0)return I}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var J;switch(E){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;default:J="image/jpeg"}return eh(_.toDataURL(J,1).split("base64,").pop())}},y=function(_){var E=this.internal.collections[e+"images"];if(E){for(var $ in E)if(_===E[$].alias)return E[$]}},x=function(_,E,$){return _||E||(_=-96,E=-96),_<0&&(_=-1*$.width*72/_/this.internal.scaleFactor),E<0&&(E=-1*$.height*72/E/this.internal.scaleFactor),_===0&&(_=E*$.width/$.height),E===0&&(E=_*$.height/$.width),[_,E]},v=function(_,E,$,I,J,se){var oe=x.call(this,$,I,J),F=this.internal.getCoordinateString,he=this.internal.getVerticalCoordinateString,ke=d.call(this);if($=oe[0],I=oe[1],ke[J.index]=J,se){se*=Math.PI/180;var ue=Math.cos(se),D=Math.sin(se),V=function(ne){return ne.toFixed(4)},Z=[V(ue),V(D),V(-1*D),V(ue),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,F(_),he(E+I),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([F($),"0","0",F(I),"0","0","cm"].join(" "))):this.internal.write([F($),"0","0",F(I),F(_),he(E+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},w=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(_){var E,$,I=0;if(typeof _=="string")for($=_.length,E=0;E<$;E++)I=(I<<5)-I+_.charCodeAt(E),I|=0;else if(L(_))for($=_.byteLength/2,E=0;E<$;E++)I=(I<<5)-I+_[E],I|=0;return I},N=n.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var E=!0;return _.length===0&&(E=!1),_.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(E=!1),E},P=n.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var E=_.indexOf(",");return E<0?null:_.substring(0,E).trim().endsWith("base64")?_.substring(E+1):null};n.__addimage__.isArrayBuffer=function(_){return _ instanceof ArrayBuffer};var L=n.__addimage__.isArrayBufferView=function(_){return _ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array},M=n.__addimage__.binaryStringToUint8Array=function(_){for(var E=_.length,$=new Uint8Array(E),I=0;I<E;I++)$[I]=_.charCodeAt(I);return $},T=n.__addimage__.arrayBufferToBinaryString=function(_){for(var E="",$=L(_)?_:new Uint8Array(_),I=0;I<$.length;I+=8192)E+=String.fromCharCode.apply(null,$.subarray(I,I+8192));return E};n.addImage=function(){var _,E,$,I,J,se,oe,F,he;if(typeof arguments[1]=="number"?(E=t,$=arguments[1],I=arguments[2],J=arguments[3],se=arguments[4],oe=arguments[5],F=arguments[6],he=arguments[7]):(E=arguments[1],$=arguments[2],I=arguments[3],J=arguments[4],se=arguments[5],oe=arguments[6],F=arguments[7],he=arguments[8]),sn(_=arguments[0])==="object"&&!m(_)&&"imageData"in _){var ke=_;_=ke.imageData,E=ke.format||E||t,$=ke.x||$||0,I=ke.y||I||0,J=ke.w||ke.width||J,se=ke.h||ke.height||se,oe=ke.alias||oe,F=ke.compression||F,he=ke.rotation||ke.angle||he}var ue=this.internal.getFilters();if(F===void 0&&ue.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN($)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var D=k.call(this,_,E,oe,F);return v.call(this,$,I,J,se,D,he),this};var k=function(_,E,$,I){var J,se,oe;if(typeof _=="string"&&i(_)===t){_=unescape(_);var F=z(_,!1);(F!==""||(F=n.loadFile(_,!0))!==void 0)&&(_=F)}if(m(_)&&(_=f(_,E)),E=i(_,E),!h(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((oe=$)==null||oe.length===0)&&($=(function(he){return typeof he=="string"||L(he)?C(he):L(he.data)?C(he.data):null})(_)),(J=y.call(this,$))||(_ instanceof Uint8Array||E==="RGBA"||(se=_,_=M(_)),J=this["process"+E.toUpperCase()](_,u.call(this),$,(function(he){return he&&typeof he=="string"&&(he=he.toUpperCase()),he in n.image_compression?he:j.NONE})(I),se)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},z=n.__addimage__.convertBase64ToBinaryString=function(_,E){E=typeof E!="boolean"||E;var $,I="";if(typeof _=="string"){var J;$=(J=P(_))!==null&&J!==void 0?J:_;try{I=eh($)}catch(se){if(E)throw N($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};n.getImageProperties=function(_){var E,$,I="";if(m(_)&&(_=f(_)),typeof _=="string"&&i(_)===t&&((I=z(_,!1))===""&&(I=n.loadFile(_)||""),_=I),$=i(_),!h($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(_ instanceof Uint8Array||(_=M(_)),!(E=this["process"+$.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=$,E}})(ut.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};ut.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,i,r,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((s=d[h]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){s=d[m];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(x.objId),j=s.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+a(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+f(w(s.contents))+")",r+=" /Popup "+v.objId+" 0 R",r+=" /P "+c.objId+" 0 R",r+=" /T ("+f(w(j))+") >>",x.content=r;var C=x.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+a(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+C,s.open&&(r+=" /Open true"),r+=" >>",v.content=r,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+a(s.bounds.x)+" "+o(s.bounds.y)+" "+a(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var N=s.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(y(s.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(s.options.name){var P=this.annotations._nameMap[s.options.name];s.options.pageNumber=P.page,s.options.top=P.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",r="",s.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(s.options.url))+") >>";else if(s.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,r+=" /FitV "+s.options.left+"]";break;default:var L=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),r+=" /XYZ "+s.options.left+" "+L+" "+s.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,i,r,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:d(s),w:c(t+i),h:d(s+r)},options:a,type:"link"})},n.textWithLink=function(t,s,i,r){var a,o,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){o=r.maxWidth;var u=this.splitTextToSize(t,o).length;a=Math.ceil(d*u)}else o=c,a=d;return this.text(t,s,i,r),i+=.2*d,r.align==="center"&&(s-=c/2),r.align==="right"&&(s-=c),this.link(s,i-d,o,a,r),c},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(ut.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=n.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&r(x)&&e[x.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(x){var v=0,w=t,j="",C=0;for(v=0;v<x.length;v+=1)w[x.charCodeAt(v)]!==void 0?(C++,typeof(w=w[x.charCodeAt(v)])=="number"&&(j+=String.fromCharCode(w),w=t,C=0),v===x.length-1&&(w=t,j+=x.charAt(v-(C-1)),v-=C-1,C=0)):(w=t,j+=x.charAt(v-C),v-=C,C=0);return j};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&s[x.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(x,v,w){return a(x)?r(x)===!1?-1:!d(x)||!a(v)&&!a(w)||!a(w)&&o(v)||o(x)&&!a(v)||o(x)&&c(v)||o(x)&&o(v)?0:u(x)&&a(v)&&!o(v)&&a(w)&&d(w)?3:o(x)||!a(w)?1:2:-1},f=function(x){var v=0,w=0,j=0,C="",N="",P="",L=(x=x||"").split("\\s+"),M=[];for(v=0;v<L.length;v+=1){for(M.push(""),w=0;w<L[v].length;w+=1)C=L[v][w],N=L[v][w-1],P=L[v][w+1],a(C)?(j=m(C,N,P),M[v]+=j!==-1?String.fromCharCode(e[C.charCodeAt(0)][j]):C):M[v]+=C;M[v]=h(M[v])}return M.join(" ")},y=n.__arabicParser__.processArabic=n.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(v)){var j=0;for(w=[],j=0;j<v.length;j+=1)Array.isArray(v[j])?w.push([f(v[j][0]),v[j][1],v[j][2]]):w.push([f(v[j])]);x=w}else x=f(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",y])})(ut.API),ut.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(o){r=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var i;if((t=t||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(ut.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=d.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,N){return C.concat(v.splitTextToSize(N,w))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)f<(x=this.getStringUnitWidth(c[j],{font:h})*u)&&(f=x);return f!==0&&(y=c.length),{w:f/=m,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,d,u,h,m){if(s.call(this),!u)throw new Error("No data for PDF table.");var f,y,x,v,w=[],j=[],C=[],N={},P={},L=[],M=[],T=(m=m||{}).autoSize||!1,k=m.printHeaders!==!1,z=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,_=m.margins||Object.assign({width:this.getPageWidth()},e),E=typeof m.padding=="number"?m.padding:3,$=m.headerBackgroundColor||"#c8c8c8",I=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=I,this.setFontSize(z),h==null)j=w=Object.keys(u[0]),C=w.map(function(){return"left"});else if(Array.isArray(h)&&sn(h[0])==="object")for(w=h.map(function(ke){return ke.name}),j=h.map(function(ke){return ke.prompt||ke.name||""}),C=h.map(function(ke){return ke.align||"left"}),f=0;f<h.length;f+=1)P[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(j=w=h,C=w.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<w.length;f+=1){for(N[v=w[f]]=u.map(function(ke){return ke[v]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(j[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=N[v],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)L.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[v]=Math.max.apply(null,L)+E+E,L=[]}if(k){var J={};for(f=0;f<w.length;f+=1)J[w[f]]={},J[w[f]].text=j[f],J[w[f]].align=C[f];var se=o.call(this,J,P);M=w.map(function(ke){return new r(c,d,P[ke],se,J[ke].text,void 0,J[ke].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var oe=h.reduce(function(ke,ue){return ke[ue.name]=ue.align,ke},{});for(f=0;f<u.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:u[f]},this);var F=o.call(this,u[f],P);for(x=0;x<w.length;x+=1){var he=u[f][w[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:x,data:he},this),a.call(this,new r(c,d,P[w[x]],F,he,f+2,oe[w[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/m+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};n.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}})(ut.API);var R5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},O5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bp=I5(O5),F5=[100,200,300,400,500,600,700,800,900],RD=I5(F5);function Fm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(r){return R5[r=r||"normal"]?r:"normal"})(n.style),s=(function(r){return r?typeof r=="number"?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):r==="bold"?700:400:400})(n.weight),i=(function(r){return typeof Bp[r=r||"normal"]=="number"?r:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,s].join(" ")}}}function Uv(n,e,t,s){var i;for(i=t;i>=0&&i<e.length;i+=s)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=s)if(n[e[i]])return n[e[i]]}var OD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Vv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Hv(n){return n.trimLeft()}function FD(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function zD(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Mu,Gv,Yv,vl,Tu,Zv,Kv,Xv,zm=["times"];function Qv(n,e,t,s){var i=4,r=e1;switch(s){case ut.API.image_compression.FAST:i=1,r=Jv;break;case ut.API.image_compression.MEDIUM:i=6,r=t1;break;case ut.API.image_compression.SLOW:i=9,r=n1}n=(function(o,c,d,u){for(var h,m=o.length/c,f=new Uint8Array(o.length+m),y=[BD,Jv,e1,t1,n1],x=0;x<m;x+=1){var v=x*c,w=o.subarray(v,v+c);if(u)f.set(u(w,d,h),v+x);else{for(var j=y.length,C=[],N=0;N<j;N+=1)C[N]=y[N](w,d,h);var P=WD(C.concat());f.set(C[P],v+x)}h=w}return f})(n,e,t,r);var a=Dp(n,{level:i});return ut.API.__addimage__.arrayBufferToBinaryString(a)}function BD(n){var e=Array.apply([],n);return e.unshift(0),e}function Jv(n,e){var t=n.length,s=[];s[0]=1;for(var i=0;i<t;i+=1){var r=n[i-e]||0;s[i+1]=n[i]-r+256&255}return s}function e1(n,e,t){var s=n.length,i=[];i[0]=2;for(var r=0;r<s;r+=1){var a=t&&t[r]||0;i[r+1]=n[r]-a+256&255}return i}function t1(n,e,t){var s=n.length,i=[];i[0]=3;for(var r=0;r<s;r+=1){var a=n[r-e]||0,o=t&&t[r]||0;i[r+1]=n[r]+256-(a+o>>>1)&255}return i}function n1(n,e,t){var s=n.length,i=[];i[0]=4;for(var r=0;r<s;r+=1){var a=$D(n[r-e]||0,t&&t[r]||0,t&&t[r-e]||0);i[r+1]=n[r]-a+256&255}return i}function $D(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),i=Math.abs(n-t),r=Math.abs(n+e-t-t);return s<=i&&s<=r?n:i<=r?e:t}function WD(n){var e=n.map(function(t){return t.reduce(function(s,i){return s+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Bm(n,e,t){var s=e*t,i=Math.floor(s/8),r=16-(s-8*i+t),a=(1<<t)-1;return z5(n,i)>>r&a}function s1(n,e,t,s){var i=t*s,r=Math.floor(i/8),a=16-(i-8*r+s),o=(1<<s)-1,c=(e&o)<<a;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var m=h>>8&255;d.setUint8(u,m)}})(n,r,z5(n,r)&~(o<<a)&65535|c)}function z5(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function UD(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,i=n[e++],r=i>>7,a=1<<1+(7&i);n[e++],n[e++];var o=null,c=null;r&&(o=e,c=a,e+=3*a);var d=!0,u=[],h=0,m=null,f=0,y=null;for(this.width=t,this.height=s;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,y=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];h=n[e++]|n[e++]<<8,m=n[e++],1&x||(m=null),f=x>>2&7,e++;break;case 254:for(;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var v=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,N=n[e++],P=N>>6&1,L=1<<1+(7&N),M=o,T=c,k=!1;N>>7&&(k=!0,M=e,T=L,e+=3*L);var z=e;for(e++;;){var _;if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}u.push({x:v,y:w,width:j,height:C,has_local_palette:k,palette_offset:M,palette_size:T,data_offset:z,data_length:e-z,transparent_index:m,interlaced:!!P,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,$){var I=this.frameInfo(E),J=I.width*I.height,se=new Uint8Array(J);i1(n,I.data_offset,se,J);var oe=I.palette_offset,F=I.transparent_index;F===null&&(F=256);var he=I.width,ke=t-he,ue=he,D=4*(I.y*t+I.x),V=4*((I.y+I.height)*t+I.x),Z=D,ne=4*ke;I.interlaced===!0&&(ne+=4*t*7);for(var ae=8,ce=0,xe=se.length;ce<xe;++ce){var me=se[ce];if(ue===0&&(ue=he,(Z+=ne)>=V&&(ne=4*ke+4*t*(ae-1),Z=D+(he+ke)*(ae<<1),ae>>=1)),me===F)Z+=4;else{var Ne=n[oe+3*me],Me=n[oe+3*me+1],Ie=n[oe+3*me+2];$[Z++]=Ie,$[Z++]=Me,$[Z++]=Ne,$[Z++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(E,$){var I=this.frameInfo(E),J=I.width*I.height,se=new Uint8Array(J);i1(n,I.data_offset,se,J);var oe=I.palette_offset,F=I.transparent_index;F===null&&(F=256);var he=I.width,ke=t-he,ue=he,D=4*(I.y*t+I.x),V=4*((I.y+I.height)*t+I.x),Z=D,ne=4*ke;I.interlaced===!0&&(ne+=4*t*7);for(var ae=8,ce=0,xe=se.length;ce<xe;++ce){var me=se[ce];if(ue===0&&(ue=he,(Z+=ne)>=V&&(ne=4*ke+4*t*(ae-1),Z=D+(he+ke)*(ae<<1),ae>>=1)),me===F)Z+=4;else{var Ne=n[oe+3*me],Me=n[oe+3*me+1],Ie=n[oe+3*me+2];$[Z++]=Ne,$[Z++]=Me,$[Z++]=Ie,$[Z++]=255}--ue}}}function i1(n,e,t,s){for(var i=n[e++],r=1<<i,a=r+1,o=a+1,c=i+1,d=(1<<c)-1,u=0,h=0,m=0,f=n[e++],y=new Int32Array(4096),x=null;;){for(;u<16&&f!==0;)h|=n[e++]<<u,u+=8,f===1?f=n[e++]:--f;if(u<c)break;var v=h&d;if(h>>=c,u-=c,v!==r){if(v===a)break;for(var w=v<o?v:x,j=0,C=w;C>r;)C=y[C]>>8,++j;var N=C;if(m+j+(w!==v?1:0)>s)return void cn.log("Warning, gif stream longer than expected.");t[m++]=N;var P=m+=j;for(w!==v&&(t[m++]=N),C=w;j--;)C=y[C],t[--P]=255&C,C>>=8;x!==null&&o<4096&&(y[o++]=x<<8|N,o>=d+1&&c<12&&(++c,d=d<<1|1)),x=v}else o=a+1,d=(1<<(c=i+1))-1,x=null}return m!==s&&cn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $m(n){var e,t,s,i,r,a=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),f=new Array(64),y=new Array(64),x=[],v=0,w=7,j=new Array(64),C=new Array(64),N=new Array(64),P=new Array(256),L=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(D,V){for(var Z=0,ne=0,ae=new Array,ce=1;ce<=16;ce++){for(var xe=1;xe<=D[ce];xe++)ae[V[ne]]=[],ae[V[ne]][0]=Z,ae[V[ne]][1]=ce,ne++,Z++;Z*=2}return ae}function oe(D){for(var V=D[0],Z=D[1]-1;Z>=0;)V&1<<Z&&(v|=1<<w),Z--,--w<0&&(v==255?(F(255),F(0)):F(v),w=7,v=0)}function F(D){x.push(D)}function he(D){F(D>>8&255),F(255&D)}function ke(D,V,Z,ne,ae){for(var ce,xe=ae[0],me=ae[240],Ne=(function(ze,ee){var ie,ye,Ce,Te,je,Fe,lt,Ze,Ke,pt,Qe=0;for(Ke=0;Ke<8;++Ke){ie=ze[Qe],ye=ze[Qe+1],Ce=ze[Qe+2],Te=ze[Qe+3],je=ze[Qe+4],Fe=ze[Qe+5],lt=ze[Qe+6];var Zt=ie+(Ze=ze[Qe+7]),Bt=ie-Ze,nt=ye+lt,_t=ye-lt,Kt=Ce+Fe,gt=Ce-Fe,Dt=Te+je,Lt=Te-je,An=Zt+Dt,Dn=Zt-Dt,en=nt+Kt,Nt=nt-Kt;ze[Qe]=An+en,ze[Qe+4]=An-en;var Xt=.707106781*(Nt+Dn);ze[Qe+2]=Dn+Xt,ze[Qe+6]=Dn-Xt;var Vr=.382683433*((An=Lt+gt)-(Nt=_t+Bt)),ps=.5411961*An+Vr,Fi=1.306562965*Nt+Vr,zi=.707106781*(en=gt+_t),vt=Bt+zi,Qi=Bt-zi;ze[Qe+5]=Qi+ps,ze[Qe+3]=Qi-ps,ze[Qe+1]=vt+Fi,ze[Qe+7]=vt-Fi,Qe+=8}for(Qe=0,Ke=0;Ke<8;++Ke){ie=ze[Qe],ye=ze[Qe+8],Ce=ze[Qe+16],Te=ze[Qe+24],je=ze[Qe+32],Fe=ze[Qe+40],lt=ze[Qe+48];var si=ie+(Ze=ze[Qe+56]),ii=ie-Ze,ri=ye+lt,mn=ye-lt,En=Ce+Fe,is=Ce-Fe,br=Te+je,wr=Te-je,ai=si+br,Si=si-br,oi=ri+En,li=ri-En;ze[Qe]=ai+oi,ze[Qe+32]=ai-oi;var Cs=.707106781*(li+Si);ze[Qe+16]=Si+Cs,ze[Qe+48]=Si-Cs;var qs=.382683433*((ai=wr+is)-(li=mn+ii)),As=.5411961*ai+qs,Ni=1.306562965*li+qs,Ji=.707106781*(oi=is+mn),Sr=ii+Ji,ka=ii-Ji;ze[Qe+40]=ka+As,ze[Qe+24]=ka-As,ze[Qe+8]=Sr+Ni,ze[Qe+56]=Sr-Ni,Qe++}for(Ke=0;Ke<64;++Ke)pt=ze[Ke]*ee[Ke],f[Ke]=pt>0?pt+.5|0:pt-.5|0;return f})(D,V),Me=0;Me<64;++Me)y[M[Me]]=Ne[Me];var Ie=y[0]-Z;Z=y[0],Ie==0?oe(ne[0]):(oe(ne[m[ce=32767+Ie]]),oe(h[ce]));for(var $e=63;$e>0&&y[$e]==0;)$e--;if($e==0)return oe(xe),Z;for(var Se,te=1;te<=$e;){for(var St=te;y[te]==0&&te<=$e;)++te;var xt=te-St;if(xt>=16){Se=xt>>4;for(var mt=1;mt<=Se;++mt)oe(me);xt&=15}ce=32767+y[te],oe(ae[(xt<<4)+m[ce]]),oe(h[ce]),te++}return $e!=63&&oe(xe),Z}function ue(D){D=Math.min(Math.max(D,1),100),r!=D&&((function(V){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ae=a((Z[ne]*V+50)/100);ae=Math.min(Math.max(ae,1),255),o[M[ne]]=ae}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var me=a((ce[xe]*V+50)/100);me=Math.min(Math.max(me,1),255),c[M[xe]]=me}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ie=0;Ie<8;Ie++)for(var $e=0;$e<8;$e++)d[Me]=1/(o[M[Me]]*Ne[Ie]*Ne[$e]*8),u[Me]=1/(c[M[Me]]*Ne[Ie]*Ne[$e]*8),Me++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),r=D)}this.encode=function(D,V){V&&ue(V),x=new Array,v=0,w=7,he(65496),he(65504),he(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),he(1),he(1),F(0),F(0),(function(){he(65499),he(132),F(0);for(var ye=0;ye<64;ye++)F(o[ye]);F(1);for(var Ce=0;Ce<64;Ce++)F(c[Ce])})(),(function(ye,Ce){he(65472),he(17),F(8),he(Ce),he(ye),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)})(D.width,D.height),(function(){he(65476),he(418),F(0);for(var ye=0;ye<16;ye++)F(T[ye+1]);for(var Ce=0;Ce<=11;Ce++)F(k[Ce]);F(16);for(var Te=0;Te<16;Te++)F(z[Te+1]);for(var je=0;je<=161;je++)F(_[je]);F(1);for(var Fe=0;Fe<16;Fe++)F(E[Fe+1]);for(var lt=0;lt<=11;lt++)F($[lt]);F(17);for(var Ze=0;Ze<16;Ze++)F(I[Ze+1]);for(var Ke=0;Ke<=161;Ke++)F(J[Ke])})(),he(65498),he(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var Z=0,ne=0,ae=0;v=0,w=7,this.encode.displayName="_encode_";for(var ce,xe,me,Ne,Me,Ie,$e,Se,te,St=D.data,xt=D.width,mt=D.height,ze=4*xt,ee=0;ee<mt;){for(ce=0;ce<ze;){for(Me=ze*ee+ce,$e=-1,Se=0,te=0;te<64;te++)Ie=Me+(Se=te>>3)*ze+($e=4*(7&te)),ee+Se>=mt&&(Ie-=ze*(ee+1+Se-mt)),ce+$e>=ze&&(Ie-=ce+$e-ze+4),xe=St[Ie++],me=St[Ie++],Ne=St[Ie++],j[te]=(L[xe]+L[me+256|0]+L[Ne+512|0]>>16)-128,C[te]=(L[xe+768|0]+L[me+1024|0]+L[Ne+1280|0]>>16)-128,N[te]=(L[xe+1280|0]+L[me+1536|0]+L[Ne+1792|0]>>16)-128;Z=ke(j,d,Z,e,s),ne=ke(C,u,ne,t,i),ae=ke(N,u,ae,t,i),ce+=32}ee+=8}if(w>=0){var ie=[];ie[1]=w+1,ie[0]=(1<<w+1)-1,oe(ie)}return he(65497),new Uint8Array(x)},n=n||50,(function(){for(var D=String.fromCharCode,V=0;V<256;V++)P[V]=D(V)})(),e=se(T,k),t=se(E,$),s=se(z,_),i=se(I,J),(function(){for(var D=1,V=2,Z=1;Z<=15;Z++){for(var ne=D;ne<V;ne++)m[32767+ne]=Z,h[32767+ne]=[],h[32767+ne][1]=Z,h[32767+ne][0]=ne;for(var ae=-(V-1);ae<=-D;ae++)m[32767+ae]=Z,h[32767+ae]=[],h[32767+ae][1]=Z,h[32767+ae][0]=V-1+ae;D<<=1,V<<=1}})(),(function(){for(var D=0;D<256;D++)L[D]=19595*D,L[D+256|0]=38470*D,L[D+512|0]=7471*D+32768,L[D+768|0]=-11059*D,L[D+1024|0]=-21709*D,L[D+1280|0]=32768*D+8421375,L[D+1536|0]=-27439*D,L[D+1792|0]=-5329*D})(),ue(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function or(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function r1(n){function e(k){if(!k)throw Error("assert :P")}function t(k,z,_){for(var E=0;4>E;E++)if(k[z+E]!=_.charCodeAt(E))return!0;return!1}function s(k,z,_,E,$){for(var I=0;I<$;I++)k[z+I]=_[E+I]}function i(k,z,_,E){for(var $=0;$<E;$++)k[z+$]=_}function r(k){return new Int32Array(k)}function a(k,z){for(var _=[],E=0;E<k;E++)_.push(new z);return _}function o(k,z){var _=[];return(function E($,I,J){for(var se=J[I],oe=0;oe<se&&($.push(J.length>I+1?[]:new z),!(J.length<I+1));oe++)E($[oe],I+1,J)})(_,0,k),_}var c=function(){var k=this;function z(p,g){for(var S=1<<g-1>>>0;p&S;)S>>>=1;return S?(p&S-1)+S:p}function _(p,g,S,A,R){e(!(A%S));do p[g+(A-=S)]=R;while(0<A)}function E(p,g,S,A,R){if(e(2328>=R),512>=R)var B=r(512);else if((B=r(R))==null)return 0;return(function(q,H,G,K,de,be){var X,fe,ge=H,_e=1<<G,ve=r(16),Ae=r(16);for(e(de!=0),e(K!=null),e(q!=null),e(0<G),fe=0;fe<de;++fe){if(15<K[fe])return 0;++ve[K[fe]]}if(ve[0]==de)return 0;for(Ae[1]=0,X=1;15>X;++X){if(ve[X]>1<<X)return 0;Ae[X+1]=Ae[X]+ve[X]}for(fe=0;fe<de;++fe)X=K[fe],0<K[fe]&&(be[Ae[X]++]=fe);if(Ae[15]==1)return(K=new $).g=0,K.value=be[0],_(q,ge,1,_e,K),_e;var Le,Be=-1,Ee=_e-1,ft=0,et=1,Ot=1,ct=1<<G;for(fe=0,X=1,de=2;X<=G;++X,de<<=1){if(et+=Ot<<=1,0>(Ot-=ve[X]))return 0;for(;0<ve[X];--ve[X])(K=new $).g=X,K.value=be[fe++],_(q,ge+ft,de,ct,K),ft=z(ft,X)}for(X=G+1,de=2;15>=X;++X,de<<=1){if(et+=Ot<<=1,0>(Ot-=ve[X]))return 0;for(;0<ve[X];--ve[X]){if(K=new $,(ft&Ee)!=Be){for(ge+=ct,Le=1<<(Be=X)-G;15>Be&&!(0>=(Le-=ve[Be]));)++Be,Le<<=1;_e+=ct=1<<(Le=Be-G),q[H+(Be=ft&Ee)].g=Le+G,q[H+Be].value=ge-H-Be}K.g=X-G,K.value=be[fe++],_(q,ge+(ft>>G),de,ct,K),ft=z(ft,X)}}return et!=2*Ae[15]-1?0:_e})(p,g,S,A,R,B)}function $(){this.value=this.g=0}function I(){this.value=this.g=0}function J(){this.G=a(5,$),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(_r,I)}function se(p,g,S,A){e(p!=null),e(g!=null),e(2147483648>A),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=g,p.pa=S,p.Jd=g,p.Yc=S+A,p.Zc=4<=A?S+A-4+1:S,xe(p)}function oe(p,g){for(var S=0;0<g--;)S|=Ne(p,128)<<g;return S}function F(p,g){var S=oe(p,g);return me(p)?-S:S}function he(p,g,S,A){var R,B=0;for(e(p!=null),e(g!=null),e(4294967288>A),p.Sb=A,p.Ra=0,p.u=0,p.h=0,4<A&&(A=4),R=0;R<A;++R)B+=g[S+R]<<8*R;p.Ra=B,p.bb=A,p.oa=g,p.pa=S}function ke(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ta-8>>>0,++p.bb,p.u-=8;ne(p)&&(p.h=1,p.u=0)}function ue(p,g){if(e(0<=g),!p.h&&g<=yc){var S=Z(p)&Ma[g];return p.u+=g,ke(p),S}return p.h=1,p.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(p){return p.Ra>>>(p.u&Ta-1)>>>0}function ne(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ta}function ae(p,g){p.u=g,p.h=ne(p)}function ce(p){p.u>=$n&&(e(p.u>=$n),ke(p))}function xe(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function me(p){return oe(p,1)}function Ne(p,g){var S=p.Ca;0>p.b&&xe(p);var A=p.b,R=S*g>>>8,B=(p.I>>>A>R)+0;for(B?(S-=R,p.I-=R+1<<A>>>0):S=R+1,A=S,R=0;256<=A;)R+=8,A>>=8;return A=7^R+Tf[A],p.b-=A,p.Ca=(S<<A)-1,B}function Me(p,g,S){p[g+0]=S>>24&255,p[g+1]=S>>16&255,p[g+2]=S>>8&255,p[g+3]=255&S}function Ie(p,g){return p[g+0]|p[g+1]<<8}function $e(p,g){return Ie(p,g)|p[g+2]<<16}function Se(p,g){return Ie(p,g)|Ie(p,g+2)<<16}function te(p,g){var S=1<<g;return e(p!=null),e(0<g),p.X=r(S),p.X==null?0:(p.Mb=32-g,p.Xa=g,1)}function St(p,g){e(p!=null),e(g!=null),e(p.Xa==g.Xa),s(g.X,0,p.X,0,1<<g.Xa)}function xt(){this.X=[],this.Xa=this.Mb=0}function mt(p,g,S,A){e(S!=null),e(A!=null);var R=S[0],B=A[0];return R==0&&(R=(p*B+g/2)/g),B==0&&(B=(g*R+p/2)/p),0>=R||0>=B?0:(S[0]=R,A[0]=B,1)}function ze(p,g){return p+(1<<g)-1>>>g}function ee(p,g){return((4278255360&p)+(4278255360&g)>>>0&4278255360)+((16711935&p)+(16711935&g)>>>0&16711935)>>>0}function ie(p,g){k[g]=function(S,A,R,B,q,H,G){var K;for(K=0;K<q;++K){var de=k[p](H[G+K-1],R,B+K);H[G+K]=ee(S[A+K],de)}}}function ye(){this.ud=this.hd=this.jd=0}function Ce(p,g){return((4278124286&(p^g))>>>1)+(p&g)>>>0}function Te(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function je(p,g){return Te(p+(p-g+.5>>1))}function Fe(p,g,S){return Math.abs(g-S)-Math.abs(p-S)}function lt(p,g,S,A,R,B,q){for(A=B[q-1],S=0;S<R;++S)B[q+S]=A=ee(p[g+S],A)}function Ze(p,g,S,A,R){var B;for(B=0;B<S;++B){var q=p[g+B],H=q>>8&255,G=16711935&(G=(G=16711935&q)+((H<<16)+H));A[R+B]=(4278255360&q)+G>>>0}}function Ke(p,g){g.jd=255&p,g.hd=p>>8&255,g.ud=p>>16&255}function pt(p,g,S,A,R,B){var q;for(q=0;q<A;++q){var H=g[S+q],G=H>>>8,K=H,de=255&(de=(de=H>>>16)+((p.jd<<24>>24)*(G<<24>>24)>>>5));K=255&(K=(K+=(p.hd<<24>>24)*(G<<24>>24)>>>5)+((p.ud<<24>>24)*(de<<24>>24)>>>5)),R[B+q]=(4278255360&H)+(de<<16)+K}}function Qe(p,g,S,A,R){k[g]=function(B,q,H,G,K,de,be,X,fe){for(G=be;G<X;++G)for(be=0;be<fe;++be)K[de++]=R(H[A(B[q++])])},k[p]=function(B,q,H,G,K,de,be){var X=8>>B.b,fe=B.Ea,ge=B.K[0],_e=B.w;if(8>X)for(B=(1<<B.b)-1,_e=(1<<X)-1;q<H;++q){var ve,Ae=0;for(ve=0;ve<fe;++ve)ve&B||(Ae=A(G[K++])),de[be++]=R(ge[Ae&_e]),Ae>>=X}else k["VP8LMapColor"+S](G,K,ge,_e,de,be,q,H,fe)}}function Zt(p,g,S,A,R){for(S=g+S;g<S;){var B=p[g++];A[R++]=B>>16&255,A[R++]=B>>8&255,A[R++]=255&B}}function Bt(p,g,S,A,R){for(S=g+S;g<S;){var B=p[g++];A[R++]=B>>16&255,A[R++]=B>>8&255,A[R++]=255&B,A[R++]=B>>24&255}}function nt(p,g,S,A,R){for(S=g+S;g<S;){var B=(q=p[g++])>>16&240|q>>12&15,q=240&q|q>>28&15;A[R++]=B,A[R++]=q}}function _t(p,g,S,A,R){for(S=g+S;g<S;){var B=(q=p[g++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;A[R++]=B,A[R++]=q}}function Kt(p,g,S,A,R){for(S=g+S;g<S;){var B=p[g++];A[R++]=255&B,A[R++]=B>>8&255,A[R++]=B>>16&255}}function gt(p,g,S,A,R,B){if(B==0)for(S=g+S;g<S;)Me(A,((B=p[g++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),R+=32;else s(A,R,p,g,S)}function Dt(p,g){k[g][0]=k[p+"0"],k[g][1]=k[p+"1"],k[g][2]=k[p+"2"],k[g][3]=k[p+"3"],k[g][4]=k[p+"4"],k[g][5]=k[p+"5"],k[g][6]=k[p+"6"],k[g][7]=k[p+"7"],k[g][8]=k[p+"8"],k[g][9]=k[p+"9"],k[g][10]=k[p+"10"],k[g][11]=k[p+"11"],k[g][12]=k[p+"12"],k[g][13]=k[p+"13"],k[g][14]=k[p+"0"],k[g][15]=k[p+"0"]}function Lt(p){return p==If||p==Rf||p==Yd||p==Of}function An(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function en(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new An,this.f.kb=new Dn,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vr(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function ps(p,g){var S=p.T,A=g.ba.f.RGBA,R=A.eb,B=A.fb+p.ka*A.A,q=Ui[g.ba.S],H=p.y,G=p.O,K=p.f,de=p.N,be=p.ea,X=p.W,fe=g.cc,ge=g.dc,_e=g.Mc,ve=g.Nc,Ae=p.ka,Le=p.ka+p.T,Be=p.U,Ee=Be+1>>1;for(Ae==0?q(H,G,null,null,K,de,be,X,K,de,be,X,R,B,null,null,Be):(q(g.ec,g.fc,H,G,fe,ge,_e,ve,K,de,be,X,R,B-A.A,R,B,Be),++S);Ae+2<Le;Ae+=2)fe=K,ge=de,_e=be,ve=X,de+=p.Rc,X+=p.Rc,B+=2*A.A,q(H,(G+=2*p.fa)-p.fa,H,G,fe,ge,_e,ve,K,de,be,X,R,B-A.A,R,B,Be);return G+=p.fa,p.j+Le<p.o?(s(g.ec,g.fc,H,G,Be),s(g.cc,g.dc,K,de,Ee),s(g.Mc,g.Nc,be,X,Ee),S--):1&Le||q(H,G,null,null,K,de,be,X,K,de,be,X,R,B+A.A,null,null,Be),S}function Fi(p,g,S){var A=p.F,R=[p.J];if(A!=null){var B=p.U,q=g.ba.S,H=q==Gd||q==Yd;g=g.ba.f.RGBA;var G=[0],K=p.ka;G[0]=p.T,p.Kb&&(K==0?--G[0]:(--K,R[0]-=p.width),p.j+p.ka+p.T==p.o&&(G[0]=p.o-p.j-K));var de=g.eb;K=g.fb+K*g.A,p=h0(A,R[0],p.width,B,G,de,K+(H?0:3),g.A),e(S==G),p&&Lt(q)&&wc(de,K,H,B,G,g.A)}return 0}function zi(p){var g=p.ma,S=g.ba.S,A=11>S,R=S==Vd||S==Hd||S==Gd||S==Ef||S==12||Lt(S);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!ui(g.Oa,p,R?11:12))return 0;if(R&&Lt(S)&&fc(),p.da)alert("todo:use_scaling");else{if(A){if(g.Ib=Vr,p.Kb){if(S=p.U+1>>1,g.memory=r(p.U+2*S),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+p.U,g.Mc=g.cc,g.Nc=g.dc+S,g.Ib=ps,fc()}}else alert("todo:EmitYUV");R&&(g.Jb=Fi,A&&xo())}if(A&&!A0){for(p=0;256>p;++p)IN[p]=89858*(p-128)+Kd>>Zd,FN[p]=-22014*(p-128)+Kd,ON[p]=-45773*(p-128),RN[p]=113618*(p-128)+Kd>>Zd;for(p=Nc;p<Bf;++p)g=76283*(p-16)+Kd>>Zd,zN[p-Nc]=as(g,255),BN[p-Nc]=as(g+8>>4,15);A0=1}return 1}function vt(p){var g=p.ma,S=p.U,A=p.T;return e(!(1&p.ka)),0>=S||0>=A?0:(S=g.Ib(p,g),g.Jb!=null&&g.Jb(p,g,S),g.Dc+=S,1)}function Qi(p){p.ma.memory=null}function si(p,g,S,A){return ue(p,8)!=47?0:(g[0]=ue(p,14)+1,S[0]=ue(p,14)+1,A[0]=ue(p,1),ue(p,3)!=0?0:!p.h)}function ii(p,g){if(4>p)return p+1;var S=p-2>>1;return(2+(1&p)<<S)+ue(g,S)+1}function ri(p,g){return 120<g?g-120:1<=(S=((S=wN[g-1])>>4)*p+(8-(15&S)))?S:1;var S}function mn(p,g,S){var A=Z(S),R=p[g+=255&A].g-8;return 0<R&&(ae(S,S.u+8),A=Z(S),g+=p[g].value,g+=A&(1<<R)-1),ae(S,S.u+p[g].g),p[g].value}function En(p,g,S){return S.g+=p.g,S.value+=p.value<<g>>>0,e(8>=S.g),p.g}function is(p,g,S){var A=p.xc;return e((g=A==0?0:p.vc[p.md*(S>>A)+(g>>A)])<p.Wb),p.Ya[g]}function br(p,g,S,A){var R=p.ab,B=p.c*g,q=p.C;g=q+g;var H=S,G=A;for(A=p.Ta,S=p.Ua;0<R--;){var K=p.gc[R],de=q,be=g,X=H,fe=G,ge=(G=A,H=S,K.Ea);switch(e(de<be),e(be<=K.nc),K.hc){case 2:ol(X,fe,(be-de)*ge,G,H);break;case 0:var _e=de,ve=be,Ae=G,Le=H,Be=(ct=K).Ea;_e==0&&(Cr(X,fe,null,null,1,Ae,Le),lt(X,fe+1,0,0,Be-1,Ae,Le+1),fe+=Be,Le+=Be,++_e);for(var Ee=1<<ct.b,ft=Ee-1,et=ze(Be,ct.b),Ot=ct.K,ct=ct.w+(_e>>ct.b)*et;_e<ve;){var qt=Ot,os=ct,Ft=1;for(Ar(X,fe,Ae,Le-Be,1,Ae,Le);Ft<Be;){var dt=(Ft&~ft)+Ee;dt>Be&&(dt=Be),(0,wo[qt[os++]>>8&15])(X,fe+ +Ft,Ae,Le+Ft-Be,dt-Ft,Ae,Le+Ft),Ft=dt}fe+=Be,Le+=Be,++_e&ft||(ct+=et)}be!=K.nc&&s(G,H-ge,G,H+(be-de-1)*ge,ge);break;case 1:for(ge=X,ve=fe,Be=(X=K.Ea)-(Le=X&~(Ae=(fe=1<<K.b)-1)),_e=ze(X,K.b),Ee=K.K,K=K.w+(de>>K.b)*_e;de<be;){for(ft=Ee,et=K,Ot=new ye,ct=ve+Le,qt=ve+X;ve<ct;)Ke(ft[et++],Ot),Xr(Ot,ge,ve,fe,G,H),ve+=fe,H+=fe;ve<qt&&(Ke(ft[et++],Ot),Xr(Ot,ge,ve,Be,G,H),ve+=Be,H+=Be),++de&Ae||(K+=_e)}break;case 3:if(X==G&&fe==H&&0<K.b){for(ve=G,X=ge=H+(be-de)*ge-(Le=(be-de)*ze(K.Ea,K.b)),fe=G,Ae=H,_e=[],Le=(Be=Le)-1;0<=Le;--Le)_e[Le]=fe[Ae+Le];for(Le=Be-1;0<=Le;--Le)ve[X+Le]=_e[Le];xc(K,de,be,G,ge,G,H)}else xc(K,de,be,X,fe,G,H)}H=A,G=S}G!=S&&s(A,S,H,G,B)}function wr(p,g){var S=p.V,A=p.Ba+p.c*p.C,R=g-p.C;if(e(g<=p.l.o),e(16>=R),0<R){var B=p.l,q=p.Ta,H=p.Ua,G=B.width;if(br(p,R,S,A),R=H=[H],e((S=p.C)<(A=g)),e(B.v<B.va),A>B.o&&(A=B.o),S<B.j){var K=B.j-S;S=B.j,R[0]+=K*G}if(S>=A?S=0:(R[0]+=4*B.v,B.ka=S-B.j,B.U=B.va-B.v,B.T=A-S,S=1),S){if(H=H[0],11>(S=p.ca).S){var de=S.f.RGBA,be=(A=S.S,R=B.U,B=B.T,K=de.eb,de.A),X=B;for(de=de.fb+p.Ma*de.A;0<X--;){var fe=q,ge=H,_e=R,ve=K,Ae=de;switch(A){case qd:vc(fe,ge,_e,ve,Ae);break;case Vd:_i(fe,ge,_e,ve,Ae);break;case If:_i(fe,ge,_e,ve,Ae),wc(ve,Ae,0,_e,1,0);break;case v0:un(fe,ge,_e,ve,Ae);break;case Hd:gt(fe,ge,_e,ve,Ae,1);break;case Rf:gt(fe,ge,_e,ve,Ae,1),wc(ve,Ae,0,_e,1,0);break;case Gd:gt(fe,ge,_e,ve,Ae,0);break;case Yd:gt(fe,ge,_e,ve,Ae,0),wc(ve,Ae,1,_e,1,0);break;case Ef:Pr(fe,ge,_e,ve,Ae);break;case Of:Pr(fe,ge,_e,ve,Ae),u0(ve,Ae,_e,1,0);break;case b0:dn(fe,ge,_e,ve,Ae);break;default:e(0)}H+=G,de+=be}p.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=S.height)}}p.C=g,e(p.C<=p.i)}function ai(p){var g;if(0<p.ua)return 0;for(g=0;g<p.Wb;++g){var S=p.Ya[g].G,A=p.Ya[g].H;if(0<S[1][A[1]+0].g||0<S[2][A[2]+0].g||0<S[3][A[3]+0].g)return 0}return 1}function Si(p,g,S,A,R,B){if(p.Z!=0){var q=p.qd,H=p.rd;for(e(Ea[p.Z]!=null);g<S;++g)Ea[p.Z](q,H,A,R,A,R,B),q=A,H=R,R+=B;p.qd=q,p.rd=H}}function oi(p,g){var S=p.l.ma,A=S.Z==0||S.Z==1?p.l.j:p.C;if(A=p.C<A?A:p.C,e(g<=p.l.o),g>A){var R=p.l.width,B=S.ca,q=S.tb+R*A,H=p.V,G=p.Ba+p.c*A,K=p.gc;e(p.ab==1),e(K[0].hc==3),cl(K[0],A,g,H,G,B,q),Si(S,A,g,B,q,R)}p.C=p.Ma=g}function li(p,g,S,A,R,B,q){var H=p.$/A,G=p.$%A,K=p.m,de=p.s,be=S+p.$,X=be;R=S+A*R;var fe=S+A*B,ge=280+de.ua,_e=p.Pb?H:16777216,ve=0<de.ua?de.Wa:null,Ae=de.wc,Le=be<fe?is(de,G,H):null;e(p.C<B),e(fe<=R);var Be=!1;e:for(;;){for(;Be||be<fe;){var Ee=0;if(H>=_e){var ft=be-S;e((_e=p).Pb),_e.wd=_e.m,_e.xd=ft,0<_e.s.ua&&St(_e.s.Wa,_e.s.vb),_e=H+NN}if(G&Ae||(Le=is(de,G,H)),e(Le!=null),Le.Qb&&(g[be]=Le.qb,Be=!0),!Be)if(ce(K),Le.jc){Ee=K,ft=g;var et=be,Ot=Le.pd[Z(Ee)&_r-1];e(Le.jc),256>Ot.g?(ae(Ee,Ee.u+Ot.g),ft[et]=Ot.value,Ee=0):(ae(Ee,Ee.u+Ot.g-256),e(256<=Ot.value),Ee=Ot.value),Ee==0&&(Be=!0)}else Ee=mn(Le.G[0],Le.H[0],K);if(K.h)break;if(Be||256>Ee){if(!Be)if(Le.nd)g[be]=(Le.qb|Ee<<8)>>>0;else{if(ce(K),Be=mn(Le.G[1],Le.H[1],K),ce(K),ft=mn(Le.G[2],Le.H[2],K),et=mn(Le.G[3],Le.H[3],K),K.h)break;g[be]=(et<<24|Be<<16|Ee<<8|ft)>>>0}if(Be=!1,++be,++G>=A&&(G=0,++H,q!=null&&H<=B&&!(H%16)&&q(p,H),ve!=null))for(;X<be;)Ee=g[X++],ve.X[(506832829*Ee&4294967295)>>>ve.Mb]=Ee}else if(280>Ee){if(Ee=ii(Ee-256,K),ft=mn(Le.G[4],Le.H[4],K),ce(K),ft=ri(A,ft=ii(ft,K)),K.h)break;if(be-S<ft||R-be<Ee)break e;for(et=0;et<Ee;++et)g[be+et]=g[be+et-ft];for(be+=Ee,G+=Ee;G>=A;)G-=A,++H,q!=null&&H<=B&&!(H%16)&&q(p,H);if(e(be<=R),G&Ae&&(Le=is(de,G,H)),ve!=null)for(;X<be;)Ee=g[X++],ve.X[(506832829*Ee&4294967295)>>>ve.Mb]=Ee}else{if(!(Ee<ge))break e;for(Be=Ee-280,e(ve!=null);X<be;)Ee=g[X++],ve.X[(506832829*Ee&4294967295)>>>ve.Mb]=Ee;Ee=be,e(!(Be>>>(ft=ve).Xa)),g[Ee]=ft.X[Be],Be=!0}Be||e(K.h==ne(K))}if(p.Pb&&K.h&&be<R)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&St(p.s.vb,p.s.Wa);else{if(K.h)break e;q?.(p,H>B?B:H),p.a=0,p.$=be-S}return 1}return p.a=3,0}function Cs(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var g=p.Wa;g!=null&&(g.X=null),p.vb=null,e(p!=null)}function qs(){var p=new Ln;return p==null?null:(p.a=0,p.xb=N0,Dt("Predictor","VP8LPredictors"),Dt("Predictor","VP8LPredictors_C"),Dt("PredictorAdd","VP8LPredictorsAdd"),Dt("PredictorAdd","VP8LPredictorsAdd_C"),ol=Ze,Xr=pt,vc=Zt,_i=Bt,Pr=nt,dn=_t,un=Kt,k.VP8LMapColor32b=ll,k.VP8LMapColor8b=bo,p)}function As(p,g,S,A,R){var B=1,q=[p],H=[g],G=A.m,K=A.s,de=null,be=0;e:for(;;){if(S)for(;B&&ue(G,1);){var X=q,fe=H,ge=A,_e=1,ve=ge.m,Ae=ge.gc[ge.ab],Le=ue(ve,2);if(ge.Oc&1<<Le)B=0;else{switch(ge.Oc|=1<<Le,Ae.hc=Le,Ae.Ea=X[0],Ae.nc=fe[0],Ae.K=[null],++ge.ab,e(4>=ge.ab),Le){case 0:case 1:Ae.b=ue(ve,3)+2,_e=As(ze(Ae.Ea,Ae.b),ze(Ae.nc,Ae.b),0,ge,Ae.K),Ae.K=Ae.K[0];break;case 3:var Be,Ee=ue(ve,8)+1,ft=16<Ee?0:4<Ee?1:2<Ee?2:3;if(X[0]=ze(Ae.Ea,ft),Ae.b=ft,Be=_e=As(Ee,1,0,ge,Ae.K)){var et,Ot=Ee,ct=Ae,qt=1<<(8>>ct.b),os=r(qt);if(os==null)Be=0;else{var Ft=ct.K[0],dt=ct.w;for(os[0]=ct.K[0][0],et=1;et<1*Ot;++et)os[et]=ee(Ft[dt+et],os[et-1]);for(;et<4*qt;++et)os[et]=0;ct.K[0]=null,ct.K[0]=os,Be=1}}_e=Be;break;case 2:break;default:e(0)}B=_e}}if(q=q[0],H=H[0],B&&ue(G,1)&&!(B=1<=(be=ue(G,4))&&11>=be)){A.a=3;break e}var Ue;if(Ue=B)t:{var qn,Et,Ht,yn=A,Ss=q,Ys=H,In=be,Ts=S,Zs=yn.m,ls=yn.s,Gt=[null],tn=1,Rn=0,nn=SN[In];n:for(;;){if(Ts&&ue(Zs,1)){var Ns=ue(Zs,3)+2,rr=ze(Ss,Ns),Vn=ze(Ys,Ns),fi=rr*Vn;if(!As(rr,Vn,0,yn,Gt))break n;for(Gt=Gt[0],ls.xc=Ns,qn=0;qn<fi;++qn){var an=Gt[qn]>>8&65535;Gt[qn]=an,an>=tn&&(tn=an+1)}}if(Zs.h)break n;for(Et=0;5>Et;++Et){var cs=w0[Et];!Et&&0<In&&(cs+=1<<In),Rn<cs&&(Rn=cs)}var Ai=a(tn*nn,$),Ks=tn,Pi=a(Ks,J);if(Pi==null)var Li=null;else e(65536>=Ks),Li=Pi;var mi=r(Rn);if(Li==null||mi==null||Ai==null){yn.a=1;break n}var Mi=Ai;for(qn=Ht=0;qn<tn;++qn){var hn=Li[qn],Ti=hn.G,ar=hn.H,So=0,ea=1,ks=0;for(Et=0;5>Et;++Et){cs=w0[Et],Ti[Et]=Mi,ar[Et]=Ht,!Et&&0<In&&(cs+=1<<In);i:{var Qd,$f=cs,Jd=yn,kc=mi,UN=Mi,qN=Ht,Wf=0,Ia=Jd.m,VN=ue(Ia,1);if(i(kc,0,0,$f),VN){var HN=ue(Ia,1)+1,GN=ue(Ia,1),M0=ue(Ia,GN==0?1:8);kc[M0]=1,HN==2&&(kc[M0=ue(Ia,8)]=1);var eu=1}else{var T0=r(19),D0=ue(Ia,4)+4;if(19<D0){Jd.a=3;var tu=0;break i}for(Qd=0;Qd<D0;++Qd)T0[bN[Qd]]=ue(Ia,3);var Uf=void 0,jc=void 0,E0=Jd,YN=T0,nu=$f,I0=kc,qf=0,Ra=E0.m,R0=8,O0=a(128,$);s:for(;E(O0,0,7,YN,19);){if(ue(Ra,1)){var ZN=2+2*ue(Ra,3);if((Uf=2+ue(Ra,ZN))>nu)break s}else Uf=nu;for(jc=0;jc<nu&&Uf--;){ce(Ra);var F0=O0[0+(127&Z(Ra))];ae(Ra,Ra.u+F0.g);var ul=F0.value;if(16>ul)I0[jc++]=ul,ul!=0&&(R0=ul);else{var KN=ul==16,z0=ul-16,XN=xN[z0],B0=ue(Ra,yN[z0])+XN;if(jc+B0>nu)break s;for(var QN=KN?R0:0;0<B0--;)I0[jc++]=QN}}qf=1;break s}qf||(E0.a=3),eu=qf}(eu=eu&&!Ia.h)&&(Wf=E(UN,qN,8,kc,$f)),eu&&Wf!=0?tu=Wf:(Jd.a=3,tu=0)}if(tu==0)break n;if(ea&&vN[Et]==1&&(ea=Mi[Ht].g==0),So+=Mi[Ht].g,Ht+=tu,3>=Et){var _c,Vf=mi[0];for(_c=1;_c<cs;++_c)mi[_c]>Vf&&(Vf=mi[_c]);ks+=Vf}}if(hn.nd=ea,hn.Qb=0,ea&&(hn.qb=(Ti[3][ar[3]+0].value<<24|Ti[1][ar[1]+0].value<<16|Ti[2][ar[2]+0].value)>>>0,So==0&&256>Ti[0][ar[0]+0].value&&(hn.Qb=1,hn.qb+=Ti[0][ar[0]+0].value<<8)),hn.jc=!hn.Qb&&6>ks,hn.jc){var su,ta=hn;for(su=0;su<_r;++su){var Oa=su,Fa=ta.pd[Oa],iu=ta.G[0][ta.H[0]+Oa];256<=iu.value?(Fa.g=iu.g+256,Fa.value=iu.value):(Fa.g=0,Fa.value=0,Oa>>=En(iu,8,Fa),Oa>>=En(ta.G[1][ta.H[1]+Oa],16,Fa),Oa>>=En(ta.G[2][ta.H[2]+Oa],0,Fa),En(ta.G[3][ta.H[3]+Oa],24,Fa))}}}ls.vc=Gt,ls.Wb=tn,ls.Ya=Li,ls.yc=Ai,Ue=1;break t}Ue=0}if(!(B=Ue)){A.a=3;break e}if(0<be){if(K.ua=1<<be,!te(K.Wa,be)){A.a=1,B=0;break e}}else K.ua=0;var Hf=A,$0=q,JN=H,Gf=Hf.s,Yf=Gf.xc;if(Hf.c=$0,Hf.i=JN,Gf.md=ze($0,Yf),Gf.wc=Yf==0?-1:(1<<Yf)-1,S){A.xb=LN;break e}if((de=r(q*H))==null){A.a=1,B=0;break e}B=(B=li(A,de,0,q,H,H,null))&&!G.h;break e}return B?(R!=null?R[0]=de:(e(de==null),e(S)),A.$=0,S||Cs(K)):Cs(K),B}function Ni(p,g){var S=p.c*p.i,A=S+g+16*g;return e(p.c<=g),p.V=r(A),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+S+g,1)}function Ji(p,g){var S=p.C,A=g-S,R=p.V,B=p.Ba+p.c*S;for(e(g<=p.l.o);0<A;){var q=16<A?16:A,H=p.l.ma,G=p.l.width,K=G*q,de=H.ca,be=H.tb+G*S,X=p.Ta,fe=p.Ua;br(p,q,R,B),f0(X,fe,de,be,K),Si(H,S,S+q,de,be,G),A-=q,R+=q*p.c,S+=q}e(S==g),p.C=p.Ma=g}function Sr(){this.ub=this.yd=this.td=this.Rb=0}function ka(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function sc(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Nr(){this.Yb=(function(){var p=[];return(function g(S,A,R){for(var B=R[A],q=0;q<B&&(S.push(R.length>A+1?[]:0),!(R.length<A+1));q++)g(S[q],A+1,R)})(p,0,[3,11]),p})()}function bs(){this.jb=r(3),this.Wc=o([4,8],Nr),this.Xc=o([4,17],Nr)}function er(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Bn(){this.ld=this.La=this.dd=this.tc=0}function Vs(){this.Na=this.la=0}function kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ps(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ci(){this.uc=this.M=this.Nb=0,this.wa=Array(new Bn),this.Y=0,this.ya=Array(new Ps),this.aa=0,this.l=new tr}function co(){this.y=r(16),this.f=r(8),this.ea=r(8)}function uo(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new Sr,this.Kc=new ka,this.ed=new er,this.Qa=new sc,this.Ic=this.$c=this.Aa=0,this.D=new ci,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,D),this.ia=0,this.pb=a(4,kr),this.Pa=new bs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new co),this.Hd=0,this.rb=Array(new Vs),this.sb=0,this.wa=Array(new Bn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ps),this.L=this.aa=0,this.gd=o([4,2],Bn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hs(){var p=new uo;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Sc||(Sc=ki)),p}function pn(p,g,S){return p.a==0&&(p.a=g,p.sc=S,p.cb=0),0}function ja(p,g,S){return 3<=S&&p[g+0]==157&&p[g+1]==1&&p[g+2]==42}function _a(p,g){if(p==null)return 0;if(p.a=0,p.sc="OK",g==null)return pn(p,2,"null VP8Io passed to VP8GetHeaders()");var S=g.data,A=g.w,R=g.ha;if(4>R)return pn(p,7,"Truncated header.");var B=S[A+0]|S[A+1]<<8|S[A+2]<<16,q=p.Od;if(q.Rb=!(1&B),q.td=B>>1&7,q.yd=B>>4&1,q.ub=B>>5,3<q.td)return pn(p,3,"Incorrect keyframe parameters.");if(!q.yd)return pn(p,4,"Frame not displayable.");A+=3,R-=3;var H=p.Kc;if(q.Rb){if(7>R)return pn(p,7,"cannot parse picture header");if(!ja(S,A,R))return pn(p,3,"Bad code word");H.c=16383&(S[A+4]<<8|S[A+3]),H.Td=S[A+4]>>6,H.i=16383&(S[A+6]<<8|S[A+5]),H.Ud=S[A+6]>>6,A+=7,R-=7,p.za=H.c+15>>4,p.Ub=H.i+15>>4,g.width=H.c,g.height=H.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((B=p.Pa).jb,0,255,B.jb.length),e((B=p.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,i(B.Zb,0,0,B.Zb.length),i(B.Lb,0,0,B.Lb)}if(q.ub>R)return pn(p,7,"bad partition length");se(B=p.m,S,A,q.ub),A+=q.ub,R-=q.ub,q.Rb&&(H.Ld=me(B),H.Kd=me(B)),H=p.Qa;var G,K=p.Pa;if(e(B!=null),e(H!=null),H.Cb=me(B),H.Cb){if(H.Bb=me(B),me(B)){for(H.Fb=me(B),G=0;4>G;++G)H.Zb[G]=me(B)?F(B,7):0;for(G=0;4>G;++G)H.Lb[G]=me(B)?F(B,6):0}if(H.Bb)for(G=0;3>G;++G)K.jb[G]=me(B)?oe(B,8):255}else H.Bb=0;if(B.Ka)return pn(p,3,"cannot parse segment header");if((H=p.ed).zd=me(B),H.Tb=oe(B,6),H.wb=oe(B,3),H.Pc=me(B),H.Pc&&me(B)){for(K=0;4>K;++K)me(B)&&(H.vd[K]=F(B,6));for(K=0;4>K;++K)me(B)&&(H.od[K]=F(B,6))}if(p.L=H.Tb==0?0:H.zd?1:2,B.Ka)return pn(p,3,"cannot parse filter header");var de=R;if(R=G=A,A=G+de,H=de,p.Xb=(1<<oe(p.m,2))-1,de<3*(K=p.Xb))S=7;else{for(G+=3*K,H-=3*K,de=0;de<K;++de){var be=S[R+0]|S[R+1]<<8|S[R+2]<<16;be>H&&(be=H),se(p.Jc[+de],S,G,be),G+=be,H-=be,R+=3}se(p.Jc[+K],S,G,H),S=G<A?0:5}if(S!=0)return pn(p,S,"cannot parse partitions");for(S=oe(G=p.m,7),R=me(G)?F(G,4):0,A=me(G)?F(G,4):0,H=me(G)?F(G,4):0,K=me(G)?F(G,4):0,G=me(G)?F(G,4):0,de=p.Qa,be=0;4>be;++be){if(de.Cb){var X=de.Zb[be];de.Fb||(X+=S)}else{if(0<be){p.pb[be]=p.pb[0];continue}X=S}var fe=p.pb[be];fe.Sc[0]=Ff[as(X+R,127)],fe.Sc[1]=zf[as(X+0,127)],fe.Eb[0]=2*Ff[as(X+A,127)],fe.Eb[1]=101581*zf[as(X+H,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=Ff[as(X+K,117)],fe.Qc[1]=zf[as(X+G,127)],fe.lc=X+G}if(!q.Rb)return pn(p,4,"Not a key frame.");for(me(B),q=p.Pa,S=0;4>S;++S){for(R=0;8>R;++R)for(A=0;3>A;++A)for(H=0;11>H;++H)K=Ne(B,AN[S][R][A][H])?oe(B,8):_N[S][R][A][H],q.Wc[S][R].Yb[A][H]=K;for(R=0;17>R;++R)q.Xc[S][R]=q.Wc[S][PN[R]]}return p.kc=me(B),p.kc&&(p.Bd=oe(B,8)),p.cb=1}function ki(p,g,S,A,R,B,q){var H=g[R].Yb[S];for(S=0;16>R;++R){if(!Ne(p,H[S+0]))return R;for(;!Ne(p,H[S+1]);)if(H=g[++R].Yb[0],S=0,R==16)return 16;var G=g[R+1].Yb;if(Ne(p,H[S+2])){var K=p,de=0;if(Ne(K,(X=H)[(be=S)+3]))if(Ne(K,X[be+6])){for(H=0,be=2*(de=Ne(K,X[be+8]))+(X=Ne(K,X[be+9+de])),de=0,X=kN[be];X[H];++H)de+=de+Ne(K,X[H]);de+=3+(8<<be)}else Ne(K,X[be+7])?(de=7+2*Ne(K,165),de+=Ne(K,145)):de=5+Ne(K,159);else de=Ne(K,X[be+4])?3+Ne(K,X[be+5]):2;H=G[2]}else de=1,H=G[1];G=q+jN[R],0>(K=p).b&&xe(K);var be,X=K.b,fe=(be=K.Ca>>1)-(K.I>>X)>>31;--K.b,K.Ca+=fe,K.Ca|=1,K.I-=(be+1&fe)<<X,B[G]=((de^fe)-fe)*A[(0<R)+0]}return 16}function nr(p){var g=p.rb[p.sb-1];g.la=0,g.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function Ls(p,g,S,A,R){R=p[g+S+32*A]+(R>>3),p[g+S+32*A]=-256&R?0>R?0:255:R}function Ms(p,g,S,A,R,B){Ls(p,g,0,S,A+R),Ls(p,g,1,S,A+B),Ls(p,g,2,S,A-B),Ls(p,g,3,S,A-R)}function Pn(p){return(20091*p>>16)+p}function Ca(p,g,S,A){var R,B=0,q=r(16);for(R=0;4>R;++R){var H=p[g+0]+p[g+8],G=p[g+0]-p[g+8],K=(35468*p[g+4]>>16)-Pn(p[g+12]),de=Pn(p[g+4])+(35468*p[g+12]>>16);q[B+0]=H+de,q[B+1]=G+K,q[B+2]=G-K,q[B+3]=H-de,B+=4,g++}for(R=B=0;4>R;++R)H=(p=q[B+0]+4)+q[B+8],G=p-q[B+8],K=(35468*q[B+4]>>16)-Pn(q[B+12]),Ls(S,A,0,0,H+(de=Pn(q[B+4])+(35468*q[B+12]>>16))),Ls(S,A,1,0,G+K),Ls(S,A,2,0,G-K),Ls(S,A,3,0,H-de),B++,A+=32}function ho(p,g,S,A){var R=p[g+0]+4,B=35468*p[g+4]>>16,q=Pn(p[g+4]),H=35468*p[g+1]>>16;Ms(S,A,0,R+q,p=Pn(p[g+1]),H),Ms(S,A,1,R+B,p,H),Ms(S,A,2,R-B,p,H),Ms(S,A,3,R-q,p,H)}function Qo(p,g,S,A,R){Ca(p,g,S,A),R&&Ca(p,g+16,S,A+4)}function ic(p,g,S,A){Un(p,g+0,S,A,1),Un(p,g+32,S,A+128,1)}function Bi(p,g,S,A){var R;for(p=p[g+0]+4,R=0;4>R;++R)for(g=0;4>g;++g)Ls(S,A,g,R,p)}function U(p,g,S,A){p[g+0]&&Lr(p,g+0,S,A),p[g+16]&&Lr(p,g+16,S,A+4),p[g+32]&&Lr(p,g+32,S,A+128),p[g+48]&&Lr(p,g+48,S,A+128+4)}function Y(p,g,S,A){var R,B=r(16);for(R=0;4>R;++R){var q=p[g+0+R]+p[g+12+R],H=p[g+4+R]+p[g+8+R],G=p[g+4+R]-p[g+8+R],K=p[g+0+R]-p[g+12+R];B[0+R]=q+H,B[8+R]=q-H,B[4+R]=K+G,B[12+R]=K-G}for(R=0;4>R;++R)q=(p=B[0+4*R]+3)+B[3+4*R],H=B[1+4*R]+B[2+4*R],G=B[1+4*R]-B[2+4*R],K=p-B[3+4*R],S[A+0]=q+H>>3,S[A+16]=K+G>>3,S[A+32]=q-H>>3,S[A+48]=K-G>>3,A+=64}function re(p,g,S){var A,R=g-32,B=Ci,q=255-p[R-1];for(A=0;A<S;++A){var H,G=B,K=q+p[g-1];for(H=0;H<S;++H)p[g+H]=G[K+p[R+H]];g+=32}}function we(p,g){re(p,g,4)}function Oe(p,g){re(p,g,8)}function Xe(p,g){re(p,g,16)}function Rt(p,g){var S;for(S=0;16>S;++S)s(p,g+32*S,p,g-32,16)}function wn(p,g){var S;for(S=16;0<S;--S)i(p,g,p[g-1],16),g+=32}function gn(p,g,S){var A;for(A=0;16>A;++A)i(g,S+32*A,p,16)}function Sn(p,g){var S,A=16;for(S=0;16>S;++S)A+=p[g-1+32*S]+p[g+S-32];gn(A>>5,p,g)}function di(p,g){var S,A=8;for(S=0;16>S;++S)A+=p[g-1+32*S];gn(A>>4,p,g)}function fo(p,g){var S,A=8;for(S=0;16>S;++S)A+=p[g+S-32];gn(A>>4,p,g)}function rc(p,g){gn(128,p,g)}function Mt(p,g,S){return p+2*g+S+2>>2}function kf(p,g){var S,A=g-32;for(A=new Uint8Array([Mt(p[A-1],p[A+0],p[A+1]),Mt(p[A+0],p[A+1],p[A+2]),Mt(p[A+1],p[A+2],p[A+3]),Mt(p[A+2],p[A+3],p[A+4])]),S=0;4>S;++S)s(p,g+32*S,A,0,A.length)}function jf(p,g){var S=p[g-1],A=p[g-1+32],R=p[g-1+64],B=p[g-1+96];Me(p,g+0,16843009*Mt(p[g-1-32],S,A)),Me(p,g+32,16843009*Mt(S,A,R)),Me(p,g+64,16843009*Mt(A,R,B)),Me(p,g+96,16843009*Mt(R,B,B))}function _f(p,g){var S,A=4;for(S=0;4>S;++S)A+=p[g+S-32]+p[g-1+32*S];for(A>>=3,S=0;4>S;++S)i(p,g+32*S,A,4)}function Cf(p,g){var S=p[g-1+0],A=p[g-1+32],R=p[g-1+64],B=p[g-1-32],q=p[g+0-32],H=p[g+1-32],G=p[g+2-32],K=p[g+3-32];p[g+0+96]=Mt(A,R,p[g-1+96]),p[g+1+96]=p[g+0+64]=Mt(S,A,R),p[g+2+96]=p[g+1+64]=p[g+0+32]=Mt(B,S,A),p[g+3+96]=p[g+2+64]=p[g+1+32]=p[g+0+0]=Mt(q,B,S),p[g+3+64]=p[g+2+32]=p[g+1+0]=Mt(H,q,B),p[g+3+32]=p[g+2+0]=Mt(G,H,q),p[g+3+0]=Mt(K,G,H)}function Hr(p,g){var S=p[g+1-32],A=p[g+2-32],R=p[g+3-32],B=p[g+4-32],q=p[g+5-32],H=p[g+6-32],G=p[g+7-32];p[g+0+0]=Mt(p[g+0-32],S,A),p[g+1+0]=p[g+0+32]=Mt(S,A,R),p[g+2+0]=p[g+1+32]=p[g+0+64]=Mt(A,R,B),p[g+3+0]=p[g+2+32]=p[g+1+64]=p[g+0+96]=Mt(R,B,q),p[g+3+32]=p[g+2+64]=p[g+1+96]=Mt(B,q,H),p[g+3+64]=p[g+2+96]=Mt(q,H,G),p[g+3+96]=Mt(H,G,G)}function Gr(p,g){var S=p[g-1+0],A=p[g-1+32],R=p[g-1+64],B=p[g-1-32],q=p[g+0-32],H=p[g+1-32],G=p[g+2-32],K=p[g+3-32];p[g+0+0]=p[g+1+64]=B+q+1>>1,p[g+1+0]=p[g+2+64]=q+H+1>>1,p[g+2+0]=p[g+3+64]=H+G+1>>1,p[g+3+0]=G+K+1>>1,p[g+0+96]=Mt(R,A,S),p[g+0+64]=Mt(A,S,B),p[g+0+32]=p[g+1+96]=Mt(S,B,q),p[g+1+32]=p[g+2+96]=Mt(B,q,H),p[g+2+32]=p[g+3+96]=Mt(q,H,G),p[g+3+32]=Mt(H,G,K)}function Af(p,g){var S=p[g+0-32],A=p[g+1-32],R=p[g+2-32],B=p[g+3-32],q=p[g+4-32],H=p[g+5-32],G=p[g+6-32],K=p[g+7-32];p[g+0+0]=S+A+1>>1,p[g+1+0]=p[g+0+64]=A+R+1>>1,p[g+2+0]=p[g+1+64]=R+B+1>>1,p[g+3+0]=p[g+2+64]=B+q+1>>1,p[g+0+32]=Mt(S,A,R),p[g+1+32]=p[g+0+96]=Mt(A,R,B),p[g+2+32]=p[g+1+96]=Mt(R,B,q),p[g+3+32]=p[g+2+96]=Mt(B,q,H),p[g+3+64]=Mt(q,H,G),p[g+3+96]=Mt(H,G,K)}function Pf(p,g){var S=p[g-1+0],A=p[g-1+32],R=p[g-1+64],B=p[g-1+96];p[g+0+0]=S+A+1>>1,p[g+2+0]=p[g+0+32]=A+R+1>>1,p[g+2+32]=p[g+0+64]=R+B+1>>1,p[g+1+0]=Mt(S,A,R),p[g+3+0]=p[g+1+32]=Mt(A,R,B),p[g+3+32]=p[g+1+64]=Mt(R,B,B),p[g+3+64]=p[g+2+64]=p[g+0+96]=p[g+1+96]=p[g+2+96]=p[g+3+96]=B}function Jo(p,g){var S=p[g-1+0],A=p[g-1+32],R=p[g-1+64],B=p[g-1+96],q=p[g-1-32],H=p[g+0-32],G=p[g+1-32],K=p[g+2-32];p[g+0+0]=p[g+2+32]=S+q+1>>1,p[g+0+32]=p[g+2+64]=A+S+1>>1,p[g+0+64]=p[g+2+96]=R+A+1>>1,p[g+0+96]=B+R+1>>1,p[g+3+0]=Mt(H,G,K),p[g+2+0]=Mt(q,H,G),p[g+1+0]=p[g+3+32]=Mt(S,q,H),p[g+1+32]=p[g+3+64]=Mt(A,S,q),p[g+1+64]=p[g+3+96]=Mt(R,A,S),p[g+1+96]=Mt(B,R,A)}function ac(p,g){var S;for(S=0;8>S;++S)s(p,g+32*S,p,g-32,8)}function mo(p,g){var S;for(S=0;8>S;++S)i(p,g,p[g-1],8),g+=32}function el(p,g,S){var A;for(A=0;8>A;++A)i(g,S+32*A,p,8)}function tl(p,g){var S,A=8;for(S=0;8>S;++S)A+=p[g+S-32]+p[g-1+32*S];el(A>>4,p,g)}function Lf(p,g){var S,A=4;for(S=0;8>S;++S)A+=p[g+S-32];el(A>>3,p,g)}function oc(p,g){var S,A=4;for(S=0;8>S;++S)A+=p[g-1+32*S];el(A>>3,p,g)}function lc(p,g){el(128,p,g)}function po(p,g,S){var A=p[g-S],R=p[g+0],B=3*(R-A)+Df[1020+p[g-2*S]-p[g+S]],q=Ud[112+(B+4>>3)];p[g-S]=Ci[255+A+Ud[112+(B+3>>3)]],p[g+0]=Ci[255+R-q]}function go(p,g,S,A){var R=p[g+0],B=p[g+S];return Wi[255+p[g-2*S]-p[g-S]]>A||Wi[255+B-R]>A}function cc(p,g,S,A){return 4*Wi[255+p[g-S]-p[g+0]]+Wi[255+p[g-2*S]-p[g+S]]<=A}function nl(p,g,S,A,R){var B=p[g-3*S],q=p[g-2*S],H=p[g-S],G=p[g+0],K=p[g+S],de=p[g+2*S],be=p[g+3*S];return 4*Wi[255+H-G]+Wi[255+q-K]>A?0:Wi[255+p[g-4*S]-B]<=R&&Wi[255+B-q]<=R&&Wi[255+q-H]<=R&&Wi[255+be-de]<=R&&Wi[255+de-K]<=R&&Wi[255+K-G]<=R}function dc(p,g,S,A){var R=2*A+1;for(A=0;16>A;++A)cc(p,g+A,S,R)&&po(p,g+A,S)}function yo(p,g,S,A){var R=2*A+1;for(A=0;16>A;++A)cc(p,g+A*S,1,R)&&po(p,g+A*S,1)}function uc(p,g,S,A){var R;for(R=3;0<R;--R)dc(p,g+=4*S,S,A)}function hc(p,g,S,A){var R;for(R=3;0<R;--R)yo(p,g+=4,S,A)}function ji(p,g,S,A,R,B,q,H){for(B=2*B+1;0<R--;){if(nl(p,g,S,B,q))if(go(p,g,S,H))po(p,g,S);else{var G=p,K=g,de=S,be=G[K-2*de],X=G[K-de],fe=G[K+0],ge=G[K+de],_e=G[K+2*de],ve=27*(Le=Df[1020+3*(fe-X)+Df[1020+be-ge]])+63>>7,Ae=18*Le+63>>7,Le=9*Le+63>>7;G[K-3*de]=Ci[255+G[K-3*de]+Le],G[K-2*de]=Ci[255+be+Ae],G[K-de]=Ci[255+X+ve],G[K+0]=Ci[255+fe-ve],G[K+de]=Ci[255+ge-Ae],G[K+2*de]=Ci[255+_e-Le]}g+=A}}function jr(p,g,S,A,R,B,q,H){for(B=2*B+1;0<R--;){if(nl(p,g,S,B,q))if(go(p,g,S,H))po(p,g,S);else{var G=p,K=g,de=S,be=G[K-de],X=G[K+0],fe=G[K+de],ge=Ud[112+(4+(_e=3*(X-be))>>3)],_e=Ud[112+(_e+3>>3)],ve=ge+1>>1;G[K-2*de]=Ci[255+G[K-2*de]+ve],G[K-de]=Ci[255+be+_e],G[K+0]=Ci[255+X-ge],G[K+de]=Ci[255+fe-ve]}g+=A}}function b(p,g,S,A,R,B){ji(p,g,S,1,16,A,R,B)}function O(p,g,S,A,R,B){ji(p,g,1,S,16,A,R,B)}function Q(p,g,S,A,R,B){var q;for(q=3;0<q;--q)jr(p,g+=4*S,S,1,16,A,R,B)}function le(p,g,S,A,R,B){var q;for(q=3;0<q;--q)jr(p,g+=4,1,S,16,A,R,B)}function pe(p,g,S,A,R,B,q,H){ji(p,g,R,1,8,B,q,H),ji(S,A,R,1,8,B,q,H)}function Pe(p,g,S,A,R,B,q,H){ji(p,g,1,R,8,B,q,H),ji(S,A,1,R,8,B,q,H)}function Re(p,g,S,A,R,B,q,H){jr(p,g+4*R,R,1,8,B,q,H),jr(S,A+4*R,R,1,8,B,q,H)}function ot(p,g,S,A,R,B,q,H){jr(p,g+4,1,R,8,B,q,H),jr(S,A+4,1,R,8,B,q,H)}function ht(){this.ba=new en,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ct(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function It(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Jt(){this.ua=0,this.Wa=new xt,this.vb=new xt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new $}function Ln(){this.xb=this.a=0,this.l=new tr,this.ca=new en,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Jt,this.ab=0,this.gc=a(4,It),this.Oc=0}function Kn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rn(p,g,S,A,R,B,q){for(p=p==null?0:p[g+0],g=0;g<q;++g)R[B+g]=p+S[A+g]&255,p=R[B+g]}function rs(p,g,S,A,R,B,q){var H;if(p==null)rn(null,null,S,A,R,B,q);else for(H=0;H<q;++H)R[B+H]=p[g+H]+S[A+H]&255}function Xn(p,g,S,A,R,B,q){if(p==null)rn(null,null,S,A,R,B,q);else{var H,G=p[g+0],K=G,de=G;for(H=0;H<q;++H)K=de+(G=p[g+H])-K,de=S[A+H]+(-256&K?0>K?0:255:K)&255,K=G,R[B+H]=de}}function ws(p,g,S,A){var R=g.width,B=g.o;if(e(p!=null&&g!=null),0>S||0>=A||S+A>B)return null;if(!p.Cc){if(p.ga==null){var q;if(p.ga=new Kn,(q=p.ga==null)||(q=g.width*g.o,e(p.Gb.length==0),p.Gb=r(q),p.Uc=0,p.Gb==null?q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,q=1),q=!q),!q){q=p.ga;var H=p.Fa,G=p.P,K=p.qc,de=p.mb,be=p.nb,X=G+1,fe=K-1,ge=q.l;if(e(H!=null&&de!=null&&g!=null),Ea[0]=null,Ea[1]=rn,Ea[2]=rs,Ea[3]=Xn,q.ca=de,q.tb=be,q.c=g.width,q.i=g.height,e(0<q.c&&0<q.i),1>=K)g=0;else if(q.$a=3&H[G+0],q.Z=H[G+0]>>2&3,q.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||G)g=0;else if(ge.put=vt,ge.ac=zi,ge.bc=Qi,ge.ma=q,ge.width=g.width,ge.height=g.height,ge.Da=g.Da,ge.v=g.v,ge.va=g.va,ge.j=g.j,ge.o=g.o,q.$a)e:{e(q.$a==1),g=qs();t:for(;;){if(g==null){g=0;break e}if(e(q!=null),q.mc=g,g.c=q.c,g.i=q.i,g.l=q.l,g.l.ma=q,g.l.width=q.c,g.l.height=q.i,g.a=0,he(g.m,H,X,fe),!As(q.c,q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&ai(g.s)?(q.ic=1,H=g.c*g.i,g.Ta=null,g.Ua=0,g.V=r(H),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(q.ic=0,g=Ni(g,q.c)),!g))break t;g=1;break e}q.mc=null,g=0}else g=fe>=q.c*q.i;q=!g}if(q)return null;p.ga.Lc!=1?p.Ga=0:A=B-S}e(p.ga!=null),e(S+A<=B);e:{if(g=(H=p.ga).c,B=H.l.o,H.$a==0){if(X=p.rc,fe=p.Vc,ge=p.Fa,G=p.P+1+S*g,K=p.mb,de=p.nb+S*g,e(G<=p.P+p.qc),H.Z!=0)for(e(Ea[H.Z]!=null),q=0;q<A;++q)Ea[H.Z](X,fe,ge,G,K,de,g),X=K,fe=de,de+=g,G+=g;else for(q=0;q<A;++q)s(K,de,ge,G,g),X=K,fe=de,de+=g,G+=g;p.rc=X,p.Vc=fe}else{if(e(H.mc!=null),g=S+A,e((q=H.mc)!=null),e(g<=q.i),q.C>=g)g=1;else if(H.ic||xo(),H.ic){H=q.V,X=q.Ba,fe=q.c;var _e=q.i,ve=(ge=1,G=q.$/fe,K=q.$%fe,de=q.m,be=q.s,q.$),Ae=fe*_e,Le=fe*g,Be=be.wc,Ee=ve<Le?is(be,K,G):null;e(ve<=Ae),e(g<=_e),e(ai(be));t:for(;;){for(;!de.h&&ve<Le;){if(K&Be||(Ee=is(be,K,G)),e(Ee!=null),ce(de),256>(_e=mn(Ee.G[0],Ee.H[0],de)))H[X+ve]=_e,++ve,++K>=fe&&(K=0,++G<=g&&!(G%16)&&oi(q,G));else{if(!(280>_e)){ge=0;break t}_e=ii(_e-256,de);var ft,et=mn(Ee.G[4],Ee.H[4],de);if(ce(de),!(ve>=(et=ri(fe,et=ii(et,de)))&&Ae-ve>=_e)){ge=0;break t}for(ft=0;ft<_e;++ft)H[X+ve+ft]=H[X+ve+ft-et];for(ve+=_e,K+=_e;K>=fe;)K-=fe,++G<=g&&!(G%16)&&oi(q,G);ve<Le&&K&Be&&(Ee=is(be,K,G))}e(de.h==ne(de))}oi(q,G>g?g:G);break t}!ge||de.h&&ve<Ae?(ge=0,q.a=de.h?5:3):q.$=ve,g=ge}else g=li(q,q.V,q.Ba,q.c,q.i,g,Ji);if(!g){A=0;break e}}S+A>=B&&(p.Cc=1),A=1}if(!A)return null;if(p.Cc&&((A=p.ga)!=null&&(A.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+S*R}function Yr(p,g,S,A,R,B){for(;0<R--;){var q,H=p,G=g+(S?1:0),K=p,de=g+(S?0:3);for(q=0;q<A;++q){var be=K[de+4*q];be!=255&&(be*=32897,H[G+4*q+0]=H[G+4*q+0]*be>>23,H[G+4*q+1]=H[G+4*q+1]*be>>23,H[G+4*q+2]=H[G+4*q+2]*be>>23)}g+=B}}function Aa(p,g,S,A,R){for(;0<A--;){var B;for(B=0;B<S;++B){var q=p[g+2*B+0],H=15&(K=p[g+2*B+1]),G=4369*H,K=(240&K|K>>4)*G>>16;p[g+2*B+0]=(240&q|q>>4)*G>>16&240|(15&q|q<<4)*G>>16>>4&15,p[g+2*B+1]=240&K|H}g+=R}}function Mf(p,g,S,A,R,B,q,H){var G,K,de=255;for(K=0;K<R;++K){for(G=0;G<A;++G){var be=p[g+G];B[q+4*G]=be,de&=be}g+=S,q+=H}return de!=255}function Bd(p,g,S,A,R){var B;for(B=0;B<R;++B)S[A+B]=p[g+B]>>8}function xo(){wc=Yr,u0=Aa,h0=Mf,f0=Bd}function sr(p,g,S){k[p]=function(A,R,B,q,H,G,K,de,be,X,fe,ge,_e,ve,Ae,Le,Be){var Ee,ft=Be-1>>1,et=H[G+0]|K[de+0]<<16,Ot=be[X+0]|fe[ge+0]<<16;e(A!=null);var ct=3*et+Ot+131074>>2;for(g(A[R+0],255&ct,ct>>16,_e,ve),B!=null&&(ct=3*Ot+et+131074>>2,g(B[q+0],255&ct,ct>>16,Ae,Le)),Ee=1;Ee<=ft;++Ee){var qt=H[G+Ee]|K[de+Ee]<<16,os=be[X+Ee]|fe[ge+Ee]<<16,Ft=et+qt+Ot+os+524296,dt=Ft+2*(qt+Ot)>>3;ct=dt+et>>1,et=(Ft=Ft+2*(et+os)>>3)+qt>>1,g(A[R+2*Ee-1],255&ct,ct>>16,_e,ve+(2*Ee-1)*S),g(A[R+2*Ee-0],255&et,et>>16,_e,ve+(2*Ee-0)*S),B!=null&&(ct=Ft+Ot>>1,et=dt+os>>1,g(B[q+2*Ee-1],255&ct,ct>>16,Ae,Le+(2*Ee-1)*S),g(B[q+2*Ee+0],255&et,et>>16,Ae,Le+(2*Ee+0)*S)),et=qt,Ot=os}1&Be||(ct=3*et+Ot+131074>>2,g(A[R+Be-1],255&ct,ct>>16,_e,ve+(Be-1)*S),B!=null&&(ct=3*Ot+et+131074>>2,g(B[q+Be-1],255&ct,ct>>16,Ae,Le+(Be-1)*S)))}}function fc(){Ui[qd]=MN,Ui[Vd]=k0,Ui[v0]=TN,Ui[Hd]=j0,Ui[Gd]=_0,Ui[Ef]=C0,Ui[b0]=DN,Ui[If]=k0,Ui[Rf]=j0,Ui[Yd]=_0,Ui[Of]=C0}function sl(p){return p&-16384?0>p?0:255:p>>EN}function Pa(p,g){return sl((19077*p>>8)+(26149*g>>8)-14234)}function gs(p,g,S){return sl((19077*p>>8)-(6419*g>>8)-(13320*S>>8)+8708)}function Zr(p,g){return sl((19077*p>>8)+(33050*g>>8)-17685)}function Kr(p,g,S,A,R){A[R+0]=Pa(p,S),A[R+1]=gs(p,g,S),A[R+2]=Zr(p,g)}function il(p,g,S,A,R){A[R+0]=Zr(p,g),A[R+1]=gs(p,g,S),A[R+2]=Pa(p,S)}function mc(p,g,S,A,R){var B=gs(p,g,S);g=B<<3&224|Zr(p,g)>>3,A[R+0]=248&Pa(p,S)|B>>5,A[R+1]=g}function Gs(p,g,S,A,R){var B=240&Zr(p,g)|15;A[R+0]=240&Pa(p,S)|gs(p,g,S)>>4,A[R+1]=B}function $d(p,g,S,A,R){A[R+0]=255,Kr(p,g,S,A,R+1)}function rl(p,g,S,A,R){il(p,g,S,A,R),A[R+3]=255}function Wd(p,g,S,A,R){Kr(p,g,S,A,R),A[R+3]=255}function as(p,g){return 0>p?0:p>g?g:p}function $i(p,g,S){k[p]=function(A,R,B,q,H,G,K,de,be){for(var X=de+(-2&be)*S;de!=X;)g(A[R+0],B[q+0],H[G+0],K,de),g(A[R+1],B[q+0],H[G+0],K,de+S),R+=2,++q,++G,de+=2*S;1&be&&g(A[R+0],B[q+0],H[G+0],K,de)}}function pc(p,g,S){return S==0?p==0?g==0?6:5:g==0?4:0:S}function gc(p,g,S,A,R){switch(p>>>30){case 3:Un(g,S,A,R,0);break;case 2:Qr(g,S,A,R);break;case 1:Lr(g,S,A,R)}}function La(p,g){var S,A,R=g.M,B=g.Nb,q=p.oc,H=p.pc+40,G=p.oc,K=p.pc+584,de=p.oc,be=p.pc+600;for(S=0;16>S;++S)q[H+32*S-1]=129;for(S=0;8>S;++S)G[K+32*S-1]=129,de[be+32*S-1]=129;for(0<R?q[H-1-32]=G[K-1-32]=de[be-1-32]=129:(i(q,H-32-1,127,21),i(G,K-32-1,127,9),i(de,be-32-1,127,9)),A=0;A<p.za;++A){var X=g.ya[g.aa+A];if(0<A){for(S=-1;16>S;++S)s(q,H+32*S-4,q,H+32*S+12,4);for(S=-1;8>S;++S)s(G,K+32*S-4,G,K+32*S+4,4),s(de,be+32*S-4,de,be+32*S+4,4)}var fe=p.Gd,ge=p.Hd+A,_e=X.ad,ve=X.Hc;if(0<R&&(s(q,H-32,fe[ge].y,0,16),s(G,K-32,fe[ge].f,0,8),s(de,be-32,fe[ge].ea,0,8)),X.Za){var Ae=q,Le=H-32+16;for(0<R&&(A>=p.za-1?i(Ae,Le,fe[ge].y[15],4):s(Ae,Le,fe[ge+1].y,0,4)),S=0;4>S;S++)Ae[Le+128+S]=Ae[Le+256+S]=Ae[Le+384+S]=Ae[Le+0+S];for(S=0;16>S;++S,ve<<=2)Ae=q,Le=H+P0[S],ir[X.Ob[S]](Ae,Le),gc(ve,_e,16*+S,Ae,Le)}else if(Ae=pc(A,R,X.Ob[0]),Da[Ae](q,H),ve!=0)for(S=0;16>S;++S,ve<<=2)gc(ve,_e,16*+S,q,H+P0[S]);for(S=X.Gc,Ae=pc(A,R,X.Dd),Jr[Ae](G,K),Jr[Ae](de,be),ve=_e,Ae=G,Le=K,255&(X=0|S)&&(170&X?dl(ve,256,Ae,Le):bc(ve,256,Ae,Le)),X=de,ve=be,255&(S>>=8)&&(170&S?dl(_e,320,X,ve):bc(_e,320,X,ve)),R<p.Ub-1&&(s(fe[ge].y,0,q,H+480,16),s(fe[ge].f,0,G,K+224,8),s(fe[ge].ea,0,de,be+224,8)),S=8*B*p.B,fe=p.sa,ge=p.ta+16*A+16*B*p.R,_e=p.qa,X=p.ra+8*A+S,ve=p.Ha,Ae=p.Ia+8*A+S,S=0;16>S;++S)s(fe,ge+S*p.R,q,H+32*S,16);for(S=0;8>S;++S)s(_e,X+S*p.B,G,K+32*S,8),s(ve,Ae+S*p.B,de,be+32*S,8)}}function al(p,g,S,A,R,B,q,H,G){var K=[0],de=[0],be=0,X=G!=null?G.kd:0,fe=G??new Ct;if(p==null||12>S)return 7;fe.data=p,fe.w=g,fe.ha=S,g=[g],S=[S],fe.gb=[fe.gb];e:{var ge=g,_e=S,ve=fe.gb;if(e(p!=null),e(_e!=null),e(ve!=null),ve[0]=0,12<=_e[0]&&!t(p,ge[0],"RIFF")){if(t(p,ge[0]+8,"WEBP")){ve=3;break e}var Ae=Se(p,ge[0]+4);if(12>Ae||4294967286<Ae){ve=3;break e}if(X&&Ae>_e[0]-8){ve=7;break e}ve[0]=Ae,ge[0]+=12,_e[0]-=12}ve=0}if(ve!=0)return ve;for(Ae=0<fe.gb[0],S=S[0];;){e:{var Le=p;_e=g,ve=S;var Be=K,Ee=de,ft=ge=[0];if((ct=be=[be])[0]=0,8>ve[0])ve=7;else{if(!t(Le,_e[0],"VP8X")){if(Se(Le,_e[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var et=Se(Le,_e[0]+8),Ot=1+$e(Le,_e[0]+12);if(2147483648<=Ot*(Le=1+$e(Le,_e[0]+15))){ve=3;break e}ft!=null&&(ft[0]=et),Be!=null&&(Be[0]=Ot),Ee!=null&&(Ee[0]=Le),_e[0]+=18,ve[0]-=18,ct[0]=1}ve=0}}if(be=be[0],ge=ge[0],ve!=0)return ve;if(_e=!!(2&ge),!Ae&&be)return 3;if(B!=null&&(B[0]=!!(16&ge)),q!=null&&(q[0]=_e),H!=null&&(H[0]=0),q=K[0],ge=de[0],be&&_e&&G==null){ve=0;break}if(4>S){ve=7;break}if(Ae&&be||!Ae&&!be&&!t(p,g[0],"ALPH")){S=[S],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{et=p,ve=g,Ae=S;var ct=fe.gb;Be=fe.na,Ee=fe.P,ft=fe.Sa,Ot=22,e(et!=null),e(Ae!=null),Le=ve[0];var qt=Ae[0];for(e(Be!=null),e(ft!=null),Be[0]=null,Ee[0]=null,ft[0]=0;;){if(ve[0]=Le,Ae[0]=qt,8>qt){ve=7;break e}var os=Se(et,Le+4);if(4294967286<os){ve=3;break e}var Ft=8+os+1&-2;if(Ot+=Ft,0<ct&&Ot>ct){ve=3;break e}if(!t(et,Le,"VP8 ")||!t(et,Le,"VP8L")){ve=0;break e}if(qt[0]<Ft){ve=7;break e}t(et,Le,"ALPH")||(Be[0]=et,Ee[0]=Le+8,ft[0]=os),Le+=Ft,qt-=Ft}}if(S=S[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ve!=0)break}S=[S],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(ct=p,ve=g,Ae=S,Be=fe.gb[0],Ee=fe.Ja,ft=fe.xa,et=ve[0],Le=!t(ct,et,"VP8 "),Ot=!t(ct,et,"VP8L"),e(ct!=null),e(Ae!=null),e(Ee!=null),e(ft!=null),8>Ae[0])ve=7;else{if(Le||Ot){if(ct=Se(ct,et+4),12<=Be&&ct>Be-12){ve=3;break e}if(X&&ct>Ae[0]-8){ve=7;break e}Ee[0]=ct,ve[0]+=8,Ae[0]-=8,ft[0]=Ot}else ft[0]=5<=Ae[0]&&ct[et+0]==47&&!(ct[et+4]>>5),Ee[0]=Ae[0];ve=0}if(S=S[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],g=g[0],ve!=0)break;if(4294967286<fe.Ja)return 3;if(H==null||_e||(H[0]=fe.xa?2:1),q=[q],ge=[ge],fe.xa){if(5>S){ve=7;break}H=q,X=ge,_e=B,p==null||5>S?p=0:5<=S&&p[g+0]==47&&!(p[g+4]>>5)?(Ae=[0],ct=[0],Be=[0],he(Ee=new V,p,g,S),si(Ee,Ae,ct,Be)?(H!=null&&(H[0]=Ae[0]),X!=null&&(X[0]=ct[0]),_e!=null&&(_e[0]=Be[0]),p=1):p=0):p=0}else{if(10>S){ve=7;break}H=ge,p==null||10>S||!ja(p,g+3,S-3)?p=0:(X=p[g+0]|p[g+1]<<8|p[g+2]<<16,_e=16383&(p[g+7]<<8|p[g+6]),p=16383&(p[g+9]<<8|p[g+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=fe.Ja||!_e||!p?p=0:(q&&(q[0]=_e),H&&(H[0]=p),p=1))}if(!p||(q=q[0],ge=ge[0],be&&(K[0]!=q||de[0]!=ge)))return 3;G!=null&&(G[0]=fe,G.offset=g-G.w,e(4294967286>g-G.w),e(G.offset==G.ha-S));break}return ve==0||ve==7&&be&&G==null?(B!=null&&(B[0]|=fe.na!=null&&0<fe.na.length),A!=null&&(A[0]=q),R!=null&&(R[0]=ge),0):ve}function ui(p,g,S){var A=g.width,R=g.height,B=0,q=0,H=A,G=R;if(g.Da=p!=null&&0<p.Da,g.Da&&(H=p.cd,G=p.bd,B=p.v,q=p.j,11>S||(B&=-2,q&=-2),0>B||0>q||0>=H||0>=G||B+H>A||q+G>R))return 0;if(g.v=B,g.j=q,g.va=B+H,g.o=q+G,g.U=H,g.T=G,g.da=p!=null&&0<p.da,g.da){if(!mt(H,G,S=[p.ib],B=[p.hb]))return 0;g.ib=S[0],g.hb=B[0]}return g.ob=p!=null&&p.ob,g.Kb=p==null||!p.Sd,g.da&&(g.ob=g.ib<3*A/4&&g.hb<3*R/4,g.Kb=0),1}function hi(p){if(p==null)return 2;if(11>p.S){var g=p.f.RGBA;g.fb+=(p.height-1)*g.A,g.A=-g.A}else g=p.f.kb,p=p.height,g.O+=(p-1)*g.fa,g.fa=-g.fa,g.N+=(p-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(p-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(p-1)*g.lb,g.lb=-g.lb);return 0}function vo(p,g,S,A){if(A==null||0>=p||0>=g)return 2;if(S!=null){if(S.Da){var R=S.cd,B=S.bd,q=-2&S.v,H=-2&S.j;if(0>q||0>H||0>=R||0>=B||q+R>p||H+B>g)return 2;p=R,g=B}if(S.da){if(!mt(p,g,R=[S.ib],B=[S.hb]))return 2;p=R[0],g=B[0]}}A.width=p,A.height=g;e:{var G=A.width,K=A.height;if(p=A.S,0>=G||0>=K||!(p>=qd&&13>p))p=2;else{if(0>=A.Rd&&A.sd==null){q=B=R=g=0;var de=(H=G*L0[p])*K;if(11>p||(B=(K+1)/2*(g=(G+1)/2),p==12&&(q=(R=G)*K)),(K=r(de+2*B+q))==null){p=1;break e}A.sd=K,11>p?((G=A.f.RGBA).eb=K,G.fb=0,G.A=H,G.size=de):((G=A.f.kb).y=K,G.O=0,G.fa=H,G.Fd=de,G.f=K,G.N=0+de,G.Ab=g,G.Cd=B,G.ea=K,G.W=0+de+B,G.Db=g,G.Ed=B,p==12&&(G.F=K,G.J=0+de+2*B),G.Tc=q,G.lb=R)}if(g=1,R=A.S,B=A.width,q=A.height,R>=qd&&13>R)if(11>R)p=A.f.RGBA,g&=(H=Math.abs(p.A))*(q-1)+B<=p.size,g&=H>=B*L0[R],g&=p.eb!=null;else{p=A.f.kb,H=(B+1)/2,de=(q+1)/2,G=Math.abs(p.fa),K=Math.abs(p.Ab);var be=Math.abs(p.Db),X=Math.abs(p.lb),fe=X*(q-1)+B;g&=G*(q-1)+B<=p.Fd,g&=K*(de-1)+H<=p.Cd,g=(g&=be*(de-1)+H<=p.Ed)&G>=B&K>=H&be>=H,g&=p.y!=null,g&=p.f!=null,g&=p.ea!=null,R==12&&(g&=X>=B,g&=fe<=p.Tc,g&=p.F!=null)}else g=0;p=g?0:2}}return p!=0||S!=null&&S.fd&&(p=hi(A)),p}var _r=64,Ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yc=24,Ta=32,$n=8,Tf=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ie("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(p){return p},k.Predictor2=function(p,g,S){return g[S+0]},k.Predictor3=function(p,g,S){return g[S+1]},k.Predictor4=function(p,g,S){return g[S-1]},k.Predictor5=function(p,g,S){return Ce(Ce(p,g[S+1]),g[S+0])},k.Predictor6=function(p,g,S){return Ce(p,g[S-1])},k.Predictor7=function(p,g,S){return Ce(p,g[S+0])},k.Predictor8=function(p,g,S){return Ce(g[S-1],g[S+0])},k.Predictor9=function(p,g,S){return Ce(g[S+0],g[S+1])},k.Predictor10=function(p,g,S){return Ce(Ce(p,g[S-1]),Ce(g[S+0],g[S+1]))},k.Predictor11=function(p,g,S){var A=g[S+0];return 0>=Fe(A>>24&255,p>>24&255,(g=g[S-1])>>24&255)+Fe(A>>16&255,p>>16&255,g>>16&255)+Fe(A>>8&255,p>>8&255,g>>8&255)+Fe(255&A,255&p,255&g)?A:p},k.Predictor12=function(p,g,S){var A=g[S+0];return(Te((p>>24&255)+(A>>24&255)-((g=g[S-1])>>24&255))<<24|Te((p>>16&255)+(A>>16&255)-(g>>16&255))<<16|Te((p>>8&255)+(A>>8&255)-(g>>8&255))<<8|Te((255&p)+(255&A)-(255&g)))>>>0},k.Predictor13=function(p,g,S){var A=g[S-1];return(je((p=Ce(p,g[S+0]))>>24&255,A>>24&255)<<24|je(p>>16&255,A>>16&255)<<16|je(p>>8&255,A>>8&255)<<8|je(255&p,255&A))>>>0};var Cr=k.PredictorAdd0;k.PredictorAdd1=lt,ie("Predictor2","PredictorAdd2"),ie("Predictor3","PredictorAdd3"),ie("Predictor4","PredictorAdd4"),ie("Predictor5","PredictorAdd5"),ie("Predictor6","PredictorAdd6"),ie("Predictor7","PredictorAdd7"),ie("Predictor8","PredictorAdd8"),ie("Predictor9","PredictorAdd9"),ie("Predictor10","PredictorAdd10"),ie("Predictor11","PredictorAdd11"),ie("Predictor12","PredictorAdd12"),ie("Predictor13","PredictorAdd13");var Ar=k.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var ol,xc=k.ColorIndexInverseTransform,ll=k.MapARGB,cl=k.VP8LColorIndexInverseTransformAlpha,bo=k.MapAlpha,wo=k.VP8LPredictorsAdd=[];wo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Xr,vc,_i,Pr,dn,un,Wn,Un,Qr,dl,Lr,bc,Jg,e0,t0,n0,s0,i0,r0,a0,o0,l0,c0,d0,wc,u0,h0,f0,m0=r(511),p0=r(2041),g0=r(225),y0=r(767),x0=0,Df=p0,Ud=g0,Ci=y0,Wi=m0,qd=0,Vd=1,v0=2,Hd=3,Gd=4,Ef=5,b0=6,If=7,Rf=8,Yd=9,Of=10,yN=[2,3,7],xN=[3,3,11],w0=[280,256,256,256,40],vN=[0,1,1,1,0],bN=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wN=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],SN=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],NN=8,Ff=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Sc=null,kN=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],S0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_N=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],CN=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],AN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],PN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Da=[],ir=[],Jr=[],LN=1,N0=2,Ea=[],Ui=[];sr("UpsampleRgbLinePair",Kr,3),sr("UpsampleBgrLinePair",il,3),sr("UpsampleRgbaLinePair",Wd,4),sr("UpsampleBgraLinePair",rl,4),sr("UpsampleArgbLinePair",$d,4),sr("UpsampleRgba4444LinePair",Gs,2),sr("UpsampleRgb565LinePair",mc,2);var MN=k.UpsampleRgbLinePair,TN=k.UpsampleBgrLinePair,k0=k.UpsampleRgbaLinePair,j0=k.UpsampleBgraLinePair,_0=k.UpsampleArgbLinePair,C0=k.UpsampleRgba4444LinePair,DN=k.UpsampleRgb565LinePair,Zd=16,Kd=1<<Zd-1,Nc=-227,Bf=482,EN=6,A0=0,IN=r(256),RN=r(256),ON=r(256),FN=r(256),zN=r(Bf-Nc),BN=r(Bf-Nc);$i("YuvToRgbRow",Kr,3),$i("YuvToBgrRow",il,3),$i("YuvToRgbaRow",Wd,4),$i("YuvToBgraRow",rl,4),$i("YuvToArgbRow",$d,4),$i("YuvToRgba4444Row",Gs,2),$i("YuvToRgb565Row",mc,2);var P0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xd=[0,2,8],$N=[8,7,6,4,4,2,2,2,1,1,1,1],WN=1;this.WebPDecodeRGBA=function(p,g,S,A,R){var B=Vd,q=new ht,H=new en;q.ba=H,H.S=B,H.width=[H.width],H.height=[H.height];var G=H.width,K=H.height,de=new Nt;if(de==null||p==null)var be=2;else e(de!=null),be=al(p,g,S,de.width,de.height,de.Pd,de.Qd,de.format,null);if(be!=0?G=0:(G!=null&&(G[0]=de.width[0]),K!=null&&(K[0]=de.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],A!=null&&(A[0]=H.width),R!=null&&(R[0]=H.height);e:{if(A=new tr,(R=new Ct).data=p,R.w=g,R.ha=S,R.kd=1,g=[0],e(R!=null),((p=al(R.data,R.w,R.ha,null,null,null,g,null,R))==0||p==7)&&g[0]&&(p=4),(g=p)==0){if(e(q!=null),A.data=R.data,A.w=R.w+R.offset,A.ha=R.ha-R.offset,A.put=vt,A.ac=zi,A.bc=Qi,A.ma=q,R.xa){if((p=qs())==null){q=1;break e}if((function(X,fe){var ge=[0],_e=[0],ve=[0];t:for(;;){if(X==null)return 0;if(fe==null)return X.a=2,0;if(X.l=fe,X.a=0,he(X.m,fe.data,fe.w,fe.ha),!si(X.m,ge,_e,ve)){X.a=3;break t}if(X.xb=N0,fe.width=ge[0],fe.height=_e[0],!As(ge[0],_e[0],1,X,null))break t;return 1}return e(X.a!=0),0})(p,A)){if(A=(g=vo(A.width,A.height,q.Oa,q.ba))==0){t:{A=p;n:for(;;){if(A==null){A=0;break t}if(e(A.s.yc!=null),e(A.s.Ya!=null),e(0<A.s.Wb),e((S=A.l)!=null),e((R=S.ma)!=null),A.xb!=0){if(A.ca=R.ba,A.tb=R.tb,e(A.ca!=null),!ui(R.Oa,S,Hd)){A.a=2;break n}if(!Ni(A,S.width)||S.da)break n;if((S.da||Lt(A.ca.S))&&xo(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&xo()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!te(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!li(A,A.V,A.Ba,A.c,A.i,S.o,wr))break n;R.Dc=A.Ma,A=1;break t}e(A.a!=0),A=0}A=!A}A&&(g=p.a)}else g=p.a}else{if((p=new Hs)==null){q=1;break e}if(p.Fa=R.na,p.P=R.P,p.qc=R.Sa,_a(p,A)){if((g=vo(A.width,A.height,q.Oa,q.ba))==0){if(p.Aa=0,S=q.Oa,e((R=p)!=null),S!=null){if(0<(G=0>(G=S.Md)?0:100<G?255:255*G/100)){for(K=de=0;4>K;++K)12>(be=R.pb[K]).lc&&(be.ia=G*$N[0>be.lc?0:be.lc]>>3),de|=be.ia;de&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=S.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}(function(X,fe){if(X==null)return 0;if(fe==null)return pn(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!_a(X,fe))return 0;if(e(X.cb),fe.ac==null||fe.ac(fe)){fe.ob&&(X.L=0);var ge=Xd[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=fe.v-ge>>4,X.zb=fe.j-ge>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=fe.o+15+ge>>4,X.Hb=fe.va+15+ge>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var _e=X.ed;for(ge=0;4>ge;++ge){var ve;if(X.Qa.Cb){var Ae=X.Qa.Lb[ge];X.Qa.Fb||(Ae+=_e.Tb)}else Ae=_e.Tb;for(ve=0;1>=ve;++ve){var Le=X.gd[ge][ve],Be=Ae;if(_e.Pc&&(Be+=_e.vd[0],ve&&(Be+=_e.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var Ee=Be;0<_e.wb&&(Ee=4<_e.wb?Ee>>2:Ee>>1)>9-_e.wb&&(Ee=9-_e.wb),1>Ee&&(Ee=1),Le.dd=Ee,Le.tc=2*Be+Ee,Le.ld=40<=Be?2:15<=Be?1:0}else Le.tc=0;Le.La=ve}}}ge=0}else pn(X,6,"Frame setup failed"),ge=X.a;if(ge=ge==0){if(ge){X.$c=0,0<X.Aa||(X.Ic=WN);t:{ge=X.Ic,_e=4*(Ee=X.za);var ft=32*Ee,et=Ee+1,Ot=0<X.L?Ee*(0<X.Aa?2:1):0,ct=(X.Aa==2?2:1)*Ee;if((Le=_e+832+(ve=3*(16*ge+Xd[X.L])/2*ft)+(Ae=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Le)ge=0;else{if(Le>X.Vb){if(X.Vb=0,X.Ec=r(Le),X.Fc=0,X.Ec==null){ge=pn(X,1,"no memory during frame initialization.");break t}X.Vb=Le}Le=X.Ec,Be=X.Fc,X.Ac=Le,X.Bc=Be,Be+=_e,X.Gd=a(ft,co),X.Hd=0,X.rb=a(et+1,Vs),X.sb=1,X.wa=Ot?a(Ot,Bn):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=Ee),e(!0),X.oc=Le,X.pc=Be,Be+=832,X.ya=a(ct,Ps),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=Ee),X.R=16*Ee,X.B=8*Ee,Ee=(ft=Xd[X.L])*X.R,ft=ft/2*X.B,X.sa=Le,X.ta=Be+Ee,X.qa=X.sa,X.ra=X.ta+16*ge*X.R+ft,X.Ha=X.qa,X.Ia=X.ra+8*ge*X.B+ft,X.$c=0,Be+=ve,X.mb=Ae?Le:null,X.nb=Ae?Be:null,e(Be+Ae<=X.Fc+X.Vb),nr(X),i(X.Ac,X.Bc,0,_e),ge=1}}if(ge){if(fe.ka=0,fe.y=X.sa,fe.O=X.ta,fe.f=X.qa,fe.N=X.ra,fe.ea=X.Ha,fe.Vd=X.Ia,fe.fa=X.R,fe.Rc=X.B,fe.F=null,fe.J=0,!x0){for(ge=-255;255>=ge;++ge)m0[255+ge]=0>ge?-ge:ge;for(ge=-1020;1020>=ge;++ge)p0[1020+ge]=-128>ge?-128:127<ge?127:ge;for(ge=-112;112>=ge;++ge)g0[112+ge]=-16>ge?-16:15<ge?15:ge;for(ge=-255;510>=ge;++ge)y0[255+ge]=0>ge?0:255<ge?255:ge;x0=1}Wn=Y,Un=Qo,dl=ic,Lr=Bi,bc=U,Qr=ho,Jg=b,e0=O,t0=pe,n0=Pe,s0=Q,i0=le,r0=Re,a0=ot,o0=dc,l0=yo,c0=uc,d0=hc,ir[0]=_f,ir[1]=we,ir[2]=kf,ir[3]=jf,ir[4]=Cf,ir[5]=Gr,ir[6]=Hr,ir[7]=Af,ir[8]=Jo,ir[9]=Pf,Da[0]=Sn,Da[1]=Xe,Da[2]=Rt,Da[3]=wn,Da[4]=di,Da[5]=fo,Da[6]=rc,Jr[0]=tl,Jr[1]=Oe,Jr[2]=ac,Jr[3]=mo,Jr[4]=oc,Jr[5]=Lf,Jr[6]=lc,ge=1}else ge=0}ge&&(ge=(function(qt,os){for(qt.M=0;qt.M<qt.Va;++qt.M){var Ft,dt=qt.Jc[qt.M&qt.Xb],Ue=qt.m,qn=qt;for(Ft=0;Ft<qn.za;++Ft){var Et=Ue,Ht=qn,yn=Ht.Ac,Ss=Ht.Bc+4*Ft,Ys=Ht.zc,In=Ht.ya[Ht.aa+Ft];if(Ht.Qa.Bb?In.$b=Ne(Et,Ht.Pa.jb[0])?2+Ne(Et,Ht.Pa.jb[2]):Ne(Et,Ht.Pa.jb[1]):In.$b=0,Ht.kc&&(In.Ad=Ne(Et,Ht.Bd)),In.Za=!Ne(Et,145)+0,In.Za){var Ts=In.Ob,Zs=0;for(Ht=0;4>Ht;++Ht){var ls,Gt=Ys[0+Ht];for(ls=0;4>ls;++ls){Gt=CN[yn[Ss+ls]][Gt];for(var tn=S0[Ne(Et,Gt[0])];0<tn;)tn=S0[2*tn+Ne(Et,Gt[tn])];Gt=-tn,yn[Ss+ls]=Gt}s(Ts,Zs,yn,Ss,4),Zs+=4,Ys[0+Ht]=Gt}}else Gt=Ne(Et,156)?Ne(Et,128)?1:3:Ne(Et,163)?2:0,In.Ob[0]=Gt,i(yn,Ss,Gt,4),i(Ys,0,Gt,4);In.Dd=Ne(Et,142)?Ne(Et,114)?Ne(Et,183)?1:3:2:0}if(qn.m.Ka)return pn(qt,7,"Premature end-of-partition0 encountered.");for(;qt.ja<qt.za;++qt.ja){if(qn=dt,Et=(Ue=qt).rb[Ue.sb-1],yn=Ue.rb[Ue.sb+Ue.ja],Ft=Ue.ya[Ue.aa+Ue.ja],Ss=Ue.kc?Ft.Ad:0)Et.la=yn.la=0,Ft.Za||(Et.Na=yn.Na=0),Ft.Hc=0,Ft.Gc=0,Ft.ia=0;else{var Rn,nn;if(Et=yn,yn=qn,Ss=Ue.Pa.Xc,Ys=Ue.ya[Ue.aa+Ue.ja],In=Ue.pb[Ys.$b],Ht=Ys.ad,Ts=0,Zs=Ue.rb[Ue.sb-1],Gt=ls=0,i(Ht,Ts,0,384),Ys.Za)var Ns=0,rr=Ss[3];else{tn=r(16);var Vn=Et.Na+Zs.Na;if(Vn=Sc(yn,Ss[1],Vn,In.Eb,0,tn,0),Et.Na=Zs.Na=(0<Vn)+0,1<Vn)Wn(tn,0,Ht,Ts);else{var fi=tn[0]+3>>3;for(tn=0;256>tn;tn+=16)Ht[Ts+tn]=fi}Ns=1,rr=Ss[0]}var an=15&Et.la,cs=15&Zs.la;for(tn=0;4>tn;++tn){var Ai=1&cs;for(fi=nn=0;4>fi;++fi)an=an>>1|(Ai=(Vn=Sc(yn,rr,Vn=Ai+(1&an),In.Sc,Ns,Ht,Ts))>Ns)<<7,nn=nn<<2|(3<Vn?3:1<Vn?2:Ht[Ts+0]!=0),Ts+=16;an>>=4,cs=cs>>1|Ai<<7,ls=(ls<<8|nn)>>>0}for(rr=an,Ns=cs>>4,Rn=0;4>Rn;Rn+=2){for(nn=0,an=Et.la>>4+Rn,cs=Zs.la>>4+Rn,tn=0;2>tn;++tn){for(Ai=1&cs,fi=0;2>fi;++fi)Vn=Ai+(1&an),an=an>>1|(Ai=0<(Vn=Sc(yn,Ss[2],Vn,In.Qc,0,Ht,Ts)))<<3,nn=nn<<2|(3<Vn?3:1<Vn?2:Ht[Ts+0]!=0),Ts+=16;an>>=2,cs=cs>>1|Ai<<5}Gt|=nn<<4*Rn,rr|=an<<4<<Rn,Ns|=(240&cs)<<Rn}Et.la=rr,Zs.la=Ns,Ys.Hc=ls,Ys.Gc=Gt,Ys.ia=43690&Gt?0:In.ia,Ss=!(ls|Gt)}if(0<Ue.L&&(Ue.wa[Ue.Y+Ue.ja]=Ue.gd[Ft.$b][Ft.Za],Ue.wa[Ue.Y+Ue.ja].La|=!Ss),qn.Ka)return pn(qt,7,"Premature end-of-file encountered.")}if(nr(qt),Ue=os,qn=1,Ft=(dt=qt).D,Et=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)t:{if(Ft.M=dt.M,Ft.uc=Et,La(dt,Ft),qn=1,Ft=(nn=dt.D).Nb,Et=(Gt=Xd[dt.L])*dt.R,yn=Gt/2*dt.B,tn=16*Ft*dt.R,fi=8*Ft*dt.B,Ss=dt.sa,Ys=dt.ta-Et+tn,In=dt.qa,Ht=dt.ra-yn+fi,Ts=dt.Ha,Zs=dt.Ia-yn+fi,cs=(an=nn.M)==0,ls=an>=dt.Va-1,dt.Aa==2&&La(dt,nn),nn.uc)for(Ai=(Vn=dt).D.M,e(Vn.D.uc),nn=Vn.yb;nn<Vn.Hb;++nn){Ns=nn,rr=Ai;var Ks=(Pi=(ks=Vn).D).Nb;Rn=ks.R;var Pi=Pi.wa[Pi.Y+Ns],Li=ks.sa,mi=ks.ta+16*Ks*Rn+16*Ns,Mi=Pi.dd,hn=Pi.tc;if(hn!=0)if(e(3<=hn),ks.L==1)0<Ns&&l0(Li,mi,Rn,hn+4),Pi.La&&d0(Li,mi,Rn,hn),0<rr&&o0(Li,mi,Rn,hn+4),Pi.La&&c0(Li,mi,Rn,hn);else{var Ti=ks.B,ar=ks.qa,So=ks.ra+8*Ks*Ti+8*Ns,ea=ks.Ha,ks=ks.Ia+8*Ks*Ti+8*Ns;Ks=Pi.ld,0<Ns&&(e0(Li,mi,Rn,hn+4,Mi,Ks),n0(ar,So,ea,ks,Ti,hn+4,Mi,Ks)),Pi.La&&(i0(Li,mi,Rn,hn,Mi,Ks),a0(ar,So,ea,ks,Ti,hn,Mi,Ks)),0<rr&&(Jg(Li,mi,Rn,hn+4,Mi,Ks),t0(ar,So,ea,ks,Ti,hn+4,Mi,Ks)),Pi.La&&(s0(Li,mi,Rn,hn,Mi,Ks),r0(ar,So,ea,ks,Ti,hn,Mi,Ks))}}if(dt.ia&&alert("todo:DitherRow"),Ue.put!=null){if(nn=16*an,an=16*(an+1),cs?(Ue.y=dt.sa,Ue.O=dt.ta+tn,Ue.f=dt.qa,Ue.N=dt.ra+fi,Ue.ea=dt.Ha,Ue.W=dt.Ia+fi):(nn-=Gt,Ue.y=Ss,Ue.O=Ys,Ue.f=In,Ue.N=Ht,Ue.ea=Ts,Ue.W=Zs),ls||(an-=Gt),an>Ue.o&&(an=Ue.o),Ue.F=null,Ue.J=null,dt.Fa!=null&&0<dt.Fa.length&&nn<an&&(Ue.J=ws(dt,Ue,nn,an-nn),Ue.F=dt.mb,Ue.F==null&&Ue.F.length==0)){qn=pn(dt,3,"Could not decode alpha data.");break t}nn<Ue.j&&(Gt=Ue.j-nn,nn=Ue.j,e(!(1&Gt)),Ue.O+=dt.R*Gt,Ue.N+=dt.B*(Gt>>1),Ue.W+=dt.B*(Gt>>1),Ue.F!=null&&(Ue.J+=Ue.width*Gt)),nn<an&&(Ue.O+=Ue.v,Ue.N+=Ue.v>>1,Ue.W+=Ue.v>>1,Ue.F!=null&&(Ue.J+=Ue.v),Ue.ka=nn-Ue.j,Ue.U=Ue.va-Ue.v,Ue.T=an-nn,qn=Ue.put(Ue))}Ft+1!=dt.Ic||ls||(s(dt.sa,dt.ta-Et,Ss,Ys+16*dt.R,Et),s(dt.qa,dt.ra-yn,In,Ht+8*dt.B,yn),s(dt.Ha,dt.Ia-yn,Ts,Zs+8*dt.B,yn))}if(!qn)return pn(qt,6,"Output aborted.")}return 1})(X,fe)),fe.bc!=null&&fe.bc(fe),ge&=1}return ge?(X.cb=0,ge):0})(p,A)||(g=p.a)}}else g=p.a}g==0&&q.Oa!=null&&q.Oa.fd&&(g=hi(q.ba))}q=g}B=q!=0?null:11>B?H.f.RGBA.eb:H.f.kb.y}else B=null;return B};var L0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(k,z){for(var _="",E=0;E<4;E++)_+=String.fromCharCode(k[z++]);return _}function u(k,z){return k[z+0]|k[z+1]<<8}function h(k,z){return(k[z+0]|k[z+1]<<8|k[z+2]<<16)>>>0}function m(k,z){return(k[z+0]|k[z+1]<<8|k[z+2]<<16|k[z+3]<<24)>>>0}new c;var f=[0],y=[0],x=[],v=new c,w=n,j=(function(k,z){var _={},E=0,$=!1,I=0,J=0;if(_.frames=[],!(function(D,V){for(var Z=0;Z<4;Z++)if(D[V+Z]!="RIFF".charCodeAt(Z))return!0;return!1})(k,z)){for(m(k,z+=4),z+=8;z<k.length;){var se=d(k,z),oe=m(k,z+=4);z+=4;var F=oe+(1&oe);switch(se){case"VP8 ":case"VP8L":_.frames[E]===void 0&&(_.frames[E]={}),(ue=_.frames[E]).src_off=$?J:z-8,ue.src_size=I+oe+8,E++,$&&($=!1,I=0,J=0);break;case"VP8X":(ue=_.header={}).feature_flags=k[z];var he=z+4;ue.canvas_width=1+h(k,he),he+=3,ue.canvas_height=1+h(k,he),he+=3;break;case"ALPH":$=!0,I=F+8,J=z-8;break;case"ANIM":(ue=_.header).bgcolor=m(k,z),he=z+4,ue.loop_count=u(k,he),he+=2;break;case"ANMF":var ke,ue;(ue=_.frames[E]={}).offset_x=2*h(k,z),z+=3,ue.offset_y=2*h(k,z),z+=3,ue.width=1+h(k,z),z+=3,ue.height=1+h(k,z),z+=3,ue.duration=h(k,z),z+=3,ke=k[z++],ue.dispose=1&ke,ue.blend=ke>>1&1}se!="ANMF"&&(z+=F)}return _}})(w,0);j.response=w,j.rgbaoutput=!0,j.dataurl=!1;var C=j.header?j.header:null,N=j.frames?j.frames:null;if(C){C.loop_counter=C.loop_count,f=[C.canvas_height],y=[C.canvas_width];for(var P=0;P<N.length&&N[P].blend!=0;P++);}var L=N[0],M=v.WebPDecodeRGBA(w,L.src_off,L.src_size,y,f);L.rgba=M,L.imgwidth=y[0],L.imgheight=f[0];for(var T=0;T<y[0]*f[0]*4;T++)x[T]=M[T];return this.width=y,this.height=f,this.data=x,this}(function(n){var e,t,s,i,r,a,o,c,d,u=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new a,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new a,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=D;Object.defineProperty(this,"pdf",{get:function(){return V}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Se){ne=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(Se){isNaN(Se)||(ce=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var te;typeof Se=="number"?te=[Se,Se,Se,Se]:((te=new Array(4))[0]=Se[0],te[1]=Se.length>=2?Se[1]:te[0],te[2]=Se.length>=3?Se[2]:te[0],te[3]=Se.length>=4?Se[3]:te[1]),d.margin=te}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Se){xe=Se}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Se){me=Se}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Se){Ne=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof u&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(Se){Me=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var te;te=m(Se),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var te=m(Se);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var Ie=null,$e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(Se){Ie=null,$e=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var te;if(this.ctx.font=Se,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var St=te[1];te[2];var xt=te[3],mt=te[4];te[5];var ze=te[6],ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(mt)[2];mt=Math.floor(ee==="px"?parseFloat(mt)*this.pdf.internal.scaleFactor:ee==="em"?parseFloat(mt)*this.pdf.getFontSize():parseFloat(mt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(mt);var ie=(function(pt){var Qe,Zt,Bt=[],nt=pt.trim();if(nt==="")return zm;if(nt in qv)return[qv[nt]];for(;nt!=="";){switch(Zt=null,Qe=(nt=Hv(nt)).charAt(0)){case'"':case"'":Zt=FD(nt.substring(1),Qe);break;default:Zt=zD(nt)}if(Zt===null||(Bt.push(Zt[0]),(nt=Hv(Zt[1]))!==""&&nt.charAt(0)!==","))return zm;nt=nt.replace(/^,/,"")}return Bt})(ze);if(this.fontFaces){var ye=(function(pt,Qe){if(Ie===null){var Zt=(function(Bt){var nt=[];return Object.keys(Bt).forEach(function(_t){Bt[_t].forEach(function(Kt){var gt=null;switch(Kt){case"bold":gt={family:_t,weight:"bold"};break;case"italic":gt={family:_t,style:"italic"};break;case"bolditalic":gt={family:_t,weight:"bold",style:"italic"};break;case"":case"normal":gt={family:_t}}gt!==null&&(gt.ref={name:_t,style:Kt},nt.push(gt))})}),nt})(pt.getFontList());Ie=(function(Bt){for(var nt={},_t=0;_t<Bt.length;++_t){var Kt=Fm(Bt[_t]),gt=Kt.family,Dt=Kt.stretch,Lt=Kt.style,An=Kt.weight;nt[gt]=nt[gt]||{},nt[gt][Dt]=nt[gt][Dt]||{},nt[gt][Dt][Lt]=nt[gt][Dt][Lt]||{},nt[gt][Dt][Lt][An]=Kt}return nt})(Zt.concat(Qe))}return Ie})(this.pdf,this.fontFaces),Ce=ie.map(function(pt){return{family:pt,stretch:"normal",weight:xt,style:St}}),Te=(function(pt,Qe,Zt){for(var Bt=(Zt=Zt||{}).defaultFontFamily||"times",nt=Object.assign({},OD,Zt.genericFontFamilies||{}),_t=null,Kt=null,gt=0;gt<Qe.length;++gt)if(nt[(_t=Fm(Qe[gt])).family]&&(_t.family=nt[_t.family]),pt.hasOwnProperty(_t.family)){Kt=pt[_t.family];break}if(!(Kt=Kt||pt[Bt]))throw new Error("Could not find a font-family for the rule '"+Vv(_t)+"' and default family '"+Bt+"'.");if(Kt=(function(Dt,Lt){if(Lt[Dt])return Lt[Dt];var An=Bp[Dt],Dn=An<=Bp.normal?-1:1,en=Uv(Lt,O5,An,Dn);if(!en)throw new Error("Could not find a matching font-stretch value for "+Dt);return en})(_t.stretch,Kt),Kt=(function(Dt,Lt){if(Lt[Dt])return Lt[Dt];for(var An=R5[Dt],Dn=0;Dn<An.length;++Dn)if(Lt[An[Dn]])return Lt[An[Dn]];throw new Error("Could not find a matching font-style for "+Dt)})(_t.style,Kt),!(Kt=(function(Dt,Lt){if(Lt[Dt])return Lt[Dt];if(Dt===400&&Lt[500])return Lt[500];if(Dt===500&&Lt[400])return Lt[400];var An=RD[Dt],Dn=Uv(Lt,F5,An,Dt<400?-1:1);if(!Dn)throw new Error("Could not find a matching font-weight for value "+Dt);return Dn})(_t.weight,Kt)))throw new Error("Failed to resolve a font for the rule '"+Vv(_t)+"'.");return Kt})(ye,Ce);this.pdf.setFont(Te.ref.name,Te.ref.style)}else{var je="";(xt==="bold"||parseInt(xt,10)>=700||St==="bold")&&(je="bold"),St==="italic"&&(je+="italic"),je.length===0&&(je="normal");for(var Fe="",lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<ie.length;Ze++){if(this.pdf.internal.getFont(ie[Ze],je,{noFallback:!0,disableWarning:!0})!==void 0){Fe=ie[Ze];break}if(je==="bolditalic"&&this.pdf.internal.getFont(ie[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=ie[Ze],je="bold";else if(this.pdf.internal.getFont(ie[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=ie[Ze],je="normal";break}}if(Fe===""){for(var Ke=0;Ke<ie.length;Ke++)if(lt[ie[Ke]]){Fe=lt[ie[Ke]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(D){this.lineDash=D},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){N.call(this,"fill",!1)},h.prototype.stroke=function(){N.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(D,V){if(isNaN(D)||isNaN(V))throw cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(D,V));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(D,V)},h.prototype.closePath=function(){var D=new a(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&sn(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){D=new a(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(D.x,D.y)},h.prototype.lineTo=function(D,V){if(isNaN(D)||isNaN(V))throw cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(D,V));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},h.prototype.quadraticCurveTo=function(D,V,Z,ne){if(isNaN(Z)||isNaN(ne)||isNaN(D)||isNaN(V))throw cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(Z,ne)),ce=this.ctx.transform.applyToPoint(new a(D,V));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},h.prototype.bezierCurveTo=function(D,V,Z,ne,ae,ce){if(isNaN(ae)||isNaN(ce)||isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne))throw cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new a(ae,ce)),me=this.ctx.transform.applyToPoint(new a(D,V)),Ne=this.ctx.transform.applyToPoint(new a(Z,ne));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Ne.x,y2:Ne.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new a(xe.x,xe.y)},h.prototype.arc=function(D,V,Z,ne,ae,ce){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new a(D,V));D=xe.x,V=xe.y;var me=this.ctx.transform.applyToPoint(new a(0,Z)),Ne=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(me.x-Ne.x,2)+Math.pow(me.y-Ne.y,2))}Math.abs(ae-ne)>=2*Math.PI&&(ne=0,ae=2*Math.PI),this.path.push({type:"arc",x:D,y:V,radius:Z,startAngle:ne,endAngle:ae,counterclockwise:ce})},h.prototype.arcTo=function(D,V,Z,ne,ae){throw new Error("arcTo not implemented.")},h.prototype.rect=function(D,V,Z,ne){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne))throw cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,V),this.lineTo(D+Z,V),this.lineTo(D+Z,V+ne),this.lineTo(D,V+ne),this.lineTo(D,V),this.lineTo(D+Z,V),this.lineTo(D,V)},h.prototype.fillRect=function(D,V,Z,ne){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne))throw cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,V,Z,ne),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},h.prototype.strokeRect=function(D,V,Z,ne){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne))throw cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(D,V,Z,ne),this.stroke())},h.prototype.clearRect=function(D,V,Z,ne){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne))throw cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,V,Z,ne))},h.prototype.save=function(D){D=typeof D!="boolean"||D;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(V),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(D){var V,Z,ne,ae;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))V=0,Z=0,ne=0,ae=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(ce!==null)V=parseInt(ce[1]),Z=parseInt(ce[2]),ne=parseInt(ce[3]),ae=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)V=parseInt(ce[1]),Z=parseInt(ce[2]),ne=parseInt(ce[3]),ae=parseFloat(ce[4]);else{if(ae=1,typeof D=="string"&&D.charAt(0)!=="#"){var xe=new P5(D);D=xe.ok?xe.toHex():"#000000"}D.length===4?(V=D.substring(1,2),V+=V,Z=D.substring(2,3),Z+=Z,ne=D.substring(3,4),ne+=ne):(V=D.substring(1,3),Z=D.substring(3,5),ne=D.substring(5,7)),V=parseInt(V,16),Z=parseInt(Z,16),ne=parseInt(ne,16)}}return{r:V,g:Z,b:ne,a:ae,style:D}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(D,V,Z,ne){if(isNaN(V)||isNaN(Z)||typeof D!="string")throw cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!f.call(this)){var ae=F(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;E.call(this,{text:D,x:V,y:Z,scale:ce,angle:ae,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(D,V,Z,ne){if(isNaN(V)||isNaN(Z)||typeof D!="string")throw cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ne=isNaN(ne)?void 0:ne;var ae=F(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;E.call(this,{text:D,x:V,y:Z,scale:ce,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(D){if(typeof D!="string")throw cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,Z=this.pdf.internal.scaleFactor,ne=V.internal.getFontSize(),ae=V.getStringUnitWidth(D)*ne/V.internal.scaleFactor;return new function(ce){var xe=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:ae*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(D,V){if(isNaN(D)||isNaN(V))throw cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(D,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(D){if(isNaN(D))throw cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.translate=function(D,V){if(isNaN(D)||isNaN(V))throw cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,D,V);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(D,V,Z,ne,ae,ce){if(isNaN(D)||isNaN(V)||isNaN(Z)||isNaN(ne)||isNaN(ae)||isNaN(ce))throw cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(D,V,Z,ne,ae,ce);this.ctx.transform=this.ctx.transform.multiply(xe)},h.prototype.setTransform=function(D,V,Z,ne,ae,ce){D=isNaN(D)?1:D,V=isNaN(V)?0:V,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?1:ne,ae=isNaN(ae)?0:ae,ce=isNaN(ce)?0:ce,this.ctx.transform=new c(D,V,Z,ne,ae,ce)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(D,V,Z,ne,ae,ce,xe,me,Ne){var Me=this.pdf.getImageProperties(D),Ie=1,$e=1,Se=1,te=1;ne!==void 0&&me!==void 0&&(Se=me/ne,te=Ne/ae,Ie=Me.width/ne*me/ne,$e=Me.height/ae*Ne/ae),ce===void 0&&(ce=V,xe=Z,V=0,Z=0),ne!==void 0&&me===void 0&&(me=ne,Ne=ae),ne===void 0&&me===void 0&&(me=Me.width,Ne=Me.height);for(var St,xt=this.ctx.transform.decompose(),mt=F(xt.rotate.shx),ze=new c,ee=(ze=(ze=(ze=ze.multiply(xt.translate)).multiply(xt.skew)).multiply(xt.scale)).applyToRectangle(new o(ce-V*Se,xe-Z*te,ne*Ie,ae*$e)),ie=v.call(this,ee),ye=[],Ce=0;Ce<ie.length;Ce+=1)ye.indexOf(ie[Ce])===-1&&ye.push(ie[Ce]);if(C(ye),this.autoPaging)for(var Te=ye[0],je=ye[ye.length-1],Fe=Te;Fe<je+1;Fe++){this.pdf.setPage(Fe);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=Fe===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Fe===1?0:Ke+(Fe-2)*pt;if(this.ctx.clip_path.length!==0){var Zt=this.path;St=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(St,this.posX+this.margin[3],-Qe+Ze+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Zt}var Bt=JSON.parse(JSON.stringify(ee));Bt=j([Bt],this.posX+this.margin[3],-Qe+Ze+this.ctx.prevPageLastElemOffset)[0];var nt=(Fe>Te||Fe<je)&&x.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,pt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,mt),nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",ee.x,ee.y,ee.w,ee.h,null,null,mt)};var v=function(D,V,Z){var ne=[];V=V||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ne.push(Math.floor((D.y+ae)/Z)+1);break;case"arc":ne.push(Math.floor((D.y+ae-D.radius)/Z)+1),ne.push(Math.floor((D.y+ae+D.radius)/Z)+1);break;case"qct":var ce=he(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ne.push(Math.floor((ce.y+ae)/Z)+1),ne.push(Math.floor((ce.y+ce.h+ae)/Z)+1);break;case"bct":var xe=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ne.push(Math.floor((xe.y+ae)/Z)+1),ne.push(Math.floor((xe.y+xe.h+ae)/Z)+1);break;case"rect":ne.push(Math.floor((D.y+ae)/Z)+1),ne.push(Math.floor((D.y+D.h+ae)/Z)+1)}for(var me=0;me<ne.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<ne[me];)w.call(this);return ne},w=function(){var D=this.fillStyle,V=this.strokeStyle,Z=this.font,ne=this.lineCap,ae=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=V,this.font=Z,this.lineCap=ne,this.lineWidth=ae,this.lineJoin=ce},j=function(D,V,Z){for(var ne=0;ne<D.length;ne++)switch(D[ne].type){case"bct":D[ne].x2+=V,D[ne].y2+=Z;case"qct":D[ne].x1+=V,D[ne].y1+=Z;default:D[ne].x+=V,D[ne].y+=Z}return D},C=function(D){return D.sort(function(V,Z){return V-Z})},N=function(D,V){for(var Z,ne,ae=this.fillStyle,ce=this.strokeStyle,xe=this.lineCap,me=this.lineWidth,Ne=Math.abs(me*this.ctx.transform.scaleX),Me=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),Se=[],te=0;te<$e.length;te++)if($e[te].x!==void 0)for(var St=v.call(this,$e[te]),xt=0;xt<St.length;xt+=1)Se.indexOf(St[xt])===-1&&Se.push(St[xt]);for(var mt=0;mt<Se.length;mt++)for(;this.pdf.internal.getNumberOfPages()<Se[mt];)w.call(this);if(C(Se),this.autoPaging)for(var ze=Se[0],ee=Se[Se.length-1],ie=ze;ie<ee+1;ie++){this.pdf.setPage(ie),this.fillStyle=ae,this.strokeStyle=ce,this.lineCap=xe,this.lineWidth=Ne,this.lineJoin=Me;var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ce=ie===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Fe=ie===1?0:Te+(ie-2)*je;if(this.ctx.clip_path.length!==0){var lt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Z,this.posX+this.margin[3],-Fe+Ce+this.ctx.prevPageLastElemOffset),P.call(this,D,!0),this.path=lt}if(ne=JSON.parse(JSON.stringify(Ie)),this.path=j(ne,this.posX+this.margin[3],-Fe+Ce+this.ctx.prevPageLastElemOffset),V===!1||ie===0){var Ze=(ie>ze||ie<ee)&&x.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,je,null).clip().discardPath()),P.call(this,D,V),Ze&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Ne,P.call(this,D,V),this.lineWidth=me;this.path=Ie},P=function(D,V){if((D!=="stroke"||V||!y.call(this))&&(D==="stroke"||V||!f.call(this))){for(var Z,ne,ae=[],ce=this.path,xe=0;xe<ce.length;xe++){var me=ce[xe];switch(me.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:me,deltas:[],abs:[]});break;case"lt":var Ne=ae.length;if(ce[xe-1]&&!isNaN(ce[xe-1].x)&&(Z=[me.x-ce[xe-1].x,me.y-ce[xe-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ae[Ne-1].close!==!0&&ae[Ne-1].begin!==!0){ae[Ne-1].deltas.push(Z),ae[Ne-1].abs.push(me);break}}break;case"bct":Z=[me.x1-ce[xe-1].x,me.y1-ce[xe-1].y,me.x2-ce[xe-1].x,me.y2-ce[xe-1].y,me.x-ce[xe-1].x,me.y-ce[xe-1].y],ae[ae.length-1].deltas.push(Z);break;case"qct":var Me=ce[xe-1].x+2/3*(me.x1-ce[xe-1].x),Ie=ce[xe-1].y+2/3*(me.y1-ce[xe-1].y),$e=me.x+2/3*(me.x1-me.x),Se=me.y+2/3*(me.y1-me.y),te=me.x,St=me.y;Z=[Me-ce[xe-1].x,Ie-ce[xe-1].y,$e-ce[xe-1].x,Se-ce[xe-1].y,te-ce[xe-1].x,St-ce[xe-1].y],ae[ae.length-1].deltas.push(Z);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(me)}}ne=V?null:D==="stroke"?"stroke":"fill";for(var xt=!1,mt=0;mt<ae.length;mt++)if(ae[mt].arc)for(var ze=ae[mt].abs,ee=0;ee<ze.length;ee++){var ie=ze[ee];ie.type==="arc"?T.call(this,ie.x,ie.y,ie.radius,ie.startAngle,ie.endAngle,ie.counterclockwise,void 0,V,!xt):$.call(this,ie.x,ie.y),xt=!0}else if(ae[mt].close===!0)this.pdf.internal.out("h"),xt=!1;else if(ae[mt].begin!==!0){var ye=ae[mt].start.x,Ce=ae[mt].start.y;I.call(this,ae[mt].deltas,ye,Ce),xt=!0}ne&&k.call(this,ne),V&&z.call(this)}},L=function(D){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-Z;case"top":return D+V-Z;case"hanging":return D+V-2*Z;case"middle":return D+V/2-Z;default:return D}},M=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(V,Z){this.colorStops.push([V,Z])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(D,V,Z,ne,ae,ce,xe,me,Ne){for(var Me=se.call(this,Z,ne,ae,ce),Ie=0;Ie<Me.length;Ie++){var $e=Me[Ie];Ie===0&&(Ne?_.call(this,$e.x1+D,$e.y1+V):$.call(this,$e.x1+D,$e.y1+V)),J.call(this,D,V,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}me?z.call(this):k.call(this,xe)},k=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(D,V){this.pdf.internal.out(t(D)+" "+s(V)+" m")},E=function(D){var V;switch(D.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var Z=this.pdf.getTextDimensions(D.text),ne=L.call(this,D.y),ae=M.call(this,ne)-Z.h,ce=this.ctx.transform.applyToPoint(new a(D.x,ne)),xe=this.ctx.transform.decompose(),me=new c;me=(me=(me=me.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Ne,Me,Ie,$e=this.ctx.transform.applyToRectangle(new o(D.x,ne,Z.w,Z.h)),Se=me.applyToRectangle(new o(D.x,ae,Z.w,Z.h)),te=v.call(this,Se),St=[],xt=0;xt<te.length;xt+=1)St.indexOf(te[xt])===-1&&St.push(te[xt]);if(C(St),this.autoPaging)for(var mt=St[0],ze=St[St.length-1],ee=mt;ee<ze+1;ee++){this.pdf.setPage(ee);var ie=ee===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ce=this.pdf.internal.pageSize.height-this.margin[2],Te=Ce-this.margin[0],je=this.pdf.internal.pageSize.width-this.margin[1],Fe=je-this.margin[3],lt=ee===1?0:ye+(ee-2)*Te;if(this.ctx.clip_path.length!==0){var Ze=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Ne,this.posX+this.margin[3],-1*lt+ie),P.call(this,"fill",!0),this.path=Ze}var Ke=j([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-lt+ie+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),Ie=this.lineWidth,this.lineWidth=Ie*D.scale);var pt=this.autoPaging!=="text";if(pt||Ke.y+Ke.h<=Ce){if(pt||Ke.y>=ie&&Ke.x<=je){var Qe=pt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||je-Ke.x)[0],Zt=j([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-lt+ie+this.ctx.prevPageLastElemOffset)[0],Bt=pt&&(ee>mt||ee<ze)&&x.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,Te,null).clip().discardPath()),this.pdf.text(Qe,Zt.x,Zt.y,{angle:D.angle,align:V,renderingMode:D.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else Ke.y<Ce&&(this.ctx.prevPageLastElemOffset+=Ce-Ke.y);D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ie)}else D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),Ie=this.lineWidth,this.lineWidth=Ie*D.scale),this.pdf.text(D.text,ce.x+this.posX,ce.y+this.posY,{angle:D.angle,align:V,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ie)},$=function(D,V,Z,ne){Z=Z||0,ne=ne||0,this.pdf.internal.out(t(D+Z)+" "+s(V+ne)+" l")},I=function(D,V,Z){return this.pdf.lines(D,V,Z,null,null)},J=function(D,V,Z,ne,ae,ce,xe,me){this.pdf.internal.out([e(i(Z+D)),e(r(ne+V)),e(i(ae+D)),e(r(ce+V)),e(i(xe+D)),e(r(me+V)),"c"].join(" "))},se=function(D,V,Z,ne){for(var ae=2*Math.PI,ce=Math.PI/2;V>Z;)V-=ae;var xe=Math.abs(Z-V);xe<ae&&ne&&(xe=ae-xe);for(var me=[],Ne=ne?-1:1,Me=V;xe>1e-5;){var Ie=Me+Ne*Math.min(xe,ce);me.push(oe.call(this,D,Me,Ie)),xe-=Math.abs(Ie-Me),Me=Ie}return me},oe=function(D,V,Z){var ne=(Z-V)/2,ae=D*Math.cos(ne),ce=D*Math.sin(ne),xe=ae,me=-ce,Ne=xe*xe+me*me,Me=Ne+xe*ae+me*ce,Ie=4/3*(Math.sqrt(2*Ne*Me)-Me)/(xe*ce-me*ae),$e=xe-Ie*me,Se=me+Ie*xe,te=$e,St=-Se,xt=ne+V,mt=Math.cos(xt),ze=Math.sin(xt);return{x1:D*Math.cos(V),y1:D*Math.sin(V),x2:$e*mt-Se*ze,y2:$e*ze+Se*mt,x3:te*mt-St*ze,y3:te*ze+St*mt,x4:D*Math.cos(Z),y4:D*Math.sin(Z)}},F=function(D){return 180*D/Math.PI},he=function(D,V,Z,ne,ae,ce){var xe=D+.5*(Z-D),me=V+.5*(ne-V),Ne=ae+.5*(Z-ae),Me=ce+.5*(ne-ce),Ie=Math.min(D,ae,xe,Ne),$e=Math.max(D,ae,xe,Ne),Se=Math.min(V,ce,me,Me),te=Math.max(V,ce,me,Me);return new o(Ie,Se,$e-Ie,te-Se)},ke=function(D,V,Z,ne,ae,ce,xe,me){var Ne,Me,Ie,$e,Se,te,St,xt,mt,ze,ee,ie,ye,Ce,Te=Z-D,je=ne-V,Fe=ae-Z,lt=ce-ne,Ze=xe-ae,Ke=me-ce;for(Me=0;Me<41;Me++)mt=(St=(Ie=D+(Ne=Me/40)*Te)+Ne*((Se=Z+Ne*Fe)-Ie))+Ne*(Se+Ne*(ae+Ne*Ze-Se)-St),ze=(xt=($e=V+Ne*je)+Ne*((te=ne+Ne*lt)-$e))+Ne*(te+Ne*(ce+Ne*Ke-te)-xt),Me==0?(ee=mt,ie=ze,ye=mt,Ce=ze):(ee=Math.min(ee,mt),ie=Math.min(ie,ze),ye=Math.max(ye,mt),Ce=Math.max(Ce,ze));return new o(Math.round(ee),Math.round(ie),Math.round(ye-ee),Math.round(Ce-ie))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,V,Z=(D=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:V}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(ut.API),(function(n){var e=function(a){var o,c,d,u,h,m,f,y,x,v;for(c=[],d=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>d;d+=4)(h=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))!==0?(m=(h=((h=((h=((h=(h-(v=h%85))/85)-(x=h%85))/85)-(y=h%85))/85)-(f=h%85))/85)%85,c.push(m+33,f+33,y+33,x+33,v+33)):c.push(122);return(function(w,j){for(var C=j;C>0;C--)w.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},t=function(a){var o,c,d,u,h,m=String,f="length",y=255,x="charCodeAt",v="slice",w="replace";for(a[v](-2),a=a[v](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),d=[],u=0,h=(a+=o="uuuuu"[v](a[f]%5||5))[f];h>u;u+=5)c=52200625*(a[x](u)-33)+614125*(a[x](u+1)-33)+7225*(a[x](u+2)-33)+85*(a[x](u+3)-33)+(a[x](u+4)-33),d.push(y&c>>24,y&c>>16,y&c>>8,y&c);return(function(j,C){for(var N=C;N>0;N--)j.pop()})(d,o[f]),m.fromCharCode.apply(m,d)},s=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var c="",d=0;d<a.length;d+=2)c+=String.fromCharCode("0x"+(a[d]+a[d+1]));return c},r=function(a){for(var o=new Uint8Array(a.length),c=a.length;c--;)o[c]=a.charCodeAt(c);return(o=Dp(o)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};n.processDataByFilters=function(a,o){var c=0,d=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=r(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})(ut.API),(function(n){n.loadFile=function(e,t,s){return(function(i,r,a){r=r!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(c,d,u){var h=new XMLHttpRequest,m=0,f=function(y){var x=y.length,v=[],w=String.fromCharCode;for(m=0;m<x;m+=1)v.push(w(255&y.charCodeAt(m)));return v.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)})(i,r,a)}catch{}return o})(e,t,s)},n.loadImageFile=n.loadFile})(ut.API),(function(n){function e(){return(At.html2canvas?Promise.resolve(At.html2canvas):va(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):va(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var c=sn(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(o,c){var d=document.createElement(o);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},r=function o(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(o(h,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},a=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),d);return(u=u.setProgress(1,o,1,[o])).set(c)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,c){return o.__proto__=c||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=r(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var y=u[f],x=y.src.find(function(v){return v.format==="truetype"});x&&d.addFont(x.url,y.ref.name,y.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},a.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(s(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in a.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},a.prototype.get=function(o,c){return this.then(function(){var d=o in a.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},a.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(o=o||ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,c,d,u){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,c,d,u){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,h).then(function(m){return d.updateProgress(1),m})})},a.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),m=d.call(h,o,c);return a.convert(m,u.__proto__)},a.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},a.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},a.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return a.convert(c,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ut.getPageSize=function(o,c,d){if(sn(o)==="object"){var u=o;o=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var h,m=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var y,x=0,v=0;if(f.hasOwnProperty(m))x=f[m][1]/h,v=f[m][0]/h;else try{x=d[1],v=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",v>x&&(y=v,v=x,x=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>v&&(y=v,v=x,x=y)}return{width:v,height:x,unit:c,k:h,orientation:o}},n.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Fm):null;var d=new a(c);return c.worker?d:d.from(o).doCallback()}})(ut.API),ut.API.addJS=function(n){return Yv=n,this.internal.events.subscribe("postPutResources",function(){Mu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Gv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Yv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mu!==void 0&&Gv!==void 0&&this.internal.out("/Names <</JavaScript "+Mu+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var a=i[r],o=s.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(r=0;r<d;r++){var h=t.internal.newObject();u.push(h);var m=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<u.length;r++)t.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,i,r){var a={title:i,options:r,children:[]};return s==null&&(s=this.root),s.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<s.children.length;r++){var a=s.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(s)),r>0&&this.line("/Prev "+this.makeRef(s.children[r-1])),r<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,i){for(var r=0;r<i.children.length;r++)s.count++,this.count_r(s,i.children[r]);return s.count}}])})(ut.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,i,r,a,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(h){for(var m,f=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,x={width:0,height:0,numcomponents:1},v=4;v<y;v+=2){if(v+=f,e.indexOf(h.charCodeAt(v+1))!==-1){m=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),x={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:m,numcomponents:h.charCodeAt(v+9)};break}f=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return x})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:s,alias:i}}return u}})(ut.API),ut.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,r=SD(n,{checkCrc:!0}),a=r.width,o=r.height,c=r.channels,d=r.palette,u=r.depth;i=d&&c===1?(function(M){for(var T=M.width,k=M.height,z=M.data,_=M.palette,E=M.depth,$=!1,I=[],J=[],se=void 0,oe=!1,F=0,he=0;he<_.length;he++){var ke=Qx(_[he],4),ue=ke[0],D=ke[1],V=ke[2],Z=ke[3];I.push(ue,D,V),Z!=null&&(Z===0?(F++,J.length<1&&J.push(he)):Z<255&&(oe=!0))}if(oe||F>1){$=!0,J=void 0;var ne=T*k;se=new Uint8Array(ne);for(var ae=new DataView(z.buffer),ce=0;ce<ne;ce++){var xe=Bm(ae,ce,E),me=Qx(_[xe],4)[3];se[ce]=me}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:z,alphaBytes:se,needSMask:$,palette:I,mask:J}})(r):c===2||c===4?(function(M){for(var T=M.data,k=M.width,z=M.height,_=M.channels,E=M.depth,$=_===2?"DeviceGray":"DeviceRGB",I=_-1,J=k*z,se=I,oe=J*se,F=1*J,he=Math.ceil(oe*E/8),ke=Math.ceil(F*E/8),ue=new Uint8Array(he),D=new Uint8Array(ke),V=new DataView(T.buffer),Z=new DataView(ue.buffer),ne=new DataView(D.buffer),ae=!1,ce=0;ce<J;ce++){for(var xe=ce*_,me=0;me<se;me++)s1(Z,Bm(V,xe+me,E),ce*se+me,E);var Ne=Bm(V,xe+se,E);Ne<(1<<E)-1&&(ae=!0),s1(ne,Ne,1*ce,E)}return{colorSpace:$,colorsPerPixel:I,colorBytes:ue,alphaBytes:D,needSMask:ae}})(r):(function(M){var T=M.data,k=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:k,colorsPerPixel:k==="DeviceGray"?1:3,colorBytes:T instanceof Uint8Array?T:new Uint8Array(T.buffer),needSMask:!1}})(r);var h,m,f,y=i,x=y.colorSpace,v=y.colorsPerPixel,w=y.colorBytes,j=y.alphaBytes,C=y.needSMask,N=y.palette,P=y.mask,L=null;return s!==ut.API.image_compression.NONE&&typeof Dp=="function"?(L=(function(M){var T;switch(M){case ut.API.image_compression.FAST:T=11;break;case ut.API.image_compression.MEDIUM:T=13;break;case ut.API.image_compression.SLOW:T=14;break;default:T=12}return T})(s),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(L," "),n=Qv(w,a*v,v,s),C&&(f=Qv(j,a,1,s))):(h=void 0,m="",n=w,C&&(f=j)),m+="/Colors ".concat(v," /BitsPerComponent ").concat(u," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:t,data:n,index:e,filter:h,decodeParameters:m,transparency:P,palette:N,sMask:f,predictor:L,width:a,height:o,bitsPerComponent:u,colorSpace:x}}},(function(n){n.processGIF89A=function(e,t,s,i){var r=new UD(e),a=r.width,o=r.height,c=[];r.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:o},u=new $m(100).encode(d,100);return n.processJPEG.call(this,u,t,s,i)},n.processGIF87A=n.processGIF89A})(ut.API),or.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:s,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},or.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){cn.log("bit decode error:"+t)}},or.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var r=this.datav.getUint8(this.pos++,!0),a=s*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[r>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},or.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var r=this.datav.getUint8(this.pos++,!0),a=s*this.width*4+2*i*4,o=r>>4,c=15&r,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},or.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*s;if(i<this.palette.length){var a=this.palette[i];this.data[r]=a.red,this.data[r+1]=a.green,this.data[r+2]=a.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},or.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&e)/e*255|0,o=(r>>5&e)/e*255|0,c=(r>>10&e)/e*255|0,d=r>>15?255:0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}this.pos+=n}},or.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,u=i*this.width*4+4*r;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=n}},or.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=r,this.data[a+1]=i,this.data[a+2]=s,this.data[a+3]=255}this.pos+=this.width%4}},or.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=a}},or.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,i){var r=new or(e,!1),a=r.width,o=r.height,c={data:r.getData(),width:a,height:o},d=new $m(100).encode(c,100);return n.processJPEG.call(this,d,t,s,i)}})(ut.API),r1.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,i){var r=new r1(e),a=r.width,o=r.height,c={data:r.getData(),width:a,height:o},d=new $m(100).encode(c,100);return n.processJPEG.call(this,d,t,s,i)}})(ut.API),ut.API.processRGBA=function(n,e,t){for(var s=n.data,i=s.length,r=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,d=0;d<i;d+=4){var u=s[d],h=s[d+1],m=s[d+2],f=s[d+3];r[o++]=u,r[o++]=h,r[o++]=m,a[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ut.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},vl=ut.API,Tu=vl.getCharWidthsArray=function(n,e){var t,s,i=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=e.doKerning!==!1,m=0,f=n.length,y=0,x=o[0]||c,v=[];for(t=0;t<f;t++)s=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+a*(1e3/r)||0)/1e3):(m=h&&sn(d[s])==="object"&&!isNaN(parseInt(d[s][y],10))?d[s][y]/u:0,v.push((o[s]||x)/c+m)),y=s;return v},Zv=vl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return vl.processArabic&&(n=vl.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,i)/t:Tu.apply(this,arguments).reduce(function(r,a){return r+a},0)},Kv=function(n,e,t,s){for(var i=[],r=0,a=n.length,o=0;r!==a&&o+e[r]<t;)o+=e[r],r++;i.push(n.slice(0,r));var c=r;for(o=0;r!==a;)o+e[r]>s&&(i.push(n.slice(c,r)),o=0,c=r),o+=e[r],r++;return c!==r&&i.push(n.slice(c,r)),i},Xv=function(n,e,t){t||(t={});var s,i,r,a,o,c,d,u=[],h=[u],m=t.textIndent||0,f=0,y=0,x=n.split(" "),v=Tu.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var w=Array(c).join(" "),j=[];x.map(function(N){(N=N.split(/\s*\n/)).length>1?j=j.concat(N.map(function(P,L){return(L&&P.length?`
`:"")+P})):j.push(N[0])}),x=j,c=Zv.apply(this,[w,t])}for(r=0,a=x.length;r<a;r++){var C=0;if(s=x[r],c&&s[0]==`
`&&(s=s.substr(1),C=1),m+f+(y=(i=Tu.apply(this,[s,t])).reduce(function(N,P){return N+P},0))>e||C){if(y>e){for(o=Kv.apply(this,[s,i,e-(m+f),e]),u.push(o.shift()),u=[o.pop()];o.length;)h.push([o.shift()]);y=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(N,P){return N+P},0)}else u=[s];h.push(u),m=y+c,f=v}else u.push(s),m+=f+y,f=v}return d=c?function(N,P){return(P?w:"")+N.join(" ")}:function(N){return N.join(" ")},h.map(d)},vl.splitTextToSize=function(n,e,t){var s,i=(t=t||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=t.lineIndent;var o,c,d=[];for(o=0,c=s.length;o<c;o++)d=d.concat(Xv.apply(this,[s[o],a,r]));return d},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},i={},r=0;r<16;r++)s[t[r]]=e[r],i[e[r]]=t[r];var a=function(m){return"0x"+parseInt(m,10).toString(16)},o=n.__fontmetrics__.compress=function(m){var f,y,x,v,w=["{"];for(var j in m){if(f=m[j],isNaN(parseInt(j,10))?y="'"+j+"'":(j=parseInt(j,10),y=(y=a(j).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof f=="number")f<0?(x=a(f).slice(3),v="-"):(x=a(f).slice(2),v=""),x=v+x.slice(0,-1)+i[x.slice(-1)];else{if(sn(f)!=="object")throw new Error("Don't know what to do with value type "+sn(f)+".");x=o(f)}w.push(y+x)}return w.push("}"),w.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,y,x,v,w={},j=1,C=w,N=[],P="",L="",M=m.length-1,T=1;T<M;T+=1)(v=m[T])=="'"?f?(x=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(N.push([C,x]),C={},x=void 0):v=="}"?((y=N.pop())[0][y[1]]=C,x=void 0,C=y[0]):v=="-"?j=-1:x===void 0?s.hasOwnProperty(v)?(P+=s[v],x=parseInt(P,16)*j,j=1,P=""):P+=v:s.hasOwnProperty(v)?(L+=s[v],C[x]=parseInt(L,16)*j,j=1,x=void 0,L=""):L+=v;return w},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var f=m.font,y=h.Unicode[f.postScriptName];y&&(f.metadata.Unicode={},f.metadata.Unicode.widths=y.widths,f.metadata.Unicode.kerning=y.kerning);var x=u.Unicode[f.postScriptName];x&&(f.metadata.Unicode.encoding=x,f.encoding=x.codePages[0])}])})(ut.API),(function(n){var e=function(t){for(var s=t.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=t.charCodeAt(r);return i};n.API.events.push(["addFont",function(t){var s=void 0,i=t.font,r=t.instance;if(!i.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=r.existsFileInVFS(i.postScriptName)===!1?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(eh(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,s)}}])})(ut),ut.API.addSvgAsImage=function(n,e,t,s,i,r,a,o){if(isNaN(e)||isNaN(t))throw cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(At.canvg?Promise.resolve(At.canvg):va(()=>import("./index.es-THjhnePh.js"),__vite__mapDeps([0,1,2,3]))).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,t,s,i,a,o)})},ut.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(e,t);return this},ut.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,i,r,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],d=0,u=0,h=0;function m(y,x){var v,w=!1;for(v=0;v<y.length;v+=1)y[v]===x&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=o.length;for(h=0;h<f;h+=1)t[o[h]].value=t[o[h]].defaultValue,t[o[h]].explicitSet=!1}if(sn(n)==="object"){for(i in n)if(r=n[i],m(o,i)&&r!==void 0){if(t[i].type==="boolean"&&typeof r=="boolean")t[i].value=r;else if(t[i].type==="name"&&m(t[i].valueSet,r))t[i].value=r;else if(t[i].type==="integer"&&Number.isInteger(r))t[i].value=r;else if(t[i].type==="array"){for(d=0;d<r.length;d+=1)if(s=!0,r[d].length===1&&typeof r[d][0]=="number")c.push(String(r[d]-1));else if(r[d].length>1){for(u=0;u<r[d].length;u+=1)typeof r[d][u]!="number"&&(s=!1);s===!0&&c.push([r[d][0]-1,r[d][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in t)t[y].explicitSet===!0&&(t[y].type==="name"?x.push("/"+y+" /"+t[y].value):x.push("/"+y+" "+t[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(s)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=r.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+r+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(ut.API),(function(n){var e=n.API,t=e.pdfEscape16=function(r,a){for(var o,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=r.length;h<m;++h){if(o=a.metadata.characterToGlyph(r.charCodeAt(h)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=r.charCodeAt(h),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},s=function(r){var a,o,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(o=Object.keys(r).sort(function(f,y){return f-y})).length;h<m;h++)a=o[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),r[a]!==void 0&&r[a]!==null&&typeof r[a].toString=="function"&&(d=("0000"+r[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",y=0;y<m.length;y++)f+=String.fromCharCode(m[y]);var x=d();u({data:f,addLength1:!0,objectId:x}),c("endobj");var v=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var w=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_l(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+_l(o.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+n.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+_l(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",f=0;f<h.length;f++)m+=String.fromCharCode(h[f]);var y=d();u({data:m,addLength1:!0,objectId:y}),c("endobj");var x=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+_l(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+_l(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(r)}]);var i=function(r){var a,o=r.text||"",c=r.x,d=r.y,u=r.options||{},h=r.mutex||{},m=h.pdfEscape,f=h.activeFontKey,y=h.fonts,x=f,v="",w=0,j="",C=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:h};for(j=o,x=f,Array.isArray(o)&&(j=o[0]),w=0;w<j.length;w+=1)y[x].metadata.hasOwnProperty("cmap")&&(a=y[x].metadata.cmap.unicode.codeMap[j[w].charCodeAt(0)]),a||j[w].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?v+=j[w]:v+="";var N="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?N=m(v,x).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(N=t(v,y[x])),h.isHex=!0,{text:N,x:c,y:d,options:u,mutex:h}};e.events.push(["postProcessText",function(r){var a=r.text||"",o=[],c={text:a,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([i(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(i(Object.assign({},c,{text:a[d]})).text);r.text=o}else r.text=i(Object.assign({},c,{text:a})).text}])})(ut),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(ut.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var i,r,a,o,c,d,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,C=0;this.__bidiEngine__={};var N=function(_){var E=_.charCodeAt(),$=E>>8,I=x[$];return I!==void 0?h[256*I+(255&E)]:$===252||$===253?"AL":w.test($)?"L":$===8?"R":"N"},P=function(_){for(var E,$=0;$<_.length;$++){if((E=N(_.charAt($)))==="L")return!1;if(E==="R")return!0}return!1},L=function(_,E,$,I){var J,se,oe,F,he=E[I];switch(he){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(he="AN");break;case"AL":j=!0,he="R";break;case"WS":case"BN":he="N";break;case"CS":I<1||I+1>=E.length||(J=$[I-1])!=="EN"&&J!=="AN"||(se=E[I+1])!=="EN"&&se!=="AN"?he="N":j&&(se="AN"),he=se===J?se:"N";break;case"ES":he=(J=I>0?$[I-1]:"B")==="EN"&&I+1<E.length&&E[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&$[I-1]==="EN"){he="EN";break}if(j){he="N";break}for(oe=I+1,F=E.length;oe<F&&E[oe]==="ET";)oe++;he=oe<F&&E[oe]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(F=E.length,oe=I+1;oe<F&&E[oe]==="NSM";)oe++;if(oe<F){var ke=_[I],ue=ke>=1425&&ke<=2303||ke===64286;if(J=E[oe],ue&&(J==="R"||J==="AL")){he="R";break}}}he=I<1||(J=E[I-1])==="B"?"N":$[I-1];break;case"B":j=!1,i=!0,he=C;break;case"S":r=!0,he="N"}return he},M=function(_,E,$){var I=_.split("");return $&&T(I,$,{hiLevel:C}),I.reverse(),E&&E.reverse(),I.join("")},T=function(_,E,$){var I,J,se,oe,F,he=-1,ke=_.length,ue=0,D=[],V=C?f:m,Z=[];for(j=!1,i=!1,r=!1,J=0;J<ke;J++)Z[J]=N(_[J]);for(se=0;se<ke;se++){if(F=ue,D[se]=L(_,Z,D,se),I=240&(ue=V[F][y[D[se]]]),ue&=15,E[se]=oe=V[ue][5],I>0)if(I===16){for(J=he;J<se;J++)E[J]=1;he=-1}else he=-1;if(V[ue][6])he===-1&&(he=se);else if(he>-1){for(J=he;J<se;J++)E[J]=oe;he=-1}Z[se]==="B"&&(E[se]=0),$.hiLevel|=oe}r&&(function(ne,ae,ce){for(var xe=0;xe<ce;xe++)if(ne[xe]==="S"){ae[xe]=C;for(var me=xe-1;me>=0&&ne[me]==="WS";me--)ae[me]=C}})(Z,E,ke)},k=function(_,E,$,I,J){if(!(J.hiLevel<_)){if(_===1&&C===1&&!i)return E.reverse(),void($&&$.reverse());for(var se,oe,F,he,ke=E.length,ue=0;ue<ke;){if(I[ue]>=_){for(F=ue+1;F<ke&&I[F]>=_;)F++;for(he=ue,oe=F-1;he<oe;he++,oe--)se=E[he],E[he]=E[oe],E[oe]=se,$&&(se=$[he],$[he]=$[oe],$[oe]=se);ue=F}ue++}}},z=function(_,E,$){var I=_.split(""),J={hiLevel:C};return $||($=[]),T(I,$,J),(function(se,oe,F){if(F.hiLevel!==0&&u)for(var he,ke=0;ke<se.length;ke++)oe[ke]===1&&(he=v.indexOf(se[ke]))>=0&&(se[ke]=v[he+1])})(I,$,J),k(2,I,E,$,J),k(1,I,E,$,J),I.join("")};return this.__bidiEngine__.doBidiReorder=function(_,E,$){if((function(J,se){if(se)for(var oe=0;oe<J.length;oe++)se[oe]=oe;o===void 0&&(o=P(J)),d===void 0&&(d=P(J))})(_,E),a||!c||d)if(a&&c&&o^d)C=o?1:0,_=M(_,E,$);else if(!a&&c&&d)C=o?1:0,_=z(_,E,$),_=M(_,E);else if(!a||o||c||d){if(a&&!c&&o^d)_=M(_,E),o?(C=0,_=z(_,E,$)):(C=1,_=z(_,E,$),_=M(_,E));else if(a&&o&&!c&&d)C=1,_=z(_,E,$),_=M(_,E);else if(!a&&!c&&o^d){var I=u;o?(C=1,_=z(_,E,$),C=0,u=!1,_=z(_,E,$),u=I):(C=0,_=z(_,E,$),_=M(_,E),C=1,u=!1,_=z(_,E,$),u=I,_=M(_,E))}}else C=0,_=z(_,E,$);else C=o?1:0,_=z(_,E,$);return _},this.__bidiEngine__.setOptions=function(_){_&&(a=_.isInputVisual,c=_.isOutputVisual,o=_.isInputRtl,d=_.isOutputRtl,u=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var i=s.text;s.x,s.y;var r=s.options||{};s.mutex,r.lang;var a=[];if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,t.setOptions(r),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);s.text=a}else s.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(ut),ut.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new so(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new iE(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new qD(this.contents),this.head=new HD(this),this.name=new XD(this),this.cmap=new B5(this),this.toUnicode={},this.hhea=new GD(this),this.maxp=new QD(this),this.hmtx=new JD(this),this.post=new ZD(this),this.os2=new YD(this),this.loca=new sE(this),this.glyf=new eE(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,d;for(d=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var i,r,a,o;for(a=0,r=0,o=(e=""+e).length;0<=o?r<o:r>o;r=0<=o?++r:--r)i=e.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var xr,so=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,i;for(i=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,i,r,a,o,c;return e=this.readByte(),t=this.readByte(),s=this.readByte(),i=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^r)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*i+16777216*r+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,i,r;for(r=[],s=0,i=e.length;s<i;s++)t=e[s],r.push(this.writeByte(t));return r},n})(),qD=(function(){var n;function e(t){var s,i,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:i>r;i=0<=r?++i:--i)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,i,r,a,o,c,d,u,h,m,f,y,x;for(x in f=Object.keys(t).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),a=Math.floor(h/c),u=16*f-h,(i=new so).writeInt(this.scalarType),i.writeShort(f),i.writeShort(h),i.writeShort(a),i.writeShort(u),r=16*f,d=i.pos+r,o=null,y=[],t)for(m=t[x],i.writeString(x),i.writeInt(n(m)),i.writeInt(d),i.writeInt(m.length),y=y.concat(m),x==="head"&&(o=d),d+=m.length;d%4;)y.push(0),d++;return i.write(y),s=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(s),i.data},n=function(t){var s,i,r,a;for(t=$5.call(t);t.length%4;)t.push(0);for(r=new so(t),i=0,s=0,a=t.length;s<a;s=s+=4)i+=r.readUInt32();return 4294967295&i},e})(),VD={}.hasOwnProperty,qr=function(n,e){for(var t in e)VD.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};xr=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var HD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new so).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),a1=(function(){function n(e,t){var s,i,r,a,o,c,d,u,h,m,f,y,x,v,w,j,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,r=(function(){var N,P;for(P=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)P.push(e.readUInt16());return P})(),e.pos+=2,x=(function(){var N,P;for(P=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)P.push(e.readUInt16());return P})(),d=(function(){var N,P;for(P=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)P.push(e.readUInt16());return P})(),u=(function(){var N,P;for(P=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)P.push(e.readUInt16());return P})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var N,P;for(P=[],c=N=0;0<=i?N<i:N>i;c=0<=i?++N:--N)P.push(e.readUInt16());return P})(),c=w=0,C=r.length;w<C;c=++w)for(v=r[c],s=j=y=x[c];y<=v?j<=v:j>=v;s=y<=v?++j:--j)u[c]===0?a=s+d[c]:(a=o[u[c]/2+(s-y)-(m-c)]||0)!==0&&(a+=d[c]),this.codeMap[s]=65535&a}e.pos=h}return n.encode=function(e,t){var s,i,r,a,o,c,d,u,h,m,f,y,x,v,w,j,C,N,P,L,M,T,k,z,_,E,$,I,J,se,oe,F,he,ke,ue,D,V,Z,ne,ae,ce,xe,me,Ne,Me,Ie;switch(I=new so,a=Object.keys(e).sort(function($e,Se){return $e-Se}),t){case"macroman":for(x=0,v=(function(){var $e=[];for(y=0;y<256;++y)$e.push(0);return $e})(),j={0:0},r={},J=0,he=a.length;J<he;J++)j[me=e[i=a[J]]]==null&&(j[me]=++x),r[i]={old:e[i],new:j[e[i]]},v[i]=j[e[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(v),{charMap:r,subtable:I.data,maxGlyphID:x+1};case"unicode":for(E=[],h=[],C=0,j={},s={},w=d=null,se=0,ke=a.length;se<ke;se++)j[P=e[i=a[se]]]==null&&(j[P]=++C),s[i]={old:P,new:j[P]},o=j[P]-i,w!=null&&o===d||(w&&h.push(w),E.push(i),d=o),w=i;for(w&&h.push(w),h.push(65535),E.push(65535),z=2*(k=E.length),T=2*Math.pow(Math.log(k)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,M=2*k-T,c=[],L=[],f=[],y=oe=0,ue=E.length;oe<ue;y=++oe){if(_=E[y],u=h[y],_===65535){c.push(0),L.push(0);break}if(_-($=s[_].new)>=32768)for(c.push(0),L.push(2*(f.length+k-y)),i=F=_;_<=u?F<=u:F>=u;i=_<=u?++F:--F)f.push(s[i].new);else c.push($-_),L.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*k+2*f.length),I.writeUInt16(0),I.writeUInt16(z),I.writeUInt16(T),I.writeUInt16(m),I.writeUInt16(M),ce=0,D=h.length;ce<D;ce++)i=h[ce],I.writeUInt16(i);for(I.writeUInt16(0),xe=0,V=E.length;xe<V;xe++)i=E[xe],I.writeUInt16(i);for(Ne=0,Z=c.length;Ne<Z;Ne++)o=c[Ne],I.writeUInt16(o);for(Me=0,ne=L.length;Me<ne;Me++)N=L[Me],I.writeUInt16(N);for(Ie=0,ae=f.length;Ie<ae;Ie++)x=f[Ie],I.writeUInt16(x);return{charMap:s,subtable:I.data,maxGlyphID:C+1}}},n})(),B5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)t=new a1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,i;return t==null&&(t="macroman"),s=a1.encode(e,t),(i=new so).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},n})(),GD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),YD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),ZD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(s=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var a,o,c;for(c=[],r=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(e.readUInt32());return c}).call(this)}},n})(),KD=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,i,r,a,o,c,d,u,h,m;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(c={},r=u=0,h=s.length;u<h;r=++u)i=s[r],e.pos=i.offset,d=e.readString(i.length),a=new KD(d,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),QD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),JD=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,i,r,a,o,c;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)u.push(e.readInt16());return u})(),this.widths=(function(){var d,u,h,m;for(m=[],d=0,u=(h=this.metrics).length;d<u;d++)r=h[d],m.push(r.advance);return m}).call(this),s=this.widths[this.widths.length-1],c=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)c.push(this.widths.push(s));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),$5=[].slice,eE=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,i,r,a,o,c,d,u,h;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,s=r.indexOf(e),(i=r.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,a=(o=new so(t.read(i))).readShort(),d=o.readShort(),h=o.readShort(),c=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new nE(o,d,h,c,u):new tE(o,a,d,h,c,u),this.cache[e]))},n.prototype.encode=function(e,t,s){var i,r,a,o,c;for(a=[],r=[],o=0,c=t.length;o<c;o++)i=e[t[o]],r.push(a.length),i&&(a=a.concat(i.encode(s)));return r.push(a.length),{table:a,offsets:r}},n})(),tE=(function(){function n(e,t,s,i,r,a){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=i,this.xMax=r,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),nE=(function(){function n(e,t,s,i,r){var a,o;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new so($5.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),sE=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qr(n,xr),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=2)r.push(2*e.readUInt16());return r}).call(this):(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=4)r.push(e.readUInt32());return r}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),i=0,r=0,a=0;a<s.length;++a)if(s[a]=i,r<t.length&&t[r]==a){++r,s[a]=i;var o=this.offsets[a],c=this.offsets[a+1]-o;c>0&&(i+=c)}for(var d=new Array(4*s.length),u=0;u<s.length;++u)d[4*u+3]=255&s[u],d[4*u+2]=(65280&s[u])>>8,d[4*u+1]=(16711680&s[u])>>16,d[4*u]=(4278190080&s[u])>>24;return d},n})(),iE=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,i,r;for(t in i=this.font.cmap.tables[0].codeMap,e={},r=this.subset)s=r[t],e[t]=i[s];return e},n.prototype.glyphsFor=function(e){var t,s,i,r,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[r=e[a]]=this.font.glyf.glyphFor(r);for(r in t=[],i)(s=i[r])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(r in c=this.glyphsFor(t))s=c[r],i[r]=s;return i},n.prototype.encode=function(e,t){var s,i,r,a,o,c,d,u,h,m,f,y,x,v,w;for(i in s=B5.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},w=s.charMap)f[(c=w[i]).old]=c.new;for(y in m=s.maxGlyphID,a)y in f||(f[y]=m++);return u=(function(j){var C,N;for(C in N={},j)N[j[C]]=C;return N})(f),h=Object.keys(u).sort(function(j,C){return j-C}),x=(function(){var j,C,N;for(N=[],j=0,C=h.length;j<C;j++)o=h[j],N.push(u[o]);return N})(),r=this.font.glyf.encode(a,x,f),d=this.font.loca.encode(r.offsets,x),v={cmap:this.font.cmap.raw(),glyf:r.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},n})();ut.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,i,r,a;if(Array.isArray(t))return"["+(function(){var o,c,d;for(d=[],o=0,c=t.length;o<c;o++)s=t[o],d.push(e.convert(s));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in r=["<<"],t)a=t[i],r.push("/"+i+" "+e.convert(a));return r.push(">>"),r.join(`
`)}return""+t},e})();const rE=n=>{Vl.trackDataExport("csv").catch(()=>{});const e=["Date","Time","Pain Level","Locations","Symptoms","Limited Activities","Sleep Quality","Mood Impact","Missed Work Days","Notes"].join(","),t=n.map(s=>{const[i,r]=s.timestamp.split("T"),a=(r||"").slice(0,5);return[i,a,s.baselineData.pain,`"${s.baselineData.locations?.join("; ")||""}"`,`"${s.baselineData.symptoms?.join("; ")||""}"`,`"${s.functionalImpact?.limitedActivities?.join("; ")||""}"`,s.qualityOfLife?.sleepQuality||"",s.qualityOfLife?.moodImpact||"",s.workImpact?.missedWork||"",`"${s.notes?.replace(/"/g,'""')||""}"`].join(",")});return[e,...t].join("\\n")},aE=n=>(Vl.trackDataExport("json").catch(()=>{}),JSON.stringify(n,null,2)),oE=(n,e,t="text/plain;charset=utf-8")=>{if(typeof window>"u")return;let s;if(n.startsWith("data:")){const[a,o]=n.split(",");s=new Blob([atob(o)],{type:a.split(":")[1].split(";")[0]})}else s=new Blob([n],{type:t});const i=window.URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)},lE=n=>{Vl.trackDataExport("pdf").catch(()=>{});const e=new ut;e.setFontSize(20),e.text("Pain Tracking Report",20,30),e.setFontSize(12);const t=n.length>0?new Date(n[0].timestamp).toLocaleDateString():"N/A",s=n.length>0?new Date(n[n.length-1].timestamp).toLocaleDateString():"N/A";if(e.text(`Report Period: ${t} to ${s}`,20,45),e.text(`Total Entries: ${n.length}`,20,55),n.length>0){const a=n.reduce((d,u)=>d+u.baselineData.pain,0)/n.length;e.text(`Average Pain Level: ${Vt(a,1)}/10`,20,65);const o=o1(n.flatMap(d=>d.baselineData.symptoms||[])),c=o1(n.flatMap(d=>d.baselineData.locations||[]));e.text(`Most Common Symptoms: ${o.slice(0,3).join(", ")}`,20,75),e.text(`Most Common Locations: ${c.slice(0,3).join(", ")}`,20,85)}let i=105;e.setFontSize(14),e.text("Detailed Entries",20,i),i+=15,e.setFontSize(10),n.slice(0,20).forEach((a,o)=>{i>270&&(e.addPage(),i=30);const c=new Date(a.timestamp).toLocaleDateString(),d=new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.text(`${o+1}. ${c} ${d} - Pain: ${a.baselineData.pain}/10`,20,i),i+=8,a.baselineData.symptoms&&a.baselineData.symptoms.length>0&&(e.text(`   Symptoms: ${a.baselineData.symptoms.join(", ")}`,25,i),i+=8),a.baselineData.locations&&a.baselineData.locations.length>0&&(e.text(`   Locations: ${a.baselineData.locations.join(", ")}`,25,i),i+=8),a.notes){const u=e.splitTextToSize(`   Notes: ${a.notes}`,150);e.text(u,25,i),i+=u.length*5+5}i+=5}),n.length>20&&e.text(`... and ${n.length-20} more entries`,20,i);const r=e.getNumberOfPages();for(let a=1;a<=r;a++)e.setPage(a),e.setFontSize(8),e.text(`Generated on ${new Date().toLocaleDateString()} - Page ${a} of ${r}`,20,285);return e.output("datauristring")},o1=n=>{const e={};return n.forEach(t=>{e[t]=(e[t]||0)+1}),Object.entries(e).sort(([,t],[,s])=>s-t).map(([t])=>t)};function cE({isOpen:n,onClose:e,entries:t,title:s="Export Pain Data"}){const[i,r]=W.useState("csv"),[a,o]=W.useState(!1),[c,d]=W.useState("idle"),[u,h]=W.useState({dateRange:{start:"",end:""},painLevelRange:{min:0,max:10},symptoms:[],locations:[],includeQualityOfLife:!0,includeWorkImpact:!0,includeMedications:!0,includeTreatments:!0}),m=W.useMemo(()=>{const C=new Set;return t.forEach(N=>{N.baselineData.symptoms&&N.baselineData.symptoms.forEach(P=>C.add(P))}),Array.from(C).sort()},[t]),f=W.useMemo(()=>{const C=new Set;return t.forEach(N=>{N.baselineData.locations&&N.baselineData.locations.forEach(P=>C.add(P))}),Array.from(C).sort()},[t]),y=W.useMemo(()=>t.filter(C=>{if(u.dateRange.start&&u.dateRange.end){const N=new Date(C.timestamp),P=new Date(u.dateRange.start),L=new Date(u.dateRange.end);if(N<P||N>L)return!1}return!(C.baselineData.pain<u.painLevelRange.min||C.baselineData.pain>u.painLevelRange.max||u.symptoms.length>0&&!u.symptoms.some(P=>C.baselineData.symptoms?.includes(P))||u.locations.length>0&&!u.locations.some(P=>C.baselineData.locations?.includes(P)))}),[t,u]),x=async()=>{if(y.length===0){d("error");return}o(!0),d("idle");try{let C,N;const P=new Date().toISOString().split("T")[0];switch(i){case"csv":C=rE(y),N=`pain-data-${P}.csv`;break;case"json":C=aE(y),N=`pain-data-${P}.json`;break;case"pdf":C=lE(y),N=`pain-report-${P}.pdf`;break;default:throw new Error("Unsupported export format")}oE(C,N),d("success"),setTimeout(()=>{e(),d("idle")},2e3)}catch(C){console.error("Export failed:",C),d("error")}finally{o(!1)}},v=[{id:"csv",label:"CSV (Spreadsheet)",description:"Compatible with Excel, Google Sheets",icon:Dj,extension:".csv"},{id:"json",label:"JSON (Data)",description:"For developers and data analysis",icon:Mj,extension:".json"},{id:"pdf",label:"PDF (Report)",description:"Formatted report for sharing",icon:dh,extension:".pdf"}],w=(C,N)=>{h(P=>({...P,[C]:N}))},j=(C,N)=>{if(!Array.isArray(u[C]))return;const P=u[C],L=P.includes(N)?P.filter(M=>M!==N):[...P,N];w(C,L)};return l.jsx(Kh,{isOpen:n,onClose:e,size:"xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(pd,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:s}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Export ",y.length," of ",t.length," entries"]})]})]}),l.jsx(Je,{variant:"ghost",size:"sm",onClick:e,children:l.jsx(ti,{className:"h-4 w-4"})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(dh,{className:"h-5 w-5"}),l.jsx("span",{children:"Export Format"})]})}),l.jsx(Ve,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:v.map(C=>{const N=C.icon;return l.jsx("button",{onClick:()=>r(C.id),className:Ye("p-4 border rounded-lg text-left transition-all hover:shadow-md",i===C.id?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-border hover:border-primary/50"),children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(N,{className:"h-8 w-8 text-primary mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:C.label}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:C.description}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:C.extension})]})]})},C.id)})})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(o2,{className:"h-5 w-5"}),l.jsx("span",{children:"Filters"})]})}),l.jsxs(Ve,{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),l.jsx("input",{type:"date",value:u.dateRange.start,onChange:C=>w("dateRange",{...u.dateRange,start:C.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),l.jsx("input",{type:"date",value:u.dateRange.end,onChange:C=>w("dateRange",{...u.dateRange,end:C.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Pain Level Range: ",u.painLevelRange.min," - ",u.painLevelRange.max]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"0",max:"10",value:u.painLevelRange.min,onChange:C=>w("painLevelRange",{...u.painLevelRange,min:parseInt(C.target.value)}),className:"flex-1"}),l.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),l.jsx("input",{type:"range",min:"0",max:"10",value:u.painLevelRange.max,onChange:C=>w("painLevelRange",{...u.painLevelRange,max:parseInt(C.target.value)}),className:"flex-1"})]})]}),m.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Symptoms"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(C=>l.jsx("button",{onClick:()=>j("symptoms",C),className:Ye("px-3 py-1 text-sm rounded-full border transition-colors",u.symptoms.includes(C)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:C},C))})]}),f.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Locations"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(C=>l.jsx("button",{onClick:()=>j("locations",C),className:Ye("px-3 py-1 text-sm rounded-full border transition-colors",u.locations.includes(C)?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:C},C))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Include Data Types"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{key:"includeQualityOfLife",label:"Quality of Life"},{key:"includeWorkImpact",label:"Work Impact"},{key:"includeMedications",label:"Medications"},{key:"includeTreatments",label:"Treatments"}].map(({key:C,label:N})=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:u[C],onChange:P=>w(C,P.target.checked),className:"rounded border-border"}),l.jsx("span",{className:"text-sm",children:N})]},C))})]})]})]}),c!=="idle"&&l.jsx(We,{className:Ye("border",c==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:l.jsx(Ve,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[c==="success"?l.jsx(io,{className:"h-5 w-5 text-green-600"}):l.jsx(Vh,{className:"h-5 w-5 text-red-600"}),l.jsx("p",{className:Ye("text-sm",c==="success"?"text-green-800":"text-red-800"),children:c==="success"?`Successfully exported ${y.length} entries!`:y.length===0?"No entries match your filters. Please adjust your criteria.":"Export failed. Please try again."})]})})}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:[y.length," entries will be exported"]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(Je,{variant:"outline",onClick:e,children:"Cancel"}),l.jsx(Je,{onClick:x,disabled:a||y.length===0,className:"min-w-[120px]",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Exporting..."]}):l.jsxs(l.Fragment,{children:[l.jsx(pd,{className:"h-4 w-4 mr-2"}),"Export ",i.toUpperCase()]})})]})]})]})})}const l1="pain-tracker-saved-filters";function dE(){const[n,e]=W.useState([]);return W.useEffect(()=>{try{const a=localStorage.getItem(l1);if(a){const o=JSON.parse(a);e(o)}}catch(a){console.error("Failed to load saved filters:",a)}},[]),W.useEffect(()=>{try{localStorage.setItem(l1,JSON.stringify(n))}catch(a){console.error("Failed to save filters:",a)}},[n]),{savedFilters:n,saveFilter:(a,o)=>{const c={id:`filter-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:a.trim(),criteria:{...o},createdAt:new Date().toISOString()};return e(d=>[...d,c]),c},loadFilter:a=>a.criteria,deleteFilter:a=>{e(o=>o.filter(c=>c.id!==a))},updateFilter:(a,o,c)=>{e(d=>d.map(u=>u.id===a?{...u,name:o.trim(),criteria:{...c}}:u))}}}const Fg={"dashboard-overview":{id:"dashboard-overview",type:"dashboard-overview",title:"Dashboard Overview",description:"Key metrics, charts, and recent activity",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!1,canResize:!0,traumaInformed:!0},"pain-entry":{id:"pain-entry",type:"pain-entry",title:"Record Pain",description:"Track your current pain level and symptoms",icon:l.jsx(Yi,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!1,canResize:!1,traumaInformed:!0},"pain-visualization":{id:"pain-visualization",type:"pain-visualization",title:"Pain Visualization",description:"Charts and graphs of your pain patterns",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"large",category:"analytics",canRemove:!0,canResize:!0,traumaInformed:!0},"recent-history":{id:"recent-history",type:"recent-history",title:"Recent History",description:"Your latest pain entries",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"medium",category:"core",canRemove:!0,canResize:!0,traumaInformed:!0},"empathy-analytics":{id:"empathy-analytics",type:"empathy-analytics",title:"Empathy Analytics",description:"Quantified empathy metrics and insights",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"large",category:"analytics",canRemove:!0,canResize:!0,traumaInformed:!0},"wcb-report":{id:"wcb-report",type:"wcb-report",title:"WCB Report",description:"Workers' compensation report generator",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"medium",category:"reports",canRemove:!0,canResize:!0,traumaInformed:!0},"current-stats":{id:"current-stats",type:"current-stats",title:"Current Stats",description:"Quick overview of your current metrics",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"small",category:"utilities",canRemove:!0,canResize:!1,traumaInformed:!0},"quick-actions":{id:"quick-actions",type:"quick-actions",title:"Quick Actions",description:"Common actions and shortcuts",icon:l.jsx(No,{className:"h-4 w-4"}),defaultSize:"small",category:"utilities",canRemove:!0,canResize:!1,traumaInformed:!0},"intelligent-triggers":{id:"intelligent-triggers",type:"intelligent-triggers",title:"Intelligent Triggers",description:"Smart notifications based on your pain patterns",icon:l.jsx(Xl,{className:"h-4 w-4"}),defaultSize:"large",category:"utilities",canRemove:!0,canResize:!0,traumaInformed:!0},"goal-tracking":{id:"goal-tracking",type:"goal-tracking",title:"Goal Tracking",description:"Set and track your health and wellness goals",icon:l.jsx(_s,{className:"h-4 w-4"}),defaultSize:"large",category:"core",canRemove:!0,canResize:!0,traumaInformed:!0}},c1={widgets:[{id:"dashboard-overview",type:"dashboard-overview",size:"large",position:0,visible:!0},{id:"pain-entry",type:"pain-entry",size:"large",position:1,visible:!0},{id:"goal-tracking",type:"goal-tracking",size:"large",position:2,visible:!0},{id:"pain-visualization",type:"pain-visualization",size:"large",position:3,visible:!0},{id:"recent-history",type:"recent-history",size:"medium",position:4,visible:!0},{id:"current-stats",type:"current-stats",size:"small",position:5,visible:!0},{id:"quick-actions",type:"quick-actions",size:"small",position:6,visible:!0},{id:"intelligent-triggers",type:"intelligent-triggers",size:"large",position:7,visible:!1},{id:"empathy-analytics",type:"empathy-analytics",size:"large",position:8,visible:!1},{id:"wcb-report",type:"wcb-report",size:"medium",position:9,visible:!1}],layout:"grid",columns:2},d1="pain-tracker-dashboard-layout",Du={core:"Core",analytics:"Analytics",reports:"Reports",utilities:"Utilities"};function Rc(n,e){return e==="all"?n.widgets.length:n.widgets.filter(t=>Fg[t.type].category===e).length}function uE(n,e){return e==="all"?n.widgets:n.widgets.filter(t=>Fg[t.type].category===e)}function hE({isOpen:n,onClose:e,layout:t,onToggleWidget:s,onResetLayout:i,onUpdateLayoutSettings:r}){const[a,o]=W.useState("all"),c=[{id:"all",label:"All Widgets",count:Rc(t,"all")},{id:"core",label:Du.core,count:Rc(t,"core")},{id:"analytics",label:Du.analytics,count:Rc(t,"analytics")},{id:"reports",label:Du.reports,count:Rc(t,"reports")},{id:"utilities",label:Du.utilities,count:Rc(t,"utilities")}],d=uE(t,a),u=(h,m)=>{if(h==="columns"){r({columns:m===1?1:2});return}r({[h]:m})};return l.jsx(Kh,{isOpen:n,onClose:e,size:"xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Xl,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Customize Dashboard"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, and rearrange your dashboard widgets"})]})]}),l.jsx(Je,{variant:"ghost",size:"sm",onClick:e,children:"Close"})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(d4,{className:"h-5 w-5"}),l.jsx("span",{children:"Layout Settings"})]})}),l.jsx(Ve,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Layout Style"}),l.jsxs("select",{value:t.layout,onChange:h=>u("layout",h.target.value),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"grid",children:"Grid"}),l.jsx("option",{value:"masonry",children:"Masonry"}),l.jsx("option",{value:"list",children:"List"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Columns"}),l.jsxs("select",{value:t.columns,onChange:h=>u("columns",parseInt(h.target.value,10)),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:1,children:"1 Column"}),l.jsx("option",{value:2,children:"2 Columns"})]})]})]})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(h=>l.jsxs("button",{onClick:()=>o(h.id),className:Ye("px-3 py-2 text-sm rounded-full border transition-colors",a===h.id?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-border hover:border-primary/50"),children:[h.label," (",h.count,")"]},h.id))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(h=>{const m=Fg[h.type];return l.jsx(We,{className:Ye("transition-all",h.visible?"border-primary/20 bg-primary/5":"opacity-60"),children:l.jsx(Ve,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"text-primary mt-1",children:m.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium",children:m.title}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m.description}),l.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[l.jsx(ts,{variant:"outline",className:"text-xs",children:m.category}),m.canRemove&&l.jsx(ts,{variant:"secondary",className:"text-xs",children:"Removable"})]})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx(Je,{variant:"ghost",size:"sm",onClick:()=>s(h.id),className:"p-2","aria-label":h.visible?"Hide widget":"Show widget",children:h.visible?l.jsx(Hh,{className:"h-4 w-4"}):l.jsx(dg,{className:"h-4 w-4"})})})]})})},h.id)})}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[l.jsxs(Je,{variant:"outline",onClick:i,children:[l.jsx(ug,{className:"h-4 w-4 mr-2"}),"Reset to Default"]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(Je,{variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(Je,{onClick:e,children:[l.jsx(mh,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})}function fE(){const[n,e]=W.useState(c1),[t,s]=W.useState(!1),i=W.useCallback(m=>m===1?1:2,[]),r=W.useCallback(m=>({...m,columns:i(m.columns)}),[i]);W.useEffect(()=>{try{const m=localStorage.getItem(d1);if(m){const f=JSON.parse(m);e(r(f))}}catch(m){console.warn("Failed to load dashboard layout from localStorage:",m)}finally{s(!0)}},[r]);const a=W.useCallback(m=>{try{const f=r(m);localStorage.setItem(d1,JSON.stringify(f)),e(f)}catch(f){console.error("Failed to save dashboard layout:",f)}},[r]),o=W.useCallback(()=>{a(c1)},[a]),c=W.useCallback(m=>{const f={...n,widgets:n.widgets.map(y=>y.id===m?{...y,visible:!y.visible}:y)};a(f)},[n,a]),d=W.useCallback((m,f)=>{const y={...n,widgets:n.widgets.map(x=>x.id===m?{...x,size:f}:x)};a(y)},[n,a]),u=W.useCallback((m,f)=>{const y=Array.from(n.widgets),[x]=y.splice(m,1);y.splice(f,0,x);const v=y.map((j,C)=>({...j,position:C})),w={...n,widgets:v};a(w)},[n,a]),h=W.useCallback(m=>{const f={...n,...m};m.columns!==void 0&&(f.columns=i(m.columns)),a(f)},[n,i,a]);return{layout:n,isLoaded:t,saveLayout:a,resetLayout:o,toggleWidget:c,updateWidgetSize:d,reorderWidgets:u,updateLayoutSettings:h}}function mE({totalEntries:n,visibleEntries:e,activeFilterCount:t,filterSummary:s,onOpenFilters:i,onOpenCustomize:r}){const a=t>0||e!==n,o=n===0?100:Math.round(e/n*100),c=t>99?"99+":t,d=[{label:"Entries tracked",value:n,sublabel:n===0?"Start with your first entry":"All time"},{label:"Currently showing",value:e,sublabel:`Focus view • ${o}%`},{label:"Filters active",value:t,sublabel:a?"Tap to adjust":"None applied"}],u=s??`${t} active filter${t===1?"":"s"}`;return l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"rounded-3xl border border-border/60 bg-gradient-to-br from-card via-card/95 to-card shadow-sm shadow-primary/5 p-6 lg:p-8",children:[l.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{className:"max-w-2xl space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.2em] text-primary/70",children:[l.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-primary/70","aria-hidden":"true"}),"Personalized overview"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{className:"text-balance text-3xl font-semibold text-foreground",children:"Custom dashboard, intentionally calmer"}),l.jsx("p",{className:"text-base text-muted-foreground",children:"Reduce overwhelm with curated widgets, flexible focus modes, and trauma-informed pacing."})]})]}),l.jsx("div",{className:"w-full max-w-xl grid gap-3 sm:grid-cols-3",children:d.map(h=>l.jsxs("div",{className:"rounded-2xl border border-border/50 bg-background/70 backdrop-blur-sm px-4 py-3 shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground/80",children:h.label}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:h.label==="Filters active"?c:h.value}),l.jsx("p",{className:"mt-1 text-xs text-muted-foreground/80",children:h.sublabel})]},h.label))})]}),a&&l.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 font-medium text-primary",children:[l.jsx(X0,{className:"h-4 w-4"}),u]}),l.jsx("button",{type:"button",onClick:i,className:"font-medium text-primary underline-offset-4 hover:underline",children:"Adjust filters"}),l.jsxs("span",{className:"text-muted-foreground",children:["Showing ",e," of ",n," entries"]})]}),l.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[l.jsxs(Je,{variant:t>0?"default":"outline",onClick:i,leftIcon:l.jsx(X0,{className:"h-4 w-4"}),className:"min-w-[150px]",children:["Filters",t>0&&l.jsx(ts,{variant:"secondary",className:"ml-2",children:c})]}),l.jsx(Je,{variant:"outline",onClick:r,leftIcon:l.jsx(Xl,{className:"h-4 w-4"}),className:"min-w-[150px]",children:"Customize"})]})]})})}function pE({sections:n,activeSection:e,onSectionChange:t}){return l.jsx("nav",{className:"rounded-3xl border border-border/50 bg-muted/30 p-2",role:"tablist","aria-label":"Dashboard focus modes",children:l.jsx("div",{className:"flex w-full gap-2 overflow-x-auto pb-1",style:{scrollbarWidth:"thin"},children:n.map(s=>{const i=s.icon,r=e===s.id;return l.jsxs(Je,{variant:r?"default":"ghost",size:"sm",onClick:()=>t(s.id),"aria-pressed":r,className:Ye("flex h-auto min-w-[180px] max-w-[260px] flex-1 items-center gap-3 rounded-2xl px-4 py-3 text-left transition-all duration-200",!r&&"border border-border bg-background/60 hover:bg-background/80",r&&"shadow-sm shadow-primary/20"),children:[l.jsx("span",{className:"inline-flex h-9 w-9 shrink-0 items-center justify-center rounded-2xl bg-primary/10 text-primary",children:l.jsx(i,{className:"h-4 w-4"})}),l.jsxs("div",{className:"min-w-0 text-left",children:[l.jsx("span",{className:"block text-sm font-semibold text-foreground text-balance",children:s.label}),l.jsx("span",{className:"block text-xs leading-tight text-muted-foreground text-pretty",children:s.description})]})]},s.id)})})})}const gE=({message:n,priority:e="polite",delay:t=0})=>{const s=W.useRef(null);return W.useEffect(()=>{if(n&&s.current){const i=setTimeout(()=>{s.current&&(s.current.textContent=n,setTimeout(()=>{s.current&&(s.current.textContent="")},1e3))},t);return()=>clearTimeout(i)}},[n,t]),l.jsx("div",{ref:s,"aria-live":e,"aria-atomic":"true",className:"sr-only"})},yE=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,xE={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},vE=n=>xE[n],bE=n=>n.replace(yE,vE);let u1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:bE};const wE=(n={})=>{u1={...u1,...n}},SE={type:"3rdParty",init(n){wE(n.options.react)}},rh={simplifiedMode:!0,showMemoryAids:!0,autoSave:!0,showProgress:!0,showCognitiveLoadIndicators:!0,adaptiveComplexity:!0,fontSize:"medium",contrast:"normal",reduceMotion:!1,touchTargetSize:"large",confirmationLevel:"standard",voiceInput:!1,gentleLanguage:!0,hideDistressingContent:!1,showComfortPrompts:!0,enableContentWarnings:!0,contentWarningLevel:"standard",enableCrisisDetection:!0,crisisDetectionSensitivity:"medium",showCrisisResources:!0,enableProgressiveDisclosure:!0,defaultDisclosureLevel:"helpful",adaptiveDisclosure:!0,realTimeValidation:!0,theme:"auto",reminderFrequency:"daily"},NE=n=>({small:"14px",medium:"16px",large:"18px",xl:"20px"})[n],kE=n=>({normal:"44px",large:"56px","extra-large":"72px"})[n],W5=W.createContext({preferences:rh,updatePreferences:()=>{}}),vr=()=>W.useContext(W5);function jE({children:n}){const[e,t]=W.useState(()=>{const i=kn.get("trauma-informed-preferences",{encrypt:!0});if(i)return{...rh,...i};try{const r=localStorage.getItem("trauma-informed-preferences");if(r){const a=JSON.parse(r);return kn.set("trauma-informed-preferences",a,{encrypt:!0}),{...rh,...a}}}catch{}return rh}),s=i=>{const r={...e,...i};t(r),kn.set("trauma-informed-preferences",r,{encrypt:!0})};return W.useEffect(()=>{const i=document.documentElement;i.style.setProperty("--ti-font-size",NE(e.fontSize)),i.style.setProperty("--ti-touch-size",kE(e.touchTargetSize));const r=`ti-contrast-${e.contrast}`;document.body.className=document.body.className.replace(/ti-contrast-\w+/g,""),document.body.classList.add(r),e.reduceMotion?document.body.classList.add("ti-reduce-motion"):document.body.classList.remove("ti-reduce-motion"),e.simplifiedMode?document.body.classList.add("ti-simplified"):document.body.classList.remove("ti-simplified")},[e]),l.jsx(W5.Provider,{value:{preferences:e,updatePreferences:s},children:n})}function _E({title:n,level:e,children:t,defaultOpen:s=!1,memoryAid:i}){const{preferences:r}=vr(),[a,o]=W.useState(s),c=r.simplifiedMode&&e==="essential",d={essential:"border-l-blue-500 bg-blue-50",helpful:"border-l-yellow-500 bg-yellow-50",advanced:"border-l-gray-500 bg-gray-50"},u={essential:"Essential",helpful:"Helpful",advanced:"Advanced"};return l.jsxs("div",{className:`border-l-4 ${d[e]} rounded-r-md mb-4`,children:[l.jsx("button",{onClick:()=>o(!a),className:"w-full p-4 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset",style:{minHeight:"var(--ti-touch-size)"},"aria-expanded":a,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[a?l.jsx(lj,{className:"w-5 h-5 text-gray-600"}):l.jsx(qh,{className:"w-5 h-5 text-gray-600"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:n}),l.jsx("span",{className:"text-xs text-gray-500 font-medium",children:u[e]})]})]}),r.showMemoryAids&&i&&l.jsxs("div",{className:"text-xs text-gray-600 bg-gray-200 px-2 py-1 rounded",children:["💡 ",i]})]})}),(a||c)&&l.jsx("div",{className:"px-4 pb-4",children:t})]})}function h1({text:n,type:e="tip",title:t,items:s}){const{preferences:i}=vr();if(!i.showMemoryAids)return null;const r={tip:"💡",reminder:"🔔",example:"📝"};return t&&s?l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-2",children:[l.jsx("div",{className:"font-medium text-blue-800 mb-2",children:t}),l.jsx("ul",{className:"list-disc pl-5 text-sm text-blue-800 space-y-1",children:s.map((a,o)=>l.jsx("li",{children:a},o))})]}):l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-2",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-lg",children:r[e]}),l.jsx("p",{className:"text-sm text-blue-800",children:n})]})})}function CE({intensity:n="gentle"}){const{preferences:e}=vr(),[t,s]=W.useState(!1);if(W.useEffect(()=>{if(e.showComfortPrompts){const r=setTimeout(()=>s(!0),3e4);return()=>clearTimeout(r)}},[e.showComfortPrompts]),!e.showComfortPrompts||!t)return null;const i={gentle:"Take your time. There's no rush with tracking your health.",standard:"Remember to take breaks if you need them. Your wellbeing comes first.",strong:"If you're feeling overwhelmed, it's okay to save and continue later."};return l.jsx("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Oi,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:i[n]}),l.jsx("button",{onClick:()=>s(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"Dismiss"})]})]})})}function ah({children:n,onClick:e,variant:t="primary",size:s="normal",disabled:i=!1,className:r=""}){const{preferences:a}=vr(),o=`
    inline-flex items-center justify-center
    font-medium rounded-md
    focus:outline-none focus:ring-2 focus:ring-offset-2
    transition-colors
    ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}
  `,c={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",gentle:"bg-green-100 text-green-800 hover:bg-green-200 focus:ring-green-500"},d=s==="large"||a.touchTargetSize!=="normal"?"px-6 py-4 text-lg min-h-[var(--ti-touch-size)]":"px-4 py-2 text-base min-h-[44px]";return l.jsx("button",{onClick:e,disabled:i,className:`${o} ${c[t]} ${d} ${r}`,style:{fontSize:"var(--ti-font-size)",transition:a.reduceMotion?"none":"all var(--ti-transition-duration)"},children:n})}function AE({onResult:n,onError:e,placeholder:t="Tap to speak...",disabled:s=!1,language:i="en-US",continuous:r=!1}){const[a,o]=W.useState(!1),[c,d]=W.useState(!1),[u,h]=W.useState(""),m=Ge.useRef(null);W.useEffect(()=>{const x=window.SpeechRecognition||window.webkitSpeechRecognition;if(d(!!x),x){const v=new x;v.continuous=r,v.interimResults=!0,v.lang=i,v.onresult=w=>{let j="",C="";for(let N=w.resultIndex;N<w.results.length;N++){const P=w.results[N];P.isFinal?j+=P[0].transcript:C+=P[0].transcript}h(j||C),j&&(n(j),h(""))},v.onerror=w=>{o(!1),e?.(`Speech recognition error: ${w.error}`),"vibrate"in navigator&&navigator.vibrate([100,50,100])},v.onend=()=>{o(!1),h("")},m.current=v}return()=>{m.current&&m.current.stop()}},[r,i,n,e]);const f=W.useCallback(()=>{if(m.current&&!a)try{o(!0),"vibrate"in navigator&&navigator.vibrate(50),m.current.start()}catch{o(!1),e?.("Failed to start speech recognition")}},[a,e]),y=W.useCallback(()=>{m.current&&a&&m.current.stop()},[a]);return c?l.jsxs("div",{className:"relative",children:[l.jsxs(Je,{onClick:a?y:f,disabled:s,variant:a?"destructive":"outline",size:"lg",className:"min-h-[48px] min-w-[48px]","aria-label":a?"Stop voice input":"Start voice input","aria-pressed":a,children:[a?l.jsx(e4,{className:"h-5 w-5"}):l.jsx(n4,{className:"h-5 w-5"}),l.jsx("span",{className:"sr-only",children:a?"Stop listening":"Start voice input"})]}),a&&l.jsxs("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-card border rounded-lg px-3 py-2 shadow-lg z-10 min-w-[200px] text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm font-medium",children:"Listening..."})]}),u&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u})]}),l.jsx(gE,{message:a?"Voice input active":"Voice input inactive",priority:"assertive"})]}):null}function PE({gesture:n,direction:e,description:t,show:s=!0}){if(!s)return null;const i=()=>{switch(n){case"swipe":return e==="left"?"←":e==="right"?"→":e==="up"?"↑":"↓";case"pinch":return"🤏";case"tap":return"👆";case"long-press":return"👇";default:return"👋"}};return l.jsxs("div",{className:"gesture-hint fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-card border rounded-lg px-4 py-2 shadow-lg z-40 max-w-xs text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[l.jsx("span",{className:"text-lg",children:i()}),l.jsx("span",{className:"text-sm font-medium",children:t})]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[n==="swipe"&&`Swipe ${e} to navigate`,n==="pinch"&&"Pinch to zoom in/out",n==="tap"&&"Tap to interact",n==="long-press"&&"Press and hold for options"]})]})}function U5(){const[n,e]=W.useState({voiceInput:!1,textToSpeech:!1,hapticFeedback:!0,largeText:!1,highContrast:!1,reducedMotion:!1});W.useEffect(()=>{try{const s=localStorage.getItem("mobile-accessibility-prefs");s&&e(JSON.parse(s))}catch(s){console.warn("Failed to load mobile accessibility preferences:",s)}},[]);const t=W.useCallback(s=>{const i={...n,...s};e(i);try{localStorage.setItem("mobile-accessibility-prefs",JSON.stringify(i))}catch(r){console.warn("Failed to save mobile accessibility preferences:",r)}},[n]);return{preferences:n,updatePreferences:t}}function LE(){const[n,e]=W.useState(!1);return W.useEffect(()=>{const t=window.matchMedia("(prefers-contrast: high)").matches;e(t);const s=window.matchMedia("(prefers-contrast: high)"),i=r=>e(r.matches);return s.addEventListener("change",i),()=>s.removeEventListener("change",i)},[]),W.useEffect(()=>{document.documentElement.classList.toggle("high-contrast",n)},[n]),l.jsxs(Je,{onClick:()=>e(!n),variant:"outline",size:"sm","aria-label":`Toggle high contrast mode ${n?"off":"on"}`,"aria-pressed":n,children:[n?"☀️":"🌙"," Contrast"]})}function ME(){const{preferences:n,updatePreferences:e}=vr(),{preferences:t,updatePreferences:s}=U5(),[i,r]=W.useState("cognitive"),a=d=>{e(d)},o=()=>{e({simplifiedMode:!0,showMemoryAids:!0,autoSave:!0,showProgress:!0,fontSize:"medium",contrast:"normal",reduceMotion:!1,touchTargetSize:"large",confirmationLevel:"standard",voiceInput:!1,gentleLanguage:!0,hideDistressingContent:!1,showComfortPrompts:!0})},c=[{id:"cognitive",label:"Cognitive Support",icon:l.jsx($s,{className:"w-5 h-5"}),description:"Memory aids and cognitive load reduction"},{id:"visual",label:"Visual Preferences",icon:l.jsx(Hh,{className:"w-5 h-5"}),description:"Text size, contrast, and motion settings"},{id:"motor",label:"Motor & Input",icon:l.jsx(l2,{className:"w-5 h-5"}),description:"Touch targets and alternative input methods"},{id:"mobile",label:"Mobile Features",icon:l.jsx(h2,{className:"w-5 h-5"}),description:"Voice input, haptic feedback, and mobile accessibility"},{id:"emotional",label:"Emotional Safety",icon:l.jsx(Oi,{className:"w-5 h-5"}),description:"Trauma-informed interaction patterns"}];return l.jsxs(We,{className:"accessibility-settings w-full max-w-4xl mx-auto",children:[l.jsx(bt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Xl,{className:"w-6 h-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx(wt,{children:"Accessibility & Comfort Settings"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customize the interface to work best for your needs"})]})]}),l.jsx("div",{className:"flex space-x-2",children:l.jsxs(ah,{variant:"secondary",onClick:o,size:"normal",children:[l.jsx(ug,{className:"w-4 h-4 mr-2"}),"Reset"]})})]})}),l.jsxs(Ve,{children:[l.jsx("div",{className:"border-b border-gray-200 mb-6",children:l.jsx("nav",{className:"flex space-x-4","aria-label":"Settings categories",children:c.map(d=>l.jsxs("button",{onClick:()=>r(d.id),className:`
                  flex items-center space-x-2 px-4 py-3 text-sm font-medium rounded-t-lg
                  transition-colors min-h-[var(--ti-touch-size)]
                  ${i===d.id?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
                `,"aria-selected":i===d.id,role:"tab",children:[d.icon,l.jsxs("div",{className:"text-left",children:[l.jsx("div",{children:d.label}),l.jsx("div",{className:"text-xs text-gray-500",children:d.description})]})]},d.id))})}),l.jsxs("div",{className:"space-y-6",children:[i==="cognitive"&&l.jsx(TE,{preferences:n,onChange:a}),i==="visual"&&l.jsx(DE,{preferences:n,onChange:a}),i==="motor"&&l.jsx(EE,{preferences:n,onChange:a}),i==="mobile"&&l.jsx(RE,{preferences:t,onChange:s}),i==="emotional"&&l.jsx(IE,{preferences:n,onChange:a})]})]})]})}function TE({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(vi,{title:"Interface Complexity",description:"Reduce cognitive load by simplifying the interface",icon:l.jsx($s,{className:"w-5 h-5 text-purple-500"}),children:l.jsx(Qs,{label:"Simplified Mode",description:"Show only essential features and reduce interface complexity",checked:n.simplifiedMode,onChange:t=>e({simplifiedMode:t})})}),l.jsxs(vi,{title:"Memory Support",description:"Tools to help remember and navigate the interface",icon:l.jsx(Dd,{className:"w-5 h-5 text-yellow-500"}),children:[l.jsx(Qs,{label:"Memory Aids",description:"Show helpful tips and reminders throughout the interface",checked:n.showMemoryAids,onChange:t=>e({showMemoryAids:t})}),l.jsx(Qs,{label:"Progress Indicators",description:"Show your progress through forms and tasks",checked:n.showProgress,onChange:t=>e({showProgress:t})}),l.jsx(Qs,{label:"Auto-Save",description:"Automatically save your work to prevent data loss",checked:n.autoSave,onChange:t=>e({autoSave:t})})]})]})}function DE({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(vi,{title:"Text & Typography",description:"Adjust text size for comfortable reading",icon:l.jsx(f2,{className:"w-5 h-5 text-blue-500"}),children:l.jsx(Ph,{label:"Font Size",description:"Choose a comfortable text size for reading",value:n.fontSize,options:[{value:"small",label:"Small (14px)"},{value:"medium",label:"Medium (16px)"},{value:"large",label:"Large (18px)"},{value:"xl",label:"Extra Large (20px)"}],onChange:t=>e({fontSize:t})})}),l.jsx(vi,{title:"Contrast & Colors",description:"Adjust visual contrast for better visibility",icon:l.jsx(d2,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Ph,{label:"Contrast Level",description:"Higher contrast can improve text readability",value:n.contrast,options:[{value:"normal",label:"Normal Contrast"},{value:"high",label:"High Contrast"},{value:"extra-high",label:"Extra High Contrast"}],onChange:t=>e({contrast:t})})}),l.jsx(vi,{title:"Motion & Animation",description:"Control movement and transitions in the interface",icon:l.jsx(Dd,{className:"w-5 h-5 text-orange-500"}),children:l.jsx(Qs,{label:"Reduce Motion",description:"Minimize animations and transitions that may cause discomfort",checked:n.reduceMotion,onChange:t=>e({reduceMotion:t})})})]})}function EE({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(vi,{title:"Touch & Click Targets",description:"Adjust the size of buttons and interactive elements",icon:l.jsx(l2,{className:"w-5 h-5 text-blue-500"}),children:l.jsx(Ph,{label:"Touch Target Size",description:"Larger targets are easier to tap accurately",value:n.touchTargetSize,options:[{value:"normal",label:"Normal (44px)"},{value:"large",label:"Large (56px)"},{value:"extra-large",label:"Extra Large (72px)"}],onChange:t=>e({touchTargetSize:t})})}),l.jsx(vi,{title:"Alternative Input",description:"Enable alternative ways to interact with the interface",icon:l.jsx(m2,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Qs,{label:"Voice Input",description:"Use speech-to-text for filling out forms (requires microphone)",checked:n.voiceInput,onChange:t=>e({voiceInput:t})})}),l.jsx(vi,{title:"Interaction Feedback",description:"Control confirmation prompts and feedback",icon:l.jsx(Gl,{className:"w-5 h-5 text-purple-500"}),children:l.jsx(Ph,{label:"Confirmation Level",description:"How much confirmation do you want for actions?",value:n.confirmationLevel,options:[{value:"minimal",label:"Minimal - Few confirmations"},{value:"standard",label:"Standard - Important actions only"},{value:"high",label:"High - Confirm most actions"}],onChange:t=>e({confirmationLevel:t})})})]})}function IE({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsx(vi,{title:"Language & Communication",description:"How the interface communicates with you",icon:l.jsx(Oi,{className:"w-5 h-5 text-pink-500"}),children:l.jsx(Qs,{label:"Gentle Language",description:"Use supportive, non-judgmental language in messages and feedback",checked:n.gentleLanguage,onChange:t=>e({gentleLanguage:t})})}),l.jsx(vi,{title:"Content Controls",description:"Control what content is displayed",icon:l.jsx(Gl,{className:"w-5 h-5 text-green-500"}),children:l.jsx(Qs,{label:"Hide Distressing Content",description:"Filter out potentially triggering medical images or detailed descriptions",checked:n.hideDistressingContent,onChange:t=>e({hideDistressingContent:t})})}),l.jsx(vi,{title:"Comfort & Support",description:"Gentle reminders and encouragement",icon:l.jsx(Oi,{className:"w-5 h-5 text-red-500"}),children:l.jsx(Qs,{label:"Comfort Prompts",description:"Show gentle reminders to take breaks and practice self-care",checked:n.showComfortPrompts,onChange:t=>e({showComfortPrompts:t})})})]})}function RE({preferences:n,onChange:e}){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs(vi,{title:"Voice & Speech",description:"Voice input and text-to-speech features",icon:l.jsx(m2,{className:"w-5 h-5 text-blue-500"}),children:[l.jsx(Qs,{label:"Voice Input",description:"Enable voice commands for navigation and form input",checked:n.voiceInput,onChange:t=>e({voiceInput:t})}),l.jsx(Qs,{label:"Text-to-Speech",description:"Read interface elements aloud when requested",checked:n.textToSpeech,onChange:t=>e({textToSpeech:t})})]}),l.jsx(vi,{title:"Haptic Feedback",description:"Vibration feedback for interactions",icon:l.jsx(Dd,{className:"w-5 h-5 text-purple-500"}),children:l.jsx(Qs,{label:"Haptic Feedback",description:"Vibrate device for button presses and confirmations",checked:n.hapticFeedback,onChange:t=>e({hapticFeedback:t})})}),l.jsxs(vi,{title:"Text & Display",description:"Mobile-specific text and display preferences",icon:l.jsx(f2,{className:"w-5 h-5 text-green-500"}),children:[l.jsx(Qs,{label:"Large Text",description:"Increase text size for better mobile readability",checked:n.largeText,onChange:t=>e({largeText:t})}),l.jsx(Qs,{label:"High Contrast",description:"Enhanced contrast for better visibility on mobile screens",checked:n.highContrast,onChange:t=>e({highContrast:t})}),l.jsx(Qs,{label:"Reduced Motion",description:"Minimize animations that may cause motion sickness",checked:n.reducedMotion,onChange:t=>e({reducedMotion:t})})]})]})}function vi({title:n,description:e,icon:t,children:s}){return l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[t,l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:n}),l.jsx("p",{className:"text-sm text-gray-600",children:e})]})]}),l.jsx("div",{className:"space-y-4",children:s})]})}function Qs({label:n,description:e,checked:t,onChange:s}){return l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"font-medium text-gray-900 text-sm",children:n}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e})]}),l.jsx("button",{onClick:()=>s(!t),className:`
          relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent 
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
          ${t?"bg-blue-600":"bg-gray-200"}
        `,style:{minHeight:"var(--ti-touch-size)",minWidth:"44px"},role:"switch","aria-checked":t,"aria-labelledby":`toggle-${n.replace(/\s+/g,"-").toLowerCase()}`,children:l.jsx("span",{className:`
            inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out
            ${t?"translate-x-5":"translate-x-0"}
          `})})]})}function Ph({label:n,description:e,value:t,options:s,onChange:i}){return l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium text-gray-900 text-sm mb-1",children:n}),l.jsx("p",{className:"text-xs text-gray-600 mb-3",children:e}),l.jsx("select",{value:t,onChange:r=>i(r.target.value),className:`\r
          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm\r
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\r
          text-sm\r
        `,style:{minHeight:"var(--ti-touch-size)",fontSize:"var(--ti-font-size)"},children:s.map(r=>l.jsx("option",{value:r.value,children:r.label},r.value))})]})}function Xo({children:n,title:e,description:t,importance:s="normal",canCollapse:i=!0}){const{preferences:r}=vr();return r.simplifiedMode&&i&&s==="low"?l.jsx(_E,{title:e,level:"advanced",memoryAid:t||"Optional information",defaultOpen:!1,children:l.jsx("div",{className:"mb-6",children:n})}):l.jsxs("section",{className:"trauma-informed-section mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),t&&l.jsx("p",{className:"text-sm text-gray-600",children:t})]}),n]})}const ua={subtleLight:"bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",healing:"bg-gradient-to-r from-green-400 via-emerald-500 to-teal-500",alert:"bg-gradient-to-r from-yellow-400 via-amber-500 to-orange-500",critical:"bg-gradient-to-r from-red-500 via-rose-500 to-pink-500"},OE={primary:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"};function q5({content:n,children:e,placement:t="top",trigger:s="hover",className:i=""}){const[r,a]=W.useState(!1),[o,c]=W.useState(!1),d=W.useRef(null),u=W.useRef(null),h={top:"bottom-full mb-2 left-1/2 transform -translate-x-1/2",bottom:"top-full mt-2 left-1/2 transform -translate-x-1/2",left:"right-full mr-2 top-1/2 transform -translate-y-1/2",right:"left-full ml-2 top-1/2 transform -translate-y-1/2"},m={top:"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-popover",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-popover",left:"left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-popover",right:"right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-popover"},f=()=>{o||a(!0)},y=()=>{a(!1)},x=()=>{a(!r)},v=()=>{a(!1),c(!0)},w=C=>{C.key==="Escape"&&(y(),d.current?.focus())};W.useEffect(()=>{if(!r)return;const C=N=>{u.current&&d.current&&!u.current.contains(N.target)&&!d.current.contains(N.target)&&y()};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[r]);const j={hover:{onMouseEnter:f,onMouseLeave:y,onFocus:f,onBlur:y},click:{onClick:x},focus:{onFocus:f,onBlur:y}};return o?e?l.jsx(l.Fragment,{children:e}):null:l.jsxs("div",{className:`relative inline-block ${i}`,children:[l.jsx("button",{ref:d,className:"inline-flex items-center justify-center p-1 rounded-full hover:bg-muted transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","aria-describedby":r?"tooltip":void 0,"aria-expanded":r,...j[s],children:e||l.jsx(Md,{className:"h-4 w-4 text-muted-foreground"})}),r&&l.jsxs("div",{ref:u,id:"tooltip",role:"tooltip",className:`absolute z-50 ${h[t]}`,onKeyDown:w,children:[l.jsx("div",{className:"bg-popover text-popover-foreground border rounded-md shadow-lg p-3 max-w-xs",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("p",{className:"text-sm",children:n}),s==="click"&&l.jsx("button",{onClick:v,className:"text-muted-foreground hover:text-foreground","aria-label":"Dismiss tooltip",children:l.jsx(ti,{className:"h-3 w-3"})})]})}),l.jsx("div",{className:`absolute w-0 h-0 border-4 ${m[t]}`})]})]})}const f1={nav:"backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border-b border-white/20"},FE=[{id:"overview",label:"Overview",icon:es,description:"Snapshot of today and key metrics"},{id:"charts",label:"Insights",icon:lg,description:"Interactive charts and advanced trends"},{id:"recent",label:"Recent",icon:uh,description:"Latest entries and quick review"}];function zE({active:n,onChange:e}){return l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:Ye("inline-flex items-center gap-2 rounded-full border border-border/40 px-4 py-2 text-xs font-medium text-muted-foreground",f1.nav,"shadow-[0_8px_24px_-12px_rgba(15,23,42,0.35)] backdrop-saturate-[1.2]"),children:[l.jsx("span",{className:"hidden sm:inline",children:"Navigate dashboard"}),l.jsx("span",{className:"sm:hidden",children:"Sections"})]})}),l.jsx("div",{className:Ye("relative flex w-full flex-wrap items-center justify-start gap-2 rounded-2xl border border-border/40 p-1 md:w-auto",f1.nav,"shadow-lg shadow-primary/5 backdrop-blur-xl transition-colors"),role:"tablist","aria-label":"Dashboard sections",children:FE.map(t=>{const s=n===t.id,i=t.icon;return l.jsxs(Je,{type:"button",variant:s?"default":"ghost",size:"sm",onClick:()=>e(t.id),className:Ye("relative flex items-center space-x-2 rounded-2xl px-4 py-2 transition-all duration-200 focus-visible:ring-2 focus-visible:ring-primary/60","min-h-[40px] min-w-[40px] text-sm",s?"shadow-[0_12px_30px_-12px_rgba(37,99,235,0.55)]":"text-muted-foreground hover:text-foreground hover:bg-primary/5"),role:"tab","aria-selected":s,"aria-pressed":s,children:[l.jsx(i,{className:Ye("h-4 w-4",s?"text-primary-foreground":"text-primary"),"aria-hidden":"true"}),l.jsx("span",{children:t.label}),l.jsx("span",{className:"sr-only",children:t.description})]},t.id)})})]})}const m1={primary:xn("color-primary")};function BE(n,e){const t=e?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",s=e?.locale||void 0,i=u=>new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(u),r=u=>new Intl.DateTimeFormat(s,{timeZone:t,month:"short",day:"numeric"}).format(u),a=[];for(let u=6;u>=0;u--){const h=new Date;h.setDate(h.getDate()-u),a.push({date:h,key:i(h),label:r(h)})}const o=new Map;for(const u of n||[]){const h=u.created_at instanceof Date?u.created_at:new Date(u.created_at);if(Number.isNaN(h.getTime()))continue;const m=i(h);o.has(m)||o.set(m,[]),o.get(m).push(Number(u.pain_level))}const c=a.map(u=>u.label),d=a.map(u=>{const h=o.get(u.key)||[];if(h.length===0)return 0;const f=h.reduce((y,x)=>y+x,0)/h.length;return Math.round(f*10)/10});return{labels:c,datasets:[{label:e?.label||"Avg pain",data:d,borderColor:m1.primary,backgroundColor:m1.primary,fill:!1,tension:.4}]}}function $E({entries:n,allEntries:e}){const t=W.useMemo(()=>{const s=e?.length??n.length,i=n.length>0?n.reduce((d,u)=>d+u.baselineData.pain,0)/n.length:0,r=n.slice(-7),a=r.length>0?r.reduce((d,u)=>d+u.baselineData.pain,0)/r.length:0,o=[0,0,0,0];n.forEach(d=>{const u=d.baselineData.pain;u<=2?o[0]++:u<=5?o[1]++:u<=8?o[2]++:o[3]++});const c=BE(n.map(d=>({created_at:d.timestamp,pain_level:d.baselineData.pain})),{});return{totalEntries:s,averagePain:i,weeklyAvg:a,painRanges:o,rolling:c}},[n,e]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4",style:{gap:"var(--dashboard-gap)"},children:[l.jsx(We,{children:l.jsxs(Ve,{children:["Total Entries: ",t.totalEntries]})}),l.jsx(We,{children:l.jsxs(Ve,{children:["Avg Pain: ",Vt(Number(t.averagePain),1)]})}),l.jsx(We,{children:l.jsxs(Ve,{children:["Weekly Avg: ",Vt(Number(t.weeklyAvg),1)]})}),l.jsx(We,{children:l.jsxs(Ve,{children:["This dashboard area is under active development. For planned widgets, status, and links to issues you can help with, see the project's feature matrix.",l.jsx("a",{className:"ml-1 text-primary underline",href:"/docs/FEATURE_MATRIX.md",target:"_blank",rel:"noopener noreferrer",children:"View Feature Matrix"}),l.jsx("div",{className:"sr-only",children:"Opens docs/FEATURE_MATRIX.md in repository"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(es,{className:"h-5 w-5"}),l.jsx("span",{children:"Pain Distribution"})]})}),l.jsx(Ve,{children:l.jsx(pa,{data:{labels:["Mild","Moderate","Severe","Extreme"],datasets:[{label:"Entries",data:t.painRanges}]},type:"bar",height:200})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(Fn,{className:"h-5 w-5"}),l.jsx("span",{children:"Weekly Trend"})]})}),l.jsx(Ve,{children:l.jsx(pa,{data:{labels:t.rolling.labels||[],datasets:t.rolling.datasets||[]},type:"line",height:200})})]})]})]})}function WE(n){return n<=2?{label:"Mild",gradientClass:`${ua.healing} text-white`,indicatorClass:ua.healing,icon:l.jsx(io,{className:"h-5 w-5 text-emerald-500","aria-hidden":"true"}),message:"Gentle day logged. Celebrate the moments of ease.",accent:"text-emerald-500"}:n<=5?{label:"Moderate",gradientClass:`${ua.alert} text-white`,indicatorClass:ua.alert,icon:l.jsx(ba,{className:"h-5 w-5 text-amber-500","aria-hidden":"true"}),message:"Notice what supports you around these pain levels.",accent:"text-amber-500"}:n<=8?{label:"Severe",gradientClass:`${ua.critical} text-white`,indicatorClass:ua.critical,icon:l.jsx(wa,{className:"h-5 w-5 text-orange-500","aria-hidden":"true"}),message:"A more intense moment. Make note of what you need.",accent:"text-orange-500"}:{label:"Extreme",gradientClass:`${ua.critical} text-white`,indicatorClass:ua.critical,icon:l.jsx(Dd,{className:"h-5 w-5 text-rose-500","aria-hidden":"true"}),message:"Thank you for tracking this difficult moment—share with your care team.",accent:"text-rose-500"}}function UE({entries:n}){const e=W.useMemo(()=>n.slice().sort((r,a)=>new Date(a.timestamp).getTime()-new Date(r.timestamp).getTime()).slice(0,5),[n]),t=W.useMemo(()=>new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),[]),s=W.useMemo(()=>new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),[]),i=Ge.useCallback(r=>{const a=new Date(r);if(Number.isNaN(a.getTime()))return"Unknown time";const o=a.getTime()-Date.now(),c=Math.round(o/6e4);if(Math.abs(c)<60)return t.format(c,"minute");const d=Math.round(c/60);if(Math.abs(d)<24)return t.format(d,"hour");const u=Math.round(d/24);return t.format(u,"day")},[t]);return l.jsxs(Al,{variant:"glass",hoverable:!0,animated:!0,className:"relative overflow-hidden border border-border/40 bg-card/70 backdrop-blur-xl",children:[l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent","aria-hidden":"true"}),l.jsx(Uc,{icon:l.jsx(Ur,{className:"h-5 w-5"}),children:l.jsxs("div",{className:"flex w-full flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx(qc,{gradient:!0,children:"Recent Activity"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Your latest entries with gentle prompts for reflection."})]}),l.jsx(ts,{variant:"outline",className:"rounded-full border-primary/20 bg-primary/5 text-xs text-primary",children:e.length>0?`${e.length} highlighted`:"Nothing logged yet"})]})}),l.jsx(Vc,{children:e.length>0?l.jsxs("div",{className:"relative pl-6",children:[l.jsx("div",{className:"absolute left-[10px] top-3 bottom-3 w-px bg-gradient-to-b from-primary/30 via-primary/15 to-transparent","aria-hidden":"true"}),l.jsx(Ku,{className:"space-y-4",delay:80,children:e.map((r,a)=>{const o=WE(r.baselineData.pain),c=new Date(r.timestamp),d=i(r.timestamp),u=Number.isNaN(c.getTime())?"Unknown time":s.format(c),h=(r.symptoms??[]).filter(Boolean),m=r.qualityOfLife??null;return l.jsxs("div",{className:"relative pl-6",children:[a!==e.length-1&&l.jsx("div",{className:"absolute left-[-26px] top-12 bottom-[-24px] w-px bg-gradient-to-b from-primary/20 via-primary/10 to-transparent","aria-hidden":"true"}),l.jsx("div",{className:"absolute left-[-32px] top-10 inline-flex h-5 w-5 items-center justify-center rounded-full bg-primary/10 shadow-inner",children:l.jsx("span",{className:Ye("block h-3.5 w-3.5 rounded-full shadow",o.indicatorClass),"aria-hidden":"true"})}),l.jsxs("div",{className:"rounded-2xl border border-border/40 bg-card/80 p-5 shadow-sm transition-all duration-200 hover:-translate-y-1 hover:shadow-xl backdrop-blur-lg",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 text-primary shadow-inner",children:o.icon}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-semibold text-foreground",children:["Pain level ",r.baselineData.pain,"/10"]}),l.jsx("span",{className:Ye("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold shadow-sm",o.gradientClass),children:o.label})]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Logged ",d," • ",u]})]})]}),m&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[l.jsxs(ts,{variant:"outline",className:"rounded-full border-emerald-300/40 bg-emerald-300/15 text-emerald-700 dark:text-emerald-300",children:["Sleep ",m.sleepQuality,"/10"]}),l.jsxs(ts,{variant:"outline",className:"rounded-full border-sky-300/40 bg-sky-300/15 text-sky-700 dark:text-sky-300",children:["Mood ",m.moodImpact,"/10"]})]})]}),l.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:h.length>0?l.jsxs(l.Fragment,{children:[h.slice(0,3).map(f=>l.jsx(ts,{variant:"secondary",className:"rounded-full bg-primary/10 text-primary",children:f},f)),h.length>3&&l.jsxs("span",{className:"text-muted-foreground",children:["+",h.length-3," more"]})]}):l.jsx("span",{className:"text-muted-foreground",children:"No symptoms recorded"})}),l.jsx("p",{className:Ye("mt-4 text-xs font-medium",o.accent),children:o.message})]})]},r.id)})})]}):l.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-dashed border-border/60 bg-card/60 px-8 py-12 text-center text-muted-foreground",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent","aria-hidden":"true"}),l.jsx(Ur,{className:"mx-auto mb-4 h-12 w-12 opacity-50","aria-hidden":"true"}),l.jsx("p",{className:"text-base font-medium text-foreground",children:"No recent activity yet"}),l.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Entries you add will appear here with supportive summaries."})]})})]})}const qE=n=>{if(!n.length)return{timeOfDayPattern:{},dayOfWeekPattern:{},locationFrequency:{},symptomCorrelations:{},painTrends:{increasing:!1,averageChange:0}};const e=n.reduce((c,d)=>{const h=`${new Date(d.timestamp).getHours().toString().padStart(2,"0")}:00`;return c[h]=(c[h]||0)+d.baselineData.pain,c},{}),t=n.reduce((c,d)=>{const u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=new Date(d.timestamp).getDay(),m=u[h];return c[m]=(c[m]||0)+d.baselineData.pain,c},{}),s=n.reduce((c,d)=>(d.baselineData.locations?.forEach(u=>{c[u]=(c[u]||0)+1}),c),{}),i=n.reduce((c,d)=>(d.baselineData.symptoms?.forEach(u=>{c[u]=(c[u]||0)+d.baselineData.pain}),c),{}),r=[...n].sort((c,d)=>new Date(c.timestamp).getTime()-new Date(d.timestamp).getTime()),a=r.slice(1).map((c,d)=>c.baselineData.pain-r[d].baselineData.pain),o=a.reduce((c,d)=>c+d,0)/a.length||0;return{timeOfDayPattern:e,dayOfWeekPattern:t,locationFrequency:s,symptomCorrelations:i,painTrends:{increasing:o>0,averageChange:o}}},$p=1440*60*1e3,bl=n=>Math.round(n*10)/10,Eu=(n,e,t)=>Math.min(Math.max(n,e),t);function Iu(n){return n.length?n.reduce((t,s)=>t+s.baselineData.pain,0)/n.length:null}function VE(n,e){const s=Date.now()-e*$p;return n.filter(i=>new Date(i.timestamp).getTime()>=s)}function HE(n,e,t){const s=Date.now(),i=s-e*$p,r=s-t*$p;return n.filter(a=>{const o=new Date(a.timestamp).getTime();return o<i&&o>=r})}function GE(n){const e={morning:{key:"morning",label:"Morning",description:"5:00 – 11:59",totalPain:0,count:0},afternoon:{key:"afternoon",label:"Afternoon",description:"12:00 – 16:59",totalPain:0,count:0},evening:{key:"evening",label:"Evening",description:"17:00 – 21:59",totalPain:0,count:0},night:{key:"night",label:"Night",description:"22:00 – 4:59",totalPain:0,count:0}};return n.forEach(t=>{const s=new Date(t.timestamp).getHours(),i=t.baselineData.pain;Number.isNaN(s)||(s>=5&&s<12?(e.morning.totalPain+=i,e.morning.count+=1):s>=12&&s<17?(e.afternoon.totalPain+=i,e.afternoon.count+=1):s>=17&&s<22?(e.evening.totalPain+=i,e.evening.count+=1):(e.night.totalPain+=i,e.night.count+=1))}),Object.values(e)}function YE(n){const e=new Map;return n.forEach(t=>{t.triggers?.forEach(s=>{const i=s.trim().toLowerCase();if(!i)return;const r=e.get(i);r?(r.count+=1,r.totalPain+=t.baselineData.pain):e.set(i,{count:1,totalPain:t.baselineData.pain})})}),Array.from(e.entries()).map(([t,s])=>({trigger:t,count:s.count,averagePain:s.totalPain/s.count}))}function Ru(n){return n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function ZE(n,e={}){if(!n.length)return[{id:"no-data",title:"Start your insight journey",summary:"Once you add a few pain entries, we will highlight gentle patterns to support your care plan.",tone:"observation",confidence:.2}];const t=[...n].sort((C,N)=>new Date(C.timestamp).getTime()-new Date(N.timestamp).getTime()),s=e.allEntries&&e.allEntries.length>n.length?[...e.allEntries].sort((C,N)=>new Date(C.timestamp).getTime()-new Date(N.timestamp).getTime()):t,i=VE(t,7),r=HE(t,7,14),a=Iu(i),o=Iu(r),c=Iu(s)??Iu(t)??0,d=o??c,u=a!==null&&d!==null?bl(a-d):0,h={id:"pain-trend",title:"Pain momentum check-in",summary:"",tone:"observation",confidence:Eu((i.length+(r.length||0))/14,.25,.9),metricLabel:"7-day average",metricValue:a!==null?`${bl(a)}/10`:void 0};a===null?h.summary="Not enough recent entries to compare weeks yet—each note you add uncloses richer guidance.":u<=-.4?(h.summary=`Pain levels eased about ${Math.abs(u).toFixed(1)} points compared to earlier weeks. Notice what supported you and celebrate the care you offered yourself.`,h.tone="celebration"):u>=.4?(h.summary=`Pain has risen roughly ${u.toFixed(1)} points over the past week. Consider jotting triggers or pacing ideas so we can watch for supportive adjustments.`,h.tone="gentle-nudge"):h.summary="Pain levels are holding steady week over week. Keep noting small shifts—the steadiness itself is valuable information.";const f=GE(t).filter(C=>C.count>0),y={id:"time-of-day",title:"Time-of-day pattern spotlight",summary:"",tone:"observation",confidence:.3};if(f.length<2)y.summary="Keep logging at different times of day and we will gently surface when your body feels the most taxed or supported.";else{const C=f.map(M=>({...M,average:M.totalPain/M.count}));C.sort((M,T)=>T.average-M.average);const N=C[0],P=C[C.length-1],L=bl(N.average-P.average);y.metricLabel=`${N.label} average`,y.metricValue=`${bl(N.average)}/10`,y.confidence=Eu(N.count/t.length+.2,.35,.85),L>=.5?(y.summary=`${N.label} entries trend about ${L.toFixed(1)} points higher than ${P.label.toLowerCase()} notes. Planning a gentle buffer around ${N.label.toLowerCase()} could soften the load.`,y.tone="gentle-nudge"):y.summary=`${N.label} currently edges out other times by a tiny margin. Continue noticing what helps across the day—we will highlight any stronger shifts.`}const x=YE(t),v={id:"trigger-focus",title:"Trigger check-in",summary:"",tone:"observation",confidence:.25};if(!x.length)v.summary="No repeating triggers are standing out yet. When you notice one, jot it down so we can gently connect the dots for you.";else{x.sort((k,z)=>z.count-k.count||z.averagePain-k.averagePain);const C=x.reduce((k,z)=>k+z.count,0),N=x[0],P=x[1];v.metricLabel="Most noted trigger",v.metricValue=Ru(N.trigger),v.confidence=Eu(N.count/Math.max(t.length,1)+.2,.35,.9);const L=bl(N.averagePain),M=Math.round(N.count/C*100),T=P?` ${Ru(P.trigger)} also showed up ${P.count} times.`:"";L>=6?(v.summary=`${Ru(N.trigger)} appears in about ${M}% of entries and averages around ${L}/10 pain. Preparing extra recovery supports when it is present may help.${T}`,v.tone="gentle-nudge"):v.summary=`${Ru(N.trigger)} is the most common note so far, yet pain stays near ${L}/10 on average. Keep capturing moments when it feels easier too so we can balance the picture.${T}`}const w=[h,y,v],j=qE(t);if(j.painTrends&&Number.isFinite(j.painTrends.averageChange)){const C=bl(j.painTrends.averageChange);Math.abs(C)>=.6&&w.push({id:"overall-shift",title:"Overall shift alert",summary:C>0?"Recent entries suggest a steady upward climb in pain. Pairing pacing breaks with grounding practices could cushion the lift.":"Pain entries lean downward overall—a meaningful signal that your care routines are helping.",tone:C>0?"gentle-nudge":"celebration",confidence:Eu(Math.abs(C)/2+.3,.35,.85)})}return w}const KE=n=>Math.min(Math.max(n,0),1);function Oc({title:n,value:e,change:t,icon:s,className:i,tooltip:r,subtitle:a}){const o=t?.trend==="down"?"success":t?.trend==="up"?"warning":"default",c=t?.trend==="up"?"up":t?.trend==="down"?"down":"neutral";return l.jsxs("div",{className:i,children:[l.jsx(C_,{title:n,value:e,change:t?{value:Math.abs(t.value),label:t.label}:void 0,icon:s,trend:c,variant:o}),r&&l.jsx("div",{className:"text-xs text-muted-foreground mt-2 flex items-center space-x-2",children:l.jsx(q5,{content:r,children:l.jsxs("span",{className:"inline-flex items-center",children:[l.jsx(Md,{className:"h-3 w-3 mr-1"}),r]})})}),a&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:a})]})}function XE({entries:n,allEntries:e,className:t}){const[s,i]=W.useState("overview"),[r,a]=W.useState(!1),[o,c]=W.useState(null),d=W.useMemo(()=>{const N=n??[],P=e&&e.length>0?e:N,L=Fo(new Date),M=new Date(L);M.setDate(M.getDate()-6);let T=0,k=0,z=0,_=0;const E=[0,0,0,0],$=new Map;N.forEach(D=>{const V=D.baselineData.pain;T+=V;const ne=Fo(D.timestamp).getTime();ch(D.timestamp,L)&&(_+=1),ne>=M.getTime()&&(k+=V,z+=1);const ae=$.get(ne);ae?(ae.sum+=V,ae.count+=1):$.set(ne,{sum:V,count:1}),V<=2?E[0]+=1:V<=5?E[1]+=1:V<=8?E[2]+=1:E[3]+=1});const I=N.length>0?T/N.length:0,J=z>0?k/z:0,se=P.reduce((D,V)=>D+V.baselineData.pain,0),oe=P.length>0?se/P.length:null,F=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),he=Array.from({length:7},(D,V)=>{const Z=new Date(M);Z.setDate(M.getDate()+V);const ne=Z.getTime(),ae=$.get(ne);return{label:F.format(Z),avg:ae?Math.round(ae.sum/ae.count*10)/10:null,count:ae?.count??0}}),ke=N.slice().sort((D,V)=>new Date(V.timestamp).getTime()-new Date(D.timestamp).getTime()).slice(0,5).map(D=>{const V=D;return{id:D.id,pain:D.baselineData.pain,timestamp:D.timestamp,symptoms:Array.isArray(D.baselineData.symptoms)?D.baselineData.symptoms:[],qualityOfLife:V.qualityOfLife??null}});let ue=null;if(oe!==null&&N.length>0){const D=(I-oe)*10,V=Math.round(Math.abs(D)*10)/10;V>=1&&(ue={value:V,label:"vs lifetime average",trend:D>0?"up":"down"})}return{totalEntries:P.length,averagePain:Vt(Number(I),1),overallAverage:oe!==null?Vt(Number(oe),1):void 0,todayEntries:_,weeklyAverage:Vt(Number(J),1),painTrend:ue,recentActivity:ke,painDistribution:[{label:"Mild",data:[E[0]]},{label:"Moderate",data:[E[1]]},{label:"Severe",data:[E[2]]},{label:"Extreme",data:[E[3]]}],weeklyTrend:he}},[n,e]),u=d.weeklyTrend.some(N=>N.count>0),h=W.useMemo(()=>ZE(n,{allEntries:e}),[n,e]),m=W.useMemo(()=>({celebration:{icon:l.jsx(Do,{className:"h-4 w-4 text-emerald-500","aria-hidden":"true"}),accent:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"},"gentle-nudge":{icon:l.jsx(Pj,{className:"h-4 w-4 text-amber-500","aria-hidden":"true"}),accent:"bg-amber-500/10 text-amber-600 border-amber-400/30"},observation:{icon:l.jsx(Gh,{className:"h-4 w-4 text-sky-500","aria-hidden":"true"}),accent:"bg-sky-500/10 text-sky-600 border-sky-400/30"}}),[]),f=W.useMemo(()=>{const N=new Date().getHours();return N<12?"Good morning":N<18?"Good afternoon":"Good evening"},[]),y=W.useMemo(()=>n.length===0?"Let's capture your first entry whenever you're ready.":d.todayEntries===0?"No entries yet today—take a mindful moment to record how you feel.":Number(d.weeklyAverage)<=4?"Great job staying ahead of your pain patterns this week.":"Keep observing the shifts—small notes today help tomorrow’s insights.",[n.length,d.todayEntries,d.weeklyAverage]),x=W.useMemo(()=>[{label:"Total entries logged",value:d.totalEntries,icon:l.jsx(es,{className:"h-4 w-4","aria-hidden":"true"})},{label:"Weekly average",value:`${d.weeklyAverage}/10`,icon:l.jsx(Fn,{className:"h-4 w-4","aria-hidden":"true"})},{label:"Today's entries",value:d.todayEntries,icon:l.jsx(pr,{className:"h-4 w-4","aria-hidden":"true"})}],[d.totalEntries,d.weeklyAverage,d.todayEntries]),v=W.useMemo(()=>{if(d.recentActivity.length===0)return"Awaiting first entry";const N=d.recentActivity[0]?.timestamp;if(!N)return"Awaiting first entry";try{return new Date(N).toLocaleString()}catch{return"Recently updated"}},[d.recentActivity]),w=Ge.useCallback(async()=>{try{a(!0),c("Preparing CSV export...");const N=await va(()=>import("./exportCsv-Dmvr2UaE.js"),[]),P=N.entriesToCsv(n.map(L=>({id:L.id,timestamp:L.timestamp,pain:L.baselineData.pain,notes:L.notes||""})));N.downloadCsv(`pain-entries-${new Date().toISOString().slice(0,10)}.csv`,P),c("CSV export ready. Download starting.")}catch(N){c("CSV export failed."),console.error("Export failed",N)}finally{a(!1),setTimeout(()=>c(null),3e3)}},[n]);function j(N){return N<=2?"text-success bg-success-bg":N<=5||N<=8?"text-warning bg-warning-bg":"text-destructive bg-error-bg"}function C(N){return N<=2?l.jsx(io,{className:"h-4 w-4 text-success","aria-hidden":"true"}):N<=5?l.jsx(ba,{className:"h-4 w-4 text-warning","aria-hidden":"true"}):N<=8?l.jsx(wa,{className:"h-4 w-4 text-warning","aria-hidden":"true"}):l.jsx(Dd,{className:"h-4 w-4 text-destructive","aria-hidden":"true"})}return l.jsxs("div",{className:Ye("dashboard-container space-y-8",t),style:{paddingTop:"12px"},children:[l.jsx(zE,{active:s,onChange:N=>i(N)}),l.jsx(L_,{type:"slideUp",duration:450,children:l.jsxs("section",{className:Ye("relative overflow-hidden rounded-3xl border border-border/40 px-6 py-8 sm:px-10 sm:py-10",ua.subtleLight,"dark:bg-gradient-to-br dark:from-gray-950 dark:via-blue-950/80 dark:to-purple-950 shadow-[0_35px_90px_-60px_rgba(59,130,246,0.65)]"),children:[l.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-30 mix-blend-screen","aria-hidden":"true",style:{backgroundImage:"radial-gradient(circle at 15% 20%, rgba(59,130,246,0.35), transparent 45%), radial-gradient(circle at 85% 30%, rgba(147,51,234,0.35), transparent 55%), radial-gradient(circle at 50% 80%, rgba(6,182,212,0.2), transparent 60%)"}}),l.jsxs("div",{className:"relative z-10 flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"space-y-4 max-w-2xl",children:[l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/60 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-primary shadow-sm backdrop-blur-md dark:bg-white/10 dark:text-primary-foreground",children:[l.jsx(Do,{className:"h-4 w-4","aria-hidden":"true"}),"Empathy-driven insights"]}),l.jsxs("h2",{className:Ye("text-3xl sm:text-4xl font-bold leading-tight",OE.primary),children:[f,", let's review your progress"]}),l.jsx("p",{className:"text-base text-muted-foreground max-w-xl",children:y}),l.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(N=>l.jsxs("div",{className:Ye("group inline-flex items-center gap-3 rounded-2xl border border-white/60 bg-white/70 px-4 py-3 text-sm shadow-sm backdrop-blur-md transition-all duration-300","dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15 hover:-translate-y-1 hover:shadow-xl"),children:[l.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10 text-primary shadow-inner",children:N.icon}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:N.label}),l.jsx("span",{className:"text-lg font-semibold text-foreground",children:N.value})]})]},N.label))})]}),l.jsxs("div",{className:"flex w-full max-w-xs flex-col items-start gap-3 md:items-end",children:[l.jsxs(Je,{type:"button",variant:"default",size:"lg",onClick:w,disabled:r,className:"relative inline-flex items-center justify-center gap-2 rounded-full bg-gradient-to-r from-primary via-indigo-500 to-purple-500 px-6 py-3 text-primary-foreground shadow-[0_20px_60px_-25px_rgba(59,130,246,0.9)] transition-transform duration-200 hover:scale-[1.02] focus-visible:ring-2 focus-visible:ring-offset-2","aria-label":"Export currently filtered entries as CSV",children:[l.jsx(pd,{className:"h-5 w-5","aria-hidden":"true"}),l.jsx("span",{children:r?"Preparing export…":"Export CSV"})]}),l.jsxs(ts,{variant:"outline",className:"rounded-full border-primary/30 bg-primary/10 px-3 py-1 text-xs font-medium text-primary shadow-sm",children:["Last entry: ",v]}),l.jsx("p",{className:"text-xs text-muted-foreground max-w-[18rem] text-left md:text-right",children:"Exports are encrypted locally so you control what leaves your device."})]})]})]})}),l.jsx("div",{"aria-live":"polite",className:"sr-only",role:"status",children:o}),o&&l.jsx("div",{className:"rounded-2xl border border-primary/30 bg-primary/10 px-4 py-3 text-sm text-primary shadow-sm transition-all",children:o}),n.length>0&&l.jsx("div",{children:l.jsx(Ge.Suspense,{fallback:l.jsx(mg,{text:"Loading predictive insights..."}),children:Ge.createElement(Ge.lazy(()=>va(()=>import("./PredictivePanel-OAJII16W.js"),__vite__mapDeps([4,1,2,3]))),{entries:n})})}),l.jsxs(Al,{variant:"glass",hoverable:!0,animated:!0,className:"border border-border/40 bg-card/70 backdrop-blur-xl",children:[l.jsx(Uc,{icon:l.jsx(Do,{className:"h-5 w-5","aria-hidden":"true"}),children:l.jsx(qc,{gradient:!0,children:"AI insight highlights"})}),l.jsx(Vc,{children:l.jsx(Ku,{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",delay:80,children:h.map(N=>{const P=m[N.tone]??m.observation,L=Math.round(KE(N.confidence)*100);return l.jsxs("div",{className:Ye("flex flex-col justify-between rounded-2xl border p-4 shadow-sm transition-all duration-200 hover:-translate-y-1 hover:shadow-lg","bg-white/80 dark:bg-slate-900/60 backdrop-blur",P.accent),children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-white/50 shadow-inner dark:bg-slate-950/70",children:P.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-foreground",children:N.title}),N.metricLabel&&N.metricValue&&l.jsxs("p",{className:"mt-1 text-xs font-medium text-muted-foreground",children:[l.jsx("span",{className:"text-foreground font-semibold",children:N.metricValue}),l.jsx("span",{className:"ml-1 text-muted-foreground",children:N.metricLabel})]})]})]}),l.jsxs(ts,{variant:"secondary",className:"rounded-full text-[11px] font-medium",children:["Confidence ~",L,"%"]})]}),l.jsx("p",{className:"mt-3 text-sm text-muted-foreground leading-relaxed",children:N.summary}),N.detail&&l.jsx("p",{className:"mt-2 text-xs text-muted-foreground/80",children:N.detail})]},N.id)})})})]}),s==="overview"?l.jsxs(l.Fragment,{children:[l.jsxs(Ku,{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-5",delay:90,children:[l.jsxs("div",{className:"space-y-2 transition-all duration-200 hover:-translate-y-1",children:[l.jsx(Oc,{title:"Total Entries",value:d.totalEntries,icon:l.jsx(es,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(q5,{content:"All-time total (not filtered)",children:l.jsxs("span",{className:"inline-flex items-center gap-1",children:[l.jsx(Md,{className:"h-3 w-3","aria-hidden":"true"}),"All-time total"]})}),l.jsx("span",{"aria-hidden":"true",children:"•"}),l.jsxs("span",{children:[n.length," currently filtered"]})]})]}),l.jsxs("div",{className:"space-y-2 transition-all duration-200 hover:-translate-y-1",children:[l.jsx(Oc,{title:"Average Pain",value:`${d.averagePain}/10`,change:d.painTrend||void 0,icon:l.jsx(_s,{className:"h-6 w-6"})}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Pain levels averaged across the selected timeframe."})]}),l.jsxs("div",{className:"space-y-2 transition-all duration-200 hover:-translate-y-1",children:[l.jsx(Oc,{title:"Overall Average",value:`${d.overallAverage??d.averagePain}/10`,icon:l.jsx(ba,{className:"h-6 w-6"})}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Compares filtered data to your lifetime average."})]}),l.jsxs("div",{className:"space-y-2 transition-all duration-200 hover:-translate-y-1",children:[l.jsx(Oc,{title:"Today's Entries",value:d.todayEntries,icon:l.jsx(pr,{className:"h-6 w-6"})}),l.jsx("p",{className:"text-xs text-muted-foreground",children:d.todayEntries===0?"No entries logged yet today.":"Entries captured so far today."})]}),l.jsxs("div",{className:"space-y-2 transition-all duration-200 hover:-translate-y-1",children:[l.jsx(Oc,{title:"Weekly Average",value:`${d.weeklyAverage}/10`,icon:l.jsx(Fn,{className:"h-6 w-6"})}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Past 7 days including today. Track shifts over time."})]})]}),l.jsxs(Ku,{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",delay:120,children:[l.jsxs(Al,{variant:"glass",hoverable:!0,animated:!0,className:"relative overflow-hidden border border-border/40 bg-card/70 backdrop-blur-xl",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-40 opacity-25","aria-hidden":"true",style:{background:"radial-gradient(circle at 30% 20%, rgba(59,130,246,0.45), transparent 60%)"}}),l.jsx(Uc,{icon:l.jsx(es,{className:"h-5 w-5"}),children:l.jsx(qc,{gradient:!0,children:"Pain Distribution"})}),l.jsx(Vc,{children:n.length>0?l.jsx(pa,{data:{labels:d.painDistribution.map(N=>N.label),datasets:[{label:"Entries",data:d.painDistribution.map(N=>N.data[0]),backgroundColor:d.painDistribution.map(N=>N.data[0]===0?"rgba(148,163,184,0.15)":"rgba(59,130,246,0.35)"),borderColor:d.painDistribution.map(N=>N.data[0]===0?"rgba(148,163,184,0.3)":"rgba(59,130,246,0.7)"),borderWidth:2,borderRadius:12}]},type:"bar",height:200,config:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{intersect:!1,backgroundColor:"rgba(15,23,42,0.85)",borderColor:"rgba(59,130,246,0.35)",borderWidth:1}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(148,163,184,0.9)"}},y:{beginAtZero:!0,grid:{color:"rgba(148,163,184,0.15)"},ticks:{stepSize:1,color:"rgba(148,163,184,0.9)"}}}}}):l.jsx("div",{className:"flex h-48 items-center justify-center text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(es,{className:"mx-auto mb-2 h-12 w-12 opacity-50","aria-hidden":"true"}),l.jsx("p",{children:"No data available"}),l.jsx("p",{className:"text-sm",children:"Start tracking to see your pain distribution"})]})})})]}),l.jsxs(Al,{variant:"glass",hoverable:!0,animated:!0,className:"border border-border/40 bg-card/70 backdrop-blur-xl",children:[l.jsx(Uc,{icon:l.jsx(Fn,{className:"h-5 w-5"}),children:l.jsx(qc,{gradient:!0,children:"Weekly Trend"})}),l.jsx(Vc,{children:n.length>0?u?l.jsx(pa,{data:{labels:d.weeklyTrend.map(N=>N.label),datasets:[{label:"Average Pain",data:d.weeklyTrend.map(N=>N.avg),borderColor:xn("color-primary"),backgroundColor:kh("color-primary",.18),fill:!0,tension:.35,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:xn("color-primary"),yAxisID:"y"},{label:"Entry Count",data:d.weeklyTrend.map(N=>N.count),borderColor:xn("color-accent"),backgroundColor:kh("color-accent",.12),fill:!0,tension:.3,borderDash:[6,4],yAxisID:"y1"}]},type:"line",height:200,config:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"rgba(148,163,184,0.9)",usePointStyle:!0}},tooltip:{intersect:!1,mode:"index",backgroundColor:"rgba(15,23,42,0.85)",borderColor:"rgba(147,51,234,0.35)",borderWidth:1}},scales:{y:{min:0,max:10,ticks:{stepSize:1,color:"rgba(148,163,184,0.9)"},grid:{color:"rgba(148,163,184,0.15)"},title:{display:!0,text:"Pain Level",color:"rgba(148,163,184,0.9)"}},y1:{min:0,ticks:{stepSize:1,color:"rgba(148,163,184,0.9)"},grid:{display:!1},position:"right",title:{display:!0,text:"Entries",color:"rgba(148,163,184,0.9)"}},x:{grid:{display:!1},ticks:{color:"rgba(148,163,184,0.9)"}}}}}):l.jsx("div",{className:"flex h-48 items-center justify-center text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Fn,{className:"mx-auto mb-2 h-12 w-12 opacity-50","aria-hidden":"true"}),l.jsx("p",{children:"No entries this week"}),l.jsx("p",{className:"text-sm",children:"Track pain over time to see trends"})]})}):l.jsx("div",{className:"flex h-48 items-center justify-center text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Fn,{className:"mx-auto mb-2 h-12 w-12 opacity-50","aria-hidden":"true"}),l.jsx("p",{children:"No trend data"}),l.jsx("p",{className:"text-sm",children:"Track pain over time to see trends"})]})})})]})]}),l.jsxs(Al,{variant:"glass",hoverable:!0,animated:!0,children:[l.jsx(Uc,{icon:l.jsx(Ur,{className:"h-5 w-5"}),children:l.jsx(qc,{children:"Recent Activity"})}),l.jsx(Vc,{children:d.recentActivity.length>0?l.jsx("div",{className:"space-y-4",children:d.recentActivity.map(N=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[C(N.pain),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"font-medium",children:["Pain Level: ",N.pain,"/10"]}),l.jsx("span",{className:Ye("px-2 py-1 rounded-full text-xs font-medium",j(N.pain)),children:N.pain<=2?"Mild":N.pain<=5?"Moderate":N.pain<=8?"Severe":"Extreme"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(N.timestamp).toLocaleString()}),N.symptoms&&N.symptoms.length>0&&l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Symptoms: ",N.symptoms.join(", ")]})]})]}),N.qualityOfLife&&l.jsxs("div",{className:"text-right text-sm",children:[l.jsxs("div",{children:["Sleep: ",N.qualityOfLife.sleepQuality,"/10"]}),l.jsxs("div",{children:["Mood: ",N.qualityOfLife.moodImpact,"/10"]})]})]},N.id))}):l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Ur,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No recent activity"}),l.jsx("p",{className:"text-sm",children:"Your recent pain entries will appear here"})]})})]})]}):s==="charts"?l.jsx($E,{entries:n,allEntries:e}):l.jsx(UE,{entries:n})]})}const QE=["head","neck","shoulders","upper back","lower back","chest","abdomen","hips","knees","ankles","feet","arms","elbows","wrists","hands","right leg","left leg","right foot","left foot","right toes","left toes","outer right leg","outer left leg","inner right leg","inner left leg"],JE=["sharp","dull","aching","burning","tingling","numbness","stiffness","weakness","spasm","swelling","radiating","throbbing","pins and needles","electric shock sensation","hypersensitivity","reduced sensation","muscle weakness","loss of reflexes","cramping"],Fc={BASIC:["walking","standing","sitting","bending","lifting","reaching","climbing stairs"],HOUSEHOLD:["cooking","cleaning","laundry","shopping","yard work","home maintenance"],WORK_RELATED:["typing","writing","driving","operating machinery","physical labor","prolonged sitting","prolonged standing"],SOCIAL:["socializing","dining out","attending events","traveling","exercising","hobbies","sports"],MOBILITY_AIDS:["cane","walker","wheelchair","crutches","braces","orthopedic shoes","mobility scooter"]};function V5({pain:n,locations:e,symptoms:t,onChange:s}){const i=d=>{const u=e.includes(d)?e.filter(h=>h!==d):[...e,d];s({locations:u})},r=d=>{const u=t.includes(d)?t.filter(h=>h!==d):[...t,d];s({symptoms:u})},a=(d,u)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),u())},o=d=>d<=3?"success":d<=6?"warning":"destructive",c=d=>d===0?"No pain":d<=3?"Mild pain":d<=6?"Moderate pain":d<=8?"Severe pain":"Worst possible pain";return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"pain-assessment-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(ba,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{id:"pain-assessment-title",className:"text-xl font-semibold text-foreground",children:"Pain Assessment"})]}),l.jsx(We,{variant:"elevated",className:"p-6",children:l.jsx(Ve,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"pain-level",className:"text-sm font-medium text-foreground",children:"Current Pain Level"}),l.jsxs(ts,{variant:o(n),className:"text-xs",children:[n,"/10 - ",c(n)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"pain-level",type:"range",min:"0",max:"10",value:n,onChange:d=>s({pain:parseInt(d.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Pain level: ${n} out of 10 - ${c(n)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No pain"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Moderate"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Worst"]})]})]}),l.jsx("div",{className:"flex space-x-1 mt-4",children:[...Array(11)].map((d,u)=>l.jsx("button",{onClick:()=>s({pain:u}),className:`flex-1 h-8 rounded transition-all duration-200 ${u===n?"bg-primary text-primary-foreground shadow-md scale-110":u<=n?"bg-primary/20 hover:bg-primary/30":"bg-muted hover:bg-muted/80"}`,"aria-label":`Set pain level to ${u}`,children:l.jsx("span",{className:"text-xs font-medium",children:u})},u))})]})})}),l.jsx(We,{variant:"outlined",className:"p-6",children:l.jsx(Ve,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Zj,{className:"h-4 w-4 text-primary"}),l.jsx("label",{id:"locations-label",className:"text-sm font-medium text-foreground",children:"Pain Locations"}),e.length>0&&l.jsxs(ts,{variant:"secondary",className:"text-xs",children:[e.length," selected"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Select all areas where you're experiencing pain"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:QE.map(d=>l.jsx(Je,{onClick:()=>i(d),onKeyPress:u=>a(u,()=>i(d)),variant:e.includes(d)?"default":"outline",size:"sm",className:"justify-start h-auto py-2 px-3 text-left",role:"checkbox","aria-checked":e.includes(d),"aria-label":`Pain location: ${d}`,children:d},d))})]})})}),l.jsx(We,{variant:"outlined",className:"p-6",children:l.jsx(Ve,{className:"p-0",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(wa,{className:"h-4 w-4 text-primary"}),l.jsx("label",{id:"symptoms-label",className:"text-sm font-medium text-foreground",children:"Associated Symptoms"}),t.length>0&&l.jsxs(ts,{variant:"secondary",className:"text-xs",children:[t.length," selected"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Select any symptoms you're experiencing along with the pain"}),l.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:JE.map(d=>l.jsx(Je,{onClick:()=>r(d),onKeyPress:u=>a(u,()=>r(d)),variant:t.includes(d)?"default":"outline",size:"sm",className:"justify-start h-auto py-2 px-3 text-left",role:"checkbox","aria-checked":t.includes(d),"aria-label":`Symptom: ${d}`,children:d},d))})]})})})]})}function H5({worseningSince:n,newLimitations:e,onChange:t}){return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Comparison to Previous"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pain Worsening Since"}),l.jsx("input",{type:"date",value:n,onChange:s=>t({worseningSince:s.target.value}),className:"w-full border rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Limitations"}),l.jsx("textarea",{value:e.join(`
`),onChange:s=>t({newLimitations:s.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each new limitation on a new line"})]})]})}function G5({limitedActivities:n,mobilityAids:e,onChange:t}){const s=[...Fc.BASIC,...Fc.HOUSEHOLD,...Fc.WORK_RELATED,...Fc.SOCIAL];return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"limited-activities",className:"block text-sm font-medium text-gray-700 mb-2",children:"Limited Activities"}),l.jsx("select",{id:"limited-activities",multiple:!0,value:n,onChange:i=>{const r=Array.from(i.target.selectedOptions,a=>a.value);t({limitedActivities:r})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:4,children:s.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mobility-aids",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobility Aids Used"}),l.jsx("select",{id:"mobility-aids",multiple:!0,value:e,onChange:i=>{const r=Array.from(i.target.selectedOptions,a=>a.value);t({mobilityAids:r})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:4,children:Fc.MOBILITY_AIDS?.map(i=>l.jsx("option",{value:i,children:i},i))})]})]})}const id=({label:n,error:e,hint:t,id:s,className:i="",...r})=>{const a=s||`input-${n.replace(/\s+/g,"-").toLowerCase()}`,o={borderColor:"rgb(var(--color-input))",boxShadow:"none"},c={outline:"none",boxShadow:"0 0 0 3px rgba(var(--color-ring), 0.18)",borderColor:"rgb(var(--color-ring))"},d=e?{borderColor:"rgb(var(--color-destructive))"}:{};return l.jsxs("div",{className:`space-y-1 ${i}`,children:[l.jsx("label",{htmlFor:a,className:"block text-sm font-medium",style:{color:"rgb(var(--color-foreground))"},children:n}),l.jsx("input",{id:a,...e?{"aria-invalid":!0}:{},"aria-describedby":e?`${a}-error`:t?`${a}-hint`:void 0,className:"mt-1 block w-full rounded-md shadow-sm",style:{...o,...d},onFocus:u=>Object.assign(u.target.style,c),onBlur:u=>Object.assign(u.target.style,o,d),...r}),t&&!e&&l.jsx("p",{id:`${a}-hint`,style:{color:"rgb(var(--color-muted-foreground))"},className:"text-xs",children:t}),e&&l.jsx("p",{id:`${a}-error`,className:"text-xs",role:"alert",style:{color:"rgb(var(--color-destructive))"},children:e})]})},e8={success:{backgroundColor:"rgb(var(--color-pain-none))",borderColor:"rgb(var(--color-border))",color:"rgb(var(--color-foreground))"},error:{backgroundColor:"rgb(var(--color-pain-extreme))",borderColor:"rgb(var(--color-border))",color:"rgb(var(--color-primary-foreground))"},info:{backgroundColor:"rgb(var(--color-chart-series-1) / 0.12)",borderColor:"rgb(var(--color-border))",color:"rgb(var(--color-foreground))"},warning:{backgroundColor:"rgb(var(--color-pain-moderate))",borderColor:"rgb(var(--color-border))",color:"rgb(var(--color-foreground))"}},zg=({tone:n="info",children:e})=>{const t=e8[n];return l.jsx("div",{role:"status","aria-live":"polite",className:"p-3 rounded-md border text-sm",style:t,children:e})},t8="inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",n8={primary:"",secondary:"border",ghost:"",destructive:"",outline:"border",default:"",success:"",warning:"",gradient:""},s8={primary:{backgroundColor:"rgb(var(--color-primary))",color:"rgb(var(--color-primary-foreground))"},secondary:{backgroundColor:"rgb(var(--color-card))",color:"rgb(var(--color-card-foreground))",borderColor:"rgb(var(--color-border))"},ghost:{backgroundColor:"transparent",color:"rgb(var(--color-primary))"},destructive:{backgroundColor:"rgb(var(--color-destructive))",color:"rgb(var(--color-destructive-foreground))"},outline:{backgroundColor:"transparent",color:"rgb(var(--color-foreground))",borderColor:"rgb(var(--color-border))"},default:{backgroundColor:"rgb(var(--color-primary))",color:"rgb(var(--color-primary-foreground))"},success:{backgroundColor:"rgb(var(--color-secondary))",color:"rgb(var(--color-secondary-foreground))"},warning:{backgroundColor:"rgb(var(--color-accent))",color:"rgb(var(--color-accent-foreground))"},gradient:{background:"linear-gradient(90deg, rgb(var(--color-primary)), rgb(var(--color-accent)))",color:"rgb(var(--color-primary-foreground))"}},i8={sm:"h-9 px-3 text-sm",md:"h-11 px-4 text-sm",lg:"h-12 px-5 text-base"},_d=Ge.forwardRef(({variant:n="primary",size:e="md",className:t="",children:s,disabled:i,leftIcon:r,rightIcon:a,...o},c)=>{const d=`${t8} ${n8[n]} ${i8[e]} min-w-[44px] ${t}`.trim(),u={...s8[n]||{},...o.style};return l.jsxs("button",{ref:c,className:d,style:u,disabled:i,"aria-disabled":i||void 0,...o,children:[r&&l.jsx("span",{className:"mr-2 inline-flex items-center",children:r}),s,a&&l.jsx("span",{className:"ml-2 inline-flex items-center",children:a})]})});_d.displayName="Button";function Y5({current:n,changes:e,effectiveness:t,onChange:s}){const i=(o,c,d)=>{const u=[...n];u[o]={...u[o],[c]:d},s({current:u})},r=()=>{s({current:[...n,{name:"",dosage:"",frequency:"",effectiveness:""}]})},a=o=>{s({current:n.filter((c,d)=>d!==o)})};return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"medications-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"medications",children:"💊"}),l.jsx("h3",{id:"medications-title",className:"text-xl font-semibold text-foreground",children:"Medications"})]}),l.jsxs("div",{className:"space-y-4",children:[n.map((o,c)=>l.jsx(We,{variant:"outlined",className:"p-4",children:l.jsxs(Ve,{className:"p-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h4",{className:"font-medium text-foreground",children:["Medication #",c+1]}),l.jsx(_d,{onClick:()=>a(c),variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive/80","aria-label":`Remove medication ${c+1}`,children:"Remove"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(id,{label:"Name",value:o.name,onChange:d=>i(c,"name",d.target.value),placeholder:"e.g., Ibuprofen"}),l.jsx(id,{label:"Dosage",value:o.dosage,onChange:d=>i(c,"dosage",d.target.value),placeholder:"e.g., 200mg"}),l.jsx(id,{label:"Frequency",value:o.frequency,onChange:d=>i(c,"frequency",d.target.value),placeholder:"e.g., Twice daily"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`effectiveness-${c}`,className:"block text-sm font-medium text-foreground",children:"Effectiveness"}),l.jsxs("select",{id:`effectiveness-${c}`,value:o.effectiveness,onChange:d=>i(c,"effectiveness",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Effectiveness of medication ${c+1}`,children:[l.jsx("option",{value:"",children:"Select effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Made Things Worse",children:"Made Things Worse"})]})]})]})]})},c)),l.jsx(_d,{type:"button",onClick:r,variant:"default",className:"w-full py-3 border-2 border-dashed border-border rounded-md text-muted-foreground hover:border-primary hover:text-primary",leftIcon:l.jsx("span",{className:"text-lg",children:"+"}),children:"Add Medication"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"medication-changes",className:"block text-sm font-medium text-foreground mb-2",children:"Recent Changes in Medications"}),l.jsx("textarea",{id:"medication-changes",value:e,onChange:o=>s({changes:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Describe any recent changes to your medication regimen...","aria-describedby":"medication-changes-hint"}),l.jsx("p",{id:"medication-changes-hint",className:"text-xs text-muted-foreground mt-1",children:"Optional: Note any changes, side effects, or adjustments"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"overall-effectiveness",className:"block text-sm font-medium text-foreground mb-2",children:"Overall Medication Effectiveness"}),l.jsxs("select",{id:"overall-effectiveness",value:t,onChange:o=>s({effectiveness:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-describedby":"overall-effectiveness-hint",children:[l.jsx("option",{value:"",children:"Select overall effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Mixed Results",children:"Mixed Results"})]}),l.jsx("p",{id:"overall-effectiveness-hint",className:"text-xs text-muted-foreground mt-1",children:"How effective has your current medication regimen been overall?"})]})]}),n.length===0&&l.jsx(zg,{tone:"info",children:"No medications recorded yet. Add your current medications above to track their effectiveness."})]})}function Z5({sleepQuality:n,moodImpact:e,socialImpact:t,onChange:s}){const i=a=>a<=3?"Poor sleep quality":a<=6?"Fair sleep quality":"Good sleep quality",r=a=>a<=3?"Minimal mood impact":a<=6?"Moderate mood impact":"Significant mood impact";return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"quality-of-life-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"quality of life",children:"😴"}),l.jsx("h3",{id:"quality-of-life-title",className:"text-xl font-semibold text-foreground",children:"Quality of Life Impact"})]}),l.jsx(We,{variant:"elevated",className:"p-6",children:l.jsx(Ve,{className:"p-0",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"sleep-quality",className:"text-sm font-medium text-foreground",children:"Sleep Quality"}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[n,"/10 - ",i(n)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"sleep-quality",type:"range",min:"0",max:"10",value:n,onChange:a=>s({sleepQuality:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Sleep quality: ${n} out of 10 - ${i(n)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No sleep"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Fair"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Excellent"]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"mood-impact",className:"text-sm font-medium text-foreground",children:"Mood Impact"}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[e,"/10 - ",r(e)]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"mood-impact",type:"range",min:"0",max:"10",value:e,onChange:a=>s({moodImpact:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer slider","aria-label":`Mood impact: ${e} out of 10 - ${r(e)}`}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground px-1",children:[l.jsxs("span",{children:["0",l.jsx("br",{}),"No impact"]}),l.jsxs("span",{children:["5",l.jsx("br",{}),"Moderate"]}),l.jsxs("span",{children:["10",l.jsx("br",{}),"Severe"]})]})]})]})]})})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{htmlFor:"social-impact",className:"block text-sm font-medium text-foreground",children:"Social Impact"}),l.jsx("textarea",{id:"social-impact",value:t.join(`
`),onChange:a=>s({socialImpact:a.target.value.split(`
`).filter(Boolean)}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Enter each social impact on a new line (e.g., 'Unable to attend social gatherings')","aria-describedby":"social-impact-hint"}),l.jsx("p",{id:"social-impact-hint",className:"text-xs text-muted-foreground",children:"How has pain affected your social life and relationships?"})]}),n===0&&e===0&&t.length===0&&l.jsx(zg,{tone:"info",children:"Quality of life metrics help track how pain affects your daily life. Consider rating your sleep quality and mood impact above."})]})}function K5({recent:n,effectiveness:e,planned:t,onChange:s}){const i=(o,c,d)=>{const u=[...n];u[o]={...u[o],[c]:d},s({recent:u})},r=()=>{s({recent:[...n,{type:"",provider:"",date:"",effectiveness:""}]})},a=o=>{s({recent:n.filter((c,d)=>d!==o)})};return l.jsxs("div",{className:"space-y-6",role:"group","aria-labelledby":"treatments-title",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",role:"img","aria-label":"treatments",children:"🏥"}),l.jsx("h3",{id:"treatments-title",className:"text-xl font-semibold text-foreground",children:"Treatments"})]}),l.jsxs("div",{className:"space-y-4",children:[n.map((o,c)=>l.jsx(We,{variant:"outlined",className:"p-4",children:l.jsxs(Ve,{className:"p-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h4",{className:"font-medium text-foreground",children:["Treatment #",c+1]}),l.jsx(_d,{onClick:()=>a(c),variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive/80","aria-label":`Remove treatment ${c+1}`,children:"Remove"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(id,{label:"Type",value:o.type,onChange:d=>i(c,"type",d.target.value),placeholder:"e.g., Physical Therapy, Massage"}),l.jsx(id,{label:"Provider",value:o.provider,onChange:d=>i(c,"provider",d.target.value),placeholder:"Healthcare provider name"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`treatment-date-${c}`,className:"block text-sm font-medium text-foreground",children:"Date"}),l.jsx("input",{id:`treatment-date-${c}`,type:"date",value:o.date,onChange:d=>i(c,"date",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Date of treatment ${c+1}`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`treatment-effectiveness-${c}`,className:"block text-sm font-medium text-foreground",children:"Effectiveness"}),l.jsxs("select",{id:`treatment-effectiveness-${c}`,value:o.effectiveness,onChange:d=>i(c,"effectiveness",d.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":`Effectiveness of treatment ${c+1}`,children:[l.jsx("option",{value:"",children:"Select effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Made Things Worse",children:"Made Things Worse"})]})]})]})]})},c)),l.jsx(_d,{type:"button",onClick:r,variant:"default",className:"w-full py-3 border-2 border-dashed border-border rounded-md text-muted-foreground hover:border-primary hover:text-primary",leftIcon:l.jsx("span",{className:"text-lg",children:"+"}),children:"Add Treatment"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"overall-treatment-effectiveness",className:"block text-sm font-medium text-foreground mb-2",children:"Overall Treatment Effectiveness"}),l.jsxs("select",{id:"overall-treatment-effectiveness",value:e,onChange:o=>s({effectiveness:o.target.value}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-describedby":"overall-treatment-effectiveness-hint",children:[l.jsx("option",{value:"",children:"Select overall effectiveness"}),l.jsx("option",{value:"Very Effective",children:"Very Effective"}),l.jsx("option",{value:"Somewhat Effective",children:"Somewhat Effective"}),l.jsx("option",{value:"Not Effective",children:"Not Effective"}),l.jsx("option",{value:"Mixed Results",children:"Mixed Results"})]}),l.jsx("p",{id:"overall-treatment-effectiveness-hint",className:"text-xs text-muted-foreground mt-1",children:"How effective have your treatments been overall?"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planned-treatments",className:"block text-sm font-medium text-foreground mb-2",children:"Planned Treatments"}),l.jsx("textarea",{id:"planned-treatments",value:t.join(`
`),onChange:o=>s({planned:o.target.value.split(`
`).filter(Boolean)}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-h-[80px] resize-vertical",rows:3,placeholder:"Enter each planned treatment on a new line","aria-describedby":"planned-treatments-hint"}),l.jsx("p",{id:"planned-treatments-hint",className:"text-xs text-muted-foreground mt-1",children:"List upcoming treatments or appointments, one per line"})]})]}),n.length===0&&l.jsx(zg,{tone:"info",children:"No treatments recorded yet. Add your recent treatments above to track their effectiveness."})]})}function X5({missedWork:n,modifiedDuties:e,workLimitations:t,onChange:s}){return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Work Impact"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days of Missed Work"}),l.jsx("input",{type:"number",min:"0",value:n,onChange:i=>s({missedWork:parseInt(i.target.value)}),className:"w-full border rounded-md p-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modified Duties"}),l.jsx("textarea",{value:e.join(`
`),onChange:i=>s({modifiedDuties:i.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each modified duty on a new line"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Limitations"}),l.jsx("textarea",{value:t.join(`
`),onChange:i=>s({workLimitations:i.target.value.split(`
`).filter(Boolean)}),className:"w-full border rounded-md p-2",rows:3,placeholder:"Enter each work limitation on a new line"})]})]})}class r8{positiveKeywords=["better","improved","good","great","healing","progress","relief","comfortable","manageable","hopeful","grateful","thankful","blessed","stronger","resilient","capable","empowered","peaceful","calm"];negativeKeywords=["pain","hurt","suffering","agony","terrible","awful","unbearable","frustrated","angry","sad","depressed","anxious","worried","scared","overwhelmed","exhausted","defeated","hopeless","alone","isolated"];neutralKeywords=["same","unchanged","stable","managing","coping","continuing","routine","regular","normal","usual","consistent","steady"];triggerKeywords=["flare","spike","increase","worse","worsening","setback","episode","attack","breakthrough","sudden","intense","severe"];analyzeText(e){const t=e.toLowerCase().split(/\s+/),s=t.filter(m=>this.positiveKeywords.some(f=>m.includes(f))).length,i=t.filter(m=>this.negativeKeywords.some(f=>m.includes(f))).length,r=t.filter(m=>this.neutralKeywords.some(f=>m.includes(f))).length,a=t.filter(m=>this.triggerKeywords.some(f=>m.includes(f))).length;let o="neutral";s>i&&s>0?o="positive":i>s&&i>0?o="negative":s>0&&i>0&&(o="mixed");const c=["very","extremely","incredibly","really","so","quite"],d=t.filter(m=>c.includes(m)).length;let u="low";a>0||d>2?u="high":(d>0||i>1)&&(u="medium");const h=Math.min((s+i+r)/Math.max(t.length/4,1),1);return{valence:o,arousal:u,keywords:t.filter(m=>this.positiveKeywords.concat(this.negativeKeywords,this.neutralKeywords).some(f=>m.includes(f))),confidence:h,triggers:a>0?t.filter(m=>this.triggerKeywords.some(f=>m.includes(f))):void 0}}}class a8{supportiveMessages=["I hear that you're going through a challenging time. Your experience is valid and important.","Thank you for sharing what you're experiencing. It takes courage to track difficult moments.","Your pain matters, and so do you. Taking time to document this shows incredible strength.","I acknowledge how hard this must be for you right now. You're not alone in this journey.","Your feelings about this experience are completely understandable and valid."];emphaticMessages=["That sounds really difficult. I want you to know that your struggle is seen and recognized.","I can sense this is a tough moment for you. Please be gentle with yourself.","What you're experiencing sounds overwhelming. You're doing the best you can.","This sounds like a particularly hard day. Remember that difficult days don't last forever.","I hear the pain in your words. Your resilience in tracking this is remarkable."];celebratoryMessages=["This sounds like positive progress! It's wonderful to hear things are improving for you.","What encouraging news! Every step forward, no matter how small, is worth celebrating.","I'm so glad to hear you're experiencing some relief. You deserve these better moments.","This improvement is a testament to your strength and perseverance. Well done!","It's beautiful to see progress in your healing journey. Keep nurturing yourself."];gentleMessages=["Thank you for taking the time to track your experience. Every entry helps build understanding.","I appreciate you sharing this with me. Your consistency in tracking is admirable.","This information helps create a clearer picture of your journey. Thank you for your openness.","Each entry you make is a step toward better understanding your patterns. Well done.","Your commitment to tracking your experience shows real dedication to your wellbeing."];generate(e){let t,s,i,r,a;switch(e.valence){case"positive":t=this.celebratoryMessages,s="celebratory",i=hg,r="text-yellow-600 bg-yellow-50 border-yellow-200",a="Would you like to note what contributed to this positive experience?";break;case"negative":e.arousal==="high"?(t=this.emphaticMessages,s="empathetic",i=Sj,r="text-blue-600 bg-blue-50 border-blue-200",a="Remember, you have support available. Would you like to review your comfort resources?"):(t=this.supportiveMessages,s="supportive",i=Oi,r="text-pink-600 bg-pink-50 border-pink-200",a="Taking care of yourself during difficult times is so important.");break;case"mixed":t=this.gentleMessages,s="gentle",i=Do,r="text-purple-600 bg-purple-50 border-purple-200",a="Complex experiences deserve gentle acknowledgment.";break;default:t=this.gentleMessages,s="gentle",i=Gl,r="text-green-600 bg-green-50 border-green-200";break}return{id:`validation-${Date.now()}`,message:t[Math.floor(Math.random()*t.length)],tone:s,icon:i,color:r,followUp:a,timestamp:new Date}}}function Q5({text:n,onValidationGenerated:e,isActive:t=!0,delay:s=2e3}){const{preferences:i}=vr(),[r,a]=W.useState(null),[o,c]=W.useState(!1),d=W.useRef(new r8),u=W.useRef(new a8),h=W.useRef(),m=W.useCallback(y=>{if(!y.trim()||y.length<10)return;const x=d.current.analyzeText(y);if(x.confidence<.2)return;const v=u.current.generate(x);a(v),c(!0),e?.(v),(x.valence!=="negative"||x.arousal!=="high")&&setTimeout(()=>c(!1),1e4)},[e]);if(W.useEffect(()=>{if(!(!t||!i.realTimeValidation))return h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(n)},s),()=>{h.current&&clearTimeout(h.current)}},[n,t,s,m,i.realTimeValidation]),!i.realTimeValidation||!r||!o)return null;const f=r.icon;return l.jsx("div",{className:`
        mt-3 p-4 rounded-lg border transition-all duration-300 ease-in-out
        ${r.color}
        ${o?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-2"}
      `,role:"alert","aria-live":"polite",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(f,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium mb-1",children:r.message}),r.followUp&&l.jsx("p",{className:"text-xs opacity-75",children:r.followUp})]}),l.jsx("button",{onClick:()=>c(!1),className:"text-xs opacity-50 hover:opacity-75 transition-opacity","aria-label":"Dismiss validation message",children:"✕"})]})})}function J5({validations:n,onClear:e}){const{preferences:t}=vr();return!t.realTimeValidation||n.length===0?null:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Recent Validation Messages"}),e&&l.jsx("button",{onClick:e,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear History"})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.slice(-5).reverse().map(s=>{const i=s.icon;return l.jsx("div",{className:`p-2 rounded text-xs border ${s.color}`,children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx(i,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{children:s.message}),l.jsx("p",{className:"text-xs opacity-50 mt-1",children:s.timestamp.toLocaleTimeString()})]})]})},s.id)})})]})}class o8{events=[];validations=[];progressEntries=[];async recordEvent(e){this.events.push({...e,timestamp:new Date})}async saveValidation(e){this.validations.push(e)}async saveProgressEntry(e){this.progressEntries.push(e)}async getValidationHistory(e=30){const t=new Date;return t.setDate(t.getDate()-e),this.validations.filter(s=>new Date(s.timestamp)>=t)}async getProgressHistory(e=30){const t=new Date;return t.setDate(t.getDate()-e),this.progressEntries.filter(s=>new Date(s.date)>=t)}async detectPatterns(){const e=this.validations.length,t=[];return e>10&&t.push({id:"frequent-validation",name:"Regular Validation Usage",description:"User frequently seeks emotional validation",frequency:e,lastSeen:new Date,insights:["Strong engagement with validation features","Consistent emotional support seeking"]}),t}async generateInsights(){const e=await this.getProgressHistory(14);if(e.length===0)return{trends:{emotional:"stable",functional:"stable",social:"stable",coping:"stable"},achievements:[],recommendations:["Start tracking your progress to get personalized insights"],patterns:[]};const t=e[e.length-1],s=e[0];return{trends:{emotional:this.calculateTrend(s.wellbeingMetrics.emotional.mood,t.wellbeingMetrics.emotional.mood),functional:"stable",social:"stable",coping:"stable"},achievements:this.calculateAchievements(e),recommendations:this.generateRecommendations(e),patterns:await this.detectPatterns()}}calculateTrend(e,t){const s=t-e;return s>.5?"improving":s<-.5?"declining":"stable"}calculateAchievements(e){const t=[];return e.length>=7&&t.push("Tracked progress for a full week"),e.length>=30&&t.push("Maintained consistent tracking for a month"),t}generateRecommendations(e){const t=[];if(e.length>0){const s=e[e.length-1];s.wellbeingMetrics.emotional.mood<5&&(t.push("Consider reaching out to your support network"),t.push("Try a gentle coping strategy like deep breathing")),s.wellbeingMetrics.functional.independenceLevel<7&&t.push("Focus on small, achievable daily tasks")}return t}}class l8{analytics=new o8;async trackValidationEvent(e){await this.analytics.recordEvent(e)}async saveValidation(e){await this.analytics.saveValidation(e),await this.trackValidationEvent({type:"validation_generated",data:{tone:e.tone,message:e.message,timestamp:e.timestamp},timestamp:new Date})}async saveProgressEntry(e){await this.analytics.saveProgressEntry(e),await this.trackValidationEvent({type:"progress_updated",data:{emotional:e.wellbeingMetrics.emotional,functional:e.wellbeingMetrics.functional},timestamp:new Date})}async getValidationHistory(e){return this.analytics.getValidationHistory(e)}async getProgressHistory(e){return this.analytics.getProgressHistory(e)}async generateProgressInsights(){return this.analytics.generateInsights()}async detectValidationPatterns(){return this.analytics.detectPatterns()}}const Ka=new l8,c8="/docs/FEATURE_MATRIX.md",lr=n=>`${c8}#${n}`,d8={holisticMilestones:{href:lr("holistic-progress-milestones"),label:"Holistic Progress Milestones",summary:"Milestone timelines will showcase celebrations and breakthrough moments gathered from your progress entries.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+holistic+milestones",issueLabel:"see related issues"},copingCoach:{href:lr("adaptive-coping-strategy-coach"),label:"Adaptive Coping Strategy Coach",summary:"Personalized coping strategy guidance is being wired into the tracker next.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+coping+strategy",issueLabel:"explore open tasks"},comparisonAnalytics:{href:lr("comparison-analytics-20"),label:"Comparison Analytics 2.0",summary:"We are expanding comparison analytics to contrast treatments, time ranges, and custom cohorts.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+comparison+analytics",issueLabel:"track roadmap work"},visualComparison:{href:lr("visual-comparison-charts"),label:"Visual Comparison Charts",summary:"Interactive charts will let you visualize how outcomes shift across time periods and treatments.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+visual+comparison",issueLabel:"view design thread"},empathyIntelligence:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Expanded empathy IQ dashboards will surface granular empathy growth patterns.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+empathy+intelligence",issueLabel:"review empathy IQ roadmap"},neuralPatterns:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Neural pattern exploration will unpack simulated mirror neuron signals and trends.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+neural+empathy",issueLabel:"inspect neural pattern tasks"},wisdomJourney:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Wisdom journey timelines will chart insights, learning arcs, and reflection milestones.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+wisdom+journey",issueLabel:"follow wisdom tracker work"},temporalAnalysis:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Temporal empathy analysis will highlight daily, weekly, and seasonal empathy rhythms.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+temporal+empathy",issueLabel:"monitor temporal analysis work"},predictiveInsights:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Predictive empathy insights will forecast burnout risks and growth windows.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+predictive+empathy",issueLabel:"review predictive roadmap"},culturalEmpathy:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Cultural empathy explorers will surface intersectional patterns and guidance.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+cultural+empathy",issueLabel:"browse cultural empathy work"},microMoments:{href:lr("empathy-intelligence-deep-dives"),label:"Empathy Intelligence Deep Dives",summary:"Micro-moment tracking will capture and celebrate quick empathy wins.",issueUrl:"https://github.com/CrisisCore-Systems/pain-tracker/issues?q=is%3Aopen+micro+empathy",issueLabel:"follow micro-moment tasks"}},p1=({feature:n,align:e="center",className:t})=>{const s=d8[n];if(!s)return null;const i=e==="center"?"text-center":e==="right"?"text-right":"text-left";return l.jsxs("p",{className:Ye("text-sm text-gray-500",i,t),children:[s.summary," ","Follow the"," ",l.jsx("a",{href:s.href,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:s.label}),s.issueUrl&&l.jsxs(l.Fragment,{children:[" ","or"," ",l.jsx("a",{href:s.issueUrl,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:s.issueLabel??"explore open issues"})]}),"."]})};function eS({painEntries:n,onProgressUpdate:e}){const[t,s]=W.useState({wellbeingMetrics:{emotional:{mood:5,anxiety:5,stress:5,hopefulness:5,selfEfficacy:5},functional:{mobilityScore:5,independenceLevel:5,activityTolerance:5,energyLevel:5,cognitiveClarity:5},social:{socialEngagement:5,supportSystemStrength:5,communicationAbility:5,relationshipQuality:5},coping:{strategyEffectiveness:5,resilienceScore:5,adaptabilityScore:5,selfAdvocacySkills:5}},reflections:{wins:[],challenges:[],insights:[],gratitude:[]},overallSatisfaction:5,notes:""}),[i,r]=W.useState("metrics"),o=(()=>{if(n.length<2)return null;const u=n.slice(-7),h=n.slice(-14,-7),m=u.reduce((x,v)=>x+v.baselineData.pain,0)/u.length,f=h.length>0?h.reduce((x,v)=>x+v.baselineData.pain,0)/h.length:m;return{painTrend:m<f?"improving":m>f?"worsening":"stable",recentAvg:m,olderAvg:f}})(),c=()=>l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(Oi,{className:"w-4 h-4 mr-2 text-pink-500"}),"Emotional Wellbeing"]})}),l.jsx(Ve,{className:"space-y-4",children:Object.entries(t.wellbeingMetrics?.emotional||{}).map(([u,h])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 capitalize",children:u.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:m=>s(f=>({...f,wellbeingMetrics:{...f.wellbeingMetrics,emotional:{...f.wellbeingMetrics.emotional,[u]:parseInt(m.target.value)}}})),className:"flex-1"}),l.jsxs("span",{className:"w-8 text-sm font-medium",children:[h,"/10"]})]})]},u))})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(ba,{className:"w-4 h-4 mr-2 text-blue-500"}),"Functional Capacity"]})}),l.jsx(Ve,{className:"space-y-4",children:Object.entries(t.wellbeingMetrics?.functional||{}).map(([u,h])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 capitalize",children:u.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:m=>s(f=>({...f,wellbeingMetrics:{...f.wellbeingMetrics,functional:{...f.wellbeingMetrics.functional,[u]:parseInt(m.target.value)}}})),className:"flex-1"}),l.jsxs("span",{className:"w-8 text-sm font-medium",children:[h,"/10"]})]})]},u))})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(Gl,{className:"w-4 h-4 mr-2 text-green-500"}),"Social Wellbeing"]})}),l.jsx(Ve,{className:"space-y-4",children:Object.entries(t.wellbeingMetrics?.social||{}).map(([u,h])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 capitalize",children:u.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:m=>s(f=>({...f,wellbeingMetrics:{...f.wellbeingMetrics,social:{...f.wellbeingMetrics.social,[u]:parseInt(m.target.value)}}})),className:"flex-1"}),l.jsxs("span",{className:"w-8 text-sm font-medium",children:[h,"/10"]})]})]},u))})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx($s,{className:"w-4 h-4 mr-2 text-purple-500"}),"Coping & Resilience"]})}),l.jsx(Ve,{className:"space-y-4",children:Object.entries(t.wellbeingMetrics?.coping||{}).map(([u,h])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 capitalize",children:u.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:m=>s(f=>({...f,wellbeingMetrics:{...f.wellbeingMetrics,coping:{...f.wellbeingMetrics.coping,[u]:parseInt(m.target.value)}}})),className:"flex-1"}),l.jsxs("span",{className:"w-8 text-sm font-medium",children:[h,"/10"]})]})]},u))})]})]})}),d=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(Td,{className:"w-4 h-4 mr-2 text-yellow-500"}),"Today's Wins"]})}),l.jsx(Ve,{children:l.jsx("textarea",{placeholder:"What went well today? Even small victories count...",rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",value:t.reflections?.wins.join(`
`)||"",onChange:u=>s(h=>({...h,reflections:{...h.reflections,wins:u.target.value.split(`
`).filter(m=>m.trim())}}))})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(_s,{className:"w-4 h-4 mr-2 text-red-500"}),"Challenges"]})}),l.jsx(Ve,{children:l.jsx("textarea",{placeholder:"What challenges did you face? How did you handle them?",rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",value:t.reflections?.challenges.join(`
`)||"",onChange:u=>s(h=>({...h,reflections:{...h.reflections,challenges:u.target.value.split(`
`).filter(m=>m.trim())}}))})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx($s,{className:"w-4 h-4 mr-2 text-purple-500"}),"Insights"]})}),l.jsx(Ve,{children:l.jsx("textarea",{placeholder:"What did you learn about yourself or your condition today?",rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",value:t.reflections?.insights.join(`
`)||"",onChange:u=>s(h=>({...h,reflections:{...h.reflections,insights:u.target.value.split(`
`).filter(m=>m.trim())}}))})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(Oi,{className:"w-4 h-4 mr-2 text-pink-500"}),"Gratitude"]})}),l.jsx(Ve,{children:l.jsx("textarea",{placeholder:"What are you grateful for today?",rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",value:t.reflections?.gratitude.join(`
`)||"",onChange:u=>s(h=>({...h,reflections:{...h.reflections,gratitude:u.target.value.split(`
`).filter(m=>m.trim())}}))})})]})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-sm",children:[l.jsx(zo,{className:"w-4 h-4 mr-2 text-indigo-500"}),"Overall Satisfaction"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("label",{className:"text-sm font-medium",children:"How satisfied are you with today overall?"}),l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:t.overallSatisfaction||5,onChange:u=>s(h=>({...h,overallSatisfaction:parseInt(u.target.value)})),className:"flex-1"}),l.jsxs("span",{className:"w-12 text-sm font-medium",children:[t.overallSatisfaction,"/10"]})]})]})})]})]});return l.jsxs("div",{className:"space-y-6",children:[o&&l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center",children:[l.jsx(es,{className:"w-5 h-5 mr-2"}),"Progress Overview"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[o.painTrend==="improving"?l.jsx(ph,{className:"w-5 h-5 text-green-500"}):o.painTrend==="worsening"?l.jsx(Fn,{className:"w-5 h-5 text-red-500"}):l.jsx(c2,{className:"w-5 h-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Pain Trend"}),l.jsx("p",{className:"text-xs text-gray-600 capitalize",children:o.painTrend})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[l.jsx(ba,{className:"w-5 h-5 text-green-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Recent Avg"}),l.jsxs("p",{className:"text-xs text-gray-600",children:[Vt(o.recentAvg,1),"/10"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[l.jsx(pr,{className:"w-5 h-5 text-purple-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Entries"}),l.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," total"]})]})]})]})})]}),l.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"metrics",label:"Wellbeing Metrics",icon:es},{id:"milestones",label:"Milestones",icon:_s},{id:"coping",label:"Coping Strategies",icon:Gl},{id:"insights",label:"Reflections",icon:$s}].map(u=>{const h=u.icon;return l.jsxs("button",{onClick:()=>r(u.id),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${i===u.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(h,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:u.label})]},u.id)})}),i==="metrics"&&l.jsx(c,{}),i==="insights"&&l.jsx(d,{}),i==="milestones"&&l.jsx(We,{children:l.jsx(Ve,{className:"p-6",children:l.jsx(p1,{feature:"holisticMilestones"})})}),i==="coping"&&l.jsx(We,{children:l.jsx(Ve,{className:"p-6",children:l.jsx(p1,{feature:"copingCoach"})})}),l.jsx("div",{className:"flex justify-end space-x-3",children:l.jsx("button",{onClick:()=>{const u={id:`progress-${Date.now()}`,date:new Date,wellbeingMetrics:t.wellbeingMetrics,milestones:[],copingStrategies:[],reflections:t.reflections,overallSatisfaction:t.overallSatisfaction,notes:t.notes||""};e?.(u)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Progress Entry"})})]})}function tS(){const[n,e]=W.useState([]),t=W.useCallback(i=>{e(r=>[...r,i].slice(-10))},[]),s=W.useCallback(()=>{e([])},[]);return{validationHistory:n,addValidation:t,clearHistory:s}}const g1={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var y1={};const u8=()=>{try{if(typeof import.meta<"u"&&g1)return g1}catch{}return typeof process<"u"&&y1?y1:{}},h8=(()=>{const n=u8();return n.VITE_REACT_APP_ENABLE_VALIDATION==="true"||n.REACT_APP_ENABLE_VALIDATION==="true"})();function f8({onSubmit:n}){const{ui:e,setCurrentFormSection:t}=Hl(),s=Hl(_=>_.entries),i=e.currentFormSection,[r,a]=W.useState(!1),{preferences:o}=vr(),{validationHistory:c,addValidation:d,clearHistory:u}=tS(),[h,m]=W.useState(!0),[f,y]=W.useState(o.showProgress),[x,v]=W.useState("idle"),[w,j]=W.useState({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""});W.useEffect(()=>{y(o.showProgress)},[o.showProgress]);const C=W.useCallback(async _=>{d(_);try{await Ka.saveValidation(_)}catch(E){console.error("Failed to persist validation message",E)}},[d,Ka]),N=W.useCallback(async _=>{try{v("saving"),await Ka.saveProgressEntry(_),v("saved"),setTimeout(()=>v("idle"),6e3)}catch(E){console.error("Failed to persist progress entry",E),v("error"),setTimeout(()=>v("idle"),6e3)}},[Ka]),P=W.useMemo(()=>h8&&o.realTimeValidation,[o.realTimeValidation]),L=[{title:"Pain Assessment",description:"Rate your current pain and identify affected areas",icon:"🎯",component:l.jsx(V5,{...w.baselineData,locations:w.baselineData.locations||[],symptoms:w.baselineData.symptoms||[],onChange:_=>j(E=>({...E,baselineData:{...E.baselineData,..._}}))}),required:!0,estimatedTime:"2 min"},{title:"Functional Impact",description:"How is pain affecting your daily activities?",icon:"🏃",component:l.jsx(G5,{limitedActivities:w.functionalImpact?.limitedActivities||[],mobilityAids:w.functionalImpact?.mobilityAids||[],onChange:_=>j(E=>({...E,functionalImpact:{...E.functionalImpact,..._}}))}),required:!1,estimatedTime:"3 min"},{title:"Medications",description:"Track your current medications and their effectiveness",icon:"💊",component:l.jsx(Y5,{...w.medications,onChange:_=>j(E=>({...E,medications:{...E.medications,..._}}))}),required:!1,estimatedTime:"2 min"},{title:"Treatments",description:"Document recent treatments and their outcomes",icon:"🏥",component:l.jsx(K5,{...w.treatments,onChange:_=>j(E=>({...E,treatments:{...E.treatments,..._}}))}),required:!1,estimatedTime:"3 min"},{title:"Quality of Life",description:"How is pain affecting your sleep, mood, and social life?",icon:"😴",component:l.jsx(Z5,{...w.qualityOfLife,onChange:_=>j(E=>({...E,qualityOfLife:{...E.qualityOfLife,..._}}))}),required:!1,estimatedTime:"2 min"},{title:"Work Impact",description:"How has pain affected your work and productivity?",icon:"💼",component:l.jsx(X5,{...w.workImpact,onChange:_=>j(E=>({...E,workImpact:{...E.workImpact,..._}}))}),required:!1,estimatedTime:"2 min"},{title:"Comparison",description:"Compare your current condition to previous assessments",icon:"📊",component:l.jsx(H5,{...w.comparison,onChange:_=>j(E=>({...E,comparison:{...E.comparison,..._}}))}),required:!1,estimatedTime:"2 min"}],M=async()=>{a(!0);try{await n(w),j({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""}),t(0)}finally{a(!1)}},k=(_=>_===0?w.baselineData.pain>=0&&w.baselineData.pain<=10:!0)(i),z=i===L.length-1;return l.jsxs(We,{className:"max-w-4xl mx-auto",children:[l.jsxs(bt,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:L[i].icon}),l.jsx("span",{children:L[i].title})]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:L[i].description})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(ts,{variant:"outline",className:"text-xs",children:[l.jsx(Ur,{className:"h-3 w-3 mr-1"}),L[i].estimatedTime]}),l.jsxs(ts,{variant:"secondary",children:[i+1," of ",L.length]})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Math.round((i+1)/L.length*100),"%"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${(i+1)/L.length*100}%`}})})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:L.map((_,E)=>l.jsxs("button",{onClick:()=>t(E),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${E===i?"bg-primary text-primary-foreground":E<i?"bg-success text-success-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,"aria-label":`Go to ${_.title} section`,children:[E<i?l.jsx(lp,{className:"h-3 w-3 inline mr-1"}):l.jsx("span",{className:"mr-1",children:_.icon}),l.jsx("span",{className:"hidden sm:inline",children:_.title}),l.jsx("span",{className:"sm:hidden",children:E+1})]},E))})]}),l.jsxs(Ve,{children:[l.jsxs("form",{role:"form","aria-label":"Pain Entry Form",onSubmit:_=>{_.preventDefault(),z&&k&&M()},className:"space-y-6",children:[l.jsx("div",{className:"min-h-[400px]",children:L[i].component}),P&&l.jsx("div",{className:"mt-4",children:l.jsx(Q5,{text:w.notes||"",onValidationGenerated:C,isActive:!0})}),P&&c.length>0&&h&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-muted-foreground",children:[l.jsx(uh,{className:"h-4 w-4"}),l.jsx("span",{children:"Recent validation moments"})]}),l.jsx(Je,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(!1),children:"Hide"})]}),l.jsx(J5,{validations:c,onClear:u})]}),P&&!h&&c.length>0&&l.jsx("div",{className:"mt-4",children:l.jsx(Je,{type:"button",variant:"outline",size:"sm",onClick:()=>m(!0),leftIcon:l.jsx(uh,{className:"h-4 w-4"}),children:"Show recent validation messages"})}),!k&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[l.jsx(Vh,{className:"h-4 w-4 text-warning"}),l.jsx("span",{className:"text-sm text-warning",children:"Please complete the required information in this section before proceeding."})]}),l.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[l.jsx(Je,{type:"button",variant:"outline",onClick:()=>t(Math.max(0,i-1)),disabled:i===0,leftIcon:l.jsx(cg,{className:"h-4 w-4"}),children:"Previous"}),l.jsx("div",{className:"flex space-x-3",children:z?l.jsx(Je,{type:"submit",disabled:!k||r,leftIcon:r?void 0:l.jsx(mh,{className:"h-4 w-4"}),className:"min-w-[120px]",children:r?l.jsxs(l.Fragment,{children:[l.jsx(mg,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Entry"}):l.jsx(Je,{type:"button",onClick:()=>t(Math.min(L.length-1,i+1)),disabled:!k,rightIcon:l.jsx(qh,{className:"h-4 w-4"}),children:"Next"})})]})]}),o.showProgress&&l.jsxs("div",{className:"mt-8 border-t pt-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(es,{className:"h-4 w-4 text-primary"}),l.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"Whole-person progress tracking"})]}),l.jsx(Je,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(_=>!_),children:f?"Hide wellness tools":"Show wellness tools"})]}),f?l.jsxs("div",{className:"space-y-3",children:[l.jsx(eS,{painEntries:s,onProgressUpdate:N}),x==="saving"&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx(Yh,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{children:"Saving wellness insights securely…"})]}),x==="saved"&&l.jsx("p",{className:"text-xs text-success",children:"Progress entry saved with validation technology."}),x==="error"&&l.jsx("p",{className:"text-xs text-destructive",children:"We couldn’t save your progress right now. Your notes stay on this device."})]}):l.jsx("p",{className:"text-xs text-muted-foreground",children:"These tools celebrate growth beyond pain scores. You can open them whenever you’re ready."})]})]})]})}function Wm({value:n,onChange:e,min:t=0,max:s=10,step:i=1,label:r,showValue:a=!0,hapticFeedback:o=!0,className:c=""}){const[d,u]=W.useState(!1),[h,m]=W.useState(0),f=W.useRef(null),y=W.useRef(null),x=W.useCallback(()=>{o&&"vibrate"in navigator&&navigator.vibrate(10)},[o]),v=W.useCallback(z=>{if(!y.current)return n;const _=y.current.getBoundingClientRect(),E=Math.max(0,Math.min(1,(z-_.left)/_.width)),$=t+E*(s-t);return Math.round($/i)*i},[t,s,i,n]),w=W.useCallback(z=>{z.preventDefault(),u(!0),m(n),x()},[n,x]),j=W.useCallback(z=>{if(!d)return;z.preventDefault();const _=v(z.touches[0].clientX);_!==n&&(e(_),Math.abs(_-h)>=i&&x())},[d,n,e,v,h,i,x]),C=W.useCallback(z=>{z.preventDefault(),u(!1)},[]),N=W.useCallback(z=>{u(!0),m(n);const _=v(z.clientX);_!==n&&(e(_),x())},[n,e,v,x]),P=W.useCallback(z=>{if(!d)return;const _=v(z.clientX);_!==n&&e(_)},[d,n,e,v]),L=W.useCallback(()=>{u(!1)},[]);W.useEffect(()=>{if(d)return document.addEventListener("mousemove",P),document.addEventListener("mouseup",L),document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",L),document.body.style.userSelect=""}},[d,P,L]);const M=()=>{const z=Math.max(t,n-i);z!==n&&(e(z),x())},T=()=>{const z=Math.min(s,n+i);z!==n&&(e(z),x())},k=(n-t)/(s-t)*100;return l.jsxs("div",{className:`touch-optimized-slider ${c}`,children:[r&&l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("label",{className:"text-sm font-medium text-foreground",children:r}),a&&l.jsx("span",{className:"text-lg font-bold text-primary",children:n})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{type:"button",onClick:M,disabled:n<=t,className:"flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-muted hover:bg-muted/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-manipulation","aria-label":"Decrease value",children:l.jsx(c2,{className:"h-5 w-5"})}),l.jsxs("div",{ref:f,className:"flex-1 relative h-12 flex items-center touch-manipulation",children:[l.jsxs("div",{ref:y,className:"w-full h-3 bg-muted rounded-full relative cursor-pointer",onTouchStart:w,onTouchMove:j,onTouchEnd:C,onMouseDown:N,children:[l.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary rounded-full transition-all duration-150",style:{width:`${k}%`}}),l.jsx("div",{className:`absolute top-1/2 transform -translate-y-1/2 w-6 h-6 bg-primary border-2 border-background rounded-full shadow-lg cursor-pointer transition-all duration-150 ${d?"scale-125 shadow-xl":"hover:scale-110"}`,style:{left:`calc(${k}% - 12px)`}}),l.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-12 h-12 rounded-full opacity-0",style:{left:`calc(${k}% - 24px)`}})]}),l.jsx("div",{className:"absolute inset-0 flex justify-between items-center pointer-events-none",children:Array.from({length:s-t+1},(z,_)=>_+t).map(z=>l.jsx("div",{className:`w-0.5 h-2 ${z<=n?"bg-primary":"bg-muted-foreground/30"} rounded-full`},z))})]}),l.jsx("button",{type:"button",onClick:T,disabled:n>=s,className:"flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-muted hover:bg-muted/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-manipulation","aria-label":"Increase value",children:l.jsx(Yi,{className:"h-5 w-5"})})]}),a&&l.jsxs("div",{className:"mt-2 text-center sm:hidden",children:[l.jsx("span",{className:"text-2xl font-bold text-primary",children:n}),l.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["/ ",s]})]})]})}function m8({sections:n,currentSection:e,onSectionChange:t,onSubmit:s,submitLabel:i="Submit",className:r=""}){const[a,o]=W.useState(new Set);W.useEffect(()=>{e>0&&o(f=>new Set([...f,e-1]))},[e]);const c=()=>{e>0&&t(e-1)},d=()=>{e<n.length-1&&t(e+1)},u=e===n.length-1,h=e<n.length-1,m=e>0;return l.jsxs("div",{className:`mobile-form-navigation ${r}`,children:[l.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b",children:l.jsxs("div",{className:"px-4 py-3",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx("div",{className:"flex-1 bg-muted rounded-full h-2",children:l.jsx("div",{className:"h-2 bg-primary rounded-full transition-all duration-300 ease-out",style:{width:`${(e+1)/n.length*100}%`}})}),l.jsxs("span",{className:"ml-3 text-sm font-medium text-muted-foreground whitespace-nowrap",children:[e+1," of ",n.length]})]}),l.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n[e]?.title}),l.jsx("div",{className:"flex items-center space-x-2 mt-2 overflow-x-auto pb-1",children:n.map((f,y)=>l.jsxs("button",{onClick:()=>t(y),className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all ${y===e?"bg-primary text-primary-foreground":a.has(y)?"bg-green-100 text-green-700 hover:bg-green-200":y<e?"bg-muted text-muted-foreground hover:bg-muted/80":"bg-muted/50 text-muted-foreground/70"}`,children:[a.has(y)&&l.jsx(lp,{className:"h-3 w-3"}),l.jsx("span",{children:f.title})]},f.id))})]})}),l.jsx("div",{className:"flex-1 px-4 py-6",children:n[e]?.component}),l.jsx("div",{className:"sticky bottom-0 z-10 bg-background/95 backdrop-blur-sm border-t",children:l.jsxs("div",{className:"px-4 py-4",children:[l.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[l.jsxs(Je,{type:"button",variant:"outline",onClick:c,disabled:!m,className:"flex items-center space-x-2 min-w-fit",children:[l.jsx(cg,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Previous"}),l.jsx("span",{className:"sm:hidden",children:"Back"})]}),l.jsx("div",{className:"flex-1 text-center",children:l.jsx("div",{className:"flex justify-center space-x-1",children:n.map((f,y)=>l.jsx("button",{onClick:()=>t(y),className:`w-2 h-2 rounded-full transition-all ${y===e?"bg-primary w-4":a.has(y)?"bg-green-400":y<e?"bg-muted":"bg-muted/50"}`,"aria-label":`Go to ${n[y].title}`},y))})}),u?l.jsxs(Je,{type:"submit",onClick:s,className:"flex items-center space-x-2 min-w-fit bg-green-600 hover:bg-green-700",children:[l.jsx(lp,{className:"h-4 w-4"}),l.jsx("span",{children:i})]}):l.jsxs(Je,{type:"button",onClick:d,disabled:!h,className:"flex items-center space-x-2 min-w-fit",children:[l.jsx("span",{className:"hidden sm:inline",children:"Next"}),l.jsx("span",{className:"sm:hidden",children:"Next"}),l.jsx(qh,{className:"h-4 w-4"})]})]}),l.jsx("div",{className:"mt-3 flex justify-center",children:l.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.size," of ",n.length," sections completed"]})})]})}),l.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 pointer-events-none",children:l.jsx("div",{className:"bg-black/70 text-white px-3 py-1 rounded-full text-xs animate-pulse",children:"Swipe left/right to navigate"})})]})}function p8(n,e,t,s){W.useEffect(()=>{const i=r=>{switch(r.key){case"ArrowLeft":r.preventDefault(),n>0&&t(n-1);break;case"ArrowRight":r.preventDefault(),n<e-1&&t(n+1);break;case"Enter":(r.ctrlKey||r.metaKey)&&(r.preventDefault(),n===e-1&&s());break}};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[n,e,t,s])}function g8({children:n,onCardChange:e,className:t="",showIndicators:s=!0,showNavigation:i=!0,autoAdvance:r=!1,autoAdvanceDelay:a=5e3}){const[o,c]=W.useState(0),[d,u]=W.useState(!1),[h,m]=W.useState(0),[f,y]=W.useState(0),x=W.useRef(null),v=W.useRef(),w=n.length;W.useEffect(()=>{if(r&&!d)return v.current=setInterval(()=>{c(_=>(_+1)%w)},a),()=>{v.current&&clearInterval(v.current)}},[r,a,d,w]);const j=W.useCallback(_=>{const E=Math.max(0,Math.min(w-1,_));c(E),e?.(E)},[w,e]),C=W.useCallback(()=>{j(o-1)},[o,j]),N=W.useCallback(()=>{j(o+1)},[o,j]),P=W.useCallback(_=>{u(!0),y(_.touches[0].clientX),m(0),v.current&&clearInterval(v.current)},[]),L=W.useCallback(_=>{if(!d)return;const $=_.touches[0].clientX-f;m($)},[d,f]),M=W.useCallback(()=>{if(!d)return;u(!1);const _=100,E=Math.abs(h);(Math.abs(h)>_||E>50)&&(h>0?C():N()),m(0)},[d,h,C,N]),T=W.useCallback(_=>{_.preventDefault(),u(!0),y(_.clientX),m(0)},[]),k=W.useCallback(_=>{if(!d)return;const E=_.clientX-f;m(E)},[d,f]),z=W.useCallback(()=>{if(!d)return;u(!1),Math.abs(h)>100&&(h>0?C():N()),m(0)},[d,h,C,N]);return W.useEffect(()=>{if(d)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",z),document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",z),document.body.style.userSelect=""}},[d,k,z]),W.useEffect(()=>{const _=E=>{E.key==="ArrowLeft"?(E.preventDefault(),C()):E.key==="ArrowRight"&&(E.preventDefault(),N())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[C,N]),l.jsxs("div",{className:`swipeable-cards relative overflow-hidden ${t}`,children:[l.jsx("div",{ref:x,className:"flex transition-transform duration-300 ease-out touch-manipulation",style:{transform:d?`translateX(calc(-${o*100}% + ${h}px))`:`translateX(-${o*100}%)`,transition:d?"none":"transform 0.3s ease-out"},onTouchStart:P,onTouchMove:L,onTouchEnd:M,onMouseDown:T,children:n.map((_,E)=>l.jsx("div",{className:"w-full flex-shrink-0",style:{opacity:d?1-Math.abs(h)/300:1,transform:d&&Math.abs(E-o)<=1?`scale(${1-Math.abs(h)/1e3})`:"scale(1)"},children:_},E))}),i&&w>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:C,disabled:o===0,className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full bg-background/80 backdrop-blur-sm shadow-lg hover:bg-background/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all z-10","aria-label":"Previous card",children:l.jsx(cg,{className:"h-5 w-5"})}),l.jsx("button",{onClick:N,disabled:o===w-1,className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full bg-background/80 backdrop-blur-sm shadow-lg hover:bg-background/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all z-10","aria-label":"Next card",children:l.jsx(qh,{className:"h-5 w-5"})})]}),s&&w>1&&l.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10",children:Array.from({length:w},(_,E)=>l.jsx("button",{onClick:()=>j(E),className:`w-2 h-2 rounded-full transition-all ${E===o?"bg-primary w-6":"bg-muted-foreground/50 hover:bg-muted-foreground/70"}`,"aria-label":`Go to card ${E+1}`},E))}),w>1&&l.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-muted-foreground pointer-events-none",children:"Swipe to navigate"})]})}const Ou=[{id:"head",name:"Head",path:"M150 50 C170 50, 180 60, 180 80 C180 100, 170 110, 150 110 C130 110, 120 100, 120 80 C120 60, 130 50, 150 50 Z",center:{x:150,y:80}},{id:"neck",name:"Neck",path:"M140 110 L160 110 L160 130 L140 130 Z",center:{x:150,y:120}},{id:"left-shoulder",name:"Left Shoulder",path:"M90 140 C110 130, 130 140, 140 160 C130 170, 110 170, 90 160 Z",center:{x:115,y:150}},{id:"right-shoulder",name:"Right Shoulder",path:"M160 160 C170 140, 190 130, 210 140 L210 160 C190 170, 170 170, 160 160 Z",center:{x:185,y:150}},{id:"left-arm",name:"Left Arm",path:"M90 160 L110 160 L110 240 L90 240 Z",center:{x:100,y:200}},{id:"right-arm",name:"Right Arm",path:"M190 160 L210 160 L210 240 L190 240 Z",center:{x:200,y:200}},{id:"chest",name:"Chest",path:"M140 130 L160 130 L180 160 L180 200 L120 200 L120 160 Z",center:{x:150,y:165}},{id:"upper-back",name:"Upper Back",path:"M120 130 L180 130 L180 180 L120 180 Z",center:{x:150,y:155}},{id:"abdomen",name:"Abdomen",path:"M120 200 L180 200 L180 260 L120 260 Z",center:{x:150,y:230}},{id:"lower-back",name:"Lower Back",path:"M120 180 L180 180 L180 260 L120 260 Z",center:{x:150,y:220}},{id:"left-hip",name:"Left Hip",path:"M120 260 L140 260 L140 300 L120 300 Z",center:{x:130,y:280}},{id:"right-hip",name:"Right Hip",path:"M160 260 L180 260 L180 300 L160 300 Z",center:{x:170,y:280}},{id:"left-thigh",name:"Left Thigh",path:"M120 300 L140 300 L140 380 L120 380 Z",center:{x:130,y:340}},{id:"right-thigh",name:"Right Thigh",path:"M160 300 L180 300 L180 380 L160 380 Z",center:{x:170,y:340}},{id:"left-knee",name:"Left Knee",path:"M120 380 L140 380 L140 400 L120 400 Z",center:{x:130,y:390}},{id:"right-knee",name:"Right Knee",path:"M160 380 L180 380 L180 400 L160 400 Z",center:{x:170,y:390}},{id:"left-calf",name:"Left Calf",path:"M120 400 L140 400 L140 480 L120 480 Z",center:{x:130,y:440}},{id:"right-calf",name:"Right Calf",path:"M160 400 L180 400 L180 480 L160 480 Z",center:{x:170,y:440}},{id:"left-foot",name:"Left Foot",path:"M115 480 L145 480 L145 500 L115 500 Z",center:{x:130,y:490}},{id:"right-foot",name:"Right Foot",path:"M155 480 L185 480 L185 500 L155 500 Z",center:{x:170,y:490}}];function nS({entries:n=[],selectedRegions:e=[],onRegionSelect:t,mode:s="selection",className:i=""}){const[r,a]=W.useState(null),[o,c]=W.useState(!0),d=W.useRef(null),u=W.useRef(new Map);W.useEffect(()=>{if(s==="heatmap"&&n.length>0){const x=new Map;n.forEach(v=>{v.baselineData?.locations&&v.baselineData.locations.forEach(w=>{const j=y8(w);if(j&&Ou.find(C=>C.id===j)){x.has(j)||x.set(j,{total:0,count:0});const C=x.get(j);C.total+=v.baselineData.pain,C.count+=1}})}),u.current.clear(),x.forEach((v,w)=>{u.current.set(w,v.total/v.count)})}},[n,s]);const h=x=>{if(s==="selection"&&t){const v=e.includes(x)?e.filter(w=>w!==x):[...e,x];t(v)}},m=x=>{if(s==="selection")return e.includes(x)?"#ef4444":r===x?"#3b82f6":"#e5e7eb";if(s==="heatmap"){const v=u.current.get(x)||0;if(v===0)return"#e5e7eb";const w=v/10;return w<.3?`rgba(34, 197, 94, ${.3+w*.7})`:w<.6?`rgba(251, 191, 36, ${.3+w*.7})`:`rgba(239, 68, 68, ${.3+w*.7})`}return"#e5e7eb"},f=x=>s==="heatmap"?(u.current.get(x)||0)===0?.3:.7:r===x?.8:.6,y=x=>u.current.get(x)||0;return l.jsxs("div",{className:`interactive-body-map ${i}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(d2,{className:"h-5 w-5"}),l.jsx("span",{className:"font-medium",children:s==="selection"?"Select Pain Locations":"Pain Heat Map"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[l.jsx(ug,{className:"h-4 w-4"}),l.jsx("span",{children:o?"Show Back":"Show Front"})]}),s==="heatmap"&&l.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[l.jsx(hh,{className:"h-4 w-4"}),l.jsx("span",{children:"Color intensity = pain level"})]})]})]}),l.jsxs("div",{className:"relative bg-white rounded-lg border p-4",children:[l.jsxs("svg",{ref:d,viewBox:"0 0 300 520",className:"w-full max-w-md mx-auto",style:{maxHeight:"600px"},children:[l.jsx("rect",{x:"0",y:"0",width:"300",height:"520",fill:"none",stroke:"#e5e7eb",strokeWidth:"2",rx:"10"}),Ou.map(x=>{const v=!x.id.includes("back");return o!==v?null:l.jsxs("g",{children:[l.jsx("path",{d:x.path,fill:m(x.id),stroke:"#374151",strokeWidth:"1",opacity:f(x.id),className:"cursor-pointer transition-all duration-200 hover:stroke-2",onClick:()=>h(x.id),onMouseEnter:()=>a(x.id),onMouseLeave:()=>a(null)}),l.jsx("text",{x:x.center.x,y:x.center.y,textAnchor:"middle",dominantBaseline:"central",className:"text-xs font-medium pointer-events-none select-none",fill:"#374151",children:s==="heatmap"&&y(x.id)>0?Vt(y(x.id),1):""})]},x.id)})]}),r&&l.jsxs("div",{className:"absolute top-4 right-4 bg-black text-white px-3 py-2 rounded-md text-sm pointer-events-none",children:[l.jsx("div",{className:"font-medium",children:Ou.find(x=>x.id===r)?.name}),s==="heatmap"&&l.jsxs("div",{className:"text-xs",children:["Pain Level: ",Vt(y(r),1),"/10"]}),s==="selection"&&l.jsxs("div",{className:"text-xs",children:["Click to ",e.includes(r)?"deselect":"select"]})]}),s==="heatmap"&&l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:"Low Pain"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"}),l.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),l.jsx("div",{className:"w-4 h-4 bg-red-400 rounded"})]}),l.jsx("span",{children:"High Pain"})]})}),s==="selection"&&e.length>0&&l.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[l.jsxs("div",{className:"text-sm font-medium text-blue-900 mb-2",children:["Selected Locations (",e.length,"):"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(x=>{const v=Ou.find(w=>w.id===x);return l.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[v?.name,l.jsx("button",{onClick:()=>h(x),className:"ml-1 hover:text-blue-600",children:"×"})]},x)})})]})]})]})}function y8(n){const e=n.toLowerCase();return{head:"head",neck:"neck",shoulder:"left-shoulder","left shoulder":"left-shoulder","right shoulder":"right-shoulder",arm:"left-arm","left arm":"left-arm","right arm":"right-arm",chest:"chest",back:"upper-back","upper back":"upper-back","lower back":"lower-back",abdomen:"abdomen",stomach:"abdomen",hip:"left-hip","left hip":"left-hip","right hip":"right-hip",thigh:"left-thigh","left thigh":"left-thigh","right thigh":"right-thigh",knee:"left-knee","left knee":"left-knee","right knee":"right-knee",leg:"left-calf",calf:"left-calf","left calf":"left-calf","right calf":"right-calf",foot:"left-foot","left foot":"left-foot","right foot":"right-foot"}[e]||null}function x8({selectedLocations:n,onChange:e}){const t=i=>{const r=i.map(a=>v8(a));e(r)},s=n.map(i=>b8(i)).filter(Boolean);return l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsx(wt,{children:"Pain Location Mapping"}),l.jsx(ur,{children:"Click on body regions to mark pain locations"})]}),l.jsx(Ve,{children:l.jsx(nS,{selectedRegions:s,onRegionSelect:t,mode:"selection"})})]})}function v8(n){return{head:"Head",neck:"Neck","left-shoulder":"Left Shoulder","right-shoulder":"Right Shoulder","left-arm":"Left Arm","right-arm":"Right Arm",chest:"Chest","upper-back":"Upper Back",abdomen:"Abdomen","lower-back":"Lower Back","left-hip":"Left Hip","right-hip":"Right Hip","left-thigh":"Left Thigh","right-thigh":"Right Thigh","left-knee":"Left Knee","right-knee":"Right Knee","left-calf":"Left Calf","right-calf":"Right Calf","left-foot":"Left Foot","right-foot":"Right Foot"}[n]||n}function b8(n){return{Head:"head",Neck:"neck","Left Shoulder":"left-shoulder","Right Shoulder":"right-shoulder",Shoulder:"left-shoulder","Left Arm":"left-arm","Right Arm":"right-arm",Arm:"left-arm",Chest:"chest","Upper Back":"upper-back",Back:"upper-back",Abdomen:"abdomen",Stomach:"abdomen","Lower Back":"lower-back","Left Hip":"left-hip","Right Hip":"right-hip",Hip:"left-hip","Left Thigh":"left-thigh","Right Thigh":"right-thigh",Thigh:"left-thigh","Left Knee":"left-knee","Right Knee":"right-knee",Knee:"left-knee","Left Calf":"left-calf","Right Calf":"right-calf",Calf:"left-calf",Leg:"left-calf","Left Foot":"left-foot","Right Foot":"right-foot",Foot:"left-foot"}[n]||null}const x1={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var v1={};const w8=()=>{try{if(typeof import.meta<"u"&&x1)return x1}catch{}return typeof process<"u"&&v1?v1:{}},S8=(()=>{const n=w8();return n.VITE_REACT_APP_ENABLE_VALIDATION==="true"||n.REACT_APP_ENABLE_VALIDATION==="true"})();function N8({onSubmit:n}){const e=Hl(P=>P.entries),{preferences:t}=vr(),{validationHistory:s,addValidation:i,clearHistory:r}=tS(),[a,o]=W.useState(!0),[c,d]=W.useState(t.showProgress),[u,h]=W.useState("idle"),[m,f]=W.useState(0),[y,x]=W.useState({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""});W.useEffect(()=>{d(t.showProgress)},[t.showProgress]);const v=S8&&t.realTimeValidation,w=W.useCallback(async P=>{i(P);try{await Ka.saveValidation(P)}catch(L){console.error("Failed to persist validation message (mobile)",L)}},[i,Ka]),j=W.useCallback(async P=>{try{h("saving"),await Ka.saveProgressEntry(P),h("saved"),setTimeout(()=>h("idle"),6e3)}catch(L){console.error("Failed to persist mobile progress entry",L),h("error"),setTimeout(()=>h("idle"),6e3)}},[Ka]),C=[{id:"pain-level",title:"Pain Level",component:l.jsx(We,{children:l.jsx(Ve,{className:"pt-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"How is your pain right now?"}),l.jsx("p",{className:"text-muted-foreground",children:"Use the slider or buttons to set your pain level"})]}),l.jsx("div",{className:"py-8",children:l.jsx(Wm,{value:y.baselineData.pain,onChange:P=>x(L=>({...L,baselineData:{...L.baselineData,pain:P}})),min:0,max:10,label:"Pain Level (0-10)",showValue:!0,hapticFeedback:!0})}),l.jsx("div",{className:"grid grid-cols-5 gap-2",children:[0,2,4,6,8,10].map(P=>l.jsx("button",{type:"button",onClick:()=>x(L=>({...L,baselineData:{...L.baselineData,pain:P}})),className:`py-3 px-2 rounded-lg text-sm font-medium transition-all ${y.baselineData.pain===P?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:P},P))}),l.jsx("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:l.jsx("p",{className:"text-sm font-medium",children:k8(y.baselineData.pain)})})]})})})},{id:"body-mapping",title:"Pain Locations",component:l.jsx(x8,{selectedLocations:y.baselineData?.locations||[],onChange:P=>x(L=>({...L,baselineData:{...L.baselineData,locations:P}}))})},{id:"symptoms",title:"Symptoms",component:l.jsx(V5,{pain:y.baselineData?.pain||0,locations:y.baselineData?.locations||[],symptoms:y.baselineData?.symptoms||[],onChange:P=>x(L=>({...L,baselineData:{...L.baselineData,...P}}))})},{id:"quality-of-life",title:"Quality of Life",component:l.jsx(We,{children:l.jsxs(Ve,{className:"pt-6 space-y-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"How is your sleep quality?"}),l.jsx(Wm,{value:y.qualityOfLife?.sleepQuality||0,onChange:P=>x(L=>({...L,qualityOfLife:{...L.qualityOfLife,sleepQuality:P,moodImpact:L.qualityOfLife?.moodImpact||0,socialImpact:L.qualityOfLife?.socialImpact||[]}})),min:0,max:10,label:"Sleep Quality (0=Poor, 10=Excellent)",showValue:!0})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"How much is pain affecting your mood?"}),l.jsx(Wm,{value:y.qualityOfLife?.moodImpact||0,onChange:P=>x(L=>({...L,qualityOfLife:{...L.qualityOfLife,moodImpact:P,sleepQuality:L.qualityOfLife?.sleepQuality||0,socialImpact:L.qualityOfLife?.socialImpact||[]}})),min:0,max:10,label:"Mood Impact (0=No impact, 10=Severe impact)",showValue:!0})]}),l.jsx(Z5,{sleepQuality:y.qualityOfLife?.sleepQuality||0,moodImpact:y.qualityOfLife?.moodImpact||0,socialImpact:y.qualityOfLife?.socialImpact||[],onChange:P=>x(L=>({...L,qualityOfLife:{sleepQuality:P.sleepQuality??L.qualityOfLife?.sleepQuality??0,moodImpact:P.moodImpact??L.qualityOfLife?.moodImpact??0,socialImpact:P.socialImpact??L.qualityOfLife?.socialImpact??[]}}))})]})})},{id:"functional-impact",title:"Daily Activities",component:l.jsx(G5,{limitedActivities:y.functionalImpact?.limitedActivities||[],mobilityAids:y.functionalImpact?.mobilityAids||[],onChange:P=>x(L=>({...L,functionalImpact:{limitedActivities:P.limitedActivities??L.functionalImpact?.limitedActivities??[],assistanceNeeded:L.functionalImpact?.assistanceNeeded??[],mobilityAids:P.mobilityAids??L.functionalImpact?.mobilityAids??[]}}))})},{id:"work-impact",title:"Work Impact",component:l.jsx(X5,{missedWork:y.workImpact?.missedWork||0,modifiedDuties:y.workImpact?.modifiedDuties||[],workLimitations:y.workImpact?.workLimitations||[],onChange:P=>x(L=>({...L,workImpact:{missedWork:P.missedWork??L.workImpact?.missedWork??0,modifiedDuties:P.modifiedDuties??L.workImpact?.modifiedDuties??[],workLimitations:P.workLimitations??L.workImpact?.workLimitations??[]}}))})},{id:"medications",title:"Medications",component:l.jsx(Y5,{current:y.medications?.current?.map(P=>({name:P.name,dosage:P.dosage||"",frequency:P.frequency||"",effectiveness:P.effectiveness||""}))||[],changes:y.medications?.changes||"",effectiveness:y.medications?.effectiveness||"",onChange:P=>x(L=>({...L,medications:{current:P.current??L.medications?.current??[],changes:P.changes??L.medications?.changes??"",effectiveness:P.effectiveness??L.medications?.effectiveness??""}}))})},{id:"treatments",title:"Treatments",component:l.jsx(K5,{recent:y.treatments?.recent?.map(P=>({type:P.type,provider:P.provider||"",effectiveness:P.effectiveness||"",date:P.date||new Date().toISOString()}))||[],effectiveness:y.treatments?.effectiveness||"",planned:y.treatments?.planned||[],onChange:P=>x(L=>({...L,treatments:{recent:P.recent??L.treatments?.recent??[],effectiveness:P.effectiveness??L.treatments?.effectiveness??"",planned:P.planned??L.treatments?.planned??[]}}))})},{id:"comparison",title:"Comparison",component:l.jsx(H5,{worseningSince:y.comparison?.worseningSince||"",newLimitations:y.comparison?.newLimitations||[],onChange:P=>x(L=>({...L,comparison:{worseningSince:P.worseningSince??L.comparison?.worseningSince??"",newLimitations:P.newLimitations??L.comparison?.newLimitations??[]}}))})},{id:"notes",title:"Additional Notes",component:l.jsx(We,{children:l.jsx(Ve,{className:"pt-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Additional Notes"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Add any additional information about your pain, triggers, or observations."}),l.jsx("textarea",{value:y.notes,onChange:P=>x(L=>({...L,notes:P.target.value})),placeholder:"Describe any additional details about your pain, what might have triggered it, or anything else that might be helpful...",className:"w-full h-32 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-primary focus:border-transparent"}),v&&l.jsx(Q5,{text:y.notes||"",onValidationGenerated:w,isActive:!0})]})})})},{id:"wellness-toolkit",title:"Wellness Toolkit",component:l.jsx(We,{children:l.jsxs(Ve,{className:"pt-6 space-y-6",children:[v&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-sm font-semibold text-muted-foreground",children:[l.jsx(uh,{className:"h-4 w-4"}),l.jsx("span",{children:"Recent validation messages"})]}),l.jsx(Je,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(P=>!P),children:a?"Hide":"Show"})]}),a?l.jsx(J5,{validations:s,onClear:r}):l.jsx("p",{className:"text-xs text-muted-foreground",children:"Validation stays here whenever you need reassurance. You can reopen it anytime."})]}),t.showProgress&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-sm font-semibold text-muted-foreground",children:[l.jsx(es,{className:"h-4 w-4 text-primary"}),l.jsx("span",{children:"Whole-person progress"})]}),l.jsx(Je,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(P=>!P),children:c?"Hide tools":"Open tools"})]}),c?l.jsxs("div",{className:"space-y-3",children:[l.jsx(eS,{painEntries:e,onProgressUpdate:j}),u==="saving"&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx(Yh,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{children:"Saving wellness insights securely…"})]}),u==="saved"&&l.jsx("p",{className:"text-xs text-success",children:"Progress entry saved with privacy protections."}),u==="error"&&l.jsx("p",{className:"text-xs text-destructive",children:"We couldn’t save this right now, but your notes remain local."})]}):l.jsx("p",{className:"text-xs text-muted-foreground",children:"These tools honour wins beyond pain scores. Open them whenever you have the energy."})]})]})})}],N=()=>{n(y),x({baselineData:{pain:0,locations:[],symptoms:[]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"",effectiveness:""},treatments:{recent:[],effectiveness:"",planned:[]},qualityOfLife:{sleepQuality:0,moodImpact:0,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:""}),f(0)};return p8(m,C.length,f,N),l.jsx("div",{className:"mobile-pain-entry-form h-screen flex flex-col",children:l.jsx("form",{onSubmit:P=>{P.preventDefault(),N()},className:"flex-1 flex flex-col",children:l.jsx("div",{className:"flex-1",children:l.jsx(g8,{onCardChange:f,showIndicators:!1,showNavigation:!1,children:C.map((P,L)=>l.jsx("div",{className:"h-full",children:l.jsx(m8,{sections:C,currentSection:L,onSectionChange:f,onSubmit:N,submitLabel:"Save Pain Entry"})},P.id))})})})})}function k8(n){return["No pain - feeling good!","Very mild pain - barely noticeable","Mild pain - noticeable but not distracting","Mild pain - slightly distracting","Moderate pain - can be ignored if busy","Moderate pain - can't be ignored, affects some activities","Moderately strong pain - interferes with normal activities","Strong pain - interferes with most activities","Very strong pain - difficult to concentrate","Intense pain - unable to engage in normal activities","Excruciating pain - bedridden and possibly delirious"][n]||""}const j8={xs:"475px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1600px","4xl":"1920px"};function _8(n){const[e,t]=W.useState(()=>typeof window>"u"?!1:window.matchMedia(n).matches);return W.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia(n),i=r=>t(r.matches);return t(s.matches),s.addEventListener?(s.addEventListener("change",i),()=>s.removeEventListener("change",i)):(s.addListener(i),()=>s.removeListener(i))},[n]),e}function Um(n){const e=`(min-width: ${j8[n]})`;return _8(e)}function C8(){const n=Um("md"),e=Um("lg"),t=Um("xl");return{isMobile:!n,isTablet:n&&!e,isDesktop:e,isWidescreen:t}}function A8({onSubmit:n}){const{isMobile:e}=C8();return e?l.jsx(N8,{onSubmit:n}):l.jsxs(We,{className:"xl:col-span-1","data-walkthrough":"pain-entry-form",children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(Yi,{className:"h-5 w-5"}),l.jsx("span",{children:"Record Pain Entry"})]}),l.jsx(ur,{children:"Track your pain levels, symptoms, and daily impact"})]}),l.jsx(Ve,{children:l.jsx(f8,{onSubmit:n})})]})}function P8({entries:n}){const e=w_(),t=[...n].sort((s,i)=>new Date(s.timestamp).getTime()-new Date(i.timestamp).getTime()).map(s=>({timestamp:s2(new Date(s.timestamp),"MM/dd HH:mm"),pain:s.baselineData.pain}));return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pain History Chart"}),l.jsx("div",{className:"h-64",children:l.jsx(nk,{width:"100%",height:"100%",children:l.jsxs(sk,{data:t,children:[l.jsx(ik,{dataKey:"timestamp"}),l.jsx(rk,{domain:[0,10]}),l.jsx(ak,{}),l.jsx(ok,{type:"monotone",dataKey:"pain",stroke:"#3b82f6",strokeWidth:2,isAnimationActive:!e})]})})})]})}class L8{analyzePatterns(e){if(e.length<3)return[];const t=[],s=this.analyzeSymptomPainCorrelation(e);s.length>0&&t.push({id:"symptom-pain-correlation",name:"Symptom-Pain Correlation",confidence:.8,description:"Strong correlation found between specific symptoms and high pain levels",triggers:s.map(a=>a.symptom),recommendations:["Monitor and manage high-correlation symptoms early","Consider preventive measures for identified triggers","Discuss symptom management with healthcare provider"]});const i=this.analyzeTemporalPatterns(e);i.cyclical.strength>.6&&t.push({id:"temporal-pattern",name:"Cyclical Pain Pattern",confidence:i.cyclical.strength,description:`Pain levels follow a ${i.cyclical.period} pattern`,triggers:[`${i.cyclical.period} cycle`],recommendations:["Plan activities around predictable pain cycles","Prepare pain management strategies in advance","Track additional factors during high-pain periods"]});const r=this.analyzeMedicationEffectiveness(e);return r.length>0&&t.push({id:"medication-effectiveness",name:"Medication Effectiveness Pattern",confidence:.7,description:"Identified patterns in medication effectiveness",triggers:r.map(a=>a.medication),recommendations:["Review medication timing and effectiveness with provider","Consider dose adjustments for low-effectiveness medications","Track side effects and their impact on daily function"]}),t}predictPain(e,t="24h"){if(e.length<5)return{predictedPain:0,confidence:0,timeframe:t,factors:[]};const s=e.slice(-10),i=s.reduce((d,u)=>d+u.baselineData.pain,0)/s.length,r=this.calculateTrend(s),a=this.calculateSeasonalFactor(new Date),o=this.calculateStressFactor(s);let c=i;return c+=r*this.getTimeframeMultiplier(t),c+=a,c+=o,c=Math.max(0,Math.min(10,c)),{predictedPain:Math.round(c*10)/10,confidence:Math.min(.9,e.length/20),timeframe:t,factors:[{factor:"Recent Trend",impact:r,description:r>0?"Pain increasing":r<0?"Pain decreasing":"Pain stable"},{factor:"Seasonal",impact:a,description:this.getSeasonalDescription(a)},{factor:"Stress/Sleep",impact:o,description:this.getStressDescription(o)}]}}analyzeCorrelations(e){return{symptomCorrelations:this.analyzeSymptomPainCorrelation(e),activityCorrelations:this.analyzeActivityCorrelations(e),medicationEffectiveness:this.analyzeMedicationEffectiveness(e)}}analyzeTrends(e){const t=this.calculateOverallTrend(e),s=this.analyzeTemporalPatterns(e);return{overallTrend:t.direction,trendStrength:Math.abs(t.strength),periodicPatterns:[{pattern:"Weekly Cycle",strength:s.weekly.strength,description:`${s.weekly.strength>.5?"Strong":"Weak"} weekly pattern detected`},{pattern:"Monthly Cycle",strength:s.monthly.strength,description:`${s.monthly.strength>.5?"Strong":"Weak"} monthly pattern detected`}],seasonalFactors:this.analyzeSeasonalFactors()}}analyzeSymptomPainCorrelation(e){const t=new Map;return e.forEach(s=>{(s.baselineData.symptoms||[]).forEach(i=>{t.has(i)||t.set(i,{painSum:0,count:0});const r=t.get(i);r.painSum+=s.baselineData.pain,r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({symptom:s,painCorrelation:i.painSum/i.count,frequency:i.count})).filter(s=>s.frequency>=2).sort((s,i)=>i.painCorrelation-s.painCorrelation)}analyzeActivityCorrelations(e){const t=new Map;return e.forEach(s=>{(s.functionalImpact?.limitedActivities||[]).forEach(i=>{t.has(i)||t.set(i,{painSum:0,count:0});const r=t.get(i);r.painSum+=s.baselineData.pain,r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({activity:s,painImpact:i.painSum/i.count,frequency:i.count})).filter(s=>s.frequency>=2).sort((s,i)=>i.painImpact-s.painImpact)}analyzeMedicationEffectiveness(e){const t=new Map;return e.forEach(s=>{(s.medications?.current||[]).forEach(i=>{t.has(i.name)||t.set(i.name,{effectiveness:0,painReduction:0,count:0});const r=t.get(i.name),a=this.parseEffectiveness(i.effectiveness||"moderate");r.effectiveness+=a,r.painReduction+=Math.max(0,10-s.baselineData.pain),r.count+=1})}),Array.from(t.entries()).map(([s,i])=>({medication:s,effectivenessScore:i.effectiveness/i.count,painReduction:i.painReduction/i.count})).filter(s=>s.effectivenessScore>0).sort((s,i)=>i.effectivenessScore-s.effectivenessScore)}analyzeTemporalPatterns(e){const t=new Array(7).fill(0).map(()=>({sum:0,count:0})),s=new Array(31).fill(0).map(()=>({sum:0,count:0}));e.forEach(a=>{const o=new Date(a.timestamp),c=new Date(o.getFullYear(),o.getMonth(),o.getDate()),d=c.getDay(),u=c.getDate()-1;t[d].sum+=a.baselineData.pain,t[d].count+=1,u<31&&(s[u].sum+=a.baselineData.pain,s[u].count+=1)});const i=t.map(a=>a.count>0?a.sum/a.count:0),r=s.map(a=>a.count>0?a.sum/a.count:0);return{cyclical:{period:"weekly",strength:this.calculateVariance(i)/10},weekly:{strength:this.calculateVariance(i)/10,data:i},monthly:{strength:this.calculateVariance(r)/10,data:r}}}calculateTrend(e){if(e.length<3)return 0;const t=e.map(u=>u.baselineData.pain),s=t.length,i=Array.from({length:s},(u,h)=>h),r=i.reduce((u,h)=>u+h,0),a=t.reduce((u,h)=>u+h,0),o=i.reduce((u,h,m)=>u+h*t[m],0),c=i.reduce((u,h)=>u+h*h,0);return(s*o-r*a)/(s*c-r*r)}calculateOverallTrend(e){const t=this.calculateTrend(e.slice(-10));return{direction:t>.1?"worsening":t<-.1?"improving":"stable",strength:Math.abs(t)}}calculateSeasonalFactor(e){const t=e.getMonth();return[.2,.1,-.1,-.2,-.2,0,0,0,-.1,.1,.2,.2][t]}calculateStressFactor(e){const t=e.slice(-3),s=t.reduce((o,c)=>o+(c.qualityOfLife?.sleepQuality||5),0)/t.length,i=t.reduce((o,c)=>o+(c.qualityOfLife?.moodImpact||5),0)/t.length,r=(5-s)*.2,a=(i-5)*.2;return r+a}getTimeframeMultiplier(e){switch(e){case"24h":return .5;case"7d":return 2;case"30d":return 5;default:return 1}}getSeasonalDescription(e){return e>.1?"Seasonal factors may increase pain":e<-.1?"Seasonal factors may reduce pain":"Neutral seasonal impact"}getStressDescription(e){return e>.3?"Poor sleep/stress may worsen pain":e>.1?"Mild stress/sleep impact":"Good sleep/stress management"}analyzeSeasonalFactors(){return[{factor:"Weather Sensitivity",impact:.2,season:"Winter"},{factor:"Activity Level",impact:-.1,season:"Spring"}]}parseEffectiveness(e){const t=e.toLowerCase();return t.includes("excellent")||t.includes("very good")?5:t.includes("good")||t.includes("effective")?4:t.includes("moderate")||t.includes("fair")?3:t.includes("poor")||t.includes("minimal")?2:t.includes("none")||t.includes("ineffective")?1:3}calculateVariance(e){const t=e.reduce((i,r)=>i+r,0)/e.length,s=e.reduce((i,r)=>i+Math.pow(r-t,2),0)/e.length;return Math.sqrt(s)}}const Fu=new L8;function M8({entries:n}){const e=W.useMemo(()=>n.length<3?null:{patterns:Fu.analyzePatterns(n),prediction:Fu.predictPain(n,"7d"),correlations:Fu.analyzeCorrelations(n),trends:Fu.analyzeTrends(n)},[n]);if(!e||n.length<3)return l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx($s,{className:"h-5 w-5"}),l.jsx("span",{children:"AI-Powered Insights"})]}),l.jsx(ur,{children:"Advanced pain analytics require at least 3 entries"})]}),l.jsx(Ve,{children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx($s,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Keep tracking your pain to unlock predictive insights and pattern recognition"})]})})]});const t=i=>{switch(i){case"improving":return l.jsx(ph,{className:"h-5 w-5 text-green-500"});case"worsening":return l.jsx(Fn,{className:"h-5 w-5 text-red-500"});default:return l.jsx(_s,{className:"h-5 w-5 text-blue-500"})}},s=i=>{switch(i){case"improving":return"text-green-600 bg-green-50";case"worsening":return"text-red-600 bg-red-50";default:return"text-blue-600 bg-blue-50"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[t(e.trends.overallTrend),l.jsx("span",{children:"Pain Trend Analysis"})]}),l.jsx(ur,{children:"Your pain pattern analysis over recent entries"})]}),l.jsxs(Ve,{children:[l.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s(e.trends.overallTrend)}`,children:[e.trends.overallTrend.charAt(0).toUpperCase()+e.trends.overallTrend.slice(1)," Trend",l.jsxs("span",{className:"ml-2",children:["(",Math.round(e.trends.trendStrength*100),"% confidence)"]})]}),e.trends.periodicPatterns.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",children:"Detected Patterns:"}),l.jsx("div",{className:"space-y-2",children:e.trends.periodicPatterns.map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{children:i.pattern}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${i.strength*100}%`}})}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(i.strength*100),"%"]})]})]},r))})]})]})]}),l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(pr,{className:"h-5 w-5"}),l.jsx("span",{children:"7-Day Pain Forecast"})]}),l.jsx(ur,{children:"AI-powered prediction based on your patterns"})]}),l.jsxs(Ve,{children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary",children:e.prediction.predictedPain}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Predicted Level"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-semibold text-muted-foreground",children:[Math.round(e.prediction.confidence*100),"%"]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Confidence"})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",children:"Contributing Factors:"}),l.jsx("div",{className:"space-y-2",children:e.prediction.factors.map((i,r)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:i.factor}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("span",{className:`px-2 py-1 rounded text-xs ${i.impact>0?"bg-red-100 text-red-600":i.impact<0?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:[i.impact>0?"+":"",Vt(i.impact,1)]})})]},r))})]})]})]}),e.patterns.length>0&&l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(wa,{className:"h-5 w-5"}),l.jsx("span",{children:"Identified Patterns"})]}),l.jsx(ur,{children:"AI-detected patterns in your pain data"})]}),l.jsx(Ve,{children:l.jsx("div",{className:"space-y-4",children:e.patterns.map(i=>l.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium",children:i.name}),l.jsxs("span",{className:"text-sm bg-blue-100 text-blue-600 px-2 py-1 rounded",children:[Math.round(i.confidence*100),"% confidence"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i.description}),i.triggers.length>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Triggers: "}),l.jsx("span",{className:"text-xs",children:i.triggers.join(", ")})]}),i.recommendations.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Recommendations:"}),l.jsx("ul",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:i.recommendations.map((r,a)=>l.jsxs("li",{className:"flex items-start space-x-1",children:[l.jsx("span",{children:"•"}),l.jsx("span",{children:r})]},a))})]})]},i.id))})})]}),(e.correlations.symptomCorrelations.length>0||e.correlations.medicationEffectiveness.length>0)&&l.jsxs(We,{children:[l.jsxs(bt,{children:[l.jsx(wt,{children:"Correlation Analysis"}),l.jsx(ur,{children:"Relationships between symptoms, medications, and pain levels"})]}),l.jsx(Ve,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.correlations.symptomCorrelations.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-3",children:"High-Pain Symptoms"}),l.jsx("div",{className:"space-y-2",children:e.correlations.symptomCorrelations.slice(0,5).map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{children:i.symptom}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-12 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${i.painCorrelation/10*100}%`}})}),l.jsx("span",{className:"text-xs text-muted-foreground",children:Vt(i.painCorrelation,1)})]})]},r))})]}),e.correlations.medicationEffectiveness.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-3",children:"Medication Effectiveness"}),l.jsx("div",{className:"space-y-2",children:e.correlations.medicationEffectiveness.slice(0,5).map((i,r)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{className:"truncate",children:i.medication}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-12 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${i.effectivenessScore/5*100}%`}})}),l.jsx("span",{className:"text-xs text-muted-foreground",children:Vt(i.effectivenessScore,1)})]})]},r))})]})]})})]})]})}function T8({entries:n}){const[e,t]=W.useState("chart"),s=[{id:"chart",name:"Trend Chart",icon:es,description:"Pain levels over time"},{id:"bodymap",name:"Body Map",icon:Q0,description:"Pain location heatmap"},{id:"analytics",name:"AI Insights",icon:$s,description:"Predictive analysis"}];return l.jsxs(We,{className:"xl:col-span-1","data-walkthrough":"pain-visualization",children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(Fn,{className:"h-5 w-5"}),l.jsx("span",{children:"Advanced Pain Visualization"})]}),l.jsx(ur,{children:"Comprehensive analysis of your pain patterns and trends"})]}),l.jsxs(Ve,{children:[l.jsx("div",{className:"flex flex-wrap gap-2 mb-6 p-1 bg-muted rounded-lg",children:s.map(i=>{const r=i.icon;return l.jsxs(Je,{variant:e===i.id?"default":"ghost",size:"sm",onClick:()=>t(i.id),className:"flex-1 min-w-fit",children:[l.jsx(r,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:i.name}),l.jsx("span",{className:"sm:hidden",children:i.name.split(" ")[0]})]},i.id)})}),l.jsxs("div",{className:"min-h-[400px]",children:[e==="chart"&&l.jsxs("div",{children:[l.jsx(P8,{entries:n}),n.length>=5&&l.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Quick Insights:"}),l.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[l.jsxs("p",{children:["• Average Pain Level: ",b1(n)]}),l.jsxs("p",{children:["• Total Entries: ",n.length]}),l.jsxs("p",{children:["• Tracking Period: ",D8(n)," days"]})]})]})]}),e==="bodymap"&&l.jsxs("div",{children:[l.jsx(nS,{entries:n,mode:"heatmap",className:"mb-4"}),n.length===0&&l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Q0,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Record pain entries to see location heatmap"})]})]}),e==="analytics"&&l.jsx("div",{className:"max-h-[500px] overflow-y-auto pr-2",children:l.jsx(M8,{entries:n})})]}),n.length>0&&l.jsx("div",{className:"mt-6 pt-4 border-t border-muted",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Entries"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:b1(n)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Pain"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:E8(n)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Locations"})]})]})})]})]})}function b1(n){if(n.length===0)return Vt(0,1);const e=n.reduce((t,s)=>t+s.baselineData.pain,0);return Vt(e/n.length,1)}function D8(n){if(n.length===0)return 0;const e=n.map(i=>new Date(i.timestamp)),t=Math.min(...e.map(i=>i.getTime())),s=Math.max(...e.map(i=>i.getTime()));return Math.ceil((s-t)/(1e3*60*60*24))+1}function E8(n){const e=new Set;return n.forEach(t=>{t.baselineData.locations?.forEach(s=>{e.add(s)})}),e.size}function I8(n){const e=n.toLowerCase();return e.includes("relationship")||e.includes("people")||e.includes("connect")?"relational":e.includes("feel")||e.includes("emotion")||e.includes("heart")?"emotional":e.includes("meaning")||e.includes("purpose")||e.includes("spiritual")?"spiritual":e.includes("myself")||e.includes("i am")||e.includes("identity")?"self-knowledge":"practical"}function R8(n){const t=["can","will","should","need to","must","always","never"].reduce((s,i)=>s+(n.toLowerCase().includes(i)?1:0),0);return Math.min(100,t*20+40)}function O8(n){const t=["life-changing","transformed","completely","totally","fundamental"].reduce((s,i)=>s+(n.toLowerCase().includes(i)?1:0),0);return Math.min(100,t*30+30)}function F8(n,e){const t=n.toLowerCase().split(" ").filter(i=>i.length>4);let s=0;for(const i of e){const r=i.notes.toLowerCase().split(" ");t.some(a=>r.includes(a))&&s++}return e.length===0?0:Math.min(100,s/e.length*100)}async function w1(n,e,t){const s=[];return t.filter(r=>{const a=r.notes.toLowerCase();return a.includes("learned")||a.includes("realized")||a.includes("understand now")||a.includes("wisdom")||a.includes("insight")}).forEach((r,a)=>{r.notes.length>30&&s.push({id:`wisdom_${n}_${a}`,category:I8(r.notes),insight:r.notes,dateGained:r.timestamp,contextualSource:r.context,applicability:R8(r.notes),transformativeLevel:O8(r.notes),sharedWith:[],reinforcementLevel:F8(r.notes,t)})}),s.slice(0,10)}function zu(n){if(n.length<2)return 0;let e=0,t=0;for(let s=1;s<n.length;s++)n[s]>n[s-1]?e++:n[s]<n[s-1]&&t++;return(e-t)/(n.length-1)*100}function S1(n){if(!n.length)return 0;const e=n.reduce((t,s)=>t+s,0)/n.length;return n.reduce((t,s)=>t+Math.pow(s-e,2),0)/n.length}function z8(n,e){const t=n.slice(-7).reduce((i,r)=>i+r.baselineData.pain,0)/Math.max(1,Math.min(7,n.length||1)),s=e.slice(-7).reduce((i,r)=>i+r.mood,0)/Math.max(1,Math.min(7,e.length||1));return{empathyForecast:[{timeframe:"next week",predictedEmpathyLevel:Math.max(0,Math.min(100,s*10)),confidenceInterval:{min:40,max:80},influencingFactors:[],recommendedPreparations:[]}],riskPrediction:[{riskType:"compassion_fatigue",riskLevel:Math.max(0,Math.min(100,t*10)),timeToRisk:14,earlyWarningSignals:[],preventionStrategies:[],mitigation:[]}],opportunityPrediction:[{opportunityType:"growth_window",potentialImpact:60,timeWindow:"next 2 weeks",preparationNeeded:[],supportRequired:[],expectedOutcomes:[]}],burnoutRisk:{currentRiskLevel:Math.max(0,Math.min(100,100-s+t*.5)),riskFactors:["high_pain","low_mood"],protectiveFactors:[],timeToIntervention:7,interventionStrategies:[],recoveryTimeline:"2-4 weeks"},growthPotential:{currentGrowthTrajectory:Math.max(0,Math.min(100,s-t*.3)),growthAccelerators:["emotional_awareness","social_support"],growthBarriers:[],optimalGrowthConditions:[],expectedTimeline:"1 month",supportNeeded:[]},adaptiveRecommendations:[],personalizedInterventions:[]}}const B8=["help","support","encourage","check in","showed up","listened"],$8=["volunteered","brought","organized","advocated","dropped off"],W8=["burned out","exhausted","drained","too tired","could not help"],N1=["boundary","limit","said no","protected my space","took a pause"],k1=["rested","recharged","took a break","scheduled downtime","stepped back"],j1=["absorbed","overwhelmed by others","took on too much","emotionally flooded"],U8=["connected deeply","shared emotions","mirrored feelings","felt their pain","resonated"],q8=["numb","disconnected","shut down","detached","couldn't feel"];function Bu(n,e=0,t=100){return Number.isNaN(n)||!Number.isFinite(n)?e:Math.max(e,Math.min(t,n))}function Vi(n){return(n??"").toLowerCase()}function cr(n,e){if(!n)return!1;const t=Vi(n);return e.some(s=>t.includes(s))}function $u(n){let e=1;return typeof n.hopefulness=="number"&&(e+=(n.hopefulness-5)/10),typeof n.mood=="number"&&(e+=(n.mood-5)/20),typeof n.energy=="number"&&n.energy>=7&&(e+=.2),n.socialSupport&&n.socialSupport!=="none"&&(e+=.25),Math.max(.4,e)}class V8{_config;userPatterns=new Map;culturalContext=new Map;wisdomDatabase=new Map;predictionModels=new Map;constructor(e){this._config=e}async calculateAdvancedEmpathyMetrics(e,t,s=[],i,r,a,o){this._config.learningRate,await this.updateUserPatterns(e,t,s);const c=await this.getOrCreatePredictionModel(e),d=await this.calculateEnhancedEmotionalIntelligence(e,s,t),u=await this.calculateAdvancedCompassionateProgress(e,t,s),h=await this.calculateAdvancedEmpathyKPIs(e,s,i),m=await this.calculateAdvancedHumanizedMetrics(e,t,s,r);return this.calculateTraumaIntegration(t,s),{emotionalIntelligence:{selfAwareness:d.selfAwareness,selfRegulation:d.selfRegulation,motivation:d.motivation,empathy:d.empathy,socialSkills:d.socialSkills,emotionalGranularity:this.calculateEmotionalGranularity(s),metaEmotionalAwareness:this.calculateMetaEmotionalAwareness(s),neuralEmpathyPatterns:await this.calculateNeuralEmpathyProfile(e,s)},compassionateProgress:{selfCompassion:u.selfCompassion,selfCriticism:u.selfCriticism,progressCelebration:u.progressCelebration,setbackResilience:u.setbackResilience,hopefulness:u.hopefulness,postTraumaticGrowth:this.calculatePostTraumaticGrowth(t,s),meaningMaking:this.calculateMeaningMaking(s),adaptiveReframing:this.calculateAdaptiveReframing(s),compassionFatigue:this.calculateCompassionFatigue(s),recoveryPatterns:await this.analyzeRecoveryPatterns(e,t,s)},empathyKPIs:{validationReceived:h.validationReceived,validationGiven:h.validationGiven,emotionalSupport:h.emotionalSupport,understandingFelt:h.understandingFelt,connectionQuality:h.connectionQuality,empathicAccuracy:this.calculateEmpathicAccuracy(s),empathicConcern:this.calculateEmpathicConcern(s),perspectiveTaking:this.calculatePerspectiveTaking(s),empathicMotivation:this.calculateEmpathicMotivation(s),boundaryMaintenance:this.calculateBoundaryMaintenance(s),culturalEmpathy:await this.calculateCulturalEmpathy(e,s,o)},humanizedMetrics:{courageScore:m.courageScore,vulnerabilityAcceptance:m.vulnerabilityAcceptance,authenticityLevel:m.authenticityLevel,growthMindset:m.growthMindset,wisdomGained:await this.generateWisdomProfile(e,t,s),innerStrength:this.calculateInnerStrength(t,s),dignityMaintenance:this.calculateDignityMaintenance(s),purposeClarity:this.calculatePurposeClarity(s),spiritualWellbeing:this.calculateSpiritualWellbeing(s),lifeNarrativeCoherence:this.calculateLifeNarrativeCoherence(s)},empathyIntelligence:await this.calculateEmpathyIntelligenceProfile(e,s,t),temporalPatterns:await this.analyzeTemporalEmpathyPatterns(e,s,t),microEmpathyMoments:await this.trackMicroEmpathyMoments(e,s),predictiveMetrics:await this.generatePredictiveModel(e,t,s,c)}}async generateAdvancedInsights(e,t,s){const i=[];return i.push(...await this.generatePatternInsights(e,t,s)),i.push(...await this.generateCorrelationInsights(e,t,s)),i.push(...await this.generateGrowthInsights(e,t,s)),i.push(...await this.generateWisdomInsights(e,t,s)),i.push(...await this.generatePredictiveInsights(e,t,s)),i.sort((r,a)=>a.confidence-r.confidence).slice(0,12)}async generatePersonalizedRecommendations(e,t,s){const i=[],r=this.userPatterns.get(e);return t.predictiveMetrics.burnoutRisk.currentRiskLevel>70&&i.push(...await this.generateBurnoutPreventionRecommendations(e,t)),t.predictiveMetrics.growthPotential.currentGrowthTrajectory>60&&i.push(...await this.generateGrowthAccelerationRecommendations(e,t)),i.push(...await this.generateMicroInterventions(e,t)),i.push(...await this.generateWisdomApplicationRecommendations(e,t)),i.push(...await this.generateCulturalEmpathyRecommendations(e,t)),i.sort((a,o)=>this.prioritizeRecommendations(a,o,r)).slice(0,8)}async calculateNeuralEmpathyProfile(e,t){return{mirrorNeuronActivity:this.calculateMirrorNeuronActivity(t),emotionalContagionResistance:this.calculateEmotionalContagionResistance(t),empathicDistressManagement:this.calculateEmpathicDistressManagement(t),cognitivePerspectiveTaking:this.calculateCognitivePerspectiveTaking(t),affectivePerspectiveTaking:this.calculateAffectivePerspectiveTaking(t),empathyFlexibility:this.calculateEmpathyFlexibility(t),empathyCalibration:this.calculateEmpathyCalibration(t),empathicMemory:this.calculateEmpathicMemory(t)}}calculateMirrorNeuronActivity(e){if(e.length===0)return 50;let t=0,s=0,i=0;for(const d of e){const u=$u(d);s+=u;const h=Vi(d.notes),m=Vi(d.context);(cr(h,U8)||h.includes("felt their")||h.includes("could feel")||h.includes("mirrored")||m.includes("emotional connection")||m.includes("support group"))&&(t+=u),(cr(h,q8)||m.includes("detached"))&&(i+=1)}if(s===0)return 50;const r=t/s*55,o=e.reduce((d,u)=>d+(u.emotionalRegulation??5),0)/e.length/10*20,c=i/e.length*35;return Bu(40+r+o-c)}calculateEmotionalContagionResistance(e){if(e.length===0)return 50;let t=0,s=0,i=0;for(const d of e){const u=$u(d);s+=u;const h=Vi(d.notes),m=Vi(d.context),f=cr(h,N1)||d.copingStrategies?.some(v=>Vi(v).includes("boundary")),y=cr(h,k1);(f||y)&&(t+=u),(cr(h,j1)||h.includes("absorbed their emotions")||(d.anxiety??0)>7&&m.includes("social"))&&(i+=u+.3)}if(s===0)return 50;const r=t/s*60,a=i/s*55,c=e.reduce((d,u)=>d+(u.emotionalRegulation??5),0)/e.length/10*20;return Bu(35+r+c-a,10,100)}calculateEmpathicDistressManagement(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("too much pain")||a.notes.toLowerCase().includes("can't handle their suffering")||a.anxiety>7&&a.notes.toLowerCase().includes("others")),s=e.filter(a=>a.copingStrategies.includes("self-care")||a.copingStrategies.includes("mindfulness")||a.notes.toLowerCase().includes("stepped back")||a.notes.toLowerCase().includes("took care of myself")),i=t.length/e.length*40,r=s.length/e.length*60;return Math.min(100,50+r-i)}calculateEmotionalGranularity(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=e.filter(a=>a.notes.split(" ").length>10&&(a.notes.includes("and")||a.notes.includes("but")||a.notes.includes("also"))),i=t*10,r=s.length/e.length*30;return Math.min(100,i*.7+r)}calculateMetaEmotionalAwareness(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("notice that i")||a.notes.toLowerCase().includes("realize i'm")||a.notes.toLowerCase().includes("aware of my")||a.notes.toLowerCase().includes("observing my")),s=e.reduce((a,o)=>a+o.emotionalRegulation,0)/e.length,i=t.length/e.length*60,r=s*4;return Math.min(100,i+r)}calculatePostTraumaticGrowth(e,t){if(e.length===0&&t.length===0)return 50;const s=t.filter(a=>a.notes.toLowerCase().includes("stronger because")||a.notes.toLowerCase().includes("learned from")||a.notes.toLowerCase().includes("grateful for the lesson")||a.notes.toLowerCase().includes("helped me grow")),i=e.filter(a=>a.baselineData.pain>=7),r=i.length>0?s.length/i.length:0;return Math.min(100,r*80+20)}calculateMeaningMaking(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("meaning")||a.notes.toLowerCase().includes("purpose")||a.notes.toLowerCase().includes("why this happened")||a.notes.toLowerCase().includes("makes sense")),s=e.filter(a=>a.hopefulness>=7&&a.notes.length>30),i=t.length/e.length*60,r=s.length/e.length*40;return Math.min(100,i+r)}async generateWisdomProfile(e,t,s){return{insights:await w1(e,t,s),wisdomCategories:{practicalWisdom:this.calculatePracticalWisdom(s),emotionalWisdom:this.calculateEmotionalWisdom(s),spiritualWisdom:this.calculateSpiritualWisdom(s),relationalWisdom:this.calculateRelationalWisdom(s),selfKnowledgeWisdom:this.calculateSelfKnowledgeWisdom(s)},wisdomGrowthRate:this.calculateWisdomGrowthRate(s),wisdomApplication:this.calculateWisdomApplication(s),wisdomSharing:this.calculateWisdomSharing(s),integratedWisdom:this.calculateIntegratedWisdom(s)}}calculatePracticalWisdom(e){const t=e.length?e.reduce((s,i)=>s+i.emotionalClarity,0)/e.length:5;return Math.max(0,Math.min(100,t*10))}calculateEmotionalWisdom(e){if(e.length===0)return 50;const t=e.reduce((i,r)=>i+r.emotionalRegulation,0)/e.length,s=e.reduce((i,r)=>i+r.hopefulness,0)/e.length;return Math.max(0,Math.min(100,(t+s)*5))}async updateUserPatterns(e,t,s){const i={userId:e,patterns:[{recentPainAvg:t.slice(-7).reduce((r,a)=>r+a.baselineData.pain,0)/Math.max(1,Math.min(7,t.length))}],preferences:[],responsiveness:s.length?s.reduce((r,a)=>r+a.mood,0)/(s.length*10):.5};this.userPatterns.set(e,i)}async getOrCreatePredictionModel(e){const t=this.predictionModels.get(e);if(t)return t;const s={modelId:`pred_${e}`,accuracy:.7,trainingData:[],predictions:[]};return this.predictionModels.set(e,s),s}prioritizeRecommendations(e,t,s){const i={urgent:4,high:3,medium:2,low:1};return i[t.priority]-i[e.priority]}async calculateEnhancedEmotionalIntelligence(e,t,s){return{selfAwareness:this.calculateEmotionalAwareness(t),selfRegulation:this.calculateEmotionalRegulation(t),motivation:t.length?t.reduce((i,r)=>i+r.hopefulness,0)/t.length*10:50,empathy:this.calculateEmpathyQuotient(t),socialSkills:this.calculateRelationshipManagement(t)}}async calculateAdvancedCompassionateProgress(e,t,s){return{selfCompassion:this.calculateSelfCompassion(s),selfCriticism:Math.max(0,100-this.calculateSelfCompassion(s)),progressCelebration:Math.min(100,s.filter(i=>{const r=i.notes.toLowerCase();return r.includes("proud")||r.includes("celebrate")||r.includes("celebration")}).length/Math.max(1,s.length)*100),setbackResilience:this.calculateResilienceGrowth(t,s),hopefulness:s.length?s.reduce((i,r)=>i+r.hopefulness,0)/s.length*10:50}}calculateAdaptiveReframing(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("perspective")||s.notes.toLowerCase().includes("reframe")||s.notes.toLowerCase().includes("silver lining")).length;return Math.min(t/e.length*100,100)}calculateCompassionFatigue(e){if(e.length===0)return 20;const t=e.filter(s=>s.notes.toLowerCase().includes("tired")||s.notes.toLowerCase().includes("exhausted")||s.notes.toLowerCase().includes("burned out")).length;return Math.min(t/e.length*100,80)}async analyzeRecoveryPatterns(e,t,s){const i=t.slice(-30).map(a=>a.baselineData.pain),r=zu(i);return{avgRecoveryTime:Math.max(30,120-r),recoveryConsistency:Math.max(0,100-S1(i)*10),recoveryStrategies:[],setbackPredictors:[],resilienceFactors:[],recoveryTrajectory:[],adaptiveRecovery:Math.max(0,Math.min(100,r+50))}}async calculateAdvancedEmpathyKPIs(e,t,s){return{validationReceived:this.calculateSocialAwareness(t),validationGiven:this.calculateRelationshipManagement(t),emotionalSupport:this.calculateHumanConnection(t),understandingFelt:this.calculateEmpathicAccuracy(t),connectionQuality:this.calculateHumanConnection(t)}}calculateEmpathicAccuracy(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("understood")||s.notes.toLowerCase().includes("accurate")||s.notes.toLowerCase().includes("right")).length;return Math.min(t/e.length*100,100)}calculateEmpathicConcern(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("worried")||s.notes.toLowerCase().includes("concerned")||s.notes.toLowerCase().includes("care")).length;return Math.min(t/e.length*100,100)}calculatePerspectiveTaking(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("their perspective")||s.notes.toLowerCase().includes("see their side")||s.notes.toLowerCase().includes("understand them")).length;return Math.min(t/e.length*100,100)}calculateEmpathicMotivation(e){if(e.length===0)return 50;let t=0,s=0,i=0,r=0;for(const d of e){const u=$u(d);t+=u;const h=Vi(d.notes),m=Vi(d.context),f=cr(h,B8)||m.includes("support group")||m.includes("care team"),y=d.copingStrategies?.some(x=>Vi(x).includes("support others")||Vi(x).includes("community"));(f||y)&&(s+=u),cr(h,$8)&&(i+=1),(cr(h,W8)||(d.energy??5)<=3)&&(r+=1)}if(t===0)return 50;const a=s/t*55,o=i/e.length*25,c=r/e.length*45;return Bu(45+a+o-c)}calculateBoundaryMaintenance(e){if(e.length===0)return 50;let t=0,s=0,i=0,r=0;for(const d of e){const u=$u(d);t+=u;const h=Vi(d.notes),m=cr(h,N1)||d.copingStrategies?.some(y=>Vi(y).includes("boundary")),f=h.includes("asked for what i need")||h.includes("set expectations");(m||f)&&(s+=u),(cr(h,k1)||(d.energy??0)>=7||(d.stress??0)<=3)&&(i+=u*.6),(cr(h,j1)||h.includes("took on too much")||h.includes("people pleasing"))&&(r+=1)}if(t===0)return 50;const a=s/t*60,o=i/t*25,c=r/e.length*55;return Bu(40+a+o-c)}async calculateCulturalEmpathy(e,t,s){if(t.length===0)return{culturalAwareness:50,crossCulturalEmpathy:50,culturalHumility:50,universalEmpathy:50,culturalAdaptation:50,inclusiveEmpathy:50,intersectionalAwareness:50};const i=this.culturalContext.get(e),r=t.filter(c=>c.notes.toLowerCase().includes("culture")||c.notes.toLowerCase().includes("tradition")||c.notes.toLowerCase().includes("background")).length,a=Math.min(r/t.length*100,100),o=i?Math.min(100,a+5):a;return{culturalAwareness:o,crossCulturalEmpathy:Math.max(0,o-5),culturalHumility:Math.min(100,o+5),universalEmpathy:Math.max(0,Math.min(100,60+o/5)),culturalAdaptation:Math.max(0,o-10),inclusiveEmpathy:Math.min(100,o+10),intersectionalAwareness:Math.max(0,o-15)}}async calculateAdvancedHumanizedMetrics(e,t,s,i){const r=this.calculateHumanConnection(s),a=this.calculateDignityPreservation(s),o=this.calculateMeaningfulness(t,s);return{courageScore:Math.max(0,Math.min(100,(o+r)/2)),vulnerabilityAcceptance:Math.max(0,Math.min(100,r*.6+a*.4)),authenticityLevel:Math.max(0,Math.min(100,a)),growthMindset:Math.max(0,Math.min(100,(o+60)/1.2))}}calculateInnerStrength(e,t){const s=e.slice(-7).reduce((r,a)=>r+a.baselineData.pain,0)/Math.max(1,Math.min(7,e.length||1)),i=t.slice(-7).reduce((r,a)=>r+a.mood,0)/7;return Math.max(0,Math.min(100,i/s*50))}calculateDignityMaintenance(e){if(e.length===0)return 75;const t=e.filter(s=>s.notes.toLowerCase().includes("dignity")||s.notes.toLowerCase().includes("respect")||s.notes.toLowerCase().includes("worthy")).length;return Math.min(t/e.length*100+50,100)}calculatePurposeClarity(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("purpose")||s.notes.toLowerCase().includes("meaning")||s.notes.toLowerCase().includes("direction")).length;return Math.min(t/e.length*100+40,100)}calculateSpiritualWellbeing(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("spiritual")||s.notes.toLowerCase().includes("faith")||s.notes.toLowerCase().includes("transcendent")).length;return Math.min(t/e.length*100+40,100)}calculateLifeNarrativeCoherence(e){if(e.length===0)return 65;const t=e.filter(s=>s.notes.toLowerCase().includes("story")||s.notes.toLowerCase().includes("journey")||s.notes.toLowerCase().includes("path")).length;return Math.min(t/e.length*100+50,100)}async calculateEmpathyIntelligenceProfile(e,t,s){const i=this.calculateEmpathyQuotient(t),r=this.calculateEmotionalRegulation(t),a=this.calculateSocialCognition(t);return{empathyIQ:Math.max(0,Math.min(200,i*2)),empathyProcessingSpeed:Math.max(0,Math.min(100,60+r/2)),empathyAccuracy:Math.max(0,Math.min(100,i)),empathyDiversity:Math.max(0,Math.min(100,a)),empathyInnovation:Math.max(0,Math.min(100,50+(i-50)/2)),empathyLeadership:Math.max(0,Math.min(100,40+a/2)),empathyTeaching:Math.max(0,Math.min(100,40+i/3)),empathyHealing:Math.max(0,Math.min(100,50+r/3)),metaEmpathy:Math.max(0,Math.min(100,this.calculateMetaEmotionalAwareness(t))),empathyWisdom:Math.max(0,Math.min(100,this.calculateEmotionalWisdom(t)))}}async analyzeTemporalEmpathyPatterns(e,t,s){const i=t.slice(-30).map(a=>a.mood),r=new Date;return this.analyzeDailyPatterns(i),this.analyzeWeeklyPatterns(i),this.analyzeMonthlyTrends(i),{dailyPatterns:[{timeOfDay:"morning",empathyLevel:Math.max(0,Math.min(100,i[i.length-1]??50)),empathyQuality:"tender",triggers:[],optimalMoments:[],challengingMoments:[]}],weeklyTrends:[{week:r,avgEmpathyLevel:Math.max(0,Math.min(100,i.reduce((a,o)=>a+o,0)/Math.max(1,i.length))),empathyRange:{min:0,max:100},dominantPattern:"stable",growthAreas:[],breakthroughs:[]}],monthlyEvolution:[{month:r,evolutionScore:50,newCapabilities:[],deepenedCapacities:[],challenges:[],integrationLevel:50}],seasonalInfluences:[{season:"summer",empathyCharacteristics:[],seasonalChallenges:[],seasonalGifts:[],adaptationStrategies:[]}],lifePhaseEmpathy:[],empathyMilestones:[],empathyRegression:[],futurEmpathyProjection:{projectionTimeframe:"3 months",predictedGrowthAreas:[],anticipatedChallenges:[],developmentOpportunities:[],requiredSupports:[],confidenceLevel:60}}}async trackMicroEmpathyMoments(e,t){const s=Math.max(0,Math.min(100,t.reduce((i,r)=>i+r.mood,0)/Math.max(1,t.length)*10));return{microMoments:[],dailyMicroAverage:s,microEmpathyQuality:this.calculateMicroMomentQuality(t),microEmpathyConsistency:60,spontaneousEmpathy:55,mindfulEmpathy:65,empathyInterruptions:[],empathyRecovery:[]}}async generatePredictiveModel(e,t,s,i){return z8(t,s)}async generatePatternInsights(e,t,s){return[{id:"1",type:"pattern",title:"Empathy Pattern Detected",description:"Your empathy levels show consistent improvement over time.",confidence:85,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateCorrelationInsights(e,t,s){return[{id:"2",type:"correlation",title:"Pain-Empathy Correlation",description:"Higher pain levels correlate with increased empathy for others.",confidence:78,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateGrowthInsights(e,t,s){return[{id:"3",type:"improvement",title:"Empathy Growth Opportunity",description:"Focus on perspective-taking exercises for enhanced empathy.",confidence:82,actionable:!0,personalized:!1,timestamp:new Date,dataPoints:[]}]}async generateWisdomInsights(e,t,s){return(await w1(e,s.painEntries,s.moodEntries)).map(r=>({id:r.id,type:"celebration",title:`Wisdom: ${r.category}`,description:r.insight,confidence:Math.min(100,r.applicability),actionable:!0,personalized:!1,timestamp:r.dateGained,dataPoints:[]}))}async generatePredictiveInsights(e,t,s){return[{id:"5",type:"improvement",title:"Empathy Forecast",description:"Your empathy levels are predicted to increase over the next week.",confidence:74,actionable:!0,timestamp:new Date,personalized:!1,dataPoints:[]}]}async generateBurnoutPreventionRecommendations(e,t){return[{id:"1",category:"lifestyle",priority:"high",title:"Burnout Prevention",description:"Take regular breaks to prevent empathy fatigue.",rationale:"Frequent short rests reduce emotional overload.",steps:["Schedule 10-minute breaks","Practice mindfulness","Set boundaries"],expectedBenefits:["Reduced burnout risk"],timeframe:"1 week",effort:"low",personalization:[]}]}async generateGrowthAccelerationRecommendations(e,t){return[{id:"2",category:"cognitive",priority:"medium",title:"Accelerate Empathy Growth",description:"Engage in perspective-taking exercises to enhance empathy.",rationale:"Perspective-taking practices improve empathic accuracy.",steps:["Read diverse perspectives","Practice active listening","Volunteer"],expectedBenefits:["Improved perspective-taking"],timeframe:"2 weeks",effort:"medium",personalization:[]}]}async generateMicroInterventions(e,t){return[{id:"3",category:"emotional",priority:"low",title:"Daily Empathy Moment",description:"Take 2 minutes daily to reflect on others' perspectives.",rationale:"Micro-reflections build consistent empathic habits.",steps:["Set daily reminder","Practice empathy check-ins"],expectedBenefits:["Improved empathy awareness"],timeframe:"1 day",effort:"low",personalization:[]}]}async generateWisdomApplicationRecommendations(e,t){return[{id:"4",category:"social",priority:"medium",title:"Apply Your Wisdom",description:"Share your empathy insights with others to reinforce learning.",rationale:"Teaching others consolidates learning.",steps:["Mentor someone","Write about experiences","Join support groups"],expectedBenefits:["Enhanced wisdom integration"],timeframe:"1 month",effort:"medium",personalization:[]}]}async generateCulturalEmpathyRecommendations(e,t){return[{id:"5",category:"social",priority:"low",title:"Cultural Empathy Development",description:"Explore different cultural perspectives on pain and healing.",rationale:"Exposure to diverse perspectives deepens empathy.",steps:["Read multicultural literature","Attend cultural events","Learn about traditions"],expectedBenefits:["Broader empathy understanding"],timeframe:"2 months",effort:"medium",personalization:[]}]}calculateCognitivePerspectiveTaking(e){return this.calculatePerspectiveTaking(e)}calculateAffectivePerspectiveTaking(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("felt with")||s.notes.toLowerCase().includes("emotional connection")).length;return Math.min(t/e.length*100,100)}calculateEmpathyFlexibility(e){if(e.length===0)return 60;const t=e.filter(s=>s.notes.toLowerCase().includes("adapt")||s.notes.toLowerCase().includes("adjust")).length;return Math.min(t/e.length*100+40,100)}calculateEmpathyCalibration(e){if(e.length===0)return 55;const t=e.filter(s=>s.notes.toLowerCase().includes("balance")||s.notes.toLowerCase().includes("appropriate")).length;return Math.min(t/e.length*100+35,100)}calculateEmpathicMemory(e){if(e.length===0)return 65;const t=e.filter(s=>s.notes.toLowerCase().includes("remember")||s.notes.toLowerCase().includes("recall")).length;return Math.min(t/e.length*100+45,100)}calculateEmotionalAwareness(e){return e.length===0?50:Math.min(e.length*2,100)}calculateEmotionalRegulation(e){if(e.length<2)return 50;const t=e.slice(1).map((i,r)=>Math.abs(i.mood-e[r].mood)),s=t.reduce((i,r)=>i+r,0)/t.length;return Math.max(0,100-s*10)}calculateSocialAwareness(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("others")||s.notes.toLowerCase().includes("people")||s.notes.toLowerCase().includes("social")).length;return Math.min(t/e.length*100,100)}calculateRelationshipManagement(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("relationship")||s.notes.toLowerCase().includes("friend")||s.notes.toLowerCase().includes("family")).length;return Math.min(t/e.length*100,100)}calculateSelfCompassion(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("kind to myself")||s.notes.toLowerCase().includes("self-compassion")||s.notes.toLowerCase().includes("forgive myself")).length;return Math.min(t/e.length*100,100)}calculateCompassionForOthers(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("compassion")||s.notes.toLowerCase().includes("empathy")||s.notes.toLowerCase().includes("understanding")).length;return Math.min(t/e.length*100,100)}calculateResilienceGrowth(e,t){if(e.length<7||t.length<7)return 50;const s=e.slice(-7).reduce((d,u)=>d+u.baselineData.pain,0)/7,i=e.slice(-14,-7).reduce((d,u)=>d+u.baselineData.pain,0)/7,r=t.slice(-7).reduce((d,u)=>d+u.mood,0)/7,a=t.slice(-14,-7).reduce((d,u)=>d+u.mood,0)/7,o=i-s,c=r-a;return Math.max(0,Math.min(100,(o+c)*10+50))}calculateTraumaIntegration(e,t){if(e.length===0||t.length===0)return 50;const s=t.filter(i=>i.notes.toLowerCase().includes("healing")||i.notes.toLowerCase().includes("growth")||i.notes.toLowerCase().includes("integration")).length;return Math.min(s/t.length*100+30,100)}calculateEmpathyQuotient(e){if(e.length===0)return 50;const t=e.filter(i=>i.notes.toLowerCase().includes("empathy")||i.notes.toLowerCase().includes("understand")||i.notes.toLowerCase().includes("feel for")).length,s=this.calculateCompassionForOthers(e);return Math.min(t/e.length*70+s*.3,100)}calculateEmotionalIntelligence(e){return(this.calculateEmotionalAwareness(e)+this.calculateEmotionalRegulation(e))/2}calculateSocialIntelligence(e){return(this.calculateSocialAwareness(e)+this.calculateRelationshipManagement(e))/2}calculateSocialCognition(e){return this.calculateEmotionalIntelligence(e),this.calculateSocialIntelligence(e)}calculateHumanConnection(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes.toLowerCase().includes("connection")||s.notes.toLowerCase().includes("bond")||s.notes.toLowerCase().includes("close")).length;return Math.min(t/e.length*100,100)}calculateDignityPreservation(e){return this.calculateDignityMaintenance(e)}calculateMeaningfulness(e,t){if(t.length===0)return 50;const s=t.filter(o=>o.notes.toLowerCase().includes("meaning")||o.notes.toLowerCase().includes("purpose")||o.notes.toLowerCase().includes("significant")).length,i=Math.min(s/t.length*100,100),r=e.slice(-7).reduce((o,c)=>o+c.baselineData.pain,0)/7,a=Math.max(0,(10-r)*2);return Math.min(i+a,100)}calculatePatternStability(e){if(e.length<2)return 50;const t=S1(e);return Math.max(0,100-t*10)}calculateRecoverySpeed(e){if(e.length<3)return 50;const t=e.slice(-3),s=t[0]-t[t.length-1];return Math.max(0,Math.min(100,s*10+50))}analyzeDailyPatterns(e){return{trend:zu(e),stability:this.calculatePatternStability(e)}}analyzeWeeklyPatterns(e){return{trend:zu(e),stability:this.calculatePatternStability(e)}}analyzeMonthlyTrends(e){return{trend:zu(e),improvement:this.calculateRecoverySpeed(e)}}calculateMicroMomentQuality(e){if(e.length===0)return 50;const t=e.reduce((i,r)=>i+r.mood,0)/e.length,s=e.filter(i=>i.notes.toLowerCase().includes("quality")||i.notes.toLowerCase().includes("meaningful")||i.notes.toLowerCase().includes("deep")).length;return Math.min(t+s/e.length*20,100)}calculateSpiritualWisdom(e){if(e.length===0)return 50;const t=["meaning","purpose","transcend","transcendent","faith","spiritual","bigger than","grateful"];let s=0;for(const o of e){const c=o.notes.toLowerCase();t.some(d=>c.includes(d))&&s++}const i=e.reduce((o,c)=>o+c.emotionalClarity,0)/e.length,r=e.reduce((o,c)=>o+c.emotionalRegulation,0)/e.length,a=s/e.length*60;return Math.max(0,Math.min(100,a+(i+r)*2))}calculateRelationalWisdom(e){if(e.length===0)return 50;const t=["relationship","friend","family","support","listened","helped","connection"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.filter(r=>r.socialSupport!=="none").length/e.length*50;return Math.max(0,Math.min(100,s/e.length*50+i))}calculateSelfKnowledgeWisdom(e){if(e.length===0)return 50;const t=["i feel","i notice","i realized","i understand","i learned","aware","noticing"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.reduce((r,a)=>r+a.emotionalClarity,0)/e.length;return Math.max(0,Math.min(100,s/e.length*60+i*4))}calculateWisdomGrowthRate(e){if(e.length<2)return 10;const t=Math.floor(e.length/2),s=["learned","realized","understand","insight","growth"],i=c=>c.filter(d=>{const u=d.notes.toLowerCase();return s.some(h=>u.includes(h))}).length/Math.max(1,c.length),r=i(e.slice(0,t)),o=(i(e.slice(t))-r)*100;return Math.max(0,Math.min(100,40+o))}calculateWisdomApplication(e){if(e.length===0)return 40;const t=["applied","use","used","practice","practiced","implemented","shared"];let s=0;for(const r of e){const a=r.notes.toLowerCase();t.some(o=>a.includes(o))&&s++}const i=e.reduce((r,a)=>r+a.emotionalRegulation,0)/e.length;return Math.max(0,Math.min(100,s/e.length*70+i*3))}calculateWisdomSharing(e){if(e.length===0)return 30;const t=["told","shared","explained","helped someone","wrote about"];let s=0;for(const i of e){const r=i.notes.toLowerCase();t.some(a=>r.includes(a))&&s++}return Math.max(0,Math.min(100,s/e.length*100))}calculateIntegratedWisdom(e){if(e.length===0)return 40;const t=["learned","realized","understand","insight"],s=["applied","use","practice","implemented"];let i=0;for(const a of e){const o=a.notes.toLowerCase();t.some(c=>o.includes(c))&&s.some(c=>o.includes(c))&&i++}const r=this.calculateEmotionalRegulation(e);return Math.max(0,Math.min(100,i/e.length*60+r*.4))}}class H8{config;achievements=new Map;milestones=new Map;meaningfulMoments=new Map;empathyIntelligence;constructor(e){this.config=e,this.empathyIntelligence=new V8({learningRate:.1,predictionHorizon:30,personalizationDepth:"deep",culturalSensitivity:"enhanced",interventionStyle:"adaptive",privacyLevel:"enhanced"})}async calculateQuantifiedEmpathy(e,t,s=[],i,r,a){return await this.empathyIntelligence.calculateAdvancedEmpathyMetrics(e,t,s,i,r,a)}async generateEmpathyInsights(e,t,s,i){return await this.empathyIntelligence.generateAdvancedInsights(e,t,{painEntries:s,moodEntries:i})}async generateEmpathyRecommendations(e,t,s){return await this.empathyIntelligence.generatePersonalizedRecommendations(e,t,s)}async calculateEmotionalIntelligence(e,t,s){const i=t.slice(-30),r=this.calculateSelfAwarenessEQ(i),a=this.calculateSelfRegulationEQ(i),o=this.calculateMotivationEQ(i,s),c=this.calculateEmpathyEQ(i),d=this.calculateSocialSkillsEQ(i);return{selfAwareness:r,selfRegulation:a,motivation:o,empathy:c,socialSkills:d}}async calculateCompassionateProgress(e,t,s){const i=t.slice(-30),r=s.slice(-30);return{selfCompassion:this.calculateSelfCompassion(r,i),selfCriticism:this.calculateSelfCriticism(r),progressCelebration:this.calculateProgressCelebrationScore(i,r),setbackResilience:this.calculateSetbackResilience(i,r),hopefulness:this.calculateHopefulnessScore(r)}}async calculateEmpathyKPIs(e,t,s){const i=t.slice(-30);return{validationReceived:this.calculateValidationReceived(i,s),validationGiven:this.calculateValidationGiven(i),emotionalSupport:this.calculateEmotionalSupport(i),understandingFelt:this.calculateUnderstandingFelt(i),connectionQuality:this.calculateConnectionQualityKPI(i)}}async calculateHumanizedMetrics(e,t,s,i){const r=t.slice(-30),a=s.slice(-30);return{courageScore:this.calculateCourageScore(r,a),vulnerabilityAcceptance:this.calculateVulnerabilityAcceptance(a),authenticityLevel:this.calculateAuthenticityLevel(a),growthMindset:this.calculateGrowthMindset(a,i),wisdomGained:this.extractWisdomGained(r,a)}}calculateSelfAwarenessEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=this.calculateMoodVariability(e),i=t*10,r=Math.max(0,20-s);return Math.min(100,i+r)}calculateSelfRegulationEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalRegulation,0)/e.length,s=new Set;e.forEach(a=>{a.copingStrategies.forEach(o=>s.add(o))});const i=t*10,r=Math.min(30,s.size*5);return Math.min(100,i+r)}calculateMotivationEQ(e,t){if(e.length===0)return 50;const s=e.reduce((o,c)=>o+c.hopefulness,0)/e.length,i=Math.min(t.length,30)/30,r=s*10,a=i*40;return Math.min(100,r*.6+a*.4)}calculateEmpathyEQ(e){if(e.length===0)return 50;const t=e.filter(a=>a.socialSupport!=="none"),s=e.filter(a=>a.context.toLowerCase().includes("helping")||a.context.toLowerCase().includes("supporting")||a.notes.toLowerCase().includes("helped someone")),i=t.length/e.length*50,r=s.length/e.length*50;return Math.min(100,i+r)}calculateSocialSkillsEQ(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=this.calculateAverageSocialSupport(e);return(t*10+s)/2}calculateSelfCompassion(e,t){if(e.length===0)return 50;const s=e.filter(o=>o.notes.toLowerCase().includes("gentle with myself")||o.notes.toLowerCase().includes("self-care")||o.copingStrategies.includes("self-compassion")||o.copingStrategies.includes("mindfulness")),i=e.filter(o=>o.notes.toLowerCase().includes("should have")||o.notes.toLowerCase().includes("failed")||o.notes.toLowerCase().includes("not good enough")),r=s.length/e.length*60,a=i.length/e.length*30;return Math.max(20,Math.min(100,50+r-a))}calculateSelfCriticism(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes.toLowerCase().includes("should have")||s.notes.toLowerCase().includes("failed")||s.notes.toLowerCase().includes("not good enough")||s.notes.toLowerCase().includes("weak")||s.notes.toLowerCase().includes("giving up"));return Math.min(100,t.length/e.length*100)}calculateProgressCelebrationScore(e,t){if(e.length===0&&t.length===0)return 50;const s=t.filter(o=>o.mood>=7),i=t.filter(o=>o.notes.toLowerCase().includes("accomplished")||o.notes.toLowerCase().includes("proud")||o.notes.toLowerCase().includes("achieved")||o.context.toLowerCase().includes("success")),r=s.length/Math.max(t.length,1)*50,a=i.length/Math.max(t.length,1)*50;return Math.min(100,r+a)}calculateSetbackResilience(e,t){if(e.length===0&&t.length===0)return 50;let s=0,i=0;for(let a=1;a<t.length;a++){const o=t[a],c=t[a-1];c.mood<=4&&o.mood>=6&&s++,c.mood<=4&&i++}for(let a=1;a<e.length;a++){const o=e[a],c=e[a-1];c.baselineData.pain>=7&&o.baselineData.pain<=5&&s++,c.baselineData.pain>=7&&i++}const r=i>0?s/i:.5;return Math.min(100,r*100)}calculateHopefulnessScore(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.hopefulness,0)/e.length,s=e.filter(a=>a.notes.toLowerCase().includes("hope")||a.notes.toLowerCase().includes("better")||a.notes.toLowerCase().includes("future")||a.notes.toLowerCase().includes("optimistic")),i=t*10,r=s.length/e.length*20;return Math.min(100,i+r)}calculateValidationReceived(e,t){if(e.length===0)return 40;const s=e.filter(o=>o.socialSupport!=="none"),i=e.filter(o=>o.notes.toLowerCase().includes("understood")||o.notes.toLowerCase().includes("supported")||o.notes.toLowerCase().includes("validated")||o.notes.toLowerCase().includes("heard")),r=s.length/e.length*60,a=i.length/e.length*40;return Math.min(100,r+a)}calculateValidationGiven(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes.toLowerCase().includes("helped")||s.notes.toLowerCase().includes("supported")||s.notes.toLowerCase().includes("listened")||s.context.toLowerCase().includes("helping"));return Math.min(100,t.length/e.length*100)}calculateEmotionalSupport(e){if(e.length===0)return 40;const t=this.calculateAverageSocialSupport(e),s=e.filter(a=>a.socialSupport==="strong"||a.socialSupport==="moderate").length,i=t,r=s/e.length*40;return Math.min(100,i+r)}calculateUnderstandingFelt(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes.toLowerCase().includes("understood")||s.notes.toLowerCase().includes("gets it")||s.notes.toLowerCase().includes("knows how I feel")||s.socialSupport==="strong");return Math.min(100,t.length/e.length*120)}calculateConnectionQualityKPI(e){if(e.length===0)return 40;const t=e.filter(r=>r.socialSupport!=="none"&&r.mood>=6),s=this.calculateAverageSocialSupport(e),i=t.length/e.length*50;return Math.min(100,s*.6+i)}calculateCourageScore(e,t){if(e.length===0&&t.length===0)return 50;const s=Math.min(e.length,30)/30,i=e.filter(d=>d.baselineData.pain>=7).length,r=t.filter(d=>d.notes.toLowerCase().includes("despite")||d.notes.toLowerCase().includes("even though")||d.notes.toLowerCase().includes("courage")||d.notes.toLowerCase().includes("brave")),a=s*40,o=Math.min(30,i*2),c=r.length/Math.max(t.length,1)*30;return Math.min(100,a+o+c)}calculateVulnerabilityAcceptance(e){if(e.length===0)return 50;const t=e.filter(a=>a.notes.toLowerCase().includes("vulnerable")||a.notes.toLowerCase().includes("afraid")||a.notes.toLowerCase().includes("scared")||a.notes.toLowerCase().includes("uncertain")||a.notes.toLowerCase().includes("don't know")),s=e.filter(a=>a.notes.toLowerCase().includes("accept")||a.notes.toLowerCase().includes("okay with")||a.notes.toLowerCase().includes("allow myself")),i=t.length/e.length*50,r=s.length/e.length*50;return Math.min(100,i+r)}calculateAuthenticityLevel(e){if(e.length===0)return 50;const t=e.reduce((a,o)=>a+o.emotionalClarity,0)/e.length,s=e.filter(a=>a.notes.toLowerCase().includes("honestly")||a.notes.toLowerCase().includes("truth")||a.notes.toLowerCase().includes("really feel")||a.notes.toLowerCase().includes("authentic")),i=t*10,r=s.length/e.length*30;return Math.min(100,i*.7+r)}calculateGrowthMindset(e,t){if(e.length===0)return 50;const s=e.filter(o=>o.notes.toLowerCase().includes("learn")||o.notes.toLowerCase().includes("grow")||o.notes.toLowerCase().includes("improve")||o.notes.toLowerCase().includes("try")||o.notes.toLowerCase().includes("practice")),i=new Set;e.forEach(o=>{o.copingStrategies.forEach(c=>i.add(c))});const r=s.length/e.length*60,a=Math.min(40,i.size*5);return Math.min(100,r+a)}extractWisdomGained(e,t){const s=[];return t.filter(r=>r.notes.toLowerCase().includes("learned")||r.notes.toLowerCase().includes("realized")||r.notes.toLowerCase().includes("understand now")||r.notes.toLowerCase().includes("insight")).forEach(r=>{r.notes.length>20&&s.push(r.notes)}),e.length>10&&s.push("Pain tracking has helped me identify patterns and triggers"),t.filter(r=>r.copingStrategies.length>0).length>5&&s.push("I've discovered effective coping strategies that work for me"),t.filter(r=>r.socialSupport!=="none").length>3&&s.push("Seeking support from others is a sign of strength, not weakness"),s.slice(0,5)}calculateMoodVariability(e){if(e.length<2)return 0;const t=e.map(r=>r.mood),s=t.reduce((r,a)=>r+a,0)/t.length,i=t.reduce((r,a)=>r+Math.pow(a-s,2),0)/t.length;return Math.sqrt(i)}calculateAverageSocialSupport(e){const t=e.filter(i=>i.socialSupport!=="none");if(t.length===0)return 25;const s={minimal:25,moderate:60,strong:90};return t.reduce((i,r)=>{const a=s[r.socialSupport]||25;return i+a},0)/t.length}async calculateEmotionalValidation(e,t,s="weekly"){const i=this.filterByTimeframe(t,s);return{validationScore:this.calculateValidationScore(i),emotionalTrends:{copingStrategiesUsed:this.extractCopingStrategies(i),emotionalResilience:this.calculateResilience(i),supportSystemEngagement:this.calculateSupportEngagement(i),selfAdvocacyInstances:this.countSelfAdvocacy(i)},validationSources:{selfValidation:this.calculateSelfValidation(i),communitySupport:this.calculateCommunitySupport(i),professionalAcknowledment:this.calculateProfessionalValidation(i),familyUnderstanding:this.calculateFamilySupport(i)}}}async generateProgressCelebration(e,t){const s=await this.identifyAchievements(e,t),i=await this.identifyMilestones(e,t),r=await this.identifyMeaningfulMoments(e,t);return{achievements:s,milestones:i,personalGrowth:{selfAwareness:this.calculateSelfAwareness(t),copingSkills:this.calculateCopingSkillsGrowth(t),communicationImprovement:this.calculateCommunicationGrowth(t),boundarySettingProgress:this.calculateBoundaryProgress(t)},meaningfulMoments:r}}async calculateUserAgency(e,t){return{decisionMakingPower:this.calculateDecisionMakingPower(t),selfAdvocacyScore:this.calculateSelfAdvocacyScore(t),choiceExercised:{treatmentDecisions:this.countTreatmentChoices(t),dailyChoices:this.countDailyChoices(t),boundarySettings:this.countBoundaryChoices(t),communicationStyles:this.countCommunicationChoices(t)},empowermentActivities:{educationSeeking:this.countEducationActivities(t),resourceUtilization:this.countResourceUse(t),communityParticipation:this.countCommunityEngagement(t),selfCareInitiatives:this.countSelfCareInitiatives(t)}}}async generateDignityPreservingReport(e,t){return{userDefinedSuccess:await this.extractUserDefinedSuccesses(t),strengthsBased:{resilience:this.identifyResilienceStrengths(t),resourcefulness:this.identifyResourcefulness(t),wisdom:this.identifyWisdomGained(t),courage:this.identifyCourage(t)},growthOriented:{learnings:this.extractLearnings(t),adaptations:this.identifyAdaptations(t),newSkills:this.identifyNewSkills(t),perspectives:this.identifyPerspectiveShifts(t)},personCentered:{values:this.extractValues(t),priorities:this.identifyPriorities(t),preferences:this.extractPreferences(t),goals:this.identifyGoals(t)}}}async identifyAchievements(e,t){const s=[];this.filterByTimeframe(t,"daily").length>0&&s.push({id:`daily-${Date.now()}`,type:"daily",title:"Showed Up Today",description:"You tracked your experience and showed self-care by paying attention to your needs.",dateAchieved:new Date().toISOString(),category:"self_care",celebrationMessage:"Every entry is an act of self-advocacy. You showed up for yourself today! 🌟",shareableMessage:"I practiced self-care by listening to my body today.",icon:"💚"});const r=this.extractCopingStrategies(t);return r.length>=3&&s.push({id:`coping-${Date.now()}`,type:"weekly",title:"Coping Strategy Explorer",description:`You've tried ${r.length} different coping strategies this week.`,dateAchieved:new Date().toISOString(),category:"coping",celebrationMessage:`You're building a diverse toolkit! ${r.length} strategies shows real wisdom. 🛠️`,shareableMessage:"I'm expanding my coping toolkit with new strategies.",icon:"🛠️"}),this.calculateCommunicationGrowth(t)>.7&&s.push({id:`communication-${Date.now()}`,type:"monthly",title:"Voice of Advocacy",description:"You've shown significant growth in expressing your needs and experiences.",dateAchieved:new Date().toISOString(),category:"advocacy",celebrationMessage:"Your voice matters, and you're using it with increasing confidence! 🗣️",shareableMessage:"I'm finding my voice and learning to advocate for my needs.",icon:"🗣️"}),s}async identifyMilestones(e,t){const s=[];t.length===1&&s.push({id:`first-entry-${e}`,title:"Journey Begins",description:"You took the first step in tracking your pain journey.",dateReached:t[0].timestamp,significance:"moderate",personalMeaning:"Starting to honor your experience by documenting it.",supportNetwork:["yourself"],nextSteps:["Continue tracking","Explore patterns","Be gentle with yourself"]});const i=this.getEntriesInLastWeeks(t,4),r=this.countConsistentWeeks(i);return r>=2&&s.push({id:`consistency-${e}`,title:"Building Routine",description:`You've consistently tracked for ${r} weeks.`,dateReached:new Date().toISOString(),significance:"moderate",personalMeaning:"Developing a sustainable practice of self-awareness.",supportNetwork:["yourself","routine"],nextSteps:["Celebrate this dedication","Notice emerging patterns","Trust the process"]}),s}async identifyMeaningfulMoments(e,t){const s=[];for(const i of t)i.notes&&this.containsInsightKeywords(i.notes)&&s.push({id:`moment-${i.timestamp}`,date:i.timestamp,description:this.extractInsightDescription(i.notes),emotionalImpact:this.calculateEmotionalImpact(i),insights:this.extractInsights(i.notes),gratitude:this.extractGratitude(i.notes),connections:this.extractConnections(i.notes)});return s}calculateValidationScore(e){let t=0,s=0;for(const i of e)i.notes&&(this.containsValidationKeywords(i.notes)&&(t+=20),this.containsSupportKeywords(i.notes)&&(t+=15),this.containsProfessionalValidation(i.notes)&&(t+=25),s++);return s>0?Math.min(100,t/s):50}extractCopingStrategies(e){const t=new Set,s=["meditation","breathing","rest","heat","cold","massage","music","distraction","mindfulness","exercise","stretching","bath","reading","talking","journaling","art","nature","support","therapy"];for(const i of e)if(i.notes){const r=i.notes.toLowerCase();for(const a of s)r.includes(a)&&t.add(a)}return Array.from(t)}calculateResilience(e){let t=0,s=0;for(const i of e)i.baselineData.pain>6&&(i.notes&&this.containsResilienceMarkers(i.notes)&&(t+=1),s++);return s>0?t/s*100:70}containsValidationKeywords(e){return["valid","real","understand","acknowledge","believe","legitimate"].some(s=>e.toLowerCase().includes(s))}containsSupportKeywords(e){return["support","help","care","listen","friend","family","group"].some(s=>e.toLowerCase().includes(s))}containsProfessionalValidation(e){return["doctor","therapist","nurse","specialist","diagnosed","treatment"].some(s=>e.toLowerCase().includes(s))}containsInsightKeywords(e){return["realized","learned","discovered","noticed","breakthrough","understanding"].some(s=>e.toLowerCase().includes(s))}containsResilienceMarkers(e){return["despite","still","managed","cope","through","persevere","continue"].some(s=>e.toLowerCase().includes(s))}filterByTimeframe(e,t){const s=new Date;let i;switch(t){case"daily":i=new Date(s.getTime()-1440*60*1e3);break;case"weekly":i=new Date(s.getTime()-10080*60*1e3);break;case"monthly":i=new Date(s.getTime()-720*60*60*1e3);break}return e.filter(r=>new Date(r.timestamp)>=i)}calculateSupportEngagement(e){if(e.length===0)return 40;let t=0;for(const i of e){const r=(i.notes||"").toLowerCase();/(support|friend|family|group|community|talked|call)/.test(r)&&t++}const s=t/e.length;return Math.max(0,Math.min(100,30+s*70))}countSelfAdvocacy(e){return e.filter(t=>t.notes&&this.containsAdvocacyKeywords(t.notes)).length}containsAdvocacyKeywords(e){return["asked","spoke up","boundary","need","no","explained","requested"].some(s=>e.toLowerCase().includes(s))}calculateSelfValidation(e){if(e.length===0)return 50;const t=["valid","real","accepted","okay","allowed","legitimate","deserve","worthy"],s=["fake","imagining","overreact","exaggerat","not real","should not"];let i=0,r=0;for(const c of e){const d=(c.notes||"").toLowerCase();t.some(u=>d.includes(u))&&i++,s.some(u=>d.includes(u))&&r++}const a=i/e.length,o=r/e.length;return Math.max(0,Math.min(100,40+a*60-o*30))}calculateCommunitySupport(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes&&/community|group|meeting|peer/i.test(s.notes)).length;return Math.min(100,20+t/e.length*80)}calculateProfessionalValidation(e){if(e.length===0)return 30;const t=e.filter(s=>s.notes&&/doctor|therapist|specialist|nurse|appointment|clinic/i.test(s.notes)).length;return Math.min(100,25+t/e.length*75)}calculateFamilySupport(e){if(e.length===0)return 35;const t=e.filter(s=>s.notes&&/family|parent|sibling|partner|spouse|child|kids/i.test(s.notes)).length;return Math.min(100,30+t/e.length*70)}calculateSelfAwareness(e){if(e.length===0)return 50;const t=e.filter(s=>s.notes&&/noticed|realized|aware|pattern|trigger|understand/i.test(s.notes)).length;return Math.min(100,t/e.length*100)}calculateCopingSkillsGrowth(e){if(e.length===0)return 40;const t=["meditation","breathing","stretch","journaling","mindfulness","rest","heat","cold","pace"];let s=new Set;for(const i of e){const r=(i.notes||"").toLowerCase();t.forEach(a=>{r.includes(a)&&s.add(a)})}return Math.min(100,20+s.size*10)}calculateCommunicationGrowth(e){if(e.length===0)return 40;const t=["communicat","told","said","explained","express","shared"];let s=0;for(const i of e){const r=(i.notes||"").toLowerCase();t.some(a=>r.includes(a))&&s++}return Math.min(100,30+s/e.length*70)}calculateBoundaryProgress(e){if(e.length===0)return 35;const t=e.filter(s=>s.notes&&/boundary|said no|limit|protected|rested instead/i.test(s.notes)).length;return Math.min(100,25+t/e.length*75)}calculateDecisionMakingPower(e){if(e.length===0)return 40;const t=e.filter(s=>s.notes&&/decided|chose|opted|selected|planned/i.test(s.notes)).length;return Math.min(100,35+t/e.length*65)}calculateSelfAdvocacyScore(e){if(e.length===0)return 45;const t=e.filter(s=>s.notes&&/asked|requested|advocat|explained need|pushed for/i.test(s.notes)).length;return Math.min(100,30+t/e.length*70)}countTreatmentChoices(e){return e.filter(t=>t.notes&&/treatment|therapy|exercise|protocol|plan/i.test(t.notes)).length}countDailyChoices(e){return e.filter(t=>t.notes&&/decided|chose|opted|adjusted|scheduled/i.test(t.notes)).length}countBoundaryChoices(e){return e.filter(t=>t.notes&&/boundary|said no|limit/i.test(t.notes)).length}countCommunicationChoices(e){return e.filter(t=>t.notes&&/communicat|told|shared|express/i.test(t.notes)).length}countEducationActivities(e){return e.filter(t=>t.notes&&/read|research|article|learn|webinar|podcast/i.test(t.notes)).length}countResourceUse(e){return e.filter(t=>t.notes&&/resource|tool|app|tracker|guide/i.test(t.notes)).length}countCommunityEngagement(e){return e.filter(t=>t.notes&&/group|community|forum|meeting|peer/i.test(t.notes)).length}countSelfCareInitiatives(e){return e.filter(t=>t.notes&&/self-care|rested|hydrated|nutrition|sleep|mindfulness|meditation|breathing/i.test(t.notes)).length}async extractUserDefinedSuccesses(e){return["Getting through tough days","Learning about myself","Building coping skills"]}identifyResilienceStrengths(e){return["Persistence","Adaptability","Hope"]}identifyResourcefulness(e){return["Creative problem solving","Finding helpful resources","Building support networks"]}identifyWisdomGained(e){return["Understanding my patterns","Knowing my limits","Recognizing what helps"]}identifyCourage(e){return["Facing difficult days","Speaking up for needs","Trying new approaches"]}extractLearnings(e){return["Pain doesn't define me","I have more strength than I knew","It's okay to ask for help"]}identifyAdaptations(e){return["Modified daily routines","New communication strategies","Flexible goal setting"]}identifyNewSkills(e){return["Mindfulness techniques","Pain management strategies","Self-advocacy"]}identifyPerspectiveShifts(e){return["Focus on progress not perfection","Value rest as productive","Appreciate small victories"]}extractValues(e){return["Self-compassion","Authenticity","Connection","Growth"]}identifyPriorities(e){return["Health and wellbeing","Meaningful relationships","Personal growth"]}extractPreferences(e){return["Gentle approaches","Collaborative care","Holistic methods"]}identifyGoals(e){return["Better quality of life","Increased self-understanding","Stronger support network"]}extractInsightDescription(e){return"Personal breakthrough in understanding pain patterns"}calculateEmotionalImpact(e){return 75}extractInsights(e){return["Pain patterns are connected to stress","Rest is not giving up"]}extractGratitude(e){return["Supportive friends","Access to healthcare","Inner strength"]}extractConnections(e){return["Support group","Healthcare team","Family"]}getEntriesInLastWeeks(e,t){const s=new Date(Date.now()-t*7*24*60*60*1e3);return e.filter(i=>new Date(i.timestamp)>=s)}countConsistentWeeks(e){if(e.length===0)return 0;const t={};for(const s of e){const i=new Date(s.timestamp),r=i.getUTCFullYear(),a=new Date(Date.UTC(r,0,1)),o=Math.ceil(((i.getTime()-a.getTime())/864e5+a.getUTCDay()+1)/7),c=`${r}-W${o}`;t[c]=(t[c]||0)+1}return Object.values(t).filter(s=>s>=3).length}}class G8{moodEntries=new Map;triggerDatabase=new Map;recoveryData=new Map;copingStrategies=new Map;async addMoodEntry(e,t){const s={...t,timestamp:new Date},i=this.moodEntries.get(e)||[];return i.push(s),this.moodEntries.set(e,i),this.analyzeEmotionalPatterns(e,s),s}async calculateEmotionalStateMetrics(e,t){const s=this.moodEntries.get(e)||[];return{moodPatterns:await this.analyzeMoodPatterns(e,s),emotionalTriggers:await this.analyzeEmotionalTriggers(e,s,t),emotionalRecovery:await this.calculateEmotionalRecovery(e,s),socialEmotionalHealth:await this.assessSocialEmotionalHealth(e,s)}}async analyzeMoodPatterns(e,t){const s=new Date,i=t.filter(a=>s.getTime()-a.timestamp.getTime()<10080*60*1e3);return{current:i.length>0?i[i.length-1]:this.getDefaultMoodEntry(),dailyTrends:this.calculateDailyTrends(t),weeklyAverages:this.calculateWeeklyAverages(t),monthlyTrends:this.calculateMonthlyTrends(t),seasonalPatterns:this.identifySeasonalPatterns(t)}}async analyzeEmotionalTriggers(e,t,s){const i=this.identifyTriggers(t,s),r=this.analyzeTriggerPatterns(i,t),a=this.calculateRecoveryTimes(e,t),o=this.analyzeCopingEffectiveness(e,t);return{identified:i,patterns:r,recoveryTimes:a,copingEffectiveness:o}}async calculateEmotionalRecovery(e,t){const s=this.recoveryData.get(e)||[],i=this.calculateEmotionalBaseline(t),r=s.length>0?s.reduce((a,o)=>a+o.recoveryTimeMinutes,0)/s.length:60;return{baseline:i,recoveryTime:r,resilienceScore:this.calculateResilienceScore(t,s),adaptabilityIndex:this.calculateAdaptabilityIndex(t)}}async assessSocialEmotionalHealth(e,t){return{connectionQuality:this.calculateConnectionQuality(t),supportSystemStrength:this.calculateSupportSystemStrength(t),communicationEffectiveness:this.calculateCommunicationEffectiveness(t),empathyReceived:this.calculateEmpathyReceived(t),empathyGiven:this.calculateEmpathyGiven(t)}}calculateDailyTrends(e){return e.filter(s=>(Date.now()-s.timestamp.getTime())/864e5<=7).sort((s,i)=>s.timestamp.getTime()-i.timestamp.getTime())}calculateWeeklyAverages(e){const t={};return e.forEach(s=>{const i=this.getWeekKey(s.timestamp);t[i]||(t[i]=[]),t[i].push(s)}),Object.entries(t).map(([s,i])=>{const r=this.getWeekStart(s),a=new Date(r.getTime()+8640*60*1e3);return{period:{start:r,end:a},averages:this.calculateAverages(i),improvements:this.identifyImprovements(i),challenges:this.identifyChallenges(i),insights:this.generateInsights(i)}})}calculateMonthlyTrends(e){const t={};return e.forEach(s=>{const i=`${s.timestamp.getFullYear()}-${s.timestamp.getMonth()}`;t[i]||(t[i]=[]),t[i].push(s)}),Object.entries(t).map(([s,i])=>{const[r,a]=s.split("-").map(Number),o=new Date(r,a,1),c=new Date(r,a+1,0);return{period:{start:o,end:c},averages:this.calculateAverages(i),improvements:this.identifyImprovements(i),challenges:this.identifyChallenges(i),insights:this.generateInsights(i)}})}identifySeasonalPatterns(e){const t=[],s=this.groupBySeason(e);return Object.entries(s).forEach(([i,r])=>{const a=r.reduce((c,d)=>c+d.mood,0)/r.length,o=e.reduce((c,d)=>c+d.mood,0)/e.length;Math.abs(a-o)>.5&&t.push({type:"seasonal",name:`${i} Pattern`,description:a>o?`Mood tends to be better during ${i}`:`Mood tends to be lower during ${i}`,correlation:(a-o)/5,confidence:Math.min(95,r.length*2),recommendations:this.generateSeasonalRecommendations(i)})}),t}async analyzeEmotionalPatterns(e,t){const s=this.moodEntries.get(e)||[];return this.analyzeMoodPatterns(e,s)}identifyTriggers(e,t){const s=[];for(let i=1;i<e.length;i++){const r=e[i],a=e[i-1],o=a.mood-r.mood;if(o>=2){const c=t.find(d=>Math.abs(new Date(d.timestamp).getTime()-r.timestamp.getTime())<72e5);c&&c.baselineData.pain>=6&&s.push({id:`pain-trigger-${r.timestamp.getTime()}`,name:"Pain Flare",type:"pain_flare",severity:c.baselineData.pain>=8?"severe":"moderate",frequency:this.calculateTriggerFrequency("pain_flare",e),emotionalImpact:o,lastOccurrence:r.timestamp,description:`Pain level ${c.baselineData.pain}/10 caused mood drop from ${a.mood} to ${r.mood}`,warningSignsIdentified:c.baselineData.symptoms??[],preventionStrategies:["Pain management","Stress reduction","Preventive rest"]}),r.triggers.length>0&&r.triggers.forEach(d=>{s.push({id:`trigger-${r.timestamp.getTime()}-${d}`,name:d,type:this.categorizeTrigger(d),severity:o>=3?"severe":"moderate",frequency:this.calculateTriggerFrequency(d,e),emotionalImpact:o,lastOccurrence:r.timestamp,description:`${d} caused mood drop from ${a.mood} to ${r.mood}`,warningSignsIdentified:this.identifyWarningSigns(),preventionStrategies:this.generatePreventionStrategies(d)})})}}return s}analyzeTriggerPatterns(e,t){const s=[];return[...new Set(e.map(r=>r.type))].forEach(r=>{const a=e.filter(c=>c.type===r),o=t.filter(c=>a.some(d=>Math.abs(d.lastOccurrence.getTime()-c.timestamp.getTime())<3600*1e3));s.push({triggerType:r,timePatterns:this.analyzeTimePatterns(o),contextualFactors:this.analyzeContextualFactors(o),predictiveIndicators:this.identifyPredictiveIndicators()})}),s}calculateRecoveryTimes(e,t){const s=[];for(let i=1;i<t.length-1;i++){const r=t[i],a=t[i-1],o=t[i+1];if(a.mood>r.mood&&o.mood>r.mood){const c=a.mood-r.mood,d=o.mood-r.mood;if(c>=1.5&&d>=1){const u=(o.timestamp.getTime()-r.timestamp.getTime())/6e4;s.push({triggerEvent:r.triggers.join(", ")||"Unknown trigger",recoveryTimeMinutes:u,strategiesUsed:r.copingStrategies,effectiveness:d/c*10,supportReceived:r.socialSupport!=="none",baseline:a.mood,lowest:r.mood,recovered:o.mood,timestamp:r.timestamp})}}}return s}analyzeCopingEffectiveness(e,t){const s={};return t.forEach(i=>{i.copingStrategies.forEach(r=>{s[r]||(s[r]={uses:0,totalEffectiveness:0,contexts:new Set}),s[r].uses++,s[r].totalEffectiveness+=i.mood,s[r].contexts.add(i.context)})}),Object.entries(s).map(([i,r])=>({strategy:i,usageFrequency:r.uses/4,effectiveness:r.totalEffectiveness/r.uses,contexts:Array.from(r.contexts),timeToEffect:30,sideEffects:[],personalizedNotes:`Used ${r.uses} times across various contexts`}))}calculateEmotionalBaseline(e){if(e.length===0)return 50;const t=e.slice(-30);return t.reduce((i,r)=>i+(r.mood+r.energy+(10-r.anxiety)+(10-r.stress)+r.hopefulness+r.selfEfficacy),0)/(t.length*6)*10}calculateResilienceScore(e,t){if(t.length===0)return 50;const s=t.reduce((o,c)=>o+c.recoveryTimeMinutes,0)/t.length,i=t.reduce((o,c)=>o+c.effectiveness,0)/t.length,r=Math.max(0,100-s/10),a=i*10;return(r+a)/2}calculateAdaptabilityIndex(e){if(e.length<10)return 50;const t=e.slice(-20),s=this.calculateVariability(t.map(o=>o.mood)),i=new Set(t.map(o=>o.context)).size,r=Math.max(0,100-s*20),a=Math.min(30,i*5);return Math.min(100,r+a)}calculateConnectionQuality(e){const t=e.filter(r=>r.socialSupport!=="none");if(t.length===0)return 30;const s={minimal:25,moderate:60,strong:90};return t.reduce((r,a)=>r+(a.socialSupport!=="none"?s[a.socialSupport]:0),0)/t.length}calculateSupportSystemStrength(e){const t=e.filter(o=>o.socialSupport!=="none").length/e.length,s=this.calculateAverageMoodWithSupport(e),i=this.calculateAverageMoodWithoutSupport(e),r=t*50,a=Math.max(0,s-i)*10;return Math.min(100,r+a)}calculateCommunicationEffectiveness(e){const t=e.reduce((i,r)=>i+r.emotionalClarity,0)/e.length,s=e.reduce((i,r)=>i+r.emotionalRegulation,0)/e.length;return(t+s)/2*10}calculateEmpathyReceived(e){const s=e.filter(r=>r.socialSupport==="strong"||r.socialSupport==="moderate").length/e.length*70,i=this.calculateSupportEffectivenessBonus(e);return Math.min(100,s+i)}calculateEmpathyGiven(e){const t=e.filter(s=>s.context.toLowerCase().includes("helping")||s.context.toLowerCase().includes("supporting")||s.notes.toLowerCase().includes("helped")||s.notes.toLowerCase().includes("listened"));return Math.min(100,t.length/e.length*200)}getDefaultMoodEntry(){return{timestamp:new Date,mood:5,energy:5,anxiety:5,stress:5,hopefulness:5,selfEfficacy:5,emotionalClarity:5,emotionalRegulation:5,context:"",triggers:[],copingStrategies:[],socialSupport:"none",notes:""}}getWeekKey(e){const t=e.getFullYear(),s=this.getWeekNumber(e);return`${t}-W${s}`}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),s=(e.getTime()-t.getTime())/864e5;return Math.ceil((s+t.getDay()+1)/7)}getWeekStart(e){const[t,s]=e.split("-W").map(Number),i=new Date(t,0,1),r=(s-1)*7-i.getDay();return new Date(t,0,1+r)}calculateAverages(e){return{mood:e.reduce((t,s)=>t+s.mood,0)/e.length,energy:e.reduce((t,s)=>t+s.energy,0)/e.length,anxiety:e.reduce((t,s)=>t+s.anxiety,0)/e.length,stress:e.reduce((t,s)=>t+s.stress,0)/e.length,hopefulness:e.reduce((t,s)=>t+s.hopefulness,0)/e.length,selfEfficacy:e.reduce((t,s)=>t+s.selfEfficacy,0)/e.length}}identifyImprovements(e){const t=[];return e.reduce((i,r)=>i+r.mood,0)/e.length>=7&&t.push("Sustained positive mood"),e.some(i=>i.hopefulness>=8)&&t.push("High hopefulness periods"),t}identifyChallenges(e){const t=[];return e.reduce((i,r)=>i+r.stress,0)/e.length>=7&&t.push("High stress levels"),e.some(i=>i.mood<=3)&&t.push("Low mood episodes"),t}generateInsights(e){const t=[],s=[...new Set(e.flatMap(i=>i.copingStrategies))];return s.length>0&&t.push(`Using ${s.length} different coping strategies`),t}groupBySeason(e){return e.reduce((t,s)=>{const i=s.timestamp.getMonth();let r;return i>=2&&i<=4?r="Spring":i>=5&&i<=7?r="Summer":i>=8&&i<=10?r="Fall":r="Winter",t[r]||(t[r]=[]),t[r].push(s),t},{})}generateSeasonalRecommendations(e){return{Spring:["Light therapy","Outdoor activities","Allergy management"],Summer:["Heat management","Hydration focus","UV protection"],Fall:["Routine maintenance","Light therapy preparation","Seasonal transition support"],Winter:["Light therapy","Vitamin D","Indoor activities","Social connection"]}[e]||[]}categorizeTrigger(e){const t=e.toLowerCase();return t.includes("pain")||t.includes("flare")?"pain_flare":t.includes("stress")||t.includes("work")?"stress_event":t.includes("social")||t.includes("people")?"social_interaction":t.includes("doctor")||t.includes("medical")?"medical_appointment":t.includes("weather")||t.includes("rain")?"weather":"other"}calculateTriggerFrequency(e,t){return t.filter(i=>i.triggers.some(r=>r.toLowerCase().includes(e.toLowerCase()))).length/4}identifyWarningSigns(){return["Increased stress","Sleep disturbance","Energy drop"]}generatePreventionStrategies(e){const t={pain:["Pain management","Preventive medication","Stress reduction"],stress:["Mindfulness","Time management","Boundary setting"],social:["Communication skills","Support system","Self-advocacy"],medical:["Preparation strategies","Support person","Question list"],weather:["Weather monitoring","Preventive measures","Indoor alternatives"]},s=e.toLowerCase();for(const[i,r]of Object.entries(t))if(s.includes(i))return r;return["Self-care","Support system","Stress management"]}analyzeTimePatterns(e){const t={},s={},i={};return e.forEach(r=>{const a=r.timestamp.getHours().toString(),o=r.timestamp.toLocaleDateString("en-US",{weekday:"long"}),c=this.getWeekKey(r.timestamp);t[a]=(t[a]||0)+1,s[o]=(s[o]||0)+1,i[c]=(i[c]||0)+1}),{timeOfDay:t,dayOfWeek:s,monthlyTrends:i}}analyzeContextualFactors(e){return{painLevel:e.map(t=>t.stress),stressLevel:e.map(t=>t.stress),socialContext:e.map(t=>t.socialSupport),environmentalFactors:e.map(t=>t.context)}}identifyPredictiveIndicators(){return{earlyWarnings:["Increased stress","Sleep changes","Mood drops"],behavioralChanges:["Social withdrawal","Activity reduction","Coping strategy changes"],physiologicalSigns:["Fatigue","Tension","Sleep disturbance"]}}calculateVariability(e){const t=e.reduce((i,r)=>i+r,0)/e.length,s=e.reduce((i,r)=>i+Math.pow(r-t,2),0)/e.length;return Math.sqrt(s)}calculateAverageMoodWithSupport(e){const t=e.filter(s=>s.socialSupport!=="none");return t.length>0?t.reduce((s,i)=>s+i.mood,0)/t.length:5}calculateAverageMoodWithoutSupport(e){const t=e.filter(s=>s.socialSupport==="none");return t.length>0?t.reduce((s,i)=>s+i.mood,0)/t.length:5}calculateSupportEffectivenessBonus(e){let t=0,s=0;for(let i=1;i<e.length;i++){const r=e[i],a=e[i-1];r.socialSupport!=="none"&&r.mood>a.mood&&(t+=r.mood-a.mood,s++)}return s>0?t/s*10:0}}class Y8{wellbeingHistory=new Map;energyData=new Map;pacingPreferences=new Map;async calculateWellbeingMetrics(e,t,s){return{qualityOfLife:await this.assessQualityOfLife(e,t,s),functionalIndependence:await this.assessFunctionalIndependence(e,t),socialConnectionMetrics:await this.assessSocialConnections(e,s),cognitiveWellness:await this.assessCognitiveWellness(e,t,s)}}async assessQualityOfLife(e,t,s){const i=this.getRecentEntries(t,30),r=this.getRecentMoodEntries(s,30),a=i.length>0?i.reduce((u,h)=>u+h.baselineData.pain,0)/i.length:5,o=r.length>0?r.reduce((u,h)=>u+h.mood,0)/r.length:5;r.length>0&&r.reduce((u,h)=>u+h.hopefulness,0)/r.length;const c=r.length>0?r.reduce((u,h)=>u+h.selfEfficacy,0)/r.length:5,d=i.length>0?i.reduce((u,h)=>u+(h.qualityOfLife?.sleepQuality||5),0)/i.length:5;return{overallSatisfaction:this.calculateLifeSatisfaction(a,o,d),meaningAndPurpose:this.calculateMeaningAndPurpose(r,i),personalGrowth:this.calculatePersonalGrowth(r),autonomy:this.calculateAutonomy(i,r),environmentalMastery:this.calculateEnvironmentalMastery(i,r),positiveRelations:this.calculatePositiveRelations(r),selfAcceptance:c*10}}async assessFunctionalIndependence(e,t){const s=this.getRecentEntries(t,30);return{dailyActivities:this.assessDailyActivities(s),mobility:this.assessMobility(s),cognition:this.assessCognitiveFunctioning(s),communication:this.assessCommunication(s),workCapacity:this.assessWorkCapacity(s)}}async assessSocialConnections(e,t){const s=this.getRecentMoodEntries(t,30),i=s.filter(o=>o.socialSupport!=="none"),r=i.length>0?this.calculateAverageSocialSupport(i):25,a=i.length/4.3;return{networkSize:this.estimateNetworkSize(s),contactFrequency:a,relationshipQuality:r,socialSupport:r,communityInvolvement:this.calculateCommunityInvolvement(s),loneliness:Math.max(0,100-r),belongingness:this.calculateBelongingness(s)}}async assessCognitiveWellness(e,t,s){const i=this.getRecentEntries(t,30),r=this.getRecentMoodEntries(s,30),a=r.length>0?r.reduce((h,m)=>h+m.emotionalClarity,0)/r.length:5,o=r.length>0?r.reduce((h,m)=>h+m.emotionalRegulation,0)/r.length:5,c=i.filter(h=>h.baselineData.pain>=7).length,d=r.filter(h=>h.stress>=7).length,u=Math.min(30,c+d);return{memoryFunction:Math.max(10,100-u*2),attention:Math.max(10,100-u*2.5),executiveFunction:o*10,processingSpeed:Math.max(10,100-u*3),mentalClarity:a*10,brainFogFrequency:u,cognitiveReserve:this.calculateCognitiveReserve(r,i)}}async calculateDigitalPacing(e,t,s){const i=this.energyData.get(e)||[];return{energyManagement:await this.calculateEnergyManagement(e,i,t,s),activitySuggestions:await this.generateActivitySuggestions(e,t,s),recoveryOptimization:await this.calculateRecoveryOptimization(e,t,s),smartNotifications:await this.generateSmartNotifications(e,t,s)}}async calculateEnergyManagement(e,t,s,i){const r=await this.estimateCurrentEnergyLevel(e,s,i),a=this.calculateEnergyTrends(t);return{currentEnergyLevel:r,energyTrends:a,energyBudget:this.calculateEnergyBudget(r,a),spoonTheory:this.calculateSpoonTheory(r,s),batteryAnalogy:this.calculateBatteryMetrics(r,i)}}async generateActivitySuggestions(e,t,s){const i=this.getCurrentPainLevel(t),r=this.getCurrentMood(s),a=await this.estimateCurrentEnergyLevel(e,t,s);return{currentRecommendations:this.generateCurrentRecommendations(i,r,a),adaptiveScheduling:this.generateAdaptiveScheduling(e,i,a),paceAdjustments:this.generatePaceAdjustments(i,a),restReminders:this.generateRestReminders(i,a,s)}}async calculateRecoveryOptimization(e,t,s){return{recoveryTime:this.calculateRecoveryTimeMetrics(t,s),restQuality:this.calculateRestQualityMetrics(t,s),sleepOptimization:this.calculateSleepOptimization(t),stressRecovery:this.calculateStressRecoveryMetrics(s)}}async generateSmartNotifications(e,t,s){const i=this.getCurrentPainLevel(t),r=await this.estimateCurrentEnergyLevel(e,t,s);return{pacingReminders:this.generatePacingReminders(i,r),energyAlerts:this.generateEnergyAlerts(r),recoveryPrompts:this.generateRecoveryPrompts(i,s),achievementCelebrations:this.generateAchievementCelebrations(t,s)}}getRecentEntries(e,t){const s=new Date;return s.setDate(s.getDate()-t),e.filter(i=>new Date(i.timestamp)>=s)}getRecentMoodEntries(e,t){const s=new Date;return s.setDate(s.getDate()-t),e.filter(i=>i.timestamp>=s)}calculateLifeSatisfaction(e,t,s){const i=Math.max(0,100-e*10),r=t*10,a=s*10;return i*.4+r*.4+a*.2}calculateMeaningAndPurpose(e,t){const s=e.length>0?e.reduce((a,o)=>a+o.hopefulness,0)/e.length:5,i=e.filter(a=>a.context.toLowerCase().includes("purpose")||a.context.toLowerCase().includes("goal")||a.context.toLowerCase().includes("meaningful")||a.context.toLowerCase().includes("helping")).length,r=Math.min(30,i*5);return Math.min(100,s*10+r)}calculatePersonalGrowth(e){if(e.length<5)return 50;const t=e.slice(-7).reduce((a,o)=>a+o.selfEfficacy,0)/7,s=e.slice(-14,-7).reduce((a,o)=>a+o.selfEfficacy,0)/7,i=t>s?20:0,r=t*10;return Math.min(100,r+i)}calculateAutonomy(e,t){const s=t.length>0?t.reduce((a,o)=>a+o.selfEfficacy,0)/t.length:5,i=e.map(a=>{const o=(a.functionalImpact?.assistanceNeeded||[]).length,c=(a.functionalImpact?.mobilityAids||[]).length;return Math.max(0,10-o-c)}),r=i.length>0?i.reduce((a,o)=>a+o,0)/i.length:5;return(s*10+r*10)/2}calculateEnvironmentalMastery(e,t){const s=t.length>0?t.reduce((a,o)=>a+o.emotionalRegulation,0)/t.length:5,i=new Set;t.forEach(a=>{a.copingStrategies.forEach(o=>i.add(o))});const r=Math.min(30,i.size*5);return Math.min(100,s*10+r)}calculatePositiveRelations(e){const t=e.filter(r=>r.socialSupport!=="none"),s=t.length/e.length,i=this.calculateAverageSocialSupport(t);return s*50+i*.5}assessDailyActivities(e){const t=e.flatMap(r=>r.functionalImpact?.limitedActivities||[]),s=new Set(t),i=Math.max(0,100-s.size*10);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:[],barriers:Array.from(s),improvements:[],goals:[]}}assessMobility(e){const t=e.flatMap(r=>r.functionalImpact?.mobilityAids||[]),s=new Set(t),i=Math.max(0,100-s.size*15);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:Array.from(s),barriers:[],improvements:[],goals:[]}}assessCognitiveFunctioning(e){const t=["brain fog","confusion","memory","concentration"],s=e.filter(r=>(r.baselineData.symptoms||[]).some(a=>t.some(o=>a.toLowerCase().includes(o)))).length,i=Math.max(20,100-s*5);return{independence:i,assistanceNeeded:i<40?"moderate":i<70?"minimal":"none",adaptationsUsed:["memory aids","simplified tasks"],barriers:["cognitive fatigue","brain fog"],improvements:[],goals:[]}}assessCommunication(e){const t=e.flatMap(r=>r.qualityOfLife?.socialImpact||[]),s=t.filter(r=>r.toLowerCase().includes("communication")||r.toLowerCase().includes("speaking")||r.toLowerCase().includes("expressing")).length,i=Math.max(30,100-s*10);return{independence:i,assistanceNeeded:i<50?"moderate":i<80?"minimal":"none",adaptationsUsed:[],barriers:t,improvements:[],goals:[]}}assessWorkCapacity(e){const t=e.flatMap(r=>r.workImpact?.workLimitations||[]),s=e.reduce((r,a)=>r+(a.workImpact?.missedWork||0),0),i=Math.max(0,100-t.length*5-s*2);return{independence:i,assistanceNeeded:i<25?"maximum":i<50?"moderate":i<75?"minimal":"none",adaptationsUsed:e.flatMap(r=>r.workImpact?.modifiedDuties||[]),barriers:t,improvements:[],goals:[]}}calculateAverageSocialSupport(e){if(e.length===0)return 25;const t={minimal:25,moderate:60,strong:90};return e.reduce((s,i)=>{const r=t[i.socialSupport]||25;return s+r},0)/e.length}estimateNetworkSize(e){const t=new Set;return e.forEach(s=>{s.socialSupport!=="none"&&t.add(s.context)}),Math.min(50,t.size*2)}calculateCommunityInvolvement(e){const t=e.filter(s=>s.context.toLowerCase().includes("community")||s.context.toLowerCase().includes("group")||s.context.toLowerCase().includes("volunteer")||s.context.toLowerCase().includes("church")||s.context.toLowerCase().includes("club")).length;return Math.min(100,t/e.length*200)}calculateBelongingness(e){const t=e.filter(i=>i.notes.toLowerCase().includes("belong")||i.notes.toLowerCase().includes("accepted")||i.notes.toLowerCase().includes("welcomed")||i.context.toLowerCase().includes("family")||i.context.toLowerCase().includes("friends")).length,s=this.calculateAverageSocialSupport(e.filter(i=>i.socialSupport!=="none"));return t/e.length*50+s*.5}calculateCognitiveReserve(e,t){const s=new Set;e.forEach(o=>{o.copingStrategies.forEach(c=>s.add(c))});const i=Math.min(40,s.size*5),a=(e.length>0?e.reduce((o,c)=>o+c.emotionalClarity,0)/e.length:5)*10;return Math.min(100,i+a+20)}async estimateCurrentEnergyLevel(e,t,s){const i=this.getCurrentPainLevel(t),r=this.getCurrentMood(s),a=s.length>0?s[s.length-1].energy:5,o=Math.max(0,100-i*10),c=r*10,d=a*10;return o*.4+c*.3+d*.3}calculateEnergyTrends(e){const t=e.slice(-20);return t.map(s=>({...s,predictedNext:this.predictNextEnergyLevel(s,t)}))}predictNextEnergyLevel(e,t){if(t.length<3)return e.energyLevel;const s=t.slice(-3),i=s[s.length-1].energyLevel-s[0].energyLevel;return Math.max(0,Math.min(100,e.energyLevel+i*.5))}calculateEnergyBudget(e,t){const s=Math.max(20,e),i=Math.max(0,100-e),r=s*.3,a=Math.max(0,s-r);return{daily:{total:s,used:i,reserved:r,flexible:a},weekly:{pattern:{Monday:s*.9,Tuesday:s*.8,Wednesday:s*.7,Thursday:s*.8,Friday:s*.9,Saturday:s*1.1,Sunday:s*1},adjustments:{},carryOver:0}}}calculateSpoonTheory(e,t){const s=Math.floor(e/10),i=this.getCurrentPainLevel(t),r=Math.floor(i/2);return{totalSpoons:s,usedSpoons:r,activityCosts:{shower:2,cooking:3,groceries:4,work:5,socializing:3,exercise:4,cleaning:3},predictions:{shower:2,cooking:3,groceries:4,work:5,socializing:3,exercise:4,cleaning:3},adaptations:["Break tasks into smaller parts","Use energy-saving devices","Ask for help with high-cost activities","Schedule high-cost activities for high-energy times"]}}calculateBatteryMetrics(e,t){const s=this.getCurrentMood(t);return{currentCharge:e,chargingActivities:["Rest","Gentle movement","Nature time","Social connection","Creative activities","Meditation"],drainingActivities:["Stress","Overexertion","Poor sleep","Conflict","Overwhelming environments","Pain flares"],chargingRate:Math.max(1,s),depletionRate:Math.max(1,10-s),optimalCharging:["Power naps (20-30 minutes)","Gentle stretching","Breathing exercises","Listening to music","Light reading"]}}generateCurrentRecommendations(e,t,s){const i=[];return s>70&&e<5&&i.push({activity:"Gentle Exercise",type:"physical",energyCost:30,painRisk:"low",benefits:["Improved mood","Better sleep","Endorphin release"],adaptations:["Start slowly","Listen to your body","Stop if pain increases"],timing:"morning",duration:30,confidence:85}),t<5&&s>30&&i.push({activity:"Social Connection",type:"social",energyCost:25,painRisk:"low",benefits:["Improved mood","Emotional support","Sense of belonging"],adaptations:["Choose supportive people","Set boundaries","Keep it brief if needed"],timing:"flexible",duration:45,confidence:75}),s<40&&i.push({activity:"Restorative Rest",type:"restful",energyCost:0,painRisk:"low",benefits:["Energy restoration","Pain relief","Stress reduction"],adaptations:["Create comfortable environment","Use heat/cold therapy","Practice mindfulness"],timing:"flexible",duration:60,confidence:95}),i}generateAdaptiveScheduling(e,t,s){const i=[];if(s<50){const r=new Date,a=new Date(r.getTime()+7200*1e3);i.push({timeBlock:{start:r,end:a},originalPlan:"Planned activities",adaptation:"Reduce activity intensity and duration",reason:"Low energy levels detected",energyImpact:20,painImpact:-1,acceptanceStatus:"suggested"})}return i}generatePaceAdjustments(e,t){const s=[];return(e>6||t<40)&&s.push({activity:"Daily tasks",originalDuration:60,suggestedDuration:90,reason:"High pain or low energy levels",benefits:["Reduced fatigue","Better pain management","Maintained productivity"],implementation:["Take breaks every 15 minutes","Split tasks across the day","Use energy-saving techniques"]}),s}generateRestReminders(e,t,s){const i=[];return t<30&&i.push({trigger:"energy_based",message:"Your energy is running low. Consider taking a rest break.",urgency:"high",restType:"extended_rest",duration:30,activities:["Lie down","Deep breathing","Listen to calming music"]}),e>7&&i.push({trigger:"symptom_based",message:"High pain levels detected. Time for pain management.",urgency:"high",restType:"short_rest",duration:20,activities:["Apply heat/cold","Gentle stretching","Medication if needed"]}),i}calculateRecoveryTimeMetrics(e,t){return{afterActivity:{light_exercise:60,household_chores:45,social_activities:30,work_tasks:90,medical_appointments:120},afterFlare:180,afterStress:90,sleepRecovery:8,baseline:60,factors:[{factor:"Pain level",impact:-20,confidence:85,recommendations:["Pain management","Gentle movement","Heat therapy"]},{factor:"Sleep quality",impact:30,confidence:90,recommendations:["Sleep hygiene","Consistent schedule","Comfortable environment"]}]}}calculateRestQualityMetrics(e,t){const s=e.length>0?e.reduce((i,r)=>i+(r.qualityOfLife?.sleepQuality||5),0)/e.length:5;return{restfulness:s*10,interruptions:Math.max(0,5-s),restTypes:{power_nap:80,meditation:75,quiet_time:70,nature_rest:85},environment:"Quiet, comfortable, temperature-controlled",timing:"When energy drops below 40%",duration:20}}calculateSleepOptimization(e){const t=this.getRecentEntries(e,7),s=t.length>0?t.reduce((r,a)=>r+(a.qualityOfLife?.sleepQuality||5),0)/t.length:5,i=t.length>0?t.reduce((r,a)=>r+a.baselineData.pain,0)/t.length:5;return{quality:s*10,duration:Math.max(6,10-i),efficiency:Math.max(50,s*15),restfulness:s*10,painImpact:i,recovery:Math.max(30,100-i*10),recommendations:["Maintain consistent sleep schedule","Use pain management before bed","Create comfortable sleep environment","Limit screen time before bed"]}}calculateStressRecoveryMetrics(e){const t=this.getRecentMoodEntries(e,7),s=t.length>0?t.reduce((r,a)=>r+a.stress,0)/t.length:5,i=new Set;return t.forEach(r=>{r.copingStrategies.forEach(a=>i.add(a))}),{recoveryTime:Math.max(15,s*10),strategies:Array.from(i.values()),effectiveness:{deep_breathing:85,meditation:80,exercise:75,social_support:70,nature_time:85},physicalSigns:["Muscle tension","Headache","Fatigue"],emotionalSigns:["Irritability","Anxiety","Overwhelm"],behavioralSigns:["Restlessness","Sleep changes","Appetite changes"]}}generatePacingReminders(e,t){const s=[];return t<40&&s.push({id:"energy-low",type:"pacing",message:"Your energy is running low. Consider pacing yourself.",enabled:!0,frequency:"as_needed",conditions:["energy < 40"],customization:{tone:"gentle",timing:"immediate",personalization:["energy-aware","supportive"]}}),s}generateEnergyAlerts(e){const t=[];return e<25&&t.push({id:"energy-critical",type:"energy_alert",message:"Energy levels are critically low. Rest is strongly recommended.",enabled:!0,frequency:"immediate",conditions:["energy < 25"],customization:{tone:"gentle",timing:"immediate",personalization:["urgent","caring"]}}),t}generateRecoveryPrompts(e,t){const s=[];return e>7&&s.push({id:"recovery-high-pain",type:"recovery_prompt",message:"High pain detected. Would you like some recovery suggestions?",enabled:!0,frequency:"as_needed",conditions:["pain > 7"],customization:{tone:"gentle",timing:"immediate",personalization:["pain-aware","helpful"]}}),s}generateAchievementCelebrations(e,t){const s=[],i=Math.min(e.length,7);return i>=3&&s.push({id:"tracking-streak",type:"achievement",message:`Wonderful! You've tracked for ${i} days in a row. Your commitment to self-care is inspiring!`,enabled:!0,frequency:"as_needed",conditions:["tracking_streak >= 3"],customization:{tone:"celebratory",timing:"optimal",personalization:["encouraging","proud"]}}),s}getCurrentPainLevel(e){return e.length>0?e[e.length-1].baselineData.pain:5}getCurrentMood(e){return e.length>0?e[e.length-1].mood:5}}const Z8=({userId:n,painEntries:e,moodEntries:t=[],onInsightSelect:s,onRecommendationAccept:i,onShareMetrics:r})=>{const[a]=W.useState(()=>new H8({validationThreshold:70,celebrationFrequency:"daily",reportingStyle:"balanced",privacyLevel:"personal",languagePreference:"everyday"})),[o]=W.useState(()=>new G8),[c]=W.useState(()=>new Y8),[d,u]=W.useState("overview"),[h,m]=W.useState(!0),[f,y]=W.useState("month"),[x,v]=W.useState(null),[w,j]=W.useState(null),[C,N]=W.useState(null),[P,L]=W.useState(null),[M,T]=W.useState([]),[k,z]=W.useState([]),_=W.useRef(!1);W.useEffect(()=>{if(_.current)return;(async()=>{_.current=!0,m(!0);try{const J=await o.calculateEmotionalStateMetrics(n,e);j(J);const se=await c.calculateWellbeingMetrics(n,e,t);N(se);const oe=await c.calculateDigitalPacing(n,e,t);L(oe);const F=await a.calculateQuantifiedEmpathy(n,e,t,J,se,oe);v(F);const he=E(F,J,se,oe),ke=$(F,J,se,oe);T(he),z(ke)}catch(J){console.error("Failed to load empathy metrics:",J)}finally{m(!1),_.current=!1}})()},[n,f]);const E=W.useCallback((I,J,se,oe)=>{const F=[];return I.emotionalIntelligence.selfAwareness>80&&F.push({id:"high-self-awareness",type:"celebration",title:"Exceptional Self-Awareness",description:`Your self-awareness score of ${I.emotionalIntelligence.selfAwareness}% shows remarkable emotional intelligence. You have deep insight into your emotions and patterns.`,confidence:95,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["emotional-intelligence","self-awareness"]}),I.compassionateProgress.selfCompassion<40&&F.push({id:"self-compassion-opportunity",type:"concern",title:"Self-Compassion Growth Opportunity",description:`Your self-compassion score of ${I.compassionateProgress.selfCompassion}% suggests you might benefit from being gentler with yourself during difficult times.`,confidence:80,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["compassionate-progress","self-compassion"]}),se.qualityOfLife.overallSatisfaction>75&&F.push({id:"high-life-satisfaction",type:"celebration",title:"Strong Life Satisfaction",description:`Your overall life satisfaction of ${Vt(se.qualityOfLife.overallSatisfaction,0)}% reflects resilience and positive adaptation despite challenges.`,confidence:90,actionable:!1,personalized:!0,timestamp:new Date,dataPoints:["quality-of-life","satisfaction"]}),oe.energyManagement.currentEnergyLevel<30&&F.push({id:"low-energy-pattern",type:"concern",title:"Energy Conservation Needed",description:`Your current energy level of ${oe.energyManagement.currentEnergyLevel}% suggests implementing energy conservation strategies could be beneficial.`,confidence:85,actionable:!0,personalized:!0,timestamp:new Date,dataPoints:["energy-management","current-energy"]}),F},[]),$=W.useCallback((I,J,se,oe)=>{const F=[];return I.compassionateProgress.selfCompassion<50&&F.push({id:"self-compassion-practice",category:"emotional",priority:"medium",title:"Practice Self-Compassion",description:"Develop a gentler inner voice and treat yourself with the same kindness you would show a good friend.",rationale:"Self-compassion is linked to better emotional resilience and reduced stress.",steps:["Practice self-compassion breaks during difficult moments","Write yourself a compassionate letter","Use kind, understanding language when talking to yourself","Remember that suffering is part of the human experience"],expectedBenefits:["Reduced self-criticism","Improved emotional resilience","Better stress management","Enhanced overall wellbeing"],timeframe:"2-4 weeks of daily practice",effort:"low",personalization:["mindfulness-based","gentle-approach"]}),oe.energyManagement.currentEnergyLevel<40&&F.push({id:"energy-pacing",category:"physical",priority:"high",title:"Implement Energy Pacing",description:"Use strategic pacing to manage your energy more effectively throughout the day.",rationale:"Energy conservation helps prevent crashes and maintains consistent functioning.",steps:["Track energy levels throughout the day","Plan high-energy activities for your best times","Take regular breaks before feeling exhausted","Use the spoon theory to budget energy for activities"],expectedBenefits:["More consistent energy levels","Reduced post-activity crashes","Better activity planning","Improved quality of life"],timeframe:"1-2 weeks to establish routine",effort:"medium",personalization:["energy-aware","activity-based"]}),I.empathyKPIs.connectionQuality<50&&F.push({id:"social-connection",category:"social",priority:"medium",title:"Strengthen Social Connections",description:"Build and maintain meaningful relationships that provide mutual support and understanding.",rationale:"Strong social connections are crucial for emotional wellbeing and pain management.",steps:["Reach out to one supportive person this week","Join a chronic illness support group","Practice active listening in conversations","Share your experiences with trusted friends or family"],expectedBenefits:["Reduced feelings of isolation","Increased emotional support","Better coping resources","Enhanced sense of belonging"],timeframe:"2-6 weeks to build routines",effort:"medium",personalization:["socially-focused","community-oriented"]}),F},[]);return h?l.jsx(We,{className:"w-full",children:l.jsx(Ve,{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Do,{className:"w-8 h-8 mx-auto mb-4 text-purple-500 animate-pulse"}),l.jsx("p",{className:"text-gray-600",children:"Calculating your empathy metrics..."})]})})}):!x||!w||!C||!P?l.jsx(We,{className:"w-full",children:l.jsx(Ve,{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx($s,{className:"w-8 h-8 mx-auto mb-4 text-gray-400"}),l.jsx("p",{className:"text-gray-600",children:"Not enough data to generate empathy metrics yet."}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Keep tracking to unlock insights!"})]})})}):l.jsxs("div",{className:"w-full space-y-6",children:[l.jsx(We,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:l.jsx(bt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Oi,{className:"w-8 h-8 text-purple-600"}),l.jsxs("div",{children:[l.jsx(wt,{className:"text-2xl text-purple-800",children:"Quantified Empathy Metrics"}),l.jsx("p",{className:"text-purple-600 mt-1",children:"Your compassionate journey through data and insights"})]})]}),l.jsx("div",{className:"flex space-x-2",children:r&&l.jsx(Je,{variant:"secondary",onClick:()=>r(x),className:"text-sm",children:"Share Insights"})})]})})}),l.jsx(We,{children:l.jsx(Ve,{className:"p-4",children:l.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{id:"overview",label:"Overview",icon:es},{id:"emotional-intelligence",label:"Emotional Intelligence",icon:$s},{id:"wellbeing",label:"Holistic Wellbeing",icon:Td},{id:"pacing",label:"Energy & Pacing",icon:a2},{id:"insights",label:"Insights",icon:Gh},{id:"trends",label:"Trends",icon:Fn}].map(({id:I,label:J,icon:se})=>l.jsxs(Je,{variant:d===I?"default":"secondary",onClick:()=>u(I),className:"flex items-center space-x-2 text-sm",children:[l.jsx(se,{className:"w-4 h-4"}),l.jsx("span",{children:J})]},I))})})}),l.jsx(We,{children:l.jsx(Ve,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Timeframe:"}),[{id:"week",label:"Past Week"},{id:"month",label:"Past Month"},{id:"quarter",label:"Past Quarter"}].map(({id:I,label:J})=>l.jsx(Je,{variant:f===I?"default":"secondary",onClick:()=>y(I),className:"text-sm",children:J},I))]})})}),d==="overview"&&l.jsx(K8,{empathy:x,emotional:w,wellbeing:C,pacing:P}),d==="emotional-intelligence"&&l.jsx(X8,{empathy:x}),d==="wellbeing"&&l.jsx(Q8,{wellbeing:C}),d==="pacing"&&l.jsx(J8,{pacing:P}),d==="insights"&&l.jsx(eI,{insights:M,recommendations:k,onInsightSelect:s,onRecommendationAccept:i}),d==="trends"&&l.jsx(tI,{painEntries:e,moodEntries:t,timeframe:f})]})},K8=({empathy:n,wellbeing:e,pacing:t})=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs(We,{className:"border-blue-200 bg-blue-50",children:[l.jsx(bt,{className:"pb-3",children:l.jsxs(wt,{className:"flex items-center text-blue-700 text-sm",children:[l.jsx($s,{className:"w-4 h-4 mr-2"}),"Emotional Intelligence"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[Math.round((n.emotionalIntelligence.selfAwareness+n.emotionalIntelligence.selfRegulation+n.emotionalIntelligence.motivation+n.emotionalIntelligence.empathy+n.emotionalIntelligence.socialSkills)/5),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Overall EQ Score"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Awareness"}),l.jsxs("span",{children:[n.emotionalIntelligence.selfAwareness,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Regulation"}),l.jsxs("span",{children:[n.emotionalIntelligence.selfRegulation,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Motivation"}),l.jsxs("span",{children:[n.emotionalIntelligence.motivation,"%"]})]})]})]})})]}),l.jsxs(We,{className:"border-green-200 bg-green-50",children:[l.jsx(bt,{className:"pb-3",children:l.jsxs(wt,{className:"flex items-center text-green-700 text-sm",children:[l.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Compassionate Progress"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[Math.round((n.compassionateProgress.selfCompassion+(100-n.compassionateProgress.selfCriticism)+n.compassionateProgress.progressCelebration+n.compassionateProgress.setbackResilience+n.compassionateProgress.hopefulness)/5),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Compassion Score"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Self-Compassion"}),l.jsxs("span",{children:[n.compassionateProgress.selfCompassion,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Resilience"}),l.jsxs("span",{children:[n.compassionateProgress.setbackResilience,"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Hopefulness"}),l.jsxs("span",{children:[n.compassionateProgress.hopefulness,"%"]})]})]})]})})]}),l.jsxs(We,{className:"border-purple-200 bg-purple-50",children:[l.jsx(bt,{className:"pb-3",children:l.jsxs(wt,{className:"flex items-center text-purple-700 text-sm",children:[l.jsx(Td,{className:"w-4 h-4 mr-2"}),"Quality of Life"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[Math.round(e.qualityOfLife.overallSatisfaction),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Life Satisfaction"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Meaning & Purpose"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.meaningAndPurpose),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Personal Growth"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.personalGrowth),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Autonomy"}),l.jsxs("span",{children:[Math.round(e.qualityOfLife.autonomy),"%"]})]})]})]})})]}),l.jsxs(We,{className:"border-orange-200 bg-orange-50",children:[l.jsx(bt,{className:"pb-3",children:l.jsxs(wt,{className:"flex items-center text-orange-700 text-sm",children:[l.jsx(a2,{className:"w-4 h-4 mr-2"}),"Energy Management"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.energyManagement.currentEnergyLevel),"%"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Current Energy"}),l.jsxs("div",{className:"mt-4 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Available Spoons"}),l.jsx("span",{children:t.energyManagement.spoonTheory.totalSpoons-t.energyManagement.spoonTheory.usedSpoons})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Battery Charge"}),l.jsxs("span",{children:[Math.round(t.energyManagement.batteryAnalogy.currentCharge),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Energy Budget"}),l.jsxs("span",{children:[Math.round(t.energyManagement.energyBudget.daily.flexible),"%"]})]})]})]})})]})]}),X8=({empathy:n})=>l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-blue-700",children:[l.jsx($s,{className:"w-5 h-5 mr-2"}),"Emotional Intelligence Breakdown"]})}),l.jsx(Ve,{children:l.jsx("div",{className:"space-y-4",children:Object.entries(n.emotionalIntelligence).map(([e,t])=>{const s=typeof t=="number"?t:0;return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),l.jsxs("span",{className:"text-sm font-medium w-10 text-right",children:[s,"%"]})]})]},e)})})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-green-700",children:[l.jsx(Oi,{className:"w-5 h-5 mr-2"}),"Empathy KPIs"]})}),l.jsx(Ve,{children:l.jsx("div",{className:"space-y-4",children:Object.entries(n.empathyKPIs).map(([e,t])=>{const s=typeof t=="number"?t:0;return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),l.jsxs("span",{className:"text-sm font-medium w-10 text-right",children:[s,"%"]})]})]},e)})})})]}),l.jsxs(We,{className:"lg:col-span-2",children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center text-purple-700",children:[l.jsx(Do,{className:"w-5 h-5 mr-2"}),"Humanized Metrics"]})}),l.jsx(Ve,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("div",{className:"space-y-4",children:Object.entries(n.humanizedMetrics).slice(0,-1).map(([e,t])=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${typeof t=="number"?t:50}%`}})}),l.jsx("span",{className:"text-sm font-medium w-10 text-right",children:typeof t=="number"?`${t}%`:"—"})]})]},e))}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Wisdom Gained"}),l.jsx("div",{className:"space-y-2",children:Array.isArray(n.humanizedMetrics.wisdomGained)&&n.humanizedMetrics.wisdomGained.slice(0,3).map((e,t)=>l.jsxs("div",{className:"text-sm text-gray-600 p-2 bg-gray-50 rounded",children:['"',typeof e=="string"?e.length>100?e.substring(0,100)+"...":e:"",'"']},t))})]})]})})]})]}),Q8=({wellbeing:n})=>l.jsxs(We,{children:[l.jsx(bt,{children:l.jsx(wt,{children:"Holistic Wellbeing Metrics"})}),l.jsxs(Ve,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Overall satisfaction: ",Math.round(n.qualityOfLife.overallSatisfaction),"%"]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["Meaning & Purpose: ",Math.round(n.qualityOfLife.meaningAndPurpose),"%"]})]})]}),J8=({pacing:n})=>l.jsxs(We,{children:[l.jsx(bt,{children:l.jsx(wt,{children:"Energy & Pacing Dashboard"})}),l.jsxs(Ve,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Current energy: ",Math.round(n.energyManagement.currentEnergyLevel),"%"]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["Used spoons: ",n.energyManagement.spoonTheory.usedSpoons,"/",n.energyManagement.spoonTheory.totalSpoons]})]})]}),eI=({insights:n,recommendations:e,onInsightSelect:t,onRecommendationAccept:s})=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center",children:[l.jsx(Gh,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Personal Insights"]})}),l.jsx(Ve,{children:l.jsx("div",{className:"space-y-4",children:n.map(i=>l.jsx("div",{className:"p-4 border rounded-lg cursor-pointer hover:bg-gray-50",onClick:()=>t?.(i),children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:i.title}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),l.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[l.jsxs("span",{children:["Confidence: ",i.confidence,"%"]}),l.jsx("span",{className:"mx-2",children:"•"}),l.jsx("span",{className:"capitalize",children:i.type})]})]}),i.type==="celebration"&&l.jsx(zo,{className:"w-5 h-5 text-yellow-500"}),i.type==="concern"&&l.jsx(wa,{className:"w-5 h-5 text-orange-500"}),i.type==="pattern"&&l.jsx(Fn,{className:"w-5 h-5 text-blue-500"})]})},i.id))})})]}),l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center",children:[l.jsx(_s,{className:"w-5 h-5 mr-2 text-green-500"}),"Personalized Recommendations"]})}),l.jsx(Ve,{children:l.jsx("div",{className:"space-y-4",children:e.map(i=>l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:i.title}),l.jsxs("span",{className:`px-2 py-1 text-xs rounded ${i.priority==="high"?"bg-red-100 text-red-700":i.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[i.priority," priority"]})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:i.description}),l.jsxs("div",{className:"text-xs text-gray-500",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Timeframe:"})," ",i.timeframe]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Effort:"})," ",i.effort]})]})]}),l.jsx(Je,{size:"sm",variant:"secondary",onClick:()=>s?.(i),className:"ml-4",children:"Accept"})]})},i.id))})})]})]}),tI=({painEntries:n,moodEntries:e,timeframe:t})=>l.jsxs(We,{children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center",children:[l.jsx(Fn,{className:"w-5 h-5 mr-2"}),"Trends Analysis"]})}),l.jsxs(Ve,{children:[l.jsxs("p",{className:"text-gray-600 mb-2",children:["Entries: pain ",n.length," • mood ",e.length," • timeframe ",t]}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Detailed visualization placeholder."})]})]});function nI(n){const e=n.flatMap(t=>t.treatments?.recent||[]).reduce((t,s)=>{const i=s.type;return t[i]=(t[i]||0)+1,t},{});return Object.entries(e).sort(([,t],[,s])=>s-t).map(([t,s])=>({treatment:t,frequency:s}))}function sI(n){const e=n.reduce((s,i)=>s+(i.workImpact?.missedWork||0),0),t=n.flatMap(s=>s.workImpact?.workLimitations||[]).reduce((s,i)=>(s[i]=(s[i]||0)+1,s),{});return{missedDays:e,commonLimitations:Object.entries(t).sort(([,s],[,i])=>i-s).slice(0,5)}}function sS(n,e,t,s,i){s=s||{};var r=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,c=i.getLineHeightFactor?i.getLineHeightFactor():r,d=o*c,u=/\r\n|\r|\n/g,h="",m=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(h=typeof n=="string"?n.split(u):n,m=h.length||1),t+=o*(2-r),s.valign==="middle"?t-=m/2*d:s.valign==="bottom"&&(t-=m*d),s.halign==="center"||s.halign==="right"){var f=o;if(s.halign==="center"&&(f*=.5),h&&m>=1){for(var y=0;y<h.length;y++)i.text(h[y],e-i.getStringUnitWidth(h[y])*f,t),t+=d;return i}e-=i.getStringUnitWidth(n)*f}return s.halign==="justify"?i.text(n,e,t,{maxWidth:s.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var _1={},Ul=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:_1=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var s,i,r;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),o=d[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=n.unifyColor(e.fillColor);u&&(s=this.jsPDFDocument).setFillColor.apply(s,u),u=n.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=n.unifyColor(e.lineColor),u&&(r=this.jsPDFDocument).setDrawColor.apply(r,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,s){return this.jsPDFDocument.splitTextToSize(e,t,s)},n.prototype.rect=function(e,t,s,i,r){return this.jsPDFDocument.rect(e,t,s,i,r)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return _1||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),Wp=function(n,e){return Wp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},Wp(n,e)};function iS(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rS=(function(n){iS(e,n);function e(t){var s=n.call(this)||this;return s._element=t,s}return e})(Array);function iI(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function rI(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Lh(n,e,t){t.applyStyles(e,!0);var s=Array.isArray(n)?n:[n],i=s.map(function(r){return t.getTextWidth(r)}).reduce(function(r,a){return Math.max(r,a)},0);return i}function aS(n,e,t,s){var i=e.settings.tableLineWidth,r=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:r});var a=oS(i,!1);a&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),s.y-t.y,a)}function oS(n,e){var t=n>0,s=e||e===0;return t&&s?"DF":t?"S":s?"F":null}function df(n,e){var t,s,i,r;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(s=n.top)!==null&&s!==void 0?s:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(r=n.bottom)!==null&&r!==void 0?r:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function lS(n,e){var t=df(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function aI(n,e,t,s,i){var r={},a=1.3333333333333333,o=qm(e,function(C){return i.getComputedStyle(C).backgroundColor});o!=null&&(r.fillColor=o);var c=qm(e,function(C){return i.getComputedStyle(C).color});c!=null&&(r.textColor=c);var d=lI(s,t);d&&(r.cellPadding=d);var u="borderTopColor",h=a*t,m=s.borderTopWidth;if(s.borderBottomWidth===m&&s.borderRightWidth===m&&s.borderLeftWidth===m){var f=(parseFloat(m)||0)/h;f&&(r.lineWidth=f)}else r.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/h,right:(parseFloat(s.borderRightWidth)||0)/h,bottom:(parseFloat(s.borderBottomWidth)||0)/h,left:(parseFloat(s.borderLeftWidth)||0)/h},r.lineWidth.top||(r.lineWidth.right?u="borderRightColor":r.lineWidth.bottom?u="borderBottomColor":r.lineWidth.left&&(u="borderLeftColor"));var y=qm(e,function(C){return i.getComputedStyle(C)[u]});y!=null&&(r.lineColor=y);var x=["left","right","center","justify"];x.indexOf(s.textAlign)!==-1&&(r.halign=s.textAlign),x=["middle","bottom","top"],x.indexOf(s.verticalAlign)!==-1&&(r.valign=s.verticalAlign);var v=parseInt(s.fontSize||"");isNaN(v)||(r.fontSize=v/a);var w=oI(s);w&&(r.fontStyle=w);var j=(s.fontFamily||"").toLowerCase();return n.indexOf(j)!==-1&&(r.font=j),r}function oI(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function qm(n,e){var t=cS(n,e);if(!t)return null;var s=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var i=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],r=parseInt(s[4]);return r===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function cS(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:cS(n.parentElement,e):t}function lI(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],s=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,r=t.map(function(o){return parseInt(o||"0")/s}),a=df(r,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function dS(n,e,t,s,i){var r,a;s===void 0&&(s=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var c=Object.keys(n.getFontList()),d=n.scaleFactor(),u=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:u,body:h,foot:m};for(var f=0;f<o.rows.length;f++){var y=o.rows[f],x=(a=(r=y?.parentElement)===null||r===void 0?void 0:r.tagName)===null||a===void 0?void 0:a.toLowerCase(),v=cI(c,d,t,y,s,i);v&&(x==="thead"?u.push(v):x==="tfoot"?m.push(v):h.push(v))}return{head:u,body:h,foot:m}}function cI(n,e,t,s,i,r){for(var a=new rS(s),o=0;o<s.cells.length;o++){var c=s.cells[o],d=t.getComputedStyle(c);if(i||d.display!=="none"){var u=void 0;r&&(u=aI(n,c,e,d,t)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:dI(c)})}}var h=t.getComputedStyle(s);if(a.length>0&&(i||h.display!=="none"))return a}function dI(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function uI(n,e,t){for(var s=0,i=[n,e,t];s<i.length;s++){var r=i[s];r&&typeof r!="object"&&console.error("The options parameter should be of type object, is: "+typeof r),r.startY&&typeof r.startY!="number"&&(console.error("Invalid value for startY option",r.startY),delete r.startY)}}function xa(n,e,t,s,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r}function hI(n,e){var t=new Ul(n),s=t.getDocumentOptions(),i=t.getGlobalOptions();uI(i,s,e);var r=xa({},i,s,e),a;typeof window<"u"&&(a=window);var o=fI(i,s,e),c=mI(i,s,e),d=pI(t,r),u=yI(t,r,a);return{id:e.tableId,content:u,hooks:c,styles:o,settings:d}}function fI(n,e,t){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var d=n[c],u=e[c],h=t[c];s.columnStyles=xa({},d,u,h)}else{var m=[n,e,t],f=m.map(function(y){return y[c]||{}});s[c]=xa({},f[0],f[1],f[2])}},r=0,a=Object.keys(s);r<a.length;r++){var o=a[r];i(o)}return s}function mI(n,e,t){for(var s=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,a=s;r<a.length;r++){var o=a[r];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function pI(n,e){var t,s,i,r,a,o,c,d,u,h,m,f,y=df(e.margin,40/n.scaleFactor()),x=(t=gI(n,e.startY))!==null&&t!==void 0?t:y.top,v;e.showFoot===!0?v="everyPage":e.showFoot===!1?v="never":v=(s=e.showFoot)!==null&&s!==void 0?s:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var j=(r=e.useCss)!==null&&r!==void 0?r:!1,C=e.theme||(j?"plain":"striped"),N=!!e.horizontalPageBreak,P=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:j,theme:C,startY:x,margin:y,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=e.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:w,showFoot:v,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:N,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function gI(n,e){var t=n.getLastAutoTable(),s=n.scaleFactor(),i=n.pageNumber(),r=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;r=a===i}return typeof e=="number"?e:(e==null||e===!1)&&r&&t?.finalY!=null?t.finalY+20/s:null}function yI(n,e,t){var s=e.head||[],i=e.body||[],r=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=dS(n,e.html,t,a,e.useCss)||{};s=o.head||s,i=o.body||s,r=o.foot||s}else console.error("Cannot parse html in non browser environment")}var c=e.columns||xI(s,i,r);return{columns:c,head:s,body:i,foot:r}}function xI(n,e,t){var s=n[0]||e[0]||t[0]||[],i=[];return Object.keys(s).filter(function(r){return r!=="_element"}).forEach(function(r){var a=1,o;Array.isArray(s)?o=s[parseInt(r)]:o=s[r],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var c=0;c<a;c++){var d=void 0;Array.isArray(s)?d=i.length:d=r+(c>0?"_".concat(c):"");var u={dataKey:d};i.push(u)}}),i}var Up=(function(){function n(e,t,s){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=s,this.doc=e.getDocument()}return n})(),vI=(function(n){iS(e,n);function e(t,s,i,r,a,o){var c=n.call(this,t,s,o)||this;return c.cell=i,c.row=r,c.column=a,c.section=r.section,c}return e})(Up),bI=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,s){return t+s.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,s,i,r,a){for(var o=0,c=t;o<c.length;o++){var d=c[o],u=new vI(e,this,s,i,r,a),h=d(u)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],h)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var s=0,i=this.hooks.didDrawPage;s<i.length;s++){var r=i[s];r(new Up(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var s=0,i=this.hooks.willDrawPage;s<i.length;s++){var r=i[s];r(new Up(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,r){return i+r.wrappedWidth},0);return t}else{var s=this.settings.margin;return e-s.left-s.right}},n})(),uS=(function(){function n(e,t,s,i,r){r===void 0&&(r=!1),this.height=0,this.raw=e,e instanceof rS&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=s,this.cells=i,this.spansMultiplePages=r}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(s,i){var r;return Math.max(s,((r=t.cells[i.index])===null||r===void 0?void 0:r.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(s){var i=t.cells[s.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var s=this;return e.reduce(function(i,r){var a=s.cells[r.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),d=c+o;return d>i?d:i},0)},n})(),hS=(function(){function n(e,t,s){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=s,this.raw=e;var r=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,r=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=r!=null?""+r:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");s=this.x+i/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var s=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,r=s*i+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=df(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),wI=(function(){function n(e,t,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=s}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,s=0,i=e.allRows();s<i.length;s++){var r=i[s],a=r.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},n})();function SI(n,e){NI(n,e);var t=[],s=0;e.columns.forEach(function(r){var a=r.getMaxCustomCellWidth(e);a?r.width=a:(r.width=r.wrappedWidth,t.push(r)),s+=r.width});var i=e.getWidth(n.pageSize().width)-s;i&&(i=qp(t,i,function(r){return Math.max(r.minReadableWidth,r.minWidth)})),i&&(i=qp(t,i,function(r){return r.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),jI(e),_I(e,n),kI(e)}function NI(n,e){var t=n.scaleFactor(),s=e.settings.horizontalPageBreak,i=lS(n,e);e.allRows().forEach(function(r){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d){var u=e.hooks.didParseCell;e.callCellHooks(n,u,d,r,c,null);var h=d.padding("horizontal");d.contentWidth=Lh(d.text,d.styles,n)+h;var m=Lh(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,n);if(d.minReadableWidth=m+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||s===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/t;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),e.allRows().forEach(function(r){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function qp(n,e,t){for(var s=e,i=n.reduce(function(f,y){return f+y.wrappedWidth},0),r=0;r<n.length;r++){var a=n[r],o=a.wrappedWidth/i,c=s*o,d=a.width+c,u=t(a),h=d<u?u:d;e-=h-a.width,a.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=n.filter(function(f){return e<0?f.width>t(f):!0});m.length&&(e=qp(m,e,t))}return e}function kI(n){for(var e={},t=1,s=n.allRows(),i=0;i<s.length;i++)for(var r=s[i],a=0,o=n.columns;a<o.length;a++){var c=o[a],d=e[c.index];if(t>1)t--,delete r.cells[c.index];else if(d)d.cell.height+=r.height,t=d.cell.colSpan,delete r.cells[c.index],d.left--,d.left<=1&&delete e[c.index];else{var u=r.cells[c.index];if(!u)continue;if(u.height=r.height,u.rowSpan>1){var h=s.length-i,m=u.rowSpan>h?h:u.rowSpan;e[c.index]={cell:u,left:m,row:r}}}}}function jI(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var s=e[t],i=null,r=0,a=0,o=0;o<n.columns.length;o++){var c=n.columns[o];if(a-=1,a>1&&n.columns[o+1])r+=c.width,delete s.cells[c.index];else if(i){var d=i;delete s.cells[c.index],i=null,d.width=c.width+r}else{var d=s.cells[c.index];if(!d)continue;if(a=d.colSpan,r=0,d.colSpan>1){i=d,r+=c.width;continue}d.width=c.width+r}}}function _I(n,e){for(var t={count:0,height:0},s=0,i=n.allRows();s<i.length;s++){for(var r=i[s],a=0,o=n.columns;a<o.length;a++){var c=o[a],d=r.cells[c.index];if(d){e.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=e.splitTextToSize(d.text,u+1/e.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=C1(d.text,u,d.styles,e,"...");else if(d.styles.overflow==="hidden")d.text=C1(d.text,u,d.styles,e,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&t.count*t.height<m*d.rowSpan?t={height:m,count:d.rowSpan}:t&&t.count>0&&t.height>m&&(m=t.height),m>r.height&&(r.height=m)}}t.count--}}function C1(n,e,t,s,i){return n.map(function(r){return CI(r,e,t,s,i)})}function CI(n,e,t,s,i){var r=1e4*s.scaleFactor();if(e=Math.ceil(e*r)/r,e>=Lh(n,t,s))return n;for(;e<Lh(n+i,t,s)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function AI(n,e){var t=new Ul(n),s=PI(e,t.scaleFactor()),i=new bI(e,s);return SI(t,i),t.applyStyles(t.userStyles),i}function PI(n,e){var t=n.content,s=MI(t.columns);if(t.head.length===0){var i=A1(s,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=A1(s,"foot");i&&t.foot.push(i)}var r=n.settings.theme,a=n.styles;return{columns:s,head:Vm("head",t.head,s,a,r,e),body:Vm("body",t.body,s,a,r,e),foot:Vm("foot",t.foot,s,a,r,e)}}function Vm(n,e,t,s,i,r){var a={},o=e.map(function(c,d){for(var u=0,h={},m=0,f=0,y=0,x=t;y<x.length;y++){var v=x[y];if(a[v.index]==null||a[v.index].left===0)if(f===0){var w=void 0;Array.isArray(c)?w=c[v.index-m-u]:w=c[v.dataKey];var j={};typeof w=="object"&&!Array.isArray(w)&&(j=w?.styles||{});var C=TI(n,v,d,i,s,r,j),N=new hS(w,C,n);h[v.dataKey]=N,h[v.index]=N,f=N.colSpan-1,a[v.index]={left:N.rowSpan-1,times:f}}else f--,m++;else a[v.index].left--,f=a[v.index].times,u++}return new uS(c,d,n,h)});return o}function A1(n,e){var t={};return n.forEach(function(s){if(s.raw!=null){var i=LI(e,s.raw);i!=null&&(t[s.dataKey]=i)}}),Object.keys(t).length>0?t:null}function LI(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function MI(n){return n.map(function(e,t){var s,i;return typeof e=="object"?i=(s=e.dataKey)!==null&&s!==void 0?s:t:i=t,new wI(i,e,t)})}function TI(n,e,t,s,i,r,a){var o=rI(s),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var d=xa({},o.table,o[n],i.styles,c),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},h=n==="body"?u:{},m=n==="body"&&t%2===0?xa({},o.alternateRow,i.alternateRowStyles):{},f=iI(r),y=xa({},f,d,m,h);return xa(y,a)}function DI(n,e,t){var s;t===void 0&&(t={});var i=lS(n,e),r=new Map,a=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var f=e.columns.find(function(y){return y.dataKey===m||y.index===m});f&&!r.has(f.index)&&(r.set(f.index,!0),a.push(f.index),o.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var d=!0,u=(s=t?.start)!==null&&s!==void 0?s:0;u<e.columns.length;){if(r.has(u)){u++;continue}var h=e.columns[u].wrappedWidth;if(d||i>=h)d=!1,a.push(u),o.push(e.columns[u]),i-=h;else break;u++}return{colIndexes:a,columns:o,lastIndex:u-1}}function EI(n,e){for(var t=[],s=0;s<e.columns.length;s++){var i=DI(n,e,{start:s});i.columns.length&&(t.push(i),s=i.lastIndex)}return t}function II(n,e){var t=e.settings,s=t.startY,i=t.margin,r={x:i.left,y:s},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=s+i.bottom+a;if(t.pageBreak==="avoid"){var c=e.body,d=c.reduce(function(m,f){return m+f.height},0);o+=d}var u=new Ul(n);(t.pageBreak==="always"||t.startY!=null&&o>u.pageSize().height)&&(mS(u),r.y=i.top),e.callWillDrawPageHooks(u,r);var h=xa({},r);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?RI(u,e,h,r):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(m){return Sa(u,e,m,r,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(m,f){var y=f===e.body.length-1;Mh(u,e,m,y,h,r,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(m){return Sa(u,e,m,r,e.columns)})),aS(u,e,h,r),e.callEndPageHooks(u,r),e.finalY=r.y,n.lastAutoTable=e,u.applyStyles(u.userStyles)}function RI(n,e,t,s){var i=EI(n,e),r=e.settings;if(r.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,u){n.applyStyles(n.userStyles),u>0?rd(n,e,t,s,d.columns,!0):P1(n,e,s,d.columns),OI(n,e,t,s,d.columns),Hm(n,e,s,d.columns)});else for(var a=-1,o=i[0],c=function(){var d=a;if(o){n.applyStyles(n.userStyles);var u=o.columns;a>=0?rd(n,e,t,s,u,!0):P1(n,e,s,u),d=L1(n,e,a+1,s,u),Hm(n,e,s,u)}var h=d-a;i.slice(1).forEach(function(m){n.applyStyles(n.userStyles),rd(n,e,t,s,m.columns,!0),L1(n,e,a+1,s,m.columns,h),Hm(n,e,s,m.columns)}),a=d};a<e.body.length-1;)c()}function P1(n,e,t,s){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(r){return Sa(n,e,r,t,s)})}function OI(n,e,t,s,i){n.applyStyles(n.userStyles),e.body.forEach(function(r,a){var o=a===e.body.length-1;Mh(n,e,r,o,t,s,i)})}function L1(n,e,t,s,i,r){n.applyStyles(n.userStyles),r=r??e.body.length;var a=Math.min(t+r,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(c,d){var u=t+d===e.body.length-1,h=fS(n,e,u,s);c.canEntireRowFit(h,i)&&(Sa(n,e,c,s,i),o=t+d)}),o}function Hm(n,e,t,s){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(r){return Sa(n,e,r,t,s)})}function FI(n,e,t){var s=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),r=Math.floor((e-i)/s);return Math.max(0,r)}function zI(n,e,t,s){var i={};n.spansMultiplePages=!0,n.height=0;for(var r=0,a=0,o=t.columns;a<o.length;a++){var c=o[a],d=n.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new hS(d.raw,d.styles,d.section);u=xa(u,d),u.text=[];var h=FI(d,e,s);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var m=s.scaleFactor(),f=s.getLineHeightFactor();d.contentHeight=d.getContentHeight(m,f),d.contentHeight>=e&&(d.contentHeight=e,u.styles.minCellHeight-=e),d.contentHeight>n.height&&(n.height=d.contentHeight),u.contentHeight=u.getContentHeight(m,f),u.contentHeight>r&&(r=u.contentHeight),i[c.index]=u}}var y=new uS(n.raw,-1,n.section,i,!0);y.height=r;for(var x=0,v=t.columns;x<v.length;x++){var c=v[x],u=y.cells[c.index];u&&(u.height=y.height);var d=n.cells[c.index];d&&(d.height=n.height)}return y}function BI(n,e,t,s){var i=n.pageSize().height,r=s.settings.margin,a=r.top+r.bottom,o=i-a;e.section==="body"&&(o-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var c=e.getMinimumRowHeight(s.columns,n),d=c<t;if(c>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=e.hasRowSpan(s.columns),h=e.getMaxCellHeight(s.columns)>o;return h?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||s.settings.rowPageBreak==="avoid")}function Mh(n,e,t,s,i,r,a){var o=fS(n,e,s,r);if(t.canEntireRowFit(o,a))Sa(n,e,t,r,a);else if(BI(n,t,o,e)){var c=zI(t,o,e,n);Sa(n,e,t,r,a),rd(n,e,i,r,a),Mh(n,e,c,s,i,r,a)}else rd(n,e,i,r,a),Mh(n,e,t,s,i,r,a)}function Sa(n,e,t,s,i){s.x=e.settings.margin.left;for(var r=0,a=i;r<a.length;r++){var o=a[r],c=t.cells[o.index];if(!c){s.x+=o.width;continue}n.applyStyles(c.styles),c.x=s.x,c.y=s.y;var d=e.callCellHooks(n,e.hooks.willDrawCell,c,t,o,s);if(d===!1){s.x+=o.width;continue}$I(n,c,s);var u=c.getTextPos();sS(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,o,s),s.x+=o.width}s.y+=t.height}function $I(n,e,t){var s=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof s.lineWidth=="number"){var i=oS(s.lineWidth,s.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof s.lineWidth=="object"&&(s.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),WI(n,e,t,s.lineWidth))}function WI(n,e,t,s){var i,r,a,o;s.top&&(i=t.x,r=t.y,a=t.x+e.width,o=t.y,s.right&&(a+=.5*s.right),s.left&&(i-=.5*s.left),c(s.top,i,r,a,o)),s.bottom&&(i=t.x,r=t.y+e.height,a=t.x+e.width,o=t.y+e.height,s.right&&(a+=.5*s.right),s.left&&(i-=.5*s.left),c(s.bottom,i,r,a,o)),s.left&&(i=t.x,r=t.y,a=t.x,o=t.y+e.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),c(s.left,i,r,a,o)),s.right&&(i=t.x+e.width,r=t.y,a=t.x+e.width,o=t.y+e.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),c(s.right,i,r,a,o));function c(d,u,h,m,f){n.getDocument().setLineWidth(d),n.getDocument().line(u,h,m,f,"S")}}function fS(n,e,t,s){var i=e.settings.margin.bottom,r=e.settings.showFoot;return(r==="everyPage"||r==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-s.y-i}function rd(n,e,t,s,i,r){i===void 0&&(i=[]),r===void 0&&(r=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!r&&e.foot.forEach(function(o){return Sa(n,e,o,s,i)}),e.callEndPageHooks(n,s);var a=e.settings.margin;aS(n,e,t,s),mS(n),e.pageNumber++,s.x=a.left,s.y=a.top,t.y=a.top,e.callWillDrawPageHooks(n,s),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Sa(n,e,o,s,i)}),n.applyStyles(n.userStyles))}function mS(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function UI(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=e[0],i=hI(this,s),r=AI(this,i);return II(this,r),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,s,i){sS(e,t,s,i,this)},n.API.autoTableSetDefaults=function(e){return Ul.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Ul.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var s;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ul(this),r=dS(i,e,window,t,!1),a=r.head,o=r.body,c=((s=a[0])===null||s===void 0?void 0:s.map(function(d){return d.content}))||[];return{columns:c,rows:o,data:o}}}var Gm;try{if(typeof window<"u"&&window){var M1=window,T1=M1.jsPDF||((Gm=M1.jspdf)===null||Gm===void 0?void 0:Gm.jsPDF);T1&&UI(T1)}}catch(n){console.error("Could not apply autoTable plugin",n)}class qI{doc;constructor(){this.doc=new ut}generateWCBReport(e){return new Promise((t,s)=>{try{this.doc=new ut,this.setupDocument(),this.addHeader(e),this.addPainTrends(e),this.addWorkImpact(e),this.addFunctionalAnalysis(e),this.addTreatments(e),this.addRecommendations(e);const i=this.doc.output("blob");t(i)}catch(i){s(i)}})}downloadWCBReport(e,t){return new Promise((s,i)=>{try{const r=`wcb-report-${new Date(e.period.start).toISOString().split("T")[0]}-to-${new Date(e.period.end).toISOString().split("T")[0]}.pdf`;this.generateWCBReport(e).then(a=>{const o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=t||r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o),s()}).catch(i)}catch(r){i(r)}})}setupDocument(){this.doc.setProperties({title:"WCB Pain Report",subject:"Workers Compensation Board Pain Tracking Report",author:"Pain Tracker Pro",keywords:"pain, tracking, WCB, report",creator:"Pain Tracker Pro"})}addHeader(e){this.doc.setFontSize(20),this.doc.setFont("helvetica","bold"),this.doc.text("Workers Compensation Board",20,30),this.doc.text("Pain Tracking Report",20,40),this.doc.setFontSize(12),this.doc.setFont("helvetica","normal"),this.doc.text(`Report Period: ${new Date(e.period.start).toLocaleDateString()} - ${new Date(e.period.end).toLocaleDateString()}`,20,60),this.doc.text(`Generated: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,20,70),this.doc.line(20,80,190,80)}addPainTrends(e){let t=90;if(this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Pain Trends",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.text(`Average Pain Level: ${e.painTrends.average.toFixed(1)}/10`,20,t),t+=10,Object.keys(e.painTrends.locations).length>0){this.doc.text("Common Pain Locations:",20,t),t+=8;const s=Object.entries(e.painTrends.locations).sort(([,i],[,r])=>Number(r)-Number(i)).map(([i,r])=>[i,String(r)]);this.doc.autoTable({startY:t,head:[["Location","Occurrences"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),t=this.doc.lastAutoTable?.finalY?this.doc.lastAutoTable.finalY+15:t+15}else this.doc.text("No pain location data recorded.",20,t),t+=10}addWorkImpact(e){this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Work Impact",20,this.doc.internal.pageSize.height>150?150:120);let t=this.doc.internal.pageSize.height>150?160:130;if(this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.text(`Missed Work Days: ${e.workImpact.missedDays}`,20,t),t+=10,e.workImpact.limitations.length>0){this.doc.text("Work Limitations:",20,t),t+=8;const s=e.workImpact.limitations.map(([i,r])=>[i,r.toString()]);this.doc.autoTable({startY:t,head:[["Limitation","Frequency"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[231,76,60]}}),t=this.doc.lastAutoTable.finalY+15}if(e.workImpact.accommodationsNeeded.length>0){this.doc.text("Workplace Accommodations Needed:",20,t),t+=8;const s=e.workImpact.accommodationsNeeded.map(i=>[i]);this.doc.autoTable({startY:t,head:[["Accommodation"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[46,204,113]}}),t=this.doc.lastAutoTable.finalY+15}}addFunctionalAnalysis(e){let t=this.doc.lastAutoTable?.finalY||200;if(t>250&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Functional Analysis",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.functionalAnalysis.limitations.length>0){this.doc.text("Functional Limitations:",20,t),t+=8;const s=e.functionalAnalysis.limitations.map(i=>[i]);this.doc.autoTable({startY:t,head:[["Limitation"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[155,89,182]}}),t=this.doc.lastAutoTable.finalY+15}if(e.functionalAnalysis.deterioration.length>0||e.functionalAnalysis.improvements.length>0){this.doc.text("Changes Over Time:",20,t),t+=8;const s=[...e.functionalAnalysis.deterioration.map(i=>["Deterioration",i]),...e.functionalAnalysis.improvements.map(i=>["Improvement",i])];this.doc.autoTable({startY:t,head:[["Type","Description"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[230,126,34]}}),t=this.doc.lastAutoTable.finalY+15}}addTreatments(e){let t=this.doc.lastAutoTable?.finalY||200;if(t>220&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Treatments",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.treatments.current.length>0){this.doc.text("Current Treatments:",20,t),t+=8;const s=e.treatments.current.map(i=>[i.treatment,i.frequency.toString()]);this.doc.autoTable({startY:t,head:[["Treatment","Frequency"]],body:s,margin:{left:20},styles:{fontSize:10},headStyles:{fillColor:[26,188,156]}}),t=this.doc.lastAutoTable.finalY+10}this.doc.text(`Treatment Effectiveness: ${e.treatments.effectiveness}`,20,t)}addRecommendations(e){let t=this.doc.lastAutoTable?.finalY||250;t>200&&(this.doc.addPage(),t=30),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.text("Recommendations",20,t),t+=10,this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),e.recommendations.forEach((i,r)=>{const a=this.doc.splitTextToSize(i,160);this.doc.text(`${r+1}.`,20,t),this.doc.text(a,30,t),t+=a.length*5+3});const s=this.doc.internal.pageSize.height;this.doc.setFontSize(8),this.doc.setFont("helvetica","italic"),this.doc.text("Generated by Pain Tracker Pro - Confidential Medical Information",20,s-20),this.doc.text(`Page ${this.doc.getNumberOfPages()}`,180,s-20)}}const VI=new qI;function HI(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let Vp=1;class GI{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...i}=e,r=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vp++,a=this.toasts.find(c=>c.id===r),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(c=>c.id===r?(this.publish({...c,...e,id:r,title:s}),{...c,...e,id:r,dismissible:o,title:s}):c):this.addToast({title:s,...i,dismissible:o,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let r=s!==void 0,a;const o=i.then(async d=>{if(a=["resolve",d],Ge.isValidElement(d))r=!1,this.create({id:s,type:"default",message:d});else if(ZI(d)&&!d.ok){r=!1;const h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,y=typeof h=="object"&&!Ge.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:m,...y})}else if(d instanceof Error){r=!1;const h=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description,y=typeof h=="object"&&!Ge.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:m,...y})}else if(t.success!==void 0){r=!1;const h=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description,y=typeof h=="object"&&!Ge.isValidElement(h)?h:{message:h};this.create({id:s,type:"success",description:m,...y})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){r=!1;const u=typeof t.error=="function"?await t.error(d):t.error,h=typeof t.description=="function"?await t.description(d):t.description,f=typeof u=="object"&&!Ge.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:h,...f})}}).finally(()=>{r&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((d,u)=>o.then(()=>a[0]==="reject"?u(a[1]):d(a[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,t)=>{const s=t?.id||Vp++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gi=new GI,YI=(n,e)=>{const t=e?.id||Vp++;return Gi.addToast({title:n,...e,id:t}),t},ZI=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",KI=YI,XI=()=>Gi.toasts,QI=()=>Gi.getActiveToasts(),zc=Object.assign(KI,{success:Gi.success,info:Gi.info,warning:Gi.warning,error:Gi.error,custom:Gi.custom,message:Gi.message,promise:Gi.promise,dismiss:Gi.dismiss,loading:Gi.loading},{getHistory:XI,getToasts:QI});HI("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const JI=["Continue monitoring pain levels","Follow up with healthcare provider","Modify work duties as needed"],D1=n=>({period:n,painTrends:{average:0,progression:[],locations:{}},workImpact:{missedDays:0,limitations:[],accommodationsNeeded:[]},functionalAnalysis:{limitations:[],deterioration:[],improvements:[]},treatments:{current:[],effectiveness:"No treatment data recorded."},recommendations:["No entries available for the selected period. Maintain regular logging to build a comprehensive record."]});function eR({entries:n,period:e}){const t=W.useMemo(()=>{const i=new Date(e.start),r=new Date(e.end);if(Number.isNaN(i.getTime())||Number.isNaN(r.getTime()))return D1(e);const a=n.filter(M=>{const T=new Date(M.timestamp);return Number.isNaN(T.getTime())?!1:T>=i&&T<=r});if(a.length===0)return D1(e);const o=[...a].sort((M,T)=>new Date(M.timestamp).getTime()-new Date(T.timestamp).getTime()),c=o.map(M=>M.baselineData.pain),d=c.reduce((M,T)=>M+T,0),u=c.length>0?d/c.length:0,h=o.reduce((M,T)=>(T.baselineData.locations?.forEach(k=>{const z=k.trim()||"Unspecified";M[z]=(M[z]||0)+1}),M),{}),m=[a.flatMap(M=>M.functionalImpact?.limitedActivities??[]),a.flatMap(M=>M.workImpact?.workLimitations??[]),a.flatMap(M=>M.comparison?.newLimitations??[])],f=Array.from(new Set(m.flat())).sort(),y=[],x=[];o.forEach((M,T)=>{if(T===0)return;const k=o[T-1].baselineData.pain,_=M.baselineData.pain-k,E=new Date(M.timestamp).toLocaleDateString();_>=2?y.push(`Pain increased significantly on ${E}`):_<=-2&&x.push(`Pain decreased significantly on ${E}`)});const{missedDays:v,commonLimitations:w}=sI(a),j=Array.from(new Set(a.flatMap(M=>M.workImpact?.modifiedDuties??[]))).sort(),C=nI(a).slice(0,5),N=a.flatMap(M=>[M.treatments?.effectiveness??"",...(M.treatments?.recent??[]).map(T=>T.effectiveness??"")]).map(M=>M.trim()).filter(Boolean);let P="No treatment data recorded.";if(N.length>0){const M=N.reduce((I,J)=>(I.set(J,(I.get(J)??0)+1),I),new Map),T=Array.from(M.entries()).sort((I,J)=>J[1]-I[1]),[k,z]=T[0],_=N.length,E=Math.round(z/_*100),$=T.slice(1).map(([I,J])=>`${I} (${J})`);P=`${k} (${E}% of ${_} reports)`,$.length>0&&(P+=`; other feedback: ${$.join(", ")}`)}const L=[...JI];return u>=7&&L.unshift("Elevated pain levels detected; consider clinical reassessment."),v>0&&L.push("Document missed work days for employer or insurer discussions."),j.length>0&&L.push("Review workplace accommodations to ensure ongoing suitability."),{period:e,painTrends:{average:Number.isFinite(u)?u:0,progression:o.map(M=>({date:M.timestamp,pain:M.baselineData.pain,locations:M.baselineData.locations??[],symptoms:M.baselineData.symptoms??[]})),locations:h},workImpact:{missedDays:v,limitations:w,accommodationsNeeded:j},functionalAnalysis:{limitations:f,deterioration:y,improvements:x},treatments:{current:C,effectiveness:P},recommendations:L}},[n,e]),s=async()=>{try{zc.loading("Generating PDF report..."),await VI.downloadWCBReport(t),zc.dismiss(),zc.success("PDF report downloaded successfully!")}catch(i){zc.dismiss(),console.error("PDF export failed:",i),zc.error("Failed to generate PDF report. Please try again.")}};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"WCB Report"}),l.jsx("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",disabled:t.recommendations.includes("No entries available for the selected period"),children:"Export PDF"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Period"}),l.jsxs("p",{children:["From: ",new Date(e.start).toLocaleDateString()]}),l.jsxs("p",{children:["To: ",new Date(e.end).toLocaleDateString()]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Pain Trends"}),t.painTrends?l.jsxs(l.Fragment,{children:[l.jsxs("p",{children:["Average Pain Level: ",Vt(t.painTrends.average,1)]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Common Locations:"}),Object.keys(t.painTrends.locations).length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No pain location data recorded."}):l.jsx("ul",{className:"list-disc pl-5",children:Object.entries(t.painTrends.locations).sort(([,i],[,r])=>r-i).map(([i,r])=>l.jsxs("li",{children:[i,": ",r," occurrences"]},i))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"No pain trend data available."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Work Impact"}),l.jsxs("p",{children:["Missed Days: ",t.workImpact.missedDays]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Common Limitations:"}),t.workImpact.limitations.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No work limitations reported."}):l.jsx("ul",{className:"list-disc pl-5",children:t.workImpact.limitations.map(([i,r])=>l.jsxs("li",{children:[i,": ",r," occurrences"]},i))})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Accommodations Needed:"}),t.workImpact.accommodationsNeeded.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No accommodations documented."}):l.jsx("ul",{className:"list-disc pl-5",children:t.workImpact.accommodationsNeeded.map(i=>l.jsx("li",{children:i},i))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Functional Analysis"}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Limitations:"}),t.functionalAnalysis.limitations.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No functional limitations reported."}):l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.limitations.map(i=>l.jsx("li",{children:i},i))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Changes Over Time"}),t.functionalAnalysis.deterioration.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Deterioration:"}),l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.deterioration.map((i,r)=>l.jsx("li",{children:i},i+r))})]}),t.functionalAnalysis.improvements.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"text-sm font-medium",children:"Improvements:"}),l.jsx("ul",{className:"list-disc pl-5",children:t.functionalAnalysis.improvements.map((i,r)=>l.jsx("li",{children:i},i+r))})]}),t.functionalAnalysis.deterioration.length===0&&t.functionalAnalysis.improvements.length===0&&l.jsx("p",{className:"text-sm text-gray-500",children:"No significant pain changes detected."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Treatments"}),t.treatments.current.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No active treatments recorded."}):l.jsx("ul",{className:"list-disc pl-5",children:t.treatments.current.map(i=>l.jsxs("li",{children:[i.treatment,": ",i.frequency," entries"]},i.treatment))}),l.jsx("p",{className:"mt-2 text-sm text-gray-700",children:t.treatments.effectiveness})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:"Recommendations"}),l.jsx("ul",{className:"list-disc pl-5",children:t.recommendations.map(i=>l.jsx("li",{children:i},i))})]})]})]})}function tR({entries:n}){const{ui:e,setReportPeriod:t}=Hl(),s=W.useRef(null);return W.useEffect(()=>{s.current&&s.current.focus()},[]),l.jsxs(We,{className:"mb-8",id:"wcb-report-section",children:[l.jsxs(bt,{children:[l.jsxs(wt,{className:"flex items-center space-x-2",children:[l.jsx(dh,{className:"h-5 w-5"}),l.jsx("span",{children:"WCB Report"})]}),l.jsx(ur,{children:"Generate a comprehensive report for WorkSafe BC submission"})]}),l.jsxs(Ve,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-foreground mb-2",children:"Start Date"}),l.jsx("input",{ref:s,id:"start-date",type:"date",value:e.reportPeriod.start,onChange:i=>t({start:i.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Report start date"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-foreground mb-2",children:"End Date"}),l.jsx("input",{id:"end-date",type:"date",value:e.reportPeriod.end,onChange:i=>t({end:i.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-label":"Report end date"})]})]}),Gw("workSafeBCExport")?l.jsx(eR,{entries:n,period:e.reportPeriod}):l.jsx("div",{className:"text-sm text-muted-foreground p-4 bg-muted/5 rounded",children:"WorkSafe BC report export is not available in this release."})]})]})}const Ym=n=>n,Zm=n=>n,Tr={NOTIFICATIONS:"pain_tracker_notifications",PREFERENCES:"pain_tracker_notification_preferences",SCHEDULES:"pain_tracker_notification_schedules",LAST_BACKUP:"pain_tracker_notifications_last_backup"};class Ll{static instance;constructor(){}static getInstance(){return Ll.instance||(Ll.instance=new Ll),Ll.instance}async saveNotification(e){try{const t=await this.getAllNotifications(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),await this.saveNotificationsToStorage(t)}catch(t){throw console.error("Failed to save notification:",t),new Error("Failed to save notification")}}async getNotification(e){try{return(await this.getAllNotifications()).find(s=>s.id===e)||null}catch(t){return console.error("Failed to get notification:",t),null}}async getAllNotifications(){try{const e=localStorage.getItem(Tr.NOTIFICATIONS);if(!e)return[];const t=await Zm(e);return JSON.parse(t).filter(this.isValidNotification)}catch(e){return console.error("Failed to load notifications:",e),[]}}async getNotificationsByStatus(e){return(await this.getAllNotifications()).filter(s=>s.status===e)}async getNotificationsByType(e){return(await this.getAllNotifications()).filter(s=>s.type===e)}async updateNotificationStatus(e,t){try{const s=await this.getNotification(e);if(!s)return;const i={...s,status:t,updatedAt:new Date().toISOString(),...t==="read"&&{readAt:new Date().toISOString()},...t==="dismissed"&&{dismissedAt:new Date().toISOString()}};await this.saveNotification(i)}catch(s){throw console.error("Failed to update notification status:",s),new Error("Failed to update notification status")}}async deleteNotification(e){try{const s=(await this.getAllNotifications()).filter(i=>i.id!==e);await this.saveNotificationsToStorage(s)}catch(t){throw console.error("Failed to delete notification:",t),new Error("Failed to delete notification")}}async bulkUpdateStatus(e,t){try{const i=(await this.getAllNotifications()).map(r=>e.includes(r.id)?{...r,status:t,updatedAt:new Date().toISOString(),...t==="read"&&{readAt:new Date().toISOString()},...t==="dismissed"&&{dismissedAt:new Date().toISOString()}}:r);await this.saveNotificationsToStorage(i)}catch(s){throw console.error("Failed to bulk update notifications:",s),new Error("Failed to bulk update notifications")}}async archiveOldNotifications(e=30){try{const t=await this.getAllNotifications(),s=new Date;s.setDate(s.getDate()-e);const i=t.map(r=>new Date(r.createdAt)<s&&r.status==="read"?{...r,status:"archived",updatedAt:new Date().toISOString()}:r);await this.saveNotificationsToStorage(i)}catch(t){console.error("Failed to archive old notifications:",t)}}async savePreferences(e){try{const t=await Ym(JSON.stringify(e));localStorage.setItem(Tr.PREFERENCES,t)}catch(t){throw console.error("Failed to save notification preferences:",t),new Error("Failed to save notification preferences")}}async getPreferences(){try{const e=localStorage.getItem(Tr.PREFERENCES);if(!e)return this.getDefaultPreferences();const t=await Zm(e),s=JSON.parse(t);return this.validatePreferences(s)}catch(e){return console.error("Failed to load notification preferences:",e),this.getDefaultPreferences()}}async saveSchedule(e){try{const t=await this.getAllSchedules(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),await this.saveSchedulesToStorage(t)}catch(t){throw console.error("Failed to save notification schedule:",t),new Error("Failed to save notification schedule")}}async getAllSchedules(){try{const e=localStorage.getItem(Tr.SCHEDULES);if(!e)return[];const t=await Zm(e);return JSON.parse(t).filter(this.isValidSchedule)}catch(e){return console.error("Failed to load notification schedules:",e),[]}}async deleteSchedule(e){try{const s=(await this.getAllSchedules()).filter(i=>i.id!==e);await this.saveSchedulesToStorage(s)}catch(t){throw console.error("Failed to delete notification schedule:",t),new Error("Failed to delete notification schedule")}}async saveNotificationsToStorage(e){const t=await Ym(JSON.stringify(e));localStorage.setItem(Tr.NOTIFICATIONS,t)}async saveSchedulesToStorage(e){const t=await Ym(JSON.stringify(e));localStorage.setItem(Tr.SCHEDULES,t)}isValidNotification(e){const t=e;return t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.title=="string"&&typeof t.message=="string"&&["low","medium","high","urgent"].includes(t.priority)&&["pending","sent","read","dismissed","archived"].includes(t.status)&&Array.isArray(t.deliveryMethods)&&typeof t.createdAt=="string"}isValidSchedule(e){const t=e;if(!t||typeof t!="object")return!1;const s=typeof t.id=="string",i=typeof t.name=="string",r=typeof t.type=="string",a=!!t.trigger,o=!!t.template,c=typeof t.isActive=="boolean",d=typeof t.createdAt=="string";return!!(s&&i&&r&&a&&o&&c&&d)}getDefaultPreferences(){return{enabled:!0,deliveryMethods:{browser:!0,in_app:!0,email:!1,sms:!1},categories:{pain_reminders:!0,medication_alerts:!0,appointment_reminders:!0,goal_achievements:!0,progress_checkins:!0,system_updates:!1,custom:!0},quietHours:{enabled:!1,start:"22:00",end:"08:00"},frequencyLimits:{maxPerDay:10,maxPerHour:3}}}validatePreferences(e){const t=e,s=this.getDefaultPreferences();return!t||typeof t!="object"?s:{enabled:typeof t.enabled=="boolean"?t.enabled:s.enabled,deliveryMethods:{browser:typeof t.deliveryMethods?.browser=="boolean"?t.deliveryMethods.browser:s.deliveryMethods.browser,in_app:typeof t.deliveryMethods?.in_app=="boolean"?t.deliveryMethods.in_app:s.deliveryMethods.in_app,email:typeof t.deliveryMethods?.email=="boolean"?t.deliveryMethods.email:s.deliveryMethods.email,sms:typeof t.deliveryMethods?.sms=="boolean"?t.deliveryMethods.sms:s.deliveryMethods.sms},categories:{pain_reminders:typeof t.categories?.pain_reminders=="boolean"?t.categories.pain_reminders:s.categories.pain_reminders,medication_alerts:typeof t.categories?.medication_alerts=="boolean"?t.categories.medication_alerts:s.categories.medication_alerts,appointment_reminders:typeof t.categories?.appointment_reminders=="boolean"?t.categories.appointment_reminders:s.categories.appointment_reminders,goal_achievements:typeof t.categories?.goal_achievements=="boolean"?t.categories.goal_achievements:s.categories.goal_achievements,progress_checkins:typeof t.categories?.progress_checkins=="boolean"?t.categories.progress_checkins:s.categories.progress_checkins,system_updates:typeof t.categories?.system_updates=="boolean"?t.categories.system_updates:s.categories.system_updates,custom:typeof t.categories?.custom=="boolean"?t.categories.custom:s.categories.custom},quietHours:{enabled:typeof t.quietHours?.enabled=="boolean"?t.quietHours.enabled:s.quietHours.enabled,start:typeof t.quietHours?.start=="string"?t.quietHours.start:s.quietHours.start,end:typeof t.quietHours?.end=="string"?t.quietHours.end:s.quietHours.end},frequencyLimits:{maxPerDay:typeof t.frequencyLimits?.maxPerDay=="number"?t.frequencyLimits.maxPerDay:s.frequencyLimits.maxPerDay,maxPerHour:typeof t.frequencyLimits?.maxPerHour=="number"?t.frequencyLimits.maxPerHour:s.frequencyLimits.maxPerHour}}}async cleanup(){try{await this.archiveOldNotifications(30);const e=await this.getAllNotifications(),t=new Date,s=e.filter(i=>!i.expiresAt||new Date(i.expiresAt)>t);s.length!==e.length&&await this.saveNotificationsToStorage(s)}catch(e){console.error("Failed to cleanup notifications:",e)}}async clearAll(){try{localStorage.removeItem(Tr.NOTIFICATIONS),localStorage.removeItem(Tr.PREFERENCES),localStorage.removeItem(Tr.SCHEDULES),localStorage.removeItem(Tr.LAST_BACKUP)}catch(e){throw console.error("Failed to clear notification data:",e),new Error("Failed to clear notification data")}}}const nR=Ll.getInstance();class Ml{static instance;permission="default";notificationQueue=[];constructor(){this.checkPermission()}static getInstance(){return Ml.instance||(Ml.instance=new Ml),Ml.instance}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}getPermission(){return this.isSupported()?Notification.permission:"denied"}async requestPermission(){if(!this.isSupported())return console.warn("Browser notifications are not supported"),"denied";try{const e=await Notification.requestPermission();return this.permission=e,this.permission==="granted"&&this.processQueue(),this.permission}catch(e){return console.error("Failed to request notification permission:",e),"denied"}}checkPermission(){this.isSupported()&&(this.permission=Notification.permission)}async show(e){if(!this.isSupported())return console.warn("Browser notifications are not supported"),null;if(this.permission!=="granted")return this.notificationQueue.push(e),null;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/icons/notification-icon.png",badge:e.badge||"/icons/badge-icon.png",tag:e.tag,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,data:e.data});return e.requireInteraction||setTimeout(()=>{t.close()},5e3),t.onclick=()=>{if(window.focus(),e.data&&typeof e.data=="object"&&"actionUrl"in e.data){const s=e.data.actionUrl;s&&(window.location.href=s)}t.close()},t.onclose=()=>{},t.onerror=s=>{console.error("Notification error:",s)},t}catch(t){return console.error("Failed to show notification:",t),null}}async showFromNotification(e){const t={title:e.title,body:e.message,tag:e.id,requireInteraction:e.priority==="urgent"||e.priority==="high",data:{actionUrl:e.actionUrl,notificationId:e.id}};return this.show(t)}processQueue(){for(;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();e&&this.show(e)}}closeByTag(e){this.isSupported()&&console.log(`Attempting to close notifications with tag: ${e}`)}getStatus(){return{supported:this.isSupported(),permission:this.permission,queueLength:this.notificationQueue.length}}clearQueue(){this.notificationQueue=[]}async test(){const e={title:"Test Notification",body:"This is a test notification to verify browser notification functionality.",tag:"test-notification",requireInteraction:!1};return await this.show(e)!==null}}const Km=Ml.getInstance();class Tl{static instance;STORAGE_KEY="pain-tracker-goals";PROGRESS_KEY="pain-tracker-goal-progress";REMINDERS_KEY="pain-tracker-goal-reminders";constructor(){}static getInstance(){return Tl.instance||(Tl.instance=new Tl),Tl.instance}async saveGoal(e){try{const t=await this.getAllGoals(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save goal:",t),new Error("Failed to save goal")}}async getGoal(e){try{return(await this.getAllGoals()).find(s=>s.id===e)||null}catch(t){return console.error("Failed to get goal:",t),null}}async getAllGoals(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get goals:",e),[]}}async getGoalsByStatus(e){return(await this.getAllGoals()).filter(s=>s.status===e)}async getActiveGoals(){return this.getGoalsByStatus("active")}async deleteGoal(e){try{const s=(await this.getAllGoals()).filter(i=>i.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s)),await this.deleteGoalProgress(e),await this.deleteGoalReminders(e)}catch(t){throw console.error("Failed to delete goal:",t),new Error("Failed to delete goal")}}async saveProgress(e){try{const t=await this.getAllProgress(),s=t.findIndex(i=>i.goalId===e.goalId&&i.date===e.date);s>=0?t[s]=e:t.push(e),localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save progress:",t),new Error("Failed to save progress")}}async getGoalProgress(e){try{return(await this.getAllProgress()).filter(s=>s.goalId===e)}catch(t){return console.error("Failed to get goal progress:",t),[]}}async saveGoalProgress(e){return this.saveProgress(e)}async getGoalMilestones(e){return(await this.getGoal(e))?.milestones??[]}async getAllProgress(){try{const e=localStorage.getItem(this.PROGRESS_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get progress:",e),[]}}async deleteGoalProgress(e){try{const s=(await this.getAllProgress()).filter(i=>i.goalId!==e);localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(s))}catch(t){console.error("Failed to delete goal progress:",t)}}async saveReminder(e){try{const t=await this.getAllReminders(),s=t.findIndex(i=>i.id===e.id);s>=0?t[s]=e:t.push(e),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t))}catch(t){throw console.error("Failed to save reminder:",t),new Error("Failed to save reminder")}}async getGoalReminders(e){try{return(await this.getAllReminders()).filter(s=>s.goalId===e)}catch(t){return console.error("Failed to get goal reminders:",t),[]}}async getAllReminders(){try{const e=localStorage.getItem(this.REMINDERS_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to get reminders:",e),[]}}async deleteGoalReminders(e){try{const s=(await this.getAllReminders()).filter(i=>i.goalId!==e);localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(s))}catch(t){console.error("Failed to delete goal reminders:",t)}}async calculateGoalAnalytics(e){try{const t=await this.getGoal(e);if(!t)return null;const s=await this.getGoalProgress(e),i=new Date,r=t.endDate?new Date(t.endDate):new Date(i.getTime()+720*60*60*1e3),a=s.reduce((x,v)=>x+v.value,0),o=s.length>0?a/s.length:0,{bestStreak:c,currentStreak:d}=this.calculateStreaks(s,t.targets),u=this.calculateCompletionPercentage(t,s),h=Math.max(0,Math.ceil((r.getTime()-i.getTime())/(1440*60*1e3))),m=this.projectCompletionDate(t,s),f=this.calculateTrend(s),y=this.generateInsights(t,s,u,f);return{goalId:e,totalProgress:a,averageProgress:o,bestStreak:c,currentStreak:d,completionPercentage:u,daysRemaining:h,projectedCompletion:m,trend:f,insights:y}}catch(t){return console.error("Failed to calculate goal analytics:",t),null}}calculateStreaks(e,t){if(e.length===0)return{bestStreak:0,currentStreak:0};const s=e.sort((o,c)=>new Date(o.date).getTime()-new Date(c.date).getTime());let i=0,r=0,a=0;for(let o=0;o<s.length;o++){const c=s[o];this.isProgressSuccessful(c,t)?(a++,r=a,i=Math.max(i,a)):a=0}return{bestStreak:i,currentStreak:r}}isProgressSuccessful(e,t){return t.some(s=>{switch(s.comparison){case"less_than":return e.value<s.targetValue;case"greater_than":return e.value>s.targetValue;case"equal_to":return e.value===s.targetValue;default:return!1}})}calculateCompletionPercentage(e,t){if(e.targets.length===0)return 0;const s=e.targets[0],i=t[t.length-1];if(!i)return 0;switch(s.comparison){case"percentage_decrease":case"percentage_increase":return Math.min(100,Math.max(0,i.value));default:return Math.min(100,Math.max(0,i.value/s.targetValue*100))}}projectCompletionDate(e,t){if(t.length<2)return"Insufficient data";const s=t.slice(-7);if(s.length<2)return"Insufficient data";const i=s.reduce((u,h,m)=>m===0?0:u+(h.value-s[m-1].value),0)/(s.length-1);if(i===0)return"Stable progress";const r=e.targets[0],a=s[s.length-1].value,c=(r.targetValue-a)/i;if(c<=0)return"Already achieved";if(c>365)return"More than a year";const d=new Date;return d.setDate(d.getDate()+Math.ceil(c)),d.toLocaleDateString()}calculateTrend(e){if(e.length<3)return"stable";const s=e.slice(-5).map(r=>r.value),i=s.reduce((r,a,o)=>o===0?0:r+(a-s[o-1]),0)/(s.length-1);return i>.1?"improving":i<-.1?"declining":"stable"}generateInsights(e,t,s,i){const r=[];return s>=100?r.push("🎉 Goal achieved! Congratulations!"):s>=75?r.push("🚀 Great progress! You're almost there!"):s>=50&&r.push("📈 Halfway there! Keep up the momentum!"),i==="improving"?r.push("📊 Your progress is trending upward - excellent work!"):i==="declining"&&r.push("⚠️ Progress has slowed. Consider reviewing your strategies."),t.length===0&&r.push("📝 Start tracking your progress to see detailed insights."),r}async exportGoals(){const e=await this.getAllGoals(),t=await this.getAllProgress(),s=await this.getAllReminders();return JSON.stringify({goals:e,progress:t,reminders:s,exportedAt:new Date().toISOString()},null,2)}async importGoals(e){try{const t=JSON.parse(e);t.goals&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t.goals)),t.progress&&localStorage.setItem(this.PROGRESS_KEY,JSON.stringify(t.progress)),t.reminders&&localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t.reminders))}catch(t){throw console.error("Failed to import goals:",t),new Error("Invalid import data")}}async clearAllData(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.PROGRESS_KEY),localStorage.removeItem(this.REMINDERS_KEY)}}const Wr=Tl.getInstance();class Dl{static instance;activeTriggers=new Map;lastAnalysis=new Map;analysisCooldown=300*1e3;constructor(){}static getInstance(){return Dl.instance||(Dl.instance=new Dl),Dl.instance}registerTrigger(e){this.activeTriggers.set(e.id,e)}unregisterTrigger(e){this.activeTriggers.delete(e)}async analyzeTriggers(e){const t=new Date;for(const s of this.activeTriggers.values()){if(!s.isActive)continue;const i=this.lastAnalysis.get(s.id);if(i&&t.getTime()-i.getTime()<this.analysisCooldown||this.hasExceededDailyLimit(s))continue;const r=await this.analyzeTrigger(s,e);r.shouldTrigger&&(await this.executeTrigger(s,r),this.lastAnalysis.set(s.id,t))}}async analyzeTrigger(e,t){let s=0,i=0;const r=[];for(const c of e.conditions){const d=await this.evaluateCondition(c,t);s+=d.confidence,i++,d.shouldTrigger&&r.push(d.reason)}const a=i>0?s/i:0;return{shouldTrigger:a>=.7,confidence:a,reason:r.join("; "),recommendedPriority:this.calculateRecommendedPriority(e,a)}}async evaluateCondition(e,t){switch(e.type){case"pain_threshold":return this.evaluatePainThreshold(e,t);case"pattern_recognition":return this.evaluatePatternRecognition(e,t);case"medication_due":return this.evaluateMedicationDue(e,t);case"goal_progress":return this.evaluateGoalProgress(e,t);case"time_since_last_entry":return this.evaluateTimeSinceLastEntry(e,t);case"streak_maintenance":return this.evaluateStreakMaintenance(e,t);default:return{shouldTrigger:!1,confidence:0,reason:"Unknown condition type"}}}async executeTrigger(e,t){try{const s={userId:"current-user",type:e.type,title:this.generateTriggerTitle(e),message:this.generateTriggerMessage(e,t),priority:t.recommendedPriority||e.priority,status:"sent",deliveryMethods:["in_app"],sentAt:new Date().toISOString(),metadata:{triggerId:e.id,confidence:t.confidence,reason:t.reason},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i=`intelligent_${e.id}_${Date.now()}`,r={...s,id:i};await nR.saveNotification(r);const a={...e,lastTriggered:new Date().toISOString(),triggerCount:e.triggerCount+1};this.activeTriggers.set(e.id,a),Km.isSupported()&&Km.getPermission()==="granted"&&await Km.showFromNotification(r)}catch(s){console.error("Failed to execute intelligent trigger:",s)}}evaluatePainThreshold(e,t){if(!e.threshold||t.length===0)return{shouldTrigger:!1,confidence:0,reason:"Insufficient data for pain threshold analysis"};const s=t.slice(-7),i=s.reduce((o,c)=>o+c.baselineData.pain,0)/s.length,r=i>=e.threshold,a=Math.min(i/10,1);return{shouldTrigger:r,confidence:a,reason:`Average pain level ${Vt(i,1)}/10 ${r?"exceeds":"below"} threshold ${e.threshold}`}}evaluatePatternRecognition(e,t){if(t.length<5)return{shouldTrigger:!1,confidence:0,reason:"Insufficient data for pattern recognition"};const i=t.slice(-5).map(c=>c.baselineData.pain),r=this.calculateTrend(i),a=r>.5,o=Math.abs(r);return{shouldTrigger:a,confidence:o,reason:`Pain trend ${r>0?"increasing":"decreasing"} with ${Vt(o,2)} confidence`}}evaluateMedicationDue(e,t){if(t.length===0)return{shouldTrigger:!1,confidence:0,reason:"No entries available for medication analysis"};const i=t.slice(-7).filter(m=>m.medications?.current&&m.medications.current.length>0);if(i.length===0)return{shouldTrigger:!1,confidence:0,reason:"No medication data found in recent entries"};const r=new Map;i.forEach(m=>{m.medications?.current?.forEach(f=>{const y=`${f.name}-${f.dosage}`,x=r.get(y)||{count:0};x.count+=1,x.lastTaken=new Date(m.timestamp),r.set(y,x)})});const a=new Date;let o=0,c=0;for(const[,m]of r)c++,m.lastTaken&&(a.getTime()-m.lastTaken.getTime())/36e5>24&&o++;const d=c>0?o/c:0,u=d>.3,h=Math.min(d*2,1);return{shouldTrigger:u,confidence:h,reason:`${o} of ${c} medications may be due (${Vt(d*100,1)}% potentially overdue)`}}async evaluateGoalProgress(e,t){try{const i=(await Wr.getAllGoals()).filter(u=>u.status==="active");if(i.length===0)return{shouldTrigger:!1,confidence:0,reason:"No active goals to evaluate"};let r=0;const a=[];for(const u of i){const h=new Date,m=new Date(u.startDate),f=u.endDate?new Date(u.endDate):null;if(f&&h>f){r++,a.push(`${u.title} is overdue`);continue}for(const y of u.targets){const v=(u.progress||[]).slice(-7);if(v.length===0){r++,a.push(`${u.title} has no recent progress`);break}const j=v.reduce((L,M)=>L+M.value,0)/v.length/y.targetValue*100,C=Math.floor((h.getTime()-m.getTime())/(1440*60*1e3)),N=f?Math.floor((f.getTime()-m.getTime())/(1440*60*1e3)):30,P=C/N*100;if(j<P*.7){r++,a.push(`${u.title} is behind schedule (${Vt(j,1)}% vs expected ${Vt(P,1)}%)`);break}}}const o=r/i.length,c=o>.3,d=Math.min(o*2,1);return{shouldTrigger:c,confidence:d,reason:`${r} of ${i.length} active goals need attention: ${a.slice(0,2).join(", ")}${a.length>2?"...":""}`}}catch(s){return console.error("Error evaluating goal progress:",s),{shouldTrigger:!1,confidence:0,reason:"Error evaluating goal progress"}}}evaluateTimeSinceLastEntry(e,t){if(t.length===0)return{shouldTrigger:!0,confidence:1,reason:"No pain entries recorded yet"};const s=t[t.length-1],i=(Date.now()-new Date(s.timestamp).getTime())/(1e3*60*60),r=e.timeWindow||24,a=i>=r,o=Math.min(i/r,1);return{shouldTrigger:a,confidence:o,reason:`${Vt(i,1)} hours since last entry (${r}h threshold)`}}evaluateStreakMaintenance(e,t){const s=e.streakLength||7,i=s;if(t.length<i)return{shouldTrigger:!1,confidence:0,reason:"Insufficient entries for streak analysis"};const r=t.slice(-i),o=new Set(r.map(u=>Fo(u.timestamp).toDateString())).size/s;return{shouldTrigger:o>=.8,confidence:o,reason:`${Vt(o*100,1)}% consistency over last ${s} days`}}calculateTrend(e){if(e.length<2)return 0;let t=0;for(let s=1;s<e.length;s++)t+=e[s]-e[s-1];return t/(e.length-1)}calculateRecommendedPriority(e,t){return t>=.9?"urgent":t>=.7?"high":t>=.5?"medium":"low"}generateTriggerTitle(e){switch(e.type){case"pain_reminder":return"Smart Pain Check-in";case"medication_alert":return"Medication Reminder";case"goal_achievement":return"Goal Progress Update";case"progress_checkin":return"Progress Check-in";default:return e.name}}generateTriggerMessage(e,t){return`${e.description}. ${t.reason}`}hasExceededDailyLimit(e){if(!e.lastTriggered)return!1;const t=new Date(e.lastTriggered);return ch(t,new Date)&&e.triggerCount>=e.maxTriggersPerDay}getActiveTriggers(){return Array.from(this.activeTriggers.values())}getTriggerStats(e){const t=this.activeTriggers.get(e);return t?{triggerCount:t.triggerCount,lastTriggered:t.lastTriggered}:null}updateTrigger(e,t){const s=this.activeTriggers.get(e);s&&this.activeTriggers.set(e,{...s,...t})}}const dr=Dl.getInstance(),pS=()=>[{id:"pain_threshold_high",name:"High Pain Alert",description:"Alert when pain levels are consistently high",type:"pain_reminder",conditions:[{type:"pain_threshold",threshold:7},{type:"pattern_recognition"}],priority:"high",cooldownPeriod:120,maxTriggersPerDay:2,isActive:!0,triggerCount:0},{id:"missed_entries",name:"Missed Entries Reminder",description:"Remind when entries haven't been logged recently",type:"pain_reminder",conditions:[{type:"time_since_last_entry",timeWindow:48}],priority:"medium",cooldownPeriod:1440,maxTriggersPerDay:1,isActive:!0,triggerCount:0},{id:"consistency_streak",name:"Consistency Encouragement",description:"Encourage maintaining consistent tracking",type:"progress_checkin",conditions:[{type:"streak_maintenance",streakLength:5}],priority:"low",cooldownPeriod:1440,maxTriggersPerDay:1,isActive:!0,triggerCount:0}],sR=()=>{pS().forEach(e=>{dr.registerTrigger(e)})},iR=async n=>{await dr.analyzeTriggers(n)},rR=()=>{const[n,e]=W.useState([]),[t,s]=W.useState(!1),[i,r]=W.useState(null);W.useEffect(()=>{sR(),e(dr.getActiveTriggers())},[]);const a=W.useCallback(async u=>{s(!0);try{await iR(u),r(new Date),e(dr.getActiveTriggers())}catch(h){console.error("Failed to analyze triggers:",h)}finally{s(!1)}},[]),o=W.useCallback((u,h)=>{dr.updateTrigger(u,h),e(dr.getActiveTriggers())},[]),c=W.useCallback(()=>{dr.getActiveTriggers().forEach(m=>{dr.unregisterTrigger(m.id)}),pS().forEach(m=>{dr.registerTrigger(m)}),e(dr.getActiveTriggers())},[]),d=W.useCallback(u=>dr.getTriggerStats(u),[]);return{triggers:n,isAnalyzing:t,lastAnalysis:i,analyzeTriggers:a,updateTrigger:o,resetToDefaults:c,getTriggerStats:d}},aR=()=>{const[n,e]=W.useState({selectedTrigger:null,isEditing:!1,showStats:!1}),t=W.useCallback(o=>{e(c=>({...c,selectedTrigger:o,isEditing:!1,showStats:!1}))},[]),s=W.useCallback(()=>{e(o=>({...o,isEditing:!0,showStats:!1}))},[]),i=W.useCallback(()=>{e(o=>({...o,isEditing:!1}))},[]),r=W.useCallback(()=>{e(o=>({...o,showStats:!0,isEditing:!1}))},[]),a=W.useCallback(()=>{e(o=>({...o,showStats:!1}))},[]);return{...n,selectTrigger:t,startEditing:s,cancelEditing:i,openStats:r,hideStats:a}},us=We,hs=Ve,Js=bt,ei=wt,Yt=Je,ni=ts,gS=({checked:n=!1,onCheckedChange:e,className:t=""})=>l.jsx("input",{type:"checkbox",role:"switch",className:t,checked:n,onChange:s=>e?.(s.target.checked)}),uf=({value:n=0,className:e="",...t})=>{const s=Math.max(0,Math.min(100,n));return l.jsx("div",{className:`w-full h-2 bg-gray-200 rounded ${e}`,...t,children:l.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${s}%`}})})},oR=({className:n=""})=>{const{triggers:e,isAnalyzing:t,lastAnalysis:s,updateTrigger:i,resetToDefaults:r,getTriggerStats:a}=rR(),{selectedTrigger:o,isEditing:c,showStats:d,selectTrigger:u,startEditing:h,cancelEditing:m,openStats:f}=aR(),y=j=>{switch(j){case"pain_reminder":return l.jsx(wa,{className:"w-4 h-4"});case"medication_alert":return l.jsx(Ur,{className:"w-4 h-4"});case"goal_achievement":return l.jsx(_s,{className:"w-4 h-4"});case"progress_checkin":return l.jsx(Fn,{className:"w-4 h-4"});default:return l.jsx($s,{className:"w-4 h-4"})}},x=j=>{switch(j){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},v=j=>j<60?`${j}m`:j<1440?`${Math.floor(j/60)}h`:`${Math.floor(j/1440)}d`,w=j=>{if(!j)return"Never";const C=new Date(j),L=(new Date().getTime()-C.getTime())/(1e3*60*60);return L<1?"Recently":L<24?`${Math.floor(L)}h ago`:`${Math.floor(L/24)}d ago`};return l.jsxs("div",{className:`space-y-6 ${n}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($s,{className:"w-6 h-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Intelligent Triggers"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Smart notifications based on your pain patterns and goals"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[s&&l.jsxs("span",{className:"text-sm text-gray-500",children:["Last analyzed: ",s.toLocaleTimeString()]}),l.jsxs(Yt,{variant:"outline",size:"sm",onClick:r,className:"flex items-center gap-2",children:[l.jsx(fh,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]}),t&&l.jsx(us,{className:"border-blue-200 bg-blue-50",children:l.jsx(hs,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(fh,{className:"w-5 h-5 animate-spin text-blue-600"}),l.jsx("span",{className:"text-blue-800",children:"Analyzing your data for smart notifications..."})]})})}),l.jsx("div",{className:"grid gap-4",children:e.map(j=>{const C=a(j.id),N=o?.id===j.id;return l.jsxs(us,{className:`cursor-pointer transition-all ${N?"ring-2 ring-blue-500":"hover:shadow-md"}`,onClick:()=>u(j),children:[l.jsx(Js,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[y(j.type),l.jsxs("div",{children:[l.jsx(ei,{className:"text-lg",children:j.name}),l.jsx("p",{className:"text-sm text-gray-600",children:j.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ni,{variant:"secondary",className:`${x(j.priority)} text-white`,children:j.priority}),l.jsx(gS,{checked:j.isActive,onCheckedChange:P=>i(j.id,{isActive:P})})]})]})}),l.jsxs(hs,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C?.triggerCount||0}),l.jsx("div",{className:"text-xs text-gray-500",children:"Triggers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:v(j.cooldownPeriod)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Cooldown"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-orange-600",children:j.maxTriggersPerDay}),l.jsx("div",{className:"text-xs text-gray-500",children:"Max/Day"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:w(C?.lastTriggered)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Last Trigger"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Trigger Conditions:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:j.conditions.map((P,L)=>l.jsx(ni,{variant:"outline",className:"text-xs",children:String(P.type).replace("_"," ")},L))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Yt,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),f()},className:"flex items-center gap-2",children:[l.jsx(es,{className:"w-4 h-4"}),"Stats"]}),l.jsxs(Yt,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),h()},className:"flex items-center gap-2",children:[l.jsx(Xl,{className:"w-4 h-4"}),"Configure"]})]})]})]},j.id)})}),o&&l.jsxs(us,{className:"mt-6",children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center gap-2",children:[y(o.type),o.name," Details"]})}),l.jsx(hs,{children:d?l.jsx(cR,{trigger:o,stats:a(o.id)}):c?l.jsx(dR,{trigger:o,onSave:j=>{i(o.id,j),m()},onCancel:m}):l.jsx(lR,{trigger:o})})]}),e.length===0&&l.jsx(us,{className:"text-center py-12",children:l.jsxs(hs,{children:[l.jsx($s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Intelligent Triggers"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Set up smart notifications that respond to your pain patterns and goals."}),l.jsx(Yt,{onClick:r,children:"Create Default Triggers"})]})})]})},lR=({trigger:n})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Description"}),l.jsx("p",{className:"text-gray-600",children:n.description})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Trigger Conditions"}),l.jsx("div",{className:"space-y-2",children:n.conditions.map((e,t)=>l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[l.jsx(hh,{className:"w-4 h-4 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium capitalize",children:e.type.replace("_"," ")}),e.threshold&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Threshold: ",e.threshold]}),e.timeWindow&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Time Window: ",e.timeWindow,"h"]})]})]},t))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Settings"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{children:["Cooldown: ",uR(n.cooldownPeriod)]}),l.jsxs("div",{children:["Max per day: ",n.maxTriggersPerDay]}),l.jsxs("div",{children:["Priority: ",l.jsx(ni,{className:fR(n.priority),children:n.priority})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Status"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[n.isActive?l.jsx(io,{className:"w-4 h-4 text-green-600"}):l.jsx(wa,{className:"w-4 h-4 text-gray-400"}),n.isActive?"Active":"Inactive"]}),l.jsxs("div",{children:["Triggers sent: ",n.triggerCount]})]})]})]})]}),cR=({trigger:n,stats:e})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e?.triggerCount||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Triggers"})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:e?.lastTriggered?hR(e.lastTriggered):"Never"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Last Triggered"})]}),l.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(n.triggerCount/Math.max(1,n.maxTriggersPerDay)*100),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Daily Usage"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Performance"}),l.jsx(uf,{value:n.triggerCount/Math.max(1,n.maxTriggersPerDay*7)*100,className:"mb-2"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[n.triggerCount," triggers sent this week"]})]})]}),dR=({trigger:n,onSave:e,onCancel:t})=>{const[s,i]=Ge.useState({isActive:n.isActive,cooldownPeriod:n.cooldownPeriod,maxTriggersPerDay:n.maxTriggersPerDay,priority:n.priority}),r=()=>{e(s)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Active"}),l.jsx(gS,{checked:s.isActive,onCheckedChange:a=>i(o=>({...o,isActive:a}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),l.jsxs("select",{value:s.priority,onChange:a=>i(o=>({...o,priority:a.target.value})),className:"w-full p-2 border rounded",children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"urgent",children:"Urgent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cooldown (minutes)"}),l.jsx("input",{type:"number",value:s.cooldownPeriod,onChange:a=>i(o=>({...o,cooldownPeriod:parseInt(a.target.value)})),className:"w-full p-2 border rounded",min:"1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max per Day"}),l.jsx("input",{type:"number",value:s.maxTriggersPerDay,onChange:a=>i(o=>({...o,maxTriggersPerDay:parseInt(a.target.value)})),className:"w-full p-2 border rounded",min:"1"})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(Yt,{onClick:r,children:"Save Changes"}),l.jsx(Yt,{variant:"outline",onClick:t,children:"Cancel"})]})]})},uR=n=>n<60?`${n}m`:n<1440?`${Math.floor(n/60)}h`:`${Math.floor(n/1440)}d`,hR=n=>{if(!n)return"Never";const e=new Date(n),i=(new Date().getTime()-e.getTime())/(1e3*60*60);return i<1?"Recently":i<24?`${Math.floor(i)}h ago`:`${Math.floor(i/24)}d ago`},fR=n=>{switch(n){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},mR=[{id:"reduce_pain_30_percent",name:"Reduce Pain by 30%",description:"Lower your average pain level by 30% over the next 30 days",type:"pain_reduction",targets:[{metric:"pain_level",targetValue:30,unit:"%",comparison:"percentage_decrease"}],duration:30,milestones:[{title:"Week 1 Complete",description:"Completed first week of pain tracking",targetValue:7,reward:"Small celebration!"},{title:"15% Reduction",description:"Achieved 15% pain reduction",targetValue:15,reward:"Great progress!"},{title:"Goal Achieved",description:"Successfully reduced pain by 30%",targetValue:30,reward:"Congratulations!"}],category:"pain_management",difficulty:"medium",estimatedSuccess:65},{id:"consistent_tracking",name:"Track Daily for 30 Days",description:"Maintain consistent daily pain tracking for a full month",type:"consistency",targets:[{metric:"entry_count",targetValue:30,unit:"entries",comparison:"greater_than"}],duration:30,milestones:[{title:"Week 1 Streak",description:"7 consecutive days of tracking",targetValue:7,reward:"Building good habits!"},{title:"Halfway Point",description:"15 days completed",targetValue:15,reward:"You're doing great!"},{title:"30-Day Champion",description:"Completed 30 days of consistent tracking",targetValue:30,reward:"Consistency master!"}],category:"lifestyle",difficulty:"easy",estimatedSuccess:80},{id:"medication_adherence",name:"Perfect Medication Schedule",description:"Take all prescribed medications on time for 14 days",type:"medication_adherence",targets:[{metric:"medication_taken",targetValue:100,unit:"%",comparison:"equal_to"}],duration:14,milestones:[{title:"First Week",description:"Completed medication schedule for 7 days",targetValue:7,reward:"Great start!"},{title:"Perfect Record",description:"14 days of perfect medication adherence",targetValue:14,reward:"Health hero!"}],category:"medication",difficulty:"medium",estimatedSuccess:70},{id:"increase_activity",name:"Increase Daily Activity",description:"Gradually increase daily physical activity to 30 minutes",type:"activity_increase",targets:[{metric:"activity_minutes",targetValue:30,unit:"minutes",comparison:"greater_than"}],duration:21,milestones:[{title:"Week 1: 10 minutes",description:"Achieved 10 minutes of daily activity",targetValue:10,reward:"Movement matters!"},{title:"Week 2: 20 minutes",description:"Achieved 20 minutes of daily activity",targetValue:20,reward:"Building momentum!"},{title:"Goal Achieved: 30 minutes",description:"Successfully reached 30 minutes daily",targetValue:30,reward:"Active lifestyle champion!"}],category:"lifestyle",difficulty:"medium",estimatedSuccess:60}],pR={pain_reduction:"Pain Reduction",frequency_reduction:"Reduce Frequency",consistency:"Consistency",medication_adherence:"Medication Adherence",activity_increase:"Increase Activity",sleep_improvement:"Sleep Improvement",mood_tracking:"Mood Tracking",custom:"Custom Goal"},gR={low:"Low",medium:"Medium",high:"High",urgent:"Urgent"};class Xa{static calculateProgressPercentage(e,t){if(e.targets.length===0||t.length===0)return 0;const s=e.targets[0],i=t[t.length-1];switch(s.comparison){case"percentage_decrease":case"percentage_increase":return Math.min(100,Math.max(0,i.value));case"less_than":{const r=this.calculateBaselineValue(t),a=(r-i.value)/r*100;return Math.min(100,Math.max(0,a))}case"greater_than":return Math.min(100,Math.max(0,i.value/s.targetValue*100));case"equal_to":return i.value>=s.targetValue?100:i.value/s.targetValue*100;default:return 0}}static calculateBaselineValue(e){if(e.length===0)return 0;const t=e.slice(0,Math.min(3,e.length));return t.reduce((s,i)=>s+i.value,0)/t.length}static calculateStreak(e){if(e.length===0)return 0;const t=e.sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime());let s=0;const i=new Date;if(!t.find(a=>ch(a.date,i)))return 0;for(let a=t.length-1;a>=0;a--){const o=t[a],c=new Date(i);if(c.setDate(c.getDate()-(t.length-1-a)),ch(o.date,c))s++;else break}return s}static calculateWeeklyProgress(e){const t={};return e.forEach(s=>{const i=new Date(s.date),r=Fo(i),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay()).toISOString().split("T")[0];t[o]||(t[o]={sum:0,count:0}),t[o].sum+=s.value,t[o].count++}),Object.entries(t).sort(([s],[i])=>s.localeCompare(i)).map(([s,i])=>({week:s,average:i.sum/i.count,count:i.count}))}static calculateTrend(e){if(e.length<3)return"stable";const t=e.slice(-7);if(t.length<3)return"stable";const s=t.map(o=>o.value),i=s.slice(1).map((o,c)=>o-s[c]),r=i.reduce((o,c)=>o+c,0)/i.length,a=Math.abs(s[0]*.05);return r>a?"improving":r<-a?"declining":"stable"}static generateProgressInsights(e,t){const s=[],i=this.calculateProgressPercentage(e,t),r=this.calculateTrend(t),a=this.calculateStreak(t);i>=100?s.push("🎉 Congratulations! You've achieved your goal!"):i>=75?s.push("🚀 Excellent progress! You're in the final stretch."):i>=50?s.push("📈 You're halfway there! Keep up the great work."):i>=25&&s.push("🌱 Good start! You're building momentum."),r==="improving"?s.push("📊 Your progress is trending upward - you're on the right track!"):r==="declining"&&s.push("⚠️ Your progress has slowed. Consider reviewing your strategies."),a>=7?s.push(`🔥 ${a}-day streak! You're building excellent habits.`):a>=3&&s.push(`📅 ${a}-day streak! Keep the momentum going.`);const o=this.calculateWeeklyProgress(t);if(o.length>=2){const d=o[o.length-1],u=o[o.length-2];d.count>u.count?s.push("📈 You're tracking more frequently this week!"):d.count<u.count&&s.push("📉 Consider increasing your tracking frequency.")}return Math.floor((Date.now()-new Date(e.startDate).getTime())/(1440*60*1e3))>0&&t.length===0&&s.push("📝 Start tracking your progress to see detailed insights."),s}static calculateMilestoneProgress(e,t){return e.milestones.map(s=>{const i=t.some(r=>r.value>=s.targetValue);return{...s,isCompleted:i,progressPercentage:Math.min(100,(t[t.length-1]?.value||0)/s.targetValue*100)}})}static projectCompletionDate(e,t){if(t.length<2)return null;const s=t.slice(-7);if(s.length<2)return null;const i=s.slice(1).map((h,m)=>h.value-s[m].value),r=i.reduce((h,m)=>h+m,0)/i.length;if(Math.abs(r)<.01)return null;const a=e.targets[0],o=s[s.length-1].value,d=(a.targetValue-o)/r;if(d<=0||d>365)return null;const u=new Date;return u.setDate(u.getDate()+Math.ceil(d)),u}static getGoalHealthScore(e,t){let s=50;const i=this.calculateProgressPercentage(e,t);s+=i*.3;const r=this.calculateStreak(t);s+=Math.min(r*2,20);const a=this.calculateWeeklyProgress(t);if(a.length>=4){const c=a.reduce((d,u)=>d+u.count,0)/a.length;s+=Math.min(c*5,15)}const o=this.calculateTrend(t);return o==="improving"?s+=10:o==="declining"&&(s-=10),Math.max(0,Math.min(100,s))}}const yR=n=>{const e=n.endDate?new Date(n.endDate):null;if(!e)return-1;const t=new Date,s=e.getTime()-t.getTime(),i=Math.ceil(s/(1e3*60*60*24));return Math.max(0,i)},xR=n=>n.endDate?new Date(n.endDate)<new Date&&n.status==="active":!1,vR=n=>{switch(n){case"completed":return"text-green-600 bg-green-100";case"active":return"text-blue-600 bg-blue-100";case"paused":return"text-yellow-600 bg-yellow-100";case"abandoned":return"text-gray-600 bg-gray-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},bR=(n,e)=>e==="%"?`${kk(n,1)}`:e.includes("minute")||e.includes("hour")?`${Vt(n,0)} ${e}`:`${Vt(n,1)} ${e}`,yS={async calculateGoalAnalytics(n,e){const t=Xa.calculateProgressPercentage(n,e),s=Xa.calculateTrend(e),i=Xa.generateProgressInsights(n,e),r=Xa.calculateStreak(e),a=r,o=e.reduce((d,u)=>d+u.value,0),c=e.length?o/e.length:0;return{progressPercentage:t,trend:s,insights:i,bestStreak:r,currentStreak:a,totalEntries:e.length,averageProgress:c}}},wR=({onOpenManager:n,className:e="",compact:t=!1})=>{const[s,i]=W.useState([]),[r,a]=W.useState({}),[o,c]=W.useState(!0);W.useEffect(()=>{d()},[]);const d=async()=>{try{c(!0);const x=await Wr.getAllGoals();i(x);const v=x.filter(P=>P.status==="active"),w=x.filter(P=>P.status==="completed");let j=0,C=0;for(const P of x){const L=await Wr.getGoalProgress(P.id),M=await yS.calculateGoalAnalytics(P,L);M.progressPercentage!==void 0&&(j+=M.progressPercentage),C+=L.length}const N=x.length>0?j/x.length:0;a({totalGoals:x.length,activeGoals:v.length,completedGoals:w.length,avgProgress:Math.round(N),totalEntries:C})}catch(x){console.error("Failed to load goals data:",x)}finally{c(!1)}},u=x=>{switch(x){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"abandoned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=x=>{switch(x){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-gray-200 bg-gray-50"}},m=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t?l.jsxs(us,{className:e,children:[l.jsx(Js,{className:"pb-3",children:l.jsxs(ei,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_s,{className:"w-5 h-5 text-blue-600"}),"Goals"]}),l.jsx(Yt,{variant:"ghost",size:"sm",onClick:n,children:l.jsx(op,{className:"w-4 h-4"})})]})}),l.jsx(hs,{children:o?l.jsxs("div",{className:"animate-pulse space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-2 bg-gray-200 rounded"})]}):r.totalGoals===0?l.jsxs("div",{className:"text-center py-6",children:[l.jsx(_s,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"No goals yet"}),l.jsxs(Yt,{onClick:n,size:"sm",children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:r.activeGoals}),l.jsx("div",{className:"text-xs text-gray-600",children:"Active"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:r.completedGoals}),l.jsx("div",{className:"text-xs text-gray-600",children:"Done"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-purple-600",children:r.totalEntries}),l.jsx("div",{className:"text-xs text-gray-600",children:"Entries"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Overall Progress"}),l.jsxs("span",{children:[r.avgProgress,"%"]})]}),l.jsx(uf,{value:r.avgProgress,className:"h-2"})]}),l.jsx(Yt,{onClick:n,variant:"outline",className:"w-full",size:"sm",children:"Manage Goals"})]})})]}):l.jsxs(us,{className:e,children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_s,{className:"w-6 h-6 text-blue-600"}),"Goal Dashboard"]}),l.jsxs(Yt,{variant:"outline",size:"sm",onClick:n,children:[l.jsx(op,{className:"w-4 h-4 mr-2"}),"View All"]})]})}),l.jsx(hs,{children:o?l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"h-16 bg-gray-200 rounded"}),l.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]}):r.totalGoals===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(_s,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Your Journey"}),l.jsx("p",{className:"text-gray-600 mb-6 max-w-sm mx-auto",children:"Set meaningful goals to track your progress and celebrate your achievements."}),l.jsxs(Yt,{onClick:n,children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Create Your First Goal"]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.totalGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Goals"})]}),l.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.activeGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),l.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.completedGoals}),l.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),l.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[r.avgProgress,"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Avg Progress"})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[l.jsx(Ur,{className:"w-4 h-4"}),"Recent Goals"]}),l.jsx("div",{className:"space-y-3",children:s.filter(x=>x.status==="active").sort((x,v)=>new Date(v.updatedAt).getTime()-new Date(x.updatedAt).getTime()).slice(0,3).map(x=>l.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer hover:shadow-md transition-shadow ${h(x.priority)}`,onClick:n,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-medium text-sm",children:x.title}),l.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:x.description})]}),l.jsx(ni,{className:`text-xs ${u(x.status)}`,children:x.status})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[l.jsxs("span",{children:["Started ",m(x.startDate)]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Fn,{className:"w-3 h-3"}),l.jsx("span",{children:"Track Progress"})]})]})]},x.id))})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(Yt,{onClick:n,className:"flex-1",children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"New Goal"]}),l.jsxs(Yt,{variant:"outline",onClick:n,className:"flex-1",children:[l.jsx(zo,{className:"w-4 h-4 mr-2"}),"View Achievements"]})]})]})})]})},SR=({entries:n,allEntries:e})=>l.jsx(XE,{entries:n,allEntries:e}),NR=({onAddEntry:n})=>l.jsx(Xo,{title:"Record Your Pain",description:"Track your current pain level and symptoms",importance:"high",canCollapse:!1,children:l.jsx(A8,{onSubmit:n})}),kR=({entries:n})=>l.jsx(Xo,{title:"Pain Visualization",description:"Charts and graphs of your pain patterns",importance:"normal",canCollapse:!0,children:l.jsx(T8,{entries:n})}),jR=({entries:n})=>l.jsx(Xo,{title:"Recent History",description:`Your ${n.length} recorded pain ${n.length===1?"entry":"entries"}`,importance:"normal",canCollapse:!0,children:l.jsx(Hw,{entries:n.slice(-5)})}),_R=({entries:n})=>l.jsx(Xo,{title:"Empathy Analytics",description:"Quantified empathy metrics and insights for your healing journey",importance:"normal",canCollapse:!0,children:l.jsx(Z8,{userId:"current-user",painEntries:n,onInsightSelect:e=>{},onRecommendationAccept:e=>{},onShareMetrics:e=>{},showAdvancedMetrics:!0})}),CR=({entries:n})=>l.jsx(Xo,{title:"Workers' Compensation Report",description:"Generate reports for your workers' compensation claim",importance:"normal",canCollapse:!0,children:l.jsx(tR,{entries:n})}),AR=({entries:n})=>{const e=n.length,t=e>0?Vt(n.reduce((i,r)=>i+r.baselineData.pain,0)/e,1):"0",s=e>0?new Date(n[n.length-1]?.timestamp||"").toLocaleDateString():"—";return l.jsxs("div",{className:"flex h-full flex-col gap-5 rounded-2xl bg-background/70 p-6 text-sm shadow-inner shadow-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-muted-foreground/80",children:[l.jsx("span",{children:"Current overview"}),l.jsx(ts,{variant:"secondary",className:"rounded-full bg-primary/10 text-primary",children:"Live"})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Entries recorded"}),l.jsx("p",{className:"text-2xl font-semibold text-foreground",children:e})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Average pain"}),l.jsx("p",{className:"text-2xl font-semibold text-foreground",children:t})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Last entry"}),l.jsx("p",{className:"text-base font-medium text-foreground/80",children:s})]})]})]})},PR=({onStartWalkthrough:n})=>l.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl bg-background/70 p-6 shadow-inner shadow-black/5",children:[l.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground/80",children:"Quick actions"}),l.jsx(Je,{variant:"outline",className:"justify-start",onClick:n,leftIcon:l.jsx(Md,{className:"h-4 w-4"}),children:"Help & Tutorial"})]}),LR=()=>l.jsx(Xo,{title:"Intelligent Triggers",description:"Smart notifications based on your pain patterns and goals",importance:"normal",canCollapse:!0,children:l.jsx(oR,{})}),MR=({onOpenGoalManager:n})=>l.jsx(Xo,{title:"Goal Tracking",description:"Set and track your health and wellness goals",importance:"normal",canCollapse:!0,children:l.jsx(wR,{onOpenManager:n??(()=>{})})}),TR={"dashboard-overview":SR,"pain-entry":NR,"pain-visualization":kR,"recent-history":jR,"empathy-analytics":_R,"wcb-report":CR,"current-stats":AR,"quick-actions":PR,"intelligent-triggers":LR,"goal-tracking":MR},DR={small:"col-span-1",medium:"col-span-1 md:col-span-2",large:"col-span-1 md:col-span-2",full:"col-span-1 md:col-span-2"};function ER({widget:n,entries:e,allEntries:t,onAddEntry:s,onStartWalkthrough:i,onOpenGoalManager:r,onDragStart:a,onDragEnd:o,onDrop:c,isDragging:d,layout:u}){const h=TR[n.type],m=h?h({entries:e,allEntries:t,onAddEntry:s,onStartWalkthrough:i,onOpenGoalManager:r}):l.jsx(We,{children:l.jsxs(Ve,{className:"p-6 text-center text-muted-foreground",children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Unknown widget"}),l.jsxs("p",{className:"mb-3",children:["This widget type ",l.jsx("span",{className:"font-mono",children:n.type})," is not available in your current build."]}),l.jsx("p",{className:"text-sm mb-4",children:"See the feature matrix for planned widgets and timelines."}),l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("a",{href:"/docs/FEATURE_MATRIX.md",className:"text-sm text-primary hover:underline",children:"View feature matrix"}),l.jsx("a",{href:`mailto:hello@crisiscore.systems?subject=Feature%20request%3A%20${encodeURIComponent(n.type)}`,className:"text-sm inline-flex items-center px-3 py-1.5 border border-border rounded-md hover:bg-primary/5",children:"Request this feature"})]})]})});return l.jsx("div",{className:Ye("group/widget relative flex h-full min-w-0 cursor-move transition-transform duration-200",u==="grid"&&DR[n.size],u==="masonry"&&"break-inside-avoid",d&&"opacity-60 blur-[1px]"),draggable:!0,onDragStart:f=>a(f,n.id),onDragEnd:f=>o(f),onDragOver:f=>f.preventDefault(),onDrop:f=>c(f,n.id),children:l.jsxs("div",{className:Ye("relative flex h-full w-full flex-col overflow-hidden rounded-3xl border border-border/50 bg-gradient-to-br from-card via-card/95 to-card shadow-sm shadow-primary/5 ring-1 ring-border/30","transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/15 focus-within:-translate-y-0.5 focus-within:shadow-lg focus-within:shadow-primary/20","[@media(prefers-reduced-motion:reduce)]:transform-none [@media(prefers-reduced-motion:reduce)]:transition-none","[&_section.trauma-informed-section]:mb-0","[&_section.trauma-informed-section]:px-6","[&_section.trauma-informed-section]:py-6","[&_section.trauma-informed-section>div]:mb-4","[&_section.trauma-informed-section>div>h2]:text-lg","[&_section.trauma-informed-section>div>p]:text-sm","[&_section.trauma-informed-section>div>p]:text-muted-foreground"),children:[l.jsx("div",{className:"absolute right-4 top-4 z-10 hidden rounded-full border border-border/60 bg-background/80 p-1 text-muted-foreground shadow-sm transition-opacity duration-200 group-hover/widget:flex",children:l.jsx(Fj,{className:"h-4 w-4","aria-hidden":"true"})}),l.jsx("div",{className:"flex h-full flex-col",children:m})]})})}function IR(n){if(n.layout==="list")return"flex flex-col gap-6";const e=n.columns===1?1:2,t="grid gap-6 auto-rows-[minmax(120px,_auto)]";return n.layout==="masonry",Ye(t,e===1?"grid-cols-1":"grid-cols-1 md:grid-cols-2")}function RR({layout:n,widgets:e,filteredEntries:t,allEntries:s,activeSection:i,sections:r,onAddEntry:a,onStartWalkthrough:o,onOpenGoalManager:c,onShowFilters:d,onShowWidgetManager:u,draggedWidget:h,onDragStart:m,onDragEnd:f,onDrop:y}){const v=r.find(C=>C.id===i)?.label??"current",w=IR(n),j=e.length===0;return l.jsx("section",{"aria-live":"polite",className:"space-y-4",children:j?l.jsx(We,{className:"border-dashed border-border/60 bg-background/40",children:l.jsxs(Ve,{className:"flex flex-col gap-3 py-12 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"This space is clear and ready."}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Add widgets that fit your ",v.toLowerCase()," view, or adjust filters to see more data."]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[l.jsx(Je,{variant:"outline",onClick:u,children:"Manage widgets"}),l.jsx(Je,{variant:"ghost",onClick:d,children:"Open filters"})]})]})}):l.jsx("div",{className:Ye("w-full",w),children:e.map(C=>l.jsx("div",{className:Ye("min-w-0",n.layout==="masonry"&&"break-inside-avoid"),children:l.jsx(ER,{widget:C,entries:t,allEntries:s,onAddEntry:a,onStartWalkthrough:o,onOpenGoalManager:c,onDragStart:(N,P)=>{N.dataTransfer?.setData("text/plain",P),m(P)},onDragEnd:N=>{N.preventDefault(),f()},onDrop:(N,P)=>{N.preventDefault(),y(P)},isDragging:h===C.id,layout:n.layout})},C.id))})})}const E1={dateRange:{start:"",end:""},painLevelRange:{min:1,max:10},locations:[],symptoms:[],medications:[],treatments:[],sleepQualityRange:{min:1,max:10},moodImpactRange:{min:1,max:10},workImpact:{hasMissedWork:!1,hasModifiedDuties:!1},searchText:""};function OR({entries:n,onFiltersChange:e,savedFilters:t,onSaveFilter:s,onLoadFilter:i,onDeleteFilter:r,onCriteriaChange:a,onActiveFiltersChange:o}){const[c,d]=W.useState(E1),[u,h]=W.useState(!1),[m,f]=W.useState(""),[y,x]=W.useState(!1);W.useEffect(()=>{try{const z=new URLSearchParams(window.location.search).get("filters");if(z){const _=JSON.parse(decodeURIComponent(z));d(_)}}catch(k){console.warn("Failed to load filters from URL:",k)}},[]),W.useEffect(()=>{try{const k=new URL(window.location.href);c.searchText||c.dateRange.start||c.dateRange.end||c.painLevelRange.min!==1||c.painLevelRange.max!==10||c.locations.length>0||c.symptoms.length>0||c.medications.length>0||c.treatments.length>0||c.sleepQualityRange.min!==1||c.sleepQualityRange.max!==10||c.moodImpactRange.min!==1||c.moodImpactRange.max!==10||c.workImpact.hasMissedWork||c.workImpact.hasModifiedDuties?k.searchParams.set("filters",encodeURIComponent(JSON.stringify(c))):k.searchParams.delete("filters"),window.history.replaceState({},"",k.toString())}catch(k){console.warn("Failed to update URL with filters:",k)}},[c]);const v=W.useMemo(()=>{const k=new Set,z=new Set,_=new Set,E=new Set,$=new Set;return n.forEach(I=>{I.baselineData.locations&&I.baselineData.locations.forEach(J=>{k.add(J),J.toLowerCase().split(" ").forEach(se=>$.add(se))}),I.baselineData.symptoms&&I.baselineData.symptoms.forEach(J=>{z.add(J),J.toLowerCase().split(" ").forEach(se=>$.add(se))}),I.medications?.current&&I.medications.current.forEach(J=>{_.add(J.name),J.name.toLowerCase().split(" ").forEach(se=>$.add(se))}),I.treatments?.recent&&I.treatments.recent.forEach(J=>{E.add(J.type),J.type.toLowerCase().split(" ").forEach(se=>$.add(se))}),I.notes&&I.notes.toLowerCase().split(/\s+/).forEach(J=>{J.length>2&&$.add(J)})}),{locations:Array.from(k).sort(),symptoms:Array.from(z).sort(),medications:Array.from(_).sort(),treatments:Array.from(E).sort(),searchTerms:Array.from($).sort().slice(0,20)}},[n]),w=W.useMemo(()=>n.filter(k=>{if(c.dateRange.start&&new Date(k.timestamp)<new Date(c.dateRange.start)||c.dateRange.end&&new Date(k.timestamp)>new Date(c.dateRange.end)||k.baselineData.pain<c.painLevelRange.min||k.baselineData.pain>c.painLevelRange.max||c.locations.length>0&&!c.locations.some(z=>k.baselineData.locations?.includes(z))||c.symptoms.length>0&&!c.symptoms.some(z=>k.baselineData.symptoms?.includes(z))||c.medications.length>0&&!c.medications.some(z=>k.medications?.current?.some(_=>_.name===z))||c.treatments.length>0&&!c.treatments.some(z=>k.treatments?.recent?.some(_=>_.type===z))||k.qualityOfLife?.sleepQuality!==void 0&&(k.qualityOfLife.sleepQuality<c.sleepQualityRange.min||k.qualityOfLife.sleepQuality>c.sleepQualityRange.max)||k.qualityOfLife?.moodImpact!==void 0&&(k.qualityOfLife.moodImpact<c.moodImpactRange.min||k.qualityOfLife.moodImpact>c.moodImpactRange.max)||c.workImpact.hasMissedWork&&(k.workImpact?.missedWork??0)===0||c.workImpact.hasModifiedDuties&&(k.workImpact?.modifiedDuties?.length??0)===0)return!1;if(c.searchText){const z=c.searchText.toLowerCase();if(![k.notes,...k.baselineData.symptoms||[],...k.baselineData.locations||[],...k.medications?.current?.map($=>$.name)||[],...k.medications?.current?.map($=>$.dosage)||[],...k.medications?.current?.map($=>$.effectiveness)||[],k.medications?.changes,...k.treatments?.recent?.map($=>$.type)||[],...k.treatments?.recent?.map($=>$.provider)||[],...k.treatments?.recent?.map($=>$.effectiveness)||[],k.treatments?.effectiveness,k.treatments?.planned?.join(" "),...k.functionalImpact?.limitedActivities||[],...k.functionalImpact?.assistanceNeeded||[],...k.functionalImpact?.mobilityAids||[],...k.workImpact?.modifiedDuties||[],...k.workImpact?.workLimitations||[],k.comparison?.worseningSince,...k.comparison?.newLimitations||[],k.qualityOfLife?.socialImpact?.join(" ")].some($=>$&&$.toString().toLowerCase().includes(z)))return!1}return!0}),[n,c]);Ge.useEffect(()=>{e(w)},[w,e]),W.useEffect(()=>{a&&a(c)},[c,a]),W.useEffect(()=>{o&&o(N)},[N,o]);const j=(k,z)=>{d(_=>({..._,[k]:z}))},C=(k,z,_)=>{d(E=>({...E,[k]:{...E[k],[z]:_}}))},N=W.useMemo(()=>{let k=0;return(c.dateRange.start||c.dateRange.end)&&k++,(c.painLevelRange.min!==1||c.painLevelRange.max!==10)&&k++,c.locations.length>0&&k++,c.symptoms.length>0&&k++,c.medications.length>0&&k++,c.treatments.length>0&&k++,(c.sleepQualityRange.min!==1||c.sleepQualityRange.max!==10)&&k++,(c.moodImpactRange.min!==1||c.moodImpactRange.max!==10)&&k++,(c.workImpact.hasMissedWork||c.workImpact.hasModifiedDuties)&&k++,c.searchText&&k++,k},[c]),P=()=>{d(E1)},L=()=>{m.trim()&&(s(m.trim(),c),f(""),x(!1))},M=W.useCallback(()=>{try{const k=new URL(window.location.href);k.searchParams.set("filters",encodeURIComponent(JSON.stringify(c))),navigator.clipboard.writeText(k.toString()),console.log("Filter URL copied to clipboard:",k.toString())}catch(k){console.error("Failed to copy filter URL:",k)}},[c]),T=W.useMemo(()=>c.searchText||c.dateRange.start||c.dateRange.end||c.painLevelRange.min!==1||c.painLevelRange.max!==10||c.locations.length>0||c.symptoms.length>0||c.medications.length>0||c.treatments.length>0||c.sleepQualityRange.min!==1||c.sleepQualityRange.max!==10||c.moodImpactRange.min!==1||c.moodImpactRange.max!==10||c.workImpact.hasMissedWork||c.workImpact.hasModifiedDuties,[c]);return l.jsxs(We,{className:"mb-6",children:[l.jsx(bt,{children:l.jsxs(wt,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(o2,{className:"h-5 w-5"}),l.jsx("span",{children:"Advanced Filters & Search"}),N>0&&l.jsxs(ts,{variant:"secondary",className:"ml-2 border-transparent",style:{backgroundColor:"hsl(var(--color-badge-bg))",color:"hsl(var(--color-badge-foreground))"},children:[N," active"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>h(!u),children:[u?"Hide":"Show"," Advanced"]}),l.jsxs(Je,{variant:"outline",size:"sm",onClick:P,disabled:N===0,children:[l.jsx(ti,{className:"h-4 w-4 mr-1"}),"Clear"]}),T&&l.jsxs(Je,{variant:"outline",size:"sm",onClick:M,title:"Copy shareable link with current filters",children:[l.jsx(mh,{className:"h-4 w-4 mr-1"}),"Share"]})]})]})}),l.jsxs(Ve,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Search"}),l.jsxs("div",{className:"relative",children:[l.jsx(u2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Hi,{placeholder:"Search across all fields (notes, symptoms, medications, treatments...)",value:c.searchText,onChange:k=>j("searchText",k.target.value),className:"pl-9 pr-9"}),c.searchText&&l.jsx("button",{onClick:()=>j("searchText",""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground hover:text-foreground",children:l.jsx(ti,{className:"h-4 w-4"})})]}),c.searchText&&l.jsx("div",{className:"text-xs text-muted-foreground",children:"Searching across: notes, symptoms, locations, medications, treatments, functional impact, work impact, and more"}),!c.searchText&&v.searchTerms.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Popular search terms:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:v.searchTerms.slice(0,8).map(k=>l.jsx("button",{onClick:()=>j("searchText",k),className:"text-xs px-2 py-1 bg-muted rounded-md hover:bg-muted/80 transition-colors",children:k},k))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Hi,{type:"date",value:c.dateRange.start,onChange:k=>C("dateRange","start",k.target.value),placeholder:"Start date"}),l.jsx(Hi,{type:"date",value:c.dateRange.end,onChange:k=>C("dateRange","end",k.target.value),placeholder:"End date"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Pain Level (",c.painLevelRange.min,"-",c.painLevelRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.painLevelRange.min,onChange:k=>C("painLevelRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.painLevelRange.max,onChange:k=>C("painLevelRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Results"}),l.jsx("div",{className:"text-2xl font-bold text-primary",children:w.length}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",n.length," entries"]})]})]}),u&&l.jsxs("div",{className:"border-t pt-4 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Locations"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:v.locations.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`location-${k}`,checked:c.locations.includes(k),onChange:z=>{z.target.checked?j("locations",[...c.locations,k]):j("locations",c.locations.filter(_=>_!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`location-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Symptoms"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:v.symptoms.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`symptom-${k}`,checked:c.symptoms.includes(k),onChange:z=>{z.target.checked?j("symptoms",[...c.symptoms,k]):j("symptoms",c.symptoms.filter(_=>_!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`symptom-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Medications"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:v.medications.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`medication-${k}`,checked:c.medications.includes(k),onChange:z=>{z.target.checked?j("medications",[...c.medications,k]):j("medications",c.medications.filter(_=>_!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`medication-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Treatments"}),l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:v.treatments.map(k=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:`treatment-${k}`,checked:c.treatments.includes(k),onChange:z=>{z.target.checked?j("treatments",[...c.treatments,k]):j("treatments",c.treatments.filter(_=>_!==k))},className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:`treatment-${k}`,className:"text-sm",children:k})]},k))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Sleep Quality (",c.sleepQualityRange.min,"-",c.sleepQualityRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.sleepQualityRange.min,onChange:k=>C("sleepQualityRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.sleepQualityRange.max,onChange:k=>C("sleepQualityRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium",children:["Mood Impact (",c.moodImpactRange.min,"-",c.moodImpactRange.max,")"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.moodImpactRange.min,onChange:k=>C("moodImpactRange","min",parseInt(k.target.value)||1),className:"w-20"}),l.jsx(Hi,{type:"number",min:"1",max:"10",value:c.moodImpactRange.max,onChange:k=>C("moodImpactRange","max",parseInt(k.target.value)||10),className:"w-20"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Work Impact"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"has-missed-work",checked:c.workImpact.hasMissedWork,onChange:k=>C("workImpact","hasMissedWork",k.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:"has-missed-work",className:"text-sm",children:"Has missed work"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"has-modified-duties",checked:c.workImpact.hasModifiedDuties,onChange:k=>C("workImpact","hasModifiedDuties",k.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),l.jsx("label",{htmlFor:"has-modified-duties",className:"text-sm",children:"Has modified duties"})]})]})]})]}),t.length>0&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Saved Filters"}),l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>x(!0),children:[l.jsx(mh,{className:"h-4 w-4 mr-1"}),"Save Current"]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(k=>l.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>i(k),className:"flex items-center space-x-1",children:[l.jsx(Xk,{className:"h-3 w-3"}),l.jsx("span",{children:k.name}),l.jsx(Je,{variant:"ghost",size:"sm",onClick:z=>{z.stopPropagation(),r(k.id)},className:"h-4 w-4 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",children:l.jsx(ti,{className:"h-3 w-3"})})]},k.id))})]}),y&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 transition-opacity bg-background/80 backdrop-blur-sm",onClick:()=>x(!1)}),l.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-card shadow-xl rounded-lg border",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Save Filter Preset"}),l.jsx(Hi,{placeholder:"Filter name",value:m,onChange:k=>f(k.target.value),onKeyPress:k=>k.key==="Enter"&&L(),autoFocus:!0}),l.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[l.jsx(Je,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),l.jsx(Je,{onClick:L,disabled:!m.trim(),children:"Save"})]})]})]})})]})]})}function FR({isOpen:n,onClose:e,entries:t,savedFilters:s,onFiltersChange:i,onSaveFilter:r,onLoadFilter:a,onDeleteFilter:o,onCriteriaChange:c,onActiveFiltersChange:d}){return l.jsx(Kh,{isOpen:n,onClose:e,size:"xl","aria-label":"Advanced dashboard filters",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Advanced Filters"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Focus on the entries that matter today. Filters stay saved for future visits."})]}),l.jsx(Je,{variant:"ghost",size:"sm",onClick:e,children:l.jsx(ti,{className:"h-4 w-4"})})]}),l.jsx(OR,{entries:t,onFiltersChange:i,savedFilters:s,onSaveFilter:r,onLoadFilter:a,onDeleteFilter:o,onCriteriaChange:c,onActiveFiltersChange:d})]})})}const zR={overview:["dashboard-overview","pain-entry","goal-tracking","current-stats","recent-history","quick-actions"],insights:["pain-visualization","empathy-analytics","intelligent-triggers"],reports:["wcb-report"]},I1=[{id:"overview",label:"Overview",description:"Daily essentials and quick capture",icon:hg},{id:"insights",label:"Insights",description:"Visual trends and smart guidance",icon:lg},{id:"reports",label:"Reports & Admin",description:"Exports and claim-ready documents",icon:yj}];function BR(n,e){if(!n||e===0)return null;const t=[()=>n.searchText?`Search: "${n.searchText}"`:null,()=>n.painLevelRange.min!==1||n.painLevelRange.max!==10?`Pain ${n.painLevelRange.min}-${n.painLevelRange.max}`:null,()=>n.locations.length>0?`${n.locations.length} location${n.locations.length===1?"":"s"}`:null,()=>n.symptoms.length>0?`${n.symptoms.length} symptom${n.symptoms.length===1?"":"s"}`:null,()=>n.workImpact.hasMissedWork||n.workImpact.hasModifiedDuties?"Work impact":null,()=>n.medications.length>0?`${n.medications.length} medication${n.medications.length===1?"":"s"}`:null,()=>n.treatments.length>0?`${n.treatments.length} treatment${n.treatments.length===1?"":"s"}`:null,()=>n.sleepQualityRange.min!==1||n.sleepQualityRange.max!==10?`Sleep ${n.sleepQualityRange.min}-${n.sleepQualityRange.max}`:null,()=>n.moodImpactRange.min!==1||n.moodImpactRange.max!==10?`Mood ${n.moodImpactRange.min}-${n.moodImpactRange.max}`:null],s=[];for(const r of t){const a=r();a&&s.push(a)}return s.slice(0,3).join(" • ")||`${e} filters active`}function $R({entries:n,onAddEntry:e,onStartWalkthrough:t,onOpenGoalManager:s,className:i}){const{layout:r,isLoaded:a,toggleWidget:o,resetLayout:c,updateLayoutSettings:d}=fE(),[u,h]=W.useState(!1),[m,f]=W.useState(null),[y,x]=W.useState(n),[v,w]=W.useState("overview"),[j,C]=W.useState(!1),[N,P]=W.useState(0),[L,M]=W.useState(null),[T,k]=W.useState(null),{savedFilters:z,saveFilter:_,deleteFilter:E}=dE();W.useEffect(()=>{x(n)},[n]),W.useEffect(()=>{k(BR(L,N))},[L,N]);const $=r.widgets.filter(ne=>ne.visible).sort((ne,ae)=>ne.position-ae.position),I=zR[v]??[],J=I.length>0?$.filter(ne=>I.includes(ne.type)):$,se=ne=>{f(ne)},oe=()=>{f(null)},F=ne=>{if(!m||m===ne)return;const ae=r.widgets.findIndex(xe=>xe.id===m),ce=r.widgets.findIndex(xe=>xe.id===ne);if(ae!==-1&&ce!==-1){const xe=Array.from(r.widgets),[me]=xe.splice(ae,1);xe.splice(ce,0,me);const Ne=xe.map((Me,Ie)=>({...Me,position:Ie}));d({widgets:Ne})}},he=W.useCallback(ne=>{x(ne)},[]),ke=W.useCallback(ne=>{M(ne)},[]),ue=W.useCallback(ne=>{P(ne)},[]),D=W.useCallback((ne,ae)=>{_(ne,ae)},[_]),V=W.useCallback(ne=>{},[]),Z=W.useCallback(ne=>{E(ne)},[E]);return a?l.jsxs("div",{className:Ye("space-y-6",i),children:[l.jsx(mE,{totalEntries:n.length,visibleEntries:y.length,activeFilterCount:N,filterSummary:T,onOpenFilters:()=>C(!0),onOpenCustomize:()=>h(!0)}),l.jsx(pE,{sections:I1,activeSection:v,onSectionChange:w}),l.jsx(RR,{layout:r,widgets:J,filteredEntries:y,allEntries:n,activeSection:v,sections:I1,onAddEntry:e,onStartWalkthrough:t,onOpenGoalManager:s,onShowFilters:()=>C(!0),onShowWidgetManager:()=>h(!0),draggedWidget:m,onDragStart:se,onDragEnd:oe,onDrop:F}),l.jsx(FR,{isOpen:j,onClose:()=>C(!1),entries:n,savedFilters:z,onFiltersChange:he,onSaveFilter:D,onLoadFilter:V,onDeleteFilter:Z,onCriteriaChange:ke,onActiveFiltersChange:ue}),l.jsx(hE,{isOpen:u,onClose:()=>h(!1),layout:r,onToggleWidget:o,onResetLayout:c,onUpdateLayoutSettings:d})]}):l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}var Od=n=>n.type==="checkbox",To=n=>n instanceof Date,Xs=n=>n==null;const xS=n=>typeof n=="object";var ns=n=>!Xs(n)&&!Array.isArray(n)&&xS(n)&&!To(n),WR=n=>ns(n)&&n.target?Od(n.target)?n.target.checked:n.target.value:n,UR=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,qR=(n,e)=>n.has(UR(e)),VR=n=>{const e=n.constructor&&n.constructor.prototype;return ns(e)&&e.hasOwnProperty("isPrototypeOf")},Bg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ys(n){let e;const t=Array.isArray(n),s=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(Bg&&(n instanceof Blob||s))&&(t||ns(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!VR(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=ys(n[i]));else return n;return e}var hf=n=>/^\w*$/.test(n),Jn=n=>n===void 0,$g=n=>Array.isArray(n)?n.filter(Boolean):[],Wg=n=>$g(n.replace(/["|']|\]/g,"").split(/\.|\[/)),rt=(n,e,t)=>{if(!e||!ns(n))return t;const s=(hf(e)?[e]:Wg(e)).reduce((i,r)=>Xs(i)?i:i[r],n);return Jn(s)||s===n?Jn(n[e])?t:n[e]:s},Or=n=>typeof n=="boolean",ln=(n,e,t)=>{let s=-1;const i=hf(e)?[e]:Wg(e),r=i.length,a=r-1;for(;++s<r;){const o=i[s];let c=t;if(s!==a){const d=n[o];c=ns(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;n[o]=c,n=n[o]}};const R1={BLUR:"blur",FOCUS_OUT:"focusout"},hr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},la={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HR=Ge.createContext(null);HR.displayName="HookFormContext";var GR=(n,e,t,s=!0)=>{const i={defaultValues:e._defaultValues};for(const r in n)Object.defineProperty(i,r,{get:()=>{const a=r;return e._proxyFormState[a]!==hr.all&&(e._proxyFormState[a]=!s||hr.all),n[a]}});return i};const YR=typeof window<"u"?Ge.useLayoutEffect:Ge.useEffect;var Ii=n=>typeof n=="string",ZR=(n,e,t,s,i)=>Ii(n)?(s&&e.watch.add(n),rt(t,n,i)):Array.isArray(n)?n.map(r=>(s&&e.watch.add(r),rt(t,r))):(s&&(e.watchAll=!0),t),Hp=n=>Xs(n)||!xS(n);function qa(n,e,t=new WeakSet){if(Hp(n)||Hp(e))return n===e;if(To(n)&&To(e))return n.getTime()===e.getTime();const s=Object.keys(n),i=Object.keys(e);if(s.length!==i.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const r of s){const a=n[r];if(!i.includes(r))return!1;if(r!=="ref"){const o=e[r];if(To(a)&&To(o)||ns(a)&&ns(o)||Array.isArray(a)&&Array.isArray(o)?!qa(a,o,t):a!==o)return!1}}return!0}var Ug=(n,e,t,s,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[s]:i||!0}}:{},ad=n=>Array.isArray(n)?n:[n],O1=()=>{let n=[];return{get observers(){return n},next:i=>{for(const r of n)r.next&&r.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(r=>r!==i)}}),unsubscribe:()=>{n=[]}}};function vS(n,e){const t={};for(const s in n)if(n.hasOwnProperty(s)){const i=n[s],r=e[s];if(i&&ns(i)&&r){const a=vS(i,r);ns(a)&&(t[s]=a)}else n[s]&&(t[s]=r)}return t}var gi=n=>ns(n)&&!Object.keys(n).length,qg=n=>n.type==="file",fr=n=>typeof n=="function",Th=n=>{if(!Bg)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},bS=n=>n.type==="select-multiple",Vg=n=>n.type==="radio",KR=n=>Vg(n)||Od(n),Xm=n=>Th(n)&&n.isConnected;function XR(n,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)n=Jn(n)?s++:n[e[s++]];return n}function QR(n){for(const e in n)if(n.hasOwnProperty(e)&&!Jn(n[e]))return!1;return!0}function Qn(n,e){const t=Array.isArray(e)?e:hf(e)?[e]:Wg(e),s=t.length===1?n:XR(n,t),i=t.length-1,r=t[i];return s&&delete s[r],i!==0&&(ns(s)&&gi(s)||Array.isArray(s)&&QR(s))&&Qn(n,t.slice(0,-1)),n}var JR=n=>{for(const e in n)if(fr(n[e]))return!0;return!1};function wS(n){return Array.isArray(n)||ns(n)&&!JR(n)}function Gp(n,e={}){for(const t in n)wS(n[t])?(e[t]=Array.isArray(n[t])?[]:{},Gp(n[t],e[t])):Xs(n[t])||(e[t]=!0);return e}function Cl(n,e,t){t||(t=Gp(e));for(const s in n)wS(n[s])?Jn(e)||Hp(t[s])?t[s]=Gp(n[s],Array.isArray(n[s])?[]:{}):Cl(n[s],Xs(e)?{}:e[s],t[s]):t[s]=!qa(n[s],e[s]);return t}const F1={value:!1,isValid:!1},z1={value:!0,isValid:!0};var SS=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Jn(n[0].attributes.value)?Jn(n[0].value)||n[0].value===""?z1:{value:n[0].value,isValid:!0}:z1:F1}return F1},NS=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>Jn(n)?n:e?n===""?NaN:n&&+n:t&&Ii(n)?new Date(n):s?s(n):n;const B1={isValid:!1,value:null};var kS=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,B1):B1;function $1(n){const e=n.ref;return qg(e)?e.files:Vg(e)?kS(n.refs).value:bS(e)?[...e.selectedOptions].map(({value:t})=>t):Od(e)?SS(n.refs).value:NS(Jn(e.value)?n.ref.value:e.value,n)}var eO=(n,e,t,s)=>{const i={};for(const r of n){const a=rt(e,r);a&&ln(i,r,a._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:s}},Dh=n=>n instanceof RegExp,Bc=n=>Jn(n)?n:Dh(n)?n.source:ns(n)?Dh(n.value)?n.value.source:n.value:n,W1=n=>({isOnSubmit:!n||n===hr.onSubmit,isOnBlur:n===hr.onBlur,isOnChange:n===hr.onChange,isOnAll:n===hr.all,isOnTouch:n===hr.onTouched});const U1="AsyncFunction";var tO=n=>!!n&&!!n.validate&&!!(fr(n.validate)&&n.validate.constructor.name===U1||ns(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===U1)),nO=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),q1=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const od=(n,e,t,s)=>{for(const i of t||Object.keys(n)){const r=rt(n,i);if(r){const{_f:a,...o}=r;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!s)return!0;if(a.ref&&e(a.ref,a.name)&&!s)return!0;if(od(o,e))break}else if(ns(o)&&od(o,e))break}}};function V1(n,e,t){const s=rt(n,t);if(s||hf(t))return{error:s,name:t};const i=t.split(".");for(;i.length;){const r=i.join("."),a=rt(e,r),o=rt(n,r);if(a&&!Array.isArray(a)&&t!==r)return{name:t};if(o&&o.type)return{name:r,error:o};if(o&&o.root&&o.root.type)return{name:`${r}.root`,error:o.root};i.pop()}return{name:t}}var sO=(n,e,t,s)=>{t(n);const{name:i,...r}=n;return gi(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(a=>e[a]===(!s||hr.all))},iO=(n,e,t)=>!n||!e||n===e||ad(n).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),rO=(n,e,t,s,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?s.isOnBlur:i.isOnBlur)?!n:(t?s.isOnChange:i.isOnChange)?n:!0,aO=(n,e)=>!$g(rt(n,e)).length&&Qn(n,e),oO=(n,e,t)=>{const s=ad(rt(n,t));return ln(s,"root",e[t]),ln(n,t,s),n};function H1(n,e,t="validate"){if(Ii(n)||Array.isArray(n)&&n.every(Ii)||Or(n)&&!n)return{type:t,message:Ii(n)?n:"",ref:e}}var wl=n=>ns(n)&&!Dh(n)?n:{value:n,message:""},G1=async(n,e,t,s,i,r)=>{const{ref:a,refs:o,required:c,maxLength:d,minLength:u,min:h,max:m,pattern:f,validate:y,name:x,valueAsNumber:v,mount:w}=n._f,j=rt(t,x);if(!w||e.has(x))return{};const C=o?o[0]:a,N=E=>{i&&C.reportValidity&&(C.setCustomValidity(Or(E)?"":E||""),C.reportValidity())},P={},L=Vg(a),M=Od(a),T=L||M,k=(v||qg(a))&&Jn(a.value)&&Jn(j)||Th(a)&&a.value===""||j===""||Array.isArray(j)&&!j.length,z=Ug.bind(null,x,s,P),_=(E,$,I,J=la.maxLength,se=la.minLength)=>{const oe=E?$:I;P[x]={type:E?J:se,message:oe,ref:a,...z(E?J:se,oe)}};if(r?!Array.isArray(j)||!j.length:c&&(!T&&(k||Xs(j))||Or(j)&&!j||M&&!SS(o).isValid||L&&!kS(o).isValid)){const{value:E,message:$}=Ii(c)?{value:!!c,message:c}:wl(c);if(E&&(P[x]={type:la.required,message:$,ref:C,...z(la.required,$)},!s))return N($),P}if(!k&&(!Xs(h)||!Xs(m))){let E,$;const I=wl(m),J=wl(h);if(!Xs(j)&&!isNaN(j)){const se=a.valueAsNumber||j&&+j;Xs(I.value)||(E=se>I.value),Xs(J.value)||($=se<J.value)}else{const se=a.valueAsDate||new Date(j),oe=ke=>new Date(new Date().toDateString()+" "+ke),F=a.type=="time",he=a.type=="week";Ii(I.value)&&j&&(E=F?oe(j)>oe(I.value):he?j>I.value:se>new Date(I.value)),Ii(J.value)&&j&&($=F?oe(j)<oe(J.value):he?j<J.value:se<new Date(J.value))}if((E||$)&&(_(!!E,I.message,J.message,la.max,la.min),!s))return N(P[x].message),P}if((d||u)&&!k&&(Ii(j)||r&&Array.isArray(j))){const E=wl(d),$=wl(u),I=!Xs(E.value)&&j.length>+E.value,J=!Xs($.value)&&j.length<+$.value;if((I||J)&&(_(I,E.message,$.message),!s))return N(P[x].message),P}if(f&&!k&&Ii(j)){const{value:E,message:$}=wl(f);if(Dh(E)&&!j.match(E)&&(P[x]={type:la.pattern,message:$,ref:a,...z(la.pattern,$)},!s))return N($),P}if(y){if(fr(y)){const E=await y(j,t),$=H1(E,C);if($&&(P[x]={...$,...z(la.validate,$.message)},!s))return N($.message),P}else if(ns(y)){let E={};for(const $ in y){if(!gi(E)&&!s)break;const I=H1(await y[$](j,t),C,$);I&&(E={...I,...z($,I.message)},N(I.message),s&&(P[x]=E))}if(!gi(E)&&(P[x]={ref:C,...E},!s))return P}}return N(!0),P};const lO={mode:hr.onSubmit,reValidateMode:hr.onChange,shouldFocusError:!0};function cO(n={}){let e={...lO,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:fr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},i=ns(e.defaultValues)||ns(e.values)?ys(e.defaultValues||e.values)||{}:{},r=e.shouldUnregister?{}:ys(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const m={array:O1(),state:O1()},f=e.criteriaMode===hr.all,y=ee=>ie=>{clearTimeout(d),d=setTimeout(ee,ie)},x=async ee=>{if(!e.disabled&&(u.isValid||h.isValid||ee)){const ie=e.resolver?gi((await M()).errors):await k(s,!0);ie!==t.isValid&&m.state.next({isValid:ie})}},v=(ee,ie)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((ee||Array.from(o.mount)).forEach(ye=>{ye&&(ie?ln(t.validatingFields,ye,ie):Qn(t.validatingFields,ye))}),m.state.next({validatingFields:t.validatingFields,isValidating:!gi(t.validatingFields)}))},w=(ee,ie=[],ye,Ce,Te=!0,je=!0)=>{if(Ce&&ye&&!e.disabled){if(a.action=!0,je&&Array.isArray(rt(s,ee))){const Fe=ye(rt(s,ee),Ce.argA,Ce.argB);Te&&ln(s,ee,Fe)}if(je&&Array.isArray(rt(t.errors,ee))){const Fe=ye(rt(t.errors,ee),Ce.argA,Ce.argB);Te&&ln(t.errors,ee,Fe),aO(t.errors,ee)}if((u.touchedFields||h.touchedFields)&&je&&Array.isArray(rt(t.touchedFields,ee))){const Fe=ye(rt(t.touchedFields,ee),Ce.argA,Ce.argB);Te&&ln(t.touchedFields,ee,Fe)}(u.dirtyFields||h.dirtyFields)&&(t.dirtyFields=Cl(i,r)),m.state.next({name:ee,isDirty:_(ee,ie),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else ln(r,ee,ie)},j=(ee,ie)=>{ln(t.errors,ee,ie),m.state.next({errors:t.errors})},C=ee=>{t.errors=ee,m.state.next({errors:t.errors,isValid:!1})},N=(ee,ie,ye,Ce)=>{const Te=rt(s,ee);if(Te){const je=rt(r,ee,Jn(ye)?rt(i,ee):ye);Jn(je)||Ce&&Ce.defaultChecked||ie?ln(r,ee,ie?je:$1(Te._f)):I(ee,je),a.mount&&x()}},P=(ee,ie,ye,Ce,Te)=>{let je=!1,Fe=!1;const lt={name:ee};if(!e.disabled){if(!ye||Ce){(u.isDirty||h.isDirty)&&(Fe=t.isDirty,t.isDirty=lt.isDirty=_(),je=Fe!==lt.isDirty);const Ze=qa(rt(i,ee),ie);Fe=!!rt(t.dirtyFields,ee),Ze?Qn(t.dirtyFields,ee):ln(t.dirtyFields,ee,!0),lt.dirtyFields=t.dirtyFields,je=je||(u.dirtyFields||h.dirtyFields)&&Fe!==!Ze}if(ye){const Ze=rt(t.touchedFields,ee);Ze||(ln(t.touchedFields,ee,ye),lt.touchedFields=t.touchedFields,je=je||(u.touchedFields||h.touchedFields)&&Ze!==ye)}je&&Te&&m.state.next(lt)}return je?lt:{}},L=(ee,ie,ye,Ce)=>{const Te=rt(t.errors,ee),je=(u.isValid||h.isValid)&&Or(ie)&&t.isValid!==ie;if(e.delayError&&ye?(c=y(()=>j(ee,ye)),c(e.delayError)):(clearTimeout(d),c=null,ye?ln(t.errors,ee,ye):Qn(t.errors,ee)),(ye?!qa(Te,ye):Te)||!gi(Ce)||je){const Fe={...Ce,...je&&Or(ie)?{isValid:ie}:{},errors:t.errors,name:ee};t={...t,...Fe},m.state.next(Fe)}},M=async ee=>{v(ee,!0);const ie=await e.resolver(r,e.context,eO(ee||o.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return v(ee),ie},T=async ee=>{const{errors:ie}=await M(ee);if(ee)for(const ye of ee){const Ce=rt(ie,ye);Ce?ln(t.errors,ye,Ce):Qn(t.errors,ye)}else t.errors=ie;return ie},k=async(ee,ie,ye={valid:!0})=>{for(const Ce in ee){const Te=ee[Ce];if(Te){const{_f:je,...Fe}=Te;if(je){const lt=o.array.has(je.name),Ze=Te._f&&tO(Te._f);Ze&&u.validatingFields&&v([je.name],!0);const Ke=await G1(Te,o.disabled,r,f,e.shouldUseNativeValidation&&!ie,lt);if(Ze&&u.validatingFields&&v([je.name]),Ke[je.name]&&(ye.valid=!1,ie))break;!ie&&(rt(Ke,je.name)?lt?oO(t.errors,Ke,je.name):ln(t.errors,je.name,Ke[je.name]):Qn(t.errors,je.name))}!gi(Fe)&&await k(Fe,ie,ye)}}return ye.valid},z=()=>{for(const ee of o.unMount){const ie=rt(s,ee);ie&&(ie._f.refs?ie._f.refs.every(ye=>!Xm(ye)):!Xm(ie._f.ref))&&ce(ee)}o.unMount=new Set},_=(ee,ie)=>!e.disabled&&(ee&&ie&&ln(r,ee,ie),!qa(ke(),i)),E=(ee,ie,ye)=>ZR(ee,o,{...a.mount?r:Jn(ie)?i:Ii(ee)?{[ee]:ie}:ie},ye,ie),$=ee=>$g(rt(a.mount?r:i,ee,e.shouldUnregister?rt(i,ee,[]):[])),I=(ee,ie,ye={})=>{const Ce=rt(s,ee);let Te=ie;if(Ce){const je=Ce._f;je&&(!je.disabled&&ln(r,ee,NS(ie,je)),Te=Th(je.ref)&&Xs(ie)?"":ie,bS(je.ref)?[...je.ref.options].forEach(Fe=>Fe.selected=Te.includes(Fe.value)):je.refs?Od(je.ref)?je.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(Te)?Fe.checked=!!Te.find(lt=>lt===Fe.value):Fe.checked=Te===Fe.value||!!Te)}):je.refs.forEach(Fe=>Fe.checked=Fe.value===Te):qg(je.ref)?je.ref.value="":(je.ref.value=Te,je.ref.type||m.state.next({name:ee,values:ys(r)})))}(ye.shouldDirty||ye.shouldTouch)&&P(ee,Te,ye.shouldTouch,ye.shouldDirty,!0),ye.shouldValidate&&he(ee)},J=(ee,ie,ye)=>{for(const Ce in ie){if(!ie.hasOwnProperty(Ce))return;const Te=ie[Ce],je=ee+"."+Ce,Fe=rt(s,je);(o.array.has(ee)||ns(Te)||Fe&&!Fe._f)&&!To(Te)?J(je,Te,ye):I(je,Te,ye)}},se=(ee,ie,ye={})=>{const Ce=rt(s,ee),Te=o.array.has(ee),je=ys(ie);ln(r,ee,je),Te?(m.array.next({name:ee,values:ys(r)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ye.shouldDirty&&m.state.next({name:ee,dirtyFields:Cl(i,r),isDirty:_(ee,je)})):Ce&&!Ce._f&&!Xs(je)?J(ee,je,ye):I(ee,je,ye),q1(ee,o)&&m.state.next({...t,name:ee}),m.state.next({name:a.mount?ee:void 0,values:ys(r)})},oe=async ee=>{a.mount=!0;const ie=ee.target;let ye=ie.name,Ce=!0;const Te=rt(s,ye),je=Ze=>{Ce=Number.isNaN(Ze)||To(Ze)&&isNaN(Ze.getTime())||qa(Ze,rt(r,ye,Ze))},Fe=W1(e.mode),lt=W1(e.reValidateMode);if(Te){let Ze,Ke;const pt=ie.type?$1(Te._f):WR(ee),Qe=ee.type===R1.BLUR||ee.type===R1.FOCUS_OUT,Zt=!nO(Te._f)&&!e.resolver&&!rt(t.errors,ye)&&!Te._f.deps||rO(Qe,rt(t.touchedFields,ye),t.isSubmitted,lt,Fe),Bt=q1(ye,o,Qe);ln(r,ye,pt),Qe?(!ie||!ie.readOnly)&&(Te._f.onBlur&&Te._f.onBlur(ee),c&&c(0)):Te._f.onChange&&Te._f.onChange(ee);const nt=P(ye,pt,Qe),_t=!gi(nt)||Bt;if(!Qe&&m.state.next({name:ye,type:ee.type,values:ys(r)}),Zt)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?Qe&&x():Qe||x()),_t&&m.state.next({name:ye,...Bt?{}:nt});if(!Qe&&Bt&&m.state.next({...t}),e.resolver){const{errors:Kt}=await M([ye]);if(je(pt),Ce){const gt=V1(t.errors,s,ye),Dt=V1(Kt,s,gt.name||ye);Ze=Dt.error,ye=Dt.name,Ke=gi(Kt)}}else v([ye],!0),Ze=(await G1(Te,o.disabled,r,f,e.shouldUseNativeValidation))[ye],v([ye]),je(pt),Ce&&(Ze?Ke=!1:(u.isValid||h.isValid)&&(Ke=await k(s,!0)));Ce&&(Te._f.deps&&(!Array.isArray(Te._f.deps)||Te._f.deps.length>0)&&he(Te._f.deps),L(ye,Ke,Ze,nt))}},F=(ee,ie)=>{if(rt(t.errors,ie)&&ee.focus)return ee.focus(),1},he=async(ee,ie={})=>{let ye,Ce;const Te=ad(ee);if(e.resolver){const je=await T(Jn(ee)?ee:Te);ye=gi(je),Ce=ee?!Te.some(Fe=>rt(je,Fe)):ye}else ee?(Ce=(await Promise.all(Te.map(async je=>{const Fe=rt(s,je);return await k(Fe&&Fe._f?{[je]:Fe}:Fe)}))).every(Boolean),!(!Ce&&!t.isValid)&&x()):Ce=ye=await k(s);return m.state.next({...!Ii(ee)||(u.isValid||h.isValid)&&ye!==t.isValid?{}:{name:ee},...e.resolver||!ee?{isValid:ye}:{},errors:t.errors}),ie.shouldFocus&&!Ce&&od(s,F,ee?Te:o.mount),Ce},ke=(ee,ie)=>{let ye={...a.mount?r:i};return ie&&(ye=vS(ie.dirtyFields?t.dirtyFields:t.touchedFields,ye)),Jn(ee)?ye:Ii(ee)?rt(ye,ee):ee.map(Ce=>rt(ye,Ce))},ue=(ee,ie)=>({invalid:!!rt((ie||t).errors,ee),isDirty:!!rt((ie||t).dirtyFields,ee),error:rt((ie||t).errors,ee),isValidating:!!rt(t.validatingFields,ee),isTouched:!!rt((ie||t).touchedFields,ee)}),D=ee=>{ee&&ad(ee).forEach(ie=>Qn(t.errors,ie)),m.state.next({errors:ee?t.errors:{}})},V=(ee,ie,ye)=>{const Ce=(rt(s,ee,{_f:{}})._f||{}).ref,Te=rt(t.errors,ee)||{},{ref:je,message:Fe,type:lt,...Ze}=Te;ln(t.errors,ee,{...Ze,...ie,ref:Ce}),m.state.next({name:ee,errors:t.errors,isValid:!1}),ye&&ye.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},Z=(ee,ie)=>fr(ee)?m.state.subscribe({next:ye=>"values"in ye&&ee(E(void 0,ie),ye)}):E(ee,ie,!0),ne=ee=>m.state.subscribe({next:ie=>{iO(ee.name,ie.name,ee.exact)&&sO(ie,ee.formState||u,xt,ee.reRenderRoot)&&ee.callback({values:{...r},...t,...ie,defaultValues:i})}}).unsubscribe,ae=ee=>(a.mount=!0,h={...h,...ee.formState},ne({...ee,formState:h})),ce=(ee,ie={})=>{for(const ye of ee?ad(ee):o.mount)o.mount.delete(ye),o.array.delete(ye),ie.keepValue||(Qn(s,ye),Qn(r,ye)),!ie.keepError&&Qn(t.errors,ye),!ie.keepDirty&&Qn(t.dirtyFields,ye),!ie.keepTouched&&Qn(t.touchedFields,ye),!ie.keepIsValidating&&Qn(t.validatingFields,ye),!e.shouldUnregister&&!ie.keepDefaultValue&&Qn(i,ye);m.state.next({values:ys(r)}),m.state.next({...t,...ie.keepDirty?{isDirty:_()}:{}}),!ie.keepIsValid&&x()},xe=({disabled:ee,name:ie})=>{(Or(ee)&&a.mount||ee||o.disabled.has(ie))&&(ee?o.disabled.add(ie):o.disabled.delete(ie))},me=(ee,ie={})=>{let ye=rt(s,ee);const Ce=Or(ie.disabled)||Or(e.disabled);return ln(s,ee,{...ye||{},_f:{...ye&&ye._f?ye._f:{ref:{name:ee}},name:ee,mount:!0,...ie}}),o.mount.add(ee),ye?xe({disabled:Or(ie.disabled)?ie.disabled:e.disabled,name:ee}):N(ee,!0,ie.value),{...Ce?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:Bc(ie.min),max:Bc(ie.max),minLength:Bc(ie.minLength),maxLength:Bc(ie.maxLength),pattern:Bc(ie.pattern)}:{},name:ee,onChange:oe,onBlur:oe,ref:Te=>{if(Te){me(ee,ie),ye=rt(s,ee);const je=Jn(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Fe=KR(je),lt=ye._f.refs||[];if(Fe?lt.find(Ze=>Ze===je):je===ye._f.ref)return;ln(s,ee,{_f:{...ye._f,...Fe?{refs:[...lt.filter(Xm),je,...Array.isArray(rt(i,ee))?[{}]:[]],ref:{type:je.type,name:ee}}:{ref:je}}}),N(ee,!1,void 0,je)}else ye=rt(s,ee,{}),ye._f&&(ye._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(qR(o.array,ee)&&a.action)&&o.unMount.add(ee)}}},Ne=()=>e.shouldFocusError&&od(s,F,o.mount),Me=ee=>{Or(ee)&&(m.state.next({disabled:ee}),od(s,(ie,ye)=>{const Ce=rt(s,ye);Ce&&(ie.disabled=Ce._f.disabled||ee,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(Te=>{Te.disabled=Ce._f.disabled||ee}))},0,!1))},Ie=(ee,ie)=>async ye=>{let Ce;ye&&(ye.preventDefault&&ye.preventDefault(),ye.persist&&ye.persist());let Te=ys(r);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:je,values:Fe}=await M();t.errors=je,Te=ys(Fe)}else await k(s);if(o.disabled.size)for(const je of o.disabled)Qn(Te,je);if(Qn(t.errors,"root"),gi(t.errors)){m.state.next({errors:{}});try{await ee(Te,ye)}catch(je){Ce=je}}else ie&&await ie({...t.errors},ye),Ne(),setTimeout(Ne);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gi(t.errors)&&!Ce,submitCount:t.submitCount+1,errors:t.errors}),Ce)throw Ce},$e=(ee,ie={})=>{rt(s,ee)&&(Jn(ie.defaultValue)?se(ee,ys(rt(i,ee))):(se(ee,ie.defaultValue),ln(i,ee,ys(ie.defaultValue))),ie.keepTouched||Qn(t.touchedFields,ee),ie.keepDirty||(Qn(t.dirtyFields,ee),t.isDirty=ie.defaultValue?_(ee,ys(rt(i,ee))):_()),ie.keepError||(Qn(t.errors,ee),u.isValid&&x()),m.state.next({...t}))},Se=(ee,ie={})=>{const ye=ee?ys(ee):i,Ce=ys(ye),Te=gi(ee),je=Te?i:Ce;if(ie.keepDefaultValues||(i=ye),!ie.keepValues){if(ie.keepDirtyValues){const Fe=new Set([...o.mount,...Object.keys(Cl(i,r))]);for(const lt of Array.from(Fe))rt(t.dirtyFields,lt)?ln(je,lt,rt(r,lt)):se(lt,rt(je,lt))}else{if(Bg&&Jn(ee))for(const Fe of o.mount){const lt=rt(s,Fe);if(lt&&lt._f){const Ze=Array.isArray(lt._f.refs)?lt._f.refs[0]:lt._f.ref;if(Th(Ze)){const Ke=Ze.closest("form");if(Ke){Ke.reset();break}}}}if(ie.keepFieldsRef)for(const Fe of o.mount)se(Fe,rt(je,Fe));else s={}}r=e.shouldUnregister?ie.keepDefaultValues?ys(i):{}:ys(je),m.array.next({values:{...je}}),m.state.next({values:{...je}})}o={mount:ie.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:ie.keepSubmitCount?t.submitCount:0,isDirty:Te?!1:ie.keepDirty?t.isDirty:!!(ie.keepDefaultValues&&!qa(ee,i)),isSubmitted:ie.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Te?{}:ie.keepDirtyValues?ie.keepDefaultValues&&r?Cl(i,r):t.dirtyFields:ie.keepDefaultValues&&ee?Cl(i,ee):ie.keepDirty?t.dirtyFields:{},touchedFields:ie.keepTouched?t.touchedFields:{},errors:ie.keepErrors?t.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},te=(ee,ie)=>Se(fr(ee)?ee(r):ee,ie),St=(ee,ie={})=>{const ye=rt(s,ee),Ce=ye&&ye._f;if(Ce){const Te=Ce.refs?Ce.refs[0]:Ce.ref;Te.focus&&(Te.focus(),ie.shouldSelect&&fr(Te.select)&&Te.select())}},xt=ee=>{t={...t,...ee}},ze={control:{register:me,unregister:ce,getFieldState:ue,handleSubmit:Ie,setError:V,_subscribe:ne,_runSchema:M,_focusError:Ne,_getWatch:E,_getDirty:_,_setValid:x,_setFieldArray:w,_setDisabledField:xe,_setErrors:C,_getFieldArray:$,_reset:Se,_resetDefaultValues:()=>fr(e.defaultValues)&&e.defaultValues().then(ee=>{te(ee,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Me,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return r},get _state(){return a},set _state(ee){a=ee},get _defaultValues(){return i},get _names(){return o},set _names(ee){o=ee},get _formState(){return t},get _options(){return e},set _options(ee){e={...e,...ee}}},subscribe:ae,trigger:he,register:me,handleSubmit:Ie,watch:Z,setValue:se,getValues:ke,reset:te,resetField:$e,clearErrors:D,unregister:ce,setError:V,setFocus:St,getFieldState:ue};return{...ze,formControl:ze}}function dO(n={}){const e=Ge.useRef(void 0),t=Ge.useRef(void 0),[s,i]=Ge.useState({isDirty:!1,isValidating:!1,isLoading:fr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:fr(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:s},n.defaultValues&&!fr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:a,...o}=cO(n);e.current={...o,formState:s}}const r=e.current.control;return r._options=n,YR(()=>{const a=r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),r._formState.isReady=!0,a},[r]),Ge.useEffect(()=>r._disableForm(n.disabled),[r,n.disabled]),Ge.useEffect(()=>{n.mode&&(r._options.mode=n.mode),n.reValidateMode&&(r._options.reValidateMode=n.reValidateMode)},[r,n.mode,n.reValidateMode]),Ge.useEffect(()=>{n.errors&&(r._setErrors(n.errors),r._focusError())},[r,n.errors]),Ge.useEffect(()=>{n.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,n.shouldUnregister]),Ge.useEffect(()=>{if(r._proxyFormState.isDirty){const a=r._getDirty();a!==s.isDirty&&r._subjects.state.next({isDirty:a})}},[r,s.isDirty]),Ge.useEffect(()=>{n.values&&!qa(n.values,t.current)?(r._reset(n.values,{keepFieldsRef:!0,...r._options.resetOptions}),t.current=n.values,i(a=>({...a}))):r._resetDefaultValues()},[r,n.values]),Ge.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),e.current.formState=GR(s,r),e.current}const Y1=(n,e,t)=>{if(n&&"reportValidity"in n){const s=rt(t,e);n.setCustomValidity(s&&s.message||""),n.reportValidity()}},Yp=(n,e)=>{for(const t in e.fields){const s=e.fields[t];s&&s.ref&&"reportValidity"in s.ref?Y1(s.ref,t,n):s&&s.refs&&s.refs.forEach(i=>Y1(i,t,n))}},Z1=(n,e)=>{e.shouldUseNativeValidation&&Yp(n,e);const t={};for(const s in n){const i=rt(e.fields,s),r=Object.assign(n[s]||{},{ref:i&&i.ref});if(uO(e.names||Object.keys(n),s)){const a=Object.assign({},rt(t,s));ln(a,"root",r),ln(t,s,a)}else ln(t,s,r)}return t},uO=(n,e)=>{const t=K1(e);return n.some(s=>K1(s).match(`^${t}\\.\\d+`))};function K1(n){return n.replace(/\]|\[/g,"")}function De(n,e,t){function s(o,c){var d;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(d=o._zod).traits??(d.traits=new Set),o._zod.traits.add(n),e(o,c);for(const u in a.prototype)u in o||Object.defineProperty(o,u,{value:a.prototype[u].bind(o)});o._zod.constr=a,o._zod.def=c}const i=t?.Parent??Object;class r extends i{}Object.defineProperty(r,"name",{value:n});function a(o){var c;const d=t?.Parent?new r:this;s(d,o),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>t?.Parent&&o instanceof t.Parent?!0:o?._zod?.traits?.has(n)}),Object.defineProperty(a,"name",{value:n}),a}class ql extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class jS extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const _S={};function qo(n){return _S}function hO(n){const e=Object.values(n).filter(s=>typeof s=="number");return Object.entries(n).filter(([s,i])=>e.indexOf(+s)===-1).map(([s,i])=>i)}function Zp(n,e){return typeof e=="bigint"?e.toString():e}function Hg(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function Gg(n){return n==null}function Yg(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function fO(n,e){const t=(n.toString().split(".")[1]||"").length,s=e.toString();let i=(s.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(s)){const c=s.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}const r=t>i?t:i,a=Number.parseInt(n.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return a%o/10**r}const X1=Symbol("evaluating");function fn(n,e,t){let s;Object.defineProperty(n,e,{get(){if(s!==X1)return s===void 0&&(s=X1,s=t()),s},set(i){Object.defineProperty(n,e,{value:i})},configurable:!0})}function mO(n){return Object.create(Object.getPrototypeOf(n),Object.getOwnPropertyDescriptors(n))}function oo(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function nc(...n){const e={};for(const t of n){const s=Object.getOwnPropertyDescriptors(t);Object.assign(e,s)}return Object.defineProperties({},e)}function Q1(n){return JSON.stringify(n)}const CS="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Eh(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const pO=Hg(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function Cd(n){if(Eh(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(Eh(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function AS(n){return Cd(n)?{...n}:Array.isArray(n)?[...n]:n}const gO=new Set(["string","number","symbol"]);function ff(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lo(n,e,t){const s=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(s._zod.parent=n),s}function yt(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function yO(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const xO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function vO(n,e){const t=n._zod.def,s=nc(n._zod.def,{get shape(){const i={};for(const r in e){if(!(r in t.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&(i[r]=t.shape[r])}return oo(this,"shape",i),i},checks:[]});return lo(n,s)}function bO(n,e){const t=n._zod.def,s=nc(n._zod.def,{get shape(){const i={...n._zod.def.shape};for(const r in e){if(!(r in t.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&delete i[r]}return oo(this,"shape",i),i},checks:[]});return lo(n,s)}function wO(n,e){if(!Cd(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=nc(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return oo(this,"shape",r),r},checks:[]});return lo(n,i)}function SO(n,e){if(!Cd(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t={...n._zod.def,get shape(){const s={...n._zod.def.shape,...e};return oo(this,"shape",s),s},checks:n._zod.def.checks};return lo(n,t)}function NO(n,e){const t=nc(n._zod.def,{get shape(){const s={...n._zod.def.shape,...e._zod.def.shape};return oo(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return lo(n,t)}function kO(n,e,t){const s=nc(e._zod.def,{get shape(){const i=e._zod.def.shape,r={...i};if(t)for(const a in t){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=n?new n({type:"optional",innerType:i[a]}):i[a])}else for(const a in i)r[a]=n?new n({type:"optional",innerType:i[a]}):i[a];return oo(this,"shape",r),r},checks:[]});return lo(e,s)}function jO(n,e,t){const s=nc(e._zod.def,{get shape(){const i=e._zod.def.shape,r={...i};if(t)for(const a in t){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=new n({type:"nonoptional",innerType:i[a]}))}else for(const a in i)r[a]=new n({type:"nonoptional",innerType:i[a]});return oo(this,"shape",r),r},checks:[]});return lo(e,s)}function El(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function PS(n,e){return e.map(t=>{var s;return(s=t).path??(s.path=[]),t.path.unshift(n),t})}function Wu(n){return typeof n=="string"?n:n?.message}function Vo(n,e,t){const s={...n,path:n.path??[]};if(!n.message){const i=Wu(n.inst?._zod.def?.error?.(n))??Wu(e?.error?.(n))??Wu(t.customError?.(n))??Wu(t.localeError?.(n))??"Invalid input";s.message=i}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function Zg(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Ad(...n){const[e,t,s]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:s}:{...e}}const LS=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Zp,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},Kg=De("$ZodError",LS),mf=De("$ZodError",LS,{Parent:Error});function _O(n,e=t=>t.message){const t={},s=[];for(const i of n.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}function CO(n,e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(o=>i({issues:o}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const d=a.path[c];c===a.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(a))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return i(n),s}const pf=n=>(e,t,s,i)=>{const r=s?Object.assign(s,{async:!1}):{async:!1},a=e._zod.run({value:t,issues:[]},r);if(a instanceof Promise)throw new ql;if(a.issues.length){const o=new(i?.Err??n)(a.issues.map(c=>Vo(c,r,qo())));throw CS(o,i?.callee),o}return a.value},AO=pf(mf),gf=n=>async(e,t,s,i)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let a=e._zod.run({value:t,issues:[]},r);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new(i?.Err??n)(a.issues.map(c=>Vo(c,r,qo())));throw CS(o,i?.callee),o}return a.value},PO=gf(mf),yf=n=>(e,t,s)=>{const i=s?{...s,async:!1}:{async:!1},r=e._zod.run({value:t,issues:[]},i);if(r instanceof Promise)throw new ql;return r.issues.length?{success:!1,error:new(n??Kg)(r.issues.map(a=>Vo(a,i,qo())))}:{success:!0,data:r.value}},LO=yf(mf),xf=n=>async(e,t,s)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let r=e._zod.run({value:t,issues:[]},i);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new n(r.issues.map(a=>Vo(a,i,qo())))}:{success:!0,data:r.value}},MO=xf(mf),TO=n=>(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return pf(n)(e,t,i)},DO=n=>(e,t,s)=>pf(n)(e,t,s),EO=n=>async(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return gf(n)(e,t,i)},IO=n=>async(e,t,s)=>gf(n)(e,t,s),RO=n=>(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return yf(n)(e,t,i)},OO=n=>(e,t,s)=>yf(n)(e,t,s),FO=n=>async(e,t,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return xf(n)(e,t,i)},zO=n=>async(e,t,s)=>xf(n)(e,t,s),BO=/^[cC][^\s-]{8,}$/,$O=/^[0-9a-z]+$/,WO=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,UO=/^[0-9a-vA-V]{20}$/,qO=/^[A-Za-z0-9]{27}$/,VO=/^[a-zA-Z0-9_-]{21}$/,HO=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,GO=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,J1=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,YO=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ZO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function KO(){return new RegExp(ZO,"u")}const XO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,JO=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,e7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,t7=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,MS=/^[A-Za-z0-9_-]*$/,n7=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,s7=/^\+(?:[0-9]){6,14}[0-9]$/,TS="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",i7=new RegExp(`^${TS}$`);function DS(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function r7(n){return new RegExp(`^${DS(n)}$`)}function a7(n){const e=DS({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${t.join("|")})`;return new RegExp(`^${TS}T(?:${s})$`)}const o7=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},l7=/^-?\d+$/,c7=/^-?\d+(?:\.\d+)?/,d7=/^[^A-Z]*$/,u7=/^[^a-z]*$/,wi=De("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),ES={number:"number",bigint:"bigint",object:"date"},IS=De("$ZodCheckLessThan",(n,e)=>{wi.init(n,e);const t=ES[typeof e.value];n._zod.onattach.push(s=>{const i=s._zod.bag,r=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<r&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),n._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:t,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),RS=De("$ZodCheckGreaterThan",(n,e)=>{wi.init(n,e);const t=ES[typeof e.value];n._zod.onattach.push(s=>{const i=s._zod.bag,r=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>r&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),n._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:t,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),h7=De("$ZodCheckMultipleOf",(n,e)=>{wi.init(n,e),n._zod.onattach.push(t=>{var s;(s=t._zod.bag).multipleOf??(s.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):fO(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),f7=De("$ZodCheckNumberFormat",(n,e)=>{wi.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),s=t?"int":"number",[i,r]=xO[e.format];n._zod.onattach.push(a=>{const o=a._zod.bag;o.format=e.format,o.minimum=i,o.maximum=r,t&&(o.pattern=l7)}),n._zod.check=a=>{const o=a.value;if(t){if(!Number.isInteger(o)){a.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:o,inst:n});return}if(!Number.isSafeInteger(o)){o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!e.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:s,continue:!e.abort});return}}o<i&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:n,continue:!e.abort}),o>r&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:r,inst:n})}}),m7=De("$ZodCheckMaxLength",(n,e)=>{var t;wi.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Gg(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(s._zod.bag.maximum=e.maximum)}),n._zod.check=s=>{const i=s.value;if(i.length<=e.maximum)return;const a=Zg(i);s.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),p7=De("$ZodCheckMinLength",(n,e)=>{var t;wi.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Gg(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(s._zod.bag.minimum=e.minimum)}),n._zod.check=s=>{const i=s.value;if(i.length>=e.minimum)return;const a=Zg(i);s.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),g7=De("$ZodCheckLengthEquals",(n,e)=>{var t;wi.init(n,e),(t=n._zod.def).when??(t.when=s=>{const i=s.value;return!Gg(i)&&i.length!==void 0}),n._zod.onattach.push(s=>{const i=s._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),n._zod.check=s=>{const i=s.value,r=i.length;if(r===e.length)return;const a=Zg(i),o=r>e.length;s.issues.push({origin:a,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:n,continue:!e.abort})}}),vf=De("$ZodCheckStringFormat",(n,e)=>{var t,s;wi.init(n,e),n._zod.onattach.push(i=>{const r=i._zod.bag;r.format=e.format,e.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(s=n._zod).check??(s.check=()=>{})}),y7=De("$ZodCheckRegex",(n,e)=>{vf.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),x7=De("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=d7),vf.init(n,e)}),v7=De("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=u7),vf.init(n,e)}),b7=De("$ZodCheckIncludes",(n,e)=>{wi.init(n,e);const t=ff(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=s,n._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),n._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:n,continue:!e.abort})}}),w7=De("$ZodCheckStartsWith",(n,e)=>{wi.init(n,e);const t=new RegExp(`^${ff(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:n,continue:!e.abort})}}),S7=De("$ZodCheckEndsWith",(n,e)=>{wi.init(n,e);const t=new RegExp(`.*${ff(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:n,continue:!e.abort})}}),N7=De("$ZodCheckOverwrite",(n,e)=>{wi.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class k7{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(a=>a),i=Math.min(...s.map(a=>a.length-a.trimStart().length)),r=s.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of r)this.content.push(a)}compile(){const e=Function,t=this?.args,i=[...(this?.content??[""]).map(r=>`  ${r}`)];return new e(...t,i.join(`
`))}}const j7={major:4,minor:1,patch:8},ss=De("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=j7;const s=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&s.unshift(n);for(const i of s)for(const r of i._zod.onattach)r(n);if(s.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const i=(a,o,c)=>{let d=El(a),u;for(const h of o){if(h._zod.def.when){if(!h._zod.def.when(a))continue}else if(d)continue;const m=a.issues.length,f=h._zod.check(a);if(f instanceof Promise&&c?.async===!1)throw new ql;if(u||f instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await f,a.issues.length!==m&&(d||(d=El(a,m)))});else{if(a.issues.length===m)continue;d||(d=El(a,m))}}return u?u.then(()=>a):a},r=(a,o,c)=>{if(El(a))return a.aborted=!0,a;const d=i(o,s,c);if(d instanceof Promise){if(c.async===!1)throw new ql;return d.then(u=>n._zod.parse(u,c))}return n._zod.parse(d,c)};n._zod.run=(a,o)=>{if(o.skipChecks)return n._zod.parse(a,o);if(o.direction==="backward"){const d=n._zod.parse({value:a.value,issues:[]},{...o,skipChecks:!0});return d instanceof Promise?d.then(u=>r(u,a,o)):r(d,a,o)}const c=n._zod.parse(a,o);if(c instanceof Promise){if(o.async===!1)throw new ql;return c.then(d=>i(d,s,o))}return i(c,s,o)}}n["~standard"]={validate:i=>{try{const r=LO(n,i);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return MO(n,i).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Xg=De("$ZodString",(n,e)=>{ss.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??o7(n._zod.bag),n._zod.parse=(t,s)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),Cn=De("$ZodStringFormat",(n,e)=>{vf.init(n,e),Xg.init(n,e)}),_7=De("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=GO),Cn.init(n,e)}),C7=De("$ZodUUID",(n,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=J1(s))}else e.pattern??(e.pattern=J1());Cn.init(n,e)}),A7=De("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=YO),Cn.init(n,e)}),P7=De("$ZodURL",(n,e)=>{Cn.init(n,e),n._zod.check=t=>{try{const s=t.value.trim(),i=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n7.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=i.href:t.value=s;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),L7=De("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=KO()),Cn.init(n,e)}),M7=De("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=VO),Cn.init(n,e)}),T7=De("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=BO),Cn.init(n,e)}),D7=De("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=$O),Cn.init(n,e)}),E7=De("$ZodULID",(n,e)=>{e.pattern??(e.pattern=WO),Cn.init(n,e)}),I7=De("$ZodXID",(n,e)=>{e.pattern??(e.pattern=UO),Cn.init(n,e)}),R7=De("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=qO),Cn.init(n,e)}),O7=De("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=a7(e)),Cn.init(n,e)}),F7=De("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=i7),Cn.init(n,e)}),z7=De("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=r7(e)),Cn.init(n,e)}),B7=De("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=HO),Cn.init(n,e)}),$7=De("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=XO),Cn.init(n,e),n._zod.onattach.push(t=>{const s=t._zod.bag;s.format="ipv4"})}),W7=De("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=QO),Cn.init(n,e),n._zod.onattach.push(t=>{const s=t._zod.bag;s.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),U7=De("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=JO),Cn.init(n,e)}),q7=De("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=e7),Cn.init(n,e),n._zod.check=t=>{const s=t.value.split("/");try{if(s.length!==2)throw new Error;const[i,r]=s;if(!r)throw new Error;const a=Number(r);if(`${a}`!==r)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function OS(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const V7=De("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=t7),Cn.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{OS(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function H7(n){if(!MS.test(n))return!1;const e=n.replace(/[-_]/g,s=>s==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return OS(t)}const G7=De("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=MS),Cn.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{H7(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),Y7=De("$ZodE164",(n,e)=>{e.pattern??(e.pattern=s7),Cn.init(n,e)});function Z7(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[s]=t;if(!s)return!1;const i=JSON.parse(atob(s));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const K7=De("$ZodJWT",(n,e)=>{Cn.init(n,e),n._zod.check=t=>{Z7(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),FS=De("$ZodNumber",(n,e)=>{ss.init(n,e),n._zod.pattern=n._zod.bag.pattern??c7,n._zod.parse=(t,s)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const i=t.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return t;const r=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:i,inst:n,...r?{received:r}:{}}),t}}),X7=De("$ZodNumber",(n,e)=>{f7.init(n,e),FS.init(n,e)}),Q7=De("$ZodUnknown",(n,e)=>{ss.init(n,e),n._zod.parse=t=>t}),J7=De("$ZodNever",(n,e)=>{ss.init(n,e),n._zod.parse=(t,s)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function eb(n,e,t){n.issues.length&&e.issues.push(...PS(t,n.issues)),e.value[t]=n.value}const eF=De("$ZodArray",(n,e)=>{ss.init(n,e),n._zod.parse=(t,s)=>{const i=t.value;if(!Array.isArray(i))return t.issues.push({expected:"array",code:"invalid_type",input:i,inst:n}),t;t.value=Array(i.length);const r=[];for(let a=0;a<i.length;a++){const o=i[a],c=e.element._zod.run({value:o,issues:[]},s);c instanceof Promise?r.push(c.then(d=>eb(d,t,a))):eb(c,t,a)}return r.length?Promise.all(r).then(()=>t):t}});function Ih(n,e,t,s){n.issues.length&&e.issues.push(...PS(t,n.issues)),n.value===void 0?t in s&&(e.value[t]=void 0):e.value[t]=n.value}function zS(n){const e=Object.keys(n.shape);for(const s of e)if(!n.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const t=yO(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function BS(n,e,t,s,i,r){const a=[],o=i.keySet,c=i.catchall._zod,d=c.def.type;for(const u of Object.keys(e)){if(o.has(u))continue;if(d==="never"){a.push(u);continue}const h=c.run({value:e[u],issues:[]},s);h instanceof Promise?n.push(h.then(m=>Ih(m,t,u,e))):Ih(h,t,u,e)}return a.length&&t.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:r}),n.length?Promise.all(n).then(()=>t):t}const tF=De("$ZodObject",(n,e)=>{ss.init(n,e);const t=Hg(()=>zS(e));fn(n._zod,"propValues",()=>{const a=e.shape,o={};for(const c in a){const d=a[c]._zod;if(d.values){o[c]??(o[c]=new Set);for(const u of d.values)o[c].add(u)}}return o});const s=Eh,i=e.catchall;let r;n._zod.parse=(a,o)=>{r??(r=t.value);const c=a.value;if(!s(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:n}),a;a.value={};const d=[],u=r.shape;for(const h of r.keys){const f=u[h]._zod.run({value:c[h],issues:[]},o);f instanceof Promise?d.push(f.then(y=>Ih(y,a,h,c))):Ih(f,a,h,c)}return i?BS(d,c,a,o,t.value,n):d.length?Promise.all(d).then(()=>a):a}}),nF=De("$ZodObjectJIT",(n,e)=>{tF.init(n,e);const t=n._zod.parse,s=Hg(()=>zS(e)),i=m=>{const f=new k7(["shape","payload","ctx"]),y=s.value,x=C=>{const N=Q1(C);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};f.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const C of y.keys)v[C]=`key_${w++}`;f.write("const newResult = {};");for(const C of y.keys){const N=v[C],P=Q1(C);f.write(`const ${N} = ${x(C)};`),f.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${N}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const j=f.compile();return(C,N)=>j(m,C,N)};let r;const a=Eh,o=!_S.jitless,d=o&&pO.value,u=e.catchall;let h;n._zod.parse=(m,f)=>{h??(h=s.value);const y=m.value;return a(y)?o&&d&&f?.async===!1&&f.jitless!==!0?(r||(r=i(e.shape)),m=r(m,f),u?BS([],y,m,f,h,n):m):t(m,f):(m.issues.push({expected:"object",code:"invalid_type",input:y,inst:n}),m)}});function tb(n,e,t,s){for(const r of n)if(r.issues.length===0)return e.value=r.value,e;const i=n.filter(r=>!El(r));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(r=>r.issues.map(a=>Vo(a,s,qo())))}),e)}const sF=De("$ZodUnion",(n,e)=>{ss.init(n,e),fn(n._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),fn(n._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),fn(n._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),fn(n._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${i.map(r=>Yg(r.source)).join("|")})$`)}});const t=e.options.length===1,s=e.options[0]._zod.run;n._zod.parse=(i,r)=>{if(t)return s(i,r);let a=!1;const o=[];for(const c of e.options){const d=c._zod.run({value:i.value,issues:[]},r);if(d instanceof Promise)o.push(d),a=!0;else{if(d.issues.length===0)return d;o.push(d)}}return a?Promise.all(o).then(c=>tb(c,i,n,r)):tb(o,i,n,r)}}),iF=De("$ZodIntersection",(n,e)=>{ss.init(n,e),n._zod.parse=(t,s)=>{const i=t.value,r=e.left._zod.run({value:i,issues:[]},s),a=e.right._zod.run({value:i,issues:[]},s);return r instanceof Promise||a instanceof Promise?Promise.all([r,a]).then(([c,d])=>nb(t,c,d)):nb(t,r,a)}});function Kp(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(Cd(n)&&Cd(e)){const t=Object.keys(e),s=Object.keys(n).filter(r=>t.indexOf(r)!==-1),i={...n,...e};for(const r of s){const a=Kp(n[r],e[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};i[r]=a.data}return{valid:!0,data:i}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let s=0;s<n.length;s++){const i=n[s],r=e[s],a=Kp(i,r);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};t.push(a.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function nb(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),El(n))return n;const s=Kp(e.value,t.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return n.value=s.data,n}const rF=De("$ZodEnum",(n,e)=>{ss.init(n,e);const t=hO(e.entries),s=new Set(t);n._zod.values=s,n._zod.pattern=new RegExp(`^(${t.filter(i=>gO.has(typeof i)).map(i=>typeof i=="string"?ff(i):i.toString()).join("|")})$`),n._zod.parse=(i,r)=>{const a=i.value;return s.has(a)||i.issues.push({code:"invalid_value",values:t,input:a,inst:n}),i}}),aF=De("$ZodTransform",(n,e)=>{ss.init(n,e),n._zod.parse=(t,s)=>{if(s.direction==="backward")throw new jS(n.constructor.name);const i=e.transform(t.value,t);if(s.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(t.value=a,t));if(i instanceof Promise)throw new ql;return t.value=i,t}});function sb(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const oF=De("$ZodOptional",(n,e)=>{ss.init(n,e),n._zod.optin="optional",n._zod.optout="optional",fn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),fn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Yg(t.source)})?$`):void 0}),n._zod.parse=(t,s)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>sb(r,t.value)):sb(i,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,s)}}),lF=De("$ZodNullable",(n,e)=>{ss.init(n,e),fn(n._zod,"optin",()=>e.innerType._zod.optin),fn(n._zod,"optout",()=>e.innerType._zod.optout),fn(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Yg(t.source)}|null)$`):void 0}),fn(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,s)=>t.value===null?t:e.innerType._zod.run(t,s)}),cF=De("$ZodDefault",(n,e)=>{ss.init(n,e),n._zod.optin="optional",fn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);if(t.value===void 0)return t.value=e.defaultValue,t;const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>ib(r,e)):ib(i,e)}});function ib(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const dF=De("$ZodPrefault",(n,e)=>{ss.init(n,e),n._zod.optin="optional",fn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>(s.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,s))}),uF=De("$ZodNonOptional",(n,e)=>{ss.init(n,e),fn(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(s=>s!==void 0)):void 0}),n._zod.parse=(t,s)=>{const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>rb(r,n)):rb(i,n)}});function rb(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const hF=De("$ZodCatch",(n,e)=>{ss.init(n,e),fn(n._zod,"optin",()=>e.innerType._zod.optin),fn(n._zod,"optout",()=>e.innerType._zod.optout),fn(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(r=>(t.value=r.value,r.issues.length&&(t.value=e.catchValue({...t,error:{issues:r.issues.map(a=>Vo(a,s,qo()))},input:t.value}),t.issues=[]),t)):(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(r=>Vo(r,s,qo()))},input:t.value}),t.issues=[]),t)}}),fF=De("$ZodPipe",(n,e)=>{ss.init(n,e),fn(n._zod,"values",()=>e.in._zod.values),fn(n._zod,"optin",()=>e.in._zod.optin),fn(n._zod,"optout",()=>e.out._zod.optout),fn(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,s)=>{if(s.direction==="backward"){const r=e.out._zod.run(t,s);return r instanceof Promise?r.then(a=>Uu(a,e.in,s)):Uu(r,e.in,s)}const i=e.in._zod.run(t,s);return i instanceof Promise?i.then(r=>Uu(r,e.out,s)):Uu(i,e.out,s)}});function Uu(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const mF=De("$ZodReadonly",(n,e)=>{ss.init(n,e),fn(n._zod,"propValues",()=>e.innerType._zod.propValues),fn(n._zod,"values",()=>e.innerType._zod.values),fn(n._zod,"optin",()=>e.innerType._zod.optin),fn(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,s)=>{if(s.direction==="backward")return e.innerType._zod.run(t,s);const i=e.innerType._zod.run(t,s);return i instanceof Promise?i.then(ab):ab(i)}});function ab(n){return n.value=Object.freeze(n.value),n}const pF=De("$ZodCustom",(n,e)=>{wi.init(n,e),ss.init(n,e),n._zod.parse=(t,s)=>t,n._zod.check=t=>{const s=t.value,i=e.fn(s);if(i instanceof Promise)return i.then(r=>ob(r,t,s,n));ob(i,t,s,n)}});function ob(n,e,t,s){if(!n){const i={code:"custom",input:t,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(i.params=s._zod.def.params),e.issues.push(Ad(i))}}class gF{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const s=t[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const s={...this.get(t)??{}};delete s.id;const i={...s,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function yF(){return new gF}const qu=yF();function xF(n,e){return new n({type:"string",...yt(e)})}function vF(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...yt(e)})}function lb(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...yt(e)})}function bF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...yt(e)})}function wF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...yt(e)})}function SF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...yt(e)})}function NF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...yt(e)})}function kF(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...yt(e)})}function jF(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...yt(e)})}function _F(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...yt(e)})}function CF(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...yt(e)})}function AF(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...yt(e)})}function PF(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...yt(e)})}function LF(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...yt(e)})}function MF(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...yt(e)})}function TF(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...yt(e)})}function DF(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...yt(e)})}function EF(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...yt(e)})}function IF(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...yt(e)})}function RF(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...yt(e)})}function OF(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...yt(e)})}function FF(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...yt(e)})}function zF(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...yt(e)})}function BF(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...yt(e)})}function $F(n,e){return new n({type:"string",format:"date",check:"string_format",...yt(e)})}function WF(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...yt(e)})}function UF(n,e){return new n({type:"string",format:"duration",check:"string_format",...yt(e)})}function qF(n,e){return new n({type:"number",checks:[],...yt(e)})}function VF(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...yt(e)})}function HF(n){return new n({type:"unknown"})}function GF(n,e){return new n({type:"never",...yt(e)})}function cb(n,e){return new IS({check:"less_than",...yt(e),value:n,inclusive:!1})}function Qm(n,e){return new IS({check:"less_than",...yt(e),value:n,inclusive:!0})}function db(n,e){return new RS({check:"greater_than",...yt(e),value:n,inclusive:!1})}function Jm(n,e){return new RS({check:"greater_than",...yt(e),value:n,inclusive:!0})}function ub(n,e){return new h7({check:"multiple_of",...yt(e),value:n})}function $S(n,e){return new m7({check:"max_length",...yt(e),maximum:n})}function Rh(n,e){return new p7({check:"min_length",...yt(e),minimum:n})}function WS(n,e){return new g7({check:"length_equals",...yt(e),length:n})}function YF(n,e){return new y7({check:"string_format",format:"regex",...yt(e),pattern:n})}function ZF(n){return new x7({check:"string_format",format:"lowercase",...yt(n)})}function KF(n){return new v7({check:"string_format",format:"uppercase",...yt(n)})}function XF(n,e){return new b7({check:"string_format",format:"includes",...yt(e),includes:n})}function QF(n,e){return new w7({check:"string_format",format:"starts_with",...yt(e),prefix:n})}function JF(n,e){return new S7({check:"string_format",format:"ends_with",...yt(e),suffix:n})}function Fd(n){return new N7({check:"overwrite",tx:n})}function e9(n){return Fd(e=>e.normalize(n))}function t9(){return Fd(n=>n.trim())}function n9(){return Fd(n=>n.toLowerCase())}function s9(){return Fd(n=>n.toUpperCase())}function i9(n,e,t){return new n({type:"array",element:e,...yt(t)})}function r9(n,e,t){return new n({type:"custom",check:"custom",fn:e,...yt(t)})}function a9(n){const e=o9(t=>(t.addIssue=s=>{if(typeof s=="string")t.issues.push(Ad(s,t.value,e._zod.def));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=t.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),t.issues.push(Ad(i))}},n(t.value,t)));return e}function o9(n,e){const t=new wi({check:"custom",...yt(e)});return t._zod.check=n,t}function hb(n,e){try{var t=n()}catch(s){return e(s)}return t&&t.then?t.then(void 0,e):t}function l9(n,e){for(var t={};n.length;){var s=n[0],i=s.code,r=s.message,a=s.path.join(".");if(!t[a])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];t[a]={message:o.message,type:o.code}}else t[a]={message:r,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return n.push(h)})}),e){var c=t[a].types,d=c&&c[s.code];t[a]=Ug(a,e,t,i,d?[].concat(d,s.message):s.message)}n.shift()}return t}function c9(n,e){for(var t={};n.length;){var s=n[0],i=s.code,r=s.message,a=s.path.join(".");if(!t[a])if(s.code==="invalid_union"&&s.errors.length>0){var o=s.errors[0][0];t[a]={message:o.message,type:o.code}}else t[a]={message:r,type:i};if(s.code==="invalid_union"&&s.errors.forEach(function(u){return u.forEach(function(h){return n.push(h)})}),e){var c=t[a].types,d=c&&c[s.code];t[a]=Ug(a,e,t,i,d?[].concat(d,s.message):s.message)}n.shift()}return t}function d9(n,e,t){if(t===void 0&&(t={}),(function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def})(n))return function(s,i,r){try{return Promise.resolve(hb(function(){return Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(a){return r.shouldUseNativeValidation&&Yp({},r),{errors:{},values:t.raw?Object.assign({},s):a}})},function(a){if((function(o){return Array.isArray(o?.issues)})(a))return{values:{},errors:Z1(l9(a.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw a}))}catch(a){return Promise.reject(a)}};if((function(s){return"_zod"in s&&typeof s._zod=="object"})(n))return function(s,i,r){try{return Promise.resolve(hb(function(){return Promise.resolve((t.mode==="sync"?AO:PO)(n,s,e)).then(function(a){return r.shouldUseNativeValidation&&Yp({},r),{errors:{},values:t.raw?Object.assign({},s):a}})},function(a){if((function(o){return o instanceof Kg})(a))return{values:{},errors:Z1(c9(a.issues,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw a}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}const u9=De("ZodISODateTime",(n,e)=>{O7.init(n,e),Tn.init(n,e)});function h9(n){return BF(u9,n)}const f9=De("ZodISODate",(n,e)=>{F7.init(n,e),Tn.init(n,e)});function m9(n){return $F(f9,n)}const p9=De("ZodISOTime",(n,e)=>{z7.init(n,e),Tn.init(n,e)});function g9(n){return WF(p9,n)}const y9=De("ZodISODuration",(n,e)=>{B7.init(n,e),Tn.init(n,e)});function x9(n){return UF(y9,n)}const v9=(n,e)=>{Kg.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>CO(n,t)},flatten:{value:t=>_O(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Zp,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Zp,2)}},isEmpty:{get(){return n.issues.length===0}}})},Xi=De("ZodError",v9,{Parent:Error}),b9=pf(Xi),w9=gf(Xi),S9=yf(Xi),N9=xf(Xi),k9=TO(Xi),j9=DO(Xi),_9=EO(Xi),C9=IO(Xi),A9=RO(Xi),P9=OO(Xi),L9=FO(Xi),M9=zO(Xi),ms=De("ZodType",(n,e)=>(ss.init(n,e),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone({...e,checks:[...e.checks??[],...t.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),n.clone=(t,s)=>lo(n,t,s),n.brand=()=>n,n.register=((t,s)=>(t.add(n,s),n)),n.parse=(t,s)=>b9(n,t,s,{callee:n.parse}),n.safeParse=(t,s)=>S9(n,t,s),n.parseAsync=async(t,s)=>w9(n,t,s,{callee:n.parseAsync}),n.safeParseAsync=async(t,s)=>N9(n,t,s),n.spa=n.safeParseAsync,n.encode=(t,s)=>k9(n,t,s),n.decode=(t,s)=>j9(n,t,s),n.encodeAsync=async(t,s)=>_9(n,t,s),n.decodeAsync=async(t,s)=>C9(n,t,s),n.safeEncode=(t,s)=>A9(n,t,s),n.safeDecode=(t,s)=>P9(n,t,s),n.safeEncodeAsync=async(t,s)=>L9(n,t,s),n.safeDecodeAsync=async(t,s)=>M9(n,t,s),n.refine=(t,s)=>n.check(bz(t,s)),n.superRefine=t=>n.check(wz(t)),n.overwrite=t=>n.check(Fd(t)),n.optional=()=>yb(n),n.nullable=()=>xb(n),n.nullish=()=>yb(xb(n)),n.nonoptional=t=>fz(n,t),n.array=()=>oh(n),n.or=t=>sz([n,t]),n.and=t=>rz(n,t),n.transform=t=>vb(n,oz(t)),n.default=t=>dz(n,t),n.prefault=t=>hz(n,t),n.catch=t=>pz(n,t),n.pipe=t=>vb(n,t),n.readonly=()=>xz(n),n.describe=t=>{const s=n.clone();return qu.add(s,{description:t}),s},Object.defineProperty(n,"description",{get(){return qu.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return qu.get(n);const s=n.clone();return qu.add(s,t[0]),s},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),US=De("_ZodString",(n,e)=>{Xg.init(n,e),ms.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...s)=>n.check(YF(...s)),n.includes=(...s)=>n.check(XF(...s)),n.startsWith=(...s)=>n.check(QF(...s)),n.endsWith=(...s)=>n.check(JF(...s)),n.min=(...s)=>n.check(Rh(...s)),n.max=(...s)=>n.check($S(...s)),n.length=(...s)=>n.check(WS(...s)),n.nonempty=(...s)=>n.check(Rh(1,...s)),n.lowercase=s=>n.check(ZF(s)),n.uppercase=s=>n.check(KF(s)),n.trim=()=>n.check(t9()),n.normalize=(...s)=>n.check(e9(...s)),n.toLowerCase=()=>n.check(n9()),n.toUpperCase=()=>n.check(s9())}),T9=De("ZodString",(n,e)=>{Xg.init(n,e),US.init(n,e),n.email=t=>n.check(vF(D9,t)),n.url=t=>n.check(kF(E9,t)),n.jwt=t=>n.check(zF(Z9,t)),n.emoji=t=>n.check(jF(I9,t)),n.guid=t=>n.check(lb(fb,t)),n.uuid=t=>n.check(bF(Vu,t)),n.uuidv4=t=>n.check(wF(Vu,t)),n.uuidv6=t=>n.check(SF(Vu,t)),n.uuidv7=t=>n.check(NF(Vu,t)),n.nanoid=t=>n.check(_F(R9,t)),n.guid=t=>n.check(lb(fb,t)),n.cuid=t=>n.check(CF(O9,t)),n.cuid2=t=>n.check(AF(F9,t)),n.ulid=t=>n.check(PF(z9,t)),n.base64=t=>n.check(RF(H9,t)),n.base64url=t=>n.check(OF(G9,t)),n.xid=t=>n.check(LF(B9,t)),n.ksuid=t=>n.check(MF($9,t)),n.ipv4=t=>n.check(TF(W9,t)),n.ipv6=t=>n.check(DF(U9,t)),n.cidrv4=t=>n.check(EF(q9,t)),n.cidrv6=t=>n.check(IF(V9,t)),n.e164=t=>n.check(FF(Y9,t)),n.datetime=t=>n.check(h9(t)),n.date=t=>n.check(m9(t)),n.time=t=>n.check(g9(t)),n.duration=t=>n.check(x9(t))});function Ua(n){return xF(T9,n)}const Tn=De("ZodStringFormat",(n,e)=>{Cn.init(n,e),US.init(n,e)}),D9=De("ZodEmail",(n,e)=>{A7.init(n,e),Tn.init(n,e)}),fb=De("ZodGUID",(n,e)=>{_7.init(n,e),Tn.init(n,e)}),Vu=De("ZodUUID",(n,e)=>{C7.init(n,e),Tn.init(n,e)}),E9=De("ZodURL",(n,e)=>{P7.init(n,e),Tn.init(n,e)}),I9=De("ZodEmoji",(n,e)=>{L7.init(n,e),Tn.init(n,e)}),R9=De("ZodNanoID",(n,e)=>{M7.init(n,e),Tn.init(n,e)}),O9=De("ZodCUID",(n,e)=>{T7.init(n,e),Tn.init(n,e)}),F9=De("ZodCUID2",(n,e)=>{D7.init(n,e),Tn.init(n,e)}),z9=De("ZodULID",(n,e)=>{E7.init(n,e),Tn.init(n,e)}),B9=De("ZodXID",(n,e)=>{I7.init(n,e),Tn.init(n,e)}),$9=De("ZodKSUID",(n,e)=>{R7.init(n,e),Tn.init(n,e)}),W9=De("ZodIPv4",(n,e)=>{$7.init(n,e),Tn.init(n,e)}),U9=De("ZodIPv6",(n,e)=>{W7.init(n,e),Tn.init(n,e)}),q9=De("ZodCIDRv4",(n,e)=>{U7.init(n,e),Tn.init(n,e)}),V9=De("ZodCIDRv6",(n,e)=>{q7.init(n,e),Tn.init(n,e)}),H9=De("ZodBase64",(n,e)=>{V7.init(n,e),Tn.init(n,e)}),G9=De("ZodBase64URL",(n,e)=>{G7.init(n,e),Tn.init(n,e)}),Y9=De("ZodE164",(n,e)=>{Y7.init(n,e),Tn.init(n,e)}),Z9=De("ZodJWT",(n,e)=>{K7.init(n,e),Tn.init(n,e)}),qS=De("ZodNumber",(n,e)=>{FS.init(n,e),ms.init(n,e),n.gt=(s,i)=>n.check(db(s,i)),n.gte=(s,i)=>n.check(Jm(s,i)),n.min=(s,i)=>n.check(Jm(s,i)),n.lt=(s,i)=>n.check(cb(s,i)),n.lte=(s,i)=>n.check(Qm(s,i)),n.max=(s,i)=>n.check(Qm(s,i)),n.int=s=>n.check(mb(s)),n.safe=s=>n.check(mb(s)),n.positive=s=>n.check(db(0,s)),n.nonnegative=s=>n.check(Jm(0,s)),n.negative=s=>n.check(cb(0,s)),n.nonpositive=s=>n.check(Qm(0,s)),n.multipleOf=(s,i)=>n.check(ub(s,i)),n.step=(s,i)=>n.check(ub(s,i)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function ep(n){return qF(qS,n)}const K9=De("ZodNumberFormat",(n,e)=>{X7.init(n,e),qS.init(n,e)});function mb(n){return VF(K9,n)}const X9=De("ZodUnknown",(n,e)=>{Q7.init(n,e),ms.init(n,e)});function pb(){return HF(X9)}const Q9=De("ZodNever",(n,e)=>{J7.init(n,e),ms.init(n,e)});function J9(n){return GF(Q9,n)}const ez=De("ZodArray",(n,e)=>{eF.init(n,e),ms.init(n,e),n.element=e.element,n.min=(t,s)=>n.check(Rh(t,s)),n.nonempty=t=>n.check(Rh(1,t)),n.max=(t,s)=>n.check($S(t,s)),n.length=(t,s)=>n.check(WS(t,s)),n.unwrap=()=>n.element});function oh(n,e){return i9(ez,n,e)}const tz=De("ZodObject",(n,e)=>{nF.init(n,e),ms.init(n,e),fn(n,"shape",()=>e.shape),n.keyof=()=>Qp(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:pb()}),n.loose=()=>n.clone({...n._zod.def,catchall:pb()}),n.strict=()=>n.clone({...n._zod.def,catchall:J9()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>wO(n,t),n.safeExtend=t=>SO(n,t),n.merge=t=>NO(n,t),n.pick=t=>vO(n,t),n.omit=t=>bO(n,t),n.partial=(...t)=>kO(VS,n,t[0]),n.required=(...t)=>jO(HS,n,t[0])});function gb(n,e){const t={type:"object",get shape(){return oo(this,"shape",n?mO(n):{}),this.shape},...yt(e)};return new tz(t)}const nz=De("ZodUnion",(n,e)=>{sF.init(n,e),ms.init(n,e),n.options=e.options});function sz(n,e){return new nz({type:"union",options:n,...yt(e)})}const iz=De("ZodIntersection",(n,e)=>{iF.init(n,e),ms.init(n,e)});function rz(n,e){return new iz({type:"intersection",left:n,right:e})}const Xp=De("ZodEnum",(n,e)=>{rF.init(n,e),ms.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(s,i)=>{const r={};for(const a of s)if(t.has(a))r[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Xp({...e,checks:[],...yt(i),entries:r})},n.exclude=(s,i)=>{const r={...e.entries};for(const a of s)if(t.has(a))delete r[a];else throw new Error(`Key ${a} not found in enum`);return new Xp({...e,checks:[],...yt(i),entries:r})}});function Qp(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(s=>[s,s])):n;return new Xp({type:"enum",entries:t,...yt(e)})}const az=De("ZodTransform",(n,e)=>{aF.init(n,e),ms.init(n,e),n._zod.parse=(t,s)=>{if(s.direction==="backward")throw new jS(n.constructor.name);t.addIssue=r=>{if(typeof r=="string")t.issues.push(Ad(r,t.value,e));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=t.value),a.inst??(a.inst=n),t.issues.push(Ad(a))}};const i=e.transform(t.value,t);return i instanceof Promise?i.then(r=>(t.value=r,t)):(t.value=i,t)}});function oz(n){return new az({type:"transform",transform:n})}const VS=De("ZodOptional",(n,e)=>{oF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType});function yb(n){return new VS({type:"optional",innerType:n})}const lz=De("ZodNullable",(n,e)=>{lF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType});function xb(n){return new lz({type:"nullable",innerType:n})}const cz=De("ZodDefault",(n,e)=>{cF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function dz(n,e){return new cz({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():AS(e)}})}const uz=De("ZodPrefault",(n,e)=>{dF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType});function hz(n,e){return new uz({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():AS(e)}})}const HS=De("ZodNonOptional",(n,e)=>{uF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType});function fz(n,e){return new HS({type:"nonoptional",innerType:n,...yt(e)})}const mz=De("ZodCatch",(n,e)=>{hF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function pz(n,e){return new mz({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const gz=De("ZodPipe",(n,e)=>{fF.init(n,e),ms.init(n,e),n.in=e.in,n.out=e.out});function vb(n,e){return new gz({type:"pipe",in:n,out:e})}const yz=De("ZodReadonly",(n,e)=>{mF.init(n,e),ms.init(n,e),n.unwrap=()=>n._zod.def.innerType});function xz(n){return new yz({type:"readonly",innerType:n})}const vz=De("ZodCustom",(n,e)=>{pF.init(n,e),ms.init(n,e)});function bz(n,e={}){return r9(vz,n,e)}function wz(n){return a9(n)}const ha=Hi,Jp=({className:n="",...e})=>l.jsx("textarea",{className:`block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ${n}`,...e}),ld=({children:n})=>l.jsx("div",{"data-select-root":!0,children:n}),cd=({value:n,onValueChange:e,children:t,className:s="",...i})=>l.jsx("select",{className:`mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ${s}`,value:n,onChange:r=>e?.(r.target.value),...i,children:t}),dd=({children:n})=>l.jsx(l.Fragment,{children:n}),js=({value:n,children:e,...t})=>l.jsx("option",{value:n,...t,children:e}),ud=({placeholder:n,value:e})=>l.jsx("span",{"data-select-value":!0,children:e??n??""}),GS=({children:n,className:e})=>l.jsx("div",{"data-tabs":!0,className:e,children:n}),YS=({children:n,className:e=""})=>l.jsx("div",{className:e,children:n}),Oh=({children:n,onClick:e,className:t=""})=>l.jsx("button",{type:"button",className:t,onClick:e,children:n}),Fh=({children:n,className:e=""})=>l.jsx("div",{className:e,children:n}),Dr=({className:n="",...e})=>l.jsx("label",{className:`text-sm font-medium ${n}`,...e}),Sz=gb({title:Ua().min(1,"Title is required").max(100,"Title too long"),description:Ua().max(500,"Description too long"),type:Qp(["pain_reduction","frequency_reduction","consistency","medication_adherence","activity_increase","sleep_improvement","mood_tracking","custom"]),priority:Qp(["low","medium","high","urgent"]),duration:ep().min(1).max(365),targetValue:ep().min(0),targetUnit:Ua().min(1),customFrequency:gb({interval:ep().min(1),reminderTime:Ua().optional()}).optional(),tags:oh(Ua()),motivation:Ua().max(200),obstacles:oh(Ua()),strategies:oh(Ua())}),Nz=({onSubmit:n,onCancel:e,initialData:t})=>{const[s,i]=W.useState(null),[r,a]=W.useState("templates"),[o,c]=W.useState(""),[d,u]=W.useState(""),[h,m]=W.useState(""),{register:f,handleSubmit:y,watch:x,setValue:v,formState:{errors:w}}=dO({resolver:d9(Sz),defaultValues:{title:t?.title||"",description:t?.description||"",type:t?.type||"custom",priority:t?.priority||"medium",duration:30,targetValue:0,targetUnit:"",tags:t?.tags||[],motivation:t?.motivation||"",obstacles:t?.obstacles||[],strategies:t?.strategies||[]}}),j=x("type"),C=x("tags"),N=x("obstacles"),P=x("strategies");W.useEffect(()=>{s&&(v("title",s.name),v("description",s.description),v("type",s.type),v("duration",s.duration),s.targets[0]&&(v("targetValue",s.targets[0].targetValue),v("targetUnit",s.targets[0].unit)))},[s,v]);const L=I=>{const J=new Date,se=new Date(J);se.setDate(J.getDate()+I.duration);const oe={userId:"current-user",title:I.title,description:I.description,type:I.type,status:"active",priority:I.priority,targets:[{metric:I.type==="pain_reduction"?"pain_level":"custom",targetValue:I.targetValue,currentValue:0,unit:I.targetUnit,comparison:I.type==="pain_reduction"?"percentage_decrease":"greater_than"}],startDate:J.toISOString(),endDate:se.toISOString(),frequency:"daily",customFrequency:I.customFrequency,milestones:s?.milestones.map(F=>({...F,id:`milestone_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isCompleted:!1}))||[],progress:[],tags:I.tags,isPublic:!1,motivation:I.motivation,obstacles:I.obstacles,strategies:I.strategies};n(oe)},M=()=>{o.trim()&&!C.includes(o.trim())&&(v("tags",[...C,o.trim()]),c(""))},T=I=>{v("tags",C.filter(J=>J!==I))},k=()=>{d.trim()&&!N.includes(d.trim())&&(v("obstacles",[...N,d.trim()]),u(""))},z=I=>{v("obstacles",N.filter(J=>J!==I))},_=()=>{h.trim()&&!P.includes(h.trim())&&(v("strategies",[...P,h.trim()]),m(""))},E=I=>{v("strategies",P.filter(J=>J!==I))},$=I=>{switch(I){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Create New Goal"}),l.jsx("p",{className:"text-gray-600",children:"Set meaningful goals to track your progress and stay motivated"})]}),l.jsxs(Yt,{variant:"outline",onClick:e,children:[l.jsx(ti,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}),l.jsxs(GS,{value:r,onValueChange:I=>a(I),children:[l.jsxs(YS,{className:"grid w-full grid-cols-2",children:[l.jsx(Oh,{value:"templates",children:"Use Template"}),l.jsx(Oh,{value:"custom",children:"Custom Goal"})]}),l.jsxs(Fh,{value:"templates",className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:mR.map(I=>l.jsxs(us,{className:`cursor-pointer transition-all ${s?.id===I.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>i(I),children:[l.jsxs(Js,{className:"pb-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(ei,{className:"text-lg",children:I.name}),l.jsx(ni,{className:$(I.difficulty),children:I.difficulty})]}),l.jsx("p",{className:"text-sm text-gray-600",children:I.description})]}),l.jsx(hs,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(pr,{className:"w-4 h-4 mr-2"}),I.duration," days"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(_s,{className:"w-4 h-4 mr-2"}),I.estimatedSuccess,"% success rate"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(zo,{className:"w-4 h-4 mr-2"}),I.milestones.length," milestones"]})]})})]},I.id))}),s&&l.jsxs(us,{className:"bg-blue-50 border-blue-200",children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center text-blue-800",children:[l.jsx(io,{className:"w-5 h-5 mr-2"}),"Selected: ",s.name]})}),l.jsx(hs,{children:l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Milestones:"}),l.jsx("div",{className:"space-y-2",children:s.milestones.map((I,J)=>l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx(Td,{className:"w-4 h-4 mr-2 text-yellow-500"}),I.title," - ",I.targetValue,s.targets[0]?.unit]},J))})]})})})]})]}),l.jsx(Fh,{value:"custom",className:"space-y-6",children:l.jsxs("form",{onSubmit:y(L),className:"space-y-6",children:[l.jsxs(us,{children:[l.jsx(Js,{children:l.jsx(ei,{children:"Basic Information"})}),l.jsxs(hs,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"title",children:"Goal Title *"}),l.jsx(ha,{id:"title",...f("title"),placeholder:"e.g., Reduce daily pain by 30%"}),w.title&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.title.message})]}),l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"type",children:"Goal Type"}),l.jsxs(ld,{value:j,onValueChange:I=>v("type",I),children:[l.jsx(cd,{children:l.jsx(ud,{})}),l.jsx(dd,{children:Object.entries(pR).map(([I,J])=>l.jsx(js,{value:I,children:J},I))})]})]})]}),l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"description",children:"Description"}),l.jsx(Jp,{id:"description",...f("description"),placeholder:"Describe your goal and what you hope to achieve...",rows:3}),w.description&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.description.message})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"priority",children:"Priority"}),l.jsxs(ld,{value:x("priority"),onValueChange:I=>v("priority",I),children:[l.jsx(cd,{children:l.jsx(ud,{})}),l.jsx(dd,{children:Object.entries(gR).map(([I,J])=>l.jsx(js,{value:I,children:J},I))})]})]}),l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"duration",children:"Duration (days)"}),l.jsx(ha,{id:"duration",type:"number",...f("duration",{valueAsNumber:!0}),min:"1",max:"365"})]}),l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"targetValue",children:"Target Value"}),l.jsx(ha,{id:"targetValue",type:"number",...f("targetValue",{valueAsNumber:!0}),min:"0"})]})]}),l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"targetUnit",children:"Target Unit"}),l.jsx(ha,{id:"targetUnit",...f("targetUnit"),placeholder:"e.g., %, points, minutes"})]})]})]}),l.jsxs(us,{children:[l.jsx(Js,{children:l.jsx(ei,{children:"Tags"})}),l.jsxs(hs,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ha,{value:o,onChange:I=>c(I.target.value),placeholder:"Add a tag...",onKeyPress:I=>I.key==="Enter"&&(I.preventDefault(),M())}),l.jsx(Yt,{type:"button",onClick:M,variant:"outline",children:l.jsx(Yi,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(I=>l.jsxs(ni,{variant:"secondary",className:"flex items-center gap-1",children:[I,l.jsx(ti,{className:"w-3 h-3 cursor-pointer",onClick:()=>T(I)})]},I))})]})]}),l.jsxs(us,{children:[l.jsx(Js,{children:l.jsx(ei,{children:"Motivation & Challenges"})}),l.jsxs(hs,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Dr,{htmlFor:"motivation",children:"What motivates you to achieve this goal?"}),l.jsx(Jp,{id:"motivation",...f("motivation"),placeholder:"e.g., I want to feel more in control of my health...",rows:2})]}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Potential Obstacles"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(ha,{value:d,onChange:I=>u(I.target.value),placeholder:"Add an obstacle...",onKeyPress:I=>I.key==="Enter"&&(I.preventDefault(),k())}),l.jsx(Yt,{type:"button",onClick:k,variant:"outline",children:l.jsx(Yi,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(I=>l.jsxs(ni,{variant:"destructive",className:"flex items-center gap-1",children:[I,l.jsx(ti,{className:"w-3 h-3 cursor-pointer",onClick:()=>z(I)})]},I))})]}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Strategies to Overcome Challenges"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(ha,{value:h,onChange:I=>m(I.target.value),placeholder:"Add a strategy...",onKeyPress:I=>I.key==="Enter"&&(I.preventDefault(),_())}),l.jsx(Yt,{type:"button",onClick:_,variant:"outline",children:l.jsx(Yi,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(I=>l.jsxs(ni,{variant:"default",className:"flex items-center gap-1",children:[I,l.jsx(ti,{className:"w-3 h-3 cursor-pointer",onClick:()=>E(I)})]},I))})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Yt,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(Yt,{type:"submit",children:[l.jsx(_s,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]})]})})]})]})},kz=({onCreateGoal:n,onEditGoal:e,onViewProgress:t})=>{const[s,i]=W.useState([]),[r,a]=W.useState([]),[o,c]=W.useState(!0),[d,u]=W.useState(""),[h,m]=W.useState("all"),[f,y]=W.useState("all"),[x,v]=W.useState("created");W.useEffect(()=>{w()},[]),W.useEffect(()=>{j()},[s,d,h,f,x]);const w=async()=>{try{const M=await Wr.getAllGoals();i(M)}catch(M){console.error("Failed to load goals:",M)}finally{c(!1)}},j=W.useCallback(()=>{let M=s.filter(T=>{const k=T.title.toLowerCase().includes(d.toLowerCase())||T.description.toLowerCase().includes(d.toLowerCase()),z=h==="all"||T.status===h,_=f==="all"||T.type===f;return k&&z&&_});M.sort((T,k)=>{switch(x){case"priority":{const z={urgent:4,high:3,medium:2,low:1};return z[k.priority]-z[T.priority]}case"progress":{const z=Xa.calculateProgressPercentage(T,[]);return Xa.calculateProgressPercentage(k,[])-z}case"due_date":{const z=T.endDate?new Date(T.endDate).getTime():1/0,_=k.endDate?new Date(k.endDate).getTime():1/0;return z-_}case"created":default:return new Date(k.createdAt).getTime()-new Date(T.createdAt).getTime()}}),a(M)},[s,d,h,f,x]),C=async(M,T)=>{try{const k=s.find(_=>_.id===M);if(!k)return;const z={...k,status:T,completedAt:T==="completed"?new Date().toISOString():void 0,updatedAt:new Date().toISOString()};await Wr.saveGoal(z),await w()}catch(k){console.error("Failed to update goal status:",k)}},N=async M=>{if(confirm("Are you sure you want to delete this goal? This action cannot be undone."))try{await Wr.deleteGoal(M),await w()}catch(T){console.error("Failed to delete goal:",T)}},P=M=>{switch(M){case"pain_reduction":return l.jsx(Fn,{className:"w-5 h-5 text-red-500"});case"consistency":return l.jsx(pr,{className:"w-5 h-5 text-blue-500"});case"medication_adherence":return l.jsx(Ur,{className:"w-5 h-5 text-green-500"});case"activity_increase":return l.jsx(_s,{className:"w-5 h-5 text-orange-500"});default:return l.jsx(Td,{className:"w-5 h-5 text-purple-500"})}},L=M=>{switch(M){case"completed":return l.jsx(io,{className:"w-4 h-4 text-green-500"});case"active":return l.jsx(ey,{className:"w-4 h-4 text-blue-500"});case"paused":return l.jsx(J0,{className:"w-4 h-4 text-yellow-500"});case"overdue":return l.jsx(wa,{className:"w-4 h-4 text-red-500"});default:return l.jsx(wa,{className:"w-4 h-4 text-gray-500"})}};return o?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"My Goals"}),l.jsx("p",{className:"text-gray-600",children:"Track your progress and stay motivated on your health journey"})]}),l.jsxs(Yt,{onClick:n,children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]}),l.jsx(us,{children:l.jsx(hs,{className:"pt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(u2,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l.jsx(ha,{placeholder:"Search goals...",value:d,onChange:M=>u(M.target.value),className:"pl-10"})]}),l.jsxs(ld,{value:h,onValueChange:m,children:[l.jsx(cd,{children:l.jsx(ud,{placeholder:"Filter by status"})}),l.jsxs(dd,{children:[l.jsx(js,{value:"all",children:"All Status"}),l.jsx(js,{value:"active",children:"Active"}),l.jsx(js,{value:"completed",children:"Completed"}),l.jsx(js,{value:"paused",children:"Paused"}),l.jsx(js,{value:"overdue",children:"Overdue"})]})]}),l.jsxs(ld,{value:f,onValueChange:y,children:[l.jsx(cd,{children:l.jsx(ud,{placeholder:"Filter by type"})}),l.jsxs(dd,{children:[l.jsx(js,{value:"all",children:"All Types"}),l.jsx(js,{value:"pain_reduction",children:"Pain Reduction"}),l.jsx(js,{value:"consistency",children:"Consistency"}),l.jsx(js,{value:"medication_adherence",children:"Medication"}),l.jsx(js,{value:"activity_increase",children:"Activity"}),l.jsx(js,{value:"custom",children:"Custom"})]})]}),l.jsxs(ld,{value:x,onValueChange:M=>v(M),children:[l.jsx(cd,{children:l.jsx(ud,{placeholder:"Sort by"})}),l.jsxs(dd,{children:[l.jsx(js,{value:"created",children:"Date Created"}),l.jsx(js,{value:"priority",children:"Priority"}),l.jsx(js,{value:"progress",children:"Progress"}),l.jsx(js,{value:"due_date",children:"Due Date"})]})]})]})})}),r.length===0?l.jsx(us,{className:"text-center py-12",children:l.jsxs(hs,{children:[l.jsx(_s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:s.length===0?"No goals yet":"No goals match your filters"}),l.jsx("p",{className:"text-gray-600 mb-4",children:s.length===0?"Create your first goal to start tracking your progress":"Try adjusting your search or filters"}),s.length===0&&l.jsxs(Yt,{onClick:n,children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Create Your First Goal"]})]})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(M=>{const T=Xa.calculateProgressPercentage(M,[]),k=yR(M),z=xR(M),_=vR(M.status);return l.jsxs(us,{className:"hover:shadow-lg transition-shadow",children:[l.jsx(Js,{className:"pb-3",children:l.jsx("div",{className:"flex items-start justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[P(M.type),l.jsxs("div",{children:[l.jsx(ei,{className:"text-lg line-clamp-2",children:M.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[L(M.status),l.jsx(ni,{className:_,children:M.status})]})]})]})})}),l.jsxs(hs,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Math.round(T),"%"]})]}),l.jsx(uf,{value:T,className:"h-2"})]}),M.targets[0]&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Target: ",bR(M.targets[0].targetValue,M.targets[0].unit)]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(pr,{className:"w-4 h-4"}),k===-1?"No deadline":k===0?"Due today":k>0?`${k} days left`:`${Math.abs(k)} days overdue`]}),z&&l.jsx(ni,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(ni,{variant:"outline",children:[M.priority," priority"]}),M.milestones.length>0&&l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[l.jsx(zo,{className:"w-4 h-4"}),M.milestones.filter(E=>E.isCompleted).length,"/",M.milestones.length]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs(Yt,{variant:"outline",size:"sm",onClick:()=>t(M),className:"flex-1",children:[l.jsx(es,{className:"w-4 h-4 mr-1"}),"Progress"]}),l.jsx(Yt,{variant:"outline",size:"sm",onClick:()=>e(M),children:l.jsx(N4,{className:"w-4 h-4"})}),M.status==="active"&&l.jsx(Yt,{variant:"outline",size:"sm",onClick:()=>C(M.id,"paused"),children:l.jsx(J0,{className:"w-4 h-4"})}),M.status==="paused"&&l.jsx(Yt,{variant:"outline",size:"sm",onClick:()=>C(M.id,"active"),children:l.jsx(ey,{className:"w-4 h-4"})}),l.jsx(Yt,{variant:"outline",size:"sm",onClick:()=>N(M.id),className:"text-red-600 hover:text-red-700",children:l.jsx(A4,{className:"w-4 h-4"})})]})]})]},M.id)})}),s.length>0&&l.jsxs(us,{children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center gap-2",children:[l.jsx(es,{className:"w-5 h-5"}),"Goal Summary"]})}),l.jsx(hs,{children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Goals"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(M=>M.status==="completed").length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(M=>M.status==="active").length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(s.reduce((M,T)=>{const k=Xa.calculateProgressPercentage(T,[]);return M+k},0)/s.length),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Avg Progress"})]})]})})]})]})},jz=({goal:n,onBack:e})=>{const[t,s]=W.useState([]),[i,r]=W.useState([]),[a,o]=W.useState(null),[c,d]=W.useState(!1),[u,h]=W.useState(""),[m,f]=W.useState(""),y=W.useCallback(async()=>{try{const L=await Wr.getGoalProgress(n.id),M=await Wr.getGoalMilestones(n.id),T=await yS.calculateGoalAnalytics(n,L);s(L),r(M),o(T)}catch(L){console.error("Failed to load progress data:",L)}},[n]);W.useEffect(()=>{y()},[n.id,y]);const x=async()=>{if(u.trim())try{const L=new Date().toISOString(),M={id:`progress_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,goalId:n.id,value:parseFloat(u),notes:m.trim()||void 0,timestamp:L,date:L,isManualEntry:!0};await Wr.saveGoalProgress(M),h(""),f(""),d(!1),await y()}catch(L){console.error("Failed to add progress:",L)}},v=L=>{switch(L){case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"abandoned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=L=>{switch(L){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs(us,{children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center gap-2",children:[l.jsx(_s,{className:"w-5 h-5"}),"Goal Details"]})}),l.jsxs(hs,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-lg",children:n.title}),l.jsx("p",{className:"text-gray-600 mt-1",children:n.description})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(ni,{className:v(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)}),l.jsxs(ni,{className:w(n.priority),children:[n.priority.charAt(0).toUpperCase()+n.priority.slice(1)," Priority"]}),l.jsx(ni,{variant:"outline",children:n.type.replace("_"," ").replace(/\b\w/g,L=>L.toUpperCase())})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Start Date:"}),l.jsx("div",{className:"font-medium",children:j(n.startDate)})]}),n.endDate&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"End Date:"}),l.jsx("div",{className:"font-medium",children:j(n.endDate)})]})]}),n.tags&&n.tags.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 text-sm",children:"Tags:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:n.tags.map((L,M)=>l.jsx(ni,{variant:"secondary",className:"text-xs",children:L},M))})]})]})]}),l.jsxs(us,{children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center gap-2",children:[l.jsx(es,{className:"w-5 h-5"}),"Progress Overview"]})}),l.jsx(hs,{className:"space-y-4",children:a&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{children:"Overall Progress"}),l.jsxs("span",{children:[Math.round(a.progressPercentage??0),"%"]})]}),l.jsx(uf,{value:a.progressPercentage??0,className:"h-3"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Current Streak:"}),l.jsxs("div",{className:"font-medium",children:[a.currentStreak," days"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Best Streak:"}),l.jsxs("div",{className:"font-medium",children:[a.bestStreak," days"]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total Entries:"}),l.jsx("div",{className:"font-medium",children:a.totalEntries})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Avg. Progress:"}),l.jsx("div",{className:"font-medium",children:a.averageProgress?Vt(a.averageProgress,1):"N/A"})]})]})]})})]})]}),N=()=>l.jsxs(us,{children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:"w-5 h-5"}),"Progress Entries"]}),l.jsxs(Yt,{onClick:()=>d(!0),size:"sm",disabled:n.status!=="active",children:[l.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Add Progress"]})]})}),l.jsxs(hs,{children:[c&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Add New Progress"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Progress Value"}),l.jsx(ha,{type:"number",placeholder:"Enter progress value",value:u,onChange:L=>h(L.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Notes (Optional)"}),l.jsx(Jp,{placeholder:"Add any notes about this progress...",value:m,onChange:L=>f(L.target.value),rows:3})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Yt,{onClick:x,size:"sm",children:"Save Progress"}),l.jsx(Yt,{variant:"outline",onClick:()=>{d(!1),h(""),f("")},size:"sm",children:"Cancel"})]})]})]}),t.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Fn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No progress entries yet"}),l.jsx("p",{className:"text-sm mt-1",children:"Start tracking your progress by adding your first entry!"})]}):l.jsx("div",{className:"space-y-3",children:t.sort((L,M)=>new Date(M.timestamp??M.date).getTime()-new Date(L.timestamp??L.date).getTime()).map(L=>l.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Fn,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium",children:["Progress: ",L.value]}),l.jsx("div",{className:"text-sm text-gray-600",children:j(L.timestamp??L.date)}),L.notes&&l.jsx("div",{className:"text-sm text-gray-700 mt-1",children:L.notes})]})]})},L.id))})]})]}),P=()=>l.jsxs(us,{children:[l.jsx(Js,{children:l.jsxs(ei,{className:"flex items-center gap-2",children:[l.jsx(zo,{className:"w-5 h-5"}),"Milestones"]})}),l.jsx(hs,{children:i.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(zo,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No milestones set"}),l.jsx("p",{className:"text-sm mt-1",children:"Milestones help you track significant achievements!"})]}):l.jsx("div",{className:"space-y-3",children:i.map(L=>l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${L.completed?"bg-green-100":"bg-gray-100"}`,children:L.completed?l.jsx(io,{className:"w-5 h-5 text-green-600"}):l.jsx(Ur,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:L.title}),l.jsx("div",{className:"text-sm text-gray-600",children:L.description}),L.targetDate&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Target: ",j(L.targetDate)]})]}),L.completed&&L.completedAt&&l.jsxs("div",{className:"text-xs text-green-600",children:["Completed ",j(L.completedAt)]})]},L.id))})})]});return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsxs(Yt,{variant:"ghost",onClick:e,children:[l.jsx(og,{className:"w-4 h-4 mr-2"}),"Back to Goals"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Goal Progress"}),l.jsx("p",{className:"text-gray-600",children:"Track and analyze your goal progress"})]})]}),C(),l.jsxs(GS,{defaultValue:"progress",className:"w-full",children:[l.jsxs(YS,{className:"grid w-full grid-cols-2",children:[l.jsx(Oh,{value:"progress",children:"Progress Tracking"}),l.jsx(Oh,{value:"milestones",children:"Milestones"})]}),l.jsx(Fh,{value:"progress",className:"mt-6",children:N()}),l.jsx(Fh,{value:"milestones",className:"mt-6",children:P()})]})]})},_z=({onClose:n,className:e=""})=>{const[t,s]=W.useState("list"),[i,r]=W.useState(null),[a,o]=W.useState(null),[c,d]=W.useState(null),u=async v=>{try{d(null);const w={...v,id:`goal_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Wr.saveGoal(w),s("list")}catch(w){console.error("Failed to create goal:",w),d("Failed to create goal. Please try again.")}},h=v=>{o(v),s("create")},m=v=>{r(v),s("progress")},f=()=>{s("list"),r(null),o(null),d(null)},y=()=>l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[t!=="list"&&l.jsxs(Yt,{variant:"ghost",size:"sm",onClick:f,children:[l.jsx(og,{className:"w-4 h-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[l.jsx(_s,{className:"w-8 h-8 text-blue-600"}),"Goal Management"]}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Set, track, and achieve your health and wellness goals"})]})]}),n&&l.jsx(Yt,{variant:"outline",onClick:n,children:"Close"})]}),x=()=>{switch(t){case"create":return l.jsx(Nz,{onSubmit:u,onCancel:f,initialData:a||void 0});case"progress":return i?l.jsx(jz,{goal:i,onBack:f}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{children:"No goal selected"}),l.jsx(Yt,{onClick:f,className:"mt-4",children:"Back to Goals"})]});case"list":default:return l.jsx(kz,{onCreateGoal:()=>s("create"),onEditGoal:h,onViewProgress:m})}};return l.jsxs("div",{className:`max-w-7xl mx-auto ${e}`,children:[y(),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-red-800",children:c})}),l.jsx("div",{className:"ml-auto pl-3",children:l.jsxs("button",{onClick:()=>d(null),className:"inline-flex rounded-md p-1.5 text-red-400 hover:bg-red-100 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[l.jsx("span",{className:"sr-only",children:"Dismiss"}),l.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),x()]})},Cz=({isOpen:n,onClose:e})=>l.jsx(Kh,{isOpen:n,onClose:e,size:"xl",children:l.jsx(_z,{onClose:e})}),Az={threshold:50,velocity:.3,restorePosition:!0,preventDefault:!0};function ZS(n={},e={}){const t={...Az,...n},s=W.useRef(null),[i,r]=W.useState({isSwiping:!1,direction:null,distance:0,velocity:0}),a=W.useRef(null);W.useRef();const o=W.useCallback((m,f)=>{const y=Math.abs(m),x=Math.abs(f);return y>x?m>0?"right":"left":f>0?"down":"up"},[]),c=W.useCallback((m,f)=>Math.abs(m)/Math.max(f,1),[]),d=W.useCallback(m=>{t.preventDefault&&m.preventDefault();const f=m.touches[0];a.current={x:f.clientX,y:f.clientY,time:Date.now()},r({isSwiping:!0,direction:null,distance:0,velocity:0}),e.onSwipeStart?.(i)},[t.preventDefault,i,e]),u=W.useCallback(m=>{if(!a.current)return;t.preventDefault&&m.preventDefault();const f=m.touches[0],y=f.clientX-a.current.x,x=f.clientY-a.current.y,v=Math.sqrt(y*y+x*x),w=o(y,x),j=Date.now()-a.current.time,C=c(v,j),N={isSwiping:!0,direction:w,distance:v,velocity:C};r(N),e.onSwipeMove?.(N)},[t.preventDefault,o,c,e]),h=W.useCallback(m=>{if(!a.current)return;const f=m.changedTouches[0],y=f.clientX-a.current.x,x=f.clientY-a.current.y,v=Math.sqrt(y*y+x*x),w=o(y,x),j=Date.now()-a.current.time,C=c(v,j),N={isSwiping:!1,direction:w,distance:v,velocity:C};if(v>=t.threshold&&C>=t.velocity)switch(w){case"left":e.onSwipeLeft?.(v,C);break;case"right":e.onSwipeRight?.(v,C);break;case"up":e.onSwipeUp?.(v,C);break;case"down":e.onSwipeDown?.(v,C);break}r(N),e.onSwipeEnd?.(N),a.current=null},[o,c,t.threshold,t.velocity,e]);return W.useEffect(()=>{const m=s.current;if(m)return m.addEventListener("touchstart",d,{passive:!1}),m.addEventListener("touchmove",u,{passive:!1}),m.addEventListener("touchend",h,{passive:!1}),()=>{m.removeEventListener("touchstart",d),m.removeEventListener("touchmove",u),m.removeEventListener("touchend",h)}},[d,u,h]),{ref:s,swipeState:i,isSwiping:i.isSwiping,direction:i.direction,distance:i.distance,velocity:i.velocity}}function Pz(n,e={}){const{pullThreshold:t=80}=e,[s,i]=W.useState(!1),[r,a]=W.useState(0);return{...ZS({threshold:10,velocity:.1,...e},{onSwipeMove:c=>{c.direction==="down"&&!s&&a(Math.max(0,c.distance))},onSwipeEnd:async c=>{if(c.direction==="down"&&c.distance>=t&&!s){i(!0),a(0);try{await n()}finally{i(!1)}}else a(0)}}),isRefreshing:s,pullDistance:r,pullProgress:Math.min(r/t,1)}}function Lz({onRefresh:n,children:e,className:t,threshold:s=80,disabled:i=!1,pullText:r="Pull to refresh",refreshingText:a="Refreshing...",releaseText:o="Release to refresh"}){const[c,d]=W.useState(!1),u=W.useCallback(async()=>{d(!0);try{await n()}finally{d(!1)}},[n]),{ref:h,pullDistance:m,pullProgress:f,isRefreshing:y}=Pz(u,{pullThreshold:s}),x=c||y,v=m>10&&!x;return l.jsxs("div",{ref:h,className:Ye("relative overflow-hidden",t),style:{transform:v?`translateY(${Math.min(m*.5,s)}px)`:void 0,transition:v?"none":"transform 0.3s ease"},children:[v&&l.jsx("div",{className:"pull-refresh-indicator",style:{opacity:Math.min(f,1),transform:`translateX(-50%) rotate(${f*180}deg)`},children:l.jsx(fh,{className:"w-5 h-5"})}),x&&l.jsx("div",{className:"pull-refresh-indicator refreshing",children:l.jsx("div",{className:"spinner"})}),l.jsx("div",{className:Ye("transition-transform duration-300 ease-out",x&&"pointer-events-none"),style:{transform:x?`translateY(${s}px)`:void 0},children:e}),l.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:x?a:f>=1?o:f>0?r:""})]})}function Mz({onRefresh:n,children:e,className:t,lastRefresh:s}){const i=W.useCallback(async()=>{"vibrate"in navigator&&navigator.vibrate(50),await n()},[n]);return l.jsxs(Lz,{onRefresh:i,className:t,pullText:"Pull down to refresh data",refreshingText:"Refreshing your pain data...",releaseText:"Release to refresh",children:[e,s&&l.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2 border-t",children:["Last updated: ",s.toLocaleTimeString()]})]})}var tp={exports:{}},np,bb;function Tz(){if(bb)return np;bb=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return np=n,np}var sp,wb;function Dz(){if(wb)return sp;wb=1;var n=Tz();function e(){}function t(){}return t.resetWarningCache=e,sp=function(){function s(a,o,c,d,u,h){if(h!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function i(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},sp}var Sb;function Ez(){return Sb||(Sb=1,tp.exports=Dz()()),tp.exports}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var KS=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],zh=KS.join(","),XS=typeof Element>"u",Ho=XS?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,eg=!XS&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},QS=function(e,t,s){var i=Array.prototype.slice.apply(e.querySelectorAll(zh));return t&&Ho.call(e,zh)&&i.unshift(e),i=i.filter(s),i},JS=function n(e,t,s){for(var i=[],r=Array.from(e);r.length;){var a=r.shift();if(a.tagName==="SLOT"){var o=a.assignedElements(),c=o.length?o:a.children,d=n(c,!0,s);s.flatten?i.push.apply(i,d):i.push({scope:a,candidates:d})}else{var u=Ho.call(a,zh);u&&s.filter(a)&&(t||!e.includes(a))&&i.push(a);var h=a.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(a),m=!s.shadowRootFilter||s.shadowRootFilter(a);if(h&&m){var f=n(h===!0?a.children:h.children,!0,s);s.flatten?i.push.apply(i,f):i.push({scope:a,candidates:f})}else r.unshift.apply(r,a.children)}}return i},eN=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},Iz=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},tN=function(e){return e.tagName==="INPUT"},Rz=function(e){return tN(e)&&e.type==="hidden"},Oz=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return t},Fz=function(e,t){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===t)return e[s]},zz=function(e){if(!e.name)return!0;var t=e.form||eg(e),s=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=s(window.CSS.escape(e.name));else try{i=s(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var r=Fz(i,e.form);return!r||r===e},Bz=function(e){return tN(e)&&e.type==="radio"},$z=function(e){return Bz(e)&&!zz(e)},Nb=function(e){var t=e.getBoundingClientRect(),s=t.width,i=t.height;return s===0&&i===0},Wz=function(e,t){var s=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=Ho.call(e,"details>summary:first-of-type"),a=r?e.parentElement:e;if(Ho.call(a,"details:not([open]) *"))return!0;var o=eg(e).host,c=o?.ownerDocument.contains(o)||e.ownerDocument.contains(e);if(!s||s==="full"){if(typeof i=="function"){for(var d=e;e;){var u=e.parentElement,h=eg(e);if(u&&!u.shadowRoot&&i(u)===!0)return Nb(e);e.assignedSlot?e=e.assignedSlot:!u&&h!==e.ownerDocument?e=h.host:e=u}e=d}if(c)return!e.getClientRects().length}else if(s==="non-zero-area")return Nb(e);return!1},Uz=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var s=0;s<t.children.length;s++){var i=t.children.item(s);if(i.tagName==="LEGEND")return Ho.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Bh=function(e,t){return!(t.disabled||Rz(t)||Wz(t,e)||Oz(t)||Uz(t))},tg=function(e,t){return!($z(t)||eN(t)<0||!Bh(e,t))},qz=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Vz=function n(e){var t=[],s=[];return e.forEach(function(i,r){var a=!!i.scope,o=a?i.scope:i,c=eN(o,a),d=a?n(i.candidates):o;c===0?a?t.push.apply(t,d):t.push(o):s.push({documentOrder:r,tabIndex:c,item:i,isScope:a,content:d})}),s.sort(Iz).reduce(function(i,r){return r.isScope?i.push.apply(i,r.content):i.push(r.content),i},[]).concat(t)},nN=function(e,t){t=t||{};var s;return t.getShadowRoot?s=JS([e],t.includeContainer,{filter:tg.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:qz}):s=QS(e,t.includeContainer,tg.bind(null,t)),Vz(s)},sN=function(e,t){t=t||{};var s;return t.getShadowRoot?s=JS([e],t.includeContainer,{filter:Bh.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):s=QS(e,t.includeContainer,Bh.bind(null,t)),s},Kc=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ho.call(e,zh)===!1?!1:tg(t,e)},Hz=KS.concat("iframe").join(","),lh=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ho.call(e,Hz)===!1?!1:Bh(t,e)};const Gz=Object.freeze(Object.defineProperty({__proto__:null,focusable:sN,isFocusable:lh,isTabbable:Kc,tabbable:nN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function kb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function jb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kb(Object(t),!0).forEach(function(s){Yz(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kb(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Yz(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _b=(function(){var n=[];return{activateTrap:function(t){if(n.length>0){var s=n[n.length-1];s!==t&&s.pause()}var i=n.indexOf(t);i===-1||n.splice(i,1),n.push(t)},deactivateTrap:function(t){var s=n.indexOf(t);s!==-1&&n.splice(s,1),n.length>0&&n[n.length-1].unpause()}}})(),Zz=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Kz=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Xz=function(e){return e.key==="Tab"||e.keyCode===9},Cb=function(e){return setTimeout(e,0)},Ab=function(e,t){var s=-1;return e.every(function(i,r){return t(i)?(s=r,!1):!0}),s},$c=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,s):e},Hu=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Qz=function(e,t){var s=t?.document||document,i=jb({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,o=function(L,M,T){return L&&L[M]!==void 0?L[M]:i[T||M]},c=function(L){return r.containerGroups.findIndex(function(M){var T=M.container,k=M.tabbableNodes;return T.contains(L)||k.find(function(z){return z===L})})},d=function(L){var M=i[L];if(typeof M=="function"){for(var T=arguments.length,k=new Array(T>1?T-1:0),z=1;z<T;z++)k[z-1]=arguments[z];M=M.apply(void 0,k)}if(M===!0&&(M=void 0),!M){if(M===void 0||M===!1)return M;throw new Error("`".concat(L,"` was specified but was not a node, or did not return a node"))}var _=M;if(typeof M=="string"&&(_=s.querySelector(M),!_))throw new Error("`".concat(L,"` as selector refers to no known node"));return _},u=function(){var L=d("initialFocus");if(L===!1)return!1;if(L===void 0)if(c(s.activeElement)>=0)L=s.activeElement;else{var M=r.tabbableGroups[0],T=M&&M.firstTabbableNode;L=T||d("fallbackFocus")}if(!L)throw new Error("Your focus-trap needs to have at least one focusable element");return L},h=function(){if(r.containerGroups=r.containers.map(function(L){var M=nN(L,i.tabbableOptions),T=sN(L,i.tabbableOptions);return{container:L,tabbableNodes:M,focusableNodes:T,firstTabbableNode:M.length>0?M[0]:null,lastTabbableNode:M.length>0?M[M.length-1]:null,nextTabbableNode:function(z){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,E=T.findIndex(function($){return $===z});if(!(E<0))return _?T.slice(E+1).find(function($){return Kc($,i.tabbableOptions)}):T.slice(0,E).reverse().find(function($){return Kc($,i.tabbableOptions)})}}}),r.tabbableGroups=r.containerGroups.filter(function(L){return L.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},m=function P(L){if(L!==!1&&L!==s.activeElement){if(!L||!L.focus){P(u());return}L.focus({preventScroll:!!i.preventScroll}),r.mostRecentlyFocusedNode=L,Zz(L)&&L.select()}},f=function(L){var M=d("setReturnFocus",L);return M||(M===!1?!1:L)},y=function(L){var M=Hu(L);if(!(c(M)>=0)){if($c(i.clickOutsideDeactivates,L)){a.deactivate({returnFocus:i.returnFocusOnDeactivate&&!lh(M,i.tabbableOptions)});return}$c(i.allowOutsideClick,L)||L.preventDefault()}},x=function(L){var M=Hu(L),T=c(M)>=0;T||M instanceof Document?T&&(r.mostRecentlyFocusedNode=M):(L.stopImmediatePropagation(),m(r.mostRecentlyFocusedNode||u()))},v=function(L){var M=Hu(L);h();var T=null;if(r.tabbableGroups.length>0){var k=c(M),z=k>=0?r.containerGroups[k]:void 0;if(k<0)L.shiftKey?T=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:T=r.tabbableGroups[0].firstTabbableNode;else if(L.shiftKey){var _=Ab(r.tabbableGroups,function(oe){var F=oe.firstTabbableNode;return M===F});if(_<0&&(z.container===M||lh(M,i.tabbableOptions)&&!Kc(M,i.tabbableOptions)&&!z.nextTabbableNode(M,!1))&&(_=k),_>=0){var E=_===0?r.tabbableGroups.length-1:_-1,$=r.tabbableGroups[E];T=$.lastTabbableNode}}else{var I=Ab(r.tabbableGroups,function(oe){var F=oe.lastTabbableNode;return M===F});if(I<0&&(z.container===M||lh(M,i.tabbableOptions)&&!Kc(M,i.tabbableOptions)&&!z.nextTabbableNode(M))&&(I=k),I>=0){var J=I===r.tabbableGroups.length-1?0:I+1,se=r.tabbableGroups[J];T=se.firstTabbableNode}}}else T=d("fallbackFocus");T&&(L.preventDefault(),m(T))},w=function(L){if(Kz(L)&&$c(i.escapeDeactivates,L)!==!1){L.preventDefault(),a.deactivate();return}if(Xz(L)){v(L);return}},j=function(L){var M=Hu(L);c(M)>=0||$c(i.clickOutsideDeactivates,L)||$c(i.allowOutsideClick,L)||(L.preventDefault(),L.stopImmediatePropagation())},C=function(){if(r.active)return _b.activateTrap(a),r.delayInitialFocusTimer=i.delayInitialFocus?Cb(function(){m(u())}):m(u()),s.addEventListener("focusin",x,!0),s.addEventListener("mousedown",y,{capture:!0,passive:!1}),s.addEventListener("touchstart",y,{capture:!0,passive:!1}),s.addEventListener("click",j,{capture:!0,passive:!1}),s.addEventListener("keydown",w,{capture:!0,passive:!1}),a},N=function(){if(r.active)return s.removeEventListener("focusin",x,!0),s.removeEventListener("mousedown",y,!0),s.removeEventListener("touchstart",y,!0),s.removeEventListener("click",j,!0),s.removeEventListener("keydown",w,!0),a};return a={get active(){return r.active},get paused(){return r.paused},activate:function(L){if(r.active)return this;var M=o(L,"onActivate"),T=o(L,"onPostActivate"),k=o(L,"checkCanFocusTrap");k||h(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=s.activeElement,M&&M();var z=function(){k&&h(),C(),T&&T()};return k?(k(r.containers.concat()).then(z,z),this):(z(),this)},deactivate:function(L){if(!r.active)return this;var M=jb({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},L);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,N(),r.active=!1,r.paused=!1,_b.deactivateTrap(a);var T=o(M,"onDeactivate"),k=o(M,"onPostDeactivate"),z=o(M,"checkCanReturnFocus"),_=o(M,"returnFocus","returnFocusOnDeactivate");T&&T();var E=function(){Cb(function(){_&&m(f(r.nodeFocusedBeforeActivation)),k&&k()})};return _&&z?(z(f(r.nodeFocusedBeforeActivation)).then(E,E),this):(E(),this)},pause:function(){return r.paused||!r.active?this:(r.paused=!0,N(),this)},unpause:function(){return!r.paused||!r.active?this:(r.paused=!1,h(),C(),this)},updateContainerElements:function(L){var M=[].concat(L).filter(Boolean);return r.containers=M.map(function(T){return typeof T=="string"?s.querySelector(T):T}),r.active&&h(),this}},a.updateContainerElements(e),a};const Jz=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Qz},Symbol.toStringTag,{value:"Module"})),eB=t2(Jz),tB=t2(Gz);var ip,Pb;function nB(){if(Pb)return ip;Pb=1;function n(N){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},n(N)}function e(N,P){if(!(N instanceof P))throw new TypeError("Cannot call a class as a function")}function t(N,P){for(var L=0;L<P.length;L++){var M=P[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(N,M.key,M)}}function s(N,P,L){return P&&t(N.prototype,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function i(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(P&&P.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),P&&r(N,P)}function r(N,P){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,T){return M.__proto__=T,M},r(N,P)}function a(N){var P=d();return function(){var M=u(N),T;if(P){var k=u(this).constructor;T=Reflect.construct(M,arguments,k)}else T=M.apply(this,arguments);return o(this,T)}}function o(N,P){if(P&&(n(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(N)}function c(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(N){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(L){return L.__proto__||Object.getPrototypeOf(L)},u(N)}function h(N,P,L){return P in N?Object.defineProperty(N,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):N[P]=L,N}var m=e2(),f=Ez(),y=eB,x=y.createFocusTrap,v=tB,w=v.isFocusable,j=(function(N){i(L,N);var P=a(L);function L(M){var T;e(this,L),T=P.call(this,M),h(c(T),"getNodeForOption",function(_){var E,$=(E=this.internalOptions[_])!==null&&E!==void 0?E:this.originalOptions[_];if(typeof $=="function"){for(var I=arguments.length,J=new Array(I>1?I-1:0),se=1;se<I;se++)J[se-1]=arguments[se];$=$.apply(void 0,J)}if($===!0&&($=void 0),!$){if($===void 0||$===!1)return $;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var oe=$;if(typeof $=="string"){var F;if(oe=(F=this.getDocument())===null||F===void 0?void 0:F.querySelector($),!oe)throw new Error("`".concat(_,"` as selector refers to no known node"))}return oe}),T.handleDeactivate=T.handleDeactivate.bind(c(T)),T.handlePostDeactivate=T.handlePostDeactivate.bind(c(T)),T.handleClickOutsideDeactivates=T.handleClickOutsideDeactivates.bind(c(T)),T.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:T.handleDeactivate,onPostDeactivate:T.handlePostDeactivate,clickOutsideDeactivates:T.handleClickOutsideDeactivates},T.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var k=M.focusTrapOptions;for(var z in k)if(Object.prototype.hasOwnProperty.call(k,z)){if(z==="returnFocusOnDeactivate"||z==="onDeactivate"||z==="onPostDeactivate"||z==="checkCanReturnFocus"||z==="clickOutsideDeactivates"){T.originalOptions[z]=k[z];continue}T.internalOptions[z]=k[z]}return T.outsideClick=null,T.focusTrapElements=M.containerElements||[],T.updatePreviousElement(),T}return s(L,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var T=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return T||(T===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var T=this.getDocument();T&&(this.previouslyFocusedElement=T.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(T){var k=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,T):this.originalOptions.clickOutsideDeactivates;return k&&(this.outsideClick={target:T.target,allowDeactivation:k}),k}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var T=this,k=function(){var _=T.getReturnFocusNode(),E=!!(T.originalOptions.returnFocusOnDeactivate&&_!==null&&_!==void 0&&_.focus&&(!T.outsideClick||T.outsideClick.allowDeactivation&&!w(T.outsideClick.target,T.internalOptions.tabbableOptions))),$=T.internalOptions.preventScroll,I=$===void 0?!1:$;E&&_.focus({preventScroll:I}),T.originalOptions.onPostDeactivate&&T.originalOptions.onPostDeactivate.call(null),T.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(k,k):k()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var T=this.focusTrapElements.some(Boolean);T&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(T){if(this.focusTrap){T.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var k=!T.active&&this.props.active,z=T.active&&!this.props.active,_=!T.paused&&this.props.paused,E=T.paused&&!this.props.paused;if(k&&(this.updatePreviousElement(),this.focusTrap.activate()),z){this.deactivateTrap();return}_&&this.focusTrap.pause(),E&&this.focusTrap.unpause()}else T.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var T=this,k=this.props.children?m.Children.only(this.props.children):void 0;if(k){if(k.type&&k.type===m.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var z=function($){var I=T.props.containerElements;k&&(typeof k.ref=="function"?k.ref($):k.ref&&(k.ref.current=$)),T.focusTrapElements=I||[$]},_=m.cloneElement(k,{ref:z});return _}return null}}]),L})(m.Component),C=typeof Element>"u"?Function:Element;return j.propTypes={active:f.bool,paused:f.bool,focusTrapOptions:f.shape({document:f.object,onActivate:f.func,onPostActivate:f.func,checkCanFocusTrap:f.func,onDeactivate:f.func,onPostDeactivate:f.func,checkCanReturnFocus:f.func,initialFocus:f.oneOfType([f.instanceOf(C),f.string,f.bool,f.func]),fallbackFocus:f.oneOfType([f.instanceOf(C),f.string,f.func]),escapeDeactivates:f.oneOfType([f.bool,f.func]),clickOutsideDeactivates:f.oneOfType([f.bool,f.func]),returnFocusOnDeactivate:f.bool,setReturnFocus:f.oneOfType([f.instanceOf(C),f.string,f.bool,f.func]),allowOutsideClick:f.oneOfType([f.bool,f.func]),preventScroll:f.bool,tabbableOptions:f.shape({displayCheck:f.oneOf(["full","non-zero-area","none"]),getShadowRoot:f.oneOfType([f.bool,f.func])})}),containerElements:f.arrayOf(f.instanceOf(C)),children:f.oneOfType([f.element,f.instanceOf(C)])},j.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:x},ip=j,ip}var sB=nB();const Qg=ag(sB),zd="pain-tracker:alerts-log";function hd(){try{const n=localStorage.getItem(zd);return n?JSON.parse(n):[]}catch{return[]}}function iN(n){try{const e=hd();e.unshift(n),localStorage.setItem(zd,JSON.stringify(e.slice(0,50))),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function iB(){try{localStorage.removeItem(zd),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function rB(n){try{const e=hd().filter(t=>t.id!==n);localStorage.setItem(zd,JSON.stringify(e)),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}}function aB({variant:n="overlay",className:e}){const[t,s]=W.useState(()=>hd()),[i,r]=W.useState(!1),[a,o]=W.useState(null),[c,d]=W.useState(!1),u=W.useRef(null),h=W.useRef(null),[m,f]=W.useState(!1),y=W.useRef(null),x=W.useRef(null),[v,w]=W.useState(!1);W.useEffect(()=>{const $=()=>s(hd());return window.addEventListener("alerts-log-updated",$),()=>window.removeEventListener("alerts-log-updated",$)},[]),W.useEffect(()=>()=>{u.current&&window.clearTimeout(u.current)},[]),W.useEffect(()=>{const $=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(m){if(x.current=document.activeElement,$){w(!0);return}w(!1);const I=window.setTimeout(()=>w(!0),10);return()=>window.clearTimeout(I)}w(!1);try{x.current?.focus()}catch{}},[m]);function j($){try{const I=new Date($).getTime(),J=Date.now()-I,se=Math.floor(J/1e3);if(se<60)return`${se}s ago`;const oe=Math.floor(se/60);if(oe<60)return`${oe}m ago`;const F=Math.floor(oe/60);return F<24?`${F}h ago`:`${Math.floor(F/24)}d ago`}catch{return new Date($).toLocaleString()}}const C=t.length>0,N=()=>{f(!1),r(!1)},P=()=>{if(a){try{localStorage.setItem(zd,JSON.stringify(a)),window.dispatchEvent(new Event("alerts-log-updated")),s(a)}catch{}o(null),d(!1),u.current&&(window.clearTimeout(u.current),u.current=null)}},L=()=>{u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{d(!1),o(null),u.current=null},6e3)},M=()=>{const $=hd();o($),iB(),s([]),r(!1),d(!0),L(),window.setTimeout(()=>{h.current?.focus()},10)},T=$=>{let I=!0;if(typeof window<"u"&&typeof window.confirm=="function")try{I=window.confirm("Acknowledge this alert?")}catch{I=!0}I&&(rB($),s(J=>J.filter(se=>se.id!==$)))},k=()=>l.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-card p-4 rounded max-w-sm w-full border shadow-lg",children:[l.jsx("div",{className:"font-medium mb-2",children:"Clear all alerts?"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You can undo within a few seconds."}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{onClick:()=>r(!1),className:"px-3 py-1 text-sm",children:"Cancel"}),l.jsx("button",{onClick:M,className:"px-3 py-1 bg-destructive text-destructive-foreground rounded text-sm",children:"Yes, clear"})]})]})}),z=$=>{if(!c||!a)return null;const I=$==="inline"?"rounded-md border border-primary/40 bg-primary/10 p-3 text-xs flex items-center justify-between":"mt-4 p-3 rounded-md bg-primary/10 border border-primary/40 text-xs flex items-center justify-between";return l.jsxs("div",{className:I,role:"status","aria-live":"polite",children:[l.jsx("span",{children:"Alerts cleared."}),l.jsx("button",{onClick:P,className:"underline",children:"Undo"})]})},_=$=>{const{limit:I,context:J="overlay"}=$??{},se=typeof I=="number"?t.slice(0,I):t;return se.length===0?J==="inline"?l.jsx("div",{className:"rounded-lg border border-dashed py-6 text-center text-sm text-muted-foreground",role:"status","aria-live":"polite",tabIndex:-1,ref:h,children:"No recent alerts"}):l.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[l.jsx("div",{className:"text-sm text-muted-foreground",tabIndex:-1,ref:h,children:"No recent alerts"}),l.jsx("button",{className:"mt-2 px-3 py-1 rounded bg-muted text-foreground text-sm border",onClick:N,autoFocus:!0,children:"Close"})]}):J==="inline"?l.jsx("ul",{className:"space-y-3 text-sm",children:se.map(oe=>l.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-md border border-border/60 bg-card/80 p-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-medium text-foreground",children:oe.message}),l.jsx("div",{className:"text-xs text-muted-foreground",children:j(oe.time)})]}),l.jsx("button",{className:"btn btn-xs",onClick:()=>T(oe.id),children:"Acknowledge"})]},oe.id))}):l.jsx("ul",{className:"text-sm space-y-2",children:se.map(oe=>l.jsx("li",{className:"border rounded p-2",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:oe.message}),l.jsx("div",{className:"text-muted-foreground text-xs","aria-label":new Date(oe.time).toLocaleString(),children:j(oe.time)})]}),l.jsx("div",{className:"ml-3 flex flex-col items-end",children:l.jsx("button",{onClick:()=>T(oe.id),className:"text-xs text-foreground/80 hover:underline",children:"Acknowledge"})})]})},oe.id))})},E=()=>m?l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:N}),l.jsx(Qg,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:N},children:l.jsxs("div",{ref:y,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-all duration-200 ${v?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,style:typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?{transitionTimingFunction:"linear"}:void 0,children:[l.jsx("button",{id:"__alerts-focus-anchor",tabIndex:0,onFocus:()=>{},style:{position:"absolute",left:"-9999px",width:1,height:1,margin:0,padding:0,border:0}}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Recent Alerts"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{className:"text-xs text-foreground/80 hover:underline mr-2",onClick:()=>r(!0),"aria-haspopup":"dialog",children:"Clear all"}),l.jsx("button",{className:"btn btn-sm",onClick:N,children:"Close"})]})]}),_({context:"overlay"}),z("overlay"),i&&k()]})})]}):null;return n==="inline"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:Ye("rounded-lg border bg-muted/30 p-4 space-y-4 text-sm",e),children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-foreground",children:"Recent alerts"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Review the latest safety notices and acknowledge them."})]}),C&&l.jsx("span",{className:"rounded-full bg-destructive/10 px-2 py-0.5 text-xs text-destructive",children:t.length})]}),_({limit:4,context:"inline"}),z("inline"),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[C?l.jsxs("span",{children:["Last update ",j(t[0].time)]}):l.jsx("span",{children:"Alerts appear here instantly."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-xs btn-outline",onClick:()=>f(!0),children:"Manage"}),C&&l.jsx("button",{className:"btn btn-xs",onClick:()=>r(!0),children:"Clear"})]})]})]}),E(),i&&!m&&k()]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsxs("button",{onClick:()=>f(!0),className:"relative bg-white border rounded-md px-3 py-2 shadow-sm text-sm flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:l.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V5.178C16.39 6.006 18 8.388 18 11V16L20 18V19H4V18L6 16V11C6 8.388 7.61 6.006 10 5.178V4C10 2.89543 10.8954 2 12 2Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"})}),"Recent Alerts",C&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs rounded-full px-2",children:t.length}),C&&l.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:j(t[0].time)})]})}),E()]})}function Lb({id:n,type:e,title:t,message:s,duration:i=5e3,action:r,customOnDismiss:a,onDismiss:o}){const[c,d]=W.useState(!0),[u,h]=W.useState(!1),m=W.useCallback(()=>{h(!0),setTimeout(()=>{d(!1),o(n),a?.()},150)},[n,o,a]);W.useEffect(()=>{if(i>0){const x=setTimeout(()=>{m()},i);return()=>clearTimeout(x)}},[i,m]);const f=()=>{switch(e){case"success":return l.jsx(io,{className:"h-5 w-5 text-green-600"});case"error":return l.jsx(pj,{className:"h-5 w-5 text-red-600"});case"warning":return l.jsx(Vh,{className:"h-5 w-5 text-yellow-600"});case"info":return l.jsx(hh,{className:"h-5 w-5 text-blue-600"});default:return l.jsx(hh,{className:"h-5 w-5 text-blue-600"})}},y=()=>{switch(e){case"success":return"bg-green-50 border-green-200 dark:bg-green-950/30 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950/30 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/30 dark:border-yellow-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950/30 dark:border-blue-800";default:return"bg-card border-border"}};return c?l.jsx("div",{className:`
        pointer-events-auto w-full max-w-sm rounded-lg border p-4 shadow-lg
        transition-all duration-150 ease-in-out
        ${y()}
        ${u?"opacity-0 transform translate-x-full":"opacity-100 transform translate-x-0"}
      `,role:"alert","aria-live":"polite",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0",children:f()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-semibold text-foreground",children:t}),s&&l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s}),r&&l.jsx("button",{onClick:r.onClick,className:"text-sm font-medium text-primary hover:text-primary/80 mt-2 block",children:r.label})]}),l.jsx("button",{onClick:m,className:"flex-shrink-0 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Dismiss notification",children:l.jsx(ti,{className:"h-4 w-4"})})]})}):null}const rN=W.createContext(void 0);function oB(){const n=W.useContext(rN);if(!n)throw new Error("useToastContext must be used within a ToastProvider");return n}function lB({children:n}){const[e,t]=W.useState([]),[s,i]=W.useState([]),r=d=>{const u=Math.random().toString(36).substring(2,9),h={...d,id:u};t(m=>[...m,h])},a=d=>{const u=Math.random().toString(36).substring(2,9),h={...d,id:u};i(m=>[...m,h])},o=d=>{t(u=>u.filter(h=>h.id!==d)),i(u=>u.filter(h=>h.id!==d))},c=()=>{t([]),i([])};return l.jsxs(rN.Provider,{value:{addToast:r,removeToast:o,clearToasts:c,addBottomLeftToast:a},children:[n,l.jsx("div",{className:"fixed top-4 right-4 z-[10002] flex flex-col space-y-2 pointer-events-none",children:e.map(d=>l.jsx(Lb,{...d,onDismiss:u=>o(u??d.id)},d.id))}),l.jsx("div",{className:"fixed bottom-4 left-4 z-[10000] flex flex-col space-y-2 pointer-events-none max-w-[90%]",children:s.map(d=>l.jsx(Lb,{...d,onDismiss:u=>o(u??d.id)},d.id))})]})}function bf(){const{addToast:n,removeToast:e,clearToasts:t,addBottomLeftToast:s}=oB();return{success:(r,a,o)=>{n({type:"success",title:r,message:a,action:o})},error:(r,a,o)=>{n({type:"error",title:r,message:a,action:o,duration:7e3})},warning:(r,a,o)=>{n({type:"warning",title:r,message:a,action:o,duration:6e3})},info:(r,a,o)=>{n({type:"info",title:r,message:a,action:o})},bottomLeft:{success:(r,a,o,c)=>{s({type:"success",title:r,message:a,action:o,onDismiss:c?.onDismiss})},error:(r,a,o,c)=>{s({type:"error",title:r,message:a,action:o,duration:7e3,onDismiss:c?.onDismiss})},warning:(r,a,o,c)=>{s({type:"warning",title:r,message:a,action:o,duration:6e3,onDismiss:c?.onDismiss})},info:(r,a,o,c)=>{s({type:"info",title:r,message:a,action:o,onDismiss:c?.onDismiss})}},custom:r=>{n(r)},dismiss:e,clear:t}}const aN="pain-tracker:medication-reminders";function cB(){try{const n=localStorage.getItem(aN);return n?JSON.parse(n):[]}catch(n){return console.debug("reminders: load failed",n),[]}}function wf(n){try{localStorage.setItem(aN,JSON.stringify(n))}catch(e){console.debug("reminders: save failed",e)}}function dB(n,e){const t=crypto?.randomUUID?.()??`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,s=[...n,{...e,id:t}];return wf(s),s}function uB(n,e,t){const s=n.map(i=>i.id===e?{...i,...t}:i);return wf(s),s}function hB(n,e){const t=n.filter(s=>s.id!==e);return wf(t),t}function ng(n){return n.times&&n.times.length>0?n.times:[n.time]}function oN(n){try{const e=ng(n),t=new Date;let s=null;for(const i of e){const[r,a]=i.split(":").map(Number);if(Number.isNaN(r)||Number.isNaN(a))continue;const o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),r,a,0,0);o<=t&&(n.recurrence==="daily"?o.setDate(o.getDate()+1):n.recurrence==="weekly"?o.setDate(o.getDate()+7):(n.frequency==="twice-daily"||n.frequency==="custom")&&o.setDate(o.getDate()+1)),(!s||o<s)&&(s=o)}return s}catch{return null}}function fB(n){const e=oN(n);return e?e.toLocaleString():n.time}function Mb(n,e){try{const[t,s]=n.split(":").map(Number),i=new Date;i.setHours(t+e,s,0,0);const r=String(i.getHours()).padStart(2,"0"),a=String(i.getMinutes()).padStart(2,"0");return`${r}:${a}`}catch{return n}}function mB(n){const e=[n.title];return n.dosage&&e.push(n.dosage),n.notes&&e.push(n.notes),e.join(" • ")}function pB({variant:n="overlay",className:e,onClose:t}){const[s,i]=W.useState(()=>cB()),[r,a]=W.useState(""),[o,c]=W.useState("08:00"),[d,u]=W.useState([]),[h,m]=W.useState(""),[f,y]=W.useState("none"),[x,v]=W.useState("once"),[w,j]=W.useState(""),[C,N]=W.useState(!1),[P,L]=W.useState(!1),M=W.useRef(null),T=W.useRef(null),k=bf(),z=W.useRef(k);W.useEffect(()=>{z.current=k},[k]),W.useEffect(()=>{const ue=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(C){if(T.current=document.activeElement,ue){L(!0);return}L(!1);const D=window.setTimeout(()=>L(!0),10);return()=>window.clearTimeout(D)}L(!1);try{T.current?.focus()}catch{}},[C]);const _=W.useCallback(ue=>{const D=mB(ue);if(typeof Notification<"u"&&Notification.permission==="granted")try{new Notification("Medication reminder",{body:D})}catch{}iN({id:`med-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,time:new Date().toISOString(),message:`Medication reminder: ${D}`});try{z.current?.bottomLeft?.info?.("Medication reminder",D)}catch{}},[]);W.useEffect(()=>{let ue=null,D=null;const V=(ae,ce)=>ng(ae).some(xe=>xe===ce),Z=()=>{const ce=new Date().toTimeString().slice(0,5),xe=[];i(me=>{let Ne=!1;const Me=me.map(Ie=>!Ie.enabled||!V(Ie,ce)?Ie:(xe.push(Ie),Ie.recurrence==="none"?(Ne=!0,{...Ie,enabled:!1}):Ie));return Ne?(wf(Me),Me):me}),xe.length&&xe.forEach(_)},ne=()=>{const ae=new Date,ce=(60-ae.getSeconds())*1e3-ae.getMilliseconds();ue=window.setTimeout(()=>{Z(),D=window.setInterval(Z,6e4)},Math.max(250,ce))};return Z(),ne(),()=>{ue&&window.clearTimeout(ue),D&&window.clearInterval(D)}},[_]);const E=()=>{const ue=r.trim();if(!ue)return;const D=(()=>{if(x==="twice-daily")return[o,d[0]||Mb(o,12)];if(x==="custom"){const Z=Array.from(new Set([o,...d.filter(Boolean)]));return Z.length>0?Z:void 0}})(),V=dB(s,{title:ue,time:o,enabled:!0,dosage:h||void 0,recurrence:f,frequency:x,notes:w||void 0,times:D});i(V),a(""),m(""),y("none"),v("once"),j(""),u([]);try{z.current?.bottomLeft?.success?.("Reminder saved",`${ue} has been scheduled.`)}catch{}},$=()=>{u(ue=>[...ue,"12:00"])},I=(ue,D)=>{u(V=>{const Z=[...V];return Z[ue]=D,Z})},J=ue=>{u(D=>D.filter((V,Z)=>Z!==ue))},se=W.useMemo(()=>s.filter(ue=>ue.enabled).length,[s]),oe=W.useMemo(()=>{const ue=s.filter(D=>D.enabled).map(D=>({reminder:D,date:oN(D)})).filter(D=>!!D.date);return ue.length?(ue.sort((D,V)=>D.date.getTime()-V.date.getTime()),ue[0]):null},[s]),F=W.useCallback(()=>{N(!1),t?.()},[t]),he=s.length>0,ke=ue=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Medication Reminders"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Create gentle prompts so important doses stay on track."})]}),ue&&l.jsx("button",{className:"btn btn-sm",onClick:F,children:"Close"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"rounded-lg border bg-muted/30 p-4 space-y-3",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{value:r,onChange:D=>a(D.target.value),placeholder:"Medication name",className:"input w-full"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsx("input",{type:"time",value:o,onChange:D=>c(D.target.value),className:"input"}),l.jsx("input",{value:h,onChange:D=>m(D.target.value),placeholder:"Dosage (e.g. 10mg)",className:"input"}),l.jsxs("select",{value:x,onChange:D=>v(D.target.value),className:"input",children:[l.jsx("option",{value:"once",children:"Once"}),l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"twice-daily",children:"Twice daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"custom",children:"Custom"})]})]}),(x==="twice-daily"||x==="custom")&&l.jsx("div",{className:"flex flex-col gap-2",children:x==="twice-daily"?l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsx("input",{type:"time",value:o,onChange:D=>c(D.target.value),className:"input"}),l.jsx("input",{type:"time",value:d[0]||Mb(o,12),onChange:D=>I(0,D.target.value),className:"input"})]}):l.jsxs("div",{className:"space-y-2",children:[d.map((D,V)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"time",value:D,onChange:Z=>I(V,Z.target.value),className:"input"}),l.jsx("button",{className:"btn btn-sm",onClick:()=>J(V),children:"Remove"})]},V)),l.jsx("button",{className:"btn btn-sm",onClick:$,children:"Add time"})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("select",{value:f,onChange:D=>y(D.target.value),className:"input",children:[l.jsx("option",{value:"none",children:"No recurrence"}),l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"})]}),l.jsx("input",{value:w,onChange:D=>j(D.target.value),placeholder:"Notes (e.g. before meals)",className:"input flex-1"}),l.jsx("button",{onClick:E,className:"btn",disabled:!r.trim(),children:"Add reminder"})]})]})}),l.jsx("div",{children:he?l.jsx("ul",{className:"space-y-3",children:s.map(D=>l.jsxs("li",{className:"flex items-start justify-between gap-4 rounded-lg border p-3 bg-card/80",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:D.title}),!D.enabled&&l.jsx("span",{className:"text-xs text-muted-foreground rounded-full border px-2 py-0.5",children:"Paused"})]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[ng(D).join(" • "),D.dosage?` • ${D.dosage}`:""]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Frequency: ",D.frequency??D.recurrence??"once",D.notes?` • ${D.notes}`:""]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",fB(D)]})]}),l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[l.jsx("button",{onClick:()=>i(V=>uB(V,D.id,{enabled:!D.enabled})),className:"btn btn-sm",children:D.enabled?"Pause":"Resume"}),l.jsx("button",{onClick:()=>i(V=>hB(V,D.id)),className:"btn btn-sm btn-outline",children:"Delete"})]})]},D.id))}):l.jsx("div",{className:"rounded-lg border border-dashed py-8 text-center text-sm text-muted-foreground",children:"No reminders yet. Add your first schedule above to see it here."})})]})]});return n==="inline"?l.jsx("div",{className:Ye("bg-card border rounded-lg shadow-sm p-4 space-y-4",e),children:ke(!1)}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("button",{onClick:()=>N(!0),className:"bg-white border rounded-md px-3 py-2 shadow-sm text-sm flex items-center gap-2",children:["Medication Reminders",se>0&&l.jsxs("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary",children:[se," active"]}),oe&&l.jsxs("span",{className:"text-xs text-muted-foreground",children:["Next: ",oe.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})}),C&&l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:F}),l.jsx(Qg,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:F},children:l.jsx("div",{ref:M,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-transform duration-200 ${P?"translate-x-0":"translate-x-full"}`,children:ke(!0)})})]})]})}const Tb="pain-tracker:alerts-settings";function gB({variant:n="overlay",className:e,onClose:t}){const[s,i]=W.useState(()=>{try{const f=localStorage.getItem(Tb);return f?JSON.parse(f):{threshold:3}}catch{return{threshold:3}}}),[r,a]=W.useState(!1),o=W.useRef(null),c=W.useRef(null),[d,u]=W.useState(!1);W.useEffect(()=>{try{localStorage.setItem(Tb,JSON.stringify(s))}catch{}},[s]),W.useEffect(()=>{if(n==="inline")return;const f=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(r){if(c.current=document.activeElement,f){u(!0);return}u(!1);const y=window.setTimeout(()=>u(!0),10);return()=>clearTimeout(y)}else{u(!1);try{c.current?.focus()}catch{}}},[r,n]);const h=()=>{a(!1),t?.()},m=f=>l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Alerts settings"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Tune sensitivity for pattern alerts."})]}),f&&l.jsx("button",{className:"btn btn-sm",onClick:h,children:"Close"})]}),l.jsx("label",{className:"block text-sm font-medium",children:"Sensitivity (pain increase threshold)"}),l.jsx("input",{type:"range",min:1,max:6,value:s.threshold,onChange:y=>i({threshold:Number(y.target.value)}),className:"w-full"}),l.jsxs("div",{className:"text-sm",children:["Current threshold: ",s.threshold," points"]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Live preview: You'll be alerted when pain rises by ",s.threshold," points. For example, a baseline of 3/10 would flag entries of ",Math.min(10,3+s.threshold),"/10."]})]});return n==="inline"?l.jsx("div",{className:Ye("rounded-lg border bg-muted/30 p-4 space-y-3 text-sm",e),children:m(!1)}):l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsxs("button",{onClick:()=>a(!0),className:"bg-white border rounded-md px-3 py-2 shadow-sm text-sm flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:l.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V5.178C16.39 6.006 18 8.388 18 11V16L20 18V19H4V18L6 16V11C6 8.388 7.61 6.006 10 5.178V4C10 2.89543 10.8954 2 12 2Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"})}),"Alerts"]})}),r&&l.jsxs("div",{className:"fixed inset-0 z-50",role:"presentation",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:h}),l.jsx(Qg,{active:!0,focusTrapOptions:{clickOutsideDeactivates:!0,escapeDeactivates:!0,onDeactivate:h},children:l.jsx("div",{ref:o,role:"dialog","aria-modal":"true",tabIndex:-1,className:`absolute right-0 top-0 h-full w-full md:w-96 bg-card shadow-xl border-l p-4 overflow-auto transform transition-all duration-200 ${d?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,style:window.matchMedia("(prefers-reduced-motion: reduce)").matches?{transitionTimingFunction:"linear"}:void 0,children:m(!0)})})]})]})}function yB({entries:n,error:e,onAddEntry:t,onStartWalkthrough:s}){const{preferences:i}=vr(),{preferences:r}=U5(),[a,o]=Ge.useState(!1),[c,d]=Ge.useState("dashboard"),[u,h]=Ge.useState(!1),[m,f]=Ge.useState(!1),[y,x]=Ge.useState(new Date),[v,w]=Ge.useState(!0),j=Ge.useCallback(async()=>{await new Promise(L=>setTimeout(L,1500)),x(new Date),"vibrate"in navigator&&navigator.vibrate([50,50,50])},[]),C=ZS({threshold:75,velocity:.5},{onSwipeLeft:()=>{c==="dashboard"?d("analytics"):c==="analytics"?d("history"):c==="history"&&d("support")},onSwipeRight:()=>{c==="support"?d("history"):c==="history"?d("analytics"):c==="analytics"&&d("dashboard")}}),N=Ge.useCallback(L=>{const M=L.toLowerCase().trim();M.includes("dashboard")||M.includes("home")?d("dashboard"):M.includes("analytics")||M.includes("charts")?d("analytics"):M.includes("history")||M.includes("past")?d("history"):M.includes("support")||M.includes("care")||M.includes("help tools")?d("support"):M.includes("settings")||M.includes("accessibility")?o(!0):(M.includes("help")||M.includes("tutorial"))&&s(),"vibrate"in navigator&&navigator.vibrate(100)},[s]);Ge.useEffect(()=>{const L=setTimeout(()=>w(!1),1e4);return()=>clearTimeout(L)},[]);const P=[{id:"dashboard",label:"Dashboard",icon:es,description:"Overview and quick actions"},{id:"analytics",label:"Analytics",icon:Fn,description:"Detailed insights and trends"},{id:"history",label:"History",icon:pr,description:"Past entries and patterns"},{id:"support",label:"Support",icon:qj,description:"Reminders, alerts, and safety tools"}];return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50 shadow-lg",children:"Skip to main content"}),l.jsx("header",{className:"border-b border-border/40 bg-gradient-to-r from-card/95 via-card/90 to-card/95 backdrop-blur-xl supports-[backdrop-filter]:bg-card/80 sticky top-0 z-40 shadow-lg shadow-black/5 transition-all duration-300",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(p2,{size:40}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-foreground via-primary/90 to-foreground bg-clip-text text-transparent",children:"Pain Tracker Pro"}),l.jsx("div",{className:"text-xs text-muted-foreground font-medium tracking-wider uppercase",children:"AI-Powered Pain Management"})]})]}),l.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:P.map(L=>l.jsxs(Je,{variant:c===L.id?"default":"ghost",size:"sm",onClick:()=>d(L.id),className:"flex items-center space-x-2 transition-all duration-300 hover:scale-105 hover:shadow-md active:scale-95",children:[l.jsx(L.icon,{className:"h-4 w-4"}),l.jsx("span",{children:L.label})]},L.id))}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"hidden lg:flex items-center space-x-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pr,{className:"h-4 w-4"}),l.jsxs("span",{children:[n.length," entries"]})]}),n.length>0&&l.jsxs(ts,{variant:"outline",className:"text-xs bg-primary/5 border-primary/20 hover:bg-primary/10 transition-colors",children:["Last: ",new Date(n[n.length-1]?.timestamp||"").toLocaleDateString()]})]}),r.voiceInput&&l.jsx(AE,{onResult:N,placeholder:"Voice commands...",language:"en-US"}),l.jsx(LE,{}),l.jsx(ah,{onClick:()=>o(!a),variant:"secondary",size:"normal","aria-label":"Open accessibility settings","aria-expanded":a,className:"min-h-[44px] min-w-[44px]",children:l.jsx(Xl,{className:"h-5 w-5"})}),l.jsx(ah,{onClick:s,variant:"secondary",size:"normal","aria-label":"Get help and tutorial",className:"min-h-[44px] min-w-[44px]",children:l.jsx(Md,{className:"h-5 w-5"})}),l.jsx("div",{className:"min-h-[44px] min-w-[44px] flex items-center justify-center",children:l.jsx(A_,{})})]})]}),l.jsx("div",{className:"md:hidden pb-2 px-2",children:l.jsx("nav",{className:"flex space-x-1 overflow-x-auto",children:P.map(L=>l.jsxs(Je,{variant:c===L.id?"default":"ghost",size:"sm",onClick:()=>d(L.id),className:"flex-1 flex items-center justify-center space-x-1 min-h-[44px] min-w-[44px]","aria-label":L.description,children:[l.jsx(L.icon,{className:"h-5 w-5"}),l.jsx("span",{className:"text-xs whitespace-nowrap",children:L.label})]},L.id))})})]})}),a&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0 animate-[fadeIn_0.2s_ease-out]",children:[l.jsx("div",{className:"fixed inset-0 transition-opacity duration-300 bg-background/90 backdrop-blur-md",onClick:()=>o(!1),"aria-hidden":"true"}),l.jsxs("div",{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all duration-300 transform bg-gradient-to-br from-card via-card/95 to-card backdrop-blur-xl shadow-2xl shadow-black/20 rounded-2xl border border-border/50 animate-[scaleIn_0.3s_ease-out]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-medium text-card-foreground",children:"Accessibility & Comfort Settings"}),l.jsx(ah,{variant:"secondary",onClick:()=>o(!1),"aria-label":"Close settings",children:"✕"})]}),l.jsx(ME,{})]})]})}),l.jsx("main",{id:"main-content",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 swipe-indicator relative before:absolute before:inset-0 before:bg-gradient-to-b before:from-primary/2 before:to-transparent before:pointer-events-none before:-z-10",ref:C.ref,children:l.jsxs(Mz,{onRefresh:j,lastRefresh:y,children:[l.jsx(PE,{gesture:"swipe",direction:"left",description:"Swipe to navigate between views",show:v&&window.innerWidth<768}),i.showComfortPrompts&&l.jsx("div",{className:"mb-6",children:l.jsx(CE,{})}),i.showMemoryAids&&n.length===0&&l.jsx("div",{className:"mb-6",children:l.jsx(h1,{text:"Welcome! Start by recording your current pain level. Your information is automatically saved as you go, so you can take breaks anytime.",type:"tip"})}),e&&l.jsx(We,{className:"mb-6 border-destructive/50 bg-destructive/5 animate-[fadeInDown_0.5s_ease-out] shadow-lg shadow-destructive/10",children:l.jsx(Ve,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center space-x-2",role:"alert","aria-live":"polite",children:[l.jsx(Vh,{className:"h-5 w-5 text-destructive"}),l.jsx("div",{children:i.gentleLanguage?l.jsxs(l.Fragment,{children:[l.jsx("strong",{className:"font-semibold text-destructive",children:"Something didn't work: "}),l.jsx("span",{className:"text-destructive",children:"We encountered an issue. Please try again when you're ready. Your data is safe."})]}):l.jsxs(l.Fragment,{children:[l.jsx("strong",{className:"font-semibold text-destructive",children:"Error: "}),l.jsx("span",{className:"text-destructive",children:e})]})})]})})}),c==="dashboard"&&l.jsx("div",{className:"space-y-6",children:l.jsx($R,{entries:n,onAddEntry:t,onStartWalkthrough:s,onOpenGoalManager:()=>f(!0)})}),c==="analytics"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Advanced Analytics Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Predictive insights and advanced visualizations for your pain journey"})]}),l.jsx(Je,{variant:"outline",onClick:()=>d("dashboard"),children:"Back to Dashboard"})]}),l.jsx(gM,{entries:n})]}),c==="history"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Pain History"}),l.jsx("p",{className:"text-muted-foreground",children:"Complete history of your pain entries and patterns"})]}),l.jsx(Je,{variant:"outline",onClick:()=>d("dashboard"),children:"Back to Dashboard"})]}),l.jsx(Hw,{entries:n})]}),c==="support"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Support & Safety"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage reminders, alerts, and comfort tools when you need extra help."})]}),l.jsx(Je,{variant:"outline",onClick:()=>d("dashboard"),children:"Back to Dashboard"})]}),l.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[l.jsx(pB,{variant:"inline"}),l.jsx(gB,{variant:"inline",className:"text-sm"})]}),l.jsx(aB,{variant:"inline",className:"text-sm"})]}),i.showMemoryAids&&n.length>=3&&l.jsx("div",{className:"mt-6",children:l.jsx(h1,{text:"Great progress! You've been consistently tracking your pain. Look for patterns in your data to share with your healthcare provider.",type:"reminder"})})]})}),l.jsx("footer",{className:"bg-gradient-to-t from-card/80 to-card/50 backdrop-blur-lg border-t border-border/40 mt-auto shadow-[0_-4px_20px_rgba(0,0,0,0.05)]",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[l.jsx("div",{className:"text-sm text-muted-foreground text-center md:text-left",children:i.gentleLanguage?"Your health journey matters. You're doing great by tracking your symptoms.":"Pain Tracker Pro - Manage your health information with confidence"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[i.showComfortPrompts&&l.jsx("div",{className:"text-sm text-muted-foreground",children:"Remember to be gentle with yourself"}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:"v2.0.0"}),l.jsx("span",{children:"•"}),l.jsx("span",{children:"Enhanced UX"})]})]})]})})}),l.jsx(cE,{isOpen:u,onClose:()=>h(!1),entries:n}),l.jsx(Cz,{isOpen:m,onClose:()=>f(!1)})]})}function Db({onNext:n,onSkip:e}){return l.jsxs("div",{className:"text-center space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(ba,{className:"h-16 w-16 text-primary"}),l.jsx(Oi,{className:"h-6 w-6 text-red-500 absolute -top-1 -right-1"})]})}),l.jsx("h3",{className:"text-3xl font-bold text-foreground mb-4",children:"Welcome to Pain Tracker"}),l.jsx("p",{className:"text-lg text-muted-foreground mb-6 max-w-md mx-auto",children:"Take control of your pain management journey with comprehensive tracking and insights."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(ba,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Track Daily"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Record pain levels, symptoms, and daily activities"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(Fn,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Analyze Trends"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualize patterns and improvements over time"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-primary/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:l.jsx(Oi,{className:"h-6 w-6 text-primary"})}),l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Improve Life"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Make informed decisions with your healthcare team"})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[l.jsx(Je,{variant:"outline",onClick:e,children:"Skip Tour"}),l.jsx(Je,{onClick:n,className:"min-w-24",children:"Get Started"})]})]})}function Eb({onNext:n,onPrevious:e}){const t=[{icon:sj,title:"Visual Analytics",description:"Interactive charts and graphs to visualize your pain patterns, trends, and progress over time.",highlight:"See your progress at a glance"},{icon:dh,title:"WCB Reports",description:"Generate comprehensive reports for WorkSafe BC submissions with all required documentation.",highlight:"Professional medical reports"},{icon:Ur,title:"Smart Tracking",description:"Quick and easy pain entry forms with intelligent suggestions and auto-save functionality.",highlight:"Never lose your data"},{icon:Gl,title:"Privacy First",description:"All your data stays on your device. No cloud storage, no tracking, complete privacy.",highlight:"Your data is yours alone"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"Powerful Features for Better Health"}),l.jsx("p",{className:"text-muted-foreground",children:"Discover what makes Pain Tracker the complete solution for pain management"})]}),l.jsx("div",{className:"space-y-6",children:t.map((s,i)=>l.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg border bg-card/50",children:[l.jsx("div",{className:"bg-primary/10 rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0",children:l.jsx(s.icon,{className:"h-6 w-6 text-primary"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:s.title}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),l.jsx("span",{className:"text-xs font-medium text-primary bg-primary/10 px-2 py-1 rounded",children:s.highlight})]})]},i))}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[l.jsx(Je,{variant:"outline",onClick:e,children:"Previous"}),l.jsx(Je,{onClick:n,className:"min-w-24",children:"Continue"})]})]})}function Ib({onComplete:n,onPrevious:e}){const[t,s]=W.useState(null),i=()=>{n(t==="sample")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"How would you like to start?"}),l.jsx("p",{className:"text-muted-foreground",children:"Choose your preferred way to begin your pain tracking journey"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>s("sample"),className:`w-full p-6 rounded-lg border-2 transition-all ${t==="sample"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0 bg-primary/10 dark:bg-primary/20",children:l.jsx(Do,{className:"h-6 w-6 text-primary-foreground"})}),l.jsxs("div",{className:"text-left flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Start with Sample Data"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Explore Pain Tracker with pre-filled sample entries to see how features work. Perfect for understanding the app before adding your own data."}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-xs bg-primary/10 text-primary-foreground px-2 py-1 rounded",children:"Try before you track"}),l.jsx("span",{className:"text-xs bg-primary/10 text-primary-foreground px-2 py-1 rounded",children:"See example reports"})]})]})]})}),l.jsx("button",{onClick:()=>s("fresh"),className:`w-full p-6 rounded-lg border-2 transition-all ${t==="fresh"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"rounded-lg w-12 h-12 flex items-center justify-center flex-shrink-0 bg-destructive/10 dark:bg-destructive/20",children:l.jsx(E4,{className:"h-6 w-6 text-destructive-foreground"})}),l.jsxs("div",{className:"text-left flex-1",children:[l.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Start Fresh"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Begin with a clean slate and add your first real pain entry. Best for users ready to start tracking immediately."}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-xs bg-destructive/10 text-destructive-foreground px-2 py-1 rounded",children:"Clean start"}),l.jsx("span",{className:"text-xs bg-destructive/10 text-destructive-foreground px-2 py-1 rounded",children:"Real data only"})]})]})]})})]}),l.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(kj,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm font-medium text-foreground",children:"Privacy Note"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"All data is stored locally on your device. You can clear sample data anytime, and no information is sent to external servers."})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[l.jsx(Je,{variant:"outline",onClick:e,children:"Previous"}),l.jsx(Je,{onClick:i,disabled:!t,className:"min-w-24",children:t==="sample"?"Setup with Samples":t==="fresh"?"Start Fresh":"Continue"})]})]})}function xB({onComplete:n,onSkip:e}){const[t,s]=W.useState(0),[i,r]=W.useState(!0),a=[{component:Db,title:"Welcome"},{component:Eb,title:"Features"},{component:Ib,title:"Setup"}],o=()=>{t<a.length-1&&s(t+1)},c=()=>{t>0&&s(t-1)},d=h=>{r(!1),n(h)},u=()=>{r(!1),e()};return W.useEffect(()=>{const h=document.querySelector("[data-onboarding-step]");h&&h.focus()},[t]),i?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"onboarding-title",children:l.jsx(We,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs(Ve,{className:"p-8 pb-24",children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{id:"onboarding-title",className:"text-2xl font-bold text-foreground",children:a[t].title}),l.jsx("button",{onClick:u,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Skip onboarding",type:"button",children:"Skip"})]}),l.jsx("div",{className:"flex space-x-2 mb-6",children:a.map((h,m)=>l.jsx("div",{className:`h-2 flex-1 rounded ${m<=t?"bg-primary":"bg-muted"}`,role:"progressbar","aria-label":`Onboarding step ${m+1} of ${a.length}`,"aria-valuenow":t+1,"aria-valuemax":a.length},m))})]}),l.jsxs("div",{"data-onboarding-step":!0,tabIndex:-1,children:[t===0&&l.jsx(Db,{onNext:o,onSkip:u,isFirstStep:!0,isLastStep:!1}),t===1&&l.jsx(Eb,{onNext:o,onPrevious:c,isFirstStep:!1,isLastStep:!1}),t===2&&l.jsx(Ib,{onComplete:d,onPrevious:c,isFirstStep:!1,isLastStep:!0})]})]})})}):null}function vB({steps:n,isActive:e,onComplete:t,onSkip:s}){const[i,r]=W.useState(0),[a,o]=W.useState(null),c=W.useRef(null),d=n[i];W.useEffect(()=>{if(!e||!d)return;const y=document.querySelector(d.target);if(y)return o(y),y.scrollIntoView({behavior:"smooth",block:"center"}),y.classList.add("walkthrough-highlight"),()=>{y.classList.remove("walkthrough-highlight")}},[i,d,e]);const u=()=>{if(!a)return{};const y=a.getBoundingClientRect();switch(d.placement||"bottom"){case"top":return{top:y.top-20,left:y.left+y.width/2,transform:"translate(-50%, -100%)"};case"bottom":return{top:y.bottom+20,left:y.left+y.width/2,transform:"translate(-50%, 0)"};case"left":return{top:y.top+y.height/2,left:y.left-20,transform:"translate(-100%, -50%)"};case"right":return{top:y.top+y.height/2,left:y.right+20,transform:"translate(0, -50%)"};default:return{top:y.bottom+20,left:y.left+y.width/2,transform:"translate(-50%, 0)"}}},h=()=>{i<n.length-1?r(i+1):t()},m=()=>{i>0&&r(i-1)},f=y=>{y.key==="Escape"?s():y.key==="ArrowLeft"&&i>0?m():y.key==="ArrowRight"&&i<n.length-1&&h()};return W.useEffect(()=>{const y=document.createElement("style");return y.appendChild(document.createTextNode(`
      .walkthrough-highlight {
        position: relative;
        z-index: 45;
        box-shadow: 0 0 0 4px rgba(var(--primary), 0.5);
        border-radius: 4px;
      }
    `)),document.head.appendChild(y),()=>{document.head.removeChild(y)}},[]),!e||!d?null:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40"}),l.jsx("div",{ref:c,className:"fixed z-50 max-w-sm",style:u(),onKeyDown:f,tabIndex:-1,children:l.jsxs("div",{className:"bg-popover border rounded-lg shadow-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Step ",i+1," of ",n.length]})}),l.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-foreground","aria-label":"Skip walkthrough",children:l.jsx(ti,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex space-x-1 mb-4",children:n.map((y,x)=>l.jsx("div",{className:`h-1 flex-1 rounded ${x<=i?"bg-primary":"bg-muted"}`},x))}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"font-semibold text-foreground mb-2",children:d.title}),l.jsx("p",{className:"text-sm text-muted-foreground",children:d.content}),d.action&&l.jsxs("p",{className:"text-xs text-primary mt-2 font-medium",children:["Try it: ",d.action]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs(Je,{variant:"outline",size:"sm",onClick:m,disabled:i===0,className:"flex items-center space-x-1",children:[l.jsx(og,{className:"h-3 w-3"}),l.jsx("span",{children:"Previous"})]}),l.jsxs(Je,{size:"sm",onClick:h,className:"flex items-center space-x-1",children:[l.jsx("span",{children:i===n.length-1?"Finish":"Next"}),i<n.length-1&&l.jsx(op,{className:"h-3 w-3"})]})]})]})})]})}const bB=[{id:1,timestamp:new Date(Date.now()-10080*60*1e3).toISOString(),baselineData:{pain:6,locations:["Lower Back","Right Leg"],symptoms:["Sharp pain","Stiffness","Numbness"]},functionalImpact:{limitedActivities:["Walking","Sitting for long periods"],assistanceNeeded:["Getting dressed"],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"Twice daily",effectiveness:"Moderate relief for 2-3 hours"}],changes:"Started taking ibuprofen twice daily",effectiveness:"Moderate relief for 2-3 hours"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-8640*60*1e3).toISOString(),effectiveness:"Some improvement in flexibility"}],effectiveness:"Some improvement in flexibility",planned:["Follow-up with specialist"]},qualityOfLife:{sleepQuality:4,moodImpact:5,socialImpact:["Cancelled dinner with friends"]},workImpact:{missedWork:1,modifiedDuties:["Working from home"],workLimitations:["Cannot lift heavy items"]},comparison:{worseningSince:"Last week after moving boxes",newLimitations:["Difficulty with stairs"]},notes:"Pain started after helping friends move. Worse in the morning and when sitting too long."},{id:2,timestamp:new Date(Date.now()-7200*60*1e3).toISOString(),baselineData:{pain:4,locations:["Lower Back"],symptoms:["Dull ache","Stiffness"]},functionalImpact:{limitedActivities:["Prolonged standing"],assistanceNeeded:[],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"Once daily",effectiveness:"Good relief, lasts 4-5 hours"}],changes:"Reduced to once daily",effectiveness:"Good relief, lasts 4-5 hours"},treatments:{recent:[{type:"Heat therapy",provider:"Self-administered",date:new Date(Date.now()-5760*60*1e3).toISOString(),effectiveness:"Heat helps significantly"},{type:"Gentle stretching",provider:"Self-administered",date:new Date(Date.now()-5760*60*1e3).toISOString(),effectiveness:"Good improvement in mobility"}],effectiveness:"Heat helps significantly",planned:["Continue physiotherapy"]},qualityOfLife:{sleepQuality:6,moodImpact:7,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:["Standing desk option"],workLimitations:["Avoid lifting over 10kg"]},comparison:{worseningSince:"",newLimitations:[]},notes:"Improvement noticed. Heat pack in the morning really helps. Stretching exercises from physio are effective."},{id:3,timestamp:new Date(Date.now()-4320*60*1e3).toISOString(),baselineData:{pain:3,locations:["Lower Back"],symptoms:["Mild stiffness"]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[{name:"Ibuprofen",dosage:"400mg",frequency:"As needed",effectiveness:"Good when needed"}],changes:"Only taking when pain increases",effectiveness:"Good when needed"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-2880*60*1e3).toISOString(),effectiveness:"Significant improvement in mobility"},{type:"Regular walking",provider:"Self-administered",date:new Date(Date.now()-2880*60*1e3).toISOString(),effectiveness:"Improved overall fitness"}],effectiveness:"Significant improvement in mobility",planned:["Gradually increase activity level"]},qualityOfLife:{sleepQuality:8,moodImpact:8,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:["Still cautious with heavy lifting"]},comparison:{worseningSince:"",newLimitations:[]},notes:"Much better! Can walk for 30 minutes without discomfort. Sleep quality improved significantly."},{id:4,timestamp:new Date(Date.now()-1440*60*1e3).toISOString(),baselineData:{pain:2,locations:["Lower Back"],symptoms:["Occasional stiffness"]},functionalImpact:{limitedActivities:[],assistanceNeeded:[],mobilityAids:[]},medications:{current:[],changes:"Stopped regular medication",effectiveness:"No longer needed for daily activities"},treatments:{recent:[{type:"Physiotherapy",provider:"City Physiotherapy Clinic",date:new Date(Date.now()-1440*60*1e3).toISOString(),effectiveness:"Excellent progress"},{type:"Regular exercise routine",provider:"Self-administered",date:new Date(Date.now()-1440*60*1e3).toISOString(),effectiveness:"Maintaining strength and flexibility"}],effectiveness:"Excellent progress",planned:["Maintain current exercise routine"]},qualityOfLife:{sleepQuality:9,moodImpact:9,socialImpact:[]},workImpact:{missedWork:0,modifiedDuties:[],workLimitations:[]},comparison:{worseningSince:"",newLimitations:[]},notes:"Feeling great! Back to normal activities. Continuing exercises to prevent future issues."}],lN=[{target:'[data-walkthrough="pain-entry-form"]',title:"Record Your Pain",content:"Start by recording your current pain level, location, and symptoms. This form is designed to be quick and comprehensive.",placement:"right",action:"Try entering a pain level using the slider"},{target:'[data-walkthrough="pain-chart"]',title:"Visualize Your Progress",content:"Your entries are automatically charted here, helping you spot patterns and track improvements over time.",placement:"left"},{target:'[data-walkthrough="wcb-report"]',title:"Generate Reports",content:"When needed, generate professional reports for healthcare providers or WorkSafe BC submissions.",placement:"bottom"},{target:'[data-walkthrough="pain-history"]',title:"Review Your History",content:"Access detailed views of all your pain entries, with filtering and search capabilities.",placement:"top"}],wB=Object.freeze(Object.defineProperty({__proto__:null,samplePainEntries:bB,walkthroughSteps:lN},Symbol.toStringTag,{value:"Module"}));function SB(){const{entries:n,ui:e,error:t,addEntry:s,setShowOnboarding:i,setShowWalkthrough:r,setError:a,loadSampleData:o}=Hl(),c=bf();W.useEffect(()=>{try{const v=kn.get("pain-tracker-onboarding-completed"),w=n.length>0;!v&&!w&&i(!0)}catch(v){console.warn("Unable to check onboarding status:",v)}},[n.length,i]);const d=v=>{try{kn.set("pain-tracker-onboarding-completed","true")}catch(w){console.warn("Unable to save onboarding status:",w)}i(!1),v?(o(),c.success("Sample data loaded!","Explore the features with example pain entries. You can clear this data anytime.")):c.info("Welcome to Pain Tracker!","Start by recording your first pain entry above.")},u=()=>{try{kn.set("pain-tracker-onboarding-completed","true")}catch(v){console.warn("Unable to save onboarding status:",v)}i(!1),c.info("Onboarding skipped","You can always access help from the help menu.")},h=()=>{r(!0)},m=()=>{r(!1),c.success("Tutorial completed!","You're all set to start tracking your pain effectively.")},f=()=>{r(!1)},y=v=>{if(!v.baselineData)return!1;const{pain:w}=v.baselineData;if(typeof w!="number"||w<0||w>10)return!1;if(v.qualityOfLife){const{sleepQuality:j,moodImpact:C}=v.qualityOfLife;if(typeof j!="number"||j<0||j>10||typeof C!="number"||C<0||C>10)return!1}return!0},x=v=>{try{if(!y(v)){a("Invalid pain entry data. Please check your input values."),c.error("Invalid Entry","Please check your input values and try again.");return}s(v),a(null),c.success("Entry Saved","Your pain entry has been recorded successfully.")}catch(w){a("Failed to add pain entry. Please try again."),c.error("Save Failed","Unable to add pain entry. Please try again."),console.error("Error adding pain entry:",w)}};return l.jsxs(l.Fragment,{children:[l.jsx(yB,{entries:n,error:t,onAddEntry:x,onStartWalkthrough:h}),e.showOnboarding&&l.jsx(xB,{onComplete:d,onSkip:u}),l.jsx(vB,{steps:lN,isActive:e.showWalkthrough,onComplete:m,onSkip:f})]})}const Pt=n=>typeof n=="string",Wc=()=>{let n,e;const t=new Promise((s,i)=>{n=s,e=i});return t.resolve=n,t.reject=e,t},Rb=n=>n==null?"":""+n,NB=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},kB=/###/g,Ob=n=>n&&n.indexOf("###")>-1?n.replace(kB,"."):n,Fb=n=>!n||Pt(n),fd=(n,e,t)=>{const s=Pt(e)?e.split("."):e;let i=0;for(;i<s.length-1;){if(Fb(n))return{};const r=Ob(s[i]);!n[r]&&t&&(n[r]=new t),Object.prototype.hasOwnProperty.call(n,r)?n=n[r]:n={},++i}return Fb(n)?{}:{obj:n,k:Ob(s[i])}},zb=(n,e,t)=>{const{obj:s,k:i}=fd(n,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=fd(n,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=fd(n,a,Object),o?.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=t},jB=(n,e,t,s)=>{const{obj:i,k:r}=fd(n,e,Object);i[r]=i[r]||[],i[r].push(t)},$h=(n,e)=>{const{obj:t,k:s}=fd(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},_B=(n,e,t)=>{const s=$h(n,t);return s!==void 0?s:$h(e,t)},cN=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?Pt(n[s])||n[s]instanceof String||Pt(e[s])||e[s]instanceof String?t&&(n[s]=e[s]):cN(n[s],e[s],t):n[s]=e[s]);return n},Sl=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var CB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const AB=n=>Pt(n)?n.replace(/[&<>"'\/]/g,e=>CB[e]):n;class PB{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const LB=[" ",",","?","!",";"],MB=new PB(20),TB=(n,e,t)=>{e=e||"",t=t||"";const s=LB.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const i=MB.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(n);if(!r){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(r=!0)}return r},sg=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const s=e.split(t);let i=n;for(let r=0;r<s.length;){if(!i||typeof i!="object")return;let a,o="";for(let c=r;c<s.length;++c)if(c!==r&&(o+=t),o+=s[c],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<s.length-1)continue;r+=c-r+1;break}i=a}return i},Pd=n=>n?.replace("_","-"),DB={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Wh{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||DB,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(Pt(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Wh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Wh(this.logger,e)}}var $r=new Wh;class Sf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,r])=>{for(let a=0;a<r;a++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,r])=>{for(let a=0;a<r;a++)i.apply(i,[e,...t])})}}class Bb extends Sf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,i={}){const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):Pt(s)&&r?o.push(...s.split(r)):o.push(s)));const c=$h(this.data,o);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),c||!a||!Pt(s)?c:sg(this.data?.[e]?.[t],s,r)}addResource(e,t,s,i,r={silent:!1}){const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),zb(this.data,o,i),r.silent||this.emit("added",e,t,s,i)}addResources(e,t,s,i={silent:!1}){for(const r in s)(Pt(s[r])||Array.isArray(s[r]))&&this.addResource(e,t,r,s[r],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,r,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=s,s=t,t=o[1]),this.addNamespaces(t);let c=$h(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?cN(c,s,r):c={...c,...s},zb(this.data,o,c),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var dN={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,i){return n.forEach(r=>{e=this.processors[r]?.process(e,t,s,i)??e}),e}};const uN=Symbol("i18next/PATH_KEY");function EB(){const n=[],e=Object.create(null);let t;return e.get=(s,i)=>(t?.revoke?.(),i===uN?n:(n.push(i),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function ig(n,e){const{[uN]:t}=n(EB());return t.join(e?.keySeparator??".")}const $b={},Wb=n=>!Pt(n)&&typeof n!="boolean"&&typeof n!="number";class Uh extends Sf{constructor(e,t={}){super(),NB(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$r.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};return e==null?!1:this.resolve(e,s)?.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!TB(e,s,i);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Pt(r)?[r]:r};const d=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(d[0])>-1)&&(r=d.shift()),e=d.join(i)}return{key:e,namespaces:Pt(r)?[r]:r}}translate(e,t,s){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=ig(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const r=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],i),d=c[c.length-1];let u=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const h=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return m?r?{res:`${d}${u}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${u}${o}`:r?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:o;const f=this.resolve(e,i);let y=f?.res;const x=f?.usedKey||o,v=f?.exactUsedKey||o,w=["[object Number]","[object Function]","[object RegExp]"],j=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,N=i.count!==void 0&&!Pt(i.count),P=Uh.hasDefaultValue(i),L=N?this.pluralResolver.getSuffix(h,i.count,i):"",M=i.ordinal&&N?this.pluralResolver.getSuffix(h,i.count,{ordinal:!1}):"",T=N&&!i.ordinal&&i.count===0,k=T&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${L}`]||i[`defaultValue${M}`]||i.defaultValue;let z=y;C&&!y&&P&&(z=k);const _=Wb(z),E=Object.prototype.toString.apply(z);if(C&&z&&_&&w.indexOf(E)<0&&!(Pt(j)&&Array.isArray(z))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,z,{...i,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(f.res=$,f.usedParams=this.getUsedParamsDetails(i),f):$}if(a){const $=Array.isArray(z),I=$?[]:{},J=$?v:x;for(const se in z)if(Object.prototype.hasOwnProperty.call(z,se)){const oe=`${J}${a}${se}`;P&&!y?I[se]=this.translate(oe,{...i,defaultValue:Wb(k)?k[se]:void 0,joinArrays:!1,ns:c}):I[se]=this.translate(oe,{...i,joinArrays:!1,ns:c}),I[se]===oe&&(I[se]=z[se])}y=I}}else if(C&&Pt(j)&&Array.isArray(y))y=y.join(j),y&&(y=this.extendTranslation(y,e,i,s));else{let $=!1,I=!1;!this.isValidLookup(y)&&P&&($=!0,y=k),this.isValidLookup(y)||(I=!0,y=o);const se=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:y,oe=P&&k!==y&&this.options.updateMissing;if(I||$||oe){if(this.logger.log(oe?"updateKey":"missingKey",h,d,o,oe?k:y),a){const ue=this.resolve(o,{...i,keySeparator:!1});ue&&ue.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const he=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&he&&he[0])for(let ue=0;ue<he.length;ue++)F.push(he[ue]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(i.lng||this.language):F.push(i.lng||this.language);const ke=(ue,D,V)=>{const Z=P&&V!==y?V:se;this.options.missingKeyHandler?this.options.missingKeyHandler(ue,d,D,Z,oe,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ue,d,D,Z,oe,i),this.emit("missingKey",ue,d,D,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?F.forEach(ue=>{const D=this.pluralResolver.getSuffixes(ue,i);T&&i[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(V=>{ke([ue],o+V,i[`defaultValue${V}`]||k)})}):ke(F,o,k))}y=this.extendTranslation(y,e,i,f,s),I&&y===o&&this.options.appendNamespaceToMissingKey&&(y=`${d}${u}${o}`),(I||$)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${u}${o}`:o,$?y:void 0,i))}return r?(f.res=y,f.usedParams=this.getUsedParamsDetails(i),f):y}extendTranslation(e,t,s,i,r){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const c=Pt(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const h=e.match(this.interpolator.nestingRegexp);d=h&&h.length}let u=s.replace&&!Pt(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,s.lng||this.language||i.usedLng,s),c){const h=e.match(this.interpolator.nestingRegexp),m=h&&h.length;d<m&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>r?.[0]===h[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):this.translate(...h,t),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,o=Pt(a)?[a]:a;return e!=null&&o?.length&&s.applyPostProcessor!==!1&&(e=dN.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,i,r,a,o;return Pt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(c,t),u=d.key;i=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=t.count!==void 0&&!Pt(t.count),f=m&&!t.ordinal&&t.count===0,y=t.context!==void 0&&(Pt(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(v=>{this.isValidLookup(s)||(o=v,!$b[`${x[0]}-${v}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&($b[`${x[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${x.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(w=>{if(this.isValidLookup(s))return;a=w;const j=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(j,u,w,v,t);else{let N;m&&(N=this.pluralResolver.getSuffix(w,t.count,t));const P=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(t.ordinal&&N.indexOf(L)===0&&j.push(u+N.replace(L,this.options.pluralSeparator)),j.push(u+N),f&&j.push(u+P)),y){const M=`${u}${this.options.contextSeparator||"_"}${t.context}`;j.push(M),m&&(t.ordinal&&N.indexOf(L)===0&&j.push(M+N.replace(L,this.options.pluralSeparator)),j.push(M+N),f&&j.push(M+P))}}let C;for(;C=j.pop();)this.isValidLookup(s)||(r=C,s=this.getResource(w,v,C,t))}))})}),{res:s,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Pt(e.replace);let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const r of t)delete i[r]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class Ub{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$r.create("languageUtils")}getScriptPartFromCode(e){if(e=Pd(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Pd(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Pt(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return t=i;const r=this.getLanguagePartFromCode(s);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(a=>{if(a===r)return a;if(!(a.indexOf("-")<0&&r.indexOf("-")<0)&&(a.indexOf("-")>0&&r.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===r||a.indexOf(r)===0&&r.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Pt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Pt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):Pt(e)&&r(this.formatLanguageCode(e)),s.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}const qb={zero:0,one:1,two:2,few:3,many:4,other:5},Vb={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class IB{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=$r.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=Pd(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(s,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Vb;if(!e.match(/-|_/))return Vb;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[r]=a,a}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((i,r)=>qb[i]-qb[r]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,s={}){const i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const Hb=(n,e,t,s=".",i=!0)=>{let r=_B(n,e,t);return!r&&i&&Pt(t)&&(r=sg(n,t,s),r===void 0&&(r=sg(e,t,s))),r},rp=n=>n.replace(/\$/g,"$$$$");class RB{constructor(e={}){this.logger=$r.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:f,nestingSuffix:y,nestingSuffixEscaped:x,nestingOptionsSeparator:v,maxReplaces:w,alwaysFormat:j}=e.interpolation;this.escape=t!==void 0?t:AB,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Sl(r):a||"{{",this.suffix=o?Sl(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?Sl(m):f||Sl("$t("),this.nestingSuffix=y?Sl(y):x||Sl(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=w||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let r,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=f=>{if(f.indexOf(this.formatSeparator)<0){const w=Hb(t,c,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,s,{...i,...t,interpolationkey:f}):w}const y=f.split(this.formatSeparator),x=y.shift().trim(),v=y.join(this.formatSeparator).trim();return this.format(Hb(t,c,x,this.options.keySeparator,this.options.ignoreJSONStructure),v,s,{...i,...t,interpolationkey:x})};this.resetRegExp();const u=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>rp(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?rp(this.escape(f)):rp(f)}].forEach(f=>{for(o=0;r=f.regex.exec(e);){const y=r[1].trim();if(a=d(y),a===void 0)if(typeof u=="function"){const v=u(e,r,i);a=Pt(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))a="";else if(h){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!Pt(a)&&!this.useRawValueToEscape&&(a=Rb(a));const x=f.safeValue(a);if(e=e.replace(r[0],x),h?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=r[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,s={}){let i,r,a;const o=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,a);const f=m.match(/'/g),y=m.match(/"/g);((f?.length??0)%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{a=JSON.parse(m),d&&(a={...d,...a})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${u}${m}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];a={...s},a=a.replace&&!Pt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(c=i[1].slice(d).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),r=t(o.call(this,i[1].trim(),a),a),r&&i[0]===e&&!Pt(r))return r;Pt(r)||(r=Rb(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),r=""),c.length&&(r=c.reduce((u,h)=>this.format(u,h,s.lng,{...s,interpolationkey:i[1].trim()}),r.trim())),e=e.replace(i[0],r),this.regexp.lastIndex=0}return e}}const OB=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();t[u]||(t[u]=d),d==="false"&&(t[u]=!1),d==="true"&&(t[u]=!0),isNaN(d)||(t[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},Gb=n=>{const e={};return(t,s,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const a=s+JSON.stringify(r);let o=e[a];return o||(o=n(Pd(s),i),e[a]=o),o(t)}},FB=n=>(e,t,s)=>n(Pd(t),s)(e);class zB{constructor(e={}){this.logger=$r.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?Gb:FB;this.formats={number:s((i,r)=>{const a=new Intl.NumberFormat(i,{...r});return o=>a.format(o)}),currency:s((i,r)=>{const a=new Intl.NumberFormat(i,{...r,style:"currency"});return o=>a.format(o)}),datetime:s((i,r)=>{const a=new Intl.DateTimeFormat(i,{...r});return o=>a.format(o)}),relativetime:s((i,r)=>{const a=new Intl.RelativeTimeFormat(i,{...r});return o=>a.format(o,r.range||"day")}),list:s((i,r)=>{const a=new Intl.ListFormat(i,{...r});return o=>a.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Gb(t)}format(e,t,s,i={}){const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,c)=>{const{formatName:d,formatOptions:u}=OB(c);if(this.formats[d]){let h=o;try{const m=i?.formatParams?.[i.interpolationkey]||{},f=m.locale||m.lng||i.locale||i.lng||s;h=this.formats[d](o,f,{...u,...i,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${d}`);return o},e)}}const BB=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class $B extends Sf{constructor(e,t,s,i={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=$r.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,i.backend,i)}queueLoad(e,t,s,i){const r={},a={},o={},c={};return e.forEach(d=>{let u=!0;t.forEach(h=>{const m=`${d}|${h}`;!s.reload&&this.store.hasResourceBundle(d,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?a[m]===void 0&&(a[m]=!0):(this.state[m]=1,u=!1,a[m]===void 0&&(a[m]=!0),r[m]===void 0&&(r[m]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(o[d]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,s){const i=e.split("|"),r=i[0],a=i[1];t&&this.emit("failedLoading",r,a,t),!t&&s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(c=>{jB(c.loaded,[r],a),BB(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{o[d][h]===void 0&&(o[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,s,i=0,r=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:r,callback:a});return}this.readingCalls++;const o=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,r*2,a)},r);return}a(d,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const d=c(e,t);d&&typeof d.then=="function"?d.then(u=>o(null,u)).catch(o):o(null,d)}catch(d){o(d)}return}return c(e,t,o)}prepareLoading(e,t,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Pt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Pt(t)&&(t=[t]);const r=this.queueLoad(e,t,s,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),i=s[0],r=s[1];this.read(i,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${r} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,i,r,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const c={...a,isUpdate:r},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,t,s,i,c):u=d(e,t,s,i),u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}else d(e,t,s,i,o,c)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}const Yb=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Pt(n[1])&&(e.defaultValue=n[1]),Pt(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Zb=n=>(Pt(n.ns)&&(n.ns=[n.ns]),Pt(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Pt(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Gu=()=>{},WB=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Ld extends Sf{constructor(e={},t){if(super(),this.options=Zb(e),this.services={},this.logger=$r,this.modules={external:[]},WB(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Pt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=Yb();this.options={...s,...this.options,...Zb(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?$r.init(i(this.modules.logger),this.options):$r.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=zB;const u=new Ub(this.options);this.store=new Bb(this.options.resources,this.options);const h=this.services;h.logger=$r,h.resourceStore=this.store,h.languageUtils=u,h.pluralResolver=new IB(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=i(d),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new RB(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new $B(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(f,...y)=>{this.emit(f,...y)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Uh(this.services,this.options),this.translator.on("*",(f,...y)=>{this.emit(f,...y)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Gu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...u)=>this.store[d](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...u)=>(this.store[d](...u),this)});const o=Wc(),c=()=>{const d=(u,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),t(u,h)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(e,t=Gu){let s=t;const i=Pt(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const r=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(d=>{d!=="cimode"&&r.indexOf(d)<0&&r.push(d)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(o=>a(o)),this.services.backendConnector.load(r,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(e,t,s){const i=Wc();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Gu),this.services.backendConnector.reload(e,t,r=>{i.resolve(),s(r)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=Wc();this.emit("languageChanging",e);const i=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},r=(o,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...d)=>this.t(...d)),t&&t(o,(...d)=>this.t(...d))},a=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const c=Pt(o)?o:o&&o[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pt(o)?[o]:o);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,u=>{r(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,s){const i=(r,a,...o)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([r,a].concat(o)):c={...a},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||i.keyPrefix);const d=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(r)?u=r.map(h=>(typeof h=="function"&&(h=ig(h,{...this.options,...a})),`${c.keyPrefix}${d}${h}`)):(typeof r=="function"&&(r=ig(r,{...this.options,...a})),u=c.keyPrefix?`${c.keyPrefix}${d}${r}`:r),this.t(u,c)};return Pt(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!i||a(r,e)))}loadNamespaces(e,t){const s=Wc();return this.options.ns?(Pt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Wc();Pt(e)&&(e=[e]);const i=this.options.preload||[],r=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const r=i.getTextInfo();if(r&&r.direction)return r.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new Ub(Yb());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Ld(e,t)}cloneInstance(e={},t=Gu){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new Ld(i);if((e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s){const o=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((u,h)=>(u[h]={...c[d][h]},u),c[d]),c),{});r.store=new Bb(o,i),r.services.resourceStore=r.store}return r.translator=new Uh(r.services,i),r.translator.on("*",(o,...c)=>{r.emit(o,...c)}),r.init(i,t),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Us=Ld.createInstance();Us.createInstance=Ld.createInstance;Us.createInstance;Us.dir;Us.init;Us.loadResources;Us.reloadResources;Us.use;Us.changeLanguage;Us.getFixedT;Us.t;Us.exists;Us.setDefaultNamespace;Us.hasLoadedNamespace;Us.loadNamespaces;Us.loadLanguages;const{slice:UB,forEach:qB}=[];function VB(n){return qB.call(UB.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function HB(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const Kb=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,GB=function(n,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let r=`${n}=${i}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!Kb.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!Kb.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r},Xb={create(n,e,t,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),s&&(i.domain=s),document.cookie=GB(n,e,i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let s=0;s<t.length;s++){let i=t[s];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var YB={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return Xb.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:s,cookieDomain:i,cookieOptions:r}=e;t&&typeof document<"u"&&Xb.create(t,n,s,i,r)}},ZB={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const r=s.substring(1).split("&");for(let a=0;a<r.length;a++){const o=r[a].indexOf("=");o>0&&r[a].substring(0,o)===e&&(t=r[a].substring(o+1))}}return t}},KB={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const r=i.substring(1);if(e){const a=r.split("&");for(let o=0;o<a.length;o++){const c=a[o].indexOf("=");c>0&&a[o].substring(0,c)===e&&(s=a[o].substring(c+1))}}if(s)return s;if(!s&&t>-1){const a=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return s}};let Nl=null;const Qb=()=>{if(Nl!==null)return Nl;try{if(Nl=typeof window<"u"&&window.localStorage!==null,!Nl)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Nl=!1}return Nl};var XB={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&Qb())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&Qb()&&window.localStorage.setItem(t,n)}};let kl=null;const Jb=()=>{if(kl!==null)return kl;try{if(kl=typeof window<"u"&&window.sessionStorage!==null,!kl)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{kl=!1}return kl};var QB={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&Jb())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&Jb()&&window.sessionStorage.setItem(t,n)}},JB={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:s,language:i}=navigator;if(t)for(let r=0;r<t.length;r++)e.push(t[r]);s&&e.push(s),i&&e.push(i)}return e.length>0?e:void 0}},e$={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},t$={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},n$={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[t]}};let hN=!1;try{document.cookie,hN=!0}catch{}const fN=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];hN||fN.splice(1,1);const s$=()=>({order:fN,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class mN{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=VB(t,this.options||{},s$()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(YB),this.addDetector(ZB),this.addDetector(XB),this.addDetector(QB),this.addDetector(JB),this.addDetector(e$),this.addDetector(t$),this.addDetector(n$),this.addDetector(KB)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(s=>{if(this.detectors[s]){let i=this.detectors[s].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(s=>s!=null&&!HB(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}mN.type="languageDetector";const i$={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",loading:"Loading...",error:"Error",success:"Success",yes:"Yes",no:"No",close:"Close",back:"Back",next:"Next",previous:"Previous",export:"Export",import:"Import",print:"Print"},r$={overview:"Overview",comparisons:"Comparisons",heatmap:"Body Heatmap",treatment:"Treatment Timeline",clinical:"Clinical Export"},a$={level:"Pain Level",location:"Location",locations:"Locations",symptoms:"Symptoms",intensity:"Intensity",average:"Average Pain",current:"Current Pain",trend:"Pain Trend",assessment:"Pain Assessment"},o$={title:"Pain Analytics",noData:"No data available",totalEntries:"Total Entries",dateRange:"Date Range",summary:"Summary",details:"Details"},l$={settings:"Accessibility Settings",theme:"Visual Theme",themes:{light:"Light Theme",dark:"Dark Theme",highContrast:"High Contrast"},reducedMotion:"Reduced Motion",enabled:"Enabled",disabled:"Disabled",keyboardTips:"Keyboard Navigation Tips"},c$={common:i$,navigation:r$,pain:a$,analytics:o$,export:{clinical:"Clinical Data Export",visitSummary:"Visit Summary",formats:{standard:"Standard Clinical Export",detailed:"Detailed Comprehensive Export",summary:"Executive Summary Export"}},accessibility:l$},d$={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",loading:"Chargement...",error:"Erreur",success:"Succès",yes:"Oui",no:"Non",close:"Fermer",back:"Retour",next:"Suivant",previous:"Précédent",export:"Exporter",import:"Importer",print:"Imprimer"},u$={overview:"Aperçu",comparisons:"Comparaisons",heatmap:"Carte thermique corporelle",treatment:"Chronologie des traitements",clinical:"Exportation clinique"},h$={level:"Niveau de douleur",location:"Emplacement",locations:"Emplacements",symptoms:"Symptômes",intensity:"Intensité",average:"Douleur moyenne",current:"Douleur actuelle",trend:"Tendance de la douleur",assessment:"Évaluation de la douleur"},f$={title:"Analyses de la douleur",noData:"Aucune donnée disponible",totalEntries:"Total des entrées",dateRange:"Plage de dates",summary:"Résumé",details:"Détails"},m$={settings:"Paramètres d'accessibilité",theme:"Thème visuel",themes:{light:"Thème clair",dark:"Thème sombre",highContrast:"Contraste élevé"},reducedMotion:"Mouvement réduit",enabled:"Activé",disabled:"Désactivé",keyboardTips:"Conseils de navigation au clavier"},p$={common:d$,navigation:u$,pain:h$,analytics:f$,export:{clinical:"Exportation de données cliniques",visitSummary:"Résumé de visite",formats:{standard:"Exportation clinique standard",detailed:"Exportation complète détaillée",summary:"Exportation de résumé exécutif"}},accessibility:m$},g$={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",loading:"Cargando...",error:"Error",success:"Éxito",yes:"Sí",no:"No",close:"Cerrar",back:"Atrás",next:"Siguiente",previous:"Anterior",export:"Exportar",import:"Importar",print:"Imprimir"},y$={overview:"Resumen",comparisons:"Comparaciones",heatmap:"Mapa de calor corporal",treatment:"Cronología de tratamiento",clinical:"Exportación clínica"},x$={level:"Nivel de dolor",location:"Ubicación",locations:"Ubicaciones",symptoms:"Síntomas",intensity:"Intensidad",average:"Dolor promedio",current:"Dolor actual",trend:"Tendencia del dolor",assessment:"Evaluación del dolor"},v$={title:"Análisis del dolor",noData:"No hay datos disponibles",totalEntries:"Total de entradas",dateRange:"Rango de fechas",summary:"Resumen",details:"Detalles"},b$={settings:"Configuración de accesibilidad",theme:"Tema visual",themes:{light:"Tema claro",dark:"Tema oscuro",highContrast:"Alto contraste"},reducedMotion:"Movimiento reducido",enabled:"Habilitado",disabled:"Deshabilitado",keyboardTips:"Consejos de navegación por teclado"},w$={common:g$,navigation:y$,pain:x$,analytics:v$,export:{clinical:"Exportación de datos clínicos",visitSummary:"Resumen de visita",formats:{standard:"Exportación clínica estándar",detailed:"Exportación detallada completa",summary:"Exportación de resumen ejecutivo"}},accessibility:b$},S$={en:{translation:c$},fr:{translation:p$},es:{translation:w$}};Us.use(mN).use(SE).init({resources:S$,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},react:{useSuspense:!1}});class Nf{dbName="pain-tracker-offline";dbVersion=1;db=null;static _instance=null;stores={data:"offline-data",syncQueue:"sync-queue",cache:"cache-metadata"};async init(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,this.dbVersion);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=i=>{const r=i.target.result;if(!r.objectStoreNames.contains(this.stores.data)){const a=r.createObjectStore(this.stores.data,{keyPath:"id",autoIncrement:!0});a.createIndex("type","type",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("synced","synced",{unique:!1})}if(!r.objectStoreNames.contains(this.stores.syncQueue)){const a=r.createObjectStore(this.stores.syncQueue,{keyPath:"id",autoIncrement:!0});a.createIndex("priority","priority",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("retryCount","retryCount",{unique:!1})}r.objectStoreNames.contains(this.stores.cache)||r.createObjectStore(this.stores.cache,{keyPath:"url"}).createIndex("expiry","expiry",{unique:!1})}})}async setItem(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}await this.storeData("settings",{key:e,value:t})}async getItem(e){try{const t=localStorage.getItem(e);if(t!==null)return JSON.parse(t)}catch{}try{const s=(await this.getData("settings")).find(i=>i.data&&typeof i.data=="object"&&"key"in i.data&&i.data.key===e);if(s&&s.data&&typeof s.data=="object"&&"value"in s.data)return s.data.value}catch{}return null}makeTableKey(e,t){return`table:${e}:${t}`}parseTableKey(e){if(!e.startsWith("table:"))return null;const t=e.split(":");return t.length<3?null:{table:t[1],id:t.slice(2).join(":")}}async getAllFromTable(e){const t=await this.getData("settings"),s=[];for(const i of t)if(i.data&&typeof i.data=="object"&&"key"in i.data&&"value"in i.data){const r=i.data.key,a=this.parseTableKey(r);a&&a.table===e&&s.push(i.data.value)}return s}async replaceTable(e,t){const s=await this.getData("settings"),i=[];for(const r of s)if(r.id!==void 0&&r.data&&typeof r.data=="object"&&"key"in r.data){const a=r.data.key,o=this.parseTableKey(a);o&&o.table===e&&i.push(this.deleteData(r.id))}await Promise.allSettled(i);for(const r of t){const a=r.id||crypto.randomUUID();await this.storeData("settings",{key:this.makeTableKey(e,String(a)),value:r})}}async addToTable(e,t){const s=t.id||crypto.randomUUID();await this.storeData("settings",{key:this.makeTableKey(e,String(s)),value:{...t,id:s}})}async updateInTable(e,t,s){const i=await this.getData("settings"),r=this.makeTableKey(e,String(t)),a=i.find(o=>o.data&&typeof o.data=="object"&&"key"in o.data&&o.data.key===r);a&&a.id!==void 0?await this.updateData(a.id,{key:r,value:s}):await this.storeData("settings",{key:r,value:s})}async removeFromTable(e,t){const s=await this.getData("settings"),i=this.makeTableKey(e,String(t)),r=s.find(a=>a.data&&typeof a.data=="object"&&"key"in a.data&&a.data.key===i);r&&r.id!==void 0&&await this.deleteData(r.id)}async getFromTable(e,t){const s=await this.getData("settings"),i=this.makeTableKey(e,String(t)),r=s.find(a=>a.data&&typeof a.data=="object"&&"key"in a.data&&a.data.key===i);return r&&r.data&&typeof r.data=="object"&&"value"in r.data?r.data.value:null}async storeData(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),o={timestamp:new Date().toISOString(),type:e,data:t,synced:!1,lastModified:new Date().toISOString()},c=a.add(o);c.onsuccess=()=>s(c.result),c.onerror=()=>i(c.error)})}async updateData(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),o=a.get(e);o.onsuccess=()=>{const c=o.result;if(c){c.data=t,c.lastModified=new Date().toISOString(),c.synced=!1;const d=a.put(c);d.onsuccess=()=>s(),d.onerror=()=>i(d.error)}else i(new Error("Data not found"))},o.onerror=()=>i(o.error)})}async getData(e){return this.db||await this.init(),new Promise((t,s)=>{const o=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).index("type").getAll(e);o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedData(){return this.db||await this.init(),new Promise((e,t)=>{const a=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).index("synced").getAll(0);a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})}async markAsSynced(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data),a=r.get(e);a.onsuccess=()=>{const o=a.result;if(o){o.synced=!0;const c=r.put(o);c.onsuccess=()=>t(),c.onerror=()=>s(c.error)}else s(new Error("Data not found"))},a.onerror=()=>s(a.error)})}async deleteData(e){return this.db||await this.init(),new Promise((t,s)=>{const a=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data).delete(e);a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})}async addToSyncQueue(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue),a={...e,timestamp:new Date().toISOString(),retryCount:0},o=r.add(a);o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})}async getSyncQueue(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction([this.stores.syncQueue],"readonly").objectStore(this.stores.syncQueue).getAll();r.onsuccess=()=>{const a=r.result.sort((o,c)=>{const d={high:0,medium:1,low:2},u=(d[o.priority]||2)-(d[c.priority]||2);return u!==0?u:new Date(o.timestamp).getTime()-new Date(c.timestamp).getTime()});e(a)},r.onerror=()=>t(r.error)})}async updateSyncQueueItem(e,t){return this.db||await this.init(),new Promise((s,i)=>{const a=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue),o=a.get(e);o.onsuccess=()=>{const c=o.result;if(c){Object.assign(c,t);const d=a.put(c);d.onsuccess=()=>s(),d.onerror=()=>i(d.error)}else i(new Error("Sync queue item not found"))},o.onerror=()=>i(o.error)})}async removeSyncQueueItem(e){return this.db||await this.init(),new Promise((t,s)=>{const a=this.db.transaction([this.stores.syncQueue],"readwrite").objectStore(this.stores.syncQueue).delete(e);a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})}async clearAllData(){return this.db||await this.init(),new Promise((e,t)=>{const s=this.db.transaction([this.stores.data,this.stores.syncQueue],"readwrite");let i=0;const r=()=>{i++,i===2&&e()},a=s.objectStore(this.stores.data),o=s.objectStore(this.stores.syncQueue),c=a.clear(),d=o.clear();c.onsuccess=r,d.onsuccess=r,c.onerror=()=>t(c.error),d.onerror=()=>t(d.error)})}async getStorageUsage(){if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();return{used:e.usage||0,quota:e.quota||0}}return{used:0,quota:0}}async exportData(){const[e,t]=await Promise.all([this.getAllData(),this.getSyncQueue()]);return{data:e,syncQueue:t}}async getAllData(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction([this.stores.data],"readonly").objectStore(this.stores.data).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}async importData(e){return this.db||await this.init(),new Promise((t,s)=>{const r=this.db.transaction([this.stores.data],"readwrite").objectStore(this.stores.data);let a=0;const o=e.length;if(o===0){t();return}const c=()=>{a++,a===o&&t()};e.forEach(d=>{const{id:u,...h}=d,m=r.add(h);m.onsuccess=c,m.onerror=()=>s(m.error)})})}static getInstance(){return this._instance||(this._instance=new Nf),this._instance}}const Fs=Nf.getInstance(),N$=Object.freeze(Object.defineProperty({__proto__:null,OfflineStorageService:Nf,offlineStorage:Fs},Symbol.toStringTag,{value:"Module"}));class Qa{static instance;isOnline=navigator.onLine;syncInProgress=!1;retryTimeouts=new Map;maxRetries=3;retryDelays=[1e3,5e3,15e3];constructor(){this.setupEventListeners(),this.startPeriodicSync()}static getInstance(){return Qa.instance||(Qa.instance=new Qa),Qa.instance}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("BackgroundSync: Connection restored, starting sync"),this.syncAllPendingData()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("BackgroundSync: Connection lost")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.isOnline&&this.syncAllPendingData()}),window.addEventListener("pwa-online",()=>{this.isOnline=!0,this.syncAllPendingData()})}startPeriodicSync(){setInterval(()=>{this.isOnline&&!this.syncInProgress&&this.syncAllPendingData()},300*1e3)}async queueForSync(e,t,s,i="medium"){try{const r={"Content-Type":"application/json"},a=kn.get("auth-token",{encrypt:!0});a&&(r.Authorization=`Bearer ${a}`),await Fs.addToSyncQueue({url:e,method:t.toUpperCase(),headers:r,body:s?JSON.stringify(s):void 0,priority:i,type:"api-request"}),console.log(`BackgroundSync: Queued ${t} ${e} for sync`),this.isOnline&&this.syncAllPendingData()}catch(r){throw console.error("BackgroundSync: Failed to queue item for sync:",r),r}}async syncAllPendingData(){if(this.syncInProgress)return console.log("BackgroundSync: Sync already in progress"),this.getEmptyStats();if(!this.isOnline)return console.log("BackgroundSync: Cannot sync while offline"),this.getEmptyStats();this.syncInProgress=!0,console.log("BackgroundSync: Starting sync process");const e={totalItems:0,successCount:0,failureCount:0,skippedCount:0,errors:[]};try{const t=await Fs.getSyncQueue();if(e.totalItems=t.length,t.length===0)return console.log("BackgroundSync: No items to sync"),e;console.log(`BackgroundSync: Found ${t.length} items to sync`);for(const s of t)try{const i=await this.syncItem(s);i.success?(e.successCount++,await Fs.removeSyncQueueItem(s.id),console.log(`BackgroundSync: Successfully synced ${s.method} ${s.url}`)):i.error&&((s.retryCount||0)>=this.maxRetries?(e.failureCount++,e.errors.push(`Max retries exceeded for ${s.url}: ${i.error}`),await Fs.removeSyncQueueItem(s.id),console.error(`BackgroundSync: Max retries exceeded for ${s.url}`)):(await this.scheduleRetry(s,i),e.skippedCount++))}catch(i){e.failureCount++,e.errors.push(`Sync error for ${s.url}: ${i}`),console.error(`BackgroundSync: Error syncing ${s.url}:`,i)}e.successCount>0&&await this.updateLocalStore(),console.log("BackgroundSync: Sync completed",e),this.dispatchSyncEvent("sync-completed",e)}catch(t){const s=t instanceof Error?t.message:String(t);console.error("BackgroundSync: Sync process failed:",t),e.errors.push(`Sync process failed: ${s}`),this.dispatchSyncEvent("sync-error",{error:s})}finally{this.syncInProgress=!1}return e}async syncItem(e){try{if(!this.isOnline)return{success:!1,itemId:e.id,error:"Offline"};const t=await fetch(e.url,{method:e.method,headers:e.headers,body:e.body});if(t.ok)return{success:!0,itemId:e.id};{let s=`HTTP ${t.status}`;try{s=(await t.json()).message||s}catch{s=t.statusText||s}const i=t.status>=500||t.status===429;return{success:!1,itemId:e.id,error:s,retryAfter:i?this.getRetryDelay(e.retryCount||0):void 0}}}catch(t){return{success:!1,itemId:e.id,error:t instanceof Error?t.message:"Network error"}}}async scheduleRetry(e,t){const s=t.retryAfter||this.getRetryDelay(e.retryCount||0);this.retryTimeouts.has(e.id)&&clearTimeout(this.retryTimeouts.get(e.id)),await Fs.updateSyncQueueItem(e.id,{retryCount:(e.retryCount||0)+1});const i=setTimeout(()=>{this.retryTimeouts.delete(e.id),this.syncAllPendingData()},s);this.retryTimeouts.set(e.id,i),console.log(`BackgroundSync: Scheduled retry for ${e.url} in ${s}ms`)}getRetryDelay(e){return e<this.retryDelays.length?this.retryDelays[e]:Math.min(3e4,this.retryDelays[this.retryDelays.length-1]*Math.pow(2,e-this.retryDelays.length))}async updateLocalStore(){try{const e=await Fs.getUnsyncedData();for(const t of e)t.type==="pain-entry"&&t.synced}catch(e){console.error("BackgroundSync: Failed to update local store:",e)}}getEmptyStats(){return{totalItems:0,successCount:0,failureCount:0,skippedCount:0,errors:[]}}dispatchSyncEvent(e,t){const s=new CustomEvent(`background-sync-${e}`,{detail:t});window.dispatchEvent(s)}async forcSync(){return console.log("BackgroundSync: Force sync requested"),this.syncAllPendingData()}async forceSync(){return this.forcSync()}async clearFailedItems(){try{const t=(await Fs.getSyncQueue()).filter(s=>(s.retryCount||0)>=this.maxRetries);await Promise.all(t.map(s=>Fs.removeSyncQueueItem(s.id))),console.log(`BackgroundSync: Cleared ${t.length} failed items`)}catch(e){console.error("BackgroundSync: Failed to clear failed items:",e)}}async getPendingItemsCount(){try{return(await Fs.getSyncQueue()).length}catch(e){return console.error("BackgroundSync: Failed to get pending items count:",e),0}}getSyncStatus(){return{isOnline:this.isOnline,isSyncing:this.syncInProgress}}async emergencySync(e,t){if(!this.isOnline)return await this.queueForSync(t,"POST",e,"high"),!1;try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${kn.get("auth-token",{encrypt:!0})||""}`},body:JSON.stringify(e)})).ok?(console.log("BackgroundSync: Emergency sync successful"),!0):(await this.queueForSync(t,"POST",e,"high"),!1)}catch(s){return console.error("BackgroundSync: Emergency sync failed:",s),await this.queueForSync(t,"POST",e,"high"),!1}}}class pN{backgroundSync;baseUrl;constructor(){this.backgroundSync=Qa.getInstance(),this.baseUrl="/api"}async syncPainEntry(e){const t=`${this.baseUrl}/pain-entries`;await this.backgroundSync.queueForSync(t,"POST",e,"high")}async syncPainEntryUpdate(e,t){const s=`${this.baseUrl}/pain-entries/${e}`;await this.backgroundSync.queueForSync(s,"PUT",t,"medium")}async syncEmergencyData(e){const t=`${this.baseUrl}/emergency`;return this.backgroundSync.emergencySync(e,t)}async syncActivityLog(e){const t=`${this.baseUrl}/activity-logs`;await this.backgroundSync.queueForSync(t,"POST",e,"low")}async syncSettings(e){const t=`${this.baseUrl}/settings`;await this.backgroundSync.queueForSync(t,"PUT",e,"low")}async getSyncStatus(){const t=(await Fs.getSyncQueue()).filter(a=>a.url.includes("/pain-entries")),s=kn.get("last-sync-time"),{isOnline:i,isSyncing:r}=this.backgroundSync.getSyncStatus();return{pendingEntries:t.length,lastSync:s,isOnline:i,isSyncing:r}}async forceSync(){(await this.backgroundSync.forceSync()).successCount>0&&kn.set("last-sync-time",new Date().toISOString())}}const rg=Qa.getInstance(),k$=new pN,gN=Object.freeze(Object.defineProperty({__proto__:null,BackgroundSyncService:Qa,PainTrackerSync:pN,backgroundSync:rg,painTrackerSync:k$},Symbol.toStringTag,{value:"Module"})),j$={BASE_URL:"/pain-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Il{static instance;installPromptEvent=null;isInstalled=!1;swRegistration=null;isInitialized=!1;capabilities={serviceWorker:!1,pushNotifications:!1,backgroundSync:!1,persistentStorage:!1,installPrompt:!1,fullscreen:!1};constructor(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}static getInstance(){return Il.instance||(Il.instance=new Il),Il.instance}async init(){this.isInitialized||(this.checkInstallStatus(),this.setupInstallPromptListener(),await this.detectCapabilities(),await this.registerServiceWorker(),await this.initializeOfflineStorage(),this.setupOnlineOfflineListeners(),this.setupPerformanceMonitoring(),this.isInitialized=!0,this.dispatchCustomEvent("pwa-initialized",{capabilities:this.capabilities}))}async detectCapabilities(){this.capabilities.serviceWorker="serviceWorker"in navigator,this.capabilities.pushNotifications="Notification"in window&&"PushManager"in window,this.capabilities.backgroundSync="serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,this.capabilities.installPrompt="BeforeInstallPromptEvent"in window,this.capabilities.fullscreen="requestFullscreen"in document.documentElement,"storage"in navigator&&"persist"in navigator.storage&&(this.capabilities.persistentStorage=await navigator.storage.persist())}getCapabilities(){return{...this.capabilities}}async initializeOfflineStorage(){try{await Fs.init(),"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()&&this.dispatchCustomEvent("pwa-persistent-storage-granted")}catch(e){console.error("PWA: Failed to initialize offline storage:",e),this.dispatchCustomEvent("pwa-storage-error",{error:e})}}async registerServiceWorker(){if(!this.capabilities.serviceWorker){console.warn("PWA: Service Workers not supported");return}try{const e="/pain-tracker/",t=`${e}sw.js`.replace(/\/+/g,"/");this.swRegistration=await navigator.serviceWorker.register(t,{scope:e,updateViaCache:"none"}),this.swRegistration.addEventListener("updatefound",()=>{const s=this.swRegistration?.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&(navigator.serviceWorker.controller?this.notifyUpdate():this.notifyInstalled())})}),navigator.serviceWorker.addEventListener("message",s=>{this.handleServiceWorkerMessage(s)}),this.capabilities.backgroundSync&&this.setupBackgroundSync(),this.monitorServiceWorkerPerformance()}catch(e){console.error("PWA: Service Worker registration failed:",e),this.dispatchCustomEvent("pwa-sw-registration-failed",{error:e})}}async __test_registerSW(){this.swRegistration||!this.capabilities.serviceWorker||await this.registerServiceWorker()}handleServiceWorkerMessage(e){const{data:t}=e;switch(t.type){case"SW_UPDATE_AVAILABLE":this.dispatchCustomEvent("pwa-update-available");break;case"SW_OFFLINE_FALLBACK":this.dispatchCustomEvent("pwa-offline-fallback",{url:t.url});break;case"SW_CACHE_UPDATED":this.dispatchCustomEvent("pwa-cache-updated",{cacheName:t.cacheName});break;case"SW_SYNC_COMPLETED":this.dispatchCustomEvent("pwa-sync-completed",{stats:t.stats});break}}monitorServiceWorkerPerformance(){if(!this.swRegistration)return;let e=0,t=0;navigator.serviceWorker.addEventListener("message",s=>{s.data.type==="CACHE_HIT"?e++:s.data.type==="CACHE_MISS"&&t++}),setInterval(()=>{const s=e+t;if(s>0){const i=e/s*100;this.dispatchCustomEvent("pwa-cache-performance",{hitRatio:Number(Vt(i,2)),totalRequests:s}),e=0,t=0}},6e4)}setupInstallPromptListener(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.installPromptEvent=e,this.dispatchCustomEvent("pwa-install-available")}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.installPromptEvent=null,this.dispatchCustomEvent("pwa-installed")})}async showInstallPrompt(){if(!this.installPromptEvent)return!1;try{return await this.installPromptEvent.prompt(),(await this.installPromptEvent.userChoice).outcome==="accepted"}catch(e){return console.error("PWA: Error showing install prompt:",e),!1}}isInstallPromptAvailable(){return this.installPromptEvent!==null}checkInstallStatus(){window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0),window.navigator.standalone&&(this.isInstalled=!0)}isAppInstalled(){return this.isInstalled}setupOnlineOfflineListeners(){window.addEventListener("online",async()=>{await this.handleOnlineStatus(!0),this.dispatchCustomEvent("pwa-online")}),window.addEventListener("offline",()=>{this.handleOnlineStatus(!1),this.dispatchCustomEvent("pwa-offline")}),this.monitorConnectionQuality()}async handleOnlineStatus(e){if(e)try{const t=rg;if(typeof t.forceSync=="function"?await t.forceSync():typeof t.forcSync=="function"&&await t.forcSync(),this.swRegistration?.active&&this.swRegistration.active.postMessage({type:"ONLINE"}),"sync"in this.swRegistration)try{await this.swRegistration.sync.register("pain-tracker-sync")}catch(s){console.error("PWA: Background sync registration failed:",s)}}catch(t){console.error("PWA: Failed to sync data when coming online:",t)}}monitorConnectionQuality(){if("connection"in navigator){const e=navigator.connection,t=()=>{e&&this.dispatchCustomEvent("pwa-connection-change",{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData})};e&&typeof e.addEventListener=="function"&&e.addEventListener("change",t),t()}this.startConnectionQualityTests()}startConnectionQualityTests(){setInterval(async()=>{if(!navigator.onLine)return;const e=performance.now();try{const s="/pain-tracker/manifest.json".replace(/\/+/g,"/");await fetch(s,{mode:"cors",cache:"no-cache"});const r=performance.now()-e;this.dispatchCustomEvent("pwa-connection-test",{latency:r,quality:r<100?"good":r<500?"moderate":"poor"})}catch{this.dispatchCustomEvent("pwa-connection-test",{latency:-1,quality:"offline"})}},3e4)}setupPerformanceMonitoring(){"performance"in window&&(window.addEventListener("load",()=>{setTimeout(()=>{const t=performance.getEntriesByType("navigation")[0];this.dispatchCustomEvent("pwa-performance-metrics",{loadTime:t.loadEventEnd-t.fetchStart,domContentLoaded:t.domContentLoadedEventEnd-t.fetchStart,firstPaint:this.getFirstPaint(),cacheHitRatio:this.getCacheHitRatio()})},0)}),new PerformanceObserver(t=>{const i=t.getEntries().filter(r=>r.duration>1e3);i.length>0&&this.dispatchCustomEvent("pwa-slow-resources",{resources:i.map(r=>{const a=r;return{name:r.name,duration:r.duration,size:a.transferSize||0}})})}).observe({type:"resource",buffered:!0}))}getFirstPaint(){const t=performance.getEntriesByType("paint").find(s=>s.name==="first-paint");return t?t.startTime:0}getCacheHitRatio(){const e=kn.get("pwa-cache-hit-ratio");return parseFloat(e||"0")}isOnline(){return navigator.onLine}async requestNotificationPermission(){return"Notification"in window?Notification.permission==="default"?await Notification.requestPermission():Notification.permission:(console.warn("PWA: This browser does not support notifications"),"denied")}async subscribeToPushNotifications(){if(!this.swRegistration)return console.error("PWA: Service Worker not registered"),null;try{if(await this.requestNotificationPermission()!=="granted")return console.warn("PWA: Notification permission not granted"),null;const t=j$?.VITE_VAPID_PUBLIC_KEY;return t?await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(t).buffer}):(console.error("PWA: VAPID public key not found"),null)}catch(e){return console.error("PWA: Failed to subscribe to push notifications:",e),null}}async scheduleNotification(e,t,s){!("Notification"in window)||await this.requestNotificationPermission()!=="granted"||setTimeout(()=>{const r="/pain-tracker/";new Notification(e,{body:t,icon:`${r}icons/icon-192x192.png`.replace(/\/+/g,"/"),badge:`${r}icons/badge-72x72.png`.replace(/\/+/g,"/"),tag:"pain-tracker-reminder",requireInteraction:!0})},s)}setupBackgroundSync(){this.swRegistration&&"sync"in this.swRegistration}notifyUpdate(){this.dispatchCustomEvent("pwa-update-available")}notifyInstalled(){this.dispatchCustomEvent("pwa-content-cached")}async updateApp(){if(this.swRegistration){const e=this.swRegistration;e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}}dispatchCustomEvent(e,t){const s=new CustomEvent(e,{detail:t});window.dispatchEvent(s)}urlBase64ToUint8Array(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(s),r=new Uint8Array(i.length);for(let a=0;a<i.length;++a)r[a]=i.charCodeAt(a);return r}async clearCaches(){if("caches"in window){const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t)))}}async getCacheSize(){if(!("storage"in navigator&&"estimate"in navigator.storage))return 0;try{return(await navigator.storage.estimate()).usage||0}catch(e){return console.error("PWA: Failed to get cache size:",e),0}}async exportOfflineData(){try{const e=await Fs.exportData();return{entries:kn.safeJSON("painEntries",[]),settings:kn.safeJSON("pain-tracker-settings",{}),timestamp:new Date().toISOString(),syncQueue:e.syncQueue}}catch(e){throw console.error("PWA: Failed to export offline data:",e),e}}async importOfflineData(e){try{if(e.entries&&kn.set("painEntries",e.entries),e.settings&&kn.set("pain-tracker-settings",e.settings),e.syncQueue)for(const t of e.syncQueue){const s=t;await Fs.addToSyncQueue({url:s.url,method:s.method,headers:s.headers||{},body:typeof s.body=="string"?s.body:JSON.stringify(s.body||{}),priority:s.priority||"medium",type:s.type||"sync"})}this.dispatchCustomEvent("pwa-data-imported")}catch(t){throw console.error("PWA: Failed to import offline data:",t),t}}async enableHealthDataSync(){try{return"storage"in navigator&&"persist"in navigator.storage&&!await navigator.storage.persist()?(console.warn("PWA: Persistent storage not granted for health data"),!1):this.swRegistration&&"sync"in this.swRegistration?(await this.swRegistration.sync.register("health-data-sync"),!0):!1}catch(e){return console.error("PWA: Failed to enable health data sync:",e),!1}}async scheduleHealthReminder(e,t,s){if(!("Notification"in window)){console.warn("PWA: Notifications not supported");return}if(await this.requestNotificationPermission()!=="granted"){console.warn("PWA: Notification permission not granted");return}const r=new Date,a=s.getTime()-r.getTime();if(a<=0){this.showNotification(e,t);return}setTimeout(()=>{this.showNotification(e,t)},a)}showNotification(e,t){const s="/pain-tracker/";new Notification(e,{body:t,icon:`${s}icons/icon-192x192.png`.replace(/\/+/g,"/"),badge:`${s}icons/badge-72x72.png`.replace(/\/+/g,"/"),tag:"health-reminder",requireInteraction:!0,data:{url:`${s}?reminder=true`.replace(/\/+/g,"/"),timestamp:new Date().toISOString()}})}async getDiagnostics(){const e=await Fs.getStorageUsage(),t=await rg.getPendingItemsCount(),s=kn.get("last-sync-time");return{isInstalled:this.isInstalled,hasServiceWorker:!!this.swRegistration,isOnline:navigator.onLine,storageUsage:e,capabilities:this.capabilities,pendingSyncItems:t,lastSync:s}}async clearPWAData(){try{await this.clearCaches(),await Fs.clearAllData(),kn.keys().forEach(e=>kn.remove(e)),this.dispatchCustomEvent("pwa-data-cleared")}catch(e){throw console.error("PWA: Failed to clear PWA data:",e),e}}async resetServiceWorker(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(t=>t.unregister()))}await this.clearCaches(),await this.clearPWAData(),this.dispatchCustomEvent("pwa-service-worker-reset")}catch(e){throw console.error("PWA: Failed to reset service worker:",e),e}}async forceRefresh(){try{await this.clearCaches(),window.location.reload()}catch(e){console.error("PWA: Failed to force refresh:",e),window.location.reload()}}async checkForUpdates(){if(!this.swRegistration)return!1;try{return await this.swRegistration.update(),!!this.swRegistration.waiting}catch(e){return console.error("PWA: Failed to check for updates:",e),!1}}}const Rl=Il.getInstance();function _$(){const[n,e]=W.useState(!1),[t,s]=W.useState(!1);W.useEffect(()=>{const a=()=>{Rl.isAppInstalled()||e(!0)},o=()=>{e(!1),s(!1)};return Rl.isInstallPromptAvailable()&&!Rl.isAppInstalled()&&e(!0),window.addEventListener("pwa-install-available",a),window.addEventListener("pwa-installed",o),()=>{window.removeEventListener("pwa-install-available",a),window.removeEventListener("pwa-installed",o)}},[]);const i=async()=>{s(!0);try{await Rl.showInstallPrompt()||s(!1)}catch(a){console.error("Failed to install PWA:",a),s(!1)}},r=()=>{e(!1),sessionStorage.setItem("pwa-install-dismissed","true")};return sessionStorage.getItem("pwa-install-dismissed")||!n?null:l.jsx(We,{className:"fixed bottom-4 left-4 z-50 shadow-lg border-primary max-w-sm w-[min(92%,420px)]",role:"dialog","aria-label":"Install Pain Tracker",children:l.jsxs(Ve,{className:"p-4",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:l.jsx(h2,{className:"h-6 w-6 text-primary"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Install Pain Tracker"}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add to your home screen for quick access and offline use"}),l.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[l.jsxs(Je,{size:"sm",onClick:i,disabled:t,className:"flex items-center space-x-1",children:[l.jsx(pd,{className:"h-4 w-4"}),l.jsx("span",{children:t?"Installing...":"Install"})]}),l.jsx(Je,{variant:"ghost",size:"sm",onClick:r,className:"text-muted-foreground",children:l.jsx(ti,{className:"h-4 w-4"})})]})]})]}),l.jsx("div",{className:"mt-4 pt-3 border-t border-muted",children:l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full"}),l.jsx("span",{children:"Works offline"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),l.jsx("span",{children:"Fast app-like experience"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full"}),l.jsx("span",{children:"Reminder notifications"})]})]})})]})})}function C$(){const[n,e]=W.useState({isOnline:navigator.onLine,pendingSync:0,isSyncing:!1});return W.useEffect(()=>{const t=async()=>{try{const{backgroundSync:o}=await va(async()=>{const{backgroundSync:u}=await Promise.resolve().then(()=>gN);return{backgroundSync:u}},void 0),c=await o.getPendingItemsCount(),{isSyncing:d}=o.getSyncStatus();e(u=>({...u,pendingSync:c,isSyncing:d}))}catch{e(o=>({...o,pendingSync:0,isSyncing:!1}))}},s=()=>{e(o=>({...o,isOnline:!0})),t()},i=()=>e(o=>({...o,isOnline:!1})),r=()=>t();window.addEventListener("online",s),window.addEventListener("offline",i),window.addEventListener("background-sync-sync-completed",r),window.addEventListener("background-sync-sync-started",r),t();const a=setInterval(t,3e4);return()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i),window.removeEventListener("background-sync-sync-completed",r),window.removeEventListener("background-sync-sync-started",r),clearInterval(a)}},[]),n.isOnline&&n.pendingSync===0&&!n.isSyncing?null:l.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg border shadow-lg border-l-4 border-l-blue-500 p-3 max-w-xs",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[!n.isOnline&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),l.jsx("span",{className:"text-sm font-medium text-red-700",children:"Offline"})]}),n.isSyncing&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Syncing..."})]}),n.pendingSync>0&&!n.isSyncing&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:[n.pendingSync," pending"]})]})]}),!n.isOnline&&l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Your data is saved locally and will sync when you're back online"})]})})}function A$(){const[n,e]=W.useState(!1);W.useEffect(()=>{try{const s=kn.get(bm);e(s!=="true")}catch{e(!0)}},[]);const t=()=>{try{kn.set(bm,"true")}catch{try{localStorage.setItem(bm,"1")}catch{}}e(!1)};return n?l.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-3xl w-full px-4",children:l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4 shadow-md flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:vm.title}),l.jsx("p",{className:"text-sm mt-1",children:vm.message}),l.jsx("a",{className:"text-xs text-yellow-700 underline mt-2 inline-block",href:vm.supportUrl,target:"_blank",rel:"noreferrer",children:"Report an issue or give feedback"})]}),l.jsx("div",{className:"ml-4 flex items-start",children:l.jsx("button",{"aria-label":"Dismiss beta notice",onClick:t,className:"text-sm bg-yellow-600 text-white px-3 py-1 rounded-md hover:bg-yellow-700",children:"Dismiss"})})]})}):null}const P$=n=>n.includes("headache")?["head","migraine"]:n.includes("back")?["back","spine"]:["general"];function L$(){const n=new CustomEvent("quick-log",{detail:{source:"quick-actions",time:new Date().toISOString()}});window.dispatchEvent(n)}function M$(){const[n,e]=W.useState([]),[t,s]=W.useState(!1);function i(){const r={time:new Date().toISOString(),suggestedTags:[]},o=P$("");r.suggestedTags=o,window.dispatchEvent(new CustomEvent("quick-note",{detail:r})),e(o),setTimeout(()=>e([]),6e3)}return l.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:l.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[t&&l.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[l.jsx("button",{"aria-label":"Quick note",onClick:i,className:"flex items-center justify-center w-12 h-12 rounded-full bg-secondary text-secondary-foreground shadow-md",title:"Quick note",children:"📝"}),l.jsx("button",{"aria-label":"Quick log pain",onClick:()=>{L$(),s(!1)},className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary text-primary-foreground shadow-md",title:"Quick log pain",children:"+"})]}),l.jsx("button",{"aria-label":"Open quick actions",onClick:()=>s(r=>!r),className:"flex items-center justify-center w-14 h-14 rounded-full bg-foreground text-foreground-contrast shadow-lg",children:t?"×":"✚"}),n.length>0&&l.jsxs("div",{className:"mt-2 bg-card border rounded p-2 text-sm shadow-md",children:["Suggested tags: ",n.join(", ")]})]})})}const Yu="pain-tracker:notification-consent";function T$(){const[n,e]=W.useState(()=>{try{return localStorage.getItem(Yu)}catch{return null}}),{bottomLeft:t}=bf();W.useEffect(()=>{n||t.info("Get gentle notifications?","We can notify you about important pain pattern alerts and medication reminders. You can change this later in Settings.",{label:"Allow",onClick:s},{onDismiss:()=>{localStorage.setItem(Yu,"dismissed"),e("dismissed")}})},[n,t]);async function s(){try{const i=await Notification.requestPermission();localStorage.setItem(Yu,i),e(i)}catch{localStorage.setItem(Yu,"denied"),e("denied")}}return null}const Zu="pain-tracker:analytics-consent";function D$(){const[n,e]=W.useState(()=>{try{return localStorage.getItem(Zu)}catch{return null}}),{bottomLeft:t}=bf(),s=async()=>{try{localStorage.setItem(Zu,"granted"),e("granted"),await Vl.requestConsent()&&t.success("Thank you!","Your anonymous usage data will help us improve Pain Tracker for everyone.")}catch{localStorage.setItem(Zu,"error"),e("error")}};return W.useEffect(()=>{if(!n){const i=setTimeout(()=>{t.info("Help improve Pain Tracker?","We'd like to collect anonymous usage data to improve the app. Your pain data stays private and local. No personal information is collected.",{label:"Allow",onClick:s},{onDismiss:()=>{localStorage.setItem(Zu,"declined"),e("declined"),Vl.updatePrivacyConfig({enableAnalytics:!1})}})},2e3);return()=>clearTimeout(i)}},[n,t,s]),null}const E$=(n,e)=>{for(let t=1;t<n.length;t++)if(n[t]-n[t-1]>=e)return t;return-1},I$=(n,e,t)=>{for(let s=e;s<n.length;s++){const i=n.slice(s-e,s).reduce((r,a)=>r+a,0)/e;if(n[s]-i>=t)return s}return-1},R$=(n,e)=>{const t=n.reduce((i,r)=>i+r,0)/n.length,s=Math.sqrt(n.reduce((i,r)=>i+Math.pow(r-t,2),0)/n.length);for(let i=0;i<n.length;i++)if(Math.abs(n[i]-t)/s>=e)return i;return-1},O$="pain-tracker:alerts-settings",F$="pain-tracker:notification-consent";function z$(n){const e=W.useRef(new Set);W.useEffect(()=>{try{const t=localStorage.getItem(O$),s=t?JSON.parse(t):{threshold:3},i=localStorage.getItem(F$),r=n.map(c=>c.pain),a=[c=>E$(c,s.threshold),c=>I$(c,3,1),c=>R$(c,2)];let o=-1;for(const c of a){const d=c(r);if(d>=0){o=d;break}}if(o>=0&&!e.current.has(o)){e.current.add(o);const c=`Sudden pain increase to ${r[o]} (entry ${o+1})`;try{iN({id:`${Date.now()}-${Math.random().toString(36).slice(2,7)}`,time:new Date().toISOString(),message:c}),window.dispatchEvent(new Event("alerts-log-updated"))}catch{}i==="granted"&&typeof Notification<"u"?new Notification("Pain pattern detected",{body:c}):console.debug("Pattern alert suppressed (no consent)")}}catch(t){console.debug("usePatternAlerts: error",t)}},[n])}function B$(){const[n,e]=W.useState(navigator.onLine);return W.useEffect(()=>{const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[]),n?null:l.jsx("div",{className:"bg-orange-500 text-white px-4 py-2",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bj,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"You're currently offline"}),l.jsx("p",{className:"text-xs opacity-90",children:"Your data is saved locally and will sync when you're back online"})]})]}),l.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md transition-colors",children:[l.jsx(fh,{className:"h-4 w-4"}),l.jsx("span",{className:"text-xs",children:"Retry"})]})]})})}function $$({message:n="Loading Pain Tracker Pro...",progress:e,showProgress:t=!1,className:s=""}){const[i,r]=W.useState(0);return W.useEffect(()=>{if(e!==void 0){const a=setTimeout(()=>{r(e)},100);return()=>clearTimeout(a)}},[e]),l.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 ${s}`,children:l.jsxs("div",{className:"text-center space-y-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"animate-pulse",children:l.jsx(p2,{size:96,className:"mx-auto"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-blue-200 animate-ping opacity-75"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-32 h-32 rounded-full border-2 border-green-200 animate-ping opacity-50 animation-delay-150"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Pain Tracker",l.jsx("span",{className:"inline-flex items-center ml-2 px-2 py-1 rounded-full text-xs bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold",children:"PRO"})]}),l.jsx("p",{className:"text-slate-600 font-medium",children:"AI-Powered Pain Management"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-slate-700 font-medium",children:n}),t&&l.jsxs("div",{className:"w-64 mx-auto",children:[l.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-2",children:[l.jsx("span",{children:"Loading..."}),l.jsxs("span",{children:[Math.round(i),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500 ease-out",style:{width:`${i}%`}})})]}),!t&&l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce animation-delay-100"}),l.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce animation-delay-200"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs text-slate-600 max-w-md mx-auto",children:[l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("span",{children:"FHIR Compliant"})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})}),l.jsx("span",{children:"AI Analytics"})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),l.jsx("span",{children:"Offline Ready"})]})]})]})})}const W$=`
.animation-delay-100 {
  animation-delay: 0.1s;
}
.animation-delay-150 {
  animation-delay: 0.15s;
}
.animation-delay-200 {
  animation-delay: 0.2s;
}
`;if(typeof document<"u"){const n=document.createElement("style");n.textContent=W$,document.head.appendChild(n)}const U$=()=>l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsxs("div",{className:"text-center p-8 bg-card rounded-lg border shadow-lg max-w-md mx-4",children:[l.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"We encountered an unexpected error. Please try refreshing the page."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"Refresh Page"})]})}),q$=()=>l.jsx($$,{message:"Loading Pain Tracker Pro..."});function V$(){W.useEffect(()=>{Rl.isAppInstalled(),(async()=>{try{const{offlineStorage:s}=await va(async()=>{const{offlineStorage:i}=await Promise.resolve().then(()=>N$);return{offlineStorage:i}},void 0);await s.init();try{await va(()=>Promise.resolve().then(()=>gN),void 0)}catch{}await Rl.enableHealthDataSync()}catch{}})()},[]);const e=Hl(zk).map(t=>({time:t.timestamp,pain:t.baselineData?.pain??0}));return z$(e),l.jsx(B4,{children:l.jsx(jE,{children:l.jsx(lB,{children:l.jsxs("div",{className:"min-h-screen bg-background transition-colors",children:[l.jsx(B$,{}),l.jsx(A$,{}),l.jsx(M$,{}),l.jsx(T$,{}),l.jsx(D$,{}),l.jsx(gk,{fallback:l.jsx(U$,{}),children:l.jsx(W.Suspense,{fallback:l.jsx(q$,{}),children:l.jsx(SB,{})})}),l.jsx(_$,{}),l.jsx(C$,{})]})})})})}fk.createRoot(document.getElementById("root")).render(l.jsx(Ge.StrictMode,{children:l.jsx(V$,{})}));export{pa as C,sn as _,We as a,bt as b,xm as c,wt as d,Ve as e,Vw as g,l as j};
//# sourceMappingURL=index-NfVs-4jR.js.map
