const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClinicalPDFExporter-COWhgg-f.js","assets/pdf-vendor-zZbfvrDE.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./pdf-vendor-zZbfvrDE.js";import{r,j as t}from"./react-vendor-CM2d6bHp.js";import{X as o,F as a,D as n}from"./icons-vendor-DZ-9b690.js";import{h as i}from"./index-B7vNx0HN.js";import"./chart-vendor-C6dKBweC.js";import"./state-vendor-gOFTyJpA.js";import"./date-vendor-Bi3xipBn.js";import"./i18n-vendor-C-xkjauL.js";const s=({isOpen:e,onClose:a,onSubmit:n,initialData:i={}})=>{const[s,l]=r.useState({patientName:i.patientName||"",patientDOB:i.patientDOB||"",patientAddress:i.patientAddress||"",patientPhone:i.patientPhone||"",claimNumber:i.claimNumber||"",injuryDate:i.injuryDate||"",employerName:i.employerName||"",physicianName:i.physicianName||"",physicianPhone:i.physicianPhone||""}),[c,m]=r.useState({});if(!e)return null;const d=(e,r)=>{l(t=>({...t,[e]:r})),c[e]&&m(r=>({...r,[e]:void 0}))};return t.jsxDEV("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",role:"dialog","aria-labelledby":"patient-info-title","aria-modal":"true",children:t.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxDEV("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-lg flex items-center justify-between",children:[t.jsxDEV("div",{children:[t.jsxDEV("h2",{id:"patient-info-title",className:"text-xl font-bold",children:"Patient & Claim Information"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:98,columnNumber:13},void 0),t.jsxDEV("p",{className:"text-sm text-blue-100 mt-1",children:"Required for WorkSafe BC clinical report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:97,columnNumber:11},void 0),t.jsxDEV("button",{onClick:a,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors","aria-label":"Close dialog",children:t.jsxDEV(o,{size:24},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:108,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:103,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:96,columnNumber:9},void 0),t.jsxDEV("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return s.patientName.trim()||(e.patientName="Patient name is required"),s.claimNumber.trim()||(e.claimNumber="Claim number is required for WorkSafe BC"),s.injuryDate||(e.injuryDate="Injury date is required"),m(e),0===Object.keys(e).length})()&&(n(s),a())},className:"p-6 space-y-6",children:[t.jsxDEV("fieldset",{children:[t.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsxDEV("span",{className:"text-2xl",children:"ðŸ‘¤"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:117,columnNumber:15},void 0)," Patient Information"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:116,columnNumber:13},void 0),t.jsxDEV("div",{className:"space-y-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"patientName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",t.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:126,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:122,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",id:"patientName",value:s.patientName,onChange:e=>d("patientName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(c.patientName?"border-red-500":"border-gray-300"),placeholder:"John Doe","aria-invalid":!!c.patientName,"aria-describedby":c.patientName?"patientName-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:128,columnNumber:17},void 0),c.patientName&&t.jsxDEV("p",{id:"patientName-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.patientName},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:141,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:121,columnNumber:15},void 0),t.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"patientDOB",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:149,columnNumber:19},void 0),t.jsxDEV("input",{type:"date",id:"patientDOB",value:s.patientDOB,onChange:e=>d("patientDOB",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:155,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:148,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"patientPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:165,columnNumber:19},void 0),t.jsxDEV("input",{type:"tel",id:"patientPhone",value:s.patientPhone,onChange:e=>d("patientPhone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"(555) 123-4567"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:171,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:164,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:147,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"patientAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:183,columnNumber:17},void 0),t.jsxDEV("textarea",{id:"patientAddress",value:s.patientAddress,onChange:e=>d("patientAddress",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"123 Main St, City, Province, Postal Code"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:189,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:120,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:115,columnNumber:11},void 0),t.jsxDEV("fieldset",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsxDEV("span",{className:"text-2xl",children:"ðŸ“‹"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:204,columnNumber:15},void 0)," WorkSafe BC Claim"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:203,columnNumber:13},void 0),t.jsxDEV("div",{className:"space-y-4",children:[t.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"claimNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Claim Number ",t.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:214,columnNumber:34},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:210,columnNumber:19},void 0),t.jsxDEV("input",{type:"text",id:"claimNumber",value:s.claimNumber,onChange:e=>d("claimNumber",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(c.claimNumber?"border-red-500":"border-gray-300"),placeholder:"WCB-2025-12345","aria-invalid":!!c.claimNumber,"aria-describedby":c.claimNumber?"claimNumber-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:216,columnNumber:19},void 0),c.claimNumber&&t.jsxDEV("p",{id:"claimNumber-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.claimNumber},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:229,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:209,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"injuryDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Date of Injury ",t.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:243,columnNumber:36},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:239,columnNumber:19},void 0),t.jsxDEV("input",{type:"date",id:"injuryDate",value:s.injuryDate,onChange:e=>d("injuryDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(c.injuryDate?"border-red-500":"border-gray-300"),"aria-invalid":!!c.injuryDate,"aria-describedby":c.injuryDate?"injuryDate-error":void 0},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:245,columnNumber:19},void 0),c.injuryDate&&t.jsxDEV("p",{id:"injuryDate-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.injuryDate},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:257,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:208,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"employerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Employer Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:268,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",id:"employerName",value:s.employerName,onChange:e=>d("employerName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Company Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:267,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:207,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:202,columnNumber:11},void 0),t.jsxDEV("fieldset",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsxDEV("legend",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsxDEV("span",{className:"text-2xl",children:"ðŸ©º"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:289,columnNumber:15},void 0)," Healthcare Provider"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:288,columnNumber:13},void 0),t.jsxDEV("div",{className:"space-y-4",children:t.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"physicianName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Physician Name"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:295,columnNumber:19},void 0),t.jsxDEV("input",{type:"text",id:"physicianName",value:s.physicianName,onChange:e=>d("physicianName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Dr. Jane Smith"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:301,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:294,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{htmlFor:"physicianPhone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Physician Phone"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:312,columnNumber:19},void 0),t.jsxDEV("input",{type:"tel",id:"physicianPhone",value:s.physicianPhone,onChange:e=>d("physicianPhone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"(555) 987-6543"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:318,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:311,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:293,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:287,columnNumber:11},void 0),t.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:t.jsxDEV("p",{className:"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2",children:[t.jsxDEV("span",{className:"text-lg",children:"ðŸ’¡"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:334,columnNumber:15},void 0),t.jsxDEV("span",{children:[t.jsxDEV("strong",{children:"Privacy Notice:"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:336,columnNumber:17},void 0)," This information is used only to generate your clinical report. All data remains on your device and is encrypted. Fields marked with * are required for WorkSafe BC compliance."]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:335,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:333,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:332,columnNumber:11},void 0),t.jsxDEV("div",{className:"flex gap-3 pt-4",children:[t.jsxDEV("button",{type:"button",onClick:a,className:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:345,columnNumber:13},void 0),t.jsxDEV("button",{type:"submit",className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg",children:"Generate Report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:344,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:94,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/PatientClaimInfoModal.tsx",lineNumber:88,columnNumber:5},void 0)},l=(e,r,t)=>new Promise((o,a)=>{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i)return void a(new Error("Failed to get canvas context"));n.width=2*r,n.height=2*t,i.scale(2,2);const s=new Image,l=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(l);s.onload=()=>{i.drawImage(s,0,0),URL.revokeObjectURL(c);try{const e=n.toDataURL("image/png",1);o(e)}catch(e){a(e)}},s.onerror=()=>{URL.revokeObjectURL(c),a(new Error("Failed to load SVG image"))},s.src=c}),c=async(e,r="canvas")=>{const t=document.getElementById(e)||document.querySelector(e);return t?"canvas"===r&&t instanceof HTMLCanvasElement?(e=>{try{return e.toDataURL("image/png",1)}catch(r){return""}})(t):"svg"===r&&t instanceof SVGElement?await(async e=>{try{const r=e.cloneNode(!0),t=window.getComputedStyle(e),o=parseInt(t.width),a=parseInt(t.height);r.setAttribute("width",o.toString()),r.setAttribute("height",a.toString());const n=(new XMLSerializer).serializeToString(r);return await l(n,o,a)}catch(r){return""}})(t):"":""},m=({entries:o,moodEntries:l=[],className:m="",variant:d="button"})=>{const[u,p]=r.useState(!1),[x,b]=r.useState(!1),[N,f]=r.useState(null),v=r.useCallback(async({action:e,actionType:r="export",outcome:t="success",details:a={}})=>{try{await i.logAuditEvent({actionType:r,userId:"local-user",userRole:"patient",resourceType:"ClinicalPDFExport",outcome:t,details:{action:e,entryCount:o.length,moodEntryCount:l.length,...a}})}catch(n){}},[o.length,l.length]),y=()=>{if(0===o.length)return f("No pain entries to export"),void v({action:"clinical-pdf-export",outcome:"failure",details:{reason:"no-entries"}});f(null),p(!0),v({action:"clinical-pdf-export",actionType:"access",details:{step:"patient-info-modal"}})},k=async r=>{b(!0),f(null),v({action:"clinical-pdf-export",details:{stage:"generation-start",hasPatientInfo:Boolean(r)}});try{await((e=2e3)=>new Promise(r=>{requestAnimationFrame(()=>{setTimeout(r,e)})}))(1e3);const t=await(async e=>{const r={};for(const t of e)r[t.id]=await c(t.id,t.type);return r})([{id:"pain-trend-chart",type:"canvas"},{id:"pain-distribution-chart",type:"canvas"}]),{ClinicalPDFExporter:a}=await e(async()=>{const{ClinicalPDFExporter:e}=await import("./ClinicalPDFExporter-COWhgg-f.js");return{ClinicalPDFExporter:e}},__vite__mapDeps([0,1])),n=new a;await n.generateReport({entries:o,patientInfo:r,moodEntries:l,charts:{painTrend:t["pain-trend-chart"],painDistribution:t["pain-distribution-chart"]},includeNarrative:!0}),"vibrate"in navigator&&navigator.vibrate([100,50,100]),await v({action:"clinical-pdf-export",details:{stage:"generation-complete",chartsCaptured:Object.keys(t).length}})}catch(t){f("Failed to generate PDF. Please try again."),await v({action:"clinical-pdf-export",outcome:"failure",details:{stage:"generation-error",error:t instanceof Error?t.message:"unknown-error"}})}finally{b(!1)}};return"compact"===d?t.jsxDEV(t.Fragment,{children:[t.jsxDEV("button",{onClick:y,disabled:x||0===o.length,className:`inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium ${m}`,"aria-label":"Export clinical PDF report",children:x?t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:161,columnNumber:15},void 0),"Exporting..."]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:160,columnNumber:13},void 0):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(a,{size:16},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:166,columnNumber:15},void 0),"Export PDF"]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:165,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:153,columnNumber:9},void 0),N&&t.jsxDEV("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",role:"alert",children:N},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:173,columnNumber:11},void 0),t.jsxDEV(s,{isOpen:u,onClose:()=>p(!1),onSubmit:k},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:178,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:152,columnNumber:7},void 0):t.jsxDEV("div",{className:m,children:[t.jsxDEV("button",{onClick:y,disabled:x||0===o.length,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl font-medium text-lg","aria-label":"Export clinical PDF report",children:x?t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:197,columnNumber:13},void 0),t.jsxDEV("span",{children:"Generating PDF Report..."},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:196,columnNumber:11},void 0):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(n,{size:24},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:202,columnNumber:13},void 0),t.jsxDEV("span",{children:"Export Clinical PDF Report"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:203,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:201,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:189,columnNumber:7},void 0),N&&t.jsxDEV("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",role:"alert",children:t.jsxDEV("p",{className:"text-sm text-red-800 dark:text-red-300",children:N},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:213,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:209,columnNumber:9},void 0),0===o.length&&t.jsxDEV("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 text-center",children:"Start tracking your pain to generate clinical reports"},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:218,columnNumber:9},void 0),t.jsxDEV(s,{isOpen:u,onClose:()=>p(!1),onSubmit:k},void 0,!1,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:223,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kay/Documents/Projects/pain-tracker/src/components/export/ClinicalPDFExportButton.tsx",lineNumber:188,columnNumber:5},void 0)};export{m as ClinicalPDFExportButton};
