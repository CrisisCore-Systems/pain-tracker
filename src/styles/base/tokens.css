/**
 * CSS Custom Properties (Design Tokens)
 * Single source of truth for the main application color system.
 * 
 * TOKEN SYSTEMS:
 * - This file: --color-*, --chart-series-*, --color-pain-* (used by Tailwind + main app)
 * - fused-v2.css: --ink-*, --surface-*, --severity-* (used by design-system components)
 * 
 * THEME STRATEGY:
 * - Dark mode is DEFAULT (trauma-informed design)
 * - Light mode is opt-in via :not(.dark) selector
 * - Both .dark class and [data-theme="dark"] attribute are supported
 * 
 * ACCESSIBILITY:
 * - All color combinations meet WCAG 2.1 AA contrast requirements (4.5:1 for text)
 * - Pain severity colors are distinguishable for color-blind users
 * - High contrast mode supported via @media (prefers-contrast: high)
 * - See scripts/contrast-audit.js for automated contrast validation
 */

:root {
  --radius: 0.5rem;
  /* Allow both light and dark color schemes */
  color-scheme: light dark;

  /* ===== SEMANTIC COLOR TOKENS ===== */
  --color-success: 21 128 61;
  --color-success-foreground: 255 255 255;
  --color-success-text: 34 197 94;
  --color-warning: 180 83 9;
  --color-warning-foreground: 255 255 255;
  --color-warning-text: 245 158 11;
  --color-error: 185 28 28;
  --color-error-foreground: 255 255 255;
  --color-error-text: 239 68 68;
  --color-info: 14 116 144;
  --color-info-foreground: 255 255 255;
  --color-info-text: 14 165 233;

  /* ===== BASE DARK MODE COLORS (DEFAULT) ===== */
  --color-background: 15 23 42;
  --color-foreground: 248 250 252;
  --color-card: 30 41 59;
  --color-card-foreground: 241 245 249;
  --color-popover: 30 41 59;
  --color-popover-foreground: 241 245 249;
  --color-primary: 3 105 161;
  --color-primary-foreground: 255 255 255;
  --color-primary-text: 14 165 233;
  --color-secondary: 21 128 61;
  --color-secondary-foreground: 255 255 255;
  --color-secondary-text: 34 197 94;
  --color-muted: 51 65 85;
  --color-muted-foreground: 203 213 225;
  --color-accent: 126 34 206;
  --color-accent-foreground: 255 255 255;
  --color-accent-text: 168 85 247;
  --color-destructive: 185 28 28;
  --color-destructive-foreground: 255 255 255;
  --color-destructive-text: 239 68 68;
  --color-border: 100 116 139;
  --color-input: 100 116 139;
  --color-ring: 3 105 161;

  /* ===== CHART TOKENS (DARK MODE) ===== */
  --chart-series-1: 96 165 250;
  --chart-series-2: 34 197 94;
  --chart-series-3: 180 117 255;
  --chart-series-4: 255 159 67;
  --chart-series-5: 245 158 11;
  --chart-series-6: 248 113 113;

  /* ===== PAIN TOKENS (DARK MODE) ===== */
  --color-pain-none: 34 197 94;
  --color-pain-mild: 110 231 183;
  --color-pain-moderate: 245 158 11;
  --color-pain-severe: 255 159 67;
  --color-pain-extreme: 248 113 113;

  /* ===== ADDITIONAL UI TOKENS ===== */
  --color-badge-bg: 255 249 196;
  --color-badge-foreground: 81 81 81;
  --dashboard-gap: 1rem;
  --metric-tooltip-bg: 241 245 249;
}

/* ===== LIGHT MODE OVERRIDE ===== */
:root:not(.dark) {
  --color-background: 248 250 252;
  --color-foreground: 15 23 42;
  --color-card: 255 255 255;
  --color-card-foreground: 15 23 42;
  --color-popover: 255 255 255;
  --color-popover-foreground: 15 23 42;
  --color-primary: 3 105 161;
  --color-primary-foreground: 255 255 255;
  --color-secondary: 21 128 61;
  --color-secondary-foreground: 255 255 255;
  --color-muted: 241 245 249;
  --color-muted-foreground: 71 85 105;
  --color-accent: 126 34 206;
  --color-accent-foreground: 255 255 255;
  --color-destructive: 185 28 28;
  --color-destructive-foreground: 255 255 255;
  --color-border: 100 116 139;
  --color-input: 100 116 139;
  --color-ring: 3 105 161;

  /* Chart tokens for light mode */
  --chart-series-1: 3 105 161;
  --chart-series-2: 21 128 61;
  --chart-series-3: 126 34 206;
  --chart-series-4: 194 65 12;
  --chart-series-5: 180 83 9;
  --chart-series-6: 185 28 28;

  /* Pain tokens for light mode */
  --color-pain-none: 21 128 61;
  --color-pain-mild: 4 120 87;
  --color-pain-moderate: 180 83 9;
  --color-pain-severe: 194 65 12;
  --color-pain-extreme: 185 28 28;
}

/* ===== DARK THEME EXPLICIT CLASS ===== */
/* Note: Dark mode values are already set in :root as the default.
   This selector exists only to ensure .dark and [data-theme="dark"] 
   properly override when switching from light mode. The values here
   must match :root exactly. Using CSS custom property inheritance
   means we only need to declare these when explicitly switching themes. */
.dark,
[data-theme="dark"] {
  /* Re-apply dark mode tokens to override light mode when theme changes */
  --color-success-text: 34 197 94;
  --color-warning-text: 245 158 11;
  --color-error-text: 239 68 68;
  --color-info-text: 14 165 233;
  /* Re-apply dark mode tokens to override light mode when theme changes */
  --color-background: 15 23 42;
  --color-foreground: 248 250 252;
  --color-card: 30 41 59;
  --color-card-foreground: 241 245 249;
  --color-popover: 30 41 59;
  --color-popover-foreground: 241 245 249;
  --color-primary: 3 105 161;
  --color-primary-foreground: 255 255 255;
  --color-primary-text: 14 165 233;
  --color-secondary: 21 128 61;
  --color-secondary-foreground: 255 255 255;
  --color-secondary-text: 34 197 94;
  --color-muted: 51 65 85;
  --color-muted-foreground: 203 213 225;
  --color-accent: 126 34 206;
  --color-accent-foreground: 255 255 255;
  --color-accent-text: 168 85 247;
  --color-destructive: 185 28 28;
  --color-destructive-foreground: 255 255 255;
  --color-destructive-text: 239 68 68;
  --color-border: 100 116 139;
  --color-input: 100 116 139;
  --color-ring: 3 105 161;

  /* Chart tokens */
  --chart-series-1: 96 165 250;
  --chart-series-2: 34 197 94;
  --chart-series-3: 180 117 255;
  --chart-series-4: 255 159 67;
  --chart-series-5: 245 158 11;
  --chart-series-6: 248 113 113;

  /* Pain tokens */
  --color-pain-none: 34 197 94;
  --color-pain-mild: 110 231 183;
  --color-pain-moderate: 245 158 11;
  --color-pain-severe: 255 159 67;
  --color-pain-extreme: 248 113 113;
}
